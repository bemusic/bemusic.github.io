<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>How to Host a Music Server · Bemuse</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="How to Host a Music Server · Bemuse"/><meta property="og:type" content="website"/><meta property="og:url" content="https://bemuse.ninja/project/index.html"/><meta property="og:description" content="&lt;div class=&quot;admonition warning&quot;&gt;"/><link rel="shortcut icon" href="/project/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700,300italic"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><link rel="stylesheet" href="/project/css/main.css"/></head><body class="sideNavVisible doc"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/project/"><img class="logo" src="/project/img/white-logo.png"/><h2 class="headerTitle">Bemuse</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://bemuse.ninja" target="_self">Play</a></li><li class="siteNavGroupActive"><a href="/project/docs/user-guide.html" target="_self">Docs</a></li><li class=""><a href="/project/en/contribute.html" target="_self">Contribute</a></li><li class=""><a href="https://discord.gg/aB6ucmx" target="_self">Discord</a></li><li class=""><a href="https://github.com/bemusic/bemuse" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Users</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Users</h3><ul><li class="navListItem"><a class="navItem" href="/project/docs/user-guide.html">User Guide</a></li><li class="navListItem"><a class="navItem" href="/project/docs/gameplay.html">Gameplay</a></li><li class="navListItem"><a class="navItem" href="/project/docs/scoring-and-judgment.html">Scoring and Judgment</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/project/docs/music-server.html">Music Server</a></li><li class="navListItem"><a class="navItem" href="/project/docs/bms-support.html">BMS Support</a></li><li class="navListItem"><a class="navItem" href="/project/docs/bms-extensions.html">BMS Extensions</a></li></ul></div><div class="navGroup navGroupActive"><h3>Developers</h3><ul><li class="navListItem"><a class="navItem" href="/project/docs/developer-guide.html">Developer Guide</a></li><li class="navListItem"><a class="navItem" href="/project/docs/architecture.html">Architecture</a></li><li class="navListItem"><a class="navItem" href="/project/docs/game-loop.html">The Game Loop</a></li><li class="navListItem"><a class="navItem" href="/project/docs/skinning.html">Skinning</a></li><li class="navListItem"><a class="navItem" href="/project/docs/options.html">Options</a></li><li class="navListItem"><a class="navItem" href="/project/docs/colors.html">Colors</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>How to Host a Music Server</h1></header><article><div><span><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This section is under construction.</p>
</div>
<p>Bemuse comes with a default music server to help new players get
started. This default music server contains a selection of songs that I
think are really nice. You can also run your own music server and play
it in Bemuse. This page describes how you can do it.</p>
<p>This page assumes some knowledge about using the command line and web hosting.</p>
<h2><a class="anchor" aria-hidden="true" id="prerequisites"></a><a href="#prerequisites" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisites</h2>
<h3><a class="anchor" aria-hidden="true" id="macos"></a><a href="#macos" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>macOS</h3>
<ul>
<li><a href="http://brew.sh/">Homebrew</a></li>
<li><a href="https://nodejs.org/">Node.js</a></li>
<li><a href="http://sox.sourceforge.net/">SoX</a>: <code>brew install sox --with-libvorbis</code></li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="prerequisite-check"></a><a href="#prerequisite-check" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisite Check</h4>
<p>Run these commands inside the Terminal.</p>
<p><strong>Node.js</strong>: You should see the version number:</p>
<pre><code class="hljs css bash">$ node -v
<span class="hljs-comment"># v9.8.0</span>
</code></pre>
<p><strong>SoX</strong>: You should see the SoX version:</p>
<pre><code class="hljs css bash">$ sox --version
<span class="hljs-comment"># sox:      SoX v14.4.2</span>
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On some devices, the SoX version number may not be displayed.</p>
</div>
<h3><a class="anchor" aria-hidden="true" id="windows"></a><a href="#windows" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Windows</h3>
<ul>
<li><a href="https://nodejs.org/">Node.js</a></li>
<li><a href="http://sox.sourceforge.net/">SoX</a>: Download from <a href="http://sourceforge.net/projects/sox/files/sox/">http://sourceforge.net/projects/sox/files/sox/</a></li>
<li><a href="http://www.apple.com/quicktime/download/">QuickTime Player</a> or <a href="http://www.apple.com/itunes/download/">iTunes</a></li>
<li><a href="https://sites.google.com/site/qaacpage/">qaac</a></li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="installation"></a><a href="#installation" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h4>
<p>Create a directory to store the program files. For example: <code>C:\Bemuse\vendor\bin</code>. Extract files into that folder. Your tree should look like this:</p>
<pre><code class="hljs">C:
└── Bemuse
    └── vendor
        └── bin
            ├── libflac-8.dll
            ├── libgcc_s_sjlj-1.dll
            ├── libgomp-1.dll
            ├── libid3tag-0.dll
            ├── libogg-0.dll
            ├── libpng16-16.dll
            ├── libsox-3.dll
            ├── libsoxconvolver64.dll
            ├── libsoxr64.dll
            ├── libssp-0.dll
            ├── libvorbis-0.dll
            ├── libvorbisenc-2.dll
            ├── libvorbisfile-3.dll
            ├── libwavpack-1.dll
            ├── libwinpthread-1.dll
            ├── qaac.exe
            ├── refalac.exe
            ├── sox.exe
            ├── wget.exe
            ├── wget.ini
            └── zlib1.dll
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="prerequisite-check"></a><a href="#prerequisite-check" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisite Check</h4>
<p>Open <strong>PowerShell</strong> (or Command Prompt) and add the PATH variable:</p>
<pre><code class="hljs css powershell">PS&gt; <span class="hljs-variable">$env:Path</span> += <span class="hljs-string">";C:\Bemuse\vendor\bin"</span>
</code></pre>
<p><strong>Node.js</strong>: You should see the version number:</p>
<pre><code class="hljs css powershell">PS&gt; node -v
<span class="hljs-comment"># v9.8.0</span>
</code></pre>
<p><strong>SoX</strong>: You should see the version number:</p>
<pre><code class="hljs css powershell">PS&gt; sox --version
<span class="hljs-comment"># C:\Bemuse\vendor\bin\sox.exe:      SoX v14.4.2</span>
</code></pre>
<p><strong>qaac</strong>: You should see the help text:</p>
<pre><code class="hljs css powershell">PS&gt; qaac
<span class="hljs-comment"># qaac 2.47</span>
<span class="hljs-comment"># Usage: qaac [options] infiles....</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment"># ...</span>
<span class="hljs-comment"># ...</span>
<span class="hljs-comment"># ...</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="a-music-server"></a><a href="#a-music-server" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A Music Server</h2>
<p>A music server is simply a web server that hosts the files in a specific
structure, which allows Bemuse to find the list of songs and the song
data. A Bemuse music server has the following structure:</p>
<pre><code class="hljs">(root of the server)
├── index.cache
├── index.json
└── [song_title]/
    ├── bms1.bme
    ├── bms2.bml
    └── assets/
        ├── metadata.json
        └── (something).bemuse
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="indexjson"></a><a href="#indexjson" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>index.json</code></h3>
<p>This file holds the list of all available songs and charts in this
server. It also includes some metadata information.</p>
<p>When entering the game, Bemuse will download this file to create the
song list that you see in the music selection screen.</p>
<h3><a class="anchor" aria-hidden="true" id="song-directory"></a><a href="#song-directory" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Song directory</h3>
<p>Besides the <code>index.json</code> file is a song directory. This directory
contains the BMS files and the assets folder, a <strong>Bemuse assets
package</strong>.</p>
<p>This file is generated using the Bemuse tools, which we will cover in
the next section.</p>
<h3><a class="anchor" aria-hidden="true" id="bemuse-assets-package"></a><a href="#bemuse-assets-package" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bemuse assets package</h3>
<p>Usually, a BMS package will come with hundreds (or even thousands) of
sound files (the keysounds). It is not suitable for serving over the
web. Sometimes, they are <code>.wav</code> files and usually, they are <code>.ogg</code>
files. Wave files are too large, and not all browsers can play OGG
files.</p>
<p>A Bemuse asset package contains the keysounds in OGG and M4A format,
because most browsers can play these file formats. These sound files are
grouped together into multiple parts. Each part is approximately 1.4 MB
large.</p>
<p>The Bemuse assets package is also generated using the Bemuse tools,
which we will cover in the next section.</p>
<h2><a class="anchor" aria-hidden="true" id="install-bemuse-tools"></a><a href="#install-bemuse-tools" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install Bemuse Tools</h2>
<p>Bemuse Tools is a command line application to help you generate files for Bemuse music server. Install it using the <strong>npm</strong> command, which comes with Node.js:</p>
<pre><code class="hljs css powershell">PS&gt; npm install -g bemuse-tools
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="installation-check"></a><a href="#installation-check" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation Check</h3>
<p>Run the following command:</p>
<pre><code class="hljs css powershell">PS&gt; bemuse-tools
</code></pre>
<p>It should display the version:</p>
<pre><code class="hljs">This is bemuse-tools v1.1.0-beta.1

  bemuse-tools: Tools for Bemuse

  index [-r] — Index BMS files in current directory
  pack &lt;path&gt; — Packs sounds and BGAs into assets folder
  server &lt;path&gt; — Serves a Bemuse server (no indexing or conversion)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="creating-your-server-folder"></a><a href="#creating-your-server-folder" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating Your Server Folder</h2>
<p>Extract your BMS files into a folder. One song per folder. For example:</p>
<pre><code class="hljs">C:
└── Bemuse
    └── myserver
        ├── song1
        │   ├── song1_N.bms
        │   ├── song1_H.bms
        │   ├── song1_A.bms
        │   ├── bass.wav
        │   └── kick.wav
        └── song2
            ├── song2_N.bms
            ├── song2_H.bms
            ├── song2_A.bms
            ├── go.wav
            ├── back.wav
            ├── to.wav
            ├── your.wav
            └── rave.wav
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="creating-bemuse-packages"></a><a href="#creating-bemuse-packages" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating Bemuse Packages</h2>
<p>Normally, a BMS package comes in <code>.rar</code> or <code>.zip</code>format. Inside that package, there are few BMS files and hundreds of sound files.</p>
<p>It's not practical to extract <code>.rar</code> or <code>.zip</code> files in the browser. It's also not practical to download hundreds of small files (very slow).</p>
<p>In Bemuse, keysounds are packed into <code>.bemuse</code> format. They are split into many parts. Each part is about 1.4mb.</p>
<p>Inside Terminal or Powershell, <code>cd</code> to the server folder:</p>
<pre><code class="hljs css powershell">PS&gt; cd C:\Bemuse\myserver
</code></pre>
<p>Then invoke <code>bemuse-tools pack</code> with the folder you want to pack:</p>
<pre><code class="hljs css powershell">PS&gt; bemuse-tools pack <span class="hljs-string">'Lapis - SHIKI'</span>
<span class="hljs-comment"># -&gt; Loading audios</span>
<span class="hljs-comment"># -&gt; Loading movies</span>
<span class="hljs-comment"># -&gt; Loading and converting images</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment"># -&gt; Converting audio to ogg [better audio performance]</span>
<span class="hljs-comment"># .....................................................................................................</span>
<span class="hljs-comment"># ..................................................</span>
<span class="hljs-comment"># -&gt; Converting audio to m4a [for iOS and Safari]</span>
<span class="hljs-comment"># .....................................................................................................</span>
<span class="hljs-comment"># ..................................................</span>
<span class="hljs-comment"># -&gt; Writing...</span>
<span class="hljs-comment"># Written m4a.1.550eda0a.bemuse</span>
<span class="hljs-comment"># Written m4a.2.50a08444.bemuse</span>
<span class="hljs-comment"># Written m4a.3.6b0990a9.bemuse</span>
<span class="hljs-comment"># ...</span>
<span class="hljs-comment"># Written metadata.json</span>
</code></pre>
<p>Now if you look at your song folder, you should see a new folder called <strong>assets</strong>:</p>
<pre><code class="hljs">Lapis - SHIKI
├── assets
│   ├── bga.1.e0a51d24.bemuse
│   ├── bga.2.d582293b.bemuse
│   ├── bga.3.28d51957.bemuse
│   │   ...
│   ├── m4a.1.550eda0a.bemuse
│   ├── m4a.2.50a08444.bemuse
│   ├── m4a.3.6b0990a9.bemuse
│   │   ...
│   ├── metadata.json
│   ├── ogg.1.d9bfef56.bemuse
│   ├── ogg.2.2105f7cc.bemuse
│   └── ogg.3.766f65d4.bemuse
│       ...
├── ba11.ogg
├── ba12.ogg
├── ba13.ogg
│   ...
├── lapis5key.bms
├── lapis7keya.bme
├── lapis7keyl.bme
│   ...
├── syn9.ogg
└── synpad.ogg
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="creating-index-file"></a><a href="#creating-index-file" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating Index File</h2>
<p>Now, the client needs to know what songs are available in the server. You need to create an index file. You can do it by running this command in the server folder:</p>
<pre><code class="hljs css powershell">PS&gt; bemuse-tools index
<span class="hljs-comment"># </span>
<span class="hljs-comment"># Absurd Gaff - siromaru       160bpm [schranz] siromaru / BMSSP-Absurd Gaff 3 6 8 10 10 21 [no-meta]</span>
<span class="hljs-comment"># ametsuchi - stereoberry      122bpm [discopunk / shoegazer] stereoberry / BMSSP-ametsuchi 1 3 5 5 8 [no-meta]</span>
<span class="hljs-comment"># atonement you you - unknown  197bpm [NO GENRE] Unknown Artist / BMSSP-atonement you you 4 6 [no-meta]</span>
<span class="hljs-comment"># AVALON - Team.SASAKURATION   200bpm [Ω] Team:SASAKURATION-AVALON 0 5 6 10 10 12 12 [no-me ta]</span>
<span class="hljs-comment"># ...</span>
</code></pre>
<p>After running, you will see these <code>index.json</code> and <code>index.cache</code> appear in your folder:</p>
<pre><code class="hljs">myserver
├── AVALON - Team.SASAKURATION
├── Absurd Gaff - siromaru
├── Declinin' - ____(sta)
├── HE is an Energizer - Mr.ABC
├── I'll_forget_you_you'll_never_forget_me - mommy
├── Lapis - SHIKI
│   ...
├── index.cache
└── index.json
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="hosting"></a><a href="#hosting" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hosting</h2>
<h3><a class="anchor" aria-hidden="true" id="on-dropbox"></a><a href="#on-dropbox" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>On Dropbox</h3>
<p>TODO</p>
<h3><a class="anchor" aria-hidden="true" id="on-a-web-server"></a><a href="#on-a-web-server" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>On a Web Server</h3>
<p>Upload <code>index.json</code>, all <code>*.bemuse</code> and <code>*.bms/bme/bml</code> files to a web server. Make sure the directory layout is the same. <a href="http://enable-cors.org/">Enable cross-origin resource sharing</a> on your web server to allow Bemuse client to connect.</p>
<p>To connect to the music server, go to <code>http://bemuse.ninja/?server=&lt;your URL&gt;</code>.</p>
<p>Example: <a href="http://bemuse.ninja/?server=http://flicknote.bemuse.ninja/bemuse/mumei12">http://bemuse.ninja/?server=http://flicknote.bemuse.ninja/bemuse/mumei12</a></p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="scoring-and-judgment.html">← Scoring and Judgment</a><a class="docs-next button" href="bms-support.html">BMS Support in Bemuse →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/project/" class="nav-home"><img src="/project/img/white-logo.png" alt="Bemuse" width="66" height="58"/></a><div><h5>Docs</h5><a href="/project/docs/en/user-guide.html">User Documentation</a><a href="/project/docs/en/developer-guide.html">Developer Documentation</a></div><div><h5>Community</h5><a href="https://github.com/bemusic/bemuse">GitHub Project</a><a href="https://discord.gg/aB6ucmx">Chat on Discord</a></div><div><h5>Social</h5><a href="https://twitter.com/bemusegame" target="_blank">Twitter @bemusegame</a></div></section><section class="copyright">Copyright © 2018 Bemuse Team</section></footer></div></body></html>