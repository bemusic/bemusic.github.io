webpackJsonp([2,8],[,,function(e,t,n){(function(t){"use strict";var n=function(e,n,r,i,o,a,s,u){if("production"!==t.env.NODE_ENV&&void 0===n)throw new Error("invariant requires an error message argument");if(!e){var c;if(void 0===n)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,i,o,a,s,u],f=0;c=new Error("Invariant Violation: "+n.replace(/%s/g,function(){return l[f++]}))}throw c.framesToPop=1,c}};e.exports=n}).call(t,n(1))},function(e,t,n){"use strict";function r(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(e),r=Object.prototype.hasOwnProperty,i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o){var a=Object(o);for(var s in a)r.call(a,s)&&(n[s]=a[s])}}return n}e.exports=r},function(e,t,n){(function(t){"use strict";function r(e,n){Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:function(){return this._store?this._store[n]:null},set:function(e){"production"!==t.env.NODE_ENV?u(!1,"Don't set the %s property of the React element. Instead, specify the correct value when initially creating the element.",n):null,this._store[n]=e}})}function i(e){try{var t={props:!0};for(var n in t)r(e,n);l=!0}catch(i){}}var o=n(56),a=n(17),s=n(3),u=n(5),c={key:!0,ref:!0},l=!1,f=function(e,n,r,i,o,a){if(this.type=e,this.key=n,this.ref=r,this._owner=i,this._context=o,"production"!==t.env.NODE_ENV){this._store={props:a,originalProps:s({},a)};try{Object.defineProperty(this._store,"validated",{configurable:!1,enumerable:!1,writable:!0})}catch(u){}if(this._store.validated=!1,l)return void Object.freeze(this)}this.props=a};f.prototype={_isReactElement:!0},"production"!==t.env.NODE_ENV&&i(f.prototype),f.createElement=function(e,t,n){var r,i={},s=null,u=null;if(null!=t){u=void 0===t.ref?null:t.ref,s=void 0===t.key?null:""+t.key;for(r in t)t.hasOwnProperty(r)&&!c.hasOwnProperty(r)&&(i[r]=t[r])}var l=arguments.length-2;if(1===l)i.children=n;else if(l>1){for(var h=Array(l),p=0;l>p;p++)h[p]=arguments[p+2];i.children=h}if(e&&e.defaultProps){var d=e.defaultProps;for(r in d)"undefined"==typeof i[r]&&(i[r]=d[r])}return new f(e,s,u,a.current,o.current,i)},f.createFactory=function(e){var t=f.createElement.bind(null,e);return t.type=e,t},f.cloneAndReplaceProps=function(e,n){var r=new f(e.type,e.key,e.ref,e._owner,e._context,n);return"production"!==t.env.NODE_ENV&&(r._store.validated=e._store.validated),r},f.cloneElement=function(e,t,n){var r,i=s({},e.props),o=e.key,u=e.ref,l=e._owner;if(null!=t){void 0!==t.ref&&(u=t.ref,l=a.current),void 0!==t.key&&(o=""+t.key);for(r in t)t.hasOwnProperty(r)&&!c.hasOwnProperty(r)&&(i[r]=t[r])}var h=arguments.length-2;if(1===h)i.children=n;else if(h>1){for(var p=Array(h),d=0;h>d;d++)p[d]=arguments[d+2];i.children=p}return new f(e.type,o,u,l,e._context,i)},f.isValidElement=function(e){var t=!(!e||!e._isReactElement);return t},e.exports=f}).call(t,n(1))},function(e,t,n){(function(t){"use strict";var r=n(19),i=r;"production"!==t.env.NODE_ENV&&(i=function(e,t){for(var n=[],r=2,i=arguments.length;i>r;r++)n.push(arguments[r]);if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(t.length<10||/^[s\W]*$/.test(t))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+t);if(0!==t.indexOf("Failed Composite propType: ")&&!e){var o=0,a="Warning: "+t.replace(/%s/g,function(){return n[o++]});console.warn(a);try{throw new Error(a)}catch(s){}}}),e.exports=i}).call(t,n(1))},function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},function(e,t,n){e.exports=n(139)},,,function(e,t,n){"use strict";var r=n(33),i=r({bubbled:null,captured:null}),o=r({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),a={topLevelTypes:o,PropagationPhases:i};e.exports=a},function(e,t,n){(function(t){"use strict";function r(e,n,r){for(var i in n)n.hasOwnProperty(i)&&("production"!==t.env.NODE_ENV?C("function"==typeof n[i],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e.displayName||"ReactClass",b[r],i):null)}function i(e,n){var r=O.hasOwnProperty(n)?O[n]:null;j.hasOwnProperty(n)&&("production"!==t.env.NODE_ENV?_(r===A.OVERRIDE_BASE,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",n):_(r===A.OVERRIDE_BASE)),e.hasOwnProperty(n)&&("production"!==t.env.NODE_ENV?_(r===A.DEFINE_MANY||r===A.DEFINE_MANY_MERGED,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n):_(r===A.DEFINE_MANY||r===A.DEFINE_MANY_MERGED))}function o(e,n){if(n){"production"!==t.env.NODE_ENV?_("function"!=typeof n,"ReactClass: You're attempting to use a component class as a mixin. Instead, just use a regular object."):_("function"!=typeof n),"production"!==t.env.NODE_ENV?_(!d.isValidElement(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object."):_(!d.isValidElement(n));var r=e.prototype;n.hasOwnProperty(S)&&M.mixins(e,n.mixins);for(var o in n)if(n.hasOwnProperty(o)&&o!==S){var a=n[o];if(i(r,o),M.hasOwnProperty(o))M[o](e,a);else{var s=O.hasOwnProperty(o),l=r.hasOwnProperty(o),f=a&&a.__reactDontBind,h="function"==typeof a,p=h&&!s&&!l&&!f;if(p)r.__reactAutoBindMap||(r.__reactAutoBindMap={}),r.__reactAutoBindMap[o]=a,r[o]=a;else if(l){var m=O[o];"production"!==t.env.NODE_ENV?_(s&&(m===A.DEFINE_MANY_MERGED||m===A.DEFINE_MANY),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",m,o):_(s&&(m===A.DEFINE_MANY_MERGED||m===A.DEFINE_MANY)),m===A.DEFINE_MANY_MERGED?r[o]=u(r[o],a):m===A.DEFINE_MANY&&(r[o]=c(r[o],a))}else r[o]=a,"production"!==t.env.NODE_ENV&&"function"==typeof a&&n.displayName&&(r[o].displayName=n.displayName+"_"+o)}}}}function a(e,n){if(n)for(var r in n){var i=n[r];if(n.hasOwnProperty(r)){var o=r in M;"production"!==t.env.NODE_ENV?_(!o,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r):_(!o);var a=r in e;"production"!==t.env.NODE_ENV?_(!a,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r):_(!a),e[r]=i}}}function s(e,n){"production"!==t.env.NODE_ENV?_(e&&n&&"object"==typeof e&&"object"==typeof n,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."):_(e&&n&&"object"==typeof e&&"object"==typeof n);for(var r in n)n.hasOwnProperty(r)&&("production"!==t.env.NODE_ENV?_(void 0===e[r],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r):_(void 0===e[r]),e[r]=n[r]);return e}function u(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return s(i,n),s(i,r),i}}function c(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function l(e,n){var r=n.bind(e);if("production"!==t.env.NODE_ENV){r.__reactBoundContext=e,r.__reactBoundMethod=n,r.__reactBoundArguments=null;var i=e.constructor.displayName,o=r.bind;r.bind=function(a){for(var s=[],u=1,c=arguments.length;c>u;u++)s.push(arguments[u]);if(a!==e&&null!==a)"production"!==t.env.NODE_ENV?C(!1,"bind(): React component methods may only be bound to the component instance. See %s",i):null;else if(!s.length)return"production"!==t.env.NODE_ENV?C(!1,"bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See %s",i):null,r;var l=o.apply(r,arguments);return l.__reactBoundContext=e,l.__reactBoundMethod=n,l.__reactBoundArguments=s,l}}return r}function f(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=l(e,m.guard(n,e.constructor.displayName+"."+t))}}var h=n(78),p=n(17),d=n(4),m=n(157),v=n(25),g=n(59),y=n(60),b=n(40),x=n(61),w=n(3),_=n(2),E=n(33),T=n(20),C=n(5),S=T({mixins:null}),A=E({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),k=[],O={mixins:A.DEFINE_MANY,statics:A.DEFINE_MANY,propTypes:A.DEFINE_MANY,contextTypes:A.DEFINE_MANY,childContextTypes:A.DEFINE_MANY,getDefaultProps:A.DEFINE_MANY_MERGED,getInitialState:A.DEFINE_MANY_MERGED,getChildContext:A.DEFINE_MANY_MERGED,render:A.DEFINE_ONCE,componentWillMount:A.DEFINE_MANY,componentDidMount:A.DEFINE_MANY,componentWillReceiveProps:A.DEFINE_MANY,shouldComponentUpdate:A.DEFINE_ONCE,componentWillUpdate:A.DEFINE_MANY,componentDidUpdate:A.DEFINE_MANY,componentWillUnmount:A.DEFINE_MANY,updateComponent:A.OVERRIDE_BASE},M={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)o(e,t[n])},childContextTypes:function(e,n){"production"!==t.env.NODE_ENV&&r(e,n,y.childContext),e.childContextTypes=w({},e.childContextTypes,n)},contextTypes:function(e,n){"production"!==t.env.NODE_ENV&&r(e,n,y.context),e.contextTypes=w({},e.contextTypes,n)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=u(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,n){"production"!==t.env.NODE_ENV&&r(e,n,y.prop),e.propTypes=w({},e.propTypes,n)},statics:function(e,t){a(e,t)}},N={enumerable:!1,get:function(){var e=this.displayName||this.name||"Component";return"production"!==t.env.NODE_ENV?C(!1,"%s.type is deprecated. Use %s directly to access the class.",e,e):null,Object.defineProperty(this,"type",{value:this}),this}},j={replaceState:function(e,t){x.enqueueReplaceState(this,e),t&&x.enqueueCallback(this,t)},isMounted:function(){if("production"!==t.env.NODE_ENV){var e=p.current;null!==e&&("production"!==t.env.NODE_ENV?C(e._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",e.getName()||"A component"):null,e._warnedAboutRefsInRender=!0)}var n=v.get(this);return n&&n!==g.currentlyMountingInstance},setProps:function(e,t){x.enqueueSetProps(this,e),t&&x.enqueueCallback(this,t)},replaceProps:function(e,t){x.enqueueReplaceProps(this,e),t&&x.enqueueCallback(this,t)}},R=function(){};w(R.prototype,h.prototype,j);var P={createClass:function(e){var n=function(e,r){"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?C(this instanceof n,"Something is calling a React component directly. Use a factory or JSX instead. See: http://fb.me/react-legacyfactory"):null),this.__reactAutoBindMap&&f(this),this.props=e,this.context=r,this.state=null;var i=this.getInitialState?this.getInitialState():null;"production"!==t.env.NODE_ENV&&"undefined"==typeof i&&this.getInitialState._isMockFunction&&(i=null),"production"!==t.env.NODE_ENV?_("object"==typeof i&&!Array.isArray(i),"%s.getInitialState(): must return an object or null",n.displayName||"ReactCompositeComponent"):_("object"==typeof i&&!Array.isArray(i)),this.state=i};n.prototype=new R,n.prototype.constructor=n,k.forEach(o.bind(null,n)),o(n,e),n.getDefaultProps&&(n.defaultProps=n.getDefaultProps()),"production"!==t.env.NODE_ENV&&(n.getDefaultProps&&(n.getDefaultProps.isReactClassApproved={}),n.prototype.getInitialState&&(n.prototype.getInitialState.isReactClassApproved={})),"production"!==t.env.NODE_ENV?_(n.prototype.render,"createClass(...): Class specification must implement a `render` method."):_(n.prototype.render),"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?C(!n.prototype.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",e.displayName||"A component"):null);for(var r in O)n.prototype[r]||(n.prototype[r]=null);if(n.type=n,"production"!==t.env.NODE_ENV)try{Object.defineProperty(n,"type",N)}catch(i){}return n},injection:{injectMixin:function(e){k.push(e)}}};e.exports=P}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;n>r;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function i(e){var t=N(e);return t&&Y.getID(t)}function o(e){var n=a(e);if(n)if(B.hasOwnProperty(n)){var r=B[n];r!==e&&("production"!==t.env.NODE_ENV?R(!l(r,n),"ReactMount: Two valid but unequal nodes with the same `%s`: %s",F,n):R(!l(r,n)),B[n]=e)}else B[n]=e;return n}function a(e){return e&&e.getAttribute&&e.getAttribute(F)||""}function s(e,t){var n=a(e);n!==t&&delete B[n],e.setAttribute(F,t),B[t]=e}function u(e){return B.hasOwnProperty(e)&&l(B[e],e)||(B[e]=Y.findReactNodeByID(e)),B[e]}function c(e){var t=E.get(e)._rootNodeID;return w.isNullComponentID(t)?null:(B.hasOwnProperty(t)&&l(B[t],t)||(B[t]=Y.findReactNodeByID(t)),B[t])}function l(e,n){if(e){"production"!==t.env.NODE_ENV?R(a(e)===n,"ReactMount: Unexpected modification of `%s`",F):R(a(e)===n);var r=Y.findReactContainerForID(n);if(r&&M(r,e))return!0}return!1}function f(e){delete B[e]}function h(e){var t=B[e];return t&&l(t,e)?void(z=t):!1}function p(e){z=null,_.traverseAncestors(e,h);var t=z;return z=null,t}function d(e,t,n,r,i){var o=S.mountComponent(e,t,r,O);e._isTopLevel=!0,Y._mountImageIntoNode(o,n,i)}function m(e,t,n,r){var i=k.ReactReconcileTransaction.getPooled();i.perform(d,null,e,t,n,i,r),k.ReactReconcileTransaction.release(i)}var v=n(21),g=n(23),y=n(17),b=n(4),x=n(31),w=n(58),_=n(24),E=n(25),T=n(82),C=n(18),S=n(26),A=n(61),k=n(13),O=n(43),M=n(88),N=n(189),j=n(67),R=n(2),P=n(69),D=n(70),I=n(5),L=_.SEPARATOR,F=v.ID_ATTRIBUTE_NAME,B={},U=1,q=9,V={},W={};if("production"!==t.env.NODE_ENV)var G={};var H=[],z=null,Y={_instancesByReactRootID:V,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,n,r,o){return"production"!==t.env.NODE_ENV&&x.checkAndWarnForMutatedProps(n),Y.scrollMonitor(r,function(){A.enqueueElementInternal(e,n),o&&A.enqueueCallbackInternal(e,o)}),"production"!==t.env.NODE_ENV&&(G[i(r)]=N(r)),e},_registerComponent:function(e,n){"production"!==t.env.NODE_ENV?R(n&&(n.nodeType===U||n.nodeType===q),"_registerComponent(...): Target container is not a DOM element."):R(n&&(n.nodeType===U||n.nodeType===q)),g.ensureScrollValueMonitoring();var r=Y.registerContainer(n);return V[r]=e,r},_renderNewRootComponent:function(e,n,r){"production"!==t.env.NODE_ENV?I(null==y.current,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."):null;var i=j(e,null),o=Y._registerComponent(i,n);return k.batchedUpdates(m,i,o,n,r),"production"!==t.env.NODE_ENV&&(G[o]=N(n)),i},render:function(e,n,r){"production"!==t.env.NODE_ENV?R(b.isValidElement(e),"React.render(): Invalid component element.%s","string"==typeof e?" Instead of passing an element string, make sure to instantiate it by passing it to React.createElement.":"function"==typeof e?" Instead of passing a component class, make sure to instantiate it by passing it to React.createElement.":null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":""):R(b.isValidElement(e));var o=V[i(n)];if(o){var a=o._currentElement;if(D(a,e))return Y._updateRootComponent(o,e,n,r).getPublicInstance();Y.unmountComponentAtNode(n)}var s=N(n),u=s&&Y.isRenderedByReact(s);if("production"!==t.env.NODE_ENV&&(!u||s.nextSibling))for(var c=s;c;){if(Y.isRenderedByReact(c)){"production"!==t.env.NODE_ENV?I(!1,"render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup."):null;break}c=c.nextSibling}var l=u&&!o,f=Y._renderNewRootComponent(e,n,l).getPublicInstance();return r&&r.call(f),f},constructAndRenderComponent:function(e,t,n){var r=b.createElement(e,t);return Y.render(r,n)},constructAndRenderComponentByID:function(e,n,r){var i=document.getElementById(r);return"production"!==t.env.NODE_ENV?R(i,'Tried to get element with id of "%s" but it is not present on the page.',r):R(i),Y.constructAndRenderComponent(e,n,i)},registerContainer:function(e){var t=i(e);return t&&(t=_.getReactRootIDFromNodeID(t)),t||(t=_.createReactRootID()),W[t]=e,t},unmountComponentAtNode:function(e){"production"!==t.env.NODE_ENV?I(null==y.current,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."):null,"production"!==t.env.NODE_ENV?R(e&&(e.nodeType===U||e.nodeType===q),"unmountComponentAtNode(...): Target container is not a DOM element."):R(e&&(e.nodeType===U||e.nodeType===q));var n=i(e),r=V[n];return r?(Y.unmountComponentFromNode(r,e),delete V[n],delete W[n],"production"!==t.env.NODE_ENV&&delete G[n],!0):!1},unmountComponentFromNode:function(e,t){for(S.unmountComponent(e),t.nodeType===q&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var n=_.getReactRootIDFromNodeID(e),r=W[n];if("production"!==t.env.NODE_ENV){var i=G[n];if(i&&i.parentNode!==r){"production"!==t.env.NODE_ENV?R(a(i)===n,"ReactMount: Root element ID differed from reactRootID."):R(a(i)===n);var o=r.firstChild;o&&n===a(o)?G[n]=o:"production"!==t.env.NODE_ENV?I(!1,"ReactMount: Root element has been removed from its original container. New container:",i.parentNode):null}}return r},findReactNodeByID:function(e){var t=Y.findReactContainerForID(e);return Y.findComponentRoot(t,e)},isRenderedByReact:function(e){if(1!==e.nodeType)return!1;var t=Y.getID(e);return t?t.charAt(0)===L:!1},getFirstReactDOM:function(e){for(var t=e;t&&t.parentNode!==t;){if(Y.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,n){var r=H,i=0,o=p(n)||e;for(r[0]=o.firstChild,r.length=1;i<r.length;){for(var a,s=r[i++];s;){var u=Y.getID(s);u?n===u?a=s:_.isAncestorIDOf(u,n)&&(r.length=i=0,r.push(s.firstChild)):r.push(s.firstChild),s=s.nextSibling}if(a)return r.length=0,a}r.length=0,"production"!==t.env.NODE_ENV?R(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",n,Y.getID(e)):R(!1)},_mountImageIntoNode:function(e,n,i){if("production"!==t.env.NODE_ENV?R(n&&(n.nodeType===U||n.nodeType===q),"mountComponentIntoNode(...): Target container is not valid."):R(n&&(n.nodeType===U||n.nodeType===q)),i){var o=N(n);if(T.canReuseMarkup(e,o))return;var a=o.getAttribute(T.CHECKSUM_ATTR_NAME);o.removeAttribute(T.CHECKSUM_ATTR_NAME);var s=o.outerHTML;o.setAttribute(T.CHECKSUM_ATTR_NAME,a);var u=r(e,s),c=" (client) "+e.substring(u-20,u+20)+"\n (server) "+s.substring(u-20,u+20);"production"!==t.env.NODE_ENV?R(n.nodeType!==q,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side:\n%s",c):R(n.nodeType!==q),"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?I(!1,"React attempted to reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server:\n%s",c):null)}"production"!==t.env.NODE_ENV?R(n.nodeType!==q,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See React.renderToString() for server rendering."):R(n.nodeType!==q),P(n,e)},getReactRootID:i,getID:o,setID:s,getNode:u,getNodeFromInstance:c,purgeID:f};C.measureMethods(Y,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),e.exports=Y}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(){"production"!==t.env.NODE_ENV?g(k.ReactReconcileTransaction&&_,"ReactUpdates: must inject a reconcile transaction class and batching strategy"):g(k.ReactReconcileTransaction&&_)}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=l.getPooled(),this.reconcileTransaction=k.ReactReconcileTransaction.getPooled()}function o(e,t,n,i,o){r(),_.batchedUpdates(e,t,n,i,o)}function a(e,t){return e._mountOrder-t._mountOrder}function s(e){var n=e.dirtyComponentsLength;"production"!==t.env.NODE_ENV?g(n===b.length,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",n,b.length):g(n===b.length),b.sort(a);for(var r=0;n>r;r++){var i=b[r],o=i._pendingCallbacks;if(i._pendingCallbacks=null,d.performUpdateIfNecessary(i,e.reconcileTransaction),o)for(var s=0;s<o.length;s++)e.callbackQueue.enqueue(o[s],i.getPublicInstance())}}function u(e){return r(),"production"!==t.env.NODE_ENV?y(null==h.current,"enqueueUpdate(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."):null,_.isBatchingUpdates?void b.push(e):void _.batchedUpdates(u,e)}function c(e,n){"production"!==t.env.NODE_ENV?g(_.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."):g(_.isBatchingUpdates),x.enqueue(e,n),w=!0}var l=n(50),f=n(15),h=n(17),p=n(18),d=n(26),m=n(42),v=n(3),g=n(2),y=n(5),b=[],x=l.getPooled(),w=!1,_=null,E={initialize:function(){this.dirtyComponentsLength=b.length},close:function(){this.dirtyComponentsLength!==b.length?(b.splice(0,this.dirtyComponentsLength),S()):b.length=0}},T={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},C=[E,T];v(i.prototype,m.Mixin,{getTransactionWrappers:function(){return C},destructor:function(){this.dirtyComponentsLength=null,l.release(this.callbackQueue),this.callbackQueue=null,k.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return m.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),f.addPoolingTo(i);var S=function(){for(;b.length||w;){if(b.length){var e=i.getPooled();e.perform(s,null,e),i.release(e)}if(w){w=!1;var t=x;x=l.getPooled(),t.notifyAll(),l.release(t)}}};S=p.measure("ReactUpdates","flushBatchedUpdates",S);var A={injectReconcileTransaction:function(e){"production"!==t.env.NODE_ENV?g(e,"ReactUpdates: must provide a reconcile transaction class"):g(e),k.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){"production"!==t.env.NODE_ENV?g(e,"ReactUpdates: must provide a batching strategy"):g(e),"production"!==t.env.NODE_ENV?g("function"==typeof e.batchedUpdates,"ReactUpdates: must provide a batchedUpdates() function"):g("function"==typeof e.batchedUpdates),"production"!==t.env.NODE_ENV?g("boolean"==typeof e.isBatchingUpdates,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"):g("boolean"==typeof e.isBatchingUpdates),_=e}},k={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:u,flushBatchedUpdates:S,injection:A,asap:c};e.exports=k}).call(t,n(1))},function(e,t,n){var r;(function(e,i){(function(){function o(e,t){if(e!==t){var n=e===e,r=t===t;if(e>t||!n||e===A&&r)return 1;if(t>e||!r||t===A&&n)return-1}return 0}function a(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function s(e,t,n){if(t!==t)return y(e,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function u(e){return"function"==typeof e||!1}function c(e){return"string"==typeof e?e:null==e?"":e+""}function l(e){return e.charCodeAt(0)}function f(e,t){for(var n=-1,r=e.length;++n<r&&t.indexOf(e.charAt(n))>-1;);return n}function h(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function p(e,t){return o(e.criteria,t.criteria)||e.index-t.index}function d(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,s=i.length,u=n.length;++r<s;){var c=o(i[r],a[r]);if(c)return r>=u?c:c*(n[r]?1:-1)}return e.index-t.index}function m(e){return Ye[e]}function v(e){return Xe[e]}function g(e){return"\\"+Ke[e]}function y(e,t,n){for(var r=e.length,i=t+(n?0:-1);n?i--:++i<r;){var o=e[i];if(o!==o)return i}return-1}function b(e){return!!e&&"object"==typeof e}function x(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function w(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;)e[n]===t&&(e[n]=z,o[++i]=n);return o}function _(e,t){for(var n,r=-1,i=e.length,o=-1,a=[];++r<i;){var s=e[r],u=t?t(s,r,e):s;r&&n===u||(n=u,a[++o]=s)}return a}function E(e){for(var t=-1,n=e.length;++t<n&&x(e.charCodeAt(t)););return t}function T(e){for(var t=e.length;t--&&x(e.charCodeAt(t)););return t}function C(e){return $e[e]}function S(e){function t(e){if(b(e)&&!Es(e)&&!(e instanceof i)){if(e instanceof r)return e;if(qo.call(e,"__chain__")&&qo.call(e,"__wrapped__"))return ir(e)}return new r(e)}function n(){}function r(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function i(e){this.__wrapped__=e,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=xa,this.__views__=null}function x(){var e=this.__actions__,t=this.__iteratees__,n=this.__views__,r=new i(this.__wrapped__);return r.__actions__=e?et(e):null,r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=t?et(t):null,r.__takeCount__=this.__takeCount__,r.__views__=n?et(n):null,r}function Z(){if(this.__filtered__){var e=new i(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function re(){var e=this.__wrapped__.value();if(!Es(e))return en(e,this.__actions__);var t=this.__dir__,n=0>t,r=Fn(0,e.length,this.__views__),i=r.start,o=r.end,a=o-i,s=n?o:i-1,u=da(a,this.__takeCount__),c=this.__iteratees__,l=c?c.length:0,f=0,h=[];e:for(;a--&&u>f;){s+=t;for(var p=-1,d=e[s];++p<l;){var m=c[p],v=m.iteratee,g=m.type;if(g==V){if(m.done&&(n?s>m.index:s<m.index)&&(m.count=0,m.done=!1),m.index=s,!m.done){var y=m.limit;if(!(m.done=y>-1?m.count++>=y:!v(d)))continue e}}else{var b=v(d);if(g==G)d=b;else if(!b){if(g==W)continue e;break e}}}h[f++]=d}return h}function oe(){this.__data__={}}function Ye(e){return this.has(e)&&delete this.__data__[e]}function Xe(e){return"__proto__"==e?A:this.__data__[e]}function $e(e){return"__proto__"!=e&&qo.call(this.__data__,e)}function Je(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function Ke(e){var t=e?e.length:0;for(this.data={hash:la(null),set:new na};t--;)this.push(e[t])}function Qe(e,t){var n=e.data,r="string"==typeof t||wi(t)?n.set.has(t):n.hash[t];return r?0:-1}function Ze(e){var t=this.data;"string"==typeof e||wi(e)?t.set.add(e):t.hash[e]=!0}function et(e,t){var n=-1,r=e.length;for(t||(t=So(r));++n<r;)t[n]=e[n];return t}function tt(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function nt(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}function ot(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function at(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[++i]=a)}return o}function st(e,t){for(var n=-1,r=e.length,i=So(r);++n<r;)i[n]=t(e[n],n,e);return i}function ut(e){for(var t=-1,n=e.length,r=ba;++t<n;){var i=e[t];i>r&&(r=i)}return r}function ct(e){for(var t=-1,n=e.length,r=xa;++t<n;){var i=e[t];r>i&&(r=i)}return r}function lt(e,t,n,r){var i=-1,o=e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function ft(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function ht(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function pt(e){for(var t=e.length,n=0;t--;)n+=+e[t]||0;return n}function dt(e,t){return e===A?t:e}function mt(e,t,n,r){return e!==A&&qo.call(r,n)?e:t}function vt(e,t,n){var r=Ds(t);Zo.apply(r,Ua(t));for(var i=-1,o=r.length;++i<o;){var a=r[i],s=e[a],u=n(s,t[a],a,e,t);(u===u?u===s:s!==s)&&(s!==A||a in e)||(e[a]=u)}return e}function gt(e,t){for(var n=-1,r=e.length,i=Yn(r),o=t.length,a=So(o);++n<o;){var s=t[n];i?a[n]=Wn(s,r)?e[s]:A:a[n]=e[s]}return a}function yt(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}function bt(e,t,n){var r=typeof e;return"function"==r?t===A?e:rn(e,t,n):null==e?ho:"object"==r?Lt(e):t===A?bo(e):Ft(e,t)}function xt(e,t,n,r,i,o,a){var s;if(n&&(s=i?n(e,r,i):n(e)),s!==A)return s;if(!wi(e))return e;var u=Es(e);if(u){if(s=Bn(e),!t)return et(e,s)}else{var c=Wo.call(e),l=c==Q;if(c!=te&&c!=Y&&(!l||i))return He[c]?qn(e,c,t):i?e:{};if(s=Un(l?{}:e),!t)return Oa(s,e)}o||(o=[]),a||(a=[]);for(var f=o.length;f--;)if(o[f]==e)return a[f];return o.push(e),a.push(s),(u?tt:Ot)(e,function(r,i){s[i]=xt(r,t,n,i,e,o,a)}),s}function wt(e,t,n){if("function"!=typeof e)throw new Do(H);return ra(function(){e.apply(A,n)},t)}function _t(e,t){var n=e?e.length:0,r=[];if(!n)return r;var i=-1,o=Ln(),a=o==s,u=a&&t.length>=200?Ia(t):null,c=t.length;u&&(o=Qe,a=!1,t=u);e:for(;++i<n;){var l=e[i];if(a&&l===l){for(var f=c;f--;)if(t[f]===l)continue e;r.push(l)}else o(t,l,0)<0&&r.push(l)}return r}function Et(e,t){var n=!0;return Na(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Tt(e,t,n,r){var i=e.length;for(n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=r===A||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)e[n++]=t;return e}function Ct(e,t){var n=[];return Na(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function St(e,t,n,r){var i;return n(e,function(e,n,o){return t(e,n,o)?(i=r?n:e,!1):void 0}),i}function At(e,t,n){for(var r=-1,i=e.length,o=-1,a=[];++r<i;){var s=e[r];if(b(s)&&Yn(s.length)&&(Es(s)||di(s))){t&&(s=At(s,t,n));var u=-1,c=s.length;for(a.length+=c;++u<c;)a[++o]=s[u]}else n||(a[++o]=s)}return a}function kt(e,t){return Ra(e,t,Fi)}function Ot(e,t){return Ra(e,t,Ds)}function Mt(e,t){return Pa(e,t,Ds)}function Nt(e,t){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];Cs(e[a])&&(o[++i]=a)}return o}function jt(e,t,n){if(null!=e){n!==A&&n in nr(e)&&(t=[n]);

for(var r=-1,i=t.length;null!=e&&++r<i;)var o=e=e[t[r]];return o}}function Rt(e,t,n,r,i,o){if(e===t)return 0!==e||1/e==1/t;var a=typeof e,s=typeof t;return"function"!=a&&"object"!=a&&"function"!=s&&"object"!=s||null==e||null==t?e!==e&&t!==t:Pt(e,t,Rt,n,r,i,o)}function Pt(e,t,n,r,i,o,a){var s=Es(e),u=Es(t),c=X,l=X;s||(c=Wo.call(e),c==Y?c=te:c!=te&&(s=Oi(e))),u||(l=Wo.call(t),l==Y?l=te:l!=te&&(u=Oi(t)));var f=c==te,h=l==te,p=c==l;if(p&&!s&&!f)return Rn(e,t,c);if(!i){var d=f&&qo.call(e,"__wrapped__"),m=h&&qo.call(t,"__wrapped__");if(d||m)return n(d?e.value():e,m?t.value():t,r,i,o,a)}if(!p)return!1;o||(o=[]),a||(a=[]);for(var v=o.length;v--;)if(o[v]==e)return a[v]==t;o.push(e),a.push(t);var g=(s?jn:Pn)(e,t,n,r,i,o,a);return o.pop(),a.pop(),g}function Dt(e,t,n,r,i){for(var o=-1,a=t.length,s=!i;++o<a;)if(s&&r[o]?n[o]!==e[t[o]]:!(t[o]in e))return!1;for(o=-1;++o<a;){var u=t[o],c=e[u],l=n[o];if(s&&r[o])var f=c!==A||u in e;else f=i?i(c,l,u):A,f===A&&(f=Rt(l,c,i,!0));if(!f)return!1}return!0}function It(e,t){var n=-1,r=Ba(e),i=Yn(r)?So(r):[];return Na(e,function(e,r,o){i[++n]=t(e,r,o)}),i}function Lt(e){var t=Ds(e),n=t.length;if(!n)return fo(!0);if(1==n){var r=t[0],i=e[r];if(Xn(i))return function(e){return null==e?!1:e[r]===i&&(i!==A||r in nr(e))}}for(var o=So(n),a=So(n);n--;)i=e[t[n]],o[n]=i,a[n]=Xn(i);return function(e){return null!=e&&Dt(nr(e),t,o,a)}}function Ft(e,t){var n=Es(e),r=Hn(e)&&Xn(t),i=e+"";return e=rr(e),function(o){if(null==o)return!1;var a=i;if(o=nr(o),!(!n&&r||a in o)){if(o=1==e.length?o:jt(o,zt(e,0,-1)),null==o)return!1;a=yr(e),o=nr(o)}return o[a]===t?t!==A||a in o:Rt(t,o[a],null,!0)}}function Bt(e,t,n,r,i){if(!wi(e))return e;var o=Yn(t.length)&&(Es(t)||Oi(t));if(!o){var a=Ds(t);Zo.apply(a,Ua(t))}return tt(a||t,function(s,u){if(a&&(u=s,s=t[u]),b(s))r||(r=[]),i||(i=[]),Ut(e,t,u,Bt,n,r,i);else{var c=e[u],l=n?n(c,s,u,e,t):A,f=l===A;f&&(l=s),!o&&l===A||!f&&(l===l?l===c:c!==c)||(e[u]=l)}}),e}function Ut(e,t,n,r,i,o,a){for(var s=o.length,u=t[n];s--;)if(o[s]==u)return void(e[n]=a[s]);var c=e[n],l=i?i(c,u,n,e,t):A,f=l===A;f&&(l=u,Yn(u.length)&&(Es(u)||Oi(u))?l=Es(c)?c:Ba(c)?et(c):[]:Ss(u)||di(u)?l=di(c)?ji(c):Ss(c)?c:{}:f=!1),o.push(u),a.push(l),f?e[n]=r(l,u,i,o,a):(l===l?l!==c:c===c)&&(e[n]=l)}function qt(e){return function(t){return null==t?A:t[e]}}function Vt(e){var t=e+"";return e=rr(e),function(n){return jt(n,e,t)}}function Wt(e,t){for(var n=t.length;n--;){var r=parseFloat(t[n]);if(r!=i&&Wn(r)){var i=r;ia.call(e,r,1)}}return e}function Gt(e,t){return e+Jo(ya()*(t-e+1))}function Ht(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function zt(e,t,n){var r=-1,i=e.length;t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),n=n===A||n>i?i:+n||0,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=So(i);++r<i;)o[r]=e[r+t];return o}function Yt(e,t){var n;return Na(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function Xt(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function $t(e,t,n){var r=In(),i=-1;t=st(t,function(e){return r(e)});var o=It(e,function(e){var n=st(t,function(t){return t(e)});return{criteria:n,index:++i,value:e}});return Xt(o,function(e,t){return d(e,t,n)})}function Jt(e,t){var n=0;return Na(e,function(e,r,i){n+=+t(e,r,i)||0}),n}function Kt(e,t){var n=-1,r=Ln(),i=e.length,o=r==s,a=o&&i>=200,u=a?Ia():null,c=[];u?(r=Qe,o=!1):(a=!1,u=t?[]:c);e:for(;++n<i;){var l=e[n],f=t?t(l,n,e):l;if(o&&l===l){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),c.push(l)}else r(u,f,0)<0&&((t||a)&&u.push(f),c.push(l))}return c}function Qt(e,t){for(var n=-1,r=t.length,i=So(r);++n<r;)i[n]=e[t[n]];return i}function Zt(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?zt(e,r?0:o,r?o+1:i):zt(e,r?o+1:0,r?i:o)}function en(e,t){var n=e;n instanceof i&&(n=n.value());for(var r=-1,o=t.length;++r<o;){var a=[n],s=t[r];Zo.apply(a,s.args),n=s.func.apply(s.thisArg,a)}return n}function tn(e,t,n){var r=0,i=e?e.length:r;if("number"==typeof t&&t===t&&Ea>=i){for(;i>r;){var o=r+i>>>1,a=e[o];(n?t>=a:t>a)?r=o+1:i=o}return i}return nn(e,t,ho,n)}function nn(e,t,n,r){t=n(t);for(var i=0,o=e?e.length:0,a=t!==t,s=t===A;o>i;){var u=Jo((i+o)/2),c=n(e[u]),l=c===c;if(a)var f=l||r;else f=s?l&&(r||c!==A):r?t>=c:t>c;f?i=u+1:o=u}return da(o,_a)}function rn(e,t,n){if("function"!=typeof e)return ho;if(t===A)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,a){return e.call(t,n,r,i,o,a)}}return function(){return e.apply(t,arguments)}}function on(e){return Yo.call(e,0)}function an(e,t,n){for(var r=n.length,i=-1,o=pa(e.length-r,0),a=-1,s=t.length,u=So(o+s);++a<s;)u[a]=t[a];for(;++i<r;)u[n[i]]=e[i];for(;o--;)u[a++]=e[i++];return u}function sn(e,t,n){for(var r=-1,i=n.length,o=-1,a=pa(e.length-i,0),s=-1,u=t.length,c=So(a+u);++o<a;)c[o]=e[o];for(var l=o;++s<u;)c[l+s]=t[s];for(;++r<i;)c[l+n[r]]=e[o++];return c}function un(e,t){return function(n,r,i){var o=t?t():{};if(r=In(r,i,3),Es(n))for(var a=-1,s=n.length;++a<s;){var u=n[a];e(o,u,r(u,a,n),n)}else Na(n,function(t,n,i){e(o,t,r(t,n,i),i)});return o}}function cn(e){return ui(function(t,n){var r=-1,i=null==t?0:n.length,o=i>2&&n[i-2],a=i>2&&n[2],s=i>1&&n[i-1];for("function"==typeof o?(o=rn(o,s,5),i-=2):(o="function"==typeof s?s:null,i-=o?1:0),a&&Gn(n[0],n[1],a)&&(o=3>i?null:o,i=1);++r<i;){var u=n[r];u&&e(t,u,o)}return t})}function ln(e,t){return function(n,r){var i=n?Ba(n):0;if(!Yn(i))return e(n,r);for(var o=t?i:-1,a=nr(n);(t?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function fn(e){return function(t,n,r){for(var i=nr(t),o=r(t),a=o.length,s=e?a:-1;e?s--:++s<a;){var u=o[s];if(n(i[u],u,i)===!1)break}return t}}function hn(e,t){function n(){var i=this&&this!==rt&&this instanceof n?r:e;return i.apply(t,arguments)}var r=dn(e);return n}function pn(e){return function(t){for(var n=-1,r=co($i(t)),i=r.length,o="";++n<i;)o=e(o,r[n],n);return o}}function dn(e){return function(){var t=Ma(e.prototype),n=e.apply(t,arguments);return wi(n)?n:t}}function mn(e){function t(n,r,i){i&&Gn(n,r,i)&&(r=null);var o=Nn(n,e,null,null,null,null,null,r);return o.placeholder=t.placeholder,o}return t}function vn(e,t){return function(n,r,i){i&&Gn(n,r,i)&&(r=null);var o=In(),a=null==r;if(o===bt&&a||(a=!1,r=o(r,i,3)),a){var s=Es(n);if(s||!ki(n))return e(s?n:tr(n));r=l}return Dn(n,r,t)}}function gn(e,t){return function(n,r,i){if(r=In(r,i,3),Es(n)){var o=a(n,r,t);return o>-1?n[o]:A}return St(n,r,e)}}function yn(e){return function(t,n,r){return t&&t.length?(n=In(n,r,3),a(t,n,e)):-1}}function bn(e){return function(t,n,r){return n=In(n,r,3),St(t,n,e,!0)}}function xn(e){return function(){var t=arguments.length;if(!t)return function(){return arguments[0]};for(var n,i=e?t:-1,o=0,a=So(t);e?i--:++i<t;){var s=a[o++]=arguments[i];if("function"!=typeof s)throw new Do(H);var u=n?"":Fa(s);n="wrapper"==u?new r([]):n}for(i=n?-1:t;++i<t;){s=a[i],u=Fa(s);var c="wrapper"==u?La(s):null;n=c&&zn(c[0])?n[Fa(c[0])].apply(n,c[3]):1==s.length&&zn(s)?n[u]():n.thru(s)}return function(){var e=arguments;if(n&&1==e.length&&Es(e[0]))return n.plant(e[0]).value();for(var r=0,i=a[r].apply(this,e);++r<t;)i=a[r].call(this,i);return i}}}function wn(e,t){return function(n,r,i){return"function"==typeof r&&i===A&&Es(n)?e(n,r):t(n,rn(r,i,3))}}function _n(e){return function(t,n,r){return("function"!=typeof n||r!==A)&&(n=rn(n,r,3)),e(t,n,Fi)}}function En(e){return function(t,n,r){return("function"!=typeof n||r!==A)&&(n=rn(n,r,3)),e(t,n)}}function Tn(e){return function(t,n,r){return t=c(t),t&&(e?t:"")+kn(t,n,r)+(e?"":t)}}function Cn(e){var t=ui(function(n,r){var i=w(r,t.placeholder);return Nn(n,e,null,r,i)});return t}function Sn(e,t){return function(n,r,i,o){var a=arguments.length<3;return"function"==typeof r&&o===A&&Es(n)?e(n,r,i,a):Ht(n,In(r,o,4),i,a,t)}}function An(e,t,n,r,i,o,a,s,u,c){function l(){for(var b=arguments.length,x=b,_=So(b);x--;)_[x]=arguments[x];if(r&&(_=an(_,r,i)),o&&(_=sn(_,o,a)),d||v){var E=l.placeholder,T=w(_,E);if(b-=T.length,c>b){var C=s?et(s):null,S=pa(c-b,0),k=d?T:null,N=d?null:T,j=d?_:null,R=d?null:_;t|=d?P:D,t&=~(d?D:P),m||(t&=~(O|M));var I=[e,t,n,j,k,R,N,C,u,S],L=An.apply(A,I);return zn(e)&&qa(L,I),L.placeholder=E,L}}var F=h?n:this;p&&(e=F[y]),s&&(_=Qn(_,s)),f&&u<_.length&&(_.length=u);var B=this&&this!==rt&&this instanceof l?g||dn(e):e;return B.apply(F,_)}var f=t&I,h=t&O,p=t&M,d=t&j,m=t&N,v=t&R,g=!p&&dn(e),y=e;return l}function kn(e,t,n){var r=e.length;if(t=+t,r>=t||!fa(t))return"";var i=t-r;return n=null==n?" ":n+"",to(n,Xo(i/n.length)).slice(0,i)}function On(e,t,n,r){function i(){for(var t=-1,s=arguments.length,u=-1,c=r.length,l=So(s+c);++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++t];var f=this&&this!==rt&&this instanceof i?a:e;return f.apply(o?n:this,l)}var o=t&O,a=dn(e);return i}function Mn(e){return function(t,n,r,i){var o=In(r);return o===bt&&null==r?tn(t,n,e):nn(t,n,o(r,i,1),e)}}function Nn(e,t,n,r,i,o,a,s){var u=t&M;if(!u&&"function"!=typeof e)throw new Do(H);var c=r?r.length:0;if(c||(t&=~(P|D),r=i=null),c-=i?i.length:0,t&D){var l=r,f=i;r=i=null}var h=u?null:La(e),p=[e,t,n,r,i,l,f,o,a,s];if(h&&($n(p,h),t=p[1],s=p[9]),p[9]=null==s?u?0:e.length:pa(s-c,0)||0,t==O)var d=hn(p[0],p[2]);else d=t!=P&&t!=(O|P)||p[4].length?An.apply(A,p):On.apply(A,p);var m=h?Da:qa;return m(d,p)}function jn(e,t,n,r,i,o,a){var s=-1,u=e.length,c=t.length,l=!0;if(u!=c&&!(i&&c>u))return!1;for(;l&&++s<u;){var f=e[s],h=t[s];if(l=A,r&&(l=i?r(h,f,s):r(f,h,s)),l===A)if(i)for(var p=c;p--&&(h=t[p],!(l=f&&f===h||n(f,h,r,i,o,a))););else l=f&&f===h||n(f,h,r,i,o,a)}return!!l}function Rn(e,t,n){switch(n){case $:case J:return+e==+t;case K:return e.name==t.name&&e.message==t.message;case ee:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case ne:case ie:return e==t+""}return!1}function Pn(e,t,n,r,i,o,a){var s=Ds(e),u=s.length,c=Ds(t),l=c.length;if(u!=l&&!i)return!1;for(var f=i,h=-1;++h<u;){var p=s[h],d=i?p in t:qo.call(t,p);if(d){var m=e[p],v=t[p];d=A,r&&(d=i?r(v,m,p):r(m,v,p)),d===A&&(d=m&&m===v||n(m,v,r,i,o,a))}if(!d)return!1;f||(f="constructor"==p)}if(!f){var g=e.constructor,y=t.constructor;if(g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y))return!1}return!0}function Dn(e,t,n){var r=n?xa:ba,i=r,o=i;return Na(e,function(e,a,s){var u=t(e,a,s);((n?i>u:u>i)||u===r&&u===o)&&(i=u,o=e)}),o}function In(e,n,r){var i=t.callback||lo;return i=i===lo?bt:i,r?i(e,n,r):i}function Ln(e,n,r){var i=t.indexOf||mr;return i=i===mr?s:i,e?i(e,n,r):i}function Fn(e,t,n){for(var r=-1,i=n?n.length:0;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=da(t,e+a);break;case"takeRight":e=pa(e,t-a)}}return{start:e,end:t}}function Bn(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&qo.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Un(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=jo),new t}function qn(e,t,n){var r=e.constructor;switch(t){case ae:return on(e);case $:case J:return new r(+e);case se:case ue:case ce:case le:case fe:case he:case pe:case de:case me:var i=e.buffer;return new r(n?on(i):i,e.byteOffset,e.length);case ee:case ie:return new r(e);case ne:var o=new r(e.source,Pe.exec(e));o.lastIndex=e.lastIndex}return o}function Vn(e,t,n){null==e||Hn(t,e)||(t=rr(t),e=1==t.length?e:jt(e,zt(t,0,-1)),t=yr(t));var r=null==e?e:e[t];return null==r?A:r.apply(e,n)}function Wn(e,t){return e=+e,t=null==t?Ca:t,e>-1&&e%1==0&&t>e}function Gn(e,t,n){if(!wi(n))return!1;var r=typeof t;if("number"==r)var i=Ba(n),o=Yn(i)&&Wn(t,i);else o="string"==r&&t in n;if(o){var a=n[t];return e===e?e===a:a!==a}return!1}function Hn(e,t){var n=typeof e;if("string"==n&&Ae.test(e)||"number"==n)return!0;if(Es(e))return!1;var r=!Se.test(e);return r||null!=t&&e in nr(t)}function zn(e){var n=Fa(e);return!!n&&e===t[n]&&n in i.prototype}function Yn(e){return"number"==typeof e&&e>-1&&e%1==0&&Ca>=e}function Xn(e){return e===e&&(0===e?1/e>0:!wi(e))}function $n(e,t){var n=e[1],r=t[1],i=n|r,o=I>i,a=r==I&&n==j||r==I&&n==L&&e[7].length<=t[8]||r==(I|L)&&n==j;if(!o&&!a)return e;r&O&&(e[2]=t[2],i|=n&O?0:N);var s=t[3];if(s){var u=e[3];e[3]=u?an(u,s,t[4]):et(s),e[4]=u?w(e[3],z):et(t[4])}return s=t[5],s&&(u=e[5],e[5]=u?sn(u,s,t[6]):et(s),e[6]=u?w(e[5],z):et(t[6])),s=t[7],s&&(e[7]=et(s)),r&I&&(e[8]=null==e[8]?t[8]:da(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function Jn(e,t){e=nr(e);for(var n=-1,r=t.length,i={};++n<r;){var o=t[n];o in e&&(i[o]=e[o])}return i}function Kn(e,t){var n={};return kt(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}function Qn(e,t){for(var n=e.length,r=da(t.length,n),i=et(e);r--;){var o=t[r];e[r]=Wn(o,n)?i[o]:A}return e}function Zn(e){{var n;t.support}if(!b(e)||Wo.call(e)!=te||!qo.call(e,"constructor")&&(n=e.constructor,"function"==typeof n&&!(n instanceof n)))return!1;var r;return kt(e,function(e,t){r=t}),r===A||qo.call(e,r)}function er(e){for(var n=Fi(e),r=n.length,i=r&&e.length,o=t.support,a=i&&Yn(i)&&(Es(e)||o.nonEnumArgs&&di(e)),s=-1,u=[];++s<r;){var c=n[s];(a&&Wn(c,i)||qo.call(e,c))&&u.push(c)}return u}function tr(e){return null==e?[]:Yn(Ba(e))?wi(e)?e:jo(e):Gi(e)}function nr(e){return wi(e)?e:jo(e)}function rr(e){if(Es(e))return e;var t=[];return c(e).replace(ke,function(e,n,r,i){t.push(r?i.replace(je,"$1"):n||e)}),t}function ir(e){return e instanceof i?e.clone():new r(e.__wrapped__,e.__chain__,et(e.__actions__))}function or(e,t,n){t=(n?Gn(e,t,n):null==t)?1:pa(+t||1,1);for(var r=0,i=e?e.length:0,o=-1,a=So(Xo(i/t));i>r;)a[++o]=zt(e,r,r+=t);return a}function ar(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var o=e[t];o&&(i[++r]=o)}return i}function sr(e,t,n){var r=e?e.length:0;return r?((n?Gn(e,t,n):null==t)&&(t=1),zt(e,0>t?0:t)):[]}function ur(e,t,n){var r=e?e.length:0;return r?((n?Gn(e,t,n):null==t)&&(t=1),t=r-(+t||0),zt(e,0,0>t?0:t)):[]}function cr(e,t,n){return e&&e.length?Zt(e,In(t,n,3),!0,!0):[]}function lr(e,t,n){return e&&e.length?Zt(e,In(t,n,3),!0):[]}function fr(e,t,n,r){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&Gn(e,t,n)&&(n=0,r=i),Tt(e,t,n,r)):[]}function hr(e){return e?e[0]:A}function pr(e,t,n){var r=e?e.length:0;return n&&Gn(e,t,n)&&(t=!1),r?At(e,t):[]}function dr(e){var t=e?e.length:0;return t?At(e,!0):[]}function mr(e,t,n){var r=e?e.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?pa(r+n,0):n;else if(n){var i=tn(e,t),o=e[i];return(t===t?t===o:o!==o)?i:-1}return s(e,t,n||0)}function vr(e){return ur(e,1)}function gr(){for(var e=[],t=-1,n=arguments.length,r=[],i=Ln(),o=i==s,a=[];++t<n;){var u=arguments[t];(Es(u)||di(u))&&(e.push(u),r.push(o&&u.length>=120?Ia(t&&u):null))}if(n=e.length,2>n)return a;var c=e[0],l=-1,f=c?c.length:0,h=r[0];e:for(;++l<f;)if(u=c[l],(h?Qe(h,u):i(a,u,0))<0){for(t=n;--t;){var p=r[t];if((p?Qe(p,u):i(e[t],u,0))<0)continue e}h&&h.push(u),a.push(u)}return a}function yr(e){var t=e?e.length:0;return t?e[t-1]:A}function br(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?pa(r+n,0):da(n||0,r-1))+1;else if(n){i=tn(e,t,!0)-1;var o=e[i];return(t===t?t===o:o!==o)?i:-1}if(t!==t)return y(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1}function xr(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=Ln(),i=e.length;++n<i;)for(var o=0,a=e[n];(o=r(t,a,o))>-1;)ia.call(t,o,1);return t}function wr(e,t,n){var r=[];if(!e||!e.length)return r;var i=-1,o=[],a=e.length;for(t=In(t,n,3);++i<a;){var s=e[i];t(s,i,e)&&(r.push(s),o.push(i))}return Wt(e,o),r}function _r(e){return sr(e,1)}function Er(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Gn(e,t,n)&&(t=0,n=r),zt(e,t,n)):[]}function Tr(e,t,n){var r=e?e.length:0;return r?((n?Gn(e,t,n):null==t)&&(t=1),zt(e,0,0>t?0:t)):[]}function Cr(e,t,n){var r=e?e.length:0;return r?((n?Gn(e,t,n):null==t)&&(t=1),t=r-(+t||0),zt(e,0>t?0:t)):[]}function Sr(e,t,n){return e&&e.length?Zt(e,In(t,n,3),!1,!0):[]}function Ar(e,t,n){return e&&e.length?Zt(e,In(t,n,3)):[]}function kr(e,t,n,r){var i=e?e.length:0;if(!i)return[];null!=t&&"boolean"!=typeof t&&(r=n,n=Gn(e,t,r)?null:t,t=!1);var o=In();return(o!==bt||null!=n)&&(n=o(n,r,3)),t&&Ln()==s?_(e,n):Kt(e,n)}function Or(e){for(var t=-1,n=(e&&e.length&&ut(st(e,Ba)))>>>0,r=So(n);++t<n;)r[t]=st(e,qt(t));return r}function Mr(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Es(n)||di(n))var r=r?_t(r,n).concat(_t(n,r)):n}return r?Kt(r):[]}function Nr(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||Es(e[0])||(t=[]);++n<r;){var o=e[n];t?i[o]=t[n]:o&&(i[o[0]]=o[1])}return i}function jr(e){var n=t(e);return n.__chain__=!0,n}function Rr(e,t,n){return t.call(n,e),e}function Pr(e,t,n){return t.call(n,e)}function Dr(){return jr(this)}function Ir(){return new r(this.value(),this.__chain__)}function Lr(e){for(var t,r=this;r instanceof n;){var i=ir(r);t?o.__wrapped__=i:t=i;var o=i;r=r.__wrapped__}return o.__wrapped__=e,t}function Fr(){var e=this.__wrapped__;return e instanceof i?(this.__actions__.length&&(e=new i(this)),new r(e.reverse(),this.__chain__)):this.thru(function(e){return e.reverse()})}function Br(){return this.value()+""}function Ur(){return en(this.__wrapped__,this.__actions__)}function qr(e,t,n){var r=Es(e)?ot:Et;return n&&Gn(e,t,n)&&(t=null),("function"!=typeof t||n!==A)&&(t=In(t,n,3)),r(e,t)}function Vr(e,t,n){var r=Es(e)?at:Ct;return t=In(t,n,3),r(e,t)}function Wr(e,t){return Za(e,Lt(t))}function Gr(e,t,n,r){var i=e?Ba(e):0;return Yn(i)||(e=Gi(e),i=e.length),i?(n="number"!=typeof n||r&&Gn(t,n,r)?0:0>n?pa(i+n,0):n||0,"string"==typeof e||!Es(e)&&ki(e)?i>n&&e.indexOf(t,n)>-1:Ln(e,t,n)>-1):!1}function Hr(e,t,n){var r=Es(e)?st:It;return t=In(t,n,3),r(e,t)}function zr(e,t){return Hr(e,bo(t))}function Yr(e,t,n){var r=Es(e)?at:Ct;return t=In(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})}function Xr(e,t,n){if(n?Gn(e,t,n):null==t){e=tr(e);var r=e.length;return r>0?e[Gt(0,r-1)]:A}var i=$r(e);return i.length=da(0>t?0:+t||0,i.length),i}function $r(e){e=tr(e);for(var t=-1,n=e.length,r=So(n);++t<n;){var i=Gt(0,t);t!=i&&(r[t]=r[i]),r[i]=e[t]}return r}function Jr(e){var t=e?Ba(e):0;return Yn(t)?t:Ds(e).length}function Kr(e,t,n){var r=Es(e)?ht:Yt;return n&&Gn(e,t,n)&&(t=null),("function"!=typeof t||n!==A)&&(t=In(t,n,3)),r(e,t)}function Qr(e,t,n){if(null==e)return[];n&&Gn(e,t,n)&&(t=null);var r=-1;t=In(t,n,3);var i=It(e,function(e,n,i){return{criteria:t(e,n,i),index:++r,value:e}});return Xt(i,p)}function Zr(e,t,n,r){return null==e?[]:(r&&Gn(t,n,r)&&(n=null),Es(t)||(t=null==t?[]:[t]),Es(n)||(n=null==n?[]:[n]),$t(e,t,n))}function ei(e,t){return Vr(e,Lt(t))}function ti(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Do(H);var n=e;e=t,t=n}return e=fa(e=+e)?e:0,function(){return--e<1?t.apply(this,arguments):void 0}}function ni(e,t,n){return n&&Gn(e,t,n)&&(t=null),t=e&&null==t?e.length:pa(+t||0,0),Nn(e,I,null,null,null,null,t)}function ri(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Do(H);var r=e;e=t,t=r}return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}}function ii(e,t,n){function r(){h&&$o(h),u&&$o(u),u=h=p=A}function i(){var n=t-(ls()-l);if(0>=n||n>t){u&&$o(u);var r=p;u=h=p=A,r&&(d=ls(),c=e.apply(f,s),h||u||(s=f=null))}else h=ra(i,n)}function o(){h&&$o(h),u=h=p=A,(v||m!==t)&&(d=ls(),c=e.apply(f,s),h||u||(s=f=null))}function a(){if(s=arguments,l=ls(),f=this,p=v&&(h||!g),m===!1)var n=g&&!h;else{u||g||(d=l);var r=m-(l-d),a=0>=r||r>m;a?(u&&(u=$o(u)),d=l,c=e.apply(f,s)):u||(u=ra(o,r))}return a&&h?h=$o(h):h||t===m||(h=ra(i,t)),n&&(a=!0,c=e.apply(f,s)),!a||h||u||(s=f=null),c}var s,u,c,l,f,h,p,d=0,m=!1,v=!0;if("function"!=typeof e)throw new Do(H);if(t=0>t?0:+t||0,n===!0){var g=!0;v=!1}else wi(n)&&(g=n.leading,m="maxWait"in n&&pa(+n.maxWait||0,t),v="trailing"in n?n.trailing:v);return a.cancel=r,a}function oi(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Do(H);var n=function(){var r=arguments,i=n.cache,o=t?t.apply(this,r):r[0];if(i.has(o))return i.get(o);var a=e.apply(this,r);return i.set(o,a),a};return n.cache=new oi.Cache,n}function ai(e){if("function"!=typeof e)throw new Do(H);return function(){return!e.apply(this,arguments)}}function si(e){return ri(2,e)}function ui(e,t){if("function"!=typeof e)throw new Do(H);return t=pa(t===A?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=pa(n.length-t,0),o=So(i);++r<i;)o[r]=n[t+r];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var a=So(t+1);for(r=-1;++r<t;)a[r]=n[r];return a[t]=o,e.apply(this,a)}}function ci(e){if("function"!=typeof e)throw new Do(H);return function(t){return e.apply(this,t)}}function li(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Do(H);return n===!1?r=!1:wi(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ze.leading=r,ze.maxWait=+t,ze.trailing=i,ii(e,t,ze)}function fi(e,t){return t=null==t?ho:t,Nn(t,P,null,[e],[])}function hi(e,t,n,r){return t&&"boolean"!=typeof t&&Gn(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),n="function"==typeof n&&rn(n,r,1),xt(e,t,n)}function pi(e,t,n){return t="function"==typeof t&&rn(t,n,1),xt(e,!0,t)}function di(e){var t=b(e)?e.length:A;return Yn(t)&&Wo.call(e)==Y}function mi(e){return e===!0||e===!1||b(e)&&Wo.call(e)==$}function vi(e){return b(e)&&Wo.call(e)==J}function gi(e){return!!e&&1===e.nodeType&&b(e)&&Wo.call(e).indexOf("Element")>-1}function yi(e){if(null==e)return!0;var t=Ba(e);return Yn(t)&&(Es(e)||ki(e)||di(e)||b(e)&&Cs(e.splice))?!t:!Ds(e).length}function bi(e,t,n,r){if(n="function"==typeof n&&rn(n,r,3),!n&&Xn(e)&&Xn(t))return e===t;var i=n?n(e,t):A;return i===A?Rt(e,t,n):!!i}function xi(e){return b(e)&&"string"==typeof e.message&&Wo.call(e)==K}function wi(e){var t=typeof e;return"function"==t||!!e&&"object"==t}function _i(e,t,n,r){var i=Ds(t),o=i.length;if(!o)return!0;if(null==e)return!1;if(n="function"==typeof n&&rn(n,r,3),e=nr(e),!n&&1==o){var a=i[0],s=t[a];if(Xn(s))return s===e[a]&&(s!==A||a in e)}for(var u=So(o),c=So(o);o--;)s=u[o]=t[i[o]],c[o]=Xn(s);return Dt(e,i,u,c,n)}function Ei(e){return Si(e)&&e!=+e}function Ti(e){return null==e?!1:Wo.call(e)==Q?Ho.test(Uo.call(e)):b(e)&&Ie.test(e)}function Ci(e){return null===e}function Si(e){return"number"==typeof e||b(e)&&Wo.call(e)==ee}function Ai(e){return b(e)&&Wo.call(e)==ne||!1}function ki(e){return"string"==typeof e||b(e)&&Wo.call(e)==ie}function Oi(e){return b(e)&&Yn(e.length)&&!!Ge[Wo.call(e)]}function Mi(e){return e===A}function Ni(e){var t=e?Ba(e):0;return Yn(t)?t?et(e):[]:Gi(e)}function ji(e){return yt(e,Fi(e))}function Ri(e,t,n){var r=Ma(e);return n&&Gn(e,t,n)&&(t=null),t?Oa(r,t):r}function Pi(e){return Nt(e,Fi(e))}function Di(e,t,n){var r=null==e?A:jt(e,rr(t),t+"");return r===A?n:r}function Ii(e,t){if(null==e)return!1;var n=qo.call(e,t);return n||Hn(t)||(t=rr(t),e=1==t.length?e:jt(e,zt(t,0,-1)),t=yr(t),n=null!=e&&qo.call(e,t)),n}function Li(e,t,n){n&&Gn(e,t,n)&&(t=null);for(var r=-1,i=Ds(e),o=i.length,a={};++r<o;){var s=i[r],u=e[s];t?qo.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a}function Fi(e){if(null==e)return[];wi(e)||(e=jo(e));var t=e.length;t=t&&Yn(t)&&(Es(e)||ka.nonEnumArgs&&di(e))&&t||0;for(var n=e.constructor,r=-1,i="function"==typeof n&&n.prototype===e,o=So(t),a=t>0;++r<t;)o[r]=r+"";for(var s in e)a&&Wn(s,t)||"constructor"==s&&(i||!qo.call(e,s))||o.push(s);return o}function Bi(e,t,n){var r={};return t=In(t,n,3),Ot(e,function(e,n,i){r[n]=t(e,n,i)}),r}function Ui(e){for(var t=-1,n=Ds(e),r=n.length,i=So(r);++t<r;){var o=n[t];i[t]=[o,e[o]]}return i}function qi(e,t,n){var r=null==e?A:e[t];return r===A&&(null==e||Hn(t,e)||(t=rr(t),e=1==t.length?e:jt(e,zt(t,0,-1)),r=null==e?A:e[yr(t)]),r=r===A?n:r),Cs(r)?r.call(e):r}function Vi(e,t,n){if(null==e)return e;var r=t+"";t=null!=e[r]||Hn(t,e)?[r]:rr(t);for(var i=-1,o=t.length,a=o-1,s=e;null!=s&&++i<o;){var u=t[i];wi(s)&&(i==a?s[u]=n:null==s[u]&&(s[u]=Wn(t[i+1])?[]:{})),s=s[u]}return e}function Wi(e,t,n,r){var i=Es(e)||Oi(e);if(t=In(t,r,4),null==n)if(i||wi(e)){var o=e.constructor;n=i?Es(e)?new o:[]:Ma(Cs(o)&&o.prototype)}else n={};return(i?tt:Ot)(e,function(e,r,i){return t(n,e,r,i)}),n}function Gi(e){return Qt(e,Ds(e))}function Hi(e){return Qt(e,Fi(e))}function zi(e,t,n){return t=+t||0,"undefined"==typeof n?(n=t,t=0):n=+n||0,e>=da(t,n)&&e<pa(t,n)}function Yi(e,t,n){n&&Gn(e,t,n)&&(t=n=null);var r=null==e,i=null==t;if(null==n&&(i&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1){var o=ya();return da(e+o*(t-e+parseFloat("1e-"+((o+"").length-1))),t)}return Gt(e,t)}function Xi(e){return e=c(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function $i(e){return e=c(e),e&&e.replace(Le,m).replace(Ne,"")}function Ji(e,t,n){e=c(e),t+="";var r=e.length;return n=n===A?r:da(0>n?0:+n||0,r),n-=t.length,n>=0&&e.indexOf(t,n)==n}function Ki(e){return e=c(e),e&&_e.test(e)?e.replace(xe,v):e}function Qi(e){return e=c(e),e&&Me.test(e)?e.replace(Oe,"\\$&"):e}function Zi(e,t,n){e=c(e),t=+t;var r=e.length;if(r>=t||!fa(t))return e;var i=(t-r)/2,o=Jo(i),a=Xo(i);return n=kn("",a,n),n.slice(0,o)+e+n}function eo(e,t,n){return n&&Gn(e,t,n)&&(t=0),ga(e,t)}function to(e,t){var n="";if(e=c(e),t=+t,1>t||!e||!fa(t))return n;do t%2&&(n+=e),t=Jo(t/2),e+=e;while(t);return n}function no(e,t,n){return e=c(e),n=null==n?0:da(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function ro(e,n,r){var i=t.templateSettings;r&&Gn(e,n,r)&&(n=r=null),e=c(e),n=vt(Oa({},r||n),i,mt);var o,a,s=vt(Oa({},n.imports),i.imports,mt),u=Ds(s),l=Qt(s,u),f=0,h=n.interpolate||Fe,p="__p += '",d=Ro((n.escape||Fe).source+"|"+h.source+"|"+(h===Ce?Re:Fe).source+"|"+(n.evaluate||Fe).source+"|$","g"),m="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++We+"]")+"\n";e.replace(d,function(t,n,r,i,s,u){return r||(r=i),p+=e.slice(f,u).replace(Be,g),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=u+t.length,t}),p+="';\n";var v=n.variable;v||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(ve,""):p).replace(ge,"$1").replace(ye,"$1;"),p="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=Hs(function(){return Oo(u,m+"return "+p).apply(A,l)});if(y.source=p,xi(y))throw y;return y}function io(e,t,n){var r=e;return(e=c(e))?(n?Gn(r,t,n):null==t)?e.slice(E(e),T(e)+1):(t+="",e.slice(f(e,t),h(e,t)+1)):e}function oo(e,t,n){var r=e;return e=c(e),e?e.slice((n?Gn(r,t,n):null==t)?E(e):f(e,t+"")):e}function ao(e,t,n){var r=e;return e=c(e),e?(n?Gn(r,t,n):null==t)?e.slice(0,T(e)+1):e.slice(0,h(e,t+"")+1):e}function so(e,t,n){n&&Gn(e,t,n)&&(t=null);var r=F,i=B;if(null!=t)if(wi(t)){var o="separator"in t?t.separator:o;r="length"in t?+t.length||0:r,i="omission"in t?c(t.omission):i}else r=+t||0;if(e=c(e),r>=e.length)return e;var a=r-i.length;if(1>a)return i;var s=e.slice(0,a);if(null==o)return s+i;if(Ai(o)){if(e.slice(a).search(o)){var u,l,f=e.slice(0,a);for(o.global||(o=Ro(o.source,(Pe.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(f);)l=u.index;s=s.slice(0,null==l?a:l)}}else if(e.indexOf(o,a)!=a){var h=s.lastIndexOf(o);h>-1&&(s=s.slice(0,h))}return s+i}function uo(e){return e=c(e),e&&we.test(e)?e.replace(be,C):e}function co(e,t,n){return n&&Gn(e,t,n)&&(t=null),e=c(e),e.match(t||Ue)||[]}function lo(e,t,n){return n&&Gn(e,t,n)&&(t=null),bt(e,t)}function fo(e){return function(){return e}}function ho(e){return e}function po(e){return Lt(xt(e,!0))}function mo(e,t){return Ft(e,xt(t,!0))}function vo(e,t,n){if(null==n){var r=wi(t),i=r&&Ds(t),o=i&&i.length&&Nt(t,i);(o?o.length:r)||(o=!1,n=t,t=e,e=this)}o||(o=Nt(t,Ds(t)));var a=!0,s=-1,u=Cs(e),c=o.length;n===!1?a=!1:wi(n)&&"chain"in n&&(a=n.chain);for(;++s<c;){var l=o[s],f=t[l];e[l]=f,u&&(e.prototype[l]=function(t){return function(){var n=this.__chain__;if(a||n){var r=e(this.__wrapped__),i=r.__actions__=et(this.__actions__);return i.push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}var o=[this.value()];return Zo.apply(o,arguments),t.apply(e,o)}}(f))}return e}function go(){return e._=Go,this}function yo(){}function bo(e){return Hn(e)?qt(e):Vt(e)}function xo(e){return function(t){return jt(e,rr(t),t+"")}}function wo(e,t,n){n&&Gn(e,t,n)&&(t=n=null),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var r=-1,i=pa(Xo((t-e)/(n||1)),0),o=So(i);++r<i;)o[r]=e,e+=n;return o}function _o(e,t,n){if(e=Jo(e),1>e||!fa(e))return[];var r=-1,i=So(da(e,wa));for(t=rn(t,n,1);++r<e;)wa>r?i[r]=t(r):t(r);return i}function Eo(e){var t=++Vo;return c(e)+t}function To(e,t){return(+e||0)+(+t||0)}function Co(e,t,n){n&&Gn(e,t,n)&&(t=null);var r=In(),i=null==t;return r===bt&&i||(i=!1,t=r(t,n,3)),i?pt(Es(e)?e:tr(e)):Jt(e,t)}e=e?it.defaults(rt.Object(),e,it.pick(rt,Ve)):rt;var So=e.Array,Ao=e.Date,ko=e.Error,Oo=e.Function,Mo=e.Math,No=e.Number,jo=e.Object,Ro=e.RegExp,Po=e.String,Do=e.TypeError,Io=So.prototype,Lo=jo.prototype,Fo=Po.prototype,Bo=(Bo=e.window)&&Bo.document,Uo=Oo.prototype.toString,qo=Lo.hasOwnProperty,Vo=0,Wo=Lo.toString,Go=e._,Ho=Ro("^"+Qi(Wo).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zo=Ti(zo=e.ArrayBuffer)&&zo,Yo=Ti(Yo=zo&&new zo(0).slice)&&Yo,Xo=Mo.ceil,$o=e.clearTimeout,Jo=Mo.floor,Ko=Ti(Ko=jo.getOwnPropertySymbols)&&Ko,Qo=Ti(Qo=jo.getPrototypeOf)&&Qo,Zo=Io.push,ea=Ti(jo.preventExtensions=jo.preventExtensions)&&ea,ta=Lo.propertyIsEnumerable,na=Ti(na=e.Set)&&na,ra=e.setTimeout,ia=Io.splice,oa=Ti(oa=e.Uint8Array)&&oa,aa=Ti(aa=e.WeakMap)&&aa,sa=function(){try{var t=Ti(t=e.Float64Array)&&t,n=new t(new zo(10),0,1)&&t}catch(r){}return n}(),ua=function(){var e={1:0},t=ea&&Ti(t=jo.assign)&&t;try{t(ea(e),"xo")}catch(n){}return!e[1]&&t}(),ca=Ti(ca=So.isArray)&&ca,la=Ti(la=jo.create)&&la,fa=e.isFinite,ha=Ti(ha=jo.keys)&&ha,pa=Mo.max,da=Mo.min,ma=Ti(ma=Ao.now)&&ma,va=Ti(va=No.isFinite)&&va,ga=e.parseInt,ya=Mo.random,ba=No.NEGATIVE_INFINITY,xa=No.POSITIVE_INFINITY,wa=Mo.pow(2,32)-1,_a=wa-1,Ea=wa>>>1,Ta=sa?sa.BYTES_PER_ELEMENT:0,Ca=Mo.pow(2,53)-1,Sa=aa&&new aa,Aa={},ka=t.support={};!function(e){var t=function(){this.x=e},n=[];t.prototype={valueOf:e,y:e};for(var r in new t)n.push(r);ka.funcDecomp=/\bthis\b/.test(function(){return this}),ka.funcNames="string"==typeof Oo.name;try{ka.dom=11===Bo.createDocumentFragment().nodeType}catch(i){ka.dom=!1}try{ka.nonEnumArgs=!ta.call(arguments,1)}catch(i){ka.nonEnumArgs=!0}}(1,0),t.templateSettings={escape:Ee,evaluate:Te,interpolate:Ce,variable:"",imports:{_:t}};var Oa=ua||function(e,t){return null==t?e:yt(t,Ua(t),yt(t,Ds(t),e))},Ma=function(){function t(){}return function(n){if(wi(n)){t.prototype=n;var r=new t;t.prototype=null}return r||e.Object()}}(),Na=ln(Ot),ja=ln(Mt,!0),Ra=fn(),Pa=fn(!0),Da=Sa?function(e,t){return Sa.set(e,t),e}:ho;Yo||(on=zo&&oa?function(e){var t=e.byteLength,n=sa?Jo(t/Ta):0,r=n*Ta,i=new zo(t);if(n){var o=new sa(i,0,n);o.set(new sa(e,0,n))}return t!=r&&(o=new oa(i,r),o.set(new oa(e,r))),i}:fo(null));var Ia=la&&na?function(e){return new Ke(e)}:fo(null),La=Sa?function(e){return Sa.get(e)}:yo,Fa=function(){return ka.funcNames?"constant"==fo.name?qt("name"):function(e){for(var t=e.name,n=Aa[t],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}:fo("")}(),Ba=qt("length"),Ua=Ko?function(e){return Ko(nr(e))}:fo([]),qa=function(){var e=0,t=0;return function(n,r){var i=ls(),o=q-(i-t);if(t=i,o>0){if(++e>=U)return n}else e=0;return Da(n,r)}}(),Va=ui(function(e,t){return Es(e)||di(e)?_t(e,At(t,!1,!0)):[]}),Wa=yn(),Ga=yn(!0),Ha=ui(function(e,t){e||(e=[]),t=At(t);var n=gt(e,t);return Wt(e,t.sort(o)),n}),za=Mn(),Ya=Mn(!0),Xa=ui(function(e){return Kt(At(e,!1,!0))}),$a=ui(function(e,t){return Es(e)||di(e)?_t(e,t):[]}),Ja=ui(Or),Ka=ui(function(e,t){var n=e?Ba(e):0;return Yn(n)&&(e=tr(e)),gt(e,At(t))}),Qa=un(function(e,t,n){qo.call(e,n)?++e[n]:e[n]=1}),Za=gn(Na),es=gn(ja,!0),ts=wn(tt,Na),ns=wn(nt,ja),rs=un(function(e,t,n){qo.call(e,n)?e[n].push(t):e[n]=[t]}),is=un(function(e,t,n){e[n]=t}),os=ui(function(e,t,n){var r=-1,i="function"==typeof t,o=Hn(t),a=Ba(e),s=Yn(a)?So(a):[];

return Na(e,function(e){var a=i?t:o&&null!=e&&e[t];s[++r]=a?a.apply(e,n):Vn(e,t,n)}),s}),as=un(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ss=Sn(lt,Na),us=Sn(ft,ja),cs=ui(function(e,t){if(null==e)return[];var n=t[2];return n&&Gn(t[0],t[1],n)&&(t.length=1),$t(e,At(t),[])}),ls=ma||function(){return(new Ao).getTime()},fs=ui(function(e,t,n){var r=O;if(n.length){var i=w(n,fs.placeholder);r|=P}return Nn(e,r,t,n,i)}),hs=ui(function(e,t){t=t.length?At(t):Pi(e);for(var n=-1,r=t.length;++n<r;){var i=t[n];e[i]=Nn(e[i],O,e)}return e}),ps=ui(function(e,t,n){var r=O|M;if(n.length){var i=w(n,ps.placeholder);r|=P}return Nn(t,r,e,n,i)}),ds=mn(j),ms=mn(R),vs=ui(function(e,t){return wt(e,1,t)}),gs=ui(function(e,t,n){return wt(e,t,n)}),ys=xn(),bs=xn(!0),xs=Cn(P),ws=Cn(D),_s=ui(function(e,t){return Nn(e,L,null,null,null,At(t))}),Es=ca||function(e){return b(e)&&Yn(e.length)&&Wo.call(e)==X};ka.dom||(gi=function(e){return!!e&&1===e.nodeType&&b(e)&&!Ss(e)});var Ts=va||function(e){return"number"==typeof e&&fa(e)},Cs=u(/x/)||oa&&!u(oa)?function(e){return Wo.call(e)==Q}:u,Ss=Qo?function(e){if(!e||Wo.call(e)!=te)return!1;var t=e.valueOf,n=Ti(t)&&(n=Qo(t))&&Qo(n);return n?e==n||Qo(e)==n:Zn(e)}:Zn,As=cn(function(e,t,n){return n?vt(e,t,n):Oa(e,t)}),ks=ui(function(e){var t=e[0];return null==t?t:(e.push(dt),As.apply(A,e))}),Os=bn(Ot),Ms=bn(Mt),Ns=_n(Ra),js=_n(Pa),Rs=En(Ot),Ps=En(Mt),Ds=ha?function(e){if(e)var t=e.constructor,n=e.length;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Yn(n)?er(e):wi(e)?ha(e):[]}:er,Is=cn(Bt),Ls=ui(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=st(At(t),Po);return Jn(e,_t(Fi(e),t))}var n=rn(t[0],t[1],3);return Kn(e,function(e,t,r){return!n(e,t,r)})}),Fs=ui(function(e,t){return null==e?{}:"function"==typeof t[0]?Kn(e,rn(t[0],t[1],3)):Jn(e,At(t))}),Bs=pn(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Us=pn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),qs=Tn(),Vs=Tn(!0);8!=ga(qe+"08")&&(eo=function(e,t,n){return(n?Gn(e,t,n):null==t)?t=0:t&&(t=+t),e=io(e),ga(e,t||(De.test(e)?16:10))});var Ws=pn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Gs=pn(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Hs=ui(function(e,t){try{return e.apply(A,t)}catch(n){return xi(n)?n:new ko(n)}}),zs=ui(function(e,t){return function(n){return Vn(n,e,t)}}),Ys=ui(function(e,t){return function(n){return Vn(e,n,t)}}),Xs=vn(ut),$s=vn(ct,!0);return t.prototype=n.prototype,r.prototype=Ma(n.prototype),r.prototype.constructor=r,i.prototype=Ma(n.prototype),i.prototype.constructor=i,oe.prototype["delete"]=Ye,oe.prototype.get=Xe,oe.prototype.has=$e,oe.prototype.set=Je,Ke.prototype.push=Ze,oi.Cache=oe,t.after=ti,t.ary=ni,t.assign=As,t.at=Ka,t.before=ri,t.bind=fs,t.bindAll=hs,t.bindKey=ps,t.callback=lo,t.chain=jr,t.chunk=or,t.compact=ar,t.constant=fo,t.countBy=Qa,t.create=Ri,t.curry=ds,t.curryRight=ms,t.debounce=ii,t.defaults=ks,t.defer=vs,t.delay=gs,t.difference=Va,t.drop=sr,t.dropRight=ur,t.dropRightWhile=cr,t.dropWhile=lr,t.fill=fr,t.filter=Vr,t.flatten=pr,t.flattenDeep=dr,t.flow=ys,t.flowRight=bs,t.forEach=ts,t.forEachRight=ns,t.forIn=Ns,t.forInRight=js,t.forOwn=Rs,t.forOwnRight=Ps,t.functions=Pi,t.groupBy=rs,t.indexBy=is,t.initial=vr,t.intersection=gr,t.invert=Li,t.invoke=os,t.keys=Ds,t.keysIn=Fi,t.map=Hr,t.mapValues=Bi,t.matches=po,t.matchesProperty=mo,t.memoize=oi,t.merge=Is,t.method=zs,t.methodOf=Ys,t.mixin=vo,t.negate=ai,t.omit=Ls,t.once=si,t.pairs=Ui,t.partial=xs,t.partialRight=ws,t.partition=as,t.pick=Fs,t.pluck=zr,t.property=bo,t.propertyOf=xo,t.pull=xr,t.pullAt=Ha,t.range=wo,t.rearg=_s,t.reject=Yr,t.remove=wr,t.rest=_r,t.restParam=ui,t.set=Vi,t.shuffle=$r,t.slice=Er,t.sortBy=Qr,t.sortByAll=cs,t.sortByOrder=Zr,t.spread=ci,t.take=Tr,t.takeRight=Cr,t.takeRightWhile=Sr,t.takeWhile=Ar,t.tap=Rr,t.throttle=li,t.thru=Pr,t.times=_o,t.toArray=Ni,t.toPlainObject=ji,t.transform=Wi,t.union=Xa,t.uniq=kr,t.unzip=Or,t.values=Gi,t.valuesIn=Hi,t.where=ei,t.without=$a,t.wrap=fi,t.xor=Mr,t.zip=Ja,t.zipObject=Nr,t.backflow=bs,t.collect=Hr,t.compose=bs,t.each=ts,t.eachRight=ns,t.extend=As,t.iteratee=lo,t.methods=Pi,t.object=Nr,t.select=Vr,t.tail=_r,t.unique=kr,vo(t,t),t.add=To,t.attempt=Hs,t.camelCase=Bs,t.capitalize=Xi,t.clone=hi,t.cloneDeep=pi,t.deburr=$i,t.endsWith=Ji,t.escape=Ki,t.escapeRegExp=Qi,t.every=qr,t.find=Za,t.findIndex=Wa,t.findKey=Os,t.findLast=es,t.findLastIndex=Ga,t.findLastKey=Ms,t.findWhere=Wr,t.first=hr,t.get=Di,t.has=Ii,t.identity=ho,t.includes=Gr,t.indexOf=mr,t.inRange=zi,t.isArguments=di,t.isArray=Es,t.isBoolean=mi,t.isDate=vi,t.isElement=gi,t.isEmpty=yi,t.isEqual=bi,t.isError=xi,t.isFinite=Ts,t.isFunction=Cs,t.isMatch=_i,t.isNaN=Ei,t.isNative=Ti,t.isNull=Ci,t.isNumber=Si,t.isObject=wi,t.isPlainObject=Ss,t.isRegExp=Ai,t.isString=ki,t.isTypedArray=Oi,t.isUndefined=Mi,t.kebabCase=Us,t.last=yr,t.lastIndexOf=br,t.max=Xs,t.min=$s,t.noConflict=go,t.noop=yo,t.now=ls,t.pad=Zi,t.padLeft=qs,t.padRight=Vs,t.parseInt=eo,t.random=Yi,t.reduce=ss,t.reduceRight=us,t.repeat=to,t.result=qi,t.runInContext=S,t.size=Jr,t.snakeCase=Ws,t.some=Kr,t.sortedIndex=za,t.sortedLastIndex=Ya,t.startCase=Gs,t.startsWith=no,t.sum=Co,t.template=ro,t.trim=io,t.trimLeft=oo,t.trimRight=ao,t.trunc=so,t.unescape=uo,t.uniqueId=Eo,t.words=co,t.all=qr,t.any=Kr,t.contains=Gr,t.detect=Za,t.foldl=ss,t.foldr=us,t.head=hr,t.include=Gr,t.inject=ss,vo(t,function(){var e={};return Ot(t,function(n,r){t.prototype[r]||(e[r]=n)}),e}(),!1),t.sample=Xr,t.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return Xr(t,e)}):Xr(this.value())},t.VERSION=k,tt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){t[e].placeholder=t}),tt(["dropWhile","filter","map","takeWhile"],function(e,t){var n=t!=G,r=t==V;i.prototype[e]=function(e,o){var a=this.__filtered__,s=a&&r?new i(this):this.clone(),u=s.__iteratees__||(s.__iteratees__=[]);return u.push({done:!1,count:0,index:0,iteratee:In(e,o,1),limit:-1,type:t}),s.__filtered__=a||n,s}}),tt(["drop","take"],function(e,t){var n=e+"While";i.prototype[e]=function(n){var r=this.__filtered__,i=r&&!t?this.dropWhile():this.clone();if(n=null==n?1:pa(Jo(n)||0,0),r)t?i.__takeCount__=da(i.__takeCount__,n):yr(i.__iteratees__).limit=n;else{var o=i.__views__||(i.__views__=[]);o.push({size:n,type:e+(i.__dir__<0?"Right":"")})}return i},i.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()},i.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[n](e,t).reverse()}}),tt(["first","last"],function(e,t){var n="take"+(t?"Right":"");i.prototype[e]=function(){return this[n](1).value()[0]}}),tt(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");i.prototype[e]=function(){return this[n](1)}}),tt(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?Lt:bo;i.prototype[e]=function(e){return this[n](r(e))}}),i.prototype.compact=function(){return this.filter(ho)},i.prototype.reject=function(e,t){return e=In(e,t,1),this.filter(function(t){return!e(t)})},i.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=0>e?this.takeRight(-e):this.drop(e);return t!==A&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n},i.prototype.toArray=function(){return this.drop(0)},Ot(i.prototype,function(e,n){var o=t[n];if(o){var a=/^(?:filter|map|reject)|While$/.test(n),s=/^(?:first|last)$/.test(n);t.prototype[n]=function(){var n=arguments,u=(n.length,this.__chain__),c=this.__wrapped__,l=!!this.__actions__.length,f=c instanceof i,h=n[0],p=f||Es(c);p&&a&&"function"==typeof h&&1!=h.length&&(f=p=!1);var d=f&&!l;if(s&&!u)return d?e.call(c):o.call(t,this.value());var m=function(e){var r=[e];return Zo.apply(r,n),o.apply(t,r)};if(p){var v=d?c:new i(this),g=e.apply(v,n);if(!s&&(l||g.__actions__)){var y=g.__actions__||(g.__actions__=[]);y.push({func:Pr,args:[m],thisArg:t})}return new r(g,u)}return this.thru(m)}}}),tt(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var n=(/^(?:replace|split)$/.test(e)?Fo:Io)[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(e);t.prototype[e]=function(){var e=arguments;return i&&!this.__chain__?n.apply(this.value(),e):this[r](function(t){return n.apply(t,e)})}}),Ot(i.prototype,function(e,n){var r=t[n];if(r){var i=r.name,o=Aa[i]||(Aa[i]=[]);o.push({name:n,func:r})}}),Aa[An(null,M).name]=[{name:"wrapper",func:null}],i.prototype.clone=x,i.prototype.reverse=Z,i.prototype.value=re,t.prototype.chain=Dr,t.prototype.commit=Ir,t.prototype.plant=Lr,t.prototype.reverse=Fr,t.prototype.toString=Br,t.prototype.run=t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=Ur,t.prototype.collect=t.prototype.map,t.prototype.head=t.prototype.first,t.prototype.select=t.prototype.filter,t.prototype.tail=t.prototype.rest,t}var A,k="3.7.0",O=1,M=2,N=4,j=8,R=16,P=32,D=64,I=128,L=256,F=30,B="...",U=150,q=16,V=0,W=1,G=2,H="Expected a function",z="__lodash_placeholder__",Y="[object Arguments]",X="[object Array]",$="[object Boolean]",J="[object Date]",K="[object Error]",Q="[object Function]",Z="[object Map]",ee="[object Number]",te="[object Object]",ne="[object RegExp]",re="[object Set]",ie="[object String]",oe="[object WeakMap]",ae="[object ArrayBuffer]",se="[object Float32Array]",ue="[object Float64Array]",ce="[object Int8Array]",le="[object Int16Array]",fe="[object Int32Array]",he="[object Uint8Array]",pe="[object Uint8ClampedArray]",de="[object Uint16Array]",me="[object Uint32Array]",ve=/\b__p \+= '';/g,ge=/\b(__p \+=) '' \+/g,ye=/(__e\(.*?\)|\b__t\)) \+\n'';/g,be=/&(?:amp|lt|gt|quot|#39|#96);/g,xe=/[&<>"'`]/g,we=RegExp(be.source),_e=RegExp(xe.source),Ee=/<%-([\s\S]+?)%>/g,Te=/<%([\s\S]+?)%>/g,Ce=/<%=([\s\S]+?)%>/g,Se=/\.|\[(?:[^[\]]+|(["'])(?:(?!\1)[^\n\\]|\\.)*?)\1\]/,Ae=/^\w*$/,ke=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Oe=/[.*+?^${}()|[\]\/\\]/g,Me=RegExp(Oe.source),Ne=/[\u0300-\u036f\ufe20-\ufe23]/g,je=/\\(\\)?/g,Re=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pe=/\w*$/,De=/^0[xX]/,Ie=/^\[object .+?Constructor\]$/,Le=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Fe=/($^)/,Be=/['\n\r\u2028\u2029\\]/g,Ue=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),qe=" 	\f\ufeff\n\r\u2028\u2029",Ve=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],We=-1,Ge={};Ge[se]=Ge[ue]=Ge[ce]=Ge[le]=Ge[fe]=Ge[he]=Ge[pe]=Ge[de]=Ge[me]=!0,Ge[Y]=Ge[X]=Ge[ae]=Ge[$]=Ge[J]=Ge[K]=Ge[Q]=Ge[Z]=Ge[ee]=Ge[te]=Ge[ne]=Ge[re]=Ge[ie]=Ge[oe]=!1;var He={};He[Y]=He[X]=He[ae]=He[$]=He[J]=He[se]=He[ue]=He[ce]=He[le]=He[fe]=He[ee]=He[te]=He[ne]=He[ie]=He[he]=He[pe]=He[de]=He[me]=!0,He[K]=He[Q]=He[Z]=He[re]=He[oe]=!1;var ze={leading:!1,maxWait:0,trailing:!1},Ye={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Xe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},$e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Je={"function":!0,object:!0},Ke={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Qe=Je[typeof t]&&t&&!t.nodeType&&t,Ze=Je[typeof e]&&e&&!e.nodeType&&e,et=Qe&&Ze&&"object"==typeof i&&i&&i.Object&&i,tt=Je[typeof self]&&self&&self.Object&&self,nt=Je[typeof window]&&window&&window.Object&&window,rt=(Ze&&Ze.exports===Qe&&Qe,et||nt!==(this&&this.window)&&nt||tt||this),it=S();rt._=it,r=function(){return it}.call(t,n,t,e),!(r!==A&&(e.exports=r))}).call(this)}).call(t,n(99)(e),function(){return this}())},function(e,t,n){(function(t){"use strict";var r=n(2),i=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},o=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},a=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},s=function(e,t,n,r,i){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,e,t,n,r,i),a}return new o(e,t,n,r,i)},u=function(e){var n=this;"production"!==t.env.NODE_ENV?r(e instanceof n,"Trying to release an instance into a pool of a different type."):r(e instanceof n),e.destructor&&e.destructor(),n.instancePool.length<n.poolSize&&n.instancePool.push(e)},c=10,l=i,f=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||l,n.poolSize||(n.poolSize=c),n.release=u,n},h={addPoolingTo:f,oneArgumentPooler:i,twoArgumentPooler:o,threeArgumentPooler:a,fiveArgumentPooler:s};e.exports=h}).call(t,n(1))},function(e,t,n){"use strict";var r=n(89),i={getDOMNode:function(){return r(this)}};e.exports=i},function(e,t,n){"use strict";var r={current:null};e.exports=r},function(e,t,n){(function(t){"use strict";function n(e,t,n){return n}var r={enableMeasure:!1,storedMeasure:n,measureMethods:function(e,n,i){if("production"!==t.env.NODE_ENV)for(var o in i)i.hasOwnProperty(o)&&(e[o]=r.measure(n,i[o],e[o]))},measure:function(e,n,i){if("production"!==t.env.NODE_ENV){var o=null,a=function(){return r.enableMeasure?(o||(o=r.storedMeasure(e,n,i)),o.apply(this,arguments)):i.apply(this,arguments)};return a.displayName=e+"_"+n,a}return i},injection:{injectMeasure:function(e){r.storedMeasure=e}}};e.exports=r}).call(t,n(1))},function(e,t,n){function r(e){return function(){return e}}function i(){}i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){var r=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};e.exports=r},function(e,t,n){(function(t){"use strict";function r(e,t){return(e&t)===t}var i=n(2),o={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var n=e.Properties||{},a=e.DOMAttributeNames||{},u=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var l in n){"production"!==t.env.NODE_ENV?i(!s.isStandardName.hasOwnProperty(l),"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",l):i(!s.isStandardName.hasOwnProperty(l)),s.isStandardName[l]=!0;var f=l.toLowerCase();if(s.getPossibleStandardName[f]=l,a.hasOwnProperty(l)){var h=a[l];s.getPossibleStandardName[h]=l,s.getAttributeName[l]=h}else s.getAttributeName[l]=f;s.getPropertyName[l]=u.hasOwnProperty(l)?u[l]:l,c.hasOwnProperty(l)?s.getMutationMethod[l]=c[l]:s.getMutationMethod[l]=null;var p=n[l];s.mustUseAttribute[l]=r(p,o.MUST_USE_ATTRIBUTE),s.mustUseProperty[l]=r(p,o.MUST_USE_PROPERTY),s.hasSideEffects[l]=r(p,o.HAS_SIDE_EFFECTS),s.hasBooleanValue[l]=r(p,o.HAS_BOOLEAN_VALUE),s.hasNumericValue[l]=r(p,o.HAS_NUMERIC_VALUE),s.hasPositiveNumericValue[l]=r(p,o.HAS_POSITIVE_NUMERIC_VALUE),s.hasOverloadedBooleanValue[l]=r(p,o.HAS_OVERLOADED_BOOLEAN_VALUE),"production"!==t.env.NODE_ENV?i(!s.mustUseAttribute[l]||!s.mustUseProperty[l],"DOMProperty: Cannot require using both attribute and property: %s",l):i(!s.mustUseAttribute[l]||!s.mustUseProperty[l]),"production"!==t.env.NODE_ENV?i(s.mustUseProperty[l]||!s.hasSideEffects[l],"DOMProperty: Properties that have side effects must use property: %s",l):i(s.mustUseProperty[l]||!s.hasSideEffects[l]),"production"!==t.env.NODE_ENV?i(!!s.hasBooleanValue[l]+!!s.hasNumericValue[l]+!!s.hasOverloadedBooleanValue[l]<=1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",l):i(!!s.hasBooleanValue[l]+!!s.hasNumericValue[l]+!!s.hasOverloadedBooleanValue[l]<=1)}}},a={},s={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){var n=s._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,r=a[e];return r||(a[e]=r={}),t in r||(n=document.createElement(e),r[t]=n[t]),r[t]},injection:o};e.exports=s}).call(t,n(1))},function(e,t,n){"use strict";function r(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o?this[i]=o(n):this[i]=n[i]}var s=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;s?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse}var i=n(15),o=n(3),a=n(19),s=n(66),u={type:null,target:s,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};o(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=a.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=a.thatReturnsTrue},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),r.Interface=u,r.augmentClass=function(e,t){var n=this,r=Object.create(n.prototype);o(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=o({},n.Interface,t),e.augmentClass=n.augmentClass,i.addPoolingTo(e,i.threeArgumentPooler)},i.addPoolingTo(r,i.threeArgumentPooler),e.exports=r},function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,m)||(e[m]=p++,f[e[m]]={}),f[e[m]]}var i=n(10),o=n(29),a=n(77),s=n(158),u=n(87),c=n(3),l=n(68),f={},h=!1,p=0,d={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),v=c({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=e}},setEnabled:function(e){v.ReactEventListener&&v.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,o=r(n),s=a.registrationNameDependencies[e],u=i.topLevelTypes,c=0,f=s.length;f>c;c++){var h=s[c];o.hasOwnProperty(h)&&o[h]||(h===u.topWheel?l("wheel")?v.ReactEventListener.trapBubbledEvent(u.topWheel,"wheel",n):l("mousewheel")?v.ReactEventListener.trapBubbledEvent(u.topWheel,"mousewheel",n):v.ReactEventListener.trapBubbledEvent(u.topWheel,"DOMMouseScroll",n):h===u.topScroll?l("scroll",!0)?v.ReactEventListener.trapCapturedEvent(u.topScroll,"scroll",n):v.ReactEventListener.trapBubbledEvent(u.topScroll,"scroll",v.ReactEventListener.WINDOW_HANDLE):h===u.topFocus||h===u.topBlur?(l("focus",!0)?(v.ReactEventListener.trapCapturedEvent(u.topFocus,"focus",n),v.ReactEventListener.trapCapturedEvent(u.topBlur,"blur",n)):l("focusin")&&(v.ReactEventListener.trapBubbledEvent(u.topFocus,"focusin",n),v.ReactEventListener.trapBubbledEvent(u.topBlur,"focusout",n)),o[u.topBlur]=!0,o[u.topFocus]=!0):d.hasOwnProperty(h)&&v.ReactEventListener.trapBubbledEvent(h,d[h],n),o[h]=!0)}},trapBubbledEvent:function(e,t,n){return v.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return v.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!h){var e=u.refreshScrollValues;v.ReactEventListener.monitorScrollValue(e),h=!0}},eventNameDispatchConfigs:o.eventNameDispatchConfigs,registrationNameModules:o.registrationNameModules,putListener:o.putListener,getListener:o.getListener,deleteListener:o.deleteListener,deleteAllListeners:o.deleteAllListeners});e.exports=v},function(e,t,n){(function(t){"use strict";function r(e){return p+e.toString(36)}function i(e,t){return e.charAt(t)===p||t===e.length}function o(e){return""===e||e.charAt(0)===p&&e.charAt(e.length-1)!==p}function a(e,t){return 0===t.indexOf(e)&&i(t,e.length)}function s(e){return e?e.substr(0,e.lastIndexOf(p)):""}function u(e,n){if("production"!==t.env.NODE_ENV?h(o(e)&&o(n),"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",e,n):h(o(e)&&o(n)),"production"!==t.env.NODE_ENV?h(a(e,n),"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",e,n):h(a(e,n)),e===n)return e;var r,s=e.length+d;for(r=s;r<n.length&&!i(n,r);r++);return n.substr(0,r)}function c(e,n){var r=Math.min(e.length,n.length);if(0===r)return"";for(var a=0,s=0;r>=s;s++)if(i(e,s)&&i(n,s))a=s;else if(e.charAt(s)!==n.charAt(s))break;var u=e.substr(0,a);return"production"!==t.env.NODE_ENV?h(o(u),"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",e,n,u):h(o(u)),u}function l(e,n,r,i,o,c){e=e||"",n=n||"","production"!==t.env.NODE_ENV?h(e!==n,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",e):h(e!==n);var l=a(n,e);"production"!==t.env.NODE_ENV?h(l||a(e,n),"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",e,n):h(l||a(e,n));for(var f=0,p=l?s:u,d=e;;d=p(d,n)){var v;if(o&&d===e||c&&d===n||(v=r(d,l,i)),v===!1||d===n)break;"production"!==t.env.NODE_ENV?h(f++<m,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",e,n):h(f++<m)}}var f=n(86),h=n(2),p=".",d=p.length,m=100,v={createReactRootID:function(){return r(f.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===p&&e.length>1){var t=e.indexOf(p,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,i){var o=c(e,t);o!==e&&l(e,o,n,r,!1,!0),o!==t&&l(o,t,n,i,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(l("",e,t,n,!0,!1),l(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){l("",e,t,n,!0,!1)},_getFirstCommonAncestorID:c,_getNextDescendantID:u,isAncestorIDOf:a,SEPARATOR:p};e.exports=v}).call(t,n(1))},function(e,t,n){"use strict";var r={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=r},function(e,t,n){(function(t){"use strict";function r(){i.attachRefs(this,this._currentElement)}var i=n(164),o=n(31),a={mountComponent:function(e,n,i,a){var s=e.mountComponent(n,i,a);return"production"!==t.env.NODE_ENV&&o.checkAndWarnForMutatedProps(e._currentElement),i.getReactMountReady().enqueue(r,e),s},unmountComponent:function(e){i.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,n,a,s){var u=e._currentElement;if(n!==u||null==n._owner){"production"!==t.env.NODE_ENV&&o.checkAndWarnForMutatedProps(n);var c=i.shouldUpdateRefs(u,n);c&&i.detachRefs(e,u),e.receiveComponent(n,a,s),c&&a.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}};e.exports=a}).call(t,n(1))},function(e,t,n){/**
	 * @license
	 * pixi.js - v2.2.9
	 * Copyright (c) 2012-2014, Mat Groves
	 * http://goodboydigital.com/
	 *
	 * Compiled: 2015-04-08
	 *
	 * pixi.js is licensed under the MIT License.
	 * http://www.opensource.org/licenses/mit-license.php
	 */
(function(){var n=n||{};n.WEBGL_RENDERER=0,n.CANVAS_RENDERER=1,n.VERSION="v2.2.9",n.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},n.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},n._UID=0,"undefined"!=typeof Float32Array?(n.Float32Array=Float32Array,n.Uint16Array=Uint16Array,n.Uint32Array=Uint32Array,n.ArrayBuffer=ArrayBuffer):(n.Float32Array=Array,n.Uint16Array=Array),n.INTERACTION_FREQUENCY=30,n.AUTO_PREVENT_DEFAULT=!0,n.PI_2=2*Math.PI,n.RAD_TO_DEG=180/Math.PI,n.DEG_TO_RAD=Math.PI/180,n.RETINA_PREFIX="@2x",n.dontSayHello=!1,n.defaultRenderOptions={view:null,transparent:!1,antialias:!1,preserveDrawingBuffer:!1,resolution:1,clearBeforeRender:!0,autoResize:!1},n.sayHello=function(e){if(!n.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["%c %c %c Pixi.js "+n.VERSION+" - "+e+"  %c  %c  http://www.pixijs.com/  %c %c %c%c ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,t)}else window.console&&console.log("Pixi.js "+n.VERSION+" - http://www.pixijs.com/");n.dontSayHello=!0}},n.Point=function(e,t){this.x=e||0,this.y=t||0},n.Point.prototype.clone=function(){return new n.Point(this.x,this.y)},n.Point.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)},n.Point.prototype.constructor=n.Point,n.Rectangle=function(e,t,n,r){this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0},n.Rectangle.prototype.clone=function(){return new n.Rectangle(this.x,this.y,this.width,this.height)},n.Rectangle.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=this.x;if(e>=n&&e<=n+this.width){var r=this.y;if(t>=r&&t<=r+this.height)return!0}return!1},n.Rectangle.prototype.constructor=n.Rectangle,n.EmptyRectangle=new n.Rectangle(0,0,0,0),n.Polygon=function(e){if(e instanceof Array||(e=Array.prototype.slice.call(arguments)),e[0]instanceof n.Point){for(var t=[],r=0,i=e.length;i>r;r++)t.push(e[r].x,e[r].y);e=t}this.closed=!0,this.points=e},n.Polygon.prototype.clone=function(){var e=this.points.slice();return new n.Polygon(e)},n.Polygon.prototype.contains=function(e,t){for(var n=!1,r=this.points.length/2,i=0,o=r-1;r>i;o=i++){var a=this.points[2*i],s=this.points[2*i+1],u=this.points[2*o],c=this.points[2*o+1],l=s>t!=c>t&&(u-a)*(t-s)/(c-s)+a>e;l&&(n=!n)}return n},n.Polygon.prototype.constructor=n.Polygon,n.Circle=function(e,t,n){this.x=e||0,this.y=t||0,this.radius=n||0},n.Circle.prototype.clone=function(){return new n.Circle(this.x,this.y,this.radius)},n.Circle.prototype.contains=function(e,t){if(this.radius<=0)return!1;var n=this.x-e,r=this.y-t,i=this.radius*this.radius;return n*=n,r*=r,i>=n+r},n.Circle.prototype.getBounds=function(){return new n.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},n.Circle.prototype.constructor=n.Circle,n.Ellipse=function(e,t,n,r){this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0},n.Ellipse.prototype.clone=function(){return new n.Ellipse(this.x,this.y,this.width,this.height)},n.Ellipse.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,r=(t-this.y)/this.height;return n*=n,r*=r,1>=n+r},n.Ellipse.prototype.getBounds=function(){return new n.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},n.Ellipse.prototype.constructor=n.Ellipse,n.RoundedRectangle=function(e,t,n,r,i){this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0,this.radius=i||20},n.RoundedRectangle.prototype.clone=function(){return new n.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},n.RoundedRectangle.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=this.x;if(e>=n&&e<=n+this.width){var r=this.y;if(t>=r&&t<=r+this.height)return!0}return!1},n.RoundedRectangle.prototype.constructor=n.RoundedRectangle,n.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},n.Matrix.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},n.Matrix.prototype.toArray=function(e){this.array||(this.array=new n.Float32Array(9));var t=this.array;return e?(t[0]=this.a,t[1]=this.b,t[2]=0,t[3]=this.c,t[4]=this.d,t[5]=0,t[6]=this.tx,t[7]=this.ty,t[8]=1):(t[0]=this.a,t[1]=this.c,t[2]=this.tx,t[3]=this.b,t[4]=this.d,t[5]=this.ty,t[6]=0,t[7]=0,t[8]=1),t},n.Matrix.prototype.apply=function(e,t){return t=t||new n.Point,t.x=this.a*e.x+this.c*e.y+this.tx,t.y=this.b*e.x+this.d*e.y+this.ty,t},n.Matrix.prototype.applyInverse=function(e,t){t=t||new n.Point;var r=1/(this.a*this.d+this.c*-this.b);return t.x=this.d*r*e.x+-this.c*r*e.y+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*e.y+-this.b*r*e.x+(-this.ty*this.a+this.tx*this.b)*r,t},n.Matrix.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},n.Matrix.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},n.Matrix.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,o=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this},n.Matrix.prototype.append=function(e){var t=this.a,n=this.b,r=this.c,i=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*i,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*i,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this},n.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.identityMatrix=new n.Matrix,n.DisplayObject=function(){this.position=new n.Point,this.scale=new n.Point(1,1),this.pivot=new n.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new n.Matrix,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new n.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},n.DisplayObject.prototype.constructor=n.DisplayObject,Object.defineProperty(n.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(e){this._interactive=e,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(n.DisplayObject.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}}),Object.defineProperty(n.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(e){this._mask&&(this._mask.isMask=!1),this._mask=e,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(n.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(e){if(e){for(var t=[],n=0;n<e.length;n++)for(var r=e[n].passes,i=0;i<r.length;i++)t.push(r[i]);this._filterBlock={target:this,filterPasses:t}}this._filters=e}}),Object.defineProperty(n.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap!==e&&(e?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=e)}}),n.DisplayObject.prototype.updateTransform=function(){var e,t,r,i,o,a,s=this.parent.worldTransform,u=this.worldTransform;this.rotation%n.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),e=this._cr*this.scale.x,t=this._sr*this.scale.x,r=-this._sr*this.scale.y,i=this._cr*this.scale.y,o=this.position.x,a=this.position.y,(this.pivot.x||this.pivot.y)&&(o-=this.pivot.x*e+this.pivot.y*r,a-=this.pivot.x*t+this.pivot.y*i),u.a=e*s.a+t*s.c,u.b=e*s.b+t*s.d,u.c=r*s.a+i*s.c,u.d=r*s.b+i*s.d,u.tx=o*s.a+a*s.c+s.tx,u.ty=o*s.b+a*s.d+s.ty):(e=this.scale.x,i=this.scale.y,o=this.position.x-this.pivot.x*e,a=this.position.y-this.pivot.y*i,u.a=e*s.a,u.b=e*s.b,u.c=i*s.c,u.d=i*s.d,u.tx=o*s.a+a*s.c+s.tx,u.ty=o*s.b+a*s.d+s.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha},n.DisplayObject.prototype.displayObjectUpdateTransform=n.DisplayObject.prototype.updateTransform,n.DisplayObject.prototype.getBounds=function(e){return e=e,n.EmptyRectangle},n.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(n.identityMatrix)},n.DisplayObject.prototype.setStageReference=function(e){this.stage=e,this._interactive&&(this.stage.dirty=!0)},n.DisplayObject.prototype.generateTexture=function(e,t,r){var i=this.getLocalBounds(),o=new n.RenderTexture(0|i.width,0|i.height,r,t,e);return n.DisplayObject._tempMatrix.tx=-i.x,n.DisplayObject._tempMatrix.ty=-i.y,o.render(this,n.DisplayObject._tempMatrix),o},n.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},n.DisplayObject.prototype.toGlobal=function(e){return this.displayObjectUpdateTransform(),this.worldTransform.apply(e)},n.DisplayObject.prototype.toLocal=function(e,t){return t&&(e=t.toGlobal(e)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(e)},n.DisplayObject.prototype._renderCachedSprite=function(e){this._cachedSprite.worldAlpha=this.worldAlpha,e.gl?n.Sprite.prototype._renderWebGL.call(this._cachedSprite,e):n.Sprite.prototype._renderCanvas.call(this._cachedSprite,e)},n.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var e=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|e.width,0|e.height);else{var t=new n.RenderTexture(0|e.width,0|e.height);this._cachedSprite=new n.Sprite(t),this._cachedSprite.worldTransform=this.worldTransform}var r=this._filters;this._filters=null,this._cachedSprite.filters=r,n.DisplayObject._tempMatrix.tx=-e.x,n.DisplayObject._tempMatrix.ty=-e.y,this._cachedSprite.texture.render(this,n.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this._filters=r,this._cacheAsBitmap=!0},n.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},n.DisplayObject.prototype._renderWebGL=function(e){e=e},n.DisplayObject.prototype._renderCanvas=function(e){e=e},n.DisplayObject._tempMatrix=new n.Matrix,Object.defineProperty(n.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(e){this.position.x=e}}),Object.defineProperty(n.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(e){this.position.y=e}}),n.DisplayObjectContainer=function(){n.DisplayObject.call(this),this.children=[]},n.DisplayObjectContainer.prototype=Object.create(n.DisplayObject.prototype),n.DisplayObjectContainer.prototype.constructor=n.DisplayObjectContainer,Object.defineProperty(n.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;0!==t?this.scale.x=e/t:this.scale.x=1,this._width=e}}),Object.defineProperty(n.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;0!==t?this.scale.y=e/t:this.scale.y=1,this._height=e}}),n.DisplayObjectContainer.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)},n.DisplayObjectContainer.prototype.addChildAt=function(e,t){if(t>=0&&t<=this.children.length)return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),this.stage&&e.setStageReference(this.stage),e;throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length)},n.DisplayObjectContainer.prototype.swapChildren=function(e,t){if(e!==t){var n=this.getChildIndex(e),r=this.getChildIndex(t);if(0>n||0>r)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[n]=t,this.children[r]=e}},n.DisplayObjectContainer.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},n.DisplayObjectContainer.prototype.setChildIndex=function(e,t){if(0>t||t>=this.children.length)throw new Error("The supplied index is out of bounds");var n=this.getChildIndex(e);this.children.splice(n,1),this.children.splice(t,0,e)},n.DisplayObjectContainer.prototype.getChildAt=function(e){if(0>e||e>=this.children.length)throw new Error("getChildAt: Supplied index "+e+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[e]},n.DisplayObjectContainer.prototype.removeChild=function(e){var t=this.children.indexOf(e);if(-1!==t)return this.removeChildAt(t)},n.DisplayObjectContainer.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return this.stage&&t.removeStageReference(),t.parent=void 0,this.children.splice(e,1),t},n.DisplayObjectContainer.prototype.removeChildren=function(e,t){var n=e||0,r="number"==typeof t?t:this.children.length,i=r-n;if(i>0&&r>=i){for(var o=this.children.splice(n,i),a=0;a<o.length;a++){var s=o[a];this.stage&&s.removeStageReference(),s.parent=void 0}return o}if(0===i&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},n.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var e=0,t=this.children.length;t>e;e++)this.children[e].updateTransform()},n.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=n.DisplayObjectContainer.prototype.updateTransform,n.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return n.EmptyRectangle;for(var e,t,r,i=1/0,o=1/0,a=-(1/0),s=-(1/0),u=!1,c=0,l=this.children.length;l>c;c++){var f=this.children[c];f.visible&&(u=!0,e=this.children[c].getBounds(),i=i<e.x?i:e.x,o=o<e.y?o:e.y,t=e.width+e.x,r=e.height+e.y,a=a>t?a:t,s=s>r?s:r)}if(!u)return n.EmptyRectangle;var h=this._bounds;return h.x=i,h.y=o,h.width=a-i,h.height=s-o,h},n.DisplayObjectContainer.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=n.identityMatrix;for(var t=0,r=this.children.length;r>t;t++)this.children[t].updateTransform();var i=this.getBounds();return this.worldTransform=e,i},n.DisplayObjectContainer.prototype.setStageReference=function(e){this.stage=e,this._interactive&&(this.stage.dirty=!0);for(var t=0,n=this.children.length;n>t;t++){var r=this.children[t];r.setStageReference(e)}},n.DisplayObjectContainer.prototype.removeStageReference=function(){for(var e=0,t=this.children.length;t>e;e++){var n=this.children[e];n.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},n.DisplayObjectContainer.prototype._renderWebGL=function(e){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(e);var t,n;if(this._mask||this._filters){for(this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),t=0,n=this.children.length;n>t;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),e.spriteBatch.start()}else for(t=0,n=this.children.length;n>t;t++)this.children[t]._renderWebGL(e)}},n.DisplayObjectContainer.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(e);this._mask&&e.maskManager.pushMask(this._mask,e);for(var t=0,n=this.children.length;n>t;t++){var r=this.children[t];r._renderCanvas(e)}this._mask&&e.maskManager.popMask(e)}},n.Sprite=function(e){n.DisplayObjectContainer.call(this),this.anchor=new n.Point,this.texture=e||n.Texture.emptyTexture,this._width=0,this._height=0,this.tint=16777215,this.blendMode=n.blendModes.NORMAL,this.shader=null,this.texture.baseTexture.hasLoaded?this.onTextureUpdate():this.texture.on("update",this.onTextureUpdate.bind(this)),this.renderable=!0},n.Sprite.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Sprite.prototype.constructor=n.Sprite,Object.defineProperty(n.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(n.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),n.Sprite.prototype.setTexture=function(e){this.texture=e,this.cachedTint=16777215},n.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},n.Sprite.prototype.getBounds=function(e){var t=this.texture.frame.width,n=this.texture.frame.height,r=t*(1-this.anchor.x),i=t*-this.anchor.x,o=n*(1-this.anchor.y),a=n*-this.anchor.y,s=e||this.worldTransform,u=s.a,c=s.b,l=s.c,f=s.d,h=s.tx,p=s.ty,d=-(1/0),m=-(1/0),v=1/0,g=1/0;if(0===c&&0===l)0>u&&(u*=-1),0>f&&(f*=-1),v=u*i+h,d=u*r+h,g=f*a+p,m=f*o+p;else{var y=u*i+l*a+h,b=f*a+c*i+p,x=u*r+l*a+h,w=f*a+c*r+p,_=u*r+l*o+h,E=f*o+c*r+p,T=u*i+l*o+h,C=f*o+c*i+p;v=v>y?y:v,v=v>x?x:v,v=v>_?_:v,v=v>T?T:v,g=g>b?b:g,g=g>w?w:g,g=g>E?E:g,g=g>C?C:g,d=y>d?y:d,d=x>d?x:d,d=_>d?_:d,d=T>d?T:d,m=b>m?b:m,m=w>m?w:m,m=E>m?E:m,m=C>m?C:m}var S=this._bounds;return S.x=v,S.width=d-v,S.y=g,S.height=m-g,this._currentBounds=S,S},n.Sprite.prototype._renderWebGL=function(e){if(this.visible&&!(this.alpha<=0)){var t,n;if(this._mask||this._filters){var r=e.spriteBatch;for(this._filters&&(r.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(r.stop(),e.maskManager.pushMask(this.mask,e),r.start()),r.render(this),t=0,n=this.children.length;n>t;t++)this.children[t]._renderWebGL(e);r.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),r.start()}else for(e.spriteBatch.render(this),t=0,n=this.children.length;n>t;t++)this.children[t]._renderWebGL(e)}},n.Sprite.prototype._renderCanvas=function(e){if(!(this.visible===!1||0===this.alpha||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,e.context.globalCompositeOperation=n.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e),this.texture.valid){var t=this.texture.baseTexture.resolution/e.resolution;e.context.globalAlpha=this.worldAlpha,e.smoothProperty&&e.scaleMode!==this.texture.baseTexture.scaleMode&&(e.scaleMode=this.texture.baseTexture.scaleMode,e.context[e.smoothProperty]=e.scaleMode===n.scaleModes.LINEAR);var r=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,i=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;e.roundPixels?(e.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*e.resolution|0,this.worldTransform.ty*e.resolution|0),r=0|r,i=0|i):e.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*e.resolution,this.worldTransform.ty*e.resolution),16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=n.CanvasTinter.getTintedTexture(this,this.tint)),e.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,r/t,i/t,this.texture.crop.width/t,this.texture.crop.height/t)):e.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,r/t,i/t,this.texture.crop.width/t,this.texture.crop.height/t)}for(var o=0,a=this.children.length;a>o;o++)this.children[o]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},n.Sprite.fromFrame=function(e){var t=n.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache'+this);return new n.Sprite(t)},n.Sprite.fromImage=function(e,t,r){var i=n.Texture.fromImage(e,t,r);return new n.Sprite(i)},n.SpriteBatch=function(e){n.DisplayObjectContainer.call(this),this.textureThing=e,this.ready=!1},n.SpriteBatch.prototype=Object.create(n.DisplayObjectContainer.prototype),n.SpriteBatch.prototype.constructor=n.SpriteBatch,n.SpriteBatch.prototype.initWebGL=function(e){this.fastSpriteBatch=new n.WebGLFastSpriteBatch(e),this.ready=!0},n.SpriteBatch.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},n.SpriteBatch.prototype._renderWebGL=function(e){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(e.gl),this.fastSpriteBatch.gl!==e.gl&&this.fastSpriteBatch.setContext(e.gl),e.spriteBatch.stop(),e.shaderManager.setShader(e.shaderManager.fastShader),this.fastSpriteBatch.begin(this,e),this.fastSpriteBatch.render(this),e.spriteBatch.start())},n.SpriteBatch.prototype._renderCanvas=function(e){if(this.visible&&!(this.alpha<=0)&&this.children.length){var t=e.context;t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var n=this.worldTransform,r=!0,i=0;i<this.children.length;i++){var o=this.children[i];if(o.visible){var a=o.texture,s=a.frame;if(t.globalAlpha=this.worldAlpha*o.alpha,o.rotation%(2*Math.PI)===0)r&&(t.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty),r=!1),t.drawImage(a.baseTexture.source,s.x,s.y,s.width,s.height,o.anchor.x*-s.width*o.scale.x+o.position.x+.5|0,o.anchor.y*-s.height*o.scale.y+o.position.y+.5|0,s.width*o.scale.x,s.height*o.scale.y);else{r||(r=!0),o.displayObjectUpdateTransform();var u=o.worldTransform;e.roundPixels?t.setTransform(u.a,u.b,u.c,u.d,0|u.tx,0|u.ty):t.setTransform(u.a,u.b,u.c,u.d,u.tx,u.ty),t.drawImage(a.baseTexture.source,s.x,s.y,s.width,s.height,o.anchor.x*-s.width+.5|0,o.anchor.y*-s.height+.5|0,s.width,s.height)}}}}},n.MovieClip=function(e){n.Sprite.call(this,e[0]),this.textures=e,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},n.MovieClip.prototype=Object.create(n.Sprite.prototype),n.MovieClip.prototype.constructor=n.MovieClip,Object.defineProperty(n.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),n.MovieClip.prototype.stop=function(){this.playing=!1},n.MovieClip.prototype.play=function(){this.playing=!0},n.MovieClip.prototype.gotoAndStop=function(e){this.playing=!1,this.currentFrame=e;var t=this.currentFrame+.5|0;this.setTexture(this.textures[t%this.textures.length])},n.MovieClip.prototype.gotoAndPlay=function(e){this.currentFrame=e,this.playing=!0},n.MovieClip.prototype.updateTransform=function(){if(this.displayObjectContainerUpdateTransform(),this.playing){this.currentFrame+=this.animationSpeed;var e=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||e<this.textures.length?this.setTexture(this.textures[e%this.textures.length]):e>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},n.MovieClip.fromFrames=function(e){for(var t=[],r=0;r<e.length;r++)t.push(new n.Texture.fromFrame(e[r]));return new n.MovieClip(t)},n.MovieClip.fromImages=function(e){for(var t=[],r=0;r<e.length;r++)t.push(new n.Texture.fromImage(e[r]));return new n.MovieClip(t)},n.FilterBlock=function(){this.visible=!0,this.renderable=!0},n.FilterBlock.prototype.constructor=n.FilterBlock,n.Text=function(e,t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,n.Sprite.call(this,n.Texture.fromCanvas(this.canvas)),this.setText(e),this.setStyle(t)},n.Text.prototype=Object.create(n.Sprite.prototype),n.Text.prototype.constructor=n.Text,Object.defineProperty(n.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(n.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),n.Text.prototype.setStyle=function(e){e=e||{},e.font=e.font||"bold 20pt Arial",e.fill=e.fill||"black",e.align=e.align||"left",e.stroke=e.stroke||"black",e.strokeThickness=e.strokeThickness||0,e.wordWrap=e.wordWrap||!1,e.wordWrapWidth=e.wordWrapWidth||100,e.dropShadow=e.dropShadow||!1,e.dropShadowAngle=e.dropShadowAngle||Math.PI/6,e.dropShadowDistance=e.dropShadowDistance||4,e.dropShadowColor=e.dropShadowColor||"black",e.lineJoin=e.lineJoin||"miter",e.lineHeight=e.lineHeight||!1,this.style=e,this.dirty=!0},n.Text.prototype.setText=function(e){this.text=e.toString()||" ",this.dirty=!0},n.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var e=this.text;this.style.wordWrap&&(e=this.wordWrap(this.text));for(var t=e.split(/(?:\r\n|\r|\n)/),n=[],r=0,i=this.determineFontProperties(this.style.font),o=0;o<t.length;o++){var a=this.context.measureText(t[o]).width;n[o]=a,r=Math.max(r,a)}var s=r+this.style.strokeThickness;this.style.dropShadow&&(s+=this.style.dropShadowDistance),this.canvas.width=(s+this.context.lineWidth)*this.resolution;var u=this.style.lineHeight||i.fontSize+this.style.strokeThickness,c=u*t.length;this.style.dropShadow&&(c+=this.style.dropShadowDistance),this.canvas.height=c*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic",this.context.lineJoin=this.style.lineJoin;var l,f;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var h=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,p=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(o=0;o<t.length;o++)l=this.style.strokeThickness/2,f=this.style.strokeThickness/2+o*u+i.ascent,"right"===this.style.align?l+=r-n[o]:"center"===this.style.align&&(l+=(r-n[o])/2),this.style.fill&&this.context.fillText(t[o],l+h,f+p)}for(this.context.fillStyle=this.style.fill,o=0;o<t.length;o++)l=this.style.strokeThickness/2,f=this.style.strokeThickness/2+o*u+i.ascent,"right"===this.style.align?l+=r-n[o]:"center"===this.style.align&&(l+=(r-n[o])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(t[o],l,f),this.style.fill&&this.context.fillText(t[o],l,f);this.updateTexture()},n.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.texture.baseTexture.dirty()},n.Text.prototype._renderWebGL=function(e){this.dirty&&(this.resolution=e.resolution,this.updateText(),this.dirty=!1),n.Sprite.prototype._renderWebGL.call(this,e)},n.Text.prototype._renderCanvas=function(e){this.dirty&&(this.resolution=e.resolution,this.updateText(),this.dirty=!1),n.Sprite.prototype._renderCanvas.call(this,e)},n.Text.prototype.determineFontProperties=function(e){var t=n.Text.fontPropertiesCache[e];if(!t){t={};var r=n.Text.fontPropertiesCanvas,i=n.Text.fontPropertiesContext;i.font=e;var o=Math.ceil(i.measureText("|Mq").width),a=Math.ceil(i.measureText("M").width),s=2*a;a=1.4*a|0,r.width=o,r.height=s,i.fillStyle="#f00",i.fillRect(0,0,o,s),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|Mq",0,a);var u,c,l=i.getImageData(0,0,o,s).data,f=l.length,h=4*o,p=0,d=!1;for(u=0;a>u;u++){for(c=0;h>c;c+=4)if(255!==l[p+c]){d=!0;break}if(d)break;p+=h}for(t.ascent=a-u,p=f-h,d=!1,u=s;u>a;u--){for(c=0;h>c;c+=4)if(255!==l[p+c]){d=!0;break}if(d)break;p-=h}t.descent=u-a,t.descent+=6,t.fontSize=t.ascent+t.descent,n.Text.fontPropertiesCache[e]=t}return t},n.Text.prototype.wordWrap=function(e){for(var t="",n=e.split("\n"),r=0;r<n.length;r++){for(var i=this.style.wordWrapWidth,o=n[r].split(" "),a=0;a<o.length;a++){var s=this.context.measureText(o[a]).width,u=s+this.context.measureText(" ").width;0===a||u>i?(a>0&&(t+="\n"),t+=o[a],i=this.style.wordWrapWidth-s):(i-=u,t+=" "+o[a])}r<n.length-1&&(t+="\n")}return t},n.Text.prototype.getBounds=function(e){return this.dirty&&(this.updateText(),this.dirty=!1),n.Sprite.prototype.getBounds.call(this,e)},n.Text.prototype.destroy=function(e){this.context=null,this.canvas=null,this.texture.destroy(void 0===e?!0:e)},n.Text.fontPropertiesCache={},n.Text.fontPropertiesCanvas=document.createElement("canvas"),n.Text.fontPropertiesContext=n.Text.fontPropertiesCanvas.getContext("2d"),n.BitmapText=function(e,t){n.DisplayObjectContainer.call(this),this.textWidth=0,this.textHeight=0,this._pool=[],this.setText(e),this.setStyle(t),this.updateText(),this.dirty=!1},n.BitmapText.prototype=Object.create(n.DisplayObjectContainer.prototype),n.BitmapText.prototype.constructor=n.BitmapText,n.BitmapText.prototype.setText=function(e){this.text=e||" ",this.dirty=!0},n.BitmapText.prototype.setStyle=function(e){e=e||{},e.align=e.align||"left",this.style=e;var t=e.font.split(" ");this.fontName=t[t.length-1],this.fontSize=t.length>=2?parseInt(t[t.length-2],10):n.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=e.tint},n.BitmapText.prototype.updateText=function(){for(var e=n.BitmapText.fonts[this.fontName],t=new n.Point,r=null,i=[],o=0,a=[],s=0,u=this.fontSize/e.size,c=0;c<this.text.length;c++){var l=this.text.charCodeAt(c);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(c)))a.push(t.x),o=Math.max(o,t.x),s++,t.x=0,t.y+=e.lineHeight,r=null;else{var f=e.chars[l];f&&(r&&f.kerning[r]&&(t.x+=f.kerning[r]),i.push({texture:f.texture,line:s,charCode:l,position:new n.Point(t.x+f.xOffset,t.y+f.yOffset)}),t.x+=f.xAdvance,r=l)}}a.push(t.x),o=Math.max(o,t.x);var h=[];for(c=0;s>=c;c++){var p=0;"right"===this.style.align?p=o-a[c]:"center"===this.style.align&&(p=(o-a[c])/2),h.push(p)}var d=this.children.length,m=i.length,v=this.tint||16777215;for(c=0;m>c;c++){var g=d>c?this.children[c]:this._pool.pop();g?g.setTexture(i[c].texture):g=new n.Sprite(i[c].texture),g.position.x=(i[c].position.x+h[i[c].line])*u,g.position.y=i[c].position.y*u,g.scale.x=g.scale.y=u,g.tint=v,g.parent||this.addChild(g)}for(;this.children.length>m;){var y=this.getChildAt(this.children.length-1);this._pool.push(y),this.removeChild(y)}this.textWidth=o*u,this.textHeight=(t.y+e.lineHeight)*u},n.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),n.DisplayObjectContainer.prototype.updateTransform.call(this)},n.BitmapText.fonts={},n.InteractionData=function(){this.global=new n.Point,this.target=null,this.originalEvent=null},n.InteractionData.prototype.getLocalPosition=function(e,t,r){var i=e.worldTransform,o=r?r:this.global,a=i.a,s=i.c,u=i.tx,c=i.b,l=i.d,f=i.ty,h=1/(a*l+s*-c);return t=t||new n.Point,t.x=l*h*o.x+-s*h*o.y+(f*s-u*l)*h,t.y=a*h*o.y+-c*h*o.x+(-f*a+u*c)*h,t},n.InteractionData.prototype.constructor=n.InteractionData,n.InteractionManager=function(e){this.stage=e,this.mouse=new n.InteractionData,this.touches={},this.tempPoint=new n.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),
this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1,this.resolution=1,this._tempPoint=new n.Point},n.InteractionManager.prototype.constructor=n.InteractionManager,n.InteractionManager.prototype.collectInteractiveSprite=function(e,t){for(var n=e.children,r=n.length,i=r-1;i>=0;i--){var o=n[i];o._interactive?(t.interactiveChildren=!0,this.interactiveItems.push(o),o.children.length>0&&this.collectInteractiveSprite(o,o)):(o.__iParent=null,o.children.length>0&&this.collectInteractiveSprite(o,t))}},n.InteractionManager.prototype.setTarget=function(e){this.target=e,this.resolution=e.resolution,null===this.interactionDOMElement&&this.setTargetDomElement(e.view)},n.InteractionManager.prototype.setTargetDomElement=function(e){this.removeEvents(),window.navigator.msPointerEnabled&&(e.style["-ms-content-zooming"]="none",e.style["-ms-touch-action"]="none"),this.interactionDOMElement=e,e.addEventListener("mousemove",this.onMouseMove,!0),e.addEventListener("mousedown",this.onMouseDown,!0),e.addEventListener("mouseout",this.onMouseOut,!0),e.addEventListener("touchstart",this.onTouchStart,!0),e.addEventListener("touchend",this.onTouchEnd,!0),e.addEventListener("touchleave",this.onTouchCancel,!0),e.addEventListener("touchcancel",this.onTouchCancel,!0),e.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},n.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchleave",this.onTouchCancel,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onTouchCancel,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))},n.InteractionManager.prototype.update=function(){if(this.target){var e=Date.now(),t=e-this.last;if(t=t*n.INTERACTION_FREQUENCY/1e3,!(1>t)){this.last=e;var r=0;this.dirty&&this.rebuildInteractiveGraph();var i=this.interactiveItems.length,o="inherit",a=!1;for(r=0;i>r;r++){var s=this.interactiveItems[r];s.__hit=this.hitTest(s,this.mouse),this.mouse.target=s,s.__hit&&!a?(s.buttonMode&&(o=s.defaultCursor),s.interactiveChildren||(a=!0),s.__isOver||(s.mouseover&&s.mouseover(this.mouse),s.__isOver=!0)):s.__isOver&&(s.mouseout&&s.mouseout(this.mouse),s.__isOver=!1)}this.currentCursorStyle!==o&&(this.currentCursorStyle=o,this.interactionDOMElement.style.cursor=o)}}},n.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var e=this.interactiveItems.length,t=0;e>t;t++)this.interactiveItems[t].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},n.InteractionManager.prototype.onMouseMove=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e;var t=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(e.clientX-t.left)*(this.target.width/t.width)/this.resolution,this.mouse.global.y=(e.clientY-t.top)*(this.target.height/t.height)/this.resolution;for(var n=this.interactiveItems.length,r=0;n>r;r++){var i=this.interactiveItems[r];i.mousemove&&i.mousemove(this.mouse)}},n.InteractionManager.prototype.onMouseDown=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e,n.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();for(var t=this.interactiveItems.length,r=this.mouse.originalEvent,i=2===r.button||3===r.which,o=i?"rightdown":"mousedown",a=i?"rightclick":"click",s=i?"__rightIsDown":"__mouseIsDown",u=i?"__isRightDown":"__isDown",c=0;t>c;c++){var l=this.interactiveItems[c];if((l[o]||l[a])&&(l[s]=!0,l.__hit=this.hitTest(l,this.mouse),l.__hit&&(l[o]&&l[o](this.mouse),l[u]=!0,!l.interactiveChildren)))break}},n.InteractionManager.prototype.onMouseOut=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e;var t=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var n=0;t>n;n++){var r=this.interactiveItems[n];r.__isOver&&(this.mouse.target=r,r.mouseout&&r.mouseout(this.mouse),r.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},n.InteractionManager.prototype.onMouseUp=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e;for(var t=this.interactiveItems.length,n=!1,r=this.mouse.originalEvent,i=2===r.button||3===r.which,o=i?"rightup":"mouseup",a=i?"rightclick":"click",s=i?"rightupoutside":"mouseupoutside",u=i?"__isRightDown":"__isDown",c=0;t>c;c++){var l=this.interactiveItems[c];(l[a]||l[o]||l[s])&&(l.__hit=this.hitTest(l,this.mouse),l.__hit&&!n?(l[o]&&l[o](this.mouse),l[u]&&l[a]&&l[a](this.mouse),l.interactiveChildren||(n=!0)):l[u]&&l[s]&&l[s](this.mouse),l[u]=!1)}},n.InteractionManager.prototype.hitTest=function(e,t){var r=t.global;if(!e.worldVisible)return!1;e.worldTransform.applyInverse(r,this._tempPoint);var i,o=this._tempPoint.x,a=this._tempPoint.y;if(t.target=e,e.hitArea&&e.hitArea.contains)return e.hitArea.contains(o,a);if(e instanceof n.Sprite){var s,u=e.texture.frame.width,c=e.texture.frame.height,l=-u*e.anchor.x;if(o>l&&l+u>o&&(s=-c*e.anchor.y,a>s&&s+c>a))return!0}else if(e instanceof n.Graphics){var f=e.graphicsData;for(i=0;i<f.length;i++){var h=f[i];if(h.fill&&h.shape&&h.shape.contains(o,a))return!0}}var p=e.children.length;for(i=0;p>i;i++){var d=e.children[i],m=this.hitTest(d,t);if(m)return t.target=e,!0}return!1},n.InteractionManager.prototype.onTouchMove=function(e){this.dirty&&this.rebuildInteractiveGraph();for(var t,n,r=this.interactionDOMElement.getBoundingClientRect(),i=e.changedTouches,o=i.length,a=this.target.width/r.width,s=this.target.height/r.height,u=navigator.isCocoonJS&&!r.left&&!r.top&&!e.target.style.width&&!e.target.style.height,c=0;o>c;c++)n=i[c],u?(n.globalX=n.clientX,n.globalY=n.clientY):(n.globalX=(n.clientX-r.left)*a/this.resolution,n.globalY=(n.clientY-r.top)*s/this.resolution);for(var l=0;o>l;l++){n=i[l],t=this.touches[n.identifier],t.originalEvent=e,u?(t.global.x=n.clientX,t.global.y=n.clientY):(n.globalX=t.global.x=(n.clientX-r.left)*a/this.resolution,n.globalY=t.global.y=(n.clientY-r.top)*s/this.resolution);for(var f=0;f<this.interactiveItems.length;f++){var h=this.interactiveItems[f];h.touchmove&&h.__touchData&&h.__touchData[n.identifier]&&h.touchmove(t)}}},n.InteractionManager.prototype.onTouchStart=function(e){this.dirty&&this.rebuildInteractiveGraph();var t=this.interactionDOMElement.getBoundingClientRect();n.AUTO_PREVENT_DEFAULT&&e.preventDefault();for(var r,i=e.changedTouches,o=i.length,a=this.target.width/t.width,s=this.target.height/t.height,u=navigator.isCocoonJS&&!t.left&&!t.top&&!e.target.style.width&&!e.target.style.height,c=0;o>c;c++)r=i[c],u?(r.globalX=r.clientX,r.globalY=r.clientY):(r.globalX=(r.clientX-t.left)*a/this.resolution,r.globalY=(r.clientY-t.top)*s/this.resolution);for(var l=0;o>l;l++){r=i[l];var f=this.pool.pop();f||(f=new n.InteractionData),f.originalEvent=e,this.touches[r.identifier]=f,u?(f.global.x=r.clientX,f.global.y=r.clientY):(f.global.x=(r.clientX-t.left)*a/this.resolution,f.global.y=(r.clientY-t.top)*s/this.resolution);for(var h=this.interactiveItems.length,p=0;h>p;p++){var d=this.interactiveItems[p];if((d.touchstart||d.tap)&&(d.__hit=this.hitTest(d,f),d.__hit&&(d.touchstart&&d.touchstart(f),d.__isDown=!0,d.__touchData=d.__touchData||{},d.__touchData[r.identifier]=f,!d.interactiveChildren)))break}}},n.InteractionManager.prototype.onTouchEnd=function(e){this.dirty&&this.rebuildInteractiveGraph();for(var t,n=this.interactionDOMElement.getBoundingClientRect(),r=e.changedTouches,i=r.length,o=this.target.width/n.width,a=this.target.height/n.height,s=navigator.isCocoonJS&&!n.left&&!n.top&&!e.target.style.width&&!e.target.style.height,u=0;i>u;u++)t=r[u],s?(t.globalX=t.clientX,t.globalY=t.clientY):(t.globalX=(t.clientX-n.left)*o/this.resolution,t.globalY=(t.clientY-n.top)*a/this.resolution);for(var c=0;i>c;c++){t=r[c];var l=this.touches[t.identifier],f=!1;s?(l.global.x=t.clientX,l.global.y=t.clientY):(l.global.x=(t.clientX-n.left)*o/this.resolution,l.global.y=(t.clientY-n.top)*a/this.resolution);for(var h=this.interactiveItems.length,p=0;h>p;p++){var d=this.interactiveItems[p];d.__touchData&&d.__touchData[t.identifier]&&(d.__hit=this.hitTest(d,d.__touchData[t.identifier]),l.originalEvent=e,(d.touchend||d.tap)&&(d.__hit&&!f?(d.touchend&&d.touchend(l),d.__isDown&&d.tap&&d.tap(l),d.interactiveChildren||(f=!0)):d.__isDown&&d.touchendoutside&&d.touchendoutside(l),d.__isDown=!1),d.__touchData[t.identifier]=null)}this.pool.push(l),this.touches[t.identifier]=null}},n.InteractionManager.prototype.onTouchCancel=function(e){this.dirty&&this.rebuildInteractiveGraph();for(var t,n=this.interactionDOMElement.getBoundingClientRect(),r=e.changedTouches,i=r.length,o=this.target.width/n.width,a=this.target.height/n.height,s=navigator.isCocoonJS&&!n.left&&!n.top&&!e.target.style.width&&!e.target.style.height,u=0;i>u;u++)t=r[u],s?(t.globalX=t.clientX,t.globalY=t.clientY):(t.globalX=(t.clientX-n.left)*o/this.resolution,t.globalY=(t.clientY-n.top)*a/this.resolution);for(var c=0;i>c;c++){t=r[c];var l=this.touches[t.identifier],f=!1;s?(l.global.x=t.clientX,l.global.y=t.clientY):(l.global.x=(t.clientX-n.left)*o/this.resolution,l.global.y=(t.clientY-n.top)*a/this.resolution);for(var h=this.interactiveItems.length,p=0;h>p;p++){var d=this.interactiveItems[p];d.__touchData&&d.__touchData[t.identifier]&&(d.__hit=this.hitTest(d,d.__touchData[t.identifier]),l.originalEvent=e,d.touchcancel&&!f&&(d.touchcancel(l),d.interactiveChildren||(f=!0)),d.__isDown=!1,d.__touchData[t.identifier]=null)}this.pool.push(l),this.touches[t.identifier]=null}},n.Stage=function(e){n.DisplayObjectContainer.call(this),this.worldTransform=new n.Matrix,this.interactive=!0,this.interactionManager=new n.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new n.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(e)},n.Stage.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Stage.prototype.constructor=n.Stage,n.Stage.prototype.setInteractionDelegate=function(e){this.interactionManager.setTargetDomElement(e)},n.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var e=0,t=this.children.length;t>e;e++)this.children[e].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},n.Stage.prototype.setBackgroundColor=function(e){this.backgroundColor=e||0,this.backgroundColorSplit=n.hex2rgb(this.backgroundColor);var t=this.backgroundColor.toString(16);t="000000".substr(0,6-t.length)+t,this.backgroundColorString="#"+t},n.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global},function(e){for(var t=0,n=["ms","moz","webkit","o"],r=0;r<n.length&&!e.requestAnimationFrame;++r)e.requestAnimationFrame=e[n[r]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[n[r]+"CancelAnimationFrame"]||e[n[r]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(n){var r=(new Date).getTime(),i=Math.max(0,16-(r-t)),o=e.setTimeout(function(){n(r+i)},i);return t=r+i,o}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)}),e.requestAnimFrame=e.requestAnimationFrame}(this),n.hex2rgb=function(e){return[(e>>16&255)/255,(e>>8&255)/255,(255&e)/255]},n.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){return function(e){function t(){for(var r=arguments.length,o=new Array(r);r--;)o[r]=arguments[r];return o=i.concat(o),n.apply(this instanceof t?this:e,o)}var n=this,r=arguments.length-1,i=[];if(r>0)for(i.length=r;r--;)i[r]=arguments[r+1];if("function"!=typeof n)throw new TypeError;return t.prototype=function o(e){return e&&(o.prototype=e),this instanceof o?void 0:new o}(n.prototype),t}}()),n.AjaxRequest=function(){var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var t=0;t<e.length;t++)try{return new window.ActiveXObject(e[t])}catch(n){}},n.canUseNewCanvasBlendModes=function(){if("undefined"==typeof document)return!1;var e=document.createElement("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="#000",t.fillRect(0,0,1,1),t.globalCompositeOperation="multiply",t.fillStyle="#fff",t.fillRect(0,0,1,1),0===t.getImageData(0,0,1,1).data[0]},n.getNextPowerOfTwo=function(e){if(e>0&&0===(e&e-1))return e;for(var t=1;e>t;)t<<=1;return t},n.isPowerOfTwo=function(e,t){return e>0&&0===(e&e-1)&&t>0&&0===(t&t-1)},n.EventTarget={call:function(e){e&&(e=e.prototype||e,n.EventTarget.mixin(e))},mixin:function(e){e.listeners=function(e){return this._listeners=this._listeners||{},this._listeners[e]?this._listeners[e].slice():[]},e.emit=e.dispatchEvent=function(e,t){if(this._listeners=this._listeners||{},"object"==typeof e&&(t=e,e=e.type),t&&t.__isEventObject===!0||(t=new n.Event(this,e,t)),this._listeners&&this._listeners[e]){var r,i=this._listeners[e].slice(0),o=i.length,a=i[0];for(r=0;o>r;a=i[++r])if(a.call(this,t),t.stoppedImmediate)return this;if(t.stopped)return this}return this.parent&&this.parent.emit&&this.parent.emit.call(this.parent,e,t),this},e.on=e.addEventListener=function(e,t){return this._listeners=this._listeners||{},(this._listeners[e]=this._listeners[e]||[]).push(t),this},e.once=function(e,t){function n(){t.apply(r.off(e,n),arguments)}this._listeners=this._listeners||{};var r=this;return n._originalHandler=t,this.on(e,n)},e.off=e.removeEventListener=function(e,t){if(this._listeners=this._listeners||{},!this._listeners[e])return this;for(var n=this._listeners[e],r=t?n.length:0;r-->0;)(n[r]===t||n[r]._originalHandler===t)&&n.splice(r,1);return 0===n.length&&delete this._listeners[e],this},e.removeAllListeners=function(e){return this._listeners=this._listeners||{},this._listeners[e]?(delete this._listeners[e],this):this}}},n.Event=function(e,t,n){this.__isEventObject=!0,this.stopped=!1,this.stoppedImmediate=!1,this.target=e,this.type=t,this.data=n,this.content=n,this.timeStamp=Date.now()},n.Event.prototype.stopPropagation=function(){this.stopped=!0},n.Event.prototype.stopImmediatePropagation=function(){this.stoppedImmediate=!0},n.autoDetectRenderer=function(e,t,r){e||(e=800),t||(t=600);var i=function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(t){return!1}}();return i?new n.WebGLRenderer(e,t,r):new n.CanvasRenderer(e,t,r)},n.autoDetectRecommendedRenderer=function(e,t,r){e||(e=800),t||(t=600);var i=function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(t){return!1}}(),o=/Android/i.test(navigator.userAgent);return i&&!o?new n.WebGLRenderer(e,t,r):new n.CanvasRenderer(e,t,r)},n.PolyK={},n.PolyK.Triangulate=function(e){var t=!0,r=e.length>>1;if(3>r)return[];for(var i=[],o=[],a=0;r>a;a++)o.push(a);a=0;for(var s=r;s>3;){var u=o[(a+0)%s],c=o[(a+1)%s],l=o[(a+2)%s],f=e[2*u],h=e[2*u+1],p=e[2*c],d=e[2*c+1],m=e[2*l],v=e[2*l+1],g=!1;if(n.PolyK._convex(f,h,p,d,m,v,t)){g=!0;for(var y=0;s>y;y++){var b=o[y];if(b!==u&&b!==c&&b!==l&&n.PolyK._PointInTriangle(e[2*b],e[2*b+1],f,h,p,d,m,v)){g=!1;break}}}if(g)i.push(u,c,l),o.splice((a+1)%s,1),s--,a=0;else if(a++>3*s){if(!t)return null;for(i=[],o=[],a=0;r>a;a++)o.push(a);a=0,s=r,t=!1}}return i.push(o[0],o[1],o[2]),i},n.PolyK._PointInTriangle=function(e,t,n,r,i,o,a,s){var u=a-n,c=s-r,l=i-n,f=o-r,h=e-n,p=t-r,d=u*u+c*c,m=u*l+c*f,v=u*h+c*p,g=l*l+f*f,y=l*h+f*p,b=1/(d*g-m*m),x=(g*v-m*y)*b,w=(d*y-m*v)*b;return x>=0&&w>=0&&1>x+w},n.PolyK._convex=function(e,t,n,r,i,o,a){return(t-r)*(i-n)+(n-e)*(o-r)>=0===a},n.initDefaultShaders=function(){},n.CompileVertexShader=function(e,t){return n._CompileShader(e,t,e.VERTEX_SHADER)},n.CompileFragmentShader=function(e,t){return n._CompileShader(e,t,e.FRAGMENT_SHADER)},n._CompileShader=function(e,t,n){var r=t.join("\n"),i=e.createShader(n);return e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(window.console.log(e.getShaderInfoLog(i)),null)},n.compileProgram=function(e,t,r){var i=n.CompileFragmentShader(e,r),o=n.CompileVertexShader(e,t),a=e.createProgram();return e.attachShader(a,o),e.attachShader(a,i),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||window.console.log("Could not initialise shaders"),a},n.PixiShader=function(e){this._UID=n._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},n.PixiShader.prototype.constructor=n.PixiShader,n.PixiShader.prototype.init=function(){var e=this.gl,t=n.compileProgram(e,this.vertexSrc||n.PixiShader.defaultVertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(t,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var r in this.uniforms)this.uniforms[r].uniformLocation=e.getUniformLocation(t,r);this.initUniforms(),this.program=t},n.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var e,t=this.gl;for(var n in this.uniforms){e=this.uniforms[n];var r=e.type;"sampler2D"===r?(e._init=!1,null!==e.value&&this.initSampler2D(e)):"mat2"===r||"mat3"===r||"mat4"===r?(e.glMatrix=!0,e.glValueLength=1,"mat2"===r?e.glFunc=t.uniformMatrix2fv:"mat3"===r?e.glFunc=t.uniformMatrix3fv:"mat4"===r&&(e.glFunc=t.uniformMatrix4fv)):(e.glFunc=t["uniform"+r],"2f"===r||"2i"===r?e.glValueLength=2:"3f"===r||"3i"===r?e.glValueLength=3:"4f"===r||"4i"===r?e.glValueLength=4:e.glValueLength=1)}},n.PixiShader.prototype.initSampler2D=function(e){if(e.value&&e.value.baseTexture&&e.value.baseTexture.hasLoaded){var t=this.gl;if(t.activeTexture(t["TEXTURE"+this.textureCount]),t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTextures[t.id]),e.textureData){var n=e.textureData,r=n.magFilter?n.magFilter:t.LINEAR,i=n.minFilter?n.minFilter:t.LINEAR,o=n.wrapS?n.wrapS:t.CLAMP_TO_EDGE,a=n.wrapT?n.wrapT:t.CLAMP_TO_EDGE,s=n.luminance?t.LUMINANCE:t.RGBA;if(n.repeat&&(o=t.REPEAT,a=t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!!n.flipY),n.width){var u=n.width?n.width:512,c=n.height?n.height:2,l=n.border?n.border:0;t.texImage2D(t.TEXTURE_2D,0,s,u,c,l,s,t.UNSIGNED_BYTE,null)}else t.texImage2D(t.TEXTURE_2D,0,s,t.RGBA,t.UNSIGNED_BYTE,e.value.baseTexture.source);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,a)}t.uniform1i(e.uniformLocation,this.textureCount),e._init=!0,this.textureCount++}},n.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var e,t=this.gl;for(var r in this.uniforms)e=this.uniforms[r],1===e.glValueLength?e.glMatrix===!0?e.glFunc.call(t,e.uniformLocation,e.transpose,e.value):e.glFunc.call(t,e.uniformLocation,e.value):2===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y):3===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z):4===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z,e.value.w):"sampler2D"===e.type&&(e._init?(t.activeTexture(t["TEXTURE"+this.textureCount]),e.value.baseTexture._dirty[t.id]?n.instances[t.id].updateTexture(e.value.baseTexture):t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTextures[t.id]),t.uniform1i(e.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(e))},n.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"],n.PixiFastShader=function(e){this._UID=n._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},n.PixiFastShader.prototype.constructor=n.PixiFastShader,n.PixiFastShader.prototype.init=function(){var e=this.gl,t=n.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.uMatrix=e.getUniformLocation(t,"uMatrix"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aPositionCoord=e.getAttribLocation(t,"aPositionCoord"),this.aScale=e.getAttribLocation(t,"aScale"),this.aRotation=e.getAttribLocation(t,"aRotation"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(t,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=t},n.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.StripShader=function(e){this._UID=n._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},n.StripShader.prototype.constructor=n.StripShader,n.StripShader.prototype.init=function(){var e=this.gl,t=n.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},n.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},n.PrimitiveShader=function(e){this._UID=n._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},n.PrimitiveShader.prototype.constructor=n.PrimitiveShader,n.PrimitiveShader.prototype.init=function(){var e=this.gl,t=n.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.tintColor=e.getUniformLocation(t,"tint"),this.flipY=e.getUniformLocation(t,"flipY"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},n.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.ComplexPrimitiveShader=function(e){this._UID=n._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","uniform float flipY;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},n.ComplexPrimitiveShader.prototype.constructor=n.ComplexPrimitiveShader,n.ComplexPrimitiveShader.prototype.init=function(){var e=this.gl,t=n.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.tintColor=e.getUniformLocation(t,"tint"),this.color=e.getUniformLocation(t,"color"),this.flipY=e.getUniformLocation(t,"flipY"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},n.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},n.WebGLGraphics=function(){},n.WebGLGraphics.renderGraphics=function(e,t){var r,i=t.gl,o=t.projection,a=t.offset,s=t.shaderManager.primitiveShader;e.dirty&&n.WebGLGraphics.updateGraphics(e,i);for(var u=e._webGL[i.id],c=0;c<u.data.length;c++)1===u.data[c].mode?(r=u.data[c],t.stencilManager.pushStencil(e,r,t),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(r.indices.length-4)),t.stencilManager.popStencil(e,r,t)):(r=u.data[c],t.shaderManager.setShader(s),s=t.shaderManager.primitiveShader,i.uniformMatrix3fv(s.translationMatrix,!1,e.worldTransform.toArray(!0)),i.uniform1f(s.flipY,1),i.uniform2f(s.projectionVector,o.x,-o.y),i.uniform2f(s.offsetVector,-a.x,-a.y),i.uniform3fv(s.tintColor,n.hex2rgb(e.tint)),i.uniform1f(s.alpha,e.worldAlpha),i.bindBuffer(i.ARRAY_BUFFER,r.buffer),i.vertexAttribPointer(s.aVertexPosition,2,i.FLOAT,!1,24,0),i.vertexAttribPointer(s.colorAttribute,4,i.FLOAT,!1,24,8),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r.indexBuffer),i.drawElements(i.TRIANGLE_STRIP,r.indices.length,i.UNSIGNED_SHORT,0))},n.WebGLGraphics.updateGraphics=function(e,t){var r=e._webGL[t.id];r||(r=e._webGL[t.id]={lastIndex:0,data:[],gl:t}),e.dirty=!1;var i;if(e.clearDirty){for(e.clearDirty=!1,i=0;i<r.data.length;i++){var o=r.data[i];o.reset(),n.WebGLGraphics.graphicsDataPool.push(o)}r.data=[],r.lastIndex=0}var a;for(i=r.lastIndex;i<e.graphicsData.length;i++){var s=e.graphicsData[i];if(s.type===n.Graphics.POLY){if(s.points=s.shape.points.slice(),s.shape.closed&&(s.points[0]!==s.points[s.points.length-2]||s.points[1]!==s.points[s.points.length-1])&&s.points.push(s.points[0],s.points[1]),s.fill&&s.points.length>=6)if(s.points.length<12){a=n.WebGLGraphics.switchMode(r,0);var u=n.WebGLGraphics.buildPoly(s,a);u||(a=n.WebGLGraphics.switchMode(r,1),n.WebGLGraphics.buildComplexPoly(s,a))}else a=n.WebGLGraphics.switchMode(r,1),n.WebGLGraphics.buildComplexPoly(s,a);s.lineWidth>0&&(a=n.WebGLGraphics.switchMode(r,0),n.WebGLGraphics.buildLine(s,a))}else a=n.WebGLGraphics.switchMode(r,0),s.type===n.Graphics.RECT?n.WebGLGraphics.buildRectangle(s,a):s.type===n.Graphics.CIRC||s.type===n.Graphics.ELIP?n.WebGLGraphics.buildCircle(s,a):s.type===n.Graphics.RREC&&n.WebGLGraphics.buildRoundedRectangle(s,a);r.lastIndex++}for(i=0;i<r.data.length;i++)a=r.data[i],a.dirty&&a.upload()},n.WebGLGraphics.switchMode=function(e,t){var r;return e.data.length?(r=e.data[e.data.length-1],(r.mode!==t||1===t)&&(r=n.WebGLGraphics.graphicsDataPool.pop()||new n.WebGLGraphicsData(e.gl),r.mode=t,e.data.push(r))):(r=n.WebGLGraphics.graphicsDataPool.pop()||new n.WebGLGraphicsData(e.gl),r.mode=t,e.data.push(r)),r.dirty=!0,r},n.WebGLGraphics.buildRectangle=function(e,t){var r=e.shape,i=r.x,o=r.y,a=r.width,s=r.height;if(e.fill){var u=n.hex2rgb(e.fillColor),c=e.fillAlpha,l=u[0]*c,f=u[1]*c,h=u[2]*c,p=t.points,d=t.indices,m=p.length/6;p.push(i,o),p.push(l,f,h,c),p.push(i+a,o),p.push(l,f,h,c),p.push(i,o+s),p.push(l,f,h,c),p.push(i+a,o+s),p.push(l,f,h,c),d.push(m,m,m+1,m+2,m+3,m+3)}if(e.lineWidth){var v=e.points;e.points=[i,o,i+a,o,i+a,o+s,i,o+s,i,o],n.WebGLGraphics.buildLine(e,t),e.points=v}},n.WebGLGraphics.buildRoundedRectangle=function(e,t){var r=e.shape,i=r.x,o=r.y,a=r.width,s=r.height,u=r.radius,c=[];if(c.push(i,o+u),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i,o+s-u,i,o+s,i+u,o+s)),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i+a-u,o+s,i+a,o+s,i+a,o+s-u)),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i+a,o+u,i+a,o,i+a-u,o)),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i+u,o,i,o,i,o+u)),
e.fill){var l=n.hex2rgb(e.fillColor),f=e.fillAlpha,h=l[0]*f,p=l[1]*f,d=l[2]*f,m=t.points,v=t.indices,g=m.length/6,y=n.PolyK.Triangulate(c),b=0;for(b=0;b<y.length;b+=3)v.push(y[b]+g),v.push(y[b]+g),v.push(y[b+1]+g),v.push(y[b+2]+g),v.push(y[b+2]+g);for(b=0;b<c.length;b++)m.push(c[b],c[++b],h,p,d,f)}if(e.lineWidth){var x=e.points;e.points=c,n.WebGLGraphics.buildLine(e,t),e.points=x}},n.WebGLGraphics.quadraticBezierCurve=function(e,t,n,r,i,o){function a(e,t,n){var r=t-e;return e+r*n}for(var s,u,c,l,f,h,p=20,d=[],m=0,v=0;p>=v;v++)m=v/p,s=a(e,n,m),u=a(t,r,m),c=a(n,i,m),l=a(r,o,m),f=a(s,c,m),h=a(u,l,m),d.push(f,h);return d},n.WebGLGraphics.buildCircle=function(e,t){var r,i,o=e.shape,a=o.x,s=o.y;e.type===n.Graphics.CIRC?(r=o.radius,i=o.radius):(r=o.width,i=o.height);var u=40,c=2*Math.PI/u,l=0;if(e.fill){var f=n.hex2rgb(e.fillColor),h=e.fillAlpha,p=f[0]*h,d=f[1]*h,m=f[2]*h,v=t.points,g=t.indices,y=v.length/6;for(g.push(y),l=0;u+1>l;l++)v.push(a,s,p,d,m,h),v.push(a+Math.sin(c*l)*r,s+Math.cos(c*l)*i,p,d,m,h),g.push(y++,y++);g.push(y-1)}if(e.lineWidth){var b=e.points;for(e.points=[],l=0;u+1>l;l++)e.points.push(a+Math.sin(c*l)*r,s+Math.cos(c*l)*i);n.WebGLGraphics.buildLine(e,t),e.points=b}},n.WebGLGraphics.buildLine=function(e,t){var r=0,i=e.points;if(0!==i.length){if(e.lineWidth%2)for(r=0;r<i.length;r++)i[r]+=.5;var o=new n.Point(i[0],i[1]),a=new n.Point(i[i.length-2],i[i.length-1]);if(o.x===a.x&&o.y===a.y){i=i.slice(),i.pop(),i.pop(),a=new n.Point(i[i.length-2],i[i.length-1]);var s=a.x+.5*(o.x-a.x),u=a.y+.5*(o.y-a.y);i.unshift(s,u),i.push(s,u)}var c,l,f,h,p,d,m,v,g,y,b,x,w,_,E,T,C,S,A,k,O,M,N,j=t.points,R=t.indices,P=i.length/2,D=i.length,I=j.length/6,L=e.lineWidth/2,F=n.hex2rgb(e.lineColor),B=e.lineAlpha,U=F[0]*B,q=F[1]*B,V=F[2]*B;for(f=i[0],h=i[1],p=i[2],d=i[3],g=-(h-d),y=f-p,N=Math.sqrt(g*g+y*y),g/=N,y/=N,g*=L,y*=L,j.push(f-g,h-y,U,q,V,B),j.push(f+g,h+y,U,q,V,B),r=1;P-1>r;r++)f=i[2*(r-1)],h=i[2*(r-1)+1],p=i[2*r],d=i[2*r+1],m=i[2*(r+1)],v=i[2*(r+1)+1],g=-(h-d),y=f-p,N=Math.sqrt(g*g+y*y),g/=N,y/=N,g*=L,y*=L,b=-(d-v),x=p-m,N=Math.sqrt(b*b+x*x),b/=N,x/=N,b*=L,x*=L,E=-y+h-(-y+d),T=-g+p-(-g+f),C=(-g+f)*(-y+d)-(-g+p)*(-y+h),S=-x+v-(-x+d),A=-b+p-(-b+m),k=(-b+m)*(-x+d)-(-b+p)*(-x+v),O=E*A-S*T,Math.abs(O)<.1?(O+=10.1,j.push(p-g,d-y,U,q,V,B),j.push(p+g,d+y,U,q,V,B)):(c=(T*k-A*C)/O,l=(S*C-E*k)/O,M=(c-p)*(c-p)+(l-d)+(l-d),M>19600?(w=g-b,_=y-x,N=Math.sqrt(w*w+_*_),w/=N,_/=N,w*=L,_*=L,j.push(p-w,d-_),j.push(U,q,V,B),j.push(p+w,d+_),j.push(U,q,V,B),j.push(p-w,d-_),j.push(U,q,V,B),D++):(j.push(c,l),j.push(U,q,V,B),j.push(p-(c-p),d-(l-d)),j.push(U,q,V,B)));for(f=i[2*(P-2)],h=i[2*(P-2)+1],p=i[2*(P-1)],d=i[2*(P-1)+1],g=-(h-d),y=f-p,N=Math.sqrt(g*g+y*y),g/=N,y/=N,g*=L,y*=L,j.push(p-g,d-y),j.push(U,q,V,B),j.push(p+g,d+y),j.push(U,q,V,B),R.push(I),r=0;D>r;r++)R.push(I++);R.push(I-1)}},n.WebGLGraphics.buildComplexPoly=function(e,t){var r=e.points.slice();if(!(r.length<6)){var i=t.indices;t.points=r,t.alpha=e.fillAlpha,t.color=n.hex2rgb(e.fillColor);for(var o,a,s=1/0,u=-(1/0),c=1/0,l=-(1/0),f=0;f<r.length;f+=2)o=r[f],a=r[f+1],s=s>o?o:s,u=o>u?o:u,c=c>a?a:c,l=a>l?a:l;r.push(s,c,u,c,u,l,s,l);var h=r.length/2;for(f=0;h>f;f++)i.push(f)}},n.WebGLGraphics.buildPoly=function(e,t){var r=e.points;if(!(r.length<6)){var i=t.points,o=t.indices,a=r.length/2,s=n.hex2rgb(e.fillColor),u=e.fillAlpha,c=s[0]*u,l=s[1]*u,f=s[2]*u,h=n.PolyK.Triangulate(r);if(!h)return!1;var p=i.length/6,d=0;for(d=0;d<h.length;d+=3)o.push(h[d]+p),o.push(h[d]+p),o.push(h[d+1]+p),o.push(h[d+2]+p),o.push(h[d+2]+p);for(d=0;a>d;d++)i.push(r[2*d],r[2*d+1],c,l,f,u);return!0}},n.WebGLGraphics.graphicsDataPool=[],n.WebGLGraphicsData=function(e){this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},n.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[]},n.WebGLGraphicsData.prototype.upload=function(){var e=this.gl;this.glPoints=new n.Float32Array(this.points),e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.glPoints,e.STATIC_DRAW),this.glIndicies=new n.Uint16Array(this.indices),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.glIndicies,e.STATIC_DRAW),this.dirty=!1},n.glContexts=[],n.instances=[],n.WebGLRenderer=function(e,t,r){if(r)for(var i in n.defaultRenderOptions)"undefined"==typeof r[i]&&(r[i]=n.defaultRenderOptions[i]);else r=n.defaultRenderOptions;n.defaultRenderer||(n.sayHello("webGL"),n.defaultRenderer=this),this.type=n.WEBGL_RENDERER,this.resolution=r.resolution,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.preserveDrawingBuffer=r.preserveDrawingBuffer,this.clearBeforeRender=r.clearBeforeRender,this.width=e||800,this.height=t||600,this.view=r.view||document.createElement("canvas"),this.contextLostBound=this.handleContextLost.bind(this),this.contextRestoredBound=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLostBound,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredBound,!1),this._contextOptions={alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer},this.projection=new n.Point,this.offset=new n.Point(0,0),this.shaderManager=new n.WebGLShaderManager,this.spriteBatch=new n.WebGLSpriteBatch,this.maskManager=new n.WebGLMaskManager,this.filterManager=new n.WebGLFilterManager,this.stencilManager=new n.WebGLStencilManager,this.blendModeManager=new n.WebGLBlendModeManager,this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,this.renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},n.WebGLRenderer.prototype.constructor=n.WebGLRenderer,n.WebGLRenderer.prototype.initContext=function(){var e=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=e,!e)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=e.id=n.WebGLRenderer.glContextId++,n.glContexts[this.glContextId]=e,n.instances[this.glContextId]=this,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),this.shaderManager.setContext(e),this.spriteBatch.setContext(e),this.maskManager.setContext(e),this.filterManager.setContext(e),this.blendModeManager.setContext(e),this.stencilManager.setContext(e),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},n.WebGLRenderer.prototype.render=function(e){if(!this.contextLost){this.__stage!==e&&(e.interactive&&e.interactionManager.removeEvents(),this.__stage=e),e.updateTransform();var t=this.gl;e._interactive?e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this)):e._interactiveEventsAdded&&(e._interactiveEventsAdded=!1,e.interactionManager.setTarget(this)),t.viewport(0,0,this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,null),this.clearBeforeRender&&(this.transparent?t.clearColor(0,0,0,0):t.clearColor(e.backgroundColorSplit[0],e.backgroundColorSplit[1],e.backgroundColorSplit[2],1),t.clear(t.COLOR_BUFFER_BIT)),this.renderDisplayObject(e,this.projection)}},n.WebGLRenderer.prototype.renderDisplayObject=function(e,t,r){this.renderSession.blendModeManager.setBlendMode(n.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.flipY=r?-1:1,this.renderSession.projection=t,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,r),e._renderWebGL(this.renderSession),this.spriteBatch.end()},n.WebGLRenderer.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},n.WebGLRenderer.prototype.updateTexture=function(e){if(e.hasLoaded){var t=this.gl;return e._glTextures[t.id]||(e._glTextures[t.id]=t.createTexture()),t.bindTexture(t.TEXTURE_2D,e._glTextures[t.id]),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultipliedAlpha),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e.scaleMode===n.scaleModes.LINEAR?t.LINEAR:t.NEAREST),e.mipmap&&n.isPowerOfTwo(e.width,e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===n.scaleModes.LINEAR?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===n.scaleModes.LINEAR?t.LINEAR:t.NEAREST),e._powerOf2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),e._dirty[t.id]=!1,e._glTextures[t.id]}},n.WebGLRenderer.prototype.handleContextLost=function(e){e.preventDefault(),this.contextLost=!0},n.WebGLRenderer.prototype.handleContextRestored=function(){this.initContext();for(var e in n.TextureCache){var t=n.TextureCache[e].baseTexture;t._glTextures=[]}this.contextLost=!1},n.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLostBound),this.view.removeEventListener("webglcontextrestored",this.contextRestoredBound),n.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},n.WebGLRenderer.prototype.mapBlendModes=function(){var e=this.gl;n.blendModesWebGL||(n.blendModesWebGL=[],n.blendModesWebGL[n.blendModes.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.ADD]=[e.SRC_ALPHA,e.DST_ALPHA],n.blendModesWebGL[n.blendModes.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SCREEN]=[e.SRC_ALPHA,e.ONE],n.blendModesWebGL[n.blendModes.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA])},n.WebGLRenderer.glContextId=0,n.WebGLBlendModeManager=function(){this.currentBlendMode=99999},n.WebGLBlendModeManager.prototype.constructor=n.WebGLBlendModeManager,n.WebGLBlendModeManager.prototype.setContext=function(e){this.gl=e},n.WebGLBlendModeManager.prototype.setBlendMode=function(e){if(this.currentBlendMode===e)return!1;this.currentBlendMode=e;var t=n.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(t[0],t[1]),!0},n.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},n.WebGLMaskManager=function(){},n.WebGLMaskManager.prototype.constructor=n.WebGLMaskManager,n.WebGLMaskManager.prototype.setContext=function(e){this.gl=e},n.WebGLMaskManager.prototype.pushMask=function(e,t){var r=t.gl;e.dirty&&n.WebGLGraphics.updateGraphics(e,r),e._webGL[r.id].data.length&&t.stencilManager.pushStencil(e,e._webGL[r.id].data[0],t)},n.WebGLMaskManager.prototype.popMask=function(e,t){var n=this.gl;t.stencilManager.popStencil(e,e._webGL[n.id].data[0],t)},n.WebGLMaskManager.prototype.destroy=function(){this.gl=null},n.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},n.WebGLStencilManager.prototype.setContext=function(e){this.gl=e},n.WebGLStencilManager.prototype.pushStencil=function(e,t,n){var r=this.gl;this.bindGraphics(e,t,n),0===this.stencilStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(t);var i=this.count;r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),1===t.mode?(r.drawElements(r.TRIANGLE_FAN,t.indices.length-4,r.UNSIGNED_SHORT,0),this.reverse?(r.stencilFunc(r.EQUAL,255-i,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,i,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(t.indices.length-4)),this.reverse?r.stencilFunc(r.EQUAL,255-(i+1),255):r.stencilFunc(r.EQUAL,i+1,255),this.reverse=!this.reverse):(this.reverse?(r.stencilFunc(r.EQUAL,i,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,255-i,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_STRIP,t.indices.length,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,i+1,255):r.stencilFunc(r.EQUAL,255-(i+1),255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),this.count++},n.WebGLStencilManager.prototype.bindGraphics=function(e,t,r){this._currentGraphics=e;var i,o=this.gl,a=r.projection,s=r.offset;1===t.mode?(i=r.shaderManager.complexPrimitiveShader,r.shaderManager.setShader(i),o.uniform1f(i.flipY,r.flipY),o.uniformMatrix3fv(i.translationMatrix,!1,e.worldTransform.toArray(!0)),o.uniform2f(i.projectionVector,a.x,-a.y),o.uniform2f(i.offsetVector,-s.x,-s.y),o.uniform3fv(i.tintColor,n.hex2rgb(e.tint)),o.uniform3fv(i.color,t.color),o.uniform1f(i.alpha,e.worldAlpha*t.alpha),o.bindBuffer(o.ARRAY_BUFFER,t.buffer),o.vertexAttribPointer(i.aVertexPosition,2,o.FLOAT,!1,8,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t.indexBuffer)):(i=r.shaderManager.primitiveShader,r.shaderManager.setShader(i),o.uniformMatrix3fv(i.translationMatrix,!1,e.worldTransform.toArray(!0)),o.uniform1f(i.flipY,r.flipY),o.uniform2f(i.projectionVector,a.x,-a.y),o.uniform2f(i.offsetVector,-s.x,-s.y),o.uniform3fv(i.tintColor,n.hex2rgb(e.tint)),o.uniform1f(i.alpha,e.worldAlpha),o.bindBuffer(o.ARRAY_BUFFER,t.buffer),o.vertexAttribPointer(i.aVertexPosition,2,o.FLOAT,!1,24,0),o.vertexAttribPointer(i.colorAttribute,4,o.FLOAT,!1,24,8),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t.indexBuffer))},n.WebGLStencilManager.prototype.popStencil=function(e,t,n){var r=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)r.disable(r.STENCIL_TEST);else{var i=this.count;this.bindGraphics(e,t,n),r.colorMask(!1,!1,!1,!1),1===t.mode?(this.reverse=!this.reverse,this.reverse?(r.stencilFunc(r.EQUAL,255-(i+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,i+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(t.indices.length-4)),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),r.drawElements(r.TRIANGLE_FAN,t.indices.length-4,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,i,255):r.stencilFunc(r.EQUAL,255-i,255)):(this.reverse?(r.stencilFunc(r.EQUAL,i+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,255-(i+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_STRIP,t.indices.length,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,i,255):r.stencilFunc(r.EQUAL,255-i,255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}},n.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},n.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[]},n.WebGLShaderManager.prototype.constructor=n.WebGLShaderManager,n.WebGLShaderManager.prototype.setContext=function(e){this.gl=e,this.primitiveShader=new n.PrimitiveShader(e),this.complexPrimitiveShader=new n.ComplexPrimitiveShader(e),this.defaultShader=new n.PixiShader(e),this.fastShader=new n.PixiFastShader(e),this.stripShader=new n.StripShader(e),this.setShader(this.defaultShader)},n.WebGLShaderManager.prototype.setAttribs=function(e){var t;for(t=0;t<this.tempAttribState.length;t++)this.tempAttribState[t]=!1;for(t=0;t<e.length;t++){var n=e[t];this.tempAttribState[n]=!0}var r=this.gl;for(t=0;t<this.attribState.length;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.tempAttribState[t]?r.enableVertexAttribArray(t):r.disableVertexAttribArray(t))},n.WebGLShaderManager.prototype.setShader=function(e){return this._currentId===e._UID?!1:(this._currentId=e._UID,this.currentShader=e,this.gl.useProgram(e.program),this.setAttribs(e.attributes),!0)},n.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},n.WebGLSpriteBatch=function(){this.vertSize=5,this.size=2e3;var e=4*this.size*4*this.vertSize,t=6*this.size;this.vertices=new n.ArrayBuffer(e),this.positions=new n.Float32Array(this.vertices),this.colors=new n.Uint32Array(this.vertices),this.indices=new n.Uint16Array(t),this.lastIndexCount=0;for(var r=0,i=0;t>r;r+=6,i+=4)this.indices[r+0]=i+0,this.indices[r+1]=i+1,this.indices[r+2]=i+2,this.indices[r+3]=i+0,this.indices[r+4]=i+2,this.indices[r+5]=i+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new n.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},n.WebGLSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),this.currentBlendMode=99999;var t=new n.PixiShader(e);t.fragmentSrc=this.defaultShader.fragmentSrc,t.uniforms={},t.init(),this.defaultShader.shaders[e.id]=t},n.WebGLSpriteBatch.prototype.begin=function(e){this.renderSession=e,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},n.WebGLSpriteBatch.prototype.end=function(){this.flush()},n.WebGLSpriteBatch.prototype.render=function(e){var t=e.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=t.baseTexture);var n=t._uvs;if(n){var r,i,o,a,s=e.anchor.x,u=e.anchor.y;if(t.trim){var c=t.trim;i=c.x-s*c.width,r=i+t.crop.width,a=c.y-u*c.height,o=a+t.crop.height}else r=t.frame.width*(1-s),i=t.frame.width*-s,o=t.frame.height*(1-u),a=t.frame.height*-u;var l=4*this.currentBatchSize*this.vertSize,f=t.baseTexture.resolution,h=e.worldTransform,p=h.a/f,d=h.b/f,m=h.c/f,v=h.d/f,g=h.tx,y=h.ty,b=this.colors,x=this.positions;this.renderSession.roundPixels?(x[l]=p*i+m*a+g|0,x[l+1]=v*a+d*i+y|0,x[l+5]=p*r+m*a+g|0,x[l+6]=v*a+d*r+y|0,x[l+10]=p*r+m*o+g|0,x[l+11]=v*o+d*r+y|0,x[l+15]=p*i+m*o+g|0,x[l+16]=v*o+d*i+y|0):(x[l]=p*i+m*a+g,x[l+1]=v*a+d*i+y,x[l+5]=p*r+m*a+g,x[l+6]=v*a+d*r+y,x[l+10]=p*r+m*o+g,x[l+11]=v*o+d*r+y,x[l+15]=p*i+m*o+g,x[l+16]=v*o+d*i+y),x[l+2]=n.x0,x[l+3]=n.y0,x[l+7]=n.x1,x[l+8]=n.y1,x[l+12]=n.x2,x[l+13]=n.y2,x[l+17]=n.x3,x[l+18]=n.y3;var w=e.tint;b[l+4]=b[l+9]=b[l+14]=b[l+19]=(w>>16)+(65280&w)+((255&w)<<16)+(255*e.worldAlpha<<24),this.sprites[this.currentBatchSize++]=e}},n.WebGLSpriteBatch.prototype.renderTilingSprite=function(e){var t=e.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=t.baseTexture),e._uvs||(e._uvs=new n.TextureUvs);var r=e._uvs;e.tilePosition.x%=t.baseTexture.width*e.tileScaleOffset.x,e.tilePosition.y%=t.baseTexture.height*e.tileScaleOffset.y;var i=e.tilePosition.x/(t.baseTexture.width*e.tileScaleOffset.x),o=e.tilePosition.y/(t.baseTexture.height*e.tileScaleOffset.y),a=e.width/t.baseTexture.width/(e.tileScale.x*e.tileScaleOffset.x),s=e.height/t.baseTexture.height/(e.tileScale.y*e.tileScaleOffset.y);r.x0=0-i,r.y0=0-o,r.x1=1*a-i,r.y1=0-o,r.x2=1*a-i,r.y2=1*s-o,r.x3=0-i,r.y3=1*s-o;var u=e.tint,c=(u>>16)+(65280&u)+((255&u)<<16)+(255*e.alpha<<24),l=this.positions,f=this.colors,h=e.width,p=e.height,d=e.anchor.x,m=e.anchor.y,v=h*(1-d),g=h*-d,y=p*(1-m),b=p*-m,x=4*this.currentBatchSize*this.vertSize,w=t.baseTexture.resolution,_=e.worldTransform,E=_.a/w,T=_.b/w,C=_.c/w,S=_.d/w,A=_.tx,k=_.ty;l[x++]=E*g+C*b+A,l[x++]=S*b+T*g+k,l[x++]=r.x0,l[x++]=r.y0,f[x++]=c,l[x++]=E*v+C*b+A,l[x++]=S*b+T*v+k,l[x++]=r.x1,l[x++]=r.y1,f[x++]=c,l[x++]=E*v+C*y+A,l[x++]=S*y+T*v+k,l[x++]=r.x2,l[x++]=r.y2,f[x++]=c,l[x++]=E*g+C*y+A,l[x++]=S*y+T*g+k,l[x++]=r.x3,l[x++]=r.y3,f[x++]=c,this.sprites[this.currentBatchSize++]=e},n.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e,t=this.gl;if(this.dirty){this.dirty=!1,t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e=this.defaultShader.shaders[t.id];var r=4*this.vertSize;t.vertexAttribPointer(e.aVertexPosition,2,t.FLOAT,!1,r,0),t.vertexAttribPointer(e.aTextureCoord,2,t.FLOAT,!1,r,8),t.vertexAttribPointer(e.colorAttribute,4,t.UNSIGNED_BYTE,!0,r,16)}if(this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var i=this.positions.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,i)}for(var o,a,s,u,c=0,l=0,f=null,h=this.renderSession.blendModeManager.currentBlendMode,p=null,d=!1,m=!1,v=0,g=this.currentBatchSize;g>v;v++){if(u=this.sprites[v],o=u.texture.baseTexture,a=u.blendMode,s=u.shader||this.defaultShader,d=h!==a,m=p!==s,(f!==o||d||m)&&(this.renderBatch(f,c,l),l=v,c=0,f=o,d&&(h=a,this.renderSession.blendModeManager.setBlendMode(h)),m)){p=s,e=p.shaders[t.id],e||(e=new n.PixiShader(t),e.fragmentSrc=p.fragmentSrc,e.uniforms=p.uniforms,e.init(),p.shaders[t.id]=e),this.renderSession.shaderManager.setShader(e),e.dirty&&e.syncUniforms();var y=this.renderSession.projection;t.uniform2f(e.projectionVector,y.x,y.y);var b=this.renderSession.offset;t.uniform2f(e.offsetVector,b.x,b.y)}c++}this.renderBatch(f,c,l),this.currentBatchSize=0}},n.WebGLSpriteBatch.prototype.renderBatch=function(e,t,n){if(0!==t){var r=this.gl;e._dirty[r.id]?this.renderSession.renderer.updateTexture(e):r.bindTexture(r.TEXTURE_2D,e._glTextures[r.id]),r.drawElements(r.TRIANGLES,6*t,r.UNSIGNED_SHORT,6*n*2),this.renderSession.drawCount++}},n.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},n.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},n.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},n.WebGLFastSpriteBatch=function(e){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var t=4*this.size*this.vertSize,r=6*this.maxSize;this.vertices=new n.Float32Array(t),this.indices=new n.Uint16Array(r),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var i=0,o=0;r>i;i+=6,o+=4)this.indices[i+0]=o+0,this.indices[i+1]=o+1,this.indices[i+2]=o+2,this.indices[i+3]=o+0,this.indices[i+4]=o+2,this.indices[i+5]=o+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(e)},n.WebGLFastSpriteBatch.prototype.constructor=n.WebGLFastSpriteBatch,n.WebGLFastSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW)},n.WebGLFastSpriteBatch.prototype.begin=function(e,t){this.renderSession=t,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=e.worldTransform.toArray(!0),this.start()},n.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},n.WebGLFastSpriteBatch.prototype.render=function(e){var t=e.children,n=t[0];if(n.texture._uvs){this.currentBaseTexture=n.texture.baseTexture,n.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(n.blendMode));for(var r=0,i=t.length;i>r;r++)this.renderSprite(t[r]);this.flush()}},n.WebGLFastSpriteBatch.prototype.renderSprite=function(e){if(e.visible&&(e.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=e.texture.baseTexture,e.texture._uvs))){var t,n,r,i,o,a,s,u,c=this.vertices;if(t=e.texture._uvs,n=e.texture.frame.width,r=e.texture.frame.height,e.texture.trim){var l=e.texture.trim;o=l.x-e.anchor.x*l.width,i=o+e.texture.crop.width,s=l.y-e.anchor.y*l.height,a=s+e.texture.crop.height}else i=e.texture.frame.width*(1-e.anchor.x),o=e.texture.frame.width*-e.anchor.x,a=e.texture.frame.height*(1-e.anchor.y),s=e.texture.frame.height*-e.anchor.y;u=4*this.currentBatchSize*this.vertSize,c[u++]=o,c[u++]=s,c[u++]=e.position.x,c[u++]=e.position.y,c[u++]=e.scale.x,c[u++]=e.scale.y,c[u++]=e.rotation,c[u++]=t.x0,c[u++]=t.y1,c[u++]=e.alpha,c[u++]=i,c[u++]=s,c[u++]=e.position.x,c[u++]=e.position.y,c[u++]=e.scale.x,c[u++]=e.scale.y,c[u++]=e.rotation,c[u++]=t.x1,c[u++]=t.y1,c[u++]=e.alpha,c[u++]=i,c[u++]=a,c[u++]=e.position.x,c[u++]=e.position.y,c[u++]=e.scale.x,c[u++]=e.scale.y,c[u++]=e.rotation,c[u++]=t.x2,c[u++]=t.y2,c[u++]=e.alpha,c[u++]=o,c[u++]=a,c[u++]=e.position.x,c[u++]=e.position.y,c[u++]=e.scale.x,c[u++]=e.scale.y,c[u++]=e.rotation,c[u++]=t.x3,c[u++]=t.y3,c[u++]=e.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},n.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e=this.gl;if(this.currentBaseTexture._glTextures[e.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,e),e.bindTexture(e.TEXTURE_2D,this.currentBaseTexture._glTextures[e.id]),this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var t=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,t)}e.drawElements(e.TRIANGLES,6*this.currentBatchSize,e.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},n.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},n.WebGLFastSpriteBatch.prototype.start=function(){var e=this.gl;e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.renderSession.projection;e.uniform2f(this.shader.projectionVector,t.x,t.y),e.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var n=4*this.vertSize;e.vertexAttribPointer(this.shader.aVertexPosition,2,e.FLOAT,!1,n,0),e.vertexAttribPointer(this.shader.aPositionCoord,2,e.FLOAT,!1,n,8),e.vertexAttribPointer(this.shader.aScale,2,e.FLOAT,!1,n,16),e.vertexAttribPointer(this.shader.aRotation,1,e.FLOAT,!1,n,24),e.vertexAttribPointer(this.shader.aTextureCoord,2,e.FLOAT,!1,n,28),e.vertexAttribPointer(this.shader.colorAttribute,1,e.FLOAT,!1,n,36)},n.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},n.WebGLFilterManager.prototype.constructor=n.WebGLFilterManager,n.WebGLFilterManager.prototype.setContext=function(e){this.gl=e,this.texturePool=[],this.initShaderBuffers()},n.WebGLFilterManager.prototype.begin=function(e,t){this.renderSession=e,this.defaultShader=e.shaderManager.defaultShader;var n=this.renderSession.projection;this.width=2*n.x,this.height=2*-n.y,this.buffer=t},n.WebGLFilterManager.prototype.pushFilter=function(e){var t=this.gl,r=this.renderSession.projection,i=this.renderSession.offset;e._filterArea=e.target.filterArea||e.target.getBounds(),this.filterStack.push(e);var o=e.filterPasses[0];this.offsetX+=e._filterArea.x,this.offsetY+=e._filterArea.y;var a=this.texturePool.pop();a?a.resize(this.width,this.height):a=new n.FilterTexture(this.gl,this.width,this.height),t.bindTexture(t.TEXTURE_2D,a.texture);var s=e._filterArea,u=o.padding;s.x-=u,s.y-=u,s.width+=2*u,s.height+=2*u,s.x<0&&(s.x=0),s.width>this.width&&(s.width=this.width),s.y<0&&(s.y=0),s.height>this.height&&(s.height=this.height),t.bindFramebuffer(t.FRAMEBUFFER,a.frameBuffer),t.viewport(0,0,s.width,s.height),r.x=s.width/2,r.y=-s.height/2,i.x=-s.x,i.y=-s.y,t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e._glFilterTexture=a},n.WebGLFilterManager.prototype.popFilter=function(){var e=this.gl,t=this.filterStack.pop(),r=t._filterArea,i=t._glFilterTexture,o=this.renderSession.projection,a=this.renderSession.offset;if(t.filterPasses.length>1){e.viewport(0,0,r.width,r.height),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=r.height,this.vertexArray[2]=r.width,this.vertexArray[3]=r.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=r.width,this.vertexArray[7]=0,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray);var s=i,u=this.texturePool.pop();u||(u=new n.FilterTexture(this.gl,this.width,this.height)),u.resize(this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,u.frameBuffer),e.clear(e.COLOR_BUFFER_BIT),e.disable(e.BLEND);for(var c=0;c<t.filterPasses.length-1;c++){var l=t.filterPasses[c];e.bindFramebuffer(e.FRAMEBUFFER,u.frameBuffer),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,s.texture),this.applyFilterPass(l,r,r.width,r.height);var f=s;s=u,u=f}e.enable(e.BLEND),i=s,this.texturePool.push(u)}var h=t.filterPasses[t.filterPasses.length-1];this.offsetX-=r.x,this.offsetY-=r.y;var p=this.width,d=this.height,m=0,v=0,g=this.buffer;if(0===this.filterStack.length)e.colorMask(!0,!0,!0,!0);else{var y=this.filterStack[this.filterStack.length-1];r=y._filterArea,p=r.width,d=r.height,m=r.x,v=r.y,g=y._glFilterTexture.frameBuffer}o.x=p/2,o.y=-d/2,a.x=m,a.y=v,r=t._filterArea;var b=r.x-m,x=r.y-v;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=b,this.vertexArray[1]=x+r.height,this.vertexArray[2]=b+r.width,this.vertexArray[3]=x+r.height,this.vertexArray[4]=b,this.vertexArray[5]=x,this.vertexArray[6]=b+r.width,this.vertexArray[7]=x,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray),e.viewport(0,0,p*this.renderSession.resolution,d*this.renderSession.resolution),e.bindFramebuffer(e.FRAMEBUFFER,g),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,i.texture),this.applyFilterPass(h,r,p,d),this.texturePool.push(i),t._glFilterTexture=null},n.WebGLFilterManager.prototype.applyFilterPass=function(e,t,r,i){var o=this.gl,a=e.shaders[o.id];
a||(a=new n.PixiShader(o),a.fragmentSrc=e.fragmentSrc,a.uniforms=e.uniforms,a.init(),e.shaders[o.id]=a),this.renderSession.shaderManager.setShader(a),o.uniform2f(a.projectionVector,r/2,-i/2),o.uniform2f(a.offsetVector,0,0),e.uniforms.dimensions&&(e.uniforms.dimensions.value[0]=this.width,e.uniforms.dimensions.value[1]=this.height,e.uniforms.dimensions.value[2]=this.vertexArray[0],e.uniforms.dimensions.value[3]=this.vertexArray[5]),a.syncUniforms(),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.vertexAttribPointer(a.aVertexPosition,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.uvBuffer),o.vertexAttribPointer(a.aTextureCoord,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.colorBuffer),o.vertexAttribPointer(a.colorAttribute,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),this.renderSession.drawCount++},n.WebGLFilterManager.prototype.initShaderBuffers=function(){var e=this.gl;this.vertexBuffer=e.createBuffer(),this.uvBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.vertexArray=new n.Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.STATIC_DRAW),this.uvArray=new n.Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvArray,e.STATIC_DRAW),this.colorArray=new n.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),e.bindBuffer(e.ARRAY_BUFFER,this.colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colorArray,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),e.STATIC_DRAW)},n.WebGLFilterManager.prototype.destroy=function(){var e=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var t=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null,e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.uvBuffer),e.deleteBuffer(this.colorBuffer),e.deleteBuffer(this.indexBuffer)},n.FilterTexture=function(e,t,r,i){this.gl=e,this.frameBuffer=e.createFramebuffer(),this.texture=e.createTexture(),i=i||n.scaleModes.DEFAULT,e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,i===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0),this.renderBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.renderBuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.renderBuffer),this.resize(t,r)},n.FilterTexture.prototype.constructor=n.FilterTexture,n.FilterTexture.prototype.clear=function(){var e=this.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},n.FilterTexture.prototype.resize=function(e,t){if(this.width!==e||this.height!==t){this.width=e,this.height=t;var n=this.gl;n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,t,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindRenderbuffer(n.RENDERBUFFER,this.renderBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e,t)}},n.FilterTexture.prototype.destroy=function(){var e=this.gl;e.deleteFramebuffer(this.frameBuffer),e.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},n.CanvasBuffer=function(e,t){this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=e,this.canvas.height=t},n.CanvasBuffer.prototype.constructor=n.CanvasBuffer,n.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},n.CanvasBuffer.prototype.resize=function(e,t){this.width=this.canvas.width=e,this.height=this.canvas.height=t},n.CanvasMaskManager=function(){},n.CanvasMaskManager.prototype.constructor=n.CanvasMaskManager,n.CanvasMaskManager.prototype.pushMask=function(e,t){var r=t.context;r.save();var i=e.alpha,o=e.worldTransform,a=t.resolution;r.setTransform(o.a*a,o.b*a,o.c*a,o.d*a,o.tx*a,o.ty*a),n.CanvasGraphics.renderGraphicsMask(e,r),r.clip(),e.worldAlpha=i},n.CanvasMaskManager.prototype.popMask=function(e){e.context.restore()},n.CanvasTinter=function(){},n.CanvasTinter.getTintedTexture=function(e,t){var r=e.texture;t=n.CanvasTinter.roundColor(t);var i="#"+("00000"+(0|t).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[i])return r.tintCache[i];var o=n.CanvasTinter.canvas||document.createElement("canvas");if(n.CanvasTinter.tintMethod(r,t,o),n.CanvasTinter.convertTintToImage){var a=new Image;a.src=o.toDataURL(),r.tintCache[i]=a}else r.tintCache[i]=o,n.CanvasTinter.canvas=null;return o},n.CanvasTinter.tintWithMultiply=function(e,t,n){var r=n.getContext("2d"),i=e.crop;n.width=i.width,n.height=i.height,r.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="multiply",r.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},n.CanvasTinter.tintWithOverlay=function(e,t,n){var r=n.getContext("2d"),i=e.crop;n.width=i.width,n.height=i.height,r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},n.CanvasTinter.tintWithPerPixel=function(e,t,r){var i=r.getContext("2d"),o=e.crop;r.width=o.width,r.height=o.height,i.globalCompositeOperation="copy",i.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var a=n.hex2rgb(t),s=a[0],u=a[1],c=a[2],l=i.getImageData(0,0,o.width,o.height),f=l.data,h=0;h<f.length;h+=4)f[h+0]*=s,f[h+1]*=u,f[h+2]*=c;i.putImageData(l,0,0)},n.CanvasTinter.roundColor=function(e){var t=n.CanvasTinter.cacheStepsPerColorChannel,r=n.hex2rgb(e);return r[0]=Math.min(255,r[0]/t*t),r[1]=Math.min(255,r[1]/t*t),r[2]=Math.min(255,r[2]/t*t),n.rgb2hex(r)},n.CanvasTinter.cacheStepsPerColorChannel=8,n.CanvasTinter.convertTintToImage=!1,n.CanvasTinter.canUseMultiply=n.canUseNewCanvasBlendModes(),n.CanvasTinter.tintMethod=n.CanvasTinter.canUseMultiply?n.CanvasTinter.tintWithMultiply:n.CanvasTinter.tintWithPerPixel,n.CanvasRenderer=function(e,t,r){if(r)for(var i in n.defaultRenderOptions)"undefined"==typeof r[i]&&(r[i]=n.defaultRenderOptions[i]);else r=n.defaultRenderOptions;n.defaultRenderer||(n.sayHello("Canvas"),n.defaultRenderer=this),this.type=n.CANVAS_RENDERER,this.resolution=r.resolution,this.clearBeforeRender=r.clearBeforeRender,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.width=e||800,this.height=t||600,this.width*=this.resolution,this.height*=this.resolution,this.view=r.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width*this.resolution,this.view.height=this.height*this.resolution,this.count=0,this.maskManager=new n.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},this.mapBlendModes(),this.resize(e,t),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},n.CanvasRenderer.prototype.constructor=n.CanvasRenderer,n.CanvasRenderer.prototype.render=function(e){e.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=n.blendModes.NORMAL,this.context.globalCompositeOperation=n.blendModesCanvas[n.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=e.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(e),e.interactive&&(e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this)))},n.CanvasRenderer.prototype.destroy=function(e){"undefined"==typeof e&&(e=!0),e&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},n.CanvasRenderer.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},n.CanvasRenderer.prototype.renderDisplayObject=function(e,t){this.renderSession.context=t||this.context,this.renderSession.resolution=this.resolution,e._renderCanvas(this.renderSession)},n.CanvasRenderer.prototype.mapBlendModes=function(){n.blendModesCanvas||(n.blendModesCanvas=[],n.canUseNewCanvasBlendModes()?(n.blendModesCanvas[n.blendModes.NORMAL]="source-over",n.blendModesCanvas[n.blendModes.ADD]="lighter",n.blendModesCanvas[n.blendModes.MULTIPLY]="multiply",n.blendModesCanvas[n.blendModes.SCREEN]="screen",n.blendModesCanvas[n.blendModes.OVERLAY]="overlay",n.blendModesCanvas[n.blendModes.DARKEN]="darken",n.blendModesCanvas[n.blendModes.LIGHTEN]="lighten",n.blendModesCanvas[n.blendModes.COLOR_DODGE]="color-dodge",n.blendModesCanvas[n.blendModes.COLOR_BURN]="color-burn",n.blendModesCanvas[n.blendModes.HARD_LIGHT]="hard-light",n.blendModesCanvas[n.blendModes.SOFT_LIGHT]="soft-light",n.blendModesCanvas[n.blendModes.DIFFERENCE]="difference",n.blendModesCanvas[n.blendModes.EXCLUSION]="exclusion",n.blendModesCanvas[n.blendModes.HUE]="hue",n.blendModesCanvas[n.blendModes.SATURATION]="saturation",n.blendModesCanvas[n.blendModes.COLOR]="color",n.blendModesCanvas[n.blendModes.LUMINOSITY]="luminosity"):(n.blendModesCanvas[n.blendModes.NORMAL]="source-over",n.blendModesCanvas[n.blendModes.ADD]="lighter",n.blendModesCanvas[n.blendModes.MULTIPLY]="source-over",n.blendModesCanvas[n.blendModes.SCREEN]="source-over",n.blendModesCanvas[n.blendModes.OVERLAY]="source-over",n.blendModesCanvas[n.blendModes.DARKEN]="source-over",n.blendModesCanvas[n.blendModes.LIGHTEN]="source-over",n.blendModesCanvas[n.blendModes.COLOR_DODGE]="source-over",n.blendModesCanvas[n.blendModes.COLOR_BURN]="source-over",n.blendModesCanvas[n.blendModes.HARD_LIGHT]="source-over",n.blendModesCanvas[n.blendModes.SOFT_LIGHT]="source-over",n.blendModesCanvas[n.blendModes.DIFFERENCE]="source-over",n.blendModesCanvas[n.blendModes.EXCLUSION]="source-over",n.blendModesCanvas[n.blendModes.HUE]="source-over",n.blendModesCanvas[n.blendModes.SATURATION]="source-over",n.blendModesCanvas[n.blendModes.COLOR]="source-over",n.blendModesCanvas[n.blendModes.LUMINOSITY]="source-over"))},n.CanvasGraphics=function(){},n.CanvasGraphics.renderGraphics=function(e,t){var r=e.worldAlpha;e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1);for(var i=0;i<e.graphicsData.length;i++){var o=e.graphicsData[i],a=o.shape,s=o._fillTint,u=o._lineTint;if(t.lineWidth=o.lineWidth,o.type===n.Graphics.POLY){t.beginPath();var c=a.points;t.moveTo(c[0],c[1]);for(var l=1;l<c.length/2;l++)t.lineTo(c[2*l],c[2*l+1]);a.closed&&t.lineTo(c[0],c[1]),c[0]===c[c.length-2]&&c[1]===c[c.length-1]&&t.closePath(),o.fill&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.stroke())}else if(o.type===n.Graphics.RECT)(o.fillColor||0===o.fillColor)&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.fillRect(a.x,a.y,a.width,a.height)),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.strokeRect(a.x,a.y,a.width,a.height));else if(o.type===n.Graphics.CIRC)t.beginPath(),t.arc(a.x,a.y,a.radius,0,2*Math.PI),t.closePath(),o.fill&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.stroke());else if(o.type===n.Graphics.ELIP){var f=2*a.width,h=2*a.height,p=a.x-f/2,d=a.y-h/2;t.beginPath();var m=.5522848,v=f/2*m,g=h/2*m,y=p+f,b=d+h,x=p+f/2,w=d+h/2;t.moveTo(p,w),t.bezierCurveTo(p,w-g,x-v,d,x,d),t.bezierCurveTo(x+v,d,y,w-g,y,w),t.bezierCurveTo(y,w+g,x+v,b,x,b),t.bezierCurveTo(x-v,b,p,w+g,p,w),t.closePath(),o.fill&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.stroke())}else if(o.type===n.Graphics.RREC){var _=a.x,E=a.y,T=a.width,C=a.height,S=a.radius,A=Math.min(T,C)/2|0;S=S>A?A:S,t.beginPath(),t.moveTo(_,E+S),t.lineTo(_,E+C-S),t.quadraticCurveTo(_,E+C,_+S,E+C),t.lineTo(_+T-S,E+C),t.quadraticCurveTo(_+T,E+C,_+T,E+C-S),t.lineTo(_+T,E+S),t.quadraticCurveTo(_+T,E,_+T-S,E),t.lineTo(_+S,E),t.quadraticCurveTo(_,E,_,E+S),t.closePath(),(o.fillColor||0===o.fillColor)&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.stroke())}}},n.CanvasGraphics.renderGraphicsMask=function(e,t){var r=e.graphicsData.length;if(0!==r){r>1&&(r=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var i=0;1>i;i++){var o=e.graphicsData[i],a=o.shape;if(o.type===n.Graphics.POLY){t.beginPath();var s=a.points;t.moveTo(s[0],s[1]);for(var u=1;u<s.length/2;u++)t.lineTo(s[2*u],s[2*u+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&t.closePath()}else if(o.type===n.Graphics.RECT)t.beginPath(),t.rect(a.x,a.y,a.width,a.height),t.closePath();else if(o.type===n.Graphics.CIRC)t.beginPath(),t.arc(a.x,a.y,a.radius,0,2*Math.PI),t.closePath();else if(o.type===n.Graphics.ELIP){var c=2*a.width,l=2*a.height,f=a.x-c/2,h=a.y-l/2;t.beginPath();var p=.5522848,d=c/2*p,m=l/2*p,v=f+c,g=h+l,y=f+c/2,b=h+l/2;t.moveTo(f,b),t.bezierCurveTo(f,b-m,y-d,h,y,h),t.bezierCurveTo(y+d,h,v,b-m,v,b),t.bezierCurveTo(v,b+m,y+d,g,y,g),t.bezierCurveTo(y-d,g,f,b+m,f,b),t.closePath()}else if(o.type===n.Graphics.RREC){var x=a.points,w=x[0],_=x[1],E=x[2],T=x[3],C=x[4],S=Math.min(E,T)/2|0;C=C>S?S:C,t.beginPath(),t.moveTo(w,_+C),t.lineTo(w,_+T-C),t.quadraticCurveTo(w,_+T,w+C,_+T),t.lineTo(w+E-C,_+T),t.quadraticCurveTo(w+E,_+T,w+E,_+T-C),t.lineTo(w+E,_+C),t.quadraticCurveTo(w+E,_,w+E-C,_),t.lineTo(w+C,_),t.quadraticCurveTo(w,_,w,_+C),t.closePath()}}}},n.CanvasGraphics.updateGraphicsTint=function(e){if(16777215!==e.tint)for(var t=(e.tint>>16&255)/255,n=(e.tint>>8&255)/255,r=(255&e.tint)/255,i=0;i<e.graphicsData.length;i++){var o=e.graphicsData[i],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*n*255<<8)+(255&a)/255*r*255,o._lineTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*n*255<<8)+(255&s)/255*r*255}},n.Graphics=function(){n.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=n.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new n.Rectangle(0,0,1,1),this.dirty=!0,this.webGLDirty=!1,this.cachedSpriteDirty=!1},n.Graphics.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Graphics.prototype.constructor=n.Graphics,Object.defineProperty(n.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap=e,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),n.Graphics.prototype.lineStyle=function(e,t,r){if(this.lineWidth=e||0,this.lineColor=t||0,this.lineAlpha=void 0===r?1:r,this.currentPath){if(this.currentPath.shape.points.length)return this.drawShape(new n.Polygon(this.currentPath.shape.points.slice(-2))),this;this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha}return this},n.Graphics.prototype.moveTo=function(e,t){return this.drawShape(new n.Polygon([e,t])),this},n.Graphics.prototype.lineTo=function(e,t){return this.currentPath.shape.points.push(e,t),this.dirty=!0,this},n.Graphics.prototype.quadraticCurveTo=function(e,t,n,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i,o,a=20,s=this.currentPath.shape.points;0===s.length&&this.moveTo(0,0);for(var u=s[s.length-2],c=s[s.length-1],l=0,f=1;a>=f;f++)l=f/a,i=u+(e-u)*l,o=c+(t-c)*l,s.push(i+(e+(n-e)*l-i)*l,o+(t+(r-t)*l-o)*l);return this.dirty=!0,this},n.Graphics.prototype.bezierCurveTo=function(e,t,n,r,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var a,s,u,c,l,f=20,h=this.currentPath.shape.points,p=h[h.length-2],d=h[h.length-1],m=0,v=1;f>=v;v++)m=v/f,a=1-m,s=a*a,u=s*a,c=m*m,l=c*m,h.push(u*p+3*s*m*e+3*a*c*n+l*i,u*d+3*s*m*t+3*a*c*r+l*o);return this.dirty=!0,this},n.Graphics.prototype.arcTo=function(e,t,n,r,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1],u=s-t,c=a-e,l=r-t,f=n-e,h=Math.abs(u*f-c*l);if(1e-8>h||0===i)(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t);else{var p=u*u+c*c,d=l*l+f*f,m=u*l+c*f,v=i*Math.sqrt(p)/h,g=i*Math.sqrt(d)/h,y=v*m/p,b=g*m/d,x=v*f+g*c,w=v*l+g*u,_=c*(g+y),E=u*(g+y),T=f*(v+b),C=l*(v+b),S=Math.atan2(E-w,_-x),A=Math.atan2(C-w,T-x);this.arc(x+e,w+t,i,S,A,c*l>f*u)}return this.dirty=!0,this},n.Graphics.prototype.arc=function(e,t,n,r,i,o){if(o=o||!1,r===i)return this;!o&&r>=i?i+=2*Math.PI:o&&i>=r&&(r+=2*Math.PI);var a=o?-1*(r-i):i-r,s=Math.abs(a)/(2*Math.PI)*40;if(0===a)return this;var u=e+Math.cos(r)*n,c=t+Math.sin(r)*n;o&&this.filling?this.moveTo(e,t):this.moveTo(u,c);for(var l=this.currentPath.shape.points,f=a/(2*s),h=2*f,p=Math.cos(f),d=Math.sin(f),m=s-1,v=m%1/m,g=0;m>=g;g++){var y=g+v*g,b=f+r+h*y,x=Math.cos(b),w=-Math.sin(b);l.push((p*x+d*w)*n+e,(p*-w+d*x)*n+t)}return this.dirty=!0,this},n.Graphics.prototype.beginFill=function(e,t){return this.filling=!0,this.fillColor=e||0,this.fillAlpha=void 0===t?1:t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},n.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},n.Graphics.prototype.drawRect=function(e,t,r,i){return this.drawShape(new n.Rectangle(e,t,r,i)),this},n.Graphics.prototype.drawRoundedRect=function(e,t,r,i,o){return this.drawShape(new n.RoundedRectangle(e,t,r,i,o)),this},n.Graphics.prototype.drawCircle=function(e,t,r){return this.drawShape(new n.Circle(e,t,r)),this},n.Graphics.prototype.drawEllipse=function(e,t,r,i){return this.drawShape(new n.Ellipse(e,t,r,i)),this},n.Graphics.prototype.drawPolygon=function(e){return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.drawShape(new n.Polygon(e)),this},n.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},n.Graphics.prototype.generateTexture=function(e,t){e=e||1;var r=this.getBounds(),i=new n.CanvasBuffer(r.width*e,r.height*e),o=n.Texture.fromCanvas(i.canvas,t);return o.baseTexture.resolution=e,i.context.scale(e,e),i.context.translate(-r.x,-r.y),n.CanvasGraphics.renderGraphics(this,i.context),o},n.Graphics.prototype._renderWebGL=function(e){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void n.Sprite.prototype._renderWebGL.call(this._cachedSprite,e);if(e.spriteBatch.stop(),e.blendModeManager.setBlendMode(this.blendMode),this._mask&&e.maskManager.pushMask(this._mask,e),this._filters&&e.filterManager.pushFilter(this._filterBlock),this.blendMode!==e.spriteBatch.currentBlendMode){e.spriteBatch.currentBlendMode=this.blendMode;var t=n.blendModesWebGL[e.spriteBatch.currentBlendMode];e.spriteBatch.gl.blendFunc(t[0],t[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),n.WebGLGraphics.renderGraphics(this,e),this.children.length){e.spriteBatch.start();for(var r=0,i=this.children.length;i>r;r++)this.children[r]._renderWebGL(e);e.spriteBatch.stop()}this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(this.mask,e),e.drawCount++,e.spriteBatch.start()}},n.Graphics.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void n.Sprite.prototype._renderCanvas.call(this._cachedSprite,e);var t=e.context,r=this.worldTransform;this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,t.globalCompositeOperation=n.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e);var i=e.resolution;t.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),n.CanvasGraphics.renderGraphics(this,t);for(var o=0,a=this.children.length;a>o;o++)this.children[o]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},n.Graphics.prototype.getBounds=function(e){if(this.isMask)return n.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var t=this._localBounds,r=t.x,i=t.width+t.x,o=t.y,a=t.height+t.y,s=e||this.worldTransform,u=s.a,c=s.b,l=s.c,f=s.d,h=s.tx,p=s.ty,d=u*i+l*a+h,m=f*a+c*i+p,v=u*r+l*a+h,g=f*a+c*r+p,y=u*r+l*o+h,b=f*o+c*r+p,x=u*i+l*o+h,w=f*o+c*i+p,_=d,E=m,T=d,C=m;return T=T>v?v:T,T=T>y?y:T,T=T>x?x:T,C=C>g?g:C,C=C>b?b:C,C=C>w?w:C,_=v>_?v:_,_=y>_?y:_,_=x>_?x:_,E=g>E?g:E,E=b>E?b:E,E=w>E?w:E,this._bounds.x=T,this._bounds.width=_-T,this._bounds.y=C,this._bounds.height=E-C,this._bounds},n.Graphics.prototype.updateLocalBounds=function(){var e=1/0,t=-(1/0),r=1/0,i=-(1/0);if(this.graphicsData.length)for(var o,a,s,u,c,l,f=0;f<this.graphicsData.length;f++){var h=this.graphicsData[f],p=h.type,d=h.lineWidth;if(o=h.shape,p===n.Graphics.RECT||p===n.Graphics.RREC)s=o.x-d/2,u=o.y-d/2,c=o.width+d,l=o.height+d,e=e>s?s:e,t=s+c>t?s+c:t,r=r>u?u:r,i=u+l>i?u+l:i;else if(p===n.Graphics.CIRC)s=o.x,u=o.y,c=o.radius+d/2,l=o.radius+d/2,e=e>s-c?s-c:e,t=s+c>t?s+c:t,r=r>u-l?u-l:r,i=u+l>i?u+l:i;else if(p===n.Graphics.ELIP)s=o.x,u=o.y,c=o.width+d/2,l=o.height+d/2,e=e>s-c?s-c:e,t=s+c>t?s+c:t,r=r>u-l?u-l:r,i=u+l>i?u+l:i;else{a=o.points;for(var m=0;m<a.length;m+=2)s=a[m],u=a[m+1],e=e>s-d?s-d:e,t=s+d>t?s+d:t,r=r>u-d?u-d:r,i=u+d>i?u+d:i}}else e=0,t=0,r=0,i=0;var v=this.boundsPadding;this._localBounds.x=e-v,this._localBounds.width=t-e+2*v,this._localBounds.y=r-v,this._localBounds.height=i-r+2*v},n.Graphics.prototype._generateCachedSprite=function(){var e=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(e.width,e.height);else{var t=new n.CanvasBuffer(e.width,e.height),r=n.Texture.fromCanvas(t.canvas);this._cachedSprite=new n.Sprite(r),this._cachedSprite.buffer=t,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this._cachedSprite.buffer.context.translate(-e.x,-e.y),this.worldAlpha=1,n.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},n.Graphics.prototype.updateCachedSpriteTexture=function(){var e=this._cachedSprite,t=e.texture,n=e.buffer.canvas;t.baseTexture.width=n.width,t.baseTexture.height=n.height,t.crop.width=t.frame.width=n.width,t.crop.height=t.frame.height=n.height,e._width=n.width,e._height=n.height,t.baseTexture.dirty()},n.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},n.Graphics.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var t=new n.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,e);return this.graphicsData.push(t),t.type===n.Graphics.POLY&&(t.shape.closed=this.filling,this.currentPath=t),this.dirty=!0,t},n.GraphicsData=function(e,t,n,r,i,o,a){this.lineWidth=e,this.lineColor=t,this.lineAlpha=n,this._lineTint=t,this.fillColor=r,this.fillAlpha=i,this._fillTint=r,this.fill=o,this.shape=a,this.type=a.type},n.Graphics.POLY=0,n.Graphics.RECT=1,n.Graphics.CIRC=2,n.Graphics.ELIP=3,n.Graphics.RREC=4,n.Polygon.prototype.type=n.Graphics.POLY,n.Rectangle.prototype.type=n.Graphics.RECT,n.Circle.prototype.type=n.Graphics.CIRC,n.Ellipse.prototype.type=n.Graphics.ELIP,n.RoundedRectangle.prototype.type=n.Graphics.RREC,n.Strip=function(e){n.DisplayObjectContainer.call(this),this.texture=e,this.uvs=new n.Float32Array([0,1,1,1,1,0,0,1]),this.vertices=new n.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new n.Float32Array([1,1,1,1]),this.indices=new n.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=n.blendModes.NORMAL,this.canvasPadding=0,this.drawMode=n.Strip.DrawModes.TRIANGLE_STRIP},n.Strip.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Strip.prototype.constructor=n.Strip,n.Strip.prototype._renderWebGL=function(e){!this.visible||this.alpha<=0||(e.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(e),e.shaderManager.setShader(e.shaderManager.stripShader),this._renderStrip(e),e.spriteBatch.start())},n.Strip.prototype._initWebGL=function(e){var t=e.gl;this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),this._uvBuffer=t.createBuffer(),this._colorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colors,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)},n.Strip.prototype._renderStrip=function(e){var t=e.gl,r=e.projection,i=e.offset,o=e.shaderManager.stripShader,a=this.drawMode===n.Strip.DrawModes.TRIANGLE_STRIP?t.TRIANGLE_STRIP:t.TRIANGLES;e.blendModeManager.setBlendMode(this.blendMode),t.uniformMatrix3fv(o.translationMatrix,!1,this.worldTransform.toArray(!0)),t.uniform2f(o.projectionVector,r.x,-r.y),t.uniform2f(o.offsetVector,-i.x,-i.y),t.uniform1f(o.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.STATIC_DRAW),t.vertexAttribPointer(o.aVertexPosition,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.STATIC_DRAW),t.vertexAttribPointer(o.aTextureCoord,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),this.texture.baseTexture._dirty[t.id]?e.renderer.updateTexture(this.texture.baseTexture):t.bindTexture(t.TEXTURE_2D,this.texture.baseTexture._glTextures[t.id]),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)):(t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.vertexAttribPointer(o.aVertexPosition,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.vertexAttribPointer(o.aTextureCoord,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),this.texture.baseTexture._dirty[t.id]?e.renderer.updateTexture(this.texture.baseTexture):t.bindTexture(t.TEXTURE_2D,this.texture.baseTexture._glTextures[t.id]),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),t.drawElements(a,this.indices.length,t.UNSIGNED_SHORT,0)},n.Strip.prototype._renderCanvas=function(e){var t=e.context,r=this.worldTransform;e.roundPixels?t.setTransform(r.a,r.b,r.c,r.d,0|r.tx,0|r.ty):t.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.drawMode===n.Strip.DrawModes.TRIANGLE_STRIP?this._renderCanvasTriangleStrip(t):this._renderCanvasTriangles(t)},n.Strip.prototype._renderCanvasTriangleStrip=function(e){var t=this.vertices,n=this.uvs,r=t.length/2;this.count++;for(var i=0;r-2>i;i++){var o=2*i;this._renderCanvasDrawTriangle(e,t,n,o,o+2,o+4)}},n.Strip.prototype._renderCanvasTriangles=function(e){var t=this.vertices,n=this.uvs,r=this.indices,i=r.length;this.count++;for(var o=0;i>o;o+=3){var a=2*r[o],s=2*r[o+1],u=2*r[o+2];this._renderCanvasDrawTriangle(e,t,n,a,s,u)}},n.Strip.prototype._renderCanvasDrawTriangle=function(e,t,n,r,i,o){var a=this.texture.baseTexture.source,s=this.texture.width,u=this.texture.height,c=t[r],l=t[i],f=t[o],h=t[r+1],p=t[i+1],d=t[o+1],m=n[r]*s,v=n[i]*s,g=n[o]*s,y=n[r+1]*u,b=n[i+1]*u,x=n[o+1]*u;if(this.canvasPadding>0){var w=this.canvasPadding/this.worldTransform.a,_=this.canvasPadding/this.worldTransform.d,E=(c+l+f)/3,T=(h+p+d)/3,C=c-E,S=h-T,A=Math.sqrt(C*C+S*S);c=E+C/A*(A+w),h=T+S/A*(A+_),C=l-E,S=p-T,A=Math.sqrt(C*C+S*S),l=E+C/A*(A+w),p=T+S/A*(A+_),C=f-E,S=d-T,A=Math.sqrt(C*C+S*S),f=E+C/A*(A+w),d=T+S/A*(A+_)}e.save(),e.beginPath(),e.moveTo(c,h),e.lineTo(l,p),e.lineTo(f,d),e.closePath(),e.clip();var k=m*b+y*g+v*x-b*g-y*v-m*x,O=c*b+y*f+l*x-b*f-y*l-c*x,M=m*l+c*g+v*f-l*g-c*v-m*f,N=m*b*f+y*l*g+c*v*x-c*b*g-y*v*f-m*l*x,j=h*b+y*d+p*x-b*d-y*p-h*x,R=m*p+h*g+v*d-p*g-h*v-m*d,P=m*b*d+y*p*g+h*v*x-h*b*g-y*v*d-m*p*x;e.transform(O/k,j/k,M/k,R/k,N/k,P/k),e.drawImage(a,0,0),e.restore()},n.Strip.prototype.renderStripFlat=function(e){var t=this.context,n=e.vertices,r=n.length/2;this.count++,t.beginPath();for(var i=1;r-2>i;i++){var o=2*i,a=n[o],s=n[o+2],u=n[o+4],c=n[o+1],l=n[o+3],f=n[o+5];t.moveTo(a,c),t.lineTo(s,l),t.lineTo(u,f)}t.fillStyle="#FF0000",t.fill(),t.closePath()},n.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},n.Strip.prototype.getBounds=function(e){for(var t=e||this.worldTransform,r=t.a,i=t.b,o=t.c,a=t.d,s=t.tx,u=t.ty,c=-(1/0),l=-(1/0),f=1/0,h=1/0,p=this.vertices,d=0,m=p.length;m>d;d+=2){var v=p[d],g=p[d+1],y=r*v+o*g+s,b=a*g+i*v+u;f=f>y?y:f,h=h>b?b:h,c=y>c?y:c,l=b>l?b:l}if(f===-(1/0)||l===1/0)return n.EmptyRectangle;var x=this._bounds;return x.x=f,x.width=c-f,x.y=h,x.height=l-h,this._currentBounds=x,x},n.Strip.DrawModes={TRIANGLE_STRIP:0,TRIANGLES:1},n.Rope=function(e,t){n.Strip.call(this,e),this.points=t,this.vertices=new n.Float32Array(4*t.length),this.uvs=new n.Float32Array(4*t.length),this.colors=new n.Float32Array(2*t.length),this.indices=new n.Uint16Array(2*t.length),this.refresh()},n.Rope.prototype=Object.create(n.Strip.prototype),n.Rope.prototype.constructor=n.Rope,n.Rope.prototype.refresh=function(){var e=this.points;if(!(e.length<1)){var t=this.uvs,n=e[0],r=this.indices,i=this.colors;this.count-=.2,t[0]=0,t[1]=0,t[2]=0,t[3]=1,i[0]=1,i[1]=1,r[0]=0,r[1]=1;for(var o,a,s,u=e.length,c=1;u>c;c++)o=e[c],a=4*c,s=c/(u-1),c%2?(t[a]=s,t[a+1]=0,t[a+2]=s,t[a+3]=1):(t[a]=s,t[a+1]=0,t[a+2]=s,t[a+3]=1),a=2*c,i[a]=1,i[a+1]=1,a=2*c,r[a]=a,r[a+1]=a+1,
n=o}},n.Rope.prototype.updateTransform=function(){var e=this.points;if(!(e.length<1)){var t,r=e[0],i={x:0,y:0};this.count-=.2;for(var o,a,s,u,c,l=this.vertices,f=e.length,h=0;f>h;h++)o=e[h],a=4*h,t=h<e.length-1?e[h+1]:o,i.y=-(t.x-r.x),i.x=t.y-r.y,s=10*(1-h/(f-1)),s>1&&(s=1),u=Math.sqrt(i.x*i.x+i.y*i.y),c=this.texture.height/2,i.x/=u,i.y/=u,i.x*=c,i.y*=c,l[a]=o.x+i.x,l[a+1]=o.y+i.y,l[a+2]=o.x-i.x,l[a+3]=o.y-i.y,r=o;n.DisplayObjectContainer.prototype.updateTransform.call(this)}},n.Rope.prototype.setTexture=function(e){this.texture=e},n.TilingSprite=function(e,t,r){n.Sprite.call(this,e),this._width=t||100,this._height=r||100,this.tileScale=new n.Point(1,1),this.tileScaleOffset=new n.Point(1,1),this.tilePosition=new n.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=n.blendModes.NORMAL},n.TilingSprite.prototype=Object.create(n.Sprite.prototype),n.TilingSprite.prototype.constructor=n.TilingSprite,Object.defineProperty(n.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e}}),Object.defineProperty(n.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e}}),n.TilingSprite.prototype.setTexture=function(e){this.texture!==e&&(this.texture=e,this.refreshTexture=!0,this.cachedTint=16777215)},n.TilingSprite.prototype._renderWebGL=function(e){if(this.visible!==!1&&0!==this.alpha){var t,n;for(this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(e.renderer.updateTexture(this.tilingTexture.baseTexture),this.tilingTexture.needsUpdate=!1)):e.spriteBatch.renderTilingSprite(this),t=0,n=this.children.length;n>t;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(this._mask,e),e.spriteBatch.start()}},n.TilingSprite.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha){var t=e.context;this._mask&&e.maskManager.pushMask(this._mask,e),t.globalAlpha=this.worldAlpha;var r,i,o=this.worldTransform,a=e.resolution;if(t.setTransform(o.a*a,o.b*a,o.c*a,o.d*a,o.tx*a,o.ty*a),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=t.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,t.globalCompositeOperation=n.blendModesCanvas[e.currentBlendMode]);var s=this.tilePosition,u=this.tileScale;for(s.x%=this.tilingTexture.baseTexture.width,s.y%=this.tilingTexture.baseTexture.height,t.scale(u.x,u.y),t.translate(s.x+this.anchor.x*-this._width,s.y+this.anchor.y*-this._height),t.fillStyle=this.__tilePattern,t.fillRect(-s.x,-s.y,this._width/u.x,this._height/u.y),t.scale(1/u.x,1/u.y),t.translate(-s.x+this.anchor.x*this._width,-s.y+this.anchor.y*this._height),this._mask&&e.maskManager.popMask(e),r=0,i=this.children.length;i>r;r++)this.children[r]._renderCanvas(e)}},n.TilingSprite.prototype.getBounds=function(){var e=this._width,t=this._height,n=e*(1-this.anchor.x),r=e*-this.anchor.x,i=t*(1-this.anchor.y),o=t*-this.anchor.y,a=this.worldTransform,s=a.a,u=a.b,c=a.c,l=a.d,f=a.tx,h=a.ty,p=s*r+c*o+f,d=l*o+u*r+h,m=s*n+c*o+f,v=l*o+u*n+h,g=s*n+c*i+f,y=l*i+u*n+h,b=s*r+c*i+f,x=l*i+u*r+h,w=-(1/0),_=-(1/0),E=1/0,T=1/0;E=E>p?p:E,E=E>m?m:E,E=E>g?g:E,E=E>b?b:E,T=T>d?d:T,T=T>v?v:T,T=T>y?y:T,T=T>x?x:T,w=p>w?p:w,w=m>w?m:w,w=g>w?g:w,w=b>w?b:w,_=d>_?d:_,_=v>_?v:_,_=y>_?y:_,_=x>_?x:_;var C=this._bounds;return C.x=E,C.width=w-E,C.y=T,C.height=_-T,this._currentBounds=C,C},n.TilingSprite.prototype.onTextureUpdate=function(){},n.TilingSprite.prototype.generateTilingTexture=function(e){if(this.texture.baseTexture.hasLoaded){var t,r,i=this.originalTexture||this.texture,o=i.frame,a=o.width!==i.baseTexture.width||o.height!==i.baseTexture.height,s=!1;if(e?(t=n.getNextPowerOfTwo(o.width),r=n.getNextPowerOfTwo(o.height),(o.width!==t||o.height!==r||i.baseTexture.width!==t||i.baseTexture.height||r)&&(s=!0)):a&&(i.trim?(t=i.trim.width,r=i.trim.height):(t=o.width,r=o.height),s=!0),s){var u;this.tilingTexture&&this.tilingTexture.isTiling?(u=this.tilingTexture.canvasBuffer,u.resize(t,r),this.tilingTexture.baseTexture.width=t,this.tilingTexture.baseTexture.height=r,this.tilingTexture.needsUpdate=!0):(u=new n.CanvasBuffer(t,r),this.tilingTexture=n.Texture.fromCanvas(u.canvas),this.tilingTexture.canvasBuffer=u,this.tilingTexture.isTiling=!0),u.context.drawImage(i.baseTexture.source,i.crop.x,i.crop.y,i.crop.width,i.crop.height,0,0,t,r),this.tileScaleOffset.x=o.width/t,this.tileScaleOffset.y=o.height/r}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=i;this.refreshTexture=!1,this.originalTexture=this.texture,this.texture=this.tilingTexture,this.tilingTexture.baseTexture._powerOf2=!0}},n.TilingSprite.prototype.destroy=function(){n.Sprite.prototype.destroy.call(this),this.tileScale=null,this.tileScaleOffset=null,this.tilePosition=null,this.tilingTexture&&(this.tilingTexture.destroy(!0),this.tilingTexture=null)};var r={radDeg:180/Math.PI,degRad:Math.PI/180,temp:[],Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array};r.BoneData=function(e,t){this.name=e,this.parent=t},r.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0,flipX:!1,flipY:!1},r.SlotData=function(e,t){this.name=e,this.boneData=t},r.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},r.IkConstraintData=function(e){this.name=e,this.bones=[]},r.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},r.Bone=function(e,t,n){this.data=e,this.skeleton=t,this.parent=n,this.setToSetupPose()},r.Bone.yDown=!1,r.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,worldFlipX:!1,worldFlipY:!1,updateWorldTransform:function(){var e=this.parent;if(e)this.worldX=this.x*e.m00+this.y*e.m01+e.worldX,this.worldY=this.x*e.m10+this.y*e.m11+e.worldY,this.data.inheritScale?(this.worldScaleX=e.worldScaleX*this.scaleX,this.worldScaleY=e.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?e.worldRotation+this.rotationIK:this.rotationIK,this.worldFlipX=e.worldFlipX!=this.flipX,this.worldFlipY=e.worldFlipY!=this.flipY;else{var t=this.skeleton.flipX,n=this.skeleton.flipY;this.worldX=t?-this.x:this.x,this.worldY=n!=r.Bone.yDown?-this.y:this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotationIK,this.worldFlipX=t!=this.flipX,this.worldFlipY=n!=this.flipY}var i=this.worldRotation*r.degRad,o=Math.cos(i),a=Math.sin(i);this.worldFlipX?(this.m00=-o*this.worldScaleX,this.m01=a*this.worldScaleY):(this.m00=o*this.worldScaleX,this.m01=-a*this.worldScaleY),this.worldFlipY!=r.Bone.yDown?(this.m10=-a*this.worldScaleX,this.m11=-o*this.worldScaleY):(this.m10=a*this.worldScaleX,this.m11=o*this.worldScaleY)},setToSetupPose:function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.rotationIK=this.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.flipX=e.flipX,this.flipY=e.flipY},worldToLocal:function(e){var t=e[0]-this.worldX,n=e[1]-this.worldY,i=this.m00,o=this.m10,a=this.m01,s=this.m11;this.worldFlipX!=(this.worldFlipY!=r.Bone.yDown)&&(i=-i,s=-s);var u=1/(i*s-a*o);e[0]=t*i*u-n*a*u,e[1]=n*s*u-t*o*u},localToWorld:function(e){var t=e[0],n=e[1];e[0]=t*this.m00+n*this.m01+this.worldX,e[1]=t*this.m10+n*this.m11+this.worldY}},r.Slot=function(e,t){this.data=e,this.bone=t,this.setToSetupPose()},r.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(e){this.attachment=e,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0},setAttachmentTime:function(e){this._attachmentTime=this.bone.skeleton.time-e},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var e=this.data;this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a;for(var t=this.bone.skeleton.data.slots,n=0,r=t.length;r>n;n++)if(t[n]==e){this.setAttachment(e.attachmentName?this.bone.skeleton.getAttachmentBySlotIndex(n,e.attachmentName):null);break}}},r.IkConstraint=function(e,t){this.data=e,this.mix=e.mix,this.bendDirection=e.bendDirection,this.bones=[];for(var n=0,r=e.bones.length;r>n;n++)this.bones.push(t.findBone(e.bones[n].name));this.target=t.findBone(e.target.name)},r.IkConstraint.prototype={apply:function(){var e=this.target,t=this.bones;switch(t.length){case 1:r.IkConstraint.apply1(t[0],e.worldX,e.worldY,this.mix);break;case 2:r.IkConstraint.apply2(t[0],t[1],e.worldX,e.worldY,this.bendDirection,this.mix)}}},r.IkConstraint.apply1=function(e,t,n,i){var o=e.data.inheritRotation&&e.parent?e.parent.worldRotation:0,a=e.rotation,s=Math.atan2(n-e.worldY,t-e.worldX)*r.radDeg-o;e.rotationIK=a+(s-a)*i},r.IkConstraint.apply2=function(e,t,n,i,o,a){var s=t.rotation,u=e.rotation;if(!a)return t.rotationIK=s,void(e.rotationIK=u);var c,l,f=r.temp,h=e.parent;h?(f[0]=n,f[1]=i,h.worldToLocal(f),n=(f[0]-e.x)*h.worldScaleX,i=(f[1]-e.y)*h.worldScaleY):(n-=e.x,i-=e.y),t.parent==e?(c=t.x,l=t.y):(f[0]=t.x,f[1]=t.y,t.parent.localToWorld(f),e.worldToLocal(f),c=f[0],l=f[1]);var p=c*e.worldScaleX,d=l*e.worldScaleY,m=Math.atan2(d,p),v=Math.sqrt(p*p+d*d),g=t.data.length*t.worldScaleX,y=2*v*g;if(1e-4>y)return void(t.rotationIK=s+(Math.atan2(i,n)*r.radDeg-u-s)*a);var b=(n*n+i*i-v*v-g*g)/y;-1>b?b=-1:b>1&&(b=1);var x=Math.acos(b)*o,w=v+g*b,_=g*Math.sin(x),E=Math.atan2(i*w-n*_,n*w+i*_),T=(E-m)*r.radDeg-u;T>180?T-=360:-180>T&&(T+=360),e.rotationIK=u+T*a,T=(x+m)*r.radDeg-s,T>180?T-=360:-180>T&&(T+=360),t.rotationIK=s+(T+e.worldRotation-t.parent.worldRotation)*a},r.Skin=function(e){this.name=e,this.attachments={}},r.Skin.prototype={addAttachment:function(e,t,n){this.attachments[e+":"+t]=n},getAttachment:function(e,t){return this.attachments[e+":"+t]},_attachAll:function(e,t){for(var n in t.attachments){var r=n.indexOf(":"),i=parseInt(n.substring(0,r)),o=n.substring(r+1),a=e.slots[i];if(a.attachment&&a.attachment.name==o){var s=this.getAttachment(i,o);s&&a.setAttachment(s)}}}},r.Animation=function(e,t,n){this.name=e,this.timelines=t,this.duration=n},r.Animation.prototype={apply:function(e,t,n,r,i){r&&0!=this.duration&&(n%=this.duration,t%=this.duration);for(var o=this.timelines,a=0,s=o.length;s>a;a++)o[a].apply(e,t,n,i,1)},mix:function(e,t,n,r,i,o){r&&0!=this.duration&&(n%=this.duration,t%=this.duration);for(var a=this.timelines,s=0,u=a.length;u>s;s++)a[s].apply(e,t,n,i,o)}},r.Animation.binarySearch=function(e,t,n){var r=0,i=Math.floor(e.length/n)-2;if(!i)return n;for(var o=i>>>1;;){if(e[(o+1)*n]<=t?r=o+1:i=o,r==i)return(r+1)*n;o=r+i>>>1}},r.Animation.binarySearch1=function(e,t){var n=0,r=e.length-2;if(!r)return 1;for(var i=r>>>1;;){if(e[i+1]<=t?n=i+1:r=i,n==r)return n+1;i=n+r>>>1}},r.Animation.linearSearch=function(e,t,n){for(var r=0,i=e.length-n;i>=r;r+=n)if(e[r]>t)return r;return-1},r.Curves=function(e){this.curves=[]},r.Curves.prototype={setLinear:function(e){this.curves[19*e]=0},setStepped:function(e){this.curves[19*e]=1},setCurve:function(e,t,n,r,i){var o=.1,a=o*o,s=a*o,u=3*o,c=3*a,l=6*a,f=6*s,h=2*-t+r,p=2*-n+i,d=3*(t-r)+1,m=3*(n-i)+1,v=t*u+h*c+d*s,g=n*u+p*c+m*s,y=h*l+d*f,b=p*l+m*f,x=d*f,w=m*f,_=19*e,E=this.curves;E[_++]=2;for(var T=v,C=g,S=_+19-1;S>_;_+=2)E[_]=T,E[_+1]=C,v+=y,g+=b,y+=x,b+=w,T+=v,C+=g},getCurvePercent:function(e,t){t=0>t?0:t>1?1:t;var n=this.curves,r=19*e,i=n[r];if(0===i)return t;if(1==i)return 0;r++;for(var o=0,a=r,s=r+19-1;s>r;r+=2)if(o=n[r],o>=t){var u,c;return r==a?(u=0,c=0):(u=n[r-2],c=n[r-1]),c+(n[r+1]-c)*(t-u)/(o-u)}var l=n[r-1];return l+(1-l)*(t-o)/(1-o)}},r.RotateTimeline=function(e){this.curves=new r.Curves(e),this.frames=[],this.frames.length=2*e},r.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t,n){e*=2,this.frames[e]=t,this.frames[e+1]=n},apply:function(e,t,n,i,o){var a=this.frames;if(!(n<a[0])){var s=e.bones[this.boneIndex];if(n>=a[a.length-2]){for(var u=s.data.rotation+a[a.length-1]-s.rotation;u>180;)u-=360;for(;-180>u;)u+=360;return void(s.rotation+=u*o)}var c=r.Animation.binarySearch(a,n,2),l=a[c-1],f=a[c],h=1-(n-f)/(a[c-2]-f);h=this.curves.getCurvePercent(c/2-1,h);for(var u=a[c+1]-l;u>180;)u-=360;for(;-180>u;)u+=360;for(u=s.data.rotation+(l+u*h)-s.rotation;u>180;)u-=360;for(;-180>u;)u+=360;s.rotation+=u*o}}},r.TranslateTimeline=function(e){this.curves=new r.Curves(e),this.frames=[],this.frames.length=3*e},r.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,n,r){e*=3,this.frames[e]=t,this.frames[e+1]=n,this.frames[e+2]=r},apply:function(e,t,n,i,o){var a=this.frames;if(!(n<a[0])){var s=e.bones[this.boneIndex];if(n>=a[a.length-3])return s.x+=(s.data.x+a[a.length-2]-s.x)*o,void(s.y+=(s.data.y+a[a.length-1]-s.y)*o);var u=r.Animation.binarySearch(a,n,3),c=a[u-2],l=a[u-1],f=a[u],h=1-(n-f)/(a[u+-3]-f);h=this.curves.getCurvePercent(u/3-1,h),s.x+=(s.data.x+c+(a[u+1]-c)*h-s.x)*o,s.y+=(s.data.y+l+(a[u+2]-l)*h-s.y)*o}}},r.ScaleTimeline=function(e){this.curves=new r.Curves(e),this.frames=[],this.frames.length=3*e},r.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,n,r){e*=3,this.frames[e]=t,this.frames[e+1]=n,this.frames[e+2]=r},apply:function(e,t,n,i,o){var a=this.frames;if(!(n<a[0])){var s=e.bones[this.boneIndex];if(n>=a[a.length-3])return s.scaleX+=(s.data.scaleX*a[a.length-2]-s.scaleX)*o,void(s.scaleY+=(s.data.scaleY*a[a.length-1]-s.scaleY)*o);var u=r.Animation.binarySearch(a,n,3),c=a[u-2],l=a[u-1],f=a[u],h=1-(n-f)/(a[u+-3]-f);h=this.curves.getCurvePercent(u/3-1,h),s.scaleX+=(s.data.scaleX*(c+(a[u+1]-c)*h)-s.scaleX)*o,s.scaleY+=(s.data.scaleY*(l+(a[u+2]-l)*h)-s.scaleY)*o}}},r.ColorTimeline=function(e){this.curves=new r.Curves(e),this.frames=[],this.frames.length=5*e},r.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(e,t,n,r,i,o){e*=5,this.frames[e]=t,this.frames[e+1]=n,this.frames[e+2]=r,this.frames[e+3]=i,this.frames[e+4]=o},apply:function(e,t,n,i,o){var a=this.frames;if(!(n<a[0])){var s,u,c,l;if(n>=a[a.length-5]){var f=a.length-1;s=a[f-3],u=a[f-2],c=a[f-1],l=a[f]}else{var h=r.Animation.binarySearch(a,n,5),p=a[h-4],d=a[h-3],m=a[h-2],v=a[h-1],g=a[h],y=1-(n-g)/(a[h-5]-g);y=this.curves.getCurvePercent(h/5-1,y),s=p+(a[h+1]-p)*y,u=d+(a[h+2]-d)*y,c=m+(a[h+3]-m)*y,l=v+(a[h+4]-v)*y}var b=e.slots[this.slotIndex];1>o?(b.r+=(s-b.r)*o,b.g+=(u-b.g)*o,b.b+=(c-b.b)*o,b.a+=(l-b.a)*o):(b.r=s,b.g=u,b.b=c,b.a=l)}}},r.AttachmentTimeline=function(e){this.curves=new r.Curves(e),this.frames=[],this.frames.length=e,this.attachmentNames=[],this.attachmentNames.length=e},r.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(e,t,n){this.frames[e]=t,this.attachmentNames[e]=n},apply:function(e,t,n,i,o){var a=this.frames;if(n<a[0])return void(t>n&&this.apply(e,t,Number.MAX_VALUE,null,0));t>n&&(t=-1);var s=n>=a[a.length-1]?a.length-1:r.Animation.binarySearch1(a,n)-1;if(!(a[s]<t)){var u=this.attachmentNames[s];e.slots[this.slotIndex].setAttachment(u?e.getAttachmentBySlotIndex(this.slotIndex,u):null)}}},r.EventTimeline=function(e){this.frames=[],this.frames.length=e,this.events=[],this.events.length=e},r.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(e,t,n){this.frames[e]=t,this.events[e]=n},apply:function(e,t,n,i,o){if(i){var a=this.frames,s=a.length;if(t>n)this.apply(e,t,Number.MAX_VALUE,i,o),t=-1;else if(t>=a[s-1])return;if(!(n<a[0])){var u;if(t<a[0])u=0;else{u=r.Animation.binarySearch1(a,t);for(var c=a[u];u>0&&a[u-1]==c;)u--}for(var l=this.events;s>u&&n>=a[u];u++)i.push(l[u])}}}},r.DrawOrderTimeline=function(e){this.frames=[],this.frames.length=e,this.drawOrders=[],this.drawOrders.length=e},r.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(e,t,n){this.frames[e]=t,this.drawOrders[e]=n},apply:function(e,t,n,i,o){var a=this.frames;if(!(n<a[0])){var s;s=n>=a[a.length-1]?a.length-1:r.Animation.binarySearch1(a,n)-1;var u=e.drawOrder,c=(e.slots,this.drawOrders[s]);if(c)for(var l=0,f=c.length;f>l;l++)u[l]=c[l]}}},r.FfdTimeline=function(e){this.curves=new r.Curves(e),this.frames=[],this.frames.length=e,this.frameVertices=[],this.frameVertices.length=e},r.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(e,t,n){this.frames[e]=t,this.frameVertices[e]=n},apply:function(e,t,n,i,o){var a=e.slots[this.slotIndex];if(a.attachment==this.attachment){var s=this.frames;if(!(n<s[0])){var u=this.frameVertices,c=u[0].length,l=a.attachmentVertices;if(l.length!=c&&(o=1),l.length=c,n>=s[s.length-1]){var f=u[s.length-1];if(1>o)for(var h=0;c>h;h++)l[h]+=(f[h]-l[h])*o;else for(var h=0;c>h;h++)l[h]=f[h]}else{var p=r.Animation.binarySearch1(s,n),d=s[p],m=1-(n-d)/(s[p-1]-d);m=this.curves.getCurvePercent(p-1,0>m?0:m>1?1:m);var v=u[p-1],g=u[p];if(1>o)for(var h=0;c>h;h++){var y=v[h];l[h]+=(y+(g[h]-y)*m-l[h])*o}else for(var h=0;c>h;h++){var y=v[h];l[h]=y+(g[h]-y)*m}}}}}},r.IkConstraintTimeline=function(e){this.curves=new r.Curves(e),this.frames=[],this.frames.length=3*e},r.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,n,r){e*=3,this.frames[e]=t,this.frames[e+1]=n,this.frames[e+2]=r},apply:function(e,t,n,i,o){var a=this.frames;if(!(n<a[0])){var s=e.ikConstraints[this.ikConstraintIndex];if(n>=a[a.length-3])return s.mix+=(a[a.length-2]-s.mix)*o,void(s.bendDirection=a[a.length-1]);var u=r.Animation.binarySearch(a,n,3),c=a[u+-2],l=a[u],f=1-(n-l)/(a[u+-3]-l);f=this.curves.getCurvePercent(u/3-1,f);var h=c+(a[u+1]-c)*f;s.mix+=(h-s.mix)*o,s.bendDirection=a[u+-1]}}},r.FlipXTimeline=function(e){this.curves=new r.Curves(e),this.frames=[],this.frames.length=2*e},r.FlipXTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t,n){e*=2,this.frames[e]=t,this.frames[e+1]=n?1:0},apply:function(e,t,n,i,o){var a=this.frames;if(n<a[0])return void(t>n&&this.apply(e,t,Number.MAX_VALUE,null,0));t>n&&(t=-1);var s=(n>=a[a.length-2]?a.length:r.Animation.binarySearch(a,n,2))-2;a[s]<t||(e.bones[this.boneIndex].flipX=0!=a[s+1])}},r.FlipYTimeline=function(e){this.curves=new r.Curves(e),this.frames=[],this.frames.length=2*e},r.FlipYTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t,n){e*=2,this.frames[e]=t,this.frames[e+1]=n?1:0},apply:function(e,t,n,i,o){var a=this.frames;if(n<a[0])return void(t>n&&this.apply(e,t,Number.MAX_VALUE,null,0));t>n&&(t=-1);var s=(n>=a[a.length-2]?a.length:r.Animation.binarySearch(a,n,2))-2;a[s]<t||(e.bones[this.boneIndex].flipY=0!=a[s+1])}},r.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[]},r.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(e){for(var t=this.bones,n=0,r=t.length;r>n;n++)if(t[n].name==e)return t[n];return null},findBoneIndex:function(e){for(var t=this.bones,n=0,r=t.length;r>n;n++)if(t[n].name==e)return n;return-1},findSlot:function(e){for(var t=this.slots,n=0,r=t.length;r>n;n++)if(t[n].name==e)return slot[n];return null},findSlotIndex:function(e){for(var t=this.slots,n=0,r=t.length;r>n;n++)if(t[n].name==e)return n;return-1},findSkin:function(e){for(var t=this.skins,n=0,r=t.length;r>n;n++)if(t[n].name==e)return t[n];return null},findEvent:function(e){for(var t=this.events,n=0,r=t.length;r>n;n++)if(t[n].name==e)return t[n];return null},findAnimation:function(e){for(var t=this.animations,n=0,r=t.length;r>n;n++)if(t[n].name==e)return t[n];return null},findIkConstraint:function(e){for(var t=this.ikConstraints,n=0,r=t.length;r>n;n++)if(t[n].name==e)return t[n];return null}},r.Skeleton=function(e){this.data=e,this.bones=[];for(var t=0,n=e.bones.length;n>t;t++){var i=e.bones[t],o=i.parent?this.bones[e.bones.indexOf(i.parent)]:null;this.bones.push(new r.Bone(i,this,o))}this.slots=[],this.drawOrder=[];for(var t=0,n=e.slots.length;n>t;t++){var a=e.slots[t],s=this.bones[e.bones.indexOf(a.boneData)],u=new r.Slot(a,s);this.slots.push(u),this.drawOrder.push(t)}this.ikConstraints=[];for(var t=0,n=e.ikConstraints.length;n>t;t++)this.ikConstraints.push(new r.IkConstraint(e.ikConstraints[t],this));this.boneCache=[],this.updateCache()},r.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){var e=this.ikConstraints,t=e.length,n=t+1,r=this.boneCache;r.length>n&&(r.length=n);for(var i=0,o=r.length;o>i;i++)r[i].length=0;for(;r.length<n;)r[r.length]=[];var a=r[0],s=this.bones;e:for(var i=0,o=s.length;o>i;i++){var u=s[i],c=u;do{for(var l=0;t>l;l++)for(var f=e[l],h=f.bones[0],p=f.bones[f.bones.length-1];;){if(c==p){r[l].push(u),r[l+1].push(u);continue e}if(p==h)break;p=p.parent}c=c.parent}while(c);a[a.length]=u}},updateWorldTransform:function(){for(var e=this.bones,t=0,n=e.length;n>t;t++){var r=e[t];r.rotationIK=r.rotation}for(var t=0,i=this.boneCache.length-1;;){for(var o=this.boneCache[t],a=0,s=o.length;s>a;a++)o[a].updateWorldTransform();if(t==i)break;this.ikConstraints[t].apply(),t++}},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var e=this.bones,t=0,n=e.length;n>t;t++)e[t].setToSetupPose();for(var r=this.ikConstraints,t=0,n=r.length;n>t;t++){var i=r[t];i.bendDirection=i.data.bendDirection,i.mix=i.data.mix}},setSlotsToSetupPose:function(){for(var e=this.slots,t=0,n=e.length;n>t;t++)e[t].setToSetupPose(t);this.resetDrawOrder()},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(e){for(var t=this.bones,n=0,r=t.length;r>n;n++)if(t[n].data.name==e)return t[n];return null},findBoneIndex:function(e){for(var t=this.bones,n=0,r=t.length;r>n;n++)if(t[n].data.name==e)return n;return-1},findSlot:function(e){for(var t=this.slots,n=0,r=t.length;r>n;n++)if(t[n].data.name==e)return t[n];return null},findSlotIndex:function(e){for(var t=this.slots,n=0,r=t.length;r>n;n++)if(t[n].data.name==e)return n;return-1},setSkinByName:function(e){var t=this.data.findSkin(e);if(!t)throw"Skin not found: "+e;this.setSkin(t)},setSkin:function(e){if(e)if(this.skin)e._attachAll(this,this.skin);else for(var t=this.slots,n=0,r=t.length;r>n;n++){var i=t[n],o=i.data.attachmentName;if(o){var a=e.getAttachment(n,o);a&&i.setAttachment(a)}}this.skin=e},getAttachmentBySlotName:function(e,t){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(e),t)},getAttachmentBySlotIndex:function(e,t){if(this.skin){var n=this.skin.getAttachment(e,t);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null},setAttachment:function(e,t){for(var n=this.slots,r=0,i=n.length;i>r;r++){var o=n[r];if(o.data.name==e){var a=null;if(t&&(a=this.getAttachmentBySlotIndex(r,t),!a))throw"Attachment not found: "+t+", for slot: "+e;return void o.setAttachment(a)}}throw"Slot not found: "+e},findIkConstraint:function(e){for(var t=this.ikConstraints,n=0,r=t.length;r>n;n++)if(t[n].data.name==e)return t[n];return null},update:function(e){this.time+=e},resetDrawOrder:function(){for(var e=0,t=this.drawOrder.length;t>e;e++)this.drawOrder[e]=e}},r.EventData=function(e){this.name=e},r.EventData.prototype={intValue:0,floatValue:0,stringValue:null},r.Event=function(e){this.data=e},r.Event.prototype={intValue:0,floatValue:0,stringValue:null},r.AttachmentType={region:0,boundingbox:1,mesh:2,skinnedmesh:3},r.RegionAttachment=function(e){this.name=e,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},r.RegionAttachment.prototype={type:r.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(e,t,n,r,i){var o=this.uvs;i?(o[2]=e,o[3]=r,o[4]=e,o[5]=t,o[6]=n,o[7]=t,o[0]=n,o[1]=r):(o[0]=e,o[1]=r,o[2]=e,o[3]=t,o[4]=n,o[5]=t,o[6]=n,o[7]=r)},updateOffset:function(){var e=this.width/this.regionOriginalWidth*this.scaleX,t=this.height/this.regionOriginalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.regionOffsetX*e,i=-this.height/2*this.scaleY+this.regionOffsetY*t,o=n+this.regionWidth*e,a=i+this.regionHeight*t,s=this.rotation*r.degRad,u=Math.cos(s),c=Math.sin(s),l=n*u+this.x,f=n*c,h=i*u+this.y,p=i*c,d=o*u+this.x,m=o*c,v=a*u+this.y,g=a*c,y=this.offset;y[0]=l-p,y[1]=h+f,y[2]=l-g,y[3]=v+f,y[4]=d-g,y[5]=v+m,y[6]=d-p,y[7]=h+m},computeVertices:function(e,t,n,r){e+=n.worldX,t+=n.worldY;var i=n.m00,o=n.m01,a=n.m10,s=n.m11,u=this.offset;r[0]=u[0]*i+u[1]*o+e,r[1]=u[0]*a+u[1]*s+t,r[2]=u[2]*i+u[3]*o+e,r[3]=u[2]*a+u[3]*s+t,r[4]=u[4]*i+u[5]*o+e,r[5]=u[4]*a+u[5]*s+t,r[6]=u[6]*i+u[7]*o+e,r[7]=u[6]*a+u[7]*s+t}},r.MeshAttachment=function(e){this.name=e},r.MeshAttachment.prototype={type:r.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var e=this.regionU2-this.regionU,t=this.regionV2-this.regionV,n=this.regionUVs.length;if(this.uvs&&this.uvs.length==n||(this.uvs=new r.Float32Array(n)),this.regionRotate)for(var i=0;n>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i+1]*e,this.uvs[i+1]=this.regionV+t-this.regionUVs[i]*t;else for(var i=0;n>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i]*e,this.uvs[i+1]=this.regionV+this.regionUVs[i+1]*t},computeWorldVertices:function(e,t,n,r){var i=n.bone;e+=i.worldX,t+=i.worldY;var o=i.m00,a=i.m01,s=i.m10,u=i.m11,c=this.vertices,l=c.length;n.attachmentVertices.length==l&&(c=n.attachmentVertices);for(var f=0;l>f;f+=2){var h=c[f],p=c[f+1];r[f]=h*o+p*a+e,r[f+1]=h*s+p*u+t}}},r.SkinnedMeshAttachment=function(e){this.name=e},r.SkinnedMeshAttachment.prototype={type:r.AttachmentType.skinnedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(e,t,n,i,o){var a=this.regionU2-this.regionU,s=this.regionV2-this.regionV,u=this.regionUVs.length;if(this.uvs&&this.uvs.length==u||(this.uvs=new r.Float32Array(u)),this.regionRotate)for(var c=0;u>c;c+=2)this.uvs[c]=this.regionU+this.regionUVs[c+1]*a,this.uvs[c+1]=this.regionV+s-this.regionUVs[c]*s;else for(var c=0;u>c;c+=2)this.uvs[c]=this.regionU+this.regionUVs[c]*a,this.uvs[c+1]=this.regionV+this.regionUVs[c+1]*s},computeWorldVertices:function(e,t,n,r){var i,o,a,s,u,c,l,f=n.bone.skeleton.bones,h=this.weights,p=this.bones,d=0,m=0,v=0,g=0,y=p.length;if(n.attachmentVertices.length)for(var b=n.attachmentVertices;y>m;d+=2){for(o=0,a=0,i=p[m++]+m;i>m;m++,v+=3,g+=2)s=f[p[m]],u=h[v]+b[g],c=h[v+1]+b[g+1],l=h[v+2],o+=(u*s.m00+c*s.m01+s.worldX)*l,a+=(u*s.m10+c*s.m11+s.worldY)*l;r[d]=o+e,r[d+1]=a+t}else for(;y>m;d+=2){for(o=0,a=0,i=p[m++]+m;i>m;m++,v+=3)s=f[p[m]],u=h[v],c=h[v+1],l=h[v+2],o+=(u*s.m00+c*s.m01+s.worldX)*l,a+=(u*s.m10+c*s.m11+s.worldY)*l;r[d]=o+e,r[d+1]=a+t}}},r.BoundingBoxAttachment=function(e){this.name=e,this.vertices=[]},r.BoundingBoxAttachment.prototype={type:r.AttachmentType.boundingbox,computeWorldVertices:function(e,t,n,r){e+=n.worldX,t+=n.worldY;for(var i=n.m00,o=n.m01,a=n.m10,s=n.m11,u=this.vertices,c=0,l=u.length;l>c;c+=2){var f=u[c],h=u[c+1];r[c]=f*i+h*o+e,r[c+1]=f*a+h*s+t}}},r.AnimationStateData=function(e){this.skeletonData=e,this.animationToMixTime={}},r.AnimationStateData.prototype={defaultMix:0,setMixByName:function(e,t,n){var r=this.skeletonData.findAnimation(e);if(!r)throw"Animation not found: "+e;var i=this.skeletonData.findAnimation(t);if(!i)throw"Animation not found: "+t;this.setMix(r,i,n)},setMix:function(e,t,n){this.animationToMixTime[e.name+":"+t.name]=n},getMix:function(e,t){var n=e.name+":"+t.name;return this.animationToMixTime.hasOwnProperty(n)?this.animationToMixTime[n]:this.defaultMix}},r.TrackEntry=function(){},r.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},r.AnimationState=function(e){this.data=e,this.tracks=[],this.events=[]},r.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(e){e*=this.timeScale;for(var t=0;t<this.tracks.length;t++){var n=this.tracks[t];if(n){if(n.time+=e*n.timeScale,n.previous){var r=e*n.previous.timeScale;n.previous.time+=r,n.mixTime+=r}var i=n.next;i?(i.time=n.lastTime-i.delay,i.time>=0&&this.setCurrent(t,i)):!n.loop&&n.lastTime>=n.endTime&&this.clearTrack(t)}}},apply:function(e){e.resetDrawOrder();for(var t=0;t<this.tracks.length;t++){var n=this.tracks[t];if(n){this.events.length=0;var r=n.time,i=n.lastTime,o=n.endTime,a=n.loop;!a&&r>o&&(r=o);var s=n.previous;if(s){var u=s.time;!s.loop&&u>s.endTime&&(u=s.endTime),s.animation.apply(e,u,u,s.loop,null);var c=n.mixTime/n.mixDuration*n.mix;c>=1&&(c=1,n.previous=null),n.animation.mix(e,n.lastTime,r,a,this.events,c)}else 1==n.mix?n.animation.apply(e,n.lastTime,r,a,this.events):n.animation.mix(e,n.lastTime,r,a,this.events,n.mix);for(var l=0,f=this.events.length;f>l;l++){var h=this.events[l];n.onEvent&&n.onEvent(t,h),this.onEvent&&this.onEvent(t,h)}if(a?i%o>r%o:o>i&&r>=o){var p=Math.floor(r/o);n.onComplete&&n.onComplete(t,p),this.onComplete&&this.onComplete(t,p)}n.lastTime=n.time}}},clearTracks:function(){for(var e=0,t=this.tracks.length;t>e;e++)this.clearTrack(e);this.tracks.length=0},clearTrack:function(e){if(!(e>=this.tracks.length)){var t=this.tracks[e];t&&(t.onEnd&&t.onEnd(e),this.onEnd&&this.onEnd(e),this.tracks[e]=null)}},_expandToIndex:function(e){if(e<this.tracks.length)return this.tracks[e];for(;e>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(e,t){var n=this._expandToIndex(e);if(n){var r=n.previous;n.previous=null,n.onEnd&&n.onEnd(e),this.onEnd&&this.onEnd(e),t.mixDuration=this.data.getMix(n.animation,t.animation),t.mixDuration>0&&(t.mixTime=0,r&&n.mixTime/n.mixDuration<.5?t.previous=r:t.previous=n)}this.tracks[e]=t,t.onStart&&t.onStart(e),this.onStart&&this.onStart(e)},setAnimationByName:function(e,t,n){var r=this.data.skeletonData.findAnimation(t);if(!r)throw"Animation not found: "+t;return this.setAnimation(e,r,n)},setAnimation:function(e,t,n){var i=new r.TrackEntry;return i.animation=t,i.loop=n,i.endTime=t.duration,this.setCurrent(e,i),i},addAnimationByName:function(e,t,n,r){var i=this.data.skeletonData.findAnimation(t);if(!i)throw"Animation not found: "+t;return this.addAnimation(e,i,n,r)},addAnimation:function(e,t,n,i){var o=new r.TrackEntry;o.animation=t,o.loop=n,o.endTime=t.duration;var a=this._expandToIndex(e);if(a){for(;a.next;)a=a.next;a.next=o}else this.tracks[e]=o;return 0>=i&&(a?i+=a.endTime-this.data.getMix(a.animation,t):i=0),o.delay=i,o},getCurrent:function(e){return e>=this.tracks.length?null:this.tracks[e]}},r.SkeletonJson=function(e){this.attachmentLoader=e},r.SkeletonJson.prototype={scale:1,readSkeletonData:function(e,t){var n=new r.SkeletonData;n.name=t;var i=e.skeleton;i&&(n.hash=i.hash,n.version=i.spine,
n.width=i.width||0,n.height=i.height||0);for(var o=e.bones,a=0,s=o.length;s>a;a++){var u=o[a],c=null;if(u.parent&&(c=n.findBone(u.parent),!c))throw"Parent bone not found: "+u.parent;var l=new r.BoneData(u.name,c);l.length=(u.length||0)*this.scale,l.x=(u.x||0)*this.scale,l.y=(u.y||0)*this.scale,l.rotation=u.rotation||0,l.scaleX=u.hasOwnProperty("scaleX")?u.scaleX:1,l.scaleY=u.hasOwnProperty("scaleY")?u.scaleY:1,l.inheritScale=u.hasOwnProperty("inheritScale")?u.inheritScale:!0,l.inheritRotation=u.hasOwnProperty("inheritRotation")?u.inheritRotation:!0,n.bones.push(l)}var f=e.ik;if(f)for(var a=0,s=f.length;s>a;a++){for(var h=f[a],p=new r.IkConstraintData(h.name),o=h.bones,d=0,m=o.length;m>d;d++){var v=n.findBone(o[d]);if(!v)throw"IK bone not found: "+o[d];p.bones.push(v)}if(p.target=n.findBone(h.target),!p.target)throw"Target bone not found: "+h.target;p.bendDirection=!h.hasOwnProperty("bendPositive")||h.bendPositive?1:-1,p.mix=h.hasOwnProperty("mix")?h.mix:1,n.ikConstraints.push(p)}for(var g=e.slots,a=0,s=g.length;s>a;a++){var y=g[a],l=n.findBone(y.bone);if(!l)throw"Slot bone not found: "+y.bone;var b=new r.SlotData(y.name,l),x=y.color;x&&(b.r=this.toColor(x,0),b.g=this.toColor(x,1),b.b=this.toColor(x,2),b.a=this.toColor(x,3)),b.attachmentName=y.attachment,b.additiveBlending=y.additive&&"true"==y.additive,n.slots.push(b)}var w=e.skins;for(var _ in w)if(w.hasOwnProperty(_)){var E=w[_],T=new r.Skin(_);for(var C in E)if(E.hasOwnProperty(C)){var S=n.findSlotIndex(C),A=E[C];for(var k in A)if(A.hasOwnProperty(k)){var O=this.readAttachment(T,k,A[k]);O&&T.addAttachment(S,k,O)}}n.skins.push(T),"default"==T.name&&(n.defaultSkin=T)}var M=e.events;for(var N in M)if(M.hasOwnProperty(N)){var j=M[N],R=new r.EventData(N);R.intValue=j["int"]||0,R.floatValue=j["float"]||0,R.stringValue=j.string||null,n.events.push(R)}var P=e.animations;for(var D in P)P.hasOwnProperty(D)&&this.readAnimation(D,P[D],n);return n},readAttachment:function(e,t,n){t=n.name||t;var i=r.AttachmentType[n.type||"region"],o=n.path||t,a=this.scale;if(i==r.AttachmentType.region){var s=this.attachmentLoader.newRegionAttachment(e,t,o);if(!s)return null;s.path=o,s.x=(n.x||0)*a,s.y=(n.y||0)*a,s.scaleX=n.hasOwnProperty("scaleX")?n.scaleX:1,s.scaleY=n.hasOwnProperty("scaleY")?n.scaleY:1,s.rotation=n.rotation||0,s.width=(n.width||0)*a,s.height=(n.height||0)*a;var u=n.color;return u&&(s.r=this.toColor(u,0),s.g=this.toColor(u,1),s.b=this.toColor(u,2),s.a=this.toColor(u,3)),s.updateOffset(),s}if(i==r.AttachmentType.mesh){var c=this.attachmentLoader.newMeshAttachment(e,t,o);return c?(c.path=o,c.vertices=this.getFloatArray(n,"vertices",a),c.triangles=this.getIntArray(n,"triangles"),c.regionUVs=this.getFloatArray(n,"uvs",1),c.updateUVs(),u=n.color,u&&(c.r=this.toColor(u,0),c.g=this.toColor(u,1),c.b=this.toColor(u,2),c.a=this.toColor(u,3)),c.hullLength=2*(n.hull||0),n.edges&&(c.edges=this.getIntArray(n,"edges")),c.width=(n.width||0)*a,c.height=(n.height||0)*a,c):null}if(i==r.AttachmentType.skinnedmesh){var c=this.attachmentLoader.newSkinnedMeshAttachment(e,t,o);if(!c)return null;c.path=o;for(var l=this.getFloatArray(n,"uvs",1),f=this.getFloatArray(n,"vertices",1),h=[],p=[],d=0,m=f.length;m>d;){var v=0|f[d++];p[p.length]=v;for(var g=d+4*v;g>d;)p[p.length]=f[d],h[h.length]=f[d+1]*a,h[h.length]=f[d+2]*a,h[h.length]=f[d+3],d+=4}return c.bones=p,c.weights=h,c.triangles=this.getIntArray(n,"triangles"),c.regionUVs=l,c.updateUVs(),u=n.color,u&&(c.r=this.toColor(u,0),c.g=this.toColor(u,1),c.b=this.toColor(u,2),c.a=this.toColor(u,3)),c.hullLength=2*(n.hull||0),n.edges&&(c.edges=this.getIntArray(n,"edges")),c.width=(n.width||0)*a,c.height=(n.height||0)*a,c}if(i==r.AttachmentType.boundingbox){for(var y=this.attachmentLoader.newBoundingBoxAttachment(e,t),f=n.vertices,d=0,m=f.length;m>d;d++)y.vertices.push(f[d]*a);return y}throw"Unknown attachment type: "+i},readAnimation:function(e,t,n){var i=[],o=0,a=t.slots;for(var s in a)if(a.hasOwnProperty(s)){var u=a[s],c=n.findSlotIndex(s);for(var l in u)if(u.hasOwnProperty(l)){var f=u[l];if("color"==l){var h=new r.ColorTimeline(f.length);h.slotIndex=c;for(var p=0,d=0,m=f.length;m>d;d++){var v=f[d],g=v.color,y=this.toColor(g,0),b=this.toColor(g,1),x=this.toColor(g,2),w=this.toColor(g,3);h.setFrame(p,v.time,y,b,x,w),this.readCurve(h,p,v),p++}i.push(h),o=Math.max(o,h.frames[5*h.getFrameCount()-5])}else{if("attachment"!=l)throw"Invalid timeline type for a slot: "+l+" ("+s+")";var h=new r.AttachmentTimeline(f.length);h.slotIndex=c;for(var p=0,d=0,m=f.length;m>d;d++){var v=f[d];h.setFrame(p++,v.time,v.name)}i.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}}}var _=t.bones;for(var E in _)if(_.hasOwnProperty(E)){var T=n.findBoneIndex(E);if(-1==T)throw"Bone not found: "+E;var C=_[E];for(var l in C)if(C.hasOwnProperty(l)){var f=C[l];if("rotate"==l){var h=new r.RotateTimeline(f.length);h.boneIndex=T;for(var p=0,d=0,m=f.length;m>d;d++){var v=f[d];h.setFrame(p,v.time,v.angle),this.readCurve(h,p,v),p++}i.push(h),o=Math.max(o,h.frames[2*h.getFrameCount()-2])}else if("translate"==l||"scale"==l){var h,S=1;"scale"==l?h=new r.ScaleTimeline(f.length):(h=new r.TranslateTimeline(f.length),S=this.scale),h.boneIndex=T;for(var p=0,d=0,m=f.length;m>d;d++){var v=f[d],A=(v.x||0)*S,k=(v.y||0)*S;h.setFrame(p,v.time,A,k),this.readCurve(h,p,v),p++}i.push(h),o=Math.max(o,h.frames[3*h.getFrameCount()-3])}else{if("flipX"!=l&&"flipY"!=l)throw"Invalid timeline type for a bone: "+l+" ("+E+")";var A="flipX"==l,h=A?new r.FlipXTimeline(f.length):new r.FlipYTimeline(f.length);h.boneIndex=T;for(var O=A?"x":"y",p=0,d=0,m=f.length;m>d;d++){var v=f[d];h.setFrame(p,v.time,v[O]||!1),p++}i.push(h),o=Math.max(o,h.frames[2*h.getFrameCount()-2])}}}var M=t.ik;for(var N in M)if(M.hasOwnProperty(N)){var j=n.findIkConstraint(N),f=M[N],h=new r.IkConstraintTimeline(f.length);h.ikConstraintIndex=n.ikConstraints.indexOf(j);for(var p=0,d=0,m=f.length;m>d;d++){var v=f[d],R=v.hasOwnProperty("mix")?v.mix:1,P=!v.hasOwnProperty("bendPositive")||v.bendPositive?1:-1;h.setFrame(p,v.time,R,P),this.readCurve(h,p,v),p++}i.push(h),o=Math.max(o,h.frames[3*h.getFrameCount()-3])}var D=t.ffd;for(var I in D){var L=n.findSkin(I),u=D[I];for(s in u){var c=n.findSlotIndex(s),F=u[s];for(var B in F){var f=F[B],h=new r.FfdTimeline(f.length),U=L.getAttachment(c,B);if(!U)throw"FFD attachment not found: "+B;h.slotIndex=c,h.attachment=U;var q,V=U.type==r.AttachmentType.mesh;q=V?U.vertices.length:U.weights.length/3*2;for(var p=0,d=0,m=f.length;m>d;d++){var W,v=f[d];if(v.vertices){var G=v.vertices,W=[];W.length=q;var H=v.offset||0,z=G.length;if(1==this.scale)for(var Y=0;z>Y;Y++)W[Y+H]=G[Y];else for(var Y=0;z>Y;Y++)W[Y+H]=G[Y]*this.scale;if(V)for(var X=U.vertices,Y=0,z=W.length;z>Y;Y++)W[Y]+=X[Y]}else V?W=U.vertices:(W=[],W.length=q);h.setFrame(p,v.time,W),this.readCurve(h,p,v),p++}i[i.length]=h,o=Math.max(o,h.frames[h.getFrameCount()-1])}}}var $=t.drawOrder;if($||($=t.draworder),$){for(var h=new r.DrawOrderTimeline($.length),J=n.slots.length,p=0,d=0,m=$.length;m>d;d++){var K=$[d],Q=null;if(K.offsets){Q=[],Q.length=J;for(var Y=J-1;Y>=0;Y--)Q[Y]=-1;var Z=K.offsets,ee=[];ee.length=J-Z.length;for(var te=0,ne=0,Y=0,z=Z.length;z>Y;Y++){var re=Z[Y],c=n.findSlotIndex(re.slot);if(-1==c)throw"Slot not found: "+re.slot;for(;te!=c;)ee[ne++]=te++;Q[te+re.offset]=te++}for(;J>te;)ee[ne++]=te++;for(var Y=J-1;Y>=0;Y--)-1==Q[Y]&&(Q[Y]=ee[--ne])}h.setFrame(p++,K.time,Q)}i.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}var ie=t.events;if(ie){for(var h=new r.EventTimeline(ie.length),p=0,d=0,m=ie.length;m>d;d++){var oe=ie[d],ae=n.findEvent(oe.name);if(!ae)throw"Event not found: "+oe.name;var se=new r.Event(ae);se.intValue=oe.hasOwnProperty("int")?oe["int"]:ae.intValue,se.floatValue=oe.hasOwnProperty("float")?oe["float"]:ae.floatValue,se.stringValue=oe.hasOwnProperty("string")?oe.string:ae.stringValue,h.setFrame(p++,oe.time,se)}i.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}n.animations.push(new r.Animation(e,i,o))},readCurve:function(e,t,n){var r=n.curve;r?"stepped"==r?e.curves.setStepped(t):r instanceof Array&&e.curves.setCurve(t,r[0],r[1],r[2],r[3]):e.curves.setLinear(t)},toColor:function(e,t){if(8!=e.length)throw"Color hexidecimal length must be 8, recieved: "+e;return parseInt(e.substring(2*t,2*t+2),16)/255},getFloatArray:function(e,t,n){var i=e[t],o=new r.Float32Array(i.length),a=0,s=i.length;if(1==n)for(;s>a;a++)o[a]=i[a];else for(;s>a;a++)o[a]=i[a]*n;return o},getIntArray:function(e,t){for(var n=e[t],i=new r.Uint16Array(n.length),o=0,a=n.length;a>o;o++)i[o]=0|n[o];return i}},r.Atlas=function(e,t){this.textureLoader=t,this.pages=[],this.regions=[];var n=new r.AtlasReader(e),i=[];i.length=4;for(var o=null;;){var a=n.readLine();if(null===a)break;if(a=n.trim(a),a.length)if(o){var s=new r.AtlasRegion;s.name=a,s.page=o,s.rotate="true"==n.readValue(),n.readTuple(i);var u=parseInt(i[0]),c=parseInt(i[1]);n.readTuple(i);var l=parseInt(i[0]),f=parseInt(i[1]);s.u=u/o.width,s.v=c/o.height,s.rotate?(s.u2=(u+f)/o.width,s.v2=(c+l)/o.height):(s.u2=(u+l)/o.width,s.v2=(c+f)/o.height),s.x=u,s.y=c,s.width=Math.abs(l),s.height=Math.abs(f),4==n.readTuple(i)&&(s.splits=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],4==n.readTuple(i)&&(s.pads=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],n.readTuple(i))),s.originalWidth=parseInt(i[0]),s.originalHeight=parseInt(i[1]),n.readTuple(i),s.offsetX=parseInt(i[0]),s.offsetY=parseInt(i[1]),s.index=parseInt(n.readValue()),this.regions.push(s)}else{o=new r.AtlasPage,o.name=a,2==n.readTuple(i)&&(o.width=parseInt(i[0]),o.height=parseInt(i[1]),n.readTuple(i)),o.format=r.Atlas.Format[i[0]],n.readTuple(i),o.minFilter=r.Atlas.TextureFilter[i[0]],o.magFilter=r.Atlas.TextureFilter[i[1]];var h=n.readValue();o.uWrap=r.Atlas.TextureWrap.clampToEdge,o.vWrap=r.Atlas.TextureWrap.clampToEdge,"x"==h?o.uWrap=r.Atlas.TextureWrap.repeat:"y"==h?o.vWrap=r.Atlas.TextureWrap.repeat:"xy"==h&&(o.uWrap=o.vWrap=r.Atlas.TextureWrap.repeat),t.load(o,a,this),this.pages.push(o)}else o=null}},r.Atlas.prototype={findRegion:function(e){for(var t=this.regions,n=0,r=t.length;r>n;n++)if(t[n].name==e)return t[n];return null},dispose:function(){for(var e=this.pages,t=0,n=e.length;n>t;t++)this.textureLoader.unload(e[t].rendererObject)},updateUVs:function(e){for(var t=this.regions,n=0,r=t.length;r>n;n++){var i=t[n];i.page==e&&(i.u=i.x/e.width,i.v=i.y/e.height,i.rotate?(i.u2=(i.x+i.height)/e.width,i.v2=(i.y+i.width)/e.height):(i.u2=(i.x+i.width)/e.width,i.v2=(i.y+i.height)/e.height))}}},r.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},r.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},r.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},r.AtlasPage=function(){},r.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},r.AtlasRegion=function(){},r.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},r.AtlasReader=function(e){this.lines=e.split(/\r\n|\r|\n/)},r.AtlasReader.prototype={index:0,trim:function(e){return e.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var e=this.readLine(),t=e.indexOf(":");if(-1==t)throw"Invalid line: "+e;return this.trim(e.substring(t+1))},readTuple:function(e){var t=this.readLine(),n=t.indexOf(":");if(-1==n)throw"Invalid line: "+t;for(var r=0,i=n+1;3>r;r++){var o=t.indexOf(",",i);if(-1==o)break;e[r]=this.trim(t.substr(i,o-i)),i=o+1}return e[r]=this.trim(t.substring(i)),r+1}},r.AtlasAttachmentLoader=function(e){this.atlas=e},r.AtlasAttachmentLoader.prototype={newRegionAttachment:function(e,t,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (region attachment: "+t+")";var o=new r.RegionAttachment(t);return o.rendererObject=i,o.setUVs(i.u,i.v,i.u2,i.v2,i.rotate),o.regionOffsetX=i.offsetX,o.regionOffsetY=i.offsetY,o.regionWidth=i.width,o.regionHeight=i.height,o.regionOriginalWidth=i.originalWidth,o.regionOriginalHeight=i.originalHeight,o},newMeshAttachment:function(e,t,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (mesh attachment: "+t+")";var o=new r.MeshAttachment(t);return o.rendererObject=i,o.regionU=i.u,o.regionV=i.v,o.regionU2=i.u2,o.regionV2=i.v2,o.regionRotate=i.rotate,o.regionOffsetX=i.offsetX,o.regionOffsetY=i.offsetY,o.regionWidth=i.width,o.regionHeight=i.height,o.regionOriginalWidth=i.originalWidth,o.regionOriginalHeight=i.originalHeight,o},newSkinnedMeshAttachment:function(e,t,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (skinned mesh attachment: "+t+")";var o=new r.SkinnedMeshAttachment(t);return o.rendererObject=i,o.regionU=i.u,o.regionV=i.v,o.regionU2=i.u2,o.regionV2=i.v2,o.regionRotate=i.rotate,o.regionOffsetX=i.offsetX,o.regionOffsetY=i.offsetY,o.regionWidth=i.width,o.regionHeight=i.height,o.regionOriginalWidth=i.originalWidth,o.regionOriginalHeight=i.originalHeight,o},newBoundingBoxAttachment:function(e,t){return new r.BoundingBoxAttachment(t)}},r.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},r.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(e,t){var n=e.slots,i=n.length,o=e.x,a=e.y,s=this.boundingBoxes,u=this.polygonPool,c=this.polygons;s.length=0;for(var l=0,f=c.length;f>l;l++)u.push(c[l]);c.length=0;for(var l=0;i>l;l++){var h=n[l],p=h.attachment;if(p.type==r.AttachmentType.boundingbox){s.push(p);var d,m=u.length;m>0?(d=u[m-1],u.splice(m-1,1)):d=[],c.push(d),d.length=p.vertices.length,p.computeWorldVertices(o,a,h.bone,d)}}t&&this.aabbCompute()},aabbCompute:function(){for(var e=this.polygons,t=Number.MAX_VALUE,n=Number.MAX_VALUE,r=Number.MIN_VALUE,i=Number.MIN_VALUE,o=0,a=e.length;a>o;o++)for(var s=e[o],u=0,c=s.length;c>u;u+=2){var l=s[u],f=s[u+1];t=Math.min(t,l),n=Math.min(n,f),r=Math.max(r,l),i=Math.max(i,f)}this.minX=t,this.minY=n,this.maxX=r,this.maxY=i},aabbContainsPoint:function(e,t){return e>=this.minX&&e<=this.maxX&&t>=this.minY&&t<=this.maxY},aabbIntersectsSegment:function(e,t,n,r){var i=this.minX,o=this.minY,a=this.maxX,s=this.maxY;if(i>=e&&i>=n||o>=t&&o>=r||e>=a&&n>=a||t>=s&&r>=s)return!1;var u=(r-t)/(n-e),c=u*(i-e)+t;if(c>o&&s>c)return!0;if(c=u*(a-e)+t,c>o&&s>c)return!0;var l=(o-t)/u+e;return l>i&&a>l?!0:(l=(s-t)/u+e,l>i&&a>l?!0:!1)},aabbIntersectsSkeleton:function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},containsPoint:function(e,t){for(var n=this.polygons,r=0,i=n.length;i>r;r++)if(this.polygonContainsPoint(n[r],e,t))return this.boundingBoxes[r];return null},intersectsSegment:function(e,t,n,r){for(var i=this.polygons,o=0,a=i.length;a>o;o++)if(i[o].intersectsSegment(e,t,n,r))return this.boundingBoxes[o];return null},polygonContainsPoint:function(e,t,n){for(var r=e.length,i=r-2,o=!1,a=0;r>a;a+=2){var s=e[a+1],u=e[i+1];if(n>s&&u>=n||n>u&&s>=n){var c=e[a];c+(n-s)/(u-s)*(e[i]-c)<t&&(o=!o)}i=a}return o},polygonIntersectsSegment:function(e,t,n,r,i){for(var o=e.length,a=t-r,s=n-i,u=t*i-n*r,c=e[o-2],l=e[o-1],f=0;o>f;f+=2){var h=e[f],p=e[f+1],d=c*p-l*h,m=c-h,v=l-p,g=a*v-s*m,y=(u*m-a*d)/g;if((y>=c&&h>=y||y>=h&&c>=y)&&(y>=t&&r>=y||y>=r&&t>=y)){var b=(u*v-s*d)/g;if((b>=l&&p>=b||b>=p&&l>=b)&&(b>=n&&i>=b||b>=i&&n>=b))return!0}c=h,l=p}return!1},getPolygon:function(e){var t=this.boundingBoxes.indexOf(e);return-1==t?null:this.polygons[t]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},r.Bone.yDown=!0,n.AnimCache={},n.SpineTextureLoader=function(e,t){n.EventTarget.call(this),this.basePath=e,this.crossorigin=t,this.loadingCount=0},n.SpineTextureLoader.prototype=n.SpineTextureLoader,n.SpineTextureLoader.prototype.load=function(e,t){if(e.rendererObject=n.BaseTexture.fromImage(this.basePath+"/"+t,this.crossorigin),!e.rendererObject.hasLoaded){var r=this;++r.loadingCount,e.rendererObject.addEventListener("loaded",function(){--r.loadingCount,r.dispatchEvent({type:"loadedBaseTexture",content:r})})}},n.SpineTextureLoader.prototype.unload=function(e){e.destroy(!0)},n.Spine=function(e){if(n.DisplayObjectContainer.call(this),this.spineData=n.AnimCache[e],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+e);this.skeleton=new r.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new r.AnimationStateData(this.spineData),this.state=new r.AnimationState(this.stateData),this.slotContainers=[];for(var t=0,i=this.skeleton.slots.length;i>t;t++){var o=this.skeleton.slots[t],a=o.attachment,s=new n.DisplayObjectContainer;if(this.slotContainers.push(s),this.addChild(s),a instanceof r.RegionAttachment){var u=a.rendererObject.name,c=this.createSprite(o,a);o.currentSprite=c,o.currentSpriteName=u,s.addChild(c)}else{if(!(a instanceof r.MeshAttachment))continue;var l=this.createMesh(o,a);o.currentMesh=l,o.currentMeshName=a.name,s.addChild(l)}}this.autoUpdate=!0},n.Spine.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Spine.prototype.constructor=n.Spine,Object.defineProperty(n.Spine.prototype,"autoUpdate",{get:function(){return this.updateTransform===n.Spine.prototype.autoUpdateTransform},set:function(e){this.updateTransform=e?n.Spine.prototype.autoUpdateTransform:n.DisplayObjectContainer.prototype.updateTransform}}),n.Spine.prototype.update=function(e){this.state.update(e),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var t=this.skeleton.drawOrder,i=this.skeleton.slots,o=0,a=t.length;a>o;o++)this.children[o]=this.slotContainers[t[o]];for(o=0,a=i.length;a>o;o++){var s=i[o],u=s.attachment,c=this.slotContainers[o];if(u){var l=u.type;if(l===r.AttachmentType.region){if(u.rendererObject&&(!s.currentSpriteName||s.currentSpriteName!==u.name)){var f=u.rendererObject.name;if(void 0!==s.currentSprite&&(s.currentSprite.visible=!1),s.sprites=s.sprites||{},void 0!==s.sprites[f])s.sprites[f].visible=!0;else{var h=this.createSprite(s,u);c.addChild(h)}s.currentSprite=s.sprites[f],s.currentSpriteName=f}var p=s.bone;c.position.x=p.worldX+u.x*p.m00+u.y*p.m01,c.position.y=p.worldY+u.x*p.m10+u.y*p.m11,c.scale.x=p.worldScaleX,c.scale.y=p.worldScaleY,c.rotation=-(s.bone.worldRotation*r.degRad),s.currentSprite.tint=n.rgb2hex([s.r,s.g,s.b])}else{if(l!==r.AttachmentType.skinnedmesh){c.visible=!1;continue}if(!s.currentMeshName||s.currentMeshName!==u.name){var d=u.name;if(void 0!==s.currentMesh&&(s.currentMesh.visible=!1),s.meshes=s.meshes||{},void 0!==s.meshes[d])s.meshes[d].visible=!0;else{var m=this.createMesh(s,u);c.addChild(m)}s.currentMesh=s.meshes[d],s.currentMeshName=d}u.computeWorldVertices(s.bone.skeleton.x,s.bone.skeleton.y,s,s.currentMesh.vertices)}c.visible=!0,c.alpha=s.a}else c.visible=!1}},n.Spine.prototype.autoUpdateTransform=function(){this.lastTime=this.lastTime||Date.now();var e=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(e),n.DisplayObjectContainer.prototype.updateTransform.call(this)},n.Spine.prototype.createSprite=function(e,t){var i=t.rendererObject,o=i.page.rendererObject,a=new n.Rectangle(i.x,i.y,i.rotate?i.height:i.width,i.rotate?i.width:i.height),s=new n.Texture(o,a),u=new n.Sprite(s),c=i.rotate?.5*Math.PI:0;return u.scale.set(i.width/i.originalWidth*t.scaleX,i.height/i.originalHeight*t.scaleY),u.rotation=c-t.rotation*r.degRad,u.anchor.x=u.anchor.y=.5,u.alpha=t.a,e.sprites=e.sprites||{},e.sprites[i.name]=u,u},n.Spine.prototype.createMesh=function(e,t){var r=t.rendererObject,i=r.page.rendererObject,o=new n.Texture(i),a=new n.Strip(o);return a.drawMode=n.Strip.DrawModes.TRIANGLES,a.canvasPadding=1.5,a.vertices=new n.Float32Array(t.uvs.length),a.uvs=t.uvs,a.indices=t.triangles,a.alpha=t.a,e.meshes=e.meshes||{},e.meshes[t.name]=a,a},n.BaseTextureCache={},n.BaseTextureCacheIdGenerator=0,n.BaseTexture=function(e,t){if(this.resolution=1,this.width=100,this.height=100,this.scaleMode=t||n.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=e,this._UID=n._UID++,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this._dirty=[!0,!0,!0,!0],e){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty();else{var r=this;this.source.onload=function(){r.hasLoaded=!0,r.width=r.source.naturalWidth||r.source.width,r.height=r.source.naturalHeight||r.source.height,r.dirty(),r.dispatchEvent({type:"loaded",content:r})},this.source.onerror=function(){r.dispatchEvent({type:"error",content:r})}}this.imageUrl=null,this._powerOf2=!1}},n.BaseTexture.prototype.constructor=n.BaseTexture,n.EventTarget.mixin(n.BaseTexture.prototype),n.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete n.BaseTextureCache[this.imageUrl],delete n.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete n.BaseTextureCache[this.source._pixiId],this.source=null,this.unloadFromGPU()},n.BaseTexture.prototype.updateSourceImage=function(e){this.hasLoaded=!1,this.source.src=null,this.source.src=e},n.BaseTexture.prototype.dirty=function(){for(var e=0;e<this._glTextures.length;e++)this._dirty[e]=!0},n.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var e=this._glTextures.length-1;e>=0;e--){var t=this._glTextures[e],r=n.glContexts[e];r&&t&&r.deleteTexture(t)}this._glTextures.length=0,this.dirty()},n.BaseTexture.fromImage=function(e,t,r){var i=n.BaseTextureCache[e];if(void 0===t&&-1===e.indexOf("data:")&&(t=!0),!i){var o=new Image;t&&(o.crossOrigin=""),o.src=e,i=new n.BaseTexture(o,r),i.imageUrl=e,n.BaseTextureCache[e]=i,-1!==e.indexOf(n.RETINA_PREFIX+".")&&(i.resolution=2)}return i},n.BaseTexture.fromCanvas=function(e,t){e._pixiId||(e._pixiId="canvas_"+n.TextureCacheIdGenerator++);var r=n.BaseTextureCache[e._pixiId];return r||(r=new n.BaseTexture(e,t),n.BaseTextureCache[e._pixiId]=r),r},n.TextureCache={},n.FrameCache={},n.TextureCacheIdGenerator=0,n.Texture=function(e,t,r,i){this.noFrame=!1,t||(this.noFrame=!0,t=new n.Rectangle(0,0,1,1)),e instanceof n.Texture&&(e=e.baseTexture),this.baseTexture=e,this.frame=t,this.trim=i,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=r||new n.Rectangle(0,0,1,1),e.hasLoaded?(this.noFrame&&(t=new n.Rectangle(0,0,e.width,e.height)),this.setFrame(t)):e.addEventListener("loaded",this.onBaseTextureLoaded.bind(this))},n.Texture.prototype.constructor=n.Texture,n.EventTarget.mixin(n.Texture.prototype),n.Texture.prototype.onBaseTextureLoaded=function(){var e=this.baseTexture;e.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new n.Rectangle(0,0,e.width,e.height)),this.setFrame(this.frame),this.dispatchEvent({type:"update",content:this})},n.Texture.prototype.destroy=function(e){e&&this.baseTexture.destroy(),this.valid=!1},n.Texture.prototype.setFrame=function(e){if(this.noFrame=!1,this.frame=e,this.width=e.width,this.height=e.height,this.crop.x=e.x,this.crop.y=e.y,this.crop.width=e.width,this.crop.height=e.height,!this.trim&&(e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=e&&e.width&&e.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs()},n.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new n.TextureUvs);var e=this.crop,t=this.baseTexture.width,r=this.baseTexture.height;this._uvs.x0=e.x/t,this._uvs.y0=e.y/r,this._uvs.x1=(e.x+e.width)/t,this._uvs.y1=e.y/r,this._uvs.x2=(e.x+e.width)/t,this._uvs.y2=(e.y+e.height)/r,this._uvs.x3=e.x/t,this._uvs.y3=(e.y+e.height)/r},n.Texture.fromImage=function(e,t,r){var i=n.TextureCache[e];return i||(i=new n.Texture(n.BaseTexture.fromImage(e,t,r)),n.TextureCache[e]=i),i},n.Texture.fromFrame=function(e){var t=n.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache ');return t},n.Texture.fromCanvas=function(e,t){var r=n.BaseTexture.fromCanvas(e,t);return new n.Texture(r)},n.Texture.addTextureToCache=function(e,t){n.TextureCache[t]=e},n.Texture.removeTextureFromCache=function(e){var t=n.TextureCache[e];return delete n.TextureCache[e],delete n.BaseTextureCache[e],t},n.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},n.Texture.emptyTexture=new n.Texture(new n.BaseTexture),n.RenderTexture=function(e,t,r,i,o){if(this.width=e||100,this.height=t||100,this.resolution=o||1,this.frame=new n.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new n.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new n.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=i||n.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,n.Texture.call(this,this.baseTexture,new n.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution)),this.renderer=r||n.defaultRenderer,this.renderer.type===n.WEBGL_RENDERER){var a=this.renderer.gl;this.baseTexture._dirty[a.id]=!1,this.textureBuffer=new n.FilterTexture(a,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[a.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new n.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new n.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()},n.RenderTexture.prototype=Object.create(n.Texture.prototype),n.RenderTexture.prototype.constructor=n.RenderTexture,n.RenderTexture.prototype.resize=function(e,t,r){(e!==this.width||t!==this.height)&&(this.valid=e>0&&t>0,this.width=e,this.height=t,this.frame.width=this.crop.width=e*this.resolution,this.frame.height=this.crop.height=t*this.resolution,r&&(this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution),this.renderer.type===n.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width,this.height))},n.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===n.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},n.RenderTexture.prototype.renderWebGL=function(e,t,n){if(this.valid){var r=e.worldTransform;r.identity(),r.translate(0,2*this.projection.y),t&&r.append(t),r.scale(1,-1),e.worldAlpha=1;for(var i=e.children,o=0,a=i.length;a>o;o++)i[o].updateTransform();var s=this.renderer.gl;s.viewport(0,0,this.width*this.resolution,this.height*this.resolution),s.bindFramebuffer(s.FRAMEBUFFER,this.textureBuffer.frameBuffer),n&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(e,this.projection,this.textureBuffer.frameBuffer),this.renderer.spriteBatch.dirty=!0}},n.RenderTexture.prototype.renderCanvas=function(e,t,n){if(this.valid){var r=e.worldTransform;r.identity(),t&&r.append(t),e.worldAlpha=1;for(var i=e.children,o=0,a=i.length;a>o;o++)i[o].updateTransform();n&&this.textureBuffer.clear();var s=this.textureBuffer.context,u=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(e,s),this.renderer.resolution=u}},n.RenderTexture.prototype.getImage=function(){var e=new Image;return e.src=this.getBase64(),e},n.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},n.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===n.WEBGL_RENDERER){var e=this.renderer.gl,t=this.textureBuffer.width,r=this.textureBuffer.height,i=new Uint8Array(4*t*r);e.bindFramebuffer(e.FRAMEBUFFER,this.textureBuffer.frameBuffer),e.readPixels(0,0,t,r,e.RGBA,e.UNSIGNED_BYTE,i),e.bindFramebuffer(e.FRAMEBUFFER,null);var o=new n.CanvasBuffer(t,r),a=o.context.getImageData(0,0,t,r);return a.data.set(i),o.context.putImageData(a,0,0),o.canvas}return this.textureBuffer.canvas},n.RenderTexture.tempMatrix=new n.Matrix,n.VideoTexture=function(e,t){if(!e)throw new Error("No video source element specified.");(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),n.BaseTexture.call(this,e,t),this.autoUpdate=!1,this.updateBound=this._onUpdate.bind(this),e.complete||(this._onCanPlay=this.onCanPlay.bind(this),e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("play",this.onPlayStart.bind(this)),e.addEventListener("pause",this.onPlayStop.bind(this)))},n.VideoTexture.prototype=Object.create(n.BaseTexture.prototype),n.VideoTexture.constructor=n.VideoTexture,n.VideoTexture.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this.updateBound),this.dirty())},n.VideoTexture.prototype.onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this.updateBound),this.autoUpdate=!0)},n.VideoTexture.prototype.onPlayStop=function(){this.autoUpdate=!1},n.VideoTexture.prototype.onCanPlay=function(){"canplaythrough"===event.type&&(this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.dispatchEvent({type:"loaded",content:this}))))},n.VideoTexture.prototype.destroy=function(){this.source&&this.source._pixiId&&(n.BaseTextureCache[this.source._pixiId]=null,delete n.BaseTextureCache[this.source._pixiId],this.source._pixiId=null,delete this.source._pixiId),n.BaseTexture.prototype.destroy.call(this)},n.VideoTexture.baseTextureFromVideo=function(e,t){e._pixiId||(e._pixiId="video_"+n.TextureCacheIdGenerator++);var r=n.BaseTextureCache[e._pixiId];return r||(r=new n.VideoTexture(e,t),n.BaseTextureCache[e._pixiId]=r),r},n.VideoTexture.textureFromVideo=function(e,t){var r=n.VideoTexture.baseTextureFromVideo(e,t);return new n.Texture(r)},n.VideoTexture.fromUrl=function(e,t){var r=document.createElement("video");return r.src=e,r.autoPlay=!0,r.play(),n.VideoTexture.textureFromVideo(r,t)},n.AssetLoader=function(e,t){this.assetURLs=e,this.crossorigin=t,this.loadersByType={jpg:n.ImageLoader,jpeg:n.ImageLoader,png:n.ImageLoader,gif:n.ImageLoader,webp:n.ImageLoader,json:n.JsonLoader,atlas:n.AtlasLoader,anim:n.SpineLoader,xml:n.BitmapFontLoader,fnt:n.BitmapFontLoader}},n.EventTarget.mixin(n.AssetLoader.prototype),n.AssetLoader.prototype.constructor=n.AssetLoader,n.AssetLoader.prototype._getDataType=function(e){var t="data:",n=e.slice(0,t.length).toLowerCase();if(n===t){var r=e.slice(t.length),i=r.indexOf(",");if(-1===i)return null;var o=r.slice(0,i).split(";")[0];return o&&"text/plain"!==o.toLowerCase()?o.split("/").pop().toLowerCase():"txt"}return null},n.AssetLoader.prototype.load=function(){function e(e){t.onAssetLoaded(e.data.content)}var t=this;this.loadCount=this.assetURLs.length;for(var n=0;n<this.assetURLs.length;n++){var r=this.assetURLs[n],i=this._getDataType(r);i||(i=r.split("?").shift().split(".").pop().toLowerCase());var o=this.loadersByType[i];if(!o)throw new Error(i+" is an unsupported file type");var a=new o(r,this.crossorigin);a.on("loaded",e),a.load()}},n.AssetLoader.prototype.onAssetLoaded=function(e){this.loadCount--,this.emit("onProgress",{content:this,loader:e,loaded:this.assetURLs.length-this.loadCount,total:this.assetURLs.length
}),this.onProgress&&this.onProgress(e),this.loadCount||(this.emit("onComplete",{content:this}),this.onComplete&&this.onComplete())},n.JsonLoader=function(e,t){this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,""),this.loaded=!1},n.JsonLoader.prototype.constructor=n.JsonLoader,n.EventTarget.mixin(n.JsonLoader.prototype),n.JsonLoader.prototype.load=function(){window.XDomainRequest&&this.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=this.onError.bind(this),this.ajaxRequest.ontimeout=this.onError.bind(this),this.ajaxRequest.onprogress=function(){},this.ajaxRequest.onload=this.onJSONLoaded.bind(this)):(window.XMLHttpRequest?this.ajaxRequest=new window.XMLHttpRequest:this.ajaxRequest=new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onreadystatechange=this.onReadyStateChanged.bind(this)),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},n.JsonLoader.prototype.onReadyStateChanged=function(){4!==this.ajaxRequest.readyState||200!==this.ajaxRequest.status&&-1!==window.location.href.indexOf("http")||this.onJSONLoaded()},n.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames&&this.json.meta&&this.json.meta.image){var e=this.json.meta.image;-1===e.indexOf("data:")&&(e=this.baseUrl+e);var t=new n.ImageLoader(e,this.crossorigin),i=this.json.frames;this.texture=t.texture.baseTexture,t.addEventListener("loaded",this.onLoaded.bind(this));for(var o in i){var a=i[o].frame;if(a){var s=new n.Rectangle(a.x,a.y,a.w,a.h),u=s.clone(),c=null;if(i[o].trimmed){var l=i[o].sourceSize,f=i[o].spriteSourceSize;c=new n.Rectangle(f.x,f.y,l.w,l.h)}n.TextureCache[o]=new n.Texture(this.texture,s,u,c)}}t.load()}else if(this.json.bones)if(n.AnimCache[this.url])this.onLoaded();else{var h=this.url.substr(0,this.url.lastIndexOf("."))+".atlas",p=new n.JsonLoader(h,this.crossorigin),d=this;p.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();var e=new n.SpineTextureLoader(this.url.substring(0,this.url.lastIndexOf("/"))),t=new r.Atlas(this.ajaxRequest.responseText,e),i=new r.AtlasAttachmentLoader(t),o=new r.SkeletonJson(i),a=o.readSkeletonData(d.json);n.AnimCache[d.url]=a,d.spine=a,d.spineAtlas=t,d.spineAtlasLoader=p,e.loadingCount>0?e.addEventListener("loadedBaseTexture",function(e){e.content.content.loadingCount<=0&&d.onLoaded()}):d.onLoaded()},p.load()}else this.onLoaded()},n.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},n.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},n.AtlasLoader=function(e,t){this.url=e,this.baseUrl=e.replace(/[^\/]*$/,""),this.crossorigin=t,this.loaded=!1},n.AtlasLoader.constructor=n.AtlasLoader,n.EventTarget.mixin(n.AtlasLoader.prototype),n.AtlasLoader.prototype.load=function(){this.ajaxRequest=new n.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},n.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var e=this.ajaxRequest.responseText.split(/\r?\n/),t=-3,r=0,i=null,o=!1,a=0,s=0,u=this.onLoaded.bind(this);for(a=0;a<e.length;a++)if(e[a]=e[a].replace(/^\s+|\s+$/g,""),""===e[a]&&(o=a+1),e[a].length>0){if(o===a)this.atlas.meta.image.push(e[a]),r=this.atlas.meta.image.length-1,this.atlas.frames.push({}),t=-3;else if(t>0)if(t%7===1)null!=i&&(this.atlas.frames[r][i.name]=i),i={name:e[a],frame:{}};else{var c=e[a].split(" ");if(t%7===3)i.frame.x=Number(c[1].replace(",","")),i.frame.y=Number(c[2]);else if(t%7===4)i.frame.w=Number(c[1].replace(",","")),i.frame.h=Number(c[2]);else if(t%7===5){var l={x:0,y:0,w:Number(c[1].replace(",","")),h:Number(c[2])};l.w>i.frame.w||l.h>i.frame.h?(i.trimmed=!0,i.realSize=l):i.trimmed=!1}}t++}if(null!=i&&(this.atlas.frames[r][i.name]=i),this.atlas.meta.image.length>0){for(this.images=[],s=0;s<this.atlas.meta.image.length;s++){var f=this.baseUrl+this.atlas.meta.image[s],h=this.atlas.frames[s];this.images.push(new n.ImageLoader(f,this.crossorigin));for(a in h){var p=h[a].frame;p&&(n.TextureCache[a]=new n.Texture(this.images[s].texture.baseTexture,{x:p.x,y:p.y,width:p.w,height:p.h}),h[a].trimmed&&(n.TextureCache[a].realSize=h[a].realSize,n.TextureCache[a].trim.x=0,n.TextureCache[a].trim.y=0))}}for(this.currentImageId=0,s=0;s<this.images.length;s++)this.images[s].on("loaded",u);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},n.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.emit("loaded",{content:this}))},n.AtlasLoader.prototype.onError=function(){this.emit("error",{content:this})},n.SpriteSheetLoader=function(e,t){this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},n.SpriteSheetLoader.prototype.constructor=n.SpriteSheetLoader,n.EventTarget.mixin(n.SpriteSheetLoader.prototype),n.SpriteSheetLoader.prototype.load=function(){var e=this,t=new n.JsonLoader(this.url,this.crossorigin);t.on("loaded",function(t){e.json=t.data.content.json,e.onLoaded()}),t.load()},n.SpriteSheetLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},n.ImageLoader=function(e,t){this.texture=n.Texture.fromImage(e,t),this.frames=[]},n.ImageLoader.prototype.constructor=n.ImageLoader,n.EventTarget.mixin(n.ImageLoader.prototype),n.ImageLoader.prototype.load=function(){this.texture.baseTexture.hasLoaded?this.onLoaded():this.texture.baseTexture.on("loaded",this.onLoaded.bind(this))},n.ImageLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},n.ImageLoader.prototype.loadFramedSpriteSheet=function(e,t,r){this.frames=[];for(var i=Math.floor(this.texture.width/e),o=Math.floor(this.texture.height/t),a=0,s=0;o>s;s++)for(var u=0;i>u;u++,a++){var c=new n.Texture(this.texture.baseTexture,{x:u*e,y:s*t,width:e,height:t});this.frames.push(c),r&&(n.TextureCache[r+"-"+a]=c)}this.load()},n.BitmapFontLoader=function(e,t){this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,""),this.texture=null},n.BitmapFontLoader.prototype.constructor=n.BitmapFontLoader,n.EventTarget.mixin(n.BitmapFontLoader.prototype),n.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new n.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onXMLLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},n.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var e=this.ajaxRequest.responseXML;if(!e||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){var t=new DOMParser;e=t.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=this.ajaxRequest.responseText,e=r}var i=this.baseUrl+e.getElementsByTagName("page")[0].getAttribute("file"),o=new n.ImageLoader(i,this.crossorigin);this.texture=o.texture.baseTexture;var a={},s=e.getElementsByTagName("info")[0],u=e.getElementsByTagName("common")[0];a.font=s.getAttribute("face"),a.size=parseInt(s.getAttribute("size"),10),a.lineHeight=parseInt(u.getAttribute("lineHeight"),10),a.chars={};for(var c=e.getElementsByTagName("char"),l=0;l<c.length;l++){var f=parseInt(c[l].getAttribute("id"),10),h=new n.Rectangle(parseInt(c[l].getAttribute("x"),10),parseInt(c[l].getAttribute("y"),10),parseInt(c[l].getAttribute("width"),10),parseInt(c[l].getAttribute("height"),10));a.chars[f]={xOffset:parseInt(c[l].getAttribute("xoffset"),10),yOffset:parseInt(c[l].getAttribute("yoffset"),10),xAdvance:parseInt(c[l].getAttribute("xadvance"),10),kerning:{},texture:n.TextureCache[f]=new n.Texture(this.texture,h)}}var p=e.getElementsByTagName("kerning");for(l=0;l<p.length;l++){var d=parseInt(p[l].getAttribute("first"),10),m=parseInt(p[l].getAttribute("second"),10),v=parseInt(p[l].getAttribute("amount"),10);a.chars[m].kerning[d]=v}n.BitmapText.fonts[a.font]=a,o.addEventListener("loaded",this.onLoaded.bind(this)),o.load()}},n.BitmapFontLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},n.SpineLoader=function(e,t){this.url=e,this.crossorigin=t,this.loaded=!1},n.SpineLoader.prototype.constructor=n.SpineLoader,n.EventTarget.mixin(n.SpineLoader.prototype),n.SpineLoader.prototype.load=function(){var e=this,t=new n.JsonLoader(this.url,this.crossorigin);t.on("loaded",function(t){e.json=t.data.content.json,e.onLoaded()}),t.load()},n.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.emit("loaded",{content:this})},n.AbstractFilter=function(e,t){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=t||{},this.fragmentSrc=e||[]},n.AbstractFilter.prototype.constructor=n.AbstractFilter,n.AbstractFilter.prototype.syncUniforms=function(){for(var e=0,t=this.shaders.length;t>e;e++)this.shaders[e].dirty=!0},n.AlphaMaskFilter=function(e){n.AbstractFilter.call(this),this.passes=[this],e.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:e},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},e.baseTexture.hasLoaded?(this.uniforms.mask.value.x=e.width,this.uniforms.mask.value.y=e.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),e.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},n.AlphaMaskFilter.prototype=Object.create(n.AbstractFilter.prototype),n.AlphaMaskFilter.prototype.constructor=n.AlphaMaskFilter,n.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(n.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(e){this.uniforms.mask.value=e}}),n.ColorMatrixFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},n.ColorMatrixFilter.prototype=Object.create(n.AbstractFilter.prototype),n.ColorMatrixFilter.prototype.constructor=n.ColorMatrixFilter,Object.defineProperty(n.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(e){this.uniforms.matrix.value=e}}),n.GrayFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},n.GrayFilter.prototype=Object.create(n.AbstractFilter.prototype),n.GrayFilter.prototype.constructor=n.GrayFilter,Object.defineProperty(n.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(e){this.uniforms.gray.value=e}}),n.DisplacementFilter=function(e){n.AbstractFilter.call(this),this.passes=[this],e.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:e},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},e.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=e.width,this.uniforms.mapDimensions.value.y=e.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),e.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},n.DisplacementFilter.prototype=Object.create(n.AbstractFilter.prototype),n.DisplacementFilter.prototype.constructor=n.DisplacementFilter,n.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(n.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(e){this.uniforms.displacementMap.value=e}}),Object.defineProperty(n.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}}),Object.defineProperty(n.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(e){this.uniforms.offset.value=e}}),n.PixelateFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new n.Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},n.PixelateFilter.prototype=Object.create(n.AbstractFilter.prototype),n.PixelateFilter.prototype.constructor=n.PixelateFilter,Object.defineProperty(n.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(e){this.dirty=!0,this.uniforms.pixelSize.value=e}}),n.BlurXFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},n.BlurXFilter.prototype=Object.create(n.AbstractFilter.prototype),n.BlurXFilter.prototype.constructor=n.BlurXFilter,Object.defineProperty(n.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.dirty=!0,this.uniforms.blur.value=1/7e3*e}}),n.BlurYFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},n.BlurYFilter.prototype=Object.create(n.AbstractFilter.prototype),n.BlurYFilter.prototype.constructor=n.BlurYFilter,Object.defineProperty(n.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),n.BlurFilter=function(){this.blurXFilter=new n.BlurXFilter,this.blurYFilter=new n.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},n.BlurFilter.prototype=Object.create(n.AbstractFilter.prototype),n.BlurFilter.prototype.constructor=n.BlurFilter,Object.defineProperty(n.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e}}),Object.defineProperty(n.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}}),Object.defineProperty(n.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e}}),n.InvertFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},n.InvertFilter.prototype=Object.create(n.AbstractFilter.prototype),n.InvertFilter.prototype.constructor=n.InvertFilter,Object.defineProperty(n.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(e){this.uniforms.invert.value=e}}),n.SepiaFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},n.SepiaFilter.prototype=Object.create(n.AbstractFilter.prototype),n.SepiaFilter.prototype.constructor=n.SepiaFilter,Object.defineProperty(n.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(e){this.uniforms.sepia.value=e}}),n.TwistFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},n.TwistFilter.prototype=Object.create(n.AbstractFilter.prototype),n.TwistFilter.prototype.constructor=n.TwistFilter,Object.defineProperty(n.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(e){this.dirty=!0,this.uniforms.offset.value=e}}),Object.defineProperty(n.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(e){this.dirty=!0,this.uniforms.radius.value=e}}),Object.defineProperty(n.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(e){this.dirty=!0,this.uniforms.angle.value=e}}),n.ColorStepFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},n.ColorStepFilter.prototype=Object.create(n.AbstractFilter.prototype),n.ColorStepFilter.prototype.constructor=n.ColorStepFilter,Object.defineProperty(n.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(e){this.uniforms.step.value=e}}),n.DotScreenFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},n.DotScreenFilter.prototype=Object.create(n.AbstractFilter.prototype),n.DotScreenFilter.prototype.constructor=n.DotScreenFilter,Object.defineProperty(n.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(e){this.dirty=!0,this.uniforms.scale.value=e}}),Object.defineProperty(n.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(e){this.dirty=!0,this.uniforms.angle.value=e}}),n.CrossHatchFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},n.CrossHatchFilter.prototype=Object.create(n.AbstractFilter.prototype),n.CrossHatchFilter.prototype.constructor=n.CrossHatchFilter,Object.defineProperty(n.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),n.RGBSplitFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},n.RGBSplitFilter.prototype=Object.create(n.AbstractFilter.prototype),n.RGBSplitFilter.prototype.constructor=n.RGBSplitFilter,Object.defineProperty(n.RGBSplitFilter.prototype,"red",{get:function(){return this.uniforms.red.value},set:function(e){this.uniforms.red.value=e}}),Object.defineProperty(n.RGBSplitFilter.prototype,"green",{get:function(){return this.uniforms.green.value},set:function(e){this.uniforms.green.value=e}}),Object.defineProperty(n.RGBSplitFilter.prototype,"blue",{get:function(){return this.uniforms.blue.value},set:function(e){this.uniforms.blue.value=e}}),"undefined"!=typeof e&&e.exports&&(t=e.exports=n),t.PIXI=n}).call(this)},function(e,t,n){(function(t){"use strict";function r(e,t){return null==t||i.hasBooleanValue[e]&&!t||i.hasNumericValue[e]&&isNaN(t)||i.hasPositiveNumericValue[e]&&1>t||i.hasOverloadedBooleanValue[e]&&t===!1}var i=n(21),o=n(199),a=n(5);if("production"!==t.env.NODE_ENV)var s={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},u={},c=function(e){if(!(s.hasOwnProperty(e)&&s[e]||u.hasOwnProperty(e)&&u[e])){u[e]=!0;var n=e.toLowerCase(),r=i.isCustomAttribute(n)?n:i.getPossibleStandardName.hasOwnProperty(n)?i.getPossibleStandardName[n]:null;"production"!==t.env.NODE_ENV?a(null==r,"Unknown DOM property %s. Did you mean %s?",e,r):null}};var l={createMarkupForID:function(e){return i.ID_ATTRIBUTE_NAME+"="+o(e)},createMarkupForProperty:function(e,n){if(i.isStandardName.hasOwnProperty(e)&&i.isStandardName[e]){if(r(e,n))return"";var a=i.getAttributeName[e];return i.hasBooleanValue[e]||i.hasOverloadedBooleanValue[e]&&n===!0?a:a+"="+o(n)}return i.isCustomAttribute(e)?null==n?"":e+"="+o(n):("production"!==t.env.NODE_ENV&&c(e),null)},setValueForProperty:function(e,n,o){if(i.isStandardName.hasOwnProperty(n)&&i.isStandardName[n]){var a=i.getMutationMethod[n];if(a)a(e,o);else if(r(n,o))this.deleteValueForProperty(e,n);else if(i.mustUseAttribute[n])e.setAttribute(i.getAttributeName[n],""+o);else{var s=i.getPropertyName[n];i.hasSideEffects[n]&&""+e[s]==""+o||(e[s]=o)}}else i.isCustomAttribute(n)?null==o?e.removeAttribute(n):e.setAttribute(n,""+o):"production"!==t.env.NODE_ENV&&c(n)},deleteValueForProperty:function(e,n){if(i.isStandardName.hasOwnProperty(n)&&i.isStandardName[n]){var r=i.getMutationMethod[n];if(r)r(e,void 0);else if(i.mustUseAttribute[n])e.removeAttribute(i.getAttributeName[n]);else{var o=i.getPropertyName[n],a=i.getDefaultValueForProperty(e.nodeName,o);i.hasSideEffects[n]&&""+e[o]===a||(e[o]=a)}}else i.isCustomAttribute(n)?e.removeAttribute(n):"production"!==t.env.NODE_ENV&&c(n)}};e.exports=l}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(){var e=h&&h.traverseTwoPhase&&h.traverseEnterLeave;"production"!==t.env.NODE_ENV?u(e,"InstanceHandle not injected before use!"):u(e)}var i=n(77),o=n(51),a=n(62),s=n(63),u=n(2),c={},l=null,f=function(e){if(e){var t=o.executeDispatch,n=i.getPluginModuleForEvent(e);n&&n.executeDispatch&&(t=n.executeDispatch),o.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},h=null,p={injection:{injectMount:o.injection.injectMount,injectInstanceHandle:function(e){h=e,"production"!==t.env.NODE_ENV&&r()},getInstanceHandle:function(){return"production"!==t.env.NODE_ENV&&r(),h},injectEventPluginOrder:i.injectEventPluginOrder,injectEventPluginsByName:i.injectEventPluginsByName},eventNameDispatchConfigs:i.eventNameDispatchConfigs,registrationNameModules:i.registrationNameModules,putListener:function(e,n,r){"production"!==t.env.NODE_ENV?u(!r||"function"==typeof r,"Expected %s listener to be a function, instead got type %s",n,typeof r):u(!r||"function"==typeof r);var i=c[n]||(c[n]={});i[e]=r},getListener:function(e,t){var n=c[t];return n&&n[e]},deleteListener:function(e,t){var n=c[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in c)delete c[t][e]},extractEvents:function(e,t,n,r){for(var o,s=i.plugins,u=0,c=s.length;c>u;u++){var l=s[u];if(l){var f=l.extractEvents(e,t,n,r);f&&(o=a(o,f))}}return o},enqueueEvents:function(e){e&&(l=a(l,e))},processEventQueue:function(){var e=l;l=null,s(e,f),"production"!==t.env.NODE_ENV?u(!l,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented."):u(!l)},__purge:function(){c={}},__getListenerBank:function(){return c}};e.exports=p}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return v(e,r)}function i(e,n,i){if("production"!==t.env.NODE_ENV&&!e)throw new Error("Dispatching id must not be null");var o=n?m.bubbled:m.captured,a=r(e,i,o);a&&(i._dispatchListeners=p(i._dispatchListeners,a),i._dispatchIDs=p(i._dispatchIDs,e))}function o(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,i,e)}function a(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=v(e,r);i&&(n._dispatchListeners=p(n._dispatchListeners,i),n._dispatchIDs=p(n._dispatchIDs,e))}}function s(e){e&&e.dispatchConfig.registrationName&&a(e.dispatchMarker,null,e)}function u(e){d(e,o)}function c(e,t,n,r){h.injection.getInstanceHandle().traverseEnterLeave(n,r,a,e,t)}function l(e){d(e,s)}var f=n(10),h=n(29),p=n(62),d=n(63),m=f.PropagationPhases,v=h.getListener,g={accumulateTwoPhaseDispatches:u,accumulateDirectDispatches:l,accumulateEnterLeaveDispatches:c};e.exports=g}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(){if(b.current){var e=b.current.getName();

if(e)return" Check the render method of `"+e+"`."}return""}function i(e){var t=e&&e.getPublicInstance();if(!t)return void 0;var n=t.constructor;return n?n.displayName||n.name||void 0:void 0}function o(){var e=b.current;return e&&i(e)||void 0}function a(e,t){e._store.validated||null!=e.key||(e._store.validated=!0,u('Each child in an array or iterator should have a unique "key" prop.',e,t))}function s(e,t,n){S.test(e)&&u("Child objects should have non-numeric keys so ordering is preserved.",t,n)}function u(e,n,r){var a=o(),s="string"==typeof r?r:r.displayName||r.name,u=a||s,c=T[e]||(T[e]={});if(!c.hasOwnProperty(u)){c[u]=!0;var l=a?" Check the render method of "+a+".":s?" Check the React.render call using <"+s+">.":"",f="";if(n&&n._owner&&n._owner!==b.current){var h=i(n._owner);f=" It was passed a child from "+h+"."}"production"!==t.env.NODE_ENV?E(!1,e+"%s%s See http://fb.me/react-warning-keys for more information.",l,f):null}}function c(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];m.isValidElement(r)&&a(r,t)}else if(m.isValidElement(e))e._store.validated=!0;else if(e){var i=w(e);if(i){if(i!==e.entries)for(var o,u=i.call(e);!(o=u.next()).done;)m.isValidElement(o.value)&&a(o.value,t)}else if("object"==typeof e){var c=v.extractIfFragment(e);for(var l in c)c.hasOwnProperty(l)&&s(l,c[l],t)}}}function l(e,n,i,o){for(var a in n)if(n.hasOwnProperty(a)){var s;try{"production"!==t.env.NODE_ENV?_("function"==typeof n[a],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e||"React class",y[o],a):_("function"==typeof n[a]),s=n[a](i,a,e,o)}catch(u){s=u}if(s instanceof Error&&!(s.message in C)){C[s.message]=!0;var c=r(this);"production"!==t.env.NODE_ENV?E(!1,"Failed propType: %s%s",s.message,c):null}}}function f(e,n){var r=n.type,i="string"==typeof r?r:r.displayName,o=n._owner?n._owner.getPublicInstance().constructor.displayName:null,a=e+"|"+i+"|"+o;if(!A.hasOwnProperty(a)){A[a]=!0;var s="";i&&(s=" <"+i+" />");var u="";o&&(u=" The element was created by "+o+"."),"production"!==t.env.NODE_ENV?E(!1,"Don't set .props.%s of the React component%s. Instead, specify the correct value when initially creating the element or use React.cloneElement to make a new element with updated props.%s",e,s,u):null}}function h(e,t){return e!==e?t!==t:0===e&&0===t?1/e===1/t:e===t}function p(e){if(e._store){var t=e._store.originalProps,n=e.props;for(var r in n)n.hasOwnProperty(r)&&(t.hasOwnProperty(r)&&h(t[r],n[r])||(f(r,e),t[r]=n[r]))}}function d(e){if(null!=e.type){var n=x.getComponentClassForElement(e),r=n.displayName||n.name;n.propTypes&&l(r,n.propTypes,e.props,g.prop),"function"==typeof n.getDefaultProps&&("production"!==t.env.NODE_ENV?E(n.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead."):null)}}var m=n(4),v=n(38),g=n(60),y=n(40),b=n(17),x=n(39),w=n(92),_=n(2),E=n(5),T={},C={},S=/^\d+$/,A={},k={checkAndWarnForMutatedProps:p,createElement:function(e,n,r){"production"!==t.env.NODE_ENV?E(null!=e,"React.createElement: type should not be null or undefined. It should be a string (for DOM elements) or a ReactClass (for composite components)."):null;var i=m.createElement.apply(this,arguments);if(null==i)return i;for(var o=2;o<arguments.length;o++)c(arguments[o],e);return d(i),i},createFactory:function(e){var n=k.createElement.bind(null,e);if(n.type=e,"production"!==t.env.NODE_ENV)try{Object.defineProperty(n,"type",{enumerable:!1,get:function(){return"production"!==t.env.NODE_ENV?E(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."):null,Object.defineProperty(this,"type",{value:e}),e}})}catch(r){}return n},cloneElement:function(e,t,n){for(var r=m.cloneElement.apply(this,arguments),i=2;i<arguments.length;i++)c(arguments[i],r.type);return d(r),r}};e.exports=k}).call(t,n(1))},function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=n(22),o=n(66),a={view:function(e){if(e.view)return e.view;var t=o(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};i.augmentClass(r,a),e.exports=r},function(e,t,n){(function(t){"use strict";var r=n(2),i=function(e){var n,i={};"production"!==t.env.NODE_ENV?r(e instanceof Object&&!Array.isArray(e),"keyMirror(...): Argument must be an object."):r(e instanceof Object&&!Array.isArray(e));for(n in e)e.hasOwnProperty(n)&&(i[n]=n);return i};e.exports=i}).call(t,n(1))},function(e,t,n){(function(t){"use strict";var r=n(719),i={};i.VERSION="0.2.1",i.sampleRate=44100,i.use=function(){t.AnalyserNode=i.AnalyserNode.exports,t.AudioBuffer=i.AudioBuffer.exports,t.AudioBufferSourceNode=i.AudioBufferSourceNode.exports,t.AudioContext=i.AudioContext,t.AudioDestinationNode=i.AudioDestinationNode.exports,t.AudioListener=i.AudioListener.exports,t.AudioNode=i.AudioNode.exports,t.AudioParam=i.AudioParam.exports,t.AudioProcessingEvent=i.AudioProcessingEvent.exports,t.BiquadFilterNode=i.BiquadFilterNode.exports,t.ChannelMergerNode=i.ChannelMergerNode.exports,t.ChannelSplitterNode=i.ChannelSplitterNode.exports,t.ConvolverNode=i.ConvolverNode.exports,t.DelayNode=i.DelayNode.exports,t.DynamicsCompressorNode=i.DynamicsCompressorNode.exports,t.GainNode=i.GainNode.exports,t.MediaElementAudioSourceNode=i.MediaElementAudioSourceNode.exports,t.MediaStreamAudioDestinationNode=i.MediaStreamAudioDestinationNode.exports,t.MediaStreamAudioSourceNode=i.MediaStreamAudioSourceNode.exports,t.OfflineAudioCompletionEvent=i.OfflineAudioCompletionEvent.exports,t.OfflineAudioContext=i.OfflineAudioContext,t.OscillatorNode=i.OscillatorNode.exports,t.PannerNode=i.PannerNode.exports,t.PeriodicWave=i.PeriodicWave.exports,t.ScriptProcessorNode=i.ScriptProcessorNode.exports,t.WaveShaperNode=i.WaveShaperNode.exports},i.unuse=function(){t.AnalyserNode=r.AnalyserNode,t.AudioBuffer=r.AudioBuffer,t.AudioBufferSourceNode=r.AudioBufferSourceNode,t.AudioContext=r.AudioContext,t.AudioDestinationNode=r.AudioDestinationNode,t.AudioListener=r.AudioListener,t.AudioNode=r.AudioNode,t.AudioParam=r.AudioParam,t.AudioProcessingEvent=r.AudioProcessingEvent,t.BiquadFilterNode=r.BiquadFilterNode,t.ChannelMergerNode=r.ChannelMergerNode,t.ChannelSplitterNode=r.ChannelSplitterNode,t.ConvolverNode=r.ConvolverNode,t.DelayNode=r.DelayNode,t.DynamicsCompressorNode=r.DynamicsCompressorNode,t.GainNode=r.GainNode,t.MediaElementAudioSourceNode=r.MediaElementAudioSourceNode,t.MediaStreamAudioDestinationNode=r.MediaStreamAudioDestinationNode,t.MediaStreamAudioSourceNode=r.MediaStreamAudioSourceNode,t.OfflineAudioCompletionEvent=r.OfflineAudioCompletionEvent,t.OfflineAudioContext=r.OfflineAudioContext,t.OscillatorNode=r.OscillatorNode,t.PannerNode=r.PannerNode,t.PeriodicWave=r.PeriodicWave,t.ScriptProcessorNode=r.ScriptProcessorNode,t.WaveShaperNode=r.WaveShaperNode},e.exports=i}).call(t,function(){return this}())},function(e,t,n){"use strict";var r={};r.NOP=function(){},r.inherits=n(724),r.defaults=n(722),r.article=n(406),r.name=n(448),r.toJSON=n(727),r.toMicroseconds=n(449),r.toSeconds=n(728),r.typeCheck=n(408),r.formatter=n(407),r.defineAttribute=n(723),e.exports=r},function(e,t,n){e.exports=function(e,t,n,r,i){this.confidence=n,this.name=r||t.name(e),this.lang=i}},function(e,t,n){"use strict";var r=n(90),i={componentDidMount:function(){this.props.autoFocus&&r(this.getDOMNode())}};e.exports=i},function(e,t,n){(function(t){"use strict";var r=n(4),i=n(5);if("production"!==t.env.NODE_ENV){var o="_reactFragment",a="_reactDidWarn",s=!1;try{var u=function(){return 1};Object.defineProperty({},o,{enumerable:!1,value:!0}),Object.defineProperty({},"key",{enumerable:!0,get:u}),s=!0}catch(c){}var l=function(e,n){Object.defineProperty(e,n,{enumerable:!0,get:function(){return"production"!==t.env.NODE_ENV?i(this[a],"A ReactFragment is an opaque type. Accessing any of its properties is deprecated. Pass it to one of the React.Children helpers."):null,this[a]=!0,this[o][n]},set:function(e){"production"!==t.env.NODE_ENV?i(this[a],"A ReactFragment is an immutable opaque type. Mutating its properties is deprecated."):null,this[a]=!0,this[o][n]=e}})},f={},h=function(e){var t="";for(var n in e)t+=n+":"+typeof e[n]+",";var r=!!f[t];return f[t]=!0,r}}var p={create:function(e){if("production"!==t.env.NODE_ENV){if("object"!=typeof e||!e||Array.isArray(e))return"production"!==t.env.NODE_ENV?i(!1,"React.addons.createFragment only accepts a single object.",e):null,e;if(r.isValidElement(e))return"production"!==t.env.NODE_ENV?i(!1,"React.addons.createFragment does not accept a ReactElement without a wrapper object."):null,e;if(s){var n={};Object.defineProperty(n,o,{enumerable:!1,value:e}),Object.defineProperty(n,a,{writable:!0,enumerable:!1,value:!1});for(var u in e)l(n,u);return Object.preventExtensions(n),n}}return e},extract:function(e){return"production"!==t.env.NODE_ENV&&s?e[o]?e[o]:("production"!==t.env.NODE_ENV?i(h(e),"Any use of a keyed object should be wrapped in React.addons.createFragment(object) before being passed as a child."):null,e):e},extractIfFragment:function(e){if("production"!==t.env.NODE_ENV&&s){if(e[o])return e[o];for(var n in e)if(e.hasOwnProperty(n)&&r.isValidElement(e[n]))return p.extract(e)}return e}};e.exports=p}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(e){if("function"==typeof e.type)return e.type;var t=e.type,n=f[t];return null==n&&(f[t]=n=c(t)),n}function i(e){return"production"!==t.env.NODE_ENV?u(l,"There is no registered component for the tag %s",e.type):u(l),new l(e.type,e.props)}function o(e){return new h(e)}function a(e){return e instanceof h}var s=n(3),u=n(2),c=null,l=null,f={},h=null,p={injectGenericComponentClass:function(e){l=e},injectTextComponentClass:function(e){h=e},injectComponentClasses:function(e){s(f,e)},injectAutoWrapper:function(e){c=e}},d={getComponentClassForElement:r,createInternalComponent:i,createInstanceForText:o,isTextComponent:a,injection:p};e.exports=d}).call(t,n(1))},function(e,t,n){(function(t){"use strict";var n={};"production"!==t.env.NODE_ENV&&(n={prop:"prop",context:"context",childContext:"child context"}),e.exports=n}).call(t,n(1))},function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=n(32),o=n(87),a=n(65),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+o.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+o.currentScrollTop}};i.augmentClass(r,s),e.exports=r},function(e,t,n){(function(t){"use strict";var r=n(2),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,n,i,o,a,s,u,c){"production"!==t.env.NODE_ENV?r(!this.isInTransaction(),"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction."):r(!this.isInTransaction());var l,f;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),f=e.call(n,i,o,a,s,u,c),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(h){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return f},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=o.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(i){}}}},closeAll:function(e){"production"!==t.env.NODE_ENV?r(this.isInTransaction(),"Transaction.closeAll(): Cannot close transaction when none are open."):r(this.isInTransaction());for(var n=this.transactionWrappers,i=e;i<n.length;i++){var a,s=n[i],u=this.wrapperInitData[i];try{a=!0,u!==o.OBSERVED_ERROR&&s.close&&s.close.call(this,u),a=!1}finally{if(a)try{this.closeAll(i+1)}catch(c){}}}this.wrapperInitData.length=0}},o={Mixin:i,OBSERVED_ERROR:{}};e.exports=o}).call(t,n(1))},function(e,t,n){(function(t){"use strict";var n={};"production"!==t.env.NODE_ENV&&Object.freeze(n),e.exports=n}).call(t,n(1))},function(e,t,n){"use strict";function r(e){return o[e]}function i(e){return(""+e).replace(a,r)}var o={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},a=/[&><"']/g;e.exports=i},function(e,t,n){function r(e){var t=this;return new Promise(function(n,r){function o(t){var n;try{n=e.next(t)}catch(i){return r(i)}s(n)}function a(t){var n;try{n=e["throw"](t)}catch(i){return r(i)}s(n)}function s(e){if(e.done)return n(e.value);var r=i.call(t,e.value);return r&&u(r)?r.then(o,a):a(new TypeError('You may only yield a function, promise, generator, array, or object, but the following object was passed: "'+String(e.value)+'"'))}return"function"==typeof e&&(e=e.call(t)),e&&"function"==typeof e.next?void o():n(e)})}function i(e){return e?u(e)?e:l(e)||c(e)?r.call(this,e):"function"==typeof e?o.call(this,e):Array.isArray(e)?a.call(this,e):f(e)?s.call(this,e):e:e}function o(e){var t=this;return new Promise(function(n,r){e.call(t,function(e,t){return e?r(e):(arguments.length>2&&(t=h.call(arguments,1)),void n(t))})})}function a(e){return Promise.all(e.map(i,this))}function s(e){function t(e,t){n[t]=void 0,o.push(e.then(function(e){n[t]=e}))}for(var n=new e.constructor,r=Object.keys(e),o=[],a=0;a<r.length;a++){var s=r[a],c=i.call(this,e[s]);c&&u(c)?t(c,s):n[s]=e[s]}return Promise.all(o).then(function(){return n})}function u(e){return"function"==typeof e.then}function c(e){return"function"==typeof e.next&&"function"==typeof e["throw"]}function l(e){var t=e.constructor;return t?"GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName?!0:c(t.prototype):!1}function f(e){return Object==e.constructor}var h=Array.prototype.slice;e.exports=r["default"]=r.co=r,r.wrap=function(e){function t(){return r.call(this,e.apply(this,arguments))}return t.__generatorFunction__=e,t}},,function(e,t,n){(function(e,r){function i(e,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(n)?r.showHidden=n:n&&t._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return b(i)||(i=u(e,i,r)),i}var o=c(e,n);if(o)return o;var a=Object.keys(n),m=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),C(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(n);if(0===a.length){if(S(n)){var v=n.name?": "+n.name:"";return e.stylize("[Function"+v+"]","special")}if(_(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return e.stylize(Date.prototype.toString.call(n),"date");if(C(n))return l(n)}var g="",y=!1,x=["{","}"];if(d(n)&&(y=!0,x=["[","]"]),S(n)){var w=n.name?": "+n.name:"";g=" [Function"+w+"]"}if(_(n)&&(g=" "+RegExp.prototype.toString.call(n)),T(n)&&(g=" "+Date.prototype.toUTCString.call(n)),C(n)&&(g=" "+l(n)),0===a.length&&(!y||0==n.length))return x[0]+g+x[1];if(0>r)return _(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var E;return E=y?f(e,n,r,m,a):a.map(function(t){return h(e,n,r,m,t,y)}),e.seen.pop(),p(E,g,x)}function c(e,t){if(w(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var o=[],a=0,s=t.length;s>a;++a)o.push(N(t,String(a))?h(e,t,n,r,String(a),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))}),o}function h(e,t,n,r,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),N(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=v(n)?u(e,c.value,null):u(e,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function v(e){return null===e}function g(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function w(e){return void 0===e}function _(e){return E(e)&&"[object RegExp]"===k(e)}function E(e){return"object"==typeof e&&null!==e}function T(e){return E(e)&&"[object Date]"===k(e)}function C(e){return E(e)&&("[object Error]"===k(e)||e instanceof Error)}function S(e){return"function"==typeof e}function A(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function k(e){return Object.prototype.toString.call(e)}function O(e){return 10>e?"0"+e.toString(10):e.toString(10)}function M(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var j=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace(j,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),s=r[n];o>n;s=r[++n])a+=v(s)||!E(s)?" "+s:" "+i(s);return a},t.deprecate=function(n,i){function o(){if(!a){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),a=!0}return n.apply(this,arguments)}if(w(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(r.noDeprecation===!0)return n;var a=!1;return o};var R,P={};t.debuglog=function(e){if(w(R)&&(R=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!P[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var n=r.pid;P[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else P[e]=function(){};return P[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=m,t.isNull=v,t.isNullOrUndefined=g,t.isNumber=y,t.isString=b,t.isSymbol=x,t.isUndefined=w,t.isRegExp=_,t.isObject=E,t.isDate=T,t.isError=C,t.isFunction=S,t.isPrimitive=A,t.isBuffer=n(225);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",M(),t.format.apply(t,arguments))},t.inherits=n(224),t._extend=function(e,t){if(!t||!E(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,function(){return this}(),n(1))},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var o=t.SkinNode=function(){function e(){i(this,e)}return r(e,null,{compile:{value:function(e,t){var n=new this;return n.compile(e,t),n}}}),e}();t["default"]=o},function(e,t,n){"use strict";function r(e){var t=void 0;return function(n){t!==n&&(t=n,e(n))}}var i=function(e){return e&&e.__esModule?e["default"]:e},o=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},a=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(301)),c=t.Instance=function(){function e(t){if(s(this,e),this._context=t.context,this._object=t.object,this._children=t.children,this._bindings=[],this._concerns=[],this.onData=new u(t.onData),this.onDestroy=new u(t.onDestroy),t.bindings){var n=!0,r=!1,i=void 0;try{for(var a,c=t.bindings[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var l=a.value;this.bind.apply(this,o(l))}}catch(f){r=!0,i=f}finally{try{!n&&c["return"]&&c["return"]()}finally{if(r)throw i}}}if(t.concerns){var h=!0,p=!1,d=void 0;try{for(var m,v=t.concerns[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var g=m.value;this._concerns.push(g.instantiate(this._context,this))}}catch(f){p=!0,d=f}finally{try{!h&&v["return"]&&v["return"]()}finally{if(p)throw d}}}if(t.children){var y=!0,b=!1,x=void 0;try{for(var w,_=t.children[Symbol.iterator]();!(y=(w=_.next()).done);y=!0){var E=w.value;this._concerns.push(E.instantiate(this._context,this._object))}}catch(f){b=!0,x=f}finally{try{!y&&_["return"]&&_["return"]()}finally{if(b)throw x}}}t.onCreate&&new u(t.onCreate).call(),t.parent&&this.attachTo(t.parent)}return a(e,{bind:{value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var i=r(t.pop());1===t.length&&t[0].constant?i(t[0]()):this._bindings.push(function(e){for(var n=0;n<t.length;n++)e=t[n](e);i(e)})}},attachTo:{value:function(e){this._parent=e,this._parent.addChild(this._object)}},detach:{value:function(){this._parent&&(this._parent.removeChild(this._object),this._parent=null)}},push:{value:function(e){var t;for(t=0;t<this._bindings.length;t++)this._bindings[t](e);for(t=0;t<this._concerns.length;t++)this._concerns[t].push(e);this.onData.call(e)}},destroy:{value:function(){this.detach();for(var e=0;e<this._concerns.length;e++)this._concerns[e].destroy();this.onDestroy.call(),this._concerns=null,this._bindings=null,this._parent=null,this._object=null}},object:{get:function(){return this._object}},parent:{get:function(){return this._parent}}}),e}();t["default"]=c},function(e,t,n){(function(t){"use strict";function r(){this._callbacks=null,this._contexts=null}var i=n(15),o=n(3),a=n(2);o(r.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,n=this._contexts;if(e){"production"!==t.env.NODE_ENV?a(e.length===n.length,"Mismatched list of contexts in callback queue"):a(e.length===n.length),this._callbacks=null,this._contexts=null;for(var r=0,i=e.length;i>r;r++)e[r].call(n[r]);e.length=0,n.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),i.addPoolingTo(r),e.exports=r}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(e){return e===g.topMouseUp||e===g.topTouchEnd||e===g.topTouchCancel}function i(e){return e===g.topMouseMove||e===g.topTouchMove}function o(e){return e===g.topMouseDown||e===g.topTouchStart}function a(e,n){var r=e._dispatchListeners,i=e._dispatchIDs;if("production"!==t.env.NODE_ENV&&p(e),Array.isArray(r))for(var o=0;o<r.length&&!e.isPropagationStopped();o++)n(e,r[o],i[o]);else r&&n(e,r,i)}function s(e,t,n){e.currentTarget=v.Mount.getNode(n);var r=t(e,n);return e.currentTarget=null,r}function u(e,t){a(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function c(e){var n=e._dispatchListeners,r=e._dispatchIDs;if("production"!==t.env.NODE_ENV&&p(e),Array.isArray(n)){for(var i=0;i<n.length&&!e.isPropagationStopped();i++)if(n[i](e,r[i]))return r[i]}else if(n&&n(e,r))return r;return null}function l(e){var t=c(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function f(e){"production"!==t.env.NODE_ENV&&p(e);var n=e._dispatchListeners,r=e._dispatchIDs;"production"!==t.env.NODE_ENV?m(!Array.isArray(n),"executeDirectDispatch(...): Invalid `event`."):m(!Array.isArray(n));var i=n?n(e,r):null;return e._dispatchListeners=null,e._dispatchIDs=null,i}function h(e){return!!e._dispatchListeners}var p,d=n(10),m=n(2),v={Mount:null,injectMount:function(e){v.Mount=e,"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?m(e&&e.getNode,"EventPluginUtils.injection.injectMount(...): Injected Mount module is missing getNode."):m(e&&e.getNode))}},g=d.topLevelTypes;"production"!==t.env.NODE_ENV&&(p=function(e){var n=e._dispatchListeners,r=e._dispatchIDs,i=Array.isArray(n),o=Array.isArray(r),a=o?r.length:r?1:0,s=i?n.length:n?1:0;"production"!==t.env.NODE_ENV?m(o===i&&a===s,"EventPluginUtils: Invalid `event`."):m(o===i&&a===s)});var y={isEndish:r,isMoveish:i,isStartish:o,executeDirectDispatch:f,executeDispatch:s,executeDispatchesInOrder:u,executeDispatchesInOrderStopAtTrue:l,hasDispatches:h,injection:v,useTouchEvents:!1};e.exports=y}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(e){"production"!==t.env.NODE_ENV?c(null==e.props.checkedLink||null==e.props.valueLink,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa."):c(null==e.props.checkedLink||null==e.props.valueLink)}function i(e){r(e),"production"!==t.env.NODE_ENV?c(null==e.props.value&&null==e.props.onChange,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink."):c(null==e.props.value&&null==e.props.onChange)}function o(e){r(e),"production"!==t.env.NODE_ENV?c(null==e.props.checked&&null==e.props.onChange,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink"):c(null==e.props.checked&&null==e.props.onChange)}function a(e){this.props.valueLink.requestChange(e.target.value)}function s(e){this.props.checkedLink.requestChange(e.target.checked)}var u=n(84),c=n(2),l={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},f={Mixin:{propTypes:{value:function(e,t,n){return!e[t]||l[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:u.func}},getValue:function(e){return e.props.valueLink?(i(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(o(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(i(e),a):e.props.checkedLink?(o(e),s):e.props.onChange}};e.exports=f}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(e){e.remove()}var i=n(23),o=n(62),a=n(63),s=n(2),u={trapBubbledEvent:function(e,n){"production"!==t.env.NODE_ENV?s(this.isMounted(),"Must be mounted to trap events"):s(this.isMounted());var r=this.getDOMNode();"production"!==t.env.NODE_ENV?s(r,"LocalEventTrapMixin.trapBubbledEvent(...): Requires node to be rendered."):s(r);var a=i.trapBubbledEvent(e,n,r);this._localEventListeners=o(this._localEventListeners,a)},componentWillUnmount:function(){this._localEventListeners&&a(this._localEventListeners,r)}};e.exports=u}).call(t,n(1))},function(e,t,n){"use strict";var r=n(79),i=n(12),o={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:r.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){i.purgeID(e)}};e.exports=o},function(e,t,n){(function(t){"use strict";var r=n(2),i=!1,o={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){"production"!==t.env.NODE_ENV?r(!i,"ReactCompositeComponent: injectEnvironment() can only be called once."):r(!i),o.unmountIDFromEnvironment=e.unmountIDFromEnvironment,o.replaceNodeWithMarkupByID=e.replaceNodeWithMarkupByID,o.processChildrenUpdates=e.processChildrenUpdates,i=!0}}};e.exports=o}).call(t,n(1))},function(e,t,n){(function(t){"use strict";var r=n(3),i=n(43),o=n(5),a=!1,s={current:i,withContext:function(e,n){"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?o(a,"withContext is deprecated and will be removed in a future version. Use a wrapper component with getChildContext instead."):null,a=!0);var i,u=s.current;s.current=r({},u,e);try{i=n()}finally{s.current=u}return i}};e.exports=s}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(e){e&&(null!=e.dangerouslySetInnerHTML&&("production"!==t.env.NODE_ENV?g(null==e.children,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."):g(null==e.children),"production"!==t.env.NODE_ENV?g(null!=e.dangerouslySetInnerHTML.__html,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit http://fb.me/react-invariant-dangerously-set-inner-html for more information."):g(null!=e.dangerouslySetInnerHTML.__html)),"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?x(null==e.innerHTML,"Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."):null,"production"!==t.env.NODE_ENV?x(!e.contentEditable||null==e.children,"A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."):null),"production"!==t.env.NODE_ENV?g(null==e.style||"object"==typeof e.style,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX."):g(null==e.style||"object"==typeof e.style))}function i(e,n,r,i){"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?x("onScroll"!==n||y("scroll",!0),"This browser doesn't support the `onScroll` event"):null);var o=h.findReactContainerForID(e);if(o){var a=o.nodeType===S?o.ownerDocument:o;_(n,a)}i.getPutListenerQueue().enqueuePutListener(e,n,r)}function o(e){N.call(M,e)||("production"!==t.env.NODE_ENV?g(O.test(e),"Invalid tag: %s",e):g(O.test(e)),M[e]=!0)}function a(e){o(e),this._tag=e,this._renderedChildren=null,this._previousStyleCopy=null,this._rootNodeID=null}var s=n(76),u=n(21),c=n(28),l=n(23),f=n(54),h=n(12),p=n(161),d=n(18),m=n(3),v=n(44),g=n(2),y=n(68),b=n(20),x=n(5),w=l.deleteListener,_=l.listenTo,E=l.registrationNameModules,T={
string:!0,number:!0},C=b({style:null}),S=1,A=null,k={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},O=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,M={},N={}.hasOwnProperty;a.displayName="ReactDOMComponent",a.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,n){this._rootNodeID=e,r(this._currentElement.props);var i=k[this._tag]?"":"</"+this._tag+">";return this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t,n)+i},_createOpenTagMarkupAndPutListeners:function(e){var t=this._currentElement.props,n="<"+this._tag;for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];if(null!=o)if(E.hasOwnProperty(r))i(this._rootNodeID,r,o,e);else{r===C&&(o&&(o=this._previousStyleCopy=m({},t.style)),o=s.createMarkupForStyles(o));var a=c.createMarkupForProperty(r,o);a&&(n+=" "+a)}}if(e.renderToStaticMarkup)return n+">";var u=c.createMarkupForID(this._rootNodeID);return n+" "+u+">"},_createContentMarkup:function(e,t){var n="";("listing"===this._tag||"pre"===this._tag||"textarea"===this._tag)&&(n="\n");var r=this._currentElement.props,i=r.dangerouslySetInnerHTML;if(null!=i){if(null!=i.__html)return n+i.__html}else{var o=T[typeof r.children]?r.children:null,a=null!=o?null:r.children;if(null!=o)return n+v(o);if(null!=a){var s=this.mountChildren(a,e,t);return n+s.join("")}}return n},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,i){r(this._currentElement.props),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e,i)},_updateDOMProperties:function(e,t){var n,r,o,a=this._currentElement.props;for(n in e)if(!a.hasOwnProperty(n)&&e.hasOwnProperty(n))if(n===C){var s=this._previousStyleCopy;for(r in s)s.hasOwnProperty(r)&&(o=o||{},o[r]="");this._previousStyleCopy=null}else E.hasOwnProperty(n)?w(this._rootNodeID,n):(u.isStandardName[n]||u.isCustomAttribute(n))&&A.deletePropertyByID(this._rootNodeID,n);for(n in a){var c=a[n],l=n===C?this._previousStyleCopy:e[n];if(a.hasOwnProperty(n)&&c!==l)if(n===C)if(c?c=this._previousStyleCopy=m({},c):this._previousStyleCopy=null,l){for(r in l)!l.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(o=o||{},o[r]="");for(r in c)c.hasOwnProperty(r)&&l[r]!==c[r]&&(o=o||{},o[r]=c[r])}else o=c;else E.hasOwnProperty(n)?i(this._rootNodeID,n,c,t):(u.isStandardName[n]||u.isCustomAttribute(n))&&A.updatePropertyByID(this._rootNodeID,n,c)}o&&A.updateStylesByID(this._rootNodeID,o)},_updateDOMChildren:function(e,t,n){var r=this._currentElement.props,i=T[typeof e.children]?e.children:null,o=T[typeof r.children]?r.children:null,a=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=r.dangerouslySetInnerHTML&&r.dangerouslySetInnerHTML.__html,u=null!=i?null:e.children,c=null!=o?null:r.children,l=null!=i||null!=a,f=null!=o||null!=s;null!=u&&null==c?this.updateChildren(null,t,n):l&&!f&&this.updateTextContent(""),null!=o?i!==o&&this.updateTextContent(""+o):null!=s?a!==s&&A.updateInnerHTMLByID(this._rootNodeID,s):null!=c&&this.updateChildren(c,t,n)},unmountComponent:function(){this.unmountChildren(),l.deleteAllListeners(this._rootNodeID),f.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null}},d.measureMethods(a,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),m(a.prototype,a.Mixin,p.Mixin),a.injection={injectIDOperations:function(e){a.BackendIDOperations=A=e}},e.exports=a}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(e){l[e]=!0}function i(e){delete l[e]}function o(e){return!!l[e]}var a,s=n(4),u=n(25),c=n(2),l={},f={injectEmptyComponent:function(e){a=s.createFactory(e)}},h=function(){};h.prototype.componentDidMount=function(){var e=u.get(this);e&&r(e._rootNodeID)},h.prototype.componentWillUnmount=function(){var e=u.get(this);e&&i(e._rootNodeID)},h.prototype.render=function(){return"production"!==t.env.NODE_ENV?c(a,"Trying to return null from a render, but no null placeholder component was injected."):c(a),a()};var p=s.createElement(h),d={emptyElement:p,injection:f,isNullComponentID:o};e.exports=d}).call(t,n(1))},function(e,t,n){"use strict";var r={currentlyMountingInstance:null,currentlyUnmountingInstance:null};e.exports=r},function(e,t,n){"use strict";var r=n(33),i=r({prop:null,context:null,childContext:null});e.exports=i},function(e,t,n){(function(t){"use strict";function r(e){e!==o.currentlyMountingInstance&&c.enqueueUpdate(e)}function i(e,n){"production"!==t.env.NODE_ENV?f(null==a.current,"%s(...): Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state.",n):f(null==a.current);var r=u.get(e);return r?r===o.currentlyUnmountingInstance?null:r:("production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?h(!n,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op.",n,n):null),null)}var o=n(59),a=n(17),s=n(4),u=n(25),c=n(13),l=n(3),f=n(2),h=n(5),p={enqueueCallback:function(e,n){"production"!==t.env.NODE_ENV?f("function"==typeof n,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."):f("function"==typeof n);var a=i(e);return a&&a!==o.currentlyMountingInstance?(a._pendingCallbacks?a._pendingCallbacks.push(n):a._pendingCallbacks=[n],void r(a)):null},enqueueCallbackInternal:function(e,n){"production"!==t.env.NODE_ENV?f("function"==typeof n,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."):f("function"==typeof n),e._pendingCallbacks?e._pendingCallbacks.push(n):e._pendingCallbacks=[n],r(e)},enqueueForceUpdate:function(e){var t=i(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t){var n=i(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(e,t){var n=i(e,"setState");if(n){var o=n._pendingStateQueue||(n._pendingStateQueue=[]);o.push(t),r(n)}},enqueueSetProps:function(e,n){var o=i(e,"setProps");if(o){"production"!==t.env.NODE_ENV?f(o._isTopLevel,"setProps(...): You called `setProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created."):f(o._isTopLevel);var a=o._pendingElement||o._currentElement,u=l({},a.props,n);o._pendingElement=s.cloneAndReplaceProps(a,u),r(o)}},enqueueReplaceProps:function(e,n){var o=i(e,"replaceProps");if(o){"production"!==t.env.NODE_ENV?f(o._isTopLevel,"replaceProps(...): You called `replaceProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created."):f(o._isTopLevel);var a=o._pendingElement||o._currentElement;o._pendingElement=s.cloneAndReplaceProps(a,n),r(o)}},enqueueElementInternal:function(e,t){e._pendingElement=t,r(e)}};e.exports=p}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(e,n){if("production"!==t.env.NODE_ENV?i(null!=n,"accumulateInto(...): Accumulated items must not be null or undefined."):i(null!=n),null==e)return n;var r=Array.isArray(e),o=Array.isArray(n);return r&&o?(e.push.apply(e,n),e):r?(e.push(n),e):o?[e].concat(n):[e,n]}var i=n(2);e.exports=r}).call(t,n(1))},function(e,t,n){"use strict";var r=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};e.exports=r},function(e,t,n){"use strict";function r(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}e.exports=r},function(e,t,n){"use strict";function r(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=o[e];return r?!!n[r]:!1}function i(e){return r}var o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=i},function(e,t,n){"use strict";function r(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}e.exports=r},function(e,t,n){(function(t){"use strict";function r(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function i(e,n){var i;if((null===e||e===!1)&&(e=a.emptyElement),"object"==typeof e){var o=e;"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?l(o&&("function"==typeof o.type||"string"==typeof o.type),"Only functions or strings can be mounted as React components."):null),i=n===o.type&&"string"==typeof o.type?s.createInternalComponent(o):r(o.type)?new o.type(o):new f}else"string"==typeof e||"number"==typeof e?i=s.createInstanceForText(e):"production"!==t.env.NODE_ENV?c(!1,"Encountered invalid React node of type %s",typeof e):c(!1);return"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?l("function"==typeof i.construct&&"function"==typeof i.mountComponent&&"function"==typeof i.receiveComponent&&"function"==typeof i.unmountComponent,"Only React Components can be mounted."):null),i.construct(e),i._mountIndex=0,i._mountImage=null,"production"!==t.env.NODE_ENV&&(i._isOwnerNecessary=!1,i._warnedAboutRefsInRender=!1),"production"!==t.env.NODE_ENV&&Object.preventExtensions&&Object.preventExtensions(i),i}var o=n(142),a=n(58),s=n(39),u=n(3),c=n(2),l=n(5),f=function(){};u(f.prototype,o.Mixin,{_instantiateReactComponent:i}),e.exports=i}).call(t,n(1))},function(e,t,n){"use strict";/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @param {?boolean} capture Check if the capture phase is supported.
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */
function r(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"==typeof a[n]}return!r&&i&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var i,o=n(6);o.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=r},function(e,t,n){"use strict";var r=n(6),i=/^[ \r\n\t\f]/,o=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,a=function(e,t){e.innerHTML=t};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(a=function(e,t){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=t})}),r.canUseDOM){var s=document.createElement("div");s.innerHTML=" ",""===s.innerHTML&&(a=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),i.test(t)||"<"===t[0]&&o.test(t)){e.innerHTML="\ufeff"+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}e.exports=a},function(e,t,n){(function(t){"use strict";function r(e,n){if(null!=e&&null!=n){var r=typeof e,o=typeof n;if("string"===r||"number"===r)return"string"===o||"number"===o;if("object"===o&&e.type===n.type&&e.key===n.key){var a=e._owner===n._owner,s=null,u=null,c=null;return"production"!==t.env.NODE_ENV&&(a||(null!=e._owner&&null!=e._owner.getPublicInstance()&&null!=e._owner.getPublicInstance().constructor&&(s=e._owner.getPublicInstance().constructor.displayName),null!=n._owner&&null!=n._owner.getPublicInstance()&&null!=n._owner.getPublicInstance().constructor&&(u=n._owner.getPublicInstance().constructor.displayName),null!=n.type&&null!=n.type.displayName&&(c=n.type.displayName),null!=n.type&&"string"==typeof n.type&&(c=n.type),("string"!=typeof n.type||"input"===n.type||"textarea"===n.type)&&(null!=e._owner&&e._owner._isOwnerNecessary===!1||null!=n._owner&&n._owner._isOwnerNecessary===!1)&&(null!=e._owner&&(e._owner._isOwnerNecessary=!0),null!=n._owner&&(n._owner._isOwnerNecessary=!0),"production"!==t.env.NODE_ENV?i(!1,"<%s /> is being rendered by both %s and %s using the same key (%s) in the same place. Currently, this means that they don't preserve state. This behavior should be very rare so we're considering deprecating it. Please contact the React team and explain your use case so that we can take that into consideration.",c||"Unknown Component",s||"[Unknown]",u||"[Unknown]",e.key):null))),a}}return!1}var i=n(5);e.exports=r}).call(t,n(1))},function(e,t,n){/*!
	  Copyright (c) 2015 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
function r(){for(var e,t="",n=0;n<arguments.length;n++)if(e=arguments[n])if("string"==typeof e||"number"==typeof e)t+=" "+e;else if("[object Array]"===Object.prototype.toString.call(e))t+=" "+r.apply(null,e);else if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&e[i]&&(t+=" "+i);return t.substr(1)}var i,o;"undefined"!=typeof e&&e.exports&&(e.exports=r),i=[],o=function(){return r}.apply(t,i),!(void 0!==o&&(e.exports=o))},function(e,t,n){function r(){function e(t){return e.validate(t),t}var t=[].slice.call(arguments);return e.validate=function(e){for(var n=0;n<t.length;n++)i(t[n],e)},e}function i(e,t){if(e===Number&&(e="number"),e===String&&(e="string"),"string"==typeof e){if(typeof t!==e)throw new Error("should be a "+e)}else if("function"==typeof e){if("function"==typeof e.validate)e.validate(t);else if(!(t instanceof e))throw new Error("should be an instance of "+e)}else{if("object"!=typeof e)throw new Error("invalid schema");if(!t)throw new Error("should be an object");o(e,t)}}function o(e,t){for(var n in e){if(!(n in t))throw new Error('missing property: "'+n+'"');try{i(e[n],t[n])}catch(r){throw new Error('error in property "'+n+'": '+r.message)}}}e.exports=r,r.maybe=function(e){function t(e){return t.validate(e),e}return t.validate=function(t){null!==t&&void 0!==t&&i(e,t)},t}},function(e,t,n){"use strict";function r(e){return function(t,n){for(var r=Math.abs(t-n),i=0;i<f.length;i++)if(r<e(f[i]))return f[i].value;return n>t?c:l}}function i(e){return e>=4}function o(e){return e===l||i(e)}function a(e){return 1===e?100:2===e?80:3===e?50:0}var s=function(e){return e&&e.__esModule?e["default"]:e};t.judgeTimeWith=r,t.isBad=i,t.breaksCombo=o,t.weight=a,Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(14)),c=0;t.UNJUDGED=c;var l=-1;t.MISSED=l;var f=[{value:1,timegate:.02,endTimegate:.04},{value:2,timegate:.05,endTimegate:.1},{value:3,timegate:.1,endTimegate:.2},{value:4,timegate:.2,endTimegate:.2}];t.JUDGMENTS=f;var h=r(u.property("timegate"));t.judgeTime=h;var p=r(u.property("endTimegate"));t.judgeEndTime=p},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(222)),o=void 0,a=0;o=window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},o.synchronize=function(e){function t(e){a=e+Date.now()-o()}function n(e,n){e?console.error("Cannot synchronize time!",e):(t(n),console.log("Synchronized. Offset = "+a))}i(e,n,t)},o["synchronized"]=function(){var e=a;return function(){return o()+e}},t.now=o,t["default"]=o},function(e,t,n){"use strict";function r(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var i={boxFlex:!0,boxFlexGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},o=["Webkit","ms","Moz","O"];Object.keys(i).forEach(function(e){o.forEach(function(t){i[r(t,e)]=i[e]})});var a={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},s={isUnitlessNumber:i,shorthandPropertyExpansions:a};e.exports=s},function(e,t,n){(function(t){"use strict";var r=n(75),i=n(6),o=n(181),a=n(185),s=n(192),u=n(195),c=n(5),l=u(function(e){return s(e)}),f="cssFloat";if(i.canUseDOM&&void 0===document.documentElement.style.cssFloat&&(f="styleFloat"),"production"!==t.env.NODE_ENV)var h=/^(?:webkit|moz|o)[A-Z]/,p=/;\s*$/,d={},m={},v=function(e){d.hasOwnProperty(e)&&d[e]||(d[e]=!0,"production"!==t.env.NODE_ENV?c(!1,"Unsupported style property %s. Did you mean %s?",e,o(e)):null)},g=function(e){d.hasOwnProperty(e)&&d[e]||(d[e]=!0,"production"!==t.env.NODE_ENV?c(!1,"Unsupported vendor-prefixed style property %s. Did you mean %s?",e,e.charAt(0).toUpperCase()+e.slice(1)):null)},y=function(e,n){m.hasOwnProperty(n)&&m[n]||(m[n]=!0,"production"!==t.env.NODE_ENV?c(!1,'Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.',e,n.replace(p,"")):null)},b=function(e,t){e.indexOf("-")>-1?v(e):h.test(e)?g(e):p.test(t)&&y(e,t)};var x={createMarkupForStyles:function(e){var n="";for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];"production"!==t.env.NODE_ENV&&b(r,i),null!=i&&(n+=l(r)+":",n+=a(r,i)+";")}return n||null},setValueForStyles:function(e,n){var i=e.style;for(var o in n)if(n.hasOwnProperty(o)){"production"!==t.env.NODE_ENV&&b(o,n[o]);var s=a(o,n[o]);if("float"===o&&(o=f),s)i[o]=s;else{var u=r.shorthandPropertyExpansions[o];if(u)for(var c in u)i[c]="";else i[o]=""}}}};e.exports=x}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(){if(s)for(var e in u){var n=u[e],r=s.indexOf(e);if("production"!==t.env.NODE_ENV?a(r>-1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",e):a(r>-1),!c.plugins[r]){"production"!==t.env.NODE_ENV?a(n.extractEvents,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",e):a(n.extractEvents),c.plugins[r]=n;var o=n.eventTypes;for(var l in o)"production"!==t.env.NODE_ENV?a(i(o[l],n,l),"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",l,e):a(i(o[l],n,l))}}}function i(e,n,r){"production"!==t.env.NODE_ENV?a(!c.eventNameDispatchConfigs.hasOwnProperty(r),"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",r):a(!c.eventNameDispatchConfigs.hasOwnProperty(r)),c.eventNameDispatchConfigs[r]=e;var i=e.phasedRegistrationNames;if(i){for(var s in i)if(i.hasOwnProperty(s)){var u=i[s];o(u,n,r)}return!0}return e.registrationName?(o(e.registrationName,n,r),!0):!1}function o(e,n,r){"production"!==t.env.NODE_ENV?a(!c.registrationNameModules[e],"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",e):a(!c.registrationNameModules[e]),c.registrationNameModules[e]=n,c.registrationNameDependencies[e]=n.eventTypes[r].dependencies}var a=n(2),s=null,u={},c={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){"production"!==t.env.NODE_ENV?a(!s,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."):a(!s),s=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var n=!1;for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];u.hasOwnProperty(i)&&u[i]===o||("production"!==t.env.NODE_ENV?a(!u[i],"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",i):a(!u[i]),u[i]=o,n=!0)}n&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return c.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var r=c.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){s=null;for(var e in u)u.hasOwnProperty(e)&&delete u[e];c.plugins.length=0;var t=c.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=c.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};e.exports=c}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(e,t){this.props=e,this.context=t}var i=n(61),o=n(2),a=n(5);if(r.prototype.setState=function(e,n){"production"!==t.env.NODE_ENV?o("object"==typeof e||"function"==typeof e||null==e,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."):o("object"==typeof e||"function"==typeof e||null==e),"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?a(null!=e,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."):null),i.enqueueSetState(this,e),n&&i.enqueueCallback(this,n)},r.prototype.forceUpdate=function(e){i.enqueueForceUpdate(this),e&&i.enqueueCallback(this,e)},"production"!==t.env.NODE_ENV){var s={getDOMNode:"getDOMNode",isMounted:"isMounted",replaceProps:"replaceProps",replaceState:"replaceState",setProps:"setProps"},u=function(e,n){try{Object.defineProperty(r.prototype,e,{get:function(){return void("production"!==t.env.NODE_ENV?a(!1,"%s(...) is deprecated in plain JavaScript React classes.",n):null)}})}catch(i){}};for(var c in s)s.hasOwnProperty(c)&&u(c,s[c])}e.exports=r}).call(t,n(1))},function(e,t,n){(function(t){"use strict";var r=n(76),i=n(131),o=n(28),a=n(12),s=n(18),u=n(2),c=n(69),l={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},f={updatePropertyByID:function(e,n,r){var i=a.getNode(e);"production"!==t.env.NODE_ENV?u(!l.hasOwnProperty(n),"updatePropertyByID(...): %s",l[n]):u(!l.hasOwnProperty(n)),null!=r?o.setValueForProperty(i,n,r):o.deleteValueForProperty(i,n)},deletePropertyByID:function(e,n,r){var i=a.getNode(e);"production"!==t.env.NODE_ENV?u(!l.hasOwnProperty(n),"updatePropertyByID(...): %s",l[n]):u(!l.hasOwnProperty(n)),o.deleteValueForProperty(i,n,r)},updateStylesByID:function(e,t){var n=a.getNode(e);r.setValueForStyles(n,t)},updateInnerHTMLByID:function(e,t){var n=a.getNode(e);c(n,t)},updateTextContentByID:function(e,t){var n=a.getNode(e);i.updateTextContent(n,t)},dangerouslyReplaceNodeWithMarkupByID:function(e,t){var n=a.getNode(e);i.dangerouslyReplaceNodeWithMarkup(n,t)},dangerouslyProcessChildrenUpdates:function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=a.getNode(e[n].parentID);i.processUpdates(e,t)}};s.measureMethods(f,"ReactDOMIDOperations",{updatePropertyByID:"updatePropertyByID",deletePropertyByID:"deletePropertyByID",updateStylesByID:"updateStylesByID",updateInnerHTMLByID:"updateInnerHTMLByID",updateTextContentByID:"updateTextContentByID",dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),e.exports=f}).call(t,n(1))},function(e,t,n){"use strict";var r=n(28),i=n(54),o=n(57),a=n(3),s=n(44),u=function(e){};a(u.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){this._rootNodeID=e;var i=s(this._stringText);return t.renderToStaticMarkup?i:"<span "+r.createMarkupForID(e)+">"+i+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;n!==this._stringText&&(this._stringText=n,o.BackendIDOperations.updateTextContentByID(this._rootNodeID,n))}},unmountComponent:function(){i.unmountIDFromEnvironment(this._rootNodeID)}}),e.exports=u},function(e,t,n){"use strict";function r(e){return o(document.documentElement,e)}var i=n(151),o=n(88),a=n(90),s=n(91),u={hasSelectionCapabilities:function(e){return e&&("INPUT"===e.nodeName&&"text"===e.type||"TEXTAREA"===e.nodeName||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:u.hasSelectionCapabilities(e)?u.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,i=e.selectionRange;t!==n&&r(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,i),a(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&"INPUT"===e.nodeName){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=i.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if("undefined"==typeof r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&"INPUT"===e.nodeName){var o=e.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select()}else i.setOffsets(e,t)}};e.exports=u},function(e,t,n){"use strict";var r=n(179),i={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return e.replace(">"," "+i.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var n=t.getAttribute(i.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var o=r(e);return o===n}};e.exports=i},function(e,t,n){"use strict";var r=n(33),i=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});e.exports=i},function(e,t,n){"use strict";function r(e){function t(t,n,r,i,o){if(i=i||w,null==n[r]){var a=b[o];return t?new Error("Required "+a+" `"+r+"` was not specified in "+("`"+i+"`.")):null}return e(n,r,i,o)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function i(e){function t(t,n,r,i){var o=t[n],a=m(o);if(a!==e){var s=b[i],u=v(o);return new Error("Invalid "+s+" `"+n+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `"+e+"`."))}return null}return r(t)}function o(){return r(x.thatReturns(null))}function a(e){function t(t,n,r,i){var o=t[n];if(!Array.isArray(o)){var a=b[i],s=m(o);return new Error("Invalid "+a+" `"+n+"` of type "+("`"+s+"` supplied to `"+r+"`, expected an array."))}for(var u=0;u<o.length;u++){var c=e(o,u,r,i);if(c instanceof Error)return c}return null}return r(t)}function s(){function e(e,t,n,r){if(!g.isValidElement(e[t])){var i=b[r];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactElement."))}return null}return r(e)}function u(e){function t(t,n,r,i){if(!(t[n]instanceof e)){var o=b[i],a=e.name||w;return new Error("Invalid "+o+" `"+n+"` supplied to "+("`"+r+"`, expected instance of `"+a+"`."))}return null}return r(t)}function c(e){function t(t,n,r,i){for(var o=t[n],a=0;a<e.length;a++)if(o===e[a])return null;var s=b[i],u=JSON.stringify(e);return new Error("Invalid "+s+" `"+n+"` of value `"+o+"` "+("supplied to `"+r+"`, expected one of "+u+"."))}return r(t)}function l(e){function t(t,n,r,i){var o=t[n],a=m(o);if("object"!==a){var s=b[i];return new Error("Invalid "+s+" `"+n+"` of type "+("`"+a+"` supplied to `"+r+"`, expected an object."))}for(var u in o)if(o.hasOwnProperty(u)){var c=e(o,u,r,i);if(c instanceof Error)return c}return null}return r(t)}function f(e){function t(t,n,r,i){for(var o=0;o<e.length;o++){var a=e[o];if(null==a(t,n,r,i))return null}var s=b[i];return new Error("Invalid "+s+" `"+n+"` supplied to "+("`"+r+"`."))}return r(t)}function h(){function e(e,t,n,r){if(!d(e[t])){var i=b[r];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(e)}function p(e){function t(t,n,r,i){var o=t[n],a=m(o);if("object"!==a){var s=b[i];return new Error("Invalid "+s+" `"+n+"` of type `"+a+"` "+("supplied to `"+r+"`, expected `object`."))}for(var u in e){var c=e[u];if(c){var l=c(o,u,r,i);if(l)return l}}return null}return r(t)}function d(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(d);if(null===e||g.isValidElement(e))return!0;e=y.extractIfFragment(e);for(var t in e)if(!d(e[t]))return!1;return!0;default:return!1}}function m(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function v(e){var t=m(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var g=n(4),y=n(38),b=n(40),x=n(19),w="<<anonymous>>",_=s(),E=h(),T={array:i("array"),bool:i("boolean"),func:i("function"),number:i("number"),object:i("object"),string:i("string"),any:o(),arrayOf:a,element:_,instanceOf:u,node:E,objectOf:l,oneOf:c,oneOfType:f,shape:p};e.exports=T},function(e,t,n){"use strict";function r(){this.listenersToPut=[]}var i=n(15),o=n(23),a=n(3);a(r.prototype,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];o.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),i.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";var r={injectCreateReactRootIndex:function(e){i.createReactRootIndex=e}},i={createReactRootIndex:null,injection:r};e.exports=i},function(e,t,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};e.exports=r},function(e,t,n){function r(e,t){return e&&t?e===t?!0:i(e)?!1:i(t)?r(e,t.parentNode):e.contains?e.contains(t):e.compareDocumentPosition?!!(16&e.compareDocumentPosition(t)):!1:!1}var i=n(193);e.exports=r},function(e,t,n){(function(t){"use strict";function r(e){if("production"!==t.env.NODE_ENV){var n=i.current;null!==n&&("production"!==t.env.NODE_ENV?c(n._warnedAboutRefsInRender,"%s is accessing getDOMNode or findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",n.getName()||"A component"):null,n._warnedAboutRefsInRender=!0)}return null==e?null:u(e)?e:o.has(e)?a.getNodeFromInstance(e):("production"!==t.env.NODE_ENV?s(null==e.render||"function"!=typeof e.render,"Component (with keys: %s) contains `render` method but is not mounted in the DOM",Object.keys(e)):s(null==e.render||"function"!=typeof e.render),void("production"!==t.env.NODE_ENV?s(!1,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(e)):s(!1)))}var i=n(17),o=n(25),a=n(12),s=n(2),u=n(95),c=n(5);e.exports=r}).call(t,n(1))},function(e,t,n){"use strict";function r(e){try{e.focus()}catch(t){}}e.exports=r},function(e,t,n){function r(){try{return document.activeElement||document.body}catch(e){return document.body}}e.exports=r},function(e,t,n){"use strict";function r(e){var t=e&&(i&&e[i]||e[o]);return"function"==typeof t?t:void 0}var i="function"==typeof Symbol&&Symbol.iterator,o="@@iterator";e.exports=r},function(e,t,n){(function(t){function r(e){return"production"!==t.env.NODE_ENV?o(!!a,"Markup wrapping node not initialized"):o(!!a),h.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||("*"===e?a.innerHTML="<link />":a.innerHTML="<"+e+"></"+e+">",s[e]=!a.firstChild),s[e]?h[e]:null}var i=n(6),o=n(2),a=i.canUseDOM?document.createElement("div"):null,s={circle:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},u=[1,'<select multiple="true">',"</select>"],c=[1,"<table>","</table>"],l=[3,"<table><tbody><tr>","</tr></tbody></table>"],f=[1,"<svg>","</svg>"],h={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:c,colgroup:c,tbody:c,tfoot:c,thead:c,td:l,th:l,circle:f,defs:f,ellipse:f,g:f,line:f,linearGradient:f,path:f,polygon:f,polyline:f,radialGradient:f,rect:f,stop:f,text:f};e.exports=r}).call(t,n(1))},function(e,t,n){"use strict";function r(){return!o&&i.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var i=n(6),o=null;e.exports=r},function(e,t,n){function r(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}e.exports=r},function(e,t,n){"use strict";function r(e){return e&&("INPUT"===e.nodeName&&i[e.type]||"TEXTAREA"===e.nodeName)}var i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=r},function(e,t,n){(function(t){"use strict";function r(e){return g[e]}function i(e,t){return e&&null!=e.key?a(e.key):t.toString(36)}function o(e){return(""+e).replace(y,r)}function a(e){return"$"+o(e)}function s(e,n,r,o,u){var f=typeof e;if(("undefined"===f||"boolean"===f)&&(e=null),null===e||"string"===f||"number"===f||c.isValidElement(e))return o(u,e,""===n?m+i(e,0):n,r),1;var g,y,x,w=0;if(Array.isArray(e))for(var _=0;_<e.length;_++)g=e[_],y=(""!==n?n+v:m)+i(g,_),x=r+w,w+=s(g,y,x,o,u);else{var E=h(e);if(E){var T,C=E.call(e);if(E!==e.entries)for(var S=0;!(T=C.next()).done;)g=T.value,y=(""!==n?n+v:m)+i(g,S++),x=r+w,w+=s(g,y,x,o,u);else for("production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?d(b,"Using Maps as children is not yet fully supported. It is an experimental feature that might be removed. Convert it to a sequence / iterable of keyed ReactElements instead."):null,b=!0);!(T=C.next()).done;){var A=T.value;A&&(g=A[1],y=(""!==n?n+v:m)+a(A[0])+v+i(g,0),x=r+w,w+=s(g,y,x,o,u))}}else if("object"===f){"production"!==t.env.NODE_ENV?p(1!==e.nodeType,"traverseAllChildren(...): Encountered an invalid child; DOM elements are not valid children of React components."):p(1!==e.nodeType);var k=l.extract(e);for(var O in k)k.hasOwnProperty(O)&&(g=k[O],y=(""!==n?n+v:m)+a(O)+v+i(g,0),x=r+w,w+=s(g,y,x,o,u))}}return w}function u(e,t,n){return null==e?0:s(e,"",0,t,n)}var c=n(4),l=n(38),f=n(24),h=n(92),p=n(2),d=n(5),m=f.SEPARATOR,v=":",g={"=":"=0",".":"=1",":":"=2"},y=/[=.:]/g,b=!1;e.exports=u}).call(t,n(1))},function(e,t,n){"use strict";function r(e,t){t=t||{},u.call(this);var n=i.defaults(t.numberOfInputs,1),r=i.defaults(t.numberOfOutputs,1),o=i.defaults(t.channelCount,2),a=i.defaults(t.channelCountMode,"max"),s=i.defaults(t.channelInterpretation,"speakers");i.defineAttribute(this,"context","readonly",e,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"numberOfInputs","readonly",n,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"numberOfOutputs","readonly",r,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"channelCount","number",o,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"channelCountMode",c,a,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"channelInterpretation",l,s,function(e){throw new TypeError(i.formatter.concat(this,e))}),Object.defineProperties(this,{$name:{value:i.defaults(t.name,"AudioNode")},$context:{value:e},$inputs:{value:[]}}),this._outputs=[],this._tick=-1}var i=n(35),o=n(118),a=n(34),s=n(250),u=n(384),c="enum { max, clamped-max, explicit }",l="enum { speakers, discrete }",f=function(){throw new TypeError("Illegal constructor")};i.inherits(f,u),i.inherits(r,f),r.exports=f,f.prototype.connect=function(e){function t(e){return this.$context!==e.$context?"cannot connect to a destination belonging to a different audio context":void 0}function n(e,t){return 0>e||this.numberOfOutputs<=e?t+" index ("+e+") exceeds number of outputs ("+this.numberOfOutputs+")":void 0}function r(t,n){return 0>t||e.numberOfInputs<=t?n+" index ("+t+") exceeds number of inputs ("+e.numberOfInputs+")":void 0}var i=new o(this,"connect",[{name:"destination",type:"AudioNode | AudioParam",validate:t},{name:"output",type:"optional number",validate:n},{name:"input",type:"optional number",validate:r}]);i.validateArguments(arguments,function(e){throw new TypeError(i.form+"; "+e)});var a=this._outputs.indexOf(e);-1===a&&(this._outputs.push(e),e.$inputs.push(this))},f.prototype.disconnect=function(){function e(e,t){return 0>e||this.numberOfOutputs<=e?t+" index ("+e+") exceeds number of outputs ("+this.numberOfOutputs+")":void 0}var t=new o(this,"connect",[{name:"output",type:"optional number",validate:e}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)}),this._outputs.splice(0).forEach(function(e){var t=e.$inputs.indexOf(this);-1!==t&&e.$inputs.splice(t,1)},this)},r.prototype.toJSON=function(e){return i.toJSON(this,function(e,t){var n={};return n.name=i.name(e),(e.constructor.jsonAttrs||[]).forEach(function(r){e[r]&&e[r].toJSON?n[r]=e[r].toJSON(t):n[r]=e[r]}),e.$context.VERBOSE_JSON&&(n.numberOfInputs=e.numberOfInputs,n.numberOfOutputs=e.numberOfOutputs,n.channelCount=e.channelCount,n.channelCountMode=e.channelCountMode,n.channelInterpretation=e.channelInterpretation),n.inputs=e.$inputs.map(function(e){return e.toJSON(t)}),n},e)},r.prototype.$process=function(e,t){this._tick!==t&&(this._tick=t,this.$inputs.forEach(function(n){n.$process(e,t)}),Object.keys(this).forEach(function(n){this[n]instanceof s&&this[n].$process(e,t)},this),this._process&&this._process(e))},e.exports=a.AudioNode=r},function(e,t,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(){var e=void 0===arguments[0]?function(e){return e}:arguments[0],t=new l.Bus,n=function(){if(h)throw new Error("An action should not fire another action!");try{h=!0,t.push(e.apply(null,arguments))}finally{h=!1}};return n.bus=t,n.debug=function(e){return t.map(function(t){return[e,t]}).log(),n},n}function i(e){return e=o(e),e.get=function(){var t=void 0,n=e.onValue(function(e){return t=e});return setTimeout(n),t},e}function o(e){if(e instanceof l.Property)return e;if(e instanceof l.EventStream)throw new Error("Please convert Bacon.EventStream to Bacon.Property first.");if(e&&"object"==typeof e)return l.combineTemplate(e);throw new Error("Expected a Bacon.Property or a template.")}var a=function(e){return e&&e.__esModule?e["default"]:e},s=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},c=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};t.Action=r,t.Store=i,Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(126)),f=a(n(7));t.Bacon=l;{var h=!1;t.Binding=function(e){function t(){c(this,t),null!=e&&e.apply(this,arguments)}return u(t,e),s(t,{render:{value:function(){return null}},componentDidMount:{value:function(){var e=this;this._unsubscribe=this.props.store.onValue(function(t){return e.props.onChange(t)})}},componentWillUnmount:{value:function(){this._unsubscribe()}}}),t}(f.Component)}},function(module,exports,__webpack_require__){"use strict";function createFunction(code){var fn=eval("(function(get) { return "+code+" })");return fn.displayName="("+code+")",fn.constant=!!/^[\-0-9\.]+$/.test(code),fn}function Expression(e){log("parsing %s",e);var t=parser.parse(e);log("parsed %s => %s",e,t);var n=createFunction(t),r=void 0;return r=n.constant?n:function(e){return n(function(t){return e[t]})},r.constant=n.constant,r}var _interopRequire=function(e){return e&&e.__esModule?e["default"]:e};exports.Expression=Expression,Object.defineProperty(exports,"__esModule",{value:!0});var debug=_interopRequire(__webpack_require__(204)),log=debug("scintillator:expression"),parser=_interopRequire(__webpack_require__(360));exports["default"]=Expression},function(e,t,n){"use strict";function r(e){return{as:function(t){return new Promise(function(n,r){var i=new FileReader;switch(i.onload=function(){n(i.result)},i.onerror=function(){r(new Error("Unable to read from Blob"))},t){case"arraybuffer":i.readAsArrayBuffer(e);break;case"text":i.readAsText(e)}})}}}t.readBlob=r,Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r},function(e,t,n){"use strict";function r(e){return"probably"===l.canPlayType(e)}function i(e){var t=e.createGain();t.connect(e.destination),t.disconnect()}var o=function(e){return e&&e.__esModule?e["default"]:e},a=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};t.canPlay=r,t.unmuteAudio=i,Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(102)),c=o(n(115)),l=document.createElement("audio"),f=t.SamplingMaster=function(){function e(t){s(this,e),this._audioContext=t||c,this._samples=[],this._instances=new Set}return a(e,{unmute:{value:function(){i(this._audioContext)}},audioContext:{get:function(){return this._audioContext}},destroy:{value:function(){if(!this._destroyed){this._destroyed=!0;var e=!0,t=!1,n=void 0;try{for(var r,i=this._samples[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.destroy()}}catch(a){t=!0,n=a}finally{try{!e&&i["return"]&&i["return"]()}finally{if(t)throw n}}var s=!0,u=!1,c=void 0;try{for(var l,f=this._instances[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;h.destroy()}}catch(a){u=!0,c=a}finally{try{!s&&f["return"]&&f["return"]()}finally{if(u)throw c}}this._samples=null,this._instances=null}}},sample:{value:function(e){var t=this;return this._coerceToArrayBuffer(e).then(function(e){return t._decodeAudio(e)}).then(function(e){if(t._destroyed)throw new Error("SamplingMaster already destroyed!");var n=new h(t,e);return t._samples.push(n),n})}},_coerceToArrayBuffer:{value:function(e){return e instanceof ArrayBuffer?Promise.resolve(e):u(e).as("arraybuffer")}},_decodeAudio:{value:function(e){var t=this;return new Promise(function(n,r){t.audioContext.decodeAudioData(e,function(e){n(e)},function(e){r("Unable to decode audio: "+e)})})}},_startPlaying:{value:function(e){this._instances.add(e)}},_stoppedPlaying:{value:function(e){this._instances["delete"](e)}}}),e}(),h=function(){function e(t,n){s(this,e),this._master=t,this._buffer=n}return a(e,{play:{value:function(e,t){return new p(this._master,this._buffer,e,t)}},destroy:{value:function(){this._master=null,this._buffer=null}}}),e}(),p=function(){function e(t,n,r,i){var o=this;s(this,e),r=r||0,this._master=t;var a=t.audioContext,u=a.createBufferSource();u.buffer=n,u.onended=function(){return o.stop()};var c=a.createGain();u.connect(c),c.connect(i||a.destination),this._source=u,this._gain=c,u.start(r?Math.max(0,a.currentTime+r):0),this._master._startPlaying(this)}return a(e,{stop:{value:function(){this._source&&(this._source.stop(0),this._source.disconnect(),this._gain.disconnect(),this._source=null,this._gain=null,this._master._stoppedPlaying(this),this.onstop&&this.onstop())}},bad:{value:function(){this._source&&(this._source.playbackRate.value=Math.random()<.5?Math.pow(2,1/12):Math.pow(2,-1/12))}},destroy:{value:function(){this.stop()}}}),e}();t["default"]=f},function(e,t,n){function r(e){var t=!1;return{when:function(n,r){if(t)return this;var i=e.match(n);return i&&(t=!0,r(i)),this},"else":function(e){return t?this:void e()}}}e.exports=r},,function(e,t,n){"use strict";function r(){var e=0,t=0,n=0,r=[],o=0,a=0;return{push:function(i){var s=u();for(e+=i,t+=1,n=e/t,o+=i,r.push({delta:i,time:s});r[0]&&r[0].time<s-1e3;)o-=r.shift().delta;a=o/r.length},toString:function(){return i(n)+" / "+i(a)}}}function i(e){return e.toFixed(2)+"ms"}function o(){var e={},t={enabled:!0,stats:e,wrap:function(t,n){return function(){try{var i=u();return n.apply(this,arguments)}finally{var o=u(),a=e[t]||(e[t]=new r(t));a.push(o-i)}}},benchmark:function(e,t,n){t[n]=this.wrap(e,t[n])},toString:function(){var t=[];return Object.keys(e).forEach(function(n){t.push("- "+n+": "+e[n])}),t.join("\n")}},n=document.createElement("div");return n.setAttribute("style","position:fixed;top:10px;right:10px;z-index:99999"),document.body.appendChild(n),
l.render(l.createElement(f,{bench:t}),n),t}function a(){return{enabled:!1,wrap:function(e,t){return t}}}var s=function(e){return e&&e.__esModule?e["default"]:e},u=s(n(74)),c=n(121).shouldEnableBenchmark,l=s(n(7)),f=s(n(235));e.exports=window.BEMUSE_BENCHMARK=c()?new o:new a},,function(e,t,n){"use strict";function r(e,t){if(!t)return function(){};var n=0;return t.report(0,e),function(r){return t.report(++n,e,r)}}function i(e,t){var n=0,r=0;return function(){return e.report(n,++r),Promise.resolve(t.apply(this,arguments)).tap(function(){return e.report(++n,r)})}}function o(e,t){return e.watch(function(){return t.report(e.current,e.total,e.extra)})}t.fixed=r,t.wrapPromise=i,t.bind=o,Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};n(249);var i=r(n(7)),o=r(n(71));e.exports=i.createClass({displayName:"scene",render:function(){return i.createElement("div",{className:o("scene",this.props.className)},this.props.children)}})},function(e,t,n){function r(){this.headers=new i,this.objects=new o,this.timeSignatures=new a}var i=n(111),o=n(112),a=n(114);e.exports=r,r.prototype.measureToBeat=function(e,t){return this.timeSignatures.measureToBeat(e,t)}},function(e,t,n){function r(){this._data={},this._dataAll={}}e.exports=r,r.prototype.each=function(e){for(var t in this._data)e(t,this._data[t])},r.prototype.get=function(e){return this._data[e.toLowerCase()]},r.prototype.getAll=function(e){return this._dataAll[e.toLowerCase()]},r.prototype.set=function(e,t){var n=e.toLowerCase();this._data[n]=t,(this._dataAll[n]||(this._dataAll[n]=[])).push(t)}},function(e,t,n){function r(){this._objects=[]}e.exports=r,r.prototype.add=function(e){if("01"!==e.channel)for(var t=0;t<this._objects.length;t++){var n=this._objects[t];if(n.channel===e.channel&&n.measure===e.measure&&n.fraction===e.fraction)return void(this._objects[t]=e)}this._objects.push(e)},r.prototype.all=function(){return this._objects.slice()},r.prototype.allSorted=function(){var e=this.all();return e.sort(function(e,t){return e.measure+e.fraction-(t.measure+t.fraction)}),e}},function(e,t,n){function r(e){this._segments=e.map(i)}var i=n(220);e.exports=r;var o=function(e){return e.t},a=function(e){return e.x};r.prototype._reached=function(e,t,n){if(e>=this._segments.length)return!1;var r=this._segments[e],i=t(r);return r.inclusive?n>=i:n>i},r.prototype._segmentAt=function(e,t){for(var n=0;n<this._segments.length;n++)if(!this._reached(n+1,e,t))return this._segments[n]},r.prototype.segmentAtX=function(e){return this._segmentAt(a,e)},r.prototype.segmentAtT=function(e){return this._segmentAt(o,e)},r.prototype.t=function(e){var t=this.segmentAtX(e);return t.t+(e-t.x)/(t.dx||1)},r.prototype.x=function(e){var t=this.segmentAtT(e);return t.x+(e-t.t)*t.dx}},function(e,t,n){function r(){this._values={}}e.exports=r,r.prototype.set=function(e,t){this._values[e]=t},r.prototype.get=function(e){return this._values[e]||1},r.prototype.getBeats=function(e){return 4*this.get(e)},r.prototype.measureToBeat=function(e,t){for(var n=0,r=0;e>r;r++)n+=this.getBeats(r);return n+this.getBeats(e)*t}},function(e,t,n){var r=n(205),i=r.AudioContext||r.webkitAudioContext;i&&(e.exports=new i)},function(e,t,n){"use strict";function r(e){e&&e.parentNode===document.body&&document.body.removeChild(e)}function i(e){return function(t){var n=c.render(e,t);return n.setProps({scene:e}),{teardown:function(){return Promise["try"](function(){return n.teardown?n.teardown():void 0}).then(function(){c.unmountComponentAtNode(t)})}}}}var o=function(e){return e&&e.__esModule?e["default"]:e},a=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(45)),c=o(n(7)),l=t.SceneManager=function(){function e(){s(this,e),this._transitioning=!1,this._stack=[]}return a(e,{display:{value:function(e){return this._transitionTo(function(){return e})}},push:{value:function(e){var t=this,n=this.currentScene;return this._transitionTo(function(){return t._stack.push(n),e})}},pop:{value:function(){var e=this;return this._transitionTo(function(){return e._stack.pop()})}},_transitionTo:{value:function(e){return u(regeneratorRuntime.mark(function t(){var n,o,a=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a._transitioning){t.next=2;break}throw new Error("Scene is transitioning!");case 2:if(t.prev=2,a._transitioning=!0,!a.currentSceneInstance){t.next=8;break}return t.next=7,Promise.resolve(a.currentSceneInstance.teardown());case 7:r(a.currentElement);case 8:n=e(),"function"!=typeof n&&(n=new i(n)),o=document.createElement("div"),o.className="scene-manager--scene",document.body.appendChild(o),a.currentElement=o,a.currentScene=n,a.currentSceneInstance=n(o);case 16:return t.prev=16,a._transitioning=!1,t.finish(16);case 19:case"end":return t.stop()}},t,this,[[2,,16,19]])}).bind(this))}}}),e}(),f=new l;t.instance=f,t["default"]=f},function(e,t,n){t.Reader=n(218),t.Compiler=n(209),t.BMSChart=n(110),t.BMSHeaders=n(111),t.BMSObjects=n(112),t.Speedcore=n(113),t.TimeSignatures=n(114),t.Notes=n(216),t.Timing=n(221),t.SongInfo=n(219),t.Keysounds=n(242)},function(e,t,n){"use strict";function r(e,t,n){this.instance=e,this.argsInfo=n,this.form=o.methodForm(e,t,n)}var i=n(721),o=n(407),a=n(725);r.prototype.validateArguments=function(e,t){var n=i(e,this.argsInfo.map(function(e){return e.type})),r="";-1!==n&&(r+="the "+a(n)+" argument ",r+=o.shouldBeButGot(this.argsInfo[n].type,e[n]),t.call(this.instance,r)),this.argsInfo.forEach(function(n,r){var i=n.validate&&n.validate.call(this.instance,e[r],this.argsInfo[r].name);i&&t.call(this.instance,i)},this)},r.prototype.assert=function(e,t){e||t.call(this.instance)},e.exports=r},function(e,t,n){(function(e){function e(t){return this instanceof e?(this.length=0,this.parent=void 0,"number"==typeof t?r(this,t):"string"==typeof t?i(this,t,arguments.length>1?arguments[1]:"utf8"):o(this,t)):arguments.length>1?new e(t,arguments[1]):new e(t)}function r(t,n){if(t=f(t,0>n?0:0|h(n)),!e.TYPED_ARRAY_SUPPORT)for(var r=0;n>r;r++)t[r]=0;return t}function i(e,t,n){("string"!=typeof n||""===n)&&(n="utf8");var r=0|d(t,n);return e=f(e,r),e.write(t,n),e}function o(t,n){if(e.isBuffer(n))return a(t,n);if(H(n))return s(t,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");return"undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer?u(t,n):n.length?c(t,n):l(t,n)}function a(e,t){var n=0|h(t.length);return e=f(e,n),t.copy(e,0,0,n),e}function s(e,t){var n=0|h(t.length);e=f(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function u(e,t){var n=0|h(t.length);e=f(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function c(e,t){var n=0|h(t.length);e=f(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function l(e,t){var n,r=0;"Buffer"===t.type&&H(t.data)&&(n=t.data,r=0|h(n.length)),e=f(e,r);for(var i=0;r>i;i+=1)e[i]=255&n[i];return e}function f(t,n){e.TYPED_ARRAY_SUPPORT?t=e._augment(new Uint8Array(n)):(t.length=n,t._isBuffer=!0);var r=0!==n&&n<=e.poolSize>>>1;return r&&(t.parent=Y),t}function h(e){if(e>=z)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+z.toString(16)+" bytes");return 0|e}function p(t,n){if(!(this instanceof p))return new p(t,n);var r=new e(t,n);return delete r.parent,r}function d(e,t){if("string"!=typeof e&&(e=String(e)),0===e.length)return 0;switch(t||"utf8"){case"ascii":case"binary":case"raw":return e.length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e.length;case"hex":return e.length>>>1;case"utf8":case"utf-8":return L(e).length;case"base64":return U(e).length;default:return e.length}}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;r>a;a++){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[n+a]=s}return a}function v(e,t,n,r){return q(L(t,e.length-n),e,n,r)}function g(e,t,n,r){return q(F(t),e,n,r)}function y(e,t,n,r){return g(e,t,n,r)}function b(e,t,n,r){return q(U(t),e,n,r)}function x(e,t,n,r){return q(B(t,e.length-n),e,n,r)}function w(e,t,n){return W.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function _(e,t,n){var r="",i="";n=Math.min(e.length,n);for(var o=t;n>o;o++)e[o]<=127?(r+=V(i)+String.fromCharCode(e[o]),i=""):i+="%"+e[o].toString(16);return r+V(i)}function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;o++)i+=I(e[o]);return i}function S(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function A(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function k(t,n,r,i,o,a){if(!e.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(n>o||a>n)throw new RangeError("value is out of bounds");if(r+i>t.length)throw new RangeError("index out of range")}function O(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);o>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);o>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function N(e,t,n,r,i,o){if(t>i||o>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function j(e,t,n,r,i){return i||N(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),G.write(e,t,n,r,23,4),n+4}function R(e,t,n,r,i){return i||N(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),G.write(e,t,n,r,52,8),n+8}function P(e){if(e=D(e).replace($,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function D(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function I(e){return 16>e?"0"+e.toString(16):e.toString(16)}function L(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;r>a;a++){if(n=e.charCodeAt(a),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&((t-=3)>-1&&o.push(239,191,189),i=null);if(128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(2097152>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function F(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function B(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);a++)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function U(e){return W.toByteArray(P(e))}function q(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}function V(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
var W=n(251),G=n(252),H=n(253);t.Buffer=e,t.SlowBuffer=p,t.INSPECT_MAX_BYTES=50,e.poolSize=8192;var z=1073741823,Y={};e.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,i=n.length,o=0,a=Math.min(r,i);a>o&&t[o]===n[o];)++o;return o!==a&&(r=t[o],i=n[o]),i>r?-1:r>i?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!H(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new e(0);if(1===t.length)return t[0];var r;if(void 0===n)for(n=0,r=0;r<t.length;r++)n+=t[r].length;var i=new e(n),o=0;for(r=0;r<t.length;r++){var a=t[r];a.copy(i,o),o+=a.length}return i},e.byteLength=d,e.prototype.length=void 0,e.prototype.parent=void 0,e.prototype.toString=function(e,t,n){var r=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return E(this,t,n);case"binary":return T(this,t,n);case"base64":return w(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:e.compare(this,t)},e.prototype.indexOf=function(t,n){function r(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,n);if(e.isBuffer(t))return r(this,t,n);if("number"==typeof t)return e.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,n):r(this,[t],n);throw new TypeError("val must be string, number or Buffer")},e.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},e.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},e.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return g(this,e,t,n);case"binary":return y(this,e,t,n);case"base64":return b(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(t,n){var r=this.length;t=~~t,n=void 0===n?r:~~n,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),t>n&&(n=t);var i;if(e.TYPED_ARRAY_SUPPORT)i=e._augment(this.subarray(t,n));else{var o=n-t;i=new e(o,void 0);for(var a=0;o>a;a++)i[a]=this[a+t]}return i.length&&(i.parent=this.parent||this),i},e.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},e.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},e.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},e.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||A(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},e.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),G.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),G.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),G.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),G.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||k(this,e,t,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||k(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},e.prototype.writeUInt8=function(t,n,r){return t=+t,n=0|n,r||k(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=t,n+1},e.prototype.writeUInt16LE=function(t,n,r){return t=+t,n=0|n,r||k(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t,this[n+1]=t>>>8):O(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,r){return t=+t,n=0|n,r||k(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t):O(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,r){return t=+t,n=0|n,r||k(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t):M(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,r){return t=+t,n=0|n,r||k(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t):M(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);k(this,e,t,n,i-1,-i)}var o=0,a=1,s=0>e?1:0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+n},e.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);k(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+n},e.prototype.writeInt8=function(t,n,r){return t=+t,n=0|n,r||k(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[n]=t,n+1},e.prototype.writeInt16LE=function(t,n,r){return t=+t,n=0|n,r||k(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t,this[n+1]=t>>>8):O(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,r){return t=+t,n=0|n,r||k(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t):O(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,r){return t=+t,n=0|n,r||k(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):M(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,r){return t=+t,n=0|n,r||k(this,t,n,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t):M(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},e.prototype.copy=function(t,n,r,i){if(r||(r=0),i||0===i||(i=this.length),n>=t.length&&(n=t.length),n||(n=0),i>0&&r>i&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-n<i-r&&(i=t.length-n+r);var o=i-r;if(1e3>o||!e.TYPED_ARRAY_SUPPORT)for(var a=0;o>a;a++)t[a+n]=this[a+r];else t._set(this.subarray(r,r+o),n);return o},e.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=L(e.toString()),o=i.length;for(r=t;n>r;r++)this[r]=i[r%o]}return this}},e.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(e.TYPED_ARRAY_SUPPORT)return new e(this).buffer;for(var t=new Uint8Array(this.length),n=0,r=t.length;r>n;n+=1)t[n]=this[n];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var X=e.prototype;e._augment=function(t){return t.constructor=e,t._isBuffer=!0,t._set=t.set,t.get=X.get,t.set=X.set,t.write=X.write,t.toString=X.toString,t.toLocaleString=X.toString,t.toJSON=X.toJSON,t.equals=X.equals,t.compare=X.compare,t.indexOf=X.indexOf,t.copy=X.copy,t.slice=X.slice,t.readUIntLE=X.readUIntLE,t.readUIntBE=X.readUIntBE,t.readUInt8=X.readUInt8,t.readUInt16LE=X.readUInt16LE,t.readUInt16BE=X.readUInt16BE,t.readUInt32LE=X.readUInt32LE,t.readUInt32BE=X.readUInt32BE,t.readIntLE=X.readIntLE,t.readIntBE=X.readIntBE,t.readInt8=X.readInt8,t.readInt16LE=X.readInt16LE,t.readInt16BE=X.readInt16BE,t.readInt32LE=X.readInt32LE,t.readInt32BE=X.readInt32BE,t.readFloatLE=X.readFloatLE,t.readFloatBE=X.readFloatBE,t.readDoubleLE=X.readDoubleLE,t.readDoubleBE=X.readDoubleBE,t.writeUInt8=X.writeUInt8,t.writeUIntLE=X.writeUIntLE,t.writeUIntBE=X.writeUIntBE,t.writeUInt16LE=X.writeUInt16LE,t.writeUInt16BE=X.writeUInt16BE,t.writeUInt32LE=X.writeUInt32LE,t.writeUInt32BE=X.writeUInt32BE,t.writeIntLE=X.writeIntLE,t.writeIntBE=X.writeIntBE,t.writeInt8=X.writeInt8,t.writeInt16LE=X.writeInt16LE,t.writeInt16BE=X.writeInt16BE,t.writeInt32LE=X.writeInt32LE,t.writeInt32BE=X.writeInt32BE,t.writeFloatLE=X.writeFloatLE,t.writeFloatBE=X.writeFloatBE,t.writeDoubleLE=X.writeDoubleLE,t.writeDoubleBE=X.writeDoubleBE,t.fill=X.fill,t.inspect=X.inspect,t.toArrayBuffer=X.toArrayBuffer,t};var $=/[^+\/0-9A-z\-]/g}).call(t,n(119).Buffer)},function(e,t,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&c(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function o(e){return u(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}function u(e){return"string"==typeof e}function c(e){return"object"==typeof e&&null!==e}function l(e){return null===e}function f(e){return null==e}var h=n(254);t.parse=i,t.resolve=a,t.resolveObject=s,t.format=o,t.Url=r;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","	"],v=["{","}","|","\\","^","`"].concat(m),g=["'"].concat(v),y=["%","/","?",";","#"].concat(g),b=["/","?","#"],x=255,w=/^[a-z0-9A-Z_-]{0,63}$/,_=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=n(257);r.prototype.parse=function(e,t,n){if(!u(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e;r=r.trim();var i=p.exec(r);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===r.substr(0,2);!a||i&&T[i]||(r=r.substr(2),this.slashes=!0)}if(!T[i]&&(a||i&&!C[i])){for(var s=-1,c=0;c<b.length;c++){var l=r.indexOf(b[c]);-1!==l&&(-1===s||s>l)&&(s=l)}var f,d;d=-1===s?r.lastIndexOf("@"):r.lastIndexOf("@",s),-1!==d&&(f=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(f)),s=-1;for(var c=0;c<y.length;c++){var l=r.indexOf(y[c]);-1!==l&&(-1===s||s>l)&&(s=l)}-1===s&&(s=r.length),this.host=r.slice(0,s),r=r.slice(s),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var v=this.hostname.split(/\./),c=0,A=v.length;A>c;c++){var k=v[c];if(k&&!k.match(w)){for(var O="",M=0,N=k.length;N>M;M++)O+=k.charCodeAt(M)>127?"x":k[M];if(!O.match(w)){var j=v.slice(0,c),R=v.slice(c+1),P=k.match(_);P&&(j.push(P[1]),R.unshift(P[2])),R.length&&(r="/"+R.join(".")+r),this.hostname=j.join(".");break}}}if(this.hostname.length>x?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){for(var D=this.hostname.split("."),I=[],c=0;c<D.length;++c){var L=D[c];I.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(L):L)}this.hostname=I.join(".")}var F=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+F,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!E[o])for(var c=0,A=g.length;A>c;c++){var U=g[c],q=encodeURIComponent(U);q===U&&(q=escape(U)),r=r.split(U).join(q)}var V=r.indexOf("#");-1!==V&&(this.hash=r.substr(V),r=r.slice(0,V));var W=r.indexOf("?");if(-1!==W?(this.search=r.substr(W),this.query=r.substr(W+1),t&&(this.query=S.parse(this.query)),r=r.slice(0,W)):t&&(this.search="",this.query={}),r&&(this.pathname=r),C[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",L=this.search||"";this.path=F+L}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||C[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(u(e)){var t=new r;t.parse(e,!1,!0),e=t}var n=new r;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(n[t]=e[t])}),C[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!C[e.protocol])return Object.keys(e).forEach(function(t){n[t]=e[t]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||T[e.protocol])n.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var o=n.pathname||"",a=n.search||"";n.path=o+a}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var s=n.pathname&&"/"===n.pathname.charAt(0),c=e.host||e.pathname&&"/"===e.pathname.charAt(0),h=c||s||n.host&&e.pathname,p=h,d=n.pathname&&n.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],m=n.protocol&&!C[n.protocol];if(m&&(n.hostname="",n.port=null,n.host&&(""===d[0]?d[0]=n.host:d.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),h=h&&(""===i[0]||""===d[0])),c)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),n.search=e.search,n.query=e.query;else if(!f(e.search)){if(m){n.hostname=n.host=d.shift();var v=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return n.search=e.search,n.query=e.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!d.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var g=d.slice(-1)[0],y=(n.host||e.host)&&("."===g||".."===g)||""===g,b=0,x=d.length;x>=0;x--)g=d[x],"."==g?d.splice(x,1):".."===g?(d.splice(x,1),b++):b&&(d.splice(x,1),b--);if(!h&&!p)for(;b--;b)d.unshift("..");!h||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),y&&"/"!==d.join("/").substr(-1)&&d.push("");var w=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(m){n.hostname=n.host=w?"":d.length?d.shift():"";var v=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return h=h||n.host&&d.length,h&&!w&&d.unshift(""),d.length?n.pathname=d.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";function r(){return"1"===u.BEMUSE_SHOW_OPTIONS}function i(){return"1"===u.BEMUSE_BENCHMARK}function o(){return"1"===u.BEMUSE_NO_FULLSCREEN}function a(){return"1"===u.BEMUSE_SHOW_ABOUT}var s=function(e){return e&&e.__esModule?e["default"]:e};t.shouldShowOptions=r,t.shouldEnableBenchmark=i,t.shouldDisableFullScreen=o,t.shouldShowAbout=a,Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(208))},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(72)),o=new i({beat:Number,time:Number,position:Number});t.GameEvent=o,t["default"]=o},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(243)),o=function(e){return function(t){return null!==t.progress?e(t):""}},a=o(function(e){return i(e.current)+" / "+i(e.total)});t.BYTES_FORMATTER=a;var s=o(function(e){return e.extra+""});t.EXTRA_FORMATTER=s},function(e,t,n){"use strict";function r(e){if("normal"===e)return u.blendModes.NORMAL;if("screen"===e)return u.blendModes.SCREEN;throw new Error("Invalid blend mode: "+e)}var i=function(e){return e&&e.__esModule?e["default"]:e},o=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(27)),c=i(n(48)),l=i(n(49)),f=i(n(101)),h=i(n(267)),p=[{name:"x","default":"0",apply:function(e,t){return e.x=t}},{name:"y","default":"0",apply:function(e,t){return e.y=t}},{name:"scale-x","default":"1",apply:function(e,t){return e.scale.x=t}},{name:"scale-y","default":"1",apply:function(e,t){return e.scale.y=t}},{name:"alpha","default":"1",apply:function(e,t){return e.alpha=t}},{name:"width",apply:function(e,t){return e.width=t}},{name:"height",apply:function(e,t){return e.height=t}},{name:"visible",apply:function(e,t){return e.visible=t}}],d=t.DisplayObject=function(e){function t(){s(this,t),null!=e&&e.apply(this,arguments)}return a(t,e),o(t,{compile:{value:function(e,t){this._animation=h.compile(e,t),this._bindings=[];var n=!0,i=!1,o=void 0;try{for(var a,s=p[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value,c=t.attr(u.name)||u["default"];if(c){var l=new f(c),d=this._animation.prop(u.name,l);this._bindings.push({getter:d,apply:u.apply})}}}catch(m){i=!0,o=m}finally{try{!n&&s["return"]&&s["return"]()}finally{if(i)throw o}}this.blendMode=r(t.attr("blend")||"normal"),this.ref=t.attr("ref")||null}},instantiate:{value:function(e,t){var n=this,r=t.object,i=[],o=null;r.blendMode=this.blendMode;for(var a=0;a<this._bindings.length;a++){var s=this._bindings[a];i.push([s.getter,s.apply.bind(null,r)])}return this.ref&&(e.ref(this.ref,r),o=function(){return e.unref(n.ref,r)}),new l({bindings:i,onDestroy:o})}}}),t}(c);t["default"]=d},function(e,t,n){"use strict";function r(e){return{as:function(t,n){return new Promise(function(r,o){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType=t,a.onload=function(){200===+a.status?r(a.response):o(new Error("Unable to download "+e+": HTTP "+a.status))},a.onerror=function(){return o(new Error("Unable to download "+e))},n&&(n.formatter=i,a.onprogress=function(e){return n.report(e.loaded,e.total)}),a.send(null)})}}}t.download=r,Object.defineProperty(t,"__esModule",{value:!0});var i=n(123).BYTES_FORMATTER;t["default"]=r},function(e,t,n){var r,i;(function(e,o){(function(){var a,s,u,c,l,f,h,p,d,m,v,g,y,b,x,w,_,E,T,C,S,A,k,O,M,N,j,R,P,D,I,L,F,B,U,q,V,W,G,H,z,Y,X,$,J,K,Q,Z,ee,te,ne,re,ie,oe,ae,se,ue,ce,le,fe,he,pe,de,me,ve,ge,ye,be,xe,we,_e={}.hasOwnProperty,Ee=function(e,t){function n(){this.constructor=e}for(var r in t)_e.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},Te=[].slice,Ce=function(e,t){return function(){return e.apply(t,arguments)}};a={toString:function(){return"Bacon"}},a.version="0.7.53",g=("undefined"!=typeof e&&null!==e?e:this).Error,se=function(){},Z=function(e,t){return t},Y=function(e,t){return e},I=function(e){return e.slice(0)},O=function(e,t){if(!t)throw new g(e)},N=function(e){if(!(e instanceof v))throw new g("not an EventStream : "+e)},P=function(e){if(!(e instanceof w))throw new g("not an Observable : "+e)},j=function(e){return O("not a function : "+e,A.isFunction(e))},J=function(e){return e instanceof Array},Q=function(e){return e instanceof w},M=function(e){if(!J(e))throw new g("not an array : "+e)},R=function(e){return O("no arguments supported",0===e.length)},D=function(e){if("string"!=typeof e)throw new g("not a string : "+e)},A={indexOf:Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){var n,r,i,o;for(n=r=0,i=e.length;i>r;n=++r)if(o=e[n],t===o)return n;return-1},indexWhere:function(e,t){var n,r,i,o;for(n=r=0,i=e.length;i>r;n=++r)if(o=e[n],t(o))return n;return-1},head:function(e){return e[0]},always:function(e){return function(){return e}},negate:function(e){return function(t){return!e(t)}},empty:function(e){return 0===e.length},tail:function(e){return e.slice(1,e.length)},filter:function(e,t){var n,r,i,o;for(n=[],r=0,i=t.length;i>r;r++)o=t[r],e(o)&&n.push(o);return n},map:function(e,t){var n,r,i,o;for(i=[],n=0,r=t.length;r>n;n++)o=t[n],i.push(e(o));return i},each:function(e,t){var n,r;for(n in e)r=e[n],t(n,r);return void 0},toArray:function(e){return J(e)?e:[e]},contains:function(e,t){return-1!==A.indexOf(e,t)},id:function(e){return e},last:function(e){return e[e.length-1]},all:function(e,t){var n,r,i;for(null==t&&(t=A.id),n=0,r=e.length;r>n;n++)if(i=e[n],!t(i))return!1;return!0},any:function(e,t){var n,r,i;for(null==t&&(t=A.id),n=0,r=e.length;r>n;n++)if(i=e[n],t(i))return!0;return!1},without:function(e,t){return A.filter(function(t){return t!==e},t)},remove:function(e,t){var n;return n=A.indexOf(t,e),n>=0?t.splice(n,1):void 0},fold:function(e,t,n){var r,i,o;for(r=0,i=e.length;i>r;r++)o=e[r],t=n(t,o);return t},flatMap:function(e,t){return A.fold(t,[],function(t,n){return t.concat(e(n))})},cached:function(e){var t;return t=x,function(){return t===x&&(t=e(),e=void 0),t}},isFunction:function(e){return"function"==typeof e},toString:function(e){var t,n,r,i;try{return ce++,null==e?"undefined":A.isFunction(e)?"function":J(e)?ce>5?"[..]":"["+A.map(A.toString,e).toString()+"]":null!=(null!=e?e.toString:void 0)&&e.toString!==Object.prototype.toString?e.toString():"object"==typeof e?ce>5?"{..}":(n=function(){var n;n=[];for(r in e)_e.call(e,r)&&(i=function(){try{return e[r]}catch(n){return t=n}}(),n.push(A.toString(r)+":"+A.toString(i)));return n}(),"{"+n+"}"):e}finally{ce--}}},ce=0,a._=A,S=a.UpdateBarrier=function(){var e,t,n,r,i,o,s,u,c,l,f,h,p,d;return l=void 0,f=[],h={},t=[],n=0,e=function(e){return l?t.push(e):e()},p=function(e,t){var n;return l?(n=h[e.id],null==n?(n=h[e.id]=[t],f.push(e)):n.push(t)):t()},i=function(){for(;f.length>0;)s(0);return void 0},s=function(e){var t,n,r,i,a,s;for(i=f[e],a=i.id,s=h[a],f.splice(e,1),delete h[a],o(i),n=0,r=s.length;r>n;n++)(t=s[n])();return void 0},o=function(e){var t,n,r,i,a;for(n=e.internalDeps(),i=0,a=n.length;a>i;i++)t=n[i],o(t),h[t.id]&&(r=A.indexOf(f,t),s(r));return void 0},c=function(e,r,o,a){var s,u;if(l)return o.apply(r,a);l=e;try{u=o.apply(r,a),i()}finally{for(l=void 0;n<t.length;)s=t[n],n++,s();n=0,t=[]}return u},r=function(){return l?l.id:void 0},d=function(t,n){var r,i,o,s;return s=!1,i=!1,r=function(){return i=!0},o=function(){return s=!0,r()},r=t.dispatcher.subscribe(function(t){return e(function(){var e;return s||(e=n(t),e!==a.noMore)?void 0:o()})}),i&&r(),o},u=function(){return f.length>0},{whenDoneWith:p,hasWaiters:u,inTransaction:c,currentEventId:r,wrappedSubscribe:d,afterTransaction:e}}(),C=function(){function e(e,t,n){this.obs=e,this.sync=t,this.lazy=null!=n?n:!1,this.queue=[]}return e.prototype.subscribe=function(e){return this.obs.dispatcher.subscribe(e)},e.prototype.toString=function(){return this.obs.toString()},e.prototype.markEnded=function(){return this.ended=!0},e.prototype.consume=function(){return this.lazy?{value:A.always(this.queue[0])}:this.queue[0]},e.prototype.push=function(e){return this.queue=[e]},e.prototype.mayHave=function(){return!0},e.prototype.hasAtLeast=function(){return this.queue.length},e.prototype.flatten=!0,e}(),l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ee(t,e),t.prototype.consume=function(){return this.queue.shift()},t.prototype.push=function(e){return this.queue.push(e)},t.prototype.mayHave=function(e){return!this.ended||this.queue.length>=e},t.prototype.hasAtLeast=function(e){return this.queue.length>=e},t.prototype.flatten=!1,t}(C),s=function(e){function t(e){t.__super__.constructor.call(this,e,!0)}return Ee(t,e),t.prototype.consume=function(){var e;return e=this.queue,this.queue=[],{value:function(){return e}}},t.prototype.push=function(e){return this.queue.push(e.value())},t.prototype.hasAtLeast=function(){return!0},t}(C),C.isTrigger=function(e){return e instanceof C?e.sync:e instanceof v},C.fromObservable=function(e){return e instanceof C?e:e instanceof _?new C(e,!1):new l(e,!0)},f=function(){function e(e,t,n){this.context=e,this.method=t,this.args=n,this.cached=void 0}return e.prototype.deps=function(){return this.cached||(this.cached=G([this.context].concat(this.args)))},e.prototype.apply=function(e){return e.desc=this,e},e.prototype.toString=function(){return A.toString(this.context)+"."+A.toString(this.method)+"("+A.map(A.toString,this.args)+")"},e}(),U=function(){var e,t,n;return t=arguments[0],n=arguments[1],e=3<=arguments.length?Te.call(arguments,2):[],(t||n)instanceof f?t||n:new f(t,n,e)},xe=function(){var e,t,n;return e=2<=arguments.length?Te.call(arguments,0,t=arguments.length-1):(t=0,[]),n=arguments[t++],U.apply(null,e).apply(n)},G=function(e){return J(e)?A.flatMap(G,e):Q(e)?[e]:e instanceof C?[e.obs]:[]},we=function(e){return function(){var t,n,r,i;return r=arguments[0],t=2<=arguments.length?Te.call(arguments,1):[],"object"==typeof r&&t.length&&(n=r,i=t[0],r=function(){return n[i].apply(n,arguments)},t=t.slice(1)),e.apply(null,[r].concat(Te.call(t)))}},ne=function(e){return e=Array.prototype.slice.call(e),re.apply(null,e)},ue=function(e,t){return function(){var n;return n=1<=arguments.length?Te.call(arguments,0):[],e.apply(null,t.concat(n))}},ye=function(e){return function(t){return function(n){var r;return null==n?void 0:(r=n[t],A.isFunction(r)?r.apply(n,e):r)}}},me=function(e,t){var n,r;return r=e.slice(1).split("."),n=A.map(ye(t),r),function(t){var r,i;for(r=0,i=n.length;i>r;r++)e=n[r],t=e(t);return t}},K=function(e){return"string"==typeof e&&e.length>1&&"."===e.charAt(0)},re=we(function(){var e,t;return t=arguments[0],e=2<=arguments.length?Te.call(arguments,1):[],A.isFunction(t)?e.length?ue(t,e):t:K(t)?me(t,e):A.always(t)}),te=function(e,t){return re.apply(null,[e].concat(Te.call(t)))},B=function(e,t,n,r){var i;return t instanceof _?(i=t.sampledBy(e,function(e,t){return[e,t]}),r.call(i,function(e){var t,n;return t=e[0],n=e[1],t}).map(function(e){var t,n;return t=e[0],n=e[1]})):(t=te(t,n),r.call(e,t))},pe=function(e){var t;if(A.isFunction(e))return e;if(K(e))return t=ve(e),function(e,n){return e[t](n)};throw new g("not a function or a field key: "+e)},ve=function(e){return e.slice(1)},T=function(){function e(e){this.value=e}return e.prototype.getOrElse=function(){return this.value},e.prototype.get=function(){return this.value},e.prototype.filter=function(t){return t(this.value)?new e(this.value):x},e.prototype.map=function(t){return new e(t(this.value))},e.prototype.forEach=function(e){return e(this.value)},e.prototype.isDefined=!0,e.prototype.toArray=function(){return[this.value]},e.prototype.inspect=function(){return"Some("+this.value+")"},e.prototype.toString=function(){return this.inspect()},e}(),x={getOrElse:function(e){return e},filter:function(){return x},map:function(){return x},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},ge=function(e){return e instanceof T||e===x?e:new T(e)},a.noMore=["<no-more>"],a.more=["<more>"],V=0,m=function(){function e(){this.id=++V}return e.prototype.isEvent=function(){return!0},e.prototype.isEnd=function(){return!1},e.prototype.isInitial=function(){return!1},e.prototype.isNext=function(){return!1},e.prototype.isError=function(){return!1},e.prototype.hasValue=function(){return!1},e.prototype.filter=function(){return!0},e.prototype.inspect=function(){return this.toString()},e.prototype.log=function(){
return this.toString()},e}(),b=function(e){function t(e,n){t.__super__.constructor.call(this),!n&&A.isFunction(e)||e instanceof t?(this.valueF=e,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=e)}return Ee(t,e),t.prototype.isNext=function(){return!0},t.prototype.hasValue=function(){return!0},t.prototype.value=function(){return this.valueF instanceof t?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},t.prototype.fmap=function(e){var t,n;return this.valueInternal?(n=this.valueInternal,this.apply(function(){return e(n)})):(t=this,this.apply(function(){return e(t.value())}))},t.prototype.apply=function(e){return new t(e)},t.prototype.filter=function(e){return e(this.value())},t.prototype.toString=function(){return A.toString(this.value())},t.prototype.log=function(){return this.value()},t}(m),y=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ee(t,e),t.prototype.isInitial=function(){return!0},t.prototype.isNext=function(){return!1},t.prototype.apply=function(e){return new t(e)},t.prototype.toNext=function(){return new b(this)},t}(b),p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ee(t,e),t.prototype.isEnd=function(){return!0},t.prototype.fmap=function(){return this},t.prototype.apply=function(){return this},t.prototype.toString=function(){return"<end>"},t}(m),d=function(e){function t(e){this.error=e}return Ee(t,e),t.prototype.isError=function(){return!0},t.prototype.fmap=function(){return this},t.prototype.apply=function(){return this},t.prototype.toString=function(){return"<error> "+A.toString(this.error)},t}(m),a.Event=m,a.Initial=y,a.Next=b,a.End=p,a.Error=d,$=function(e){return new y(e,!0)},ae=function(e){return new b(e,!0)},q=function(){return new p},de=function(e){return e instanceof m?e:ae(e)},X=0,fe=function(){},w=function(){function e(e){this.id=++X,xe(e,this),this.initialDesc=this.desc}return e.prototype.subscribe=function(e){return S.wrappedSubscribe(this,e)},e.prototype.subscribeInternal=function(e){return this.dispatcher.subscribe(e)},e.prototype.onValue=function(){var e;return e=ne(arguments),this.subscribe(function(t){return t.hasValue()?e(t.value()):void 0})},e.prototype.onValues=function(e){return this.onValue(function(t){return e.apply(null,t)})},e.prototype.onError=function(){var e;return e=ne(arguments),this.subscribe(function(t){return t.isError()?e(t.error):void 0})},e.prototype.onEnd=function(){var e;return e=ne(arguments),this.subscribe(function(t){return t.isEnd()?e():void 0})},e.prototype.name=function(e){return this._name=e,this},e.prototype.withDescription=function(){return U.apply(null,arguments).apply(this)},e.prototype.toString=function(){return this._name?this._name:this.desc.toString()},e.prototype.internalDeps=function(){return this.initialDesc.deps()},e}(),w.prototype.assign=w.prototype.onValue,w.prototype.forEach=w.prototype.onValue,w.prototype.inspect=w.prototype.toString,a.Observable=w,c=function(){function e(e){var t,n,r;for(null==e&&(e=[]),this.unsubscribe=Ce(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[],t=0,n=e.length;n>t;t++)r=e[t],this.add(r)}return e.prototype.add=function(e){var t,n,r;if(!this.unsubscribed)return t=!1,n=se,this.starting.push(e),r=function(r){return function(){return r.unsubscribed?void 0:(t=!0,r.remove(n),A.remove(e,r.starting))}}(this),n=e(this.unsubscribe,r),this.unsubscribed||t?n():this.subscriptions.push(n),A.remove(e,this.starting),n},e.prototype.remove=function(e){return this.unsubscribed?void 0:void 0!==A.remove(e,this.subscriptions)?e():void 0},e.prototype.unsubscribe=function(){var e,t,n,r;if(!this.unsubscribed){for(this.unsubscribed=!0,n=this.subscriptions,e=0,t=n.length;t>e;e++)(r=n[e])();return this.subscriptions=[],this.starting=[]}},e.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},e.prototype.empty=function(){return 0===this.count()},e}(),a.CompositeUnsubscribe=c,h=function(){function e(e,t){this._subscribe=e,this._handleEvent=t,this.subscribe=Ce(this.subscribe,this),this.handleEvent=Ce(this.handleEvent,this),this.subscriptions=[],this.queue=[],this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0}return e.prototype.hasSubscribers=function(){return this.subscriptions.length>0},e.prototype.removeSub=function(e){return this.subscriptions=A.without(e,this.subscriptions)},e.prototype.push=function(e){return e.isEnd()&&(this.ended=!0),S.inTransaction(e,this,this.pushIt,[e])},e.prototype.pushToSubscriptions=function(e){var t,n,r,i,o,s;try{for(s=this.subscriptions,n=0,r=s.length;r>n;n++)o=s[n],i=o.sink(e),(i===a.noMore||e.isEnd())&&this.removeSub(o);return!0}catch(u){throw t=u,this.pushing=!1,this.queue=[],t}},e.prototype.pushIt=function(e){if(this.pushing)return this.queue.push(e),a.more;if(e!==this.prevError){for(e.isError()&&(this.prevError=e),this.pushing=!0,this.pushToSubscriptions(e),this.pushing=!1;this.queue.length;)e=this.queue.shift(),this.push(e);return this.hasSubscribers()?a.more:(this.unsubscribeFromSource(),a.noMore)}},e.prototype.handleEvent=function(e){return this._handleEvent?this._handleEvent(e):this.push(e)},e.prototype.unsubscribeFromSource=function(){return this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},e.prototype.subscribe=function(e){var t;return this.ended?(e(q()),se):(j(e),t={sink:e},this.subscriptions.push(t),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),j(this.unsubSrc)),function(e){return function(){return e.removeSub(t),e.hasSubscribers()?void 0:e.unsubscribeFromSource()}}(this))},e}(),v=function(e){function t(e,n,r){A.isFunction(e)&&(r=n,n=e,e=[]),t.__super__.constructor.call(this,e),j(n),this.dispatcher=new h(n,r),fe(this)}return Ee(t,e),t.prototype.toProperty=function(e){var t,n;return n=0===arguments.length?x:ge(function(){return e}),t=this.dispatcher,new _(U(this,"toProperty",e),function(e){var r,i,o,s;return r=!1,s=se,i=a.more,o=function(){return r?void 0:n.forEach(function(t){return r=!0,i=e(new y(t)),i===a.noMore?(s(),s=se):void 0})},s=t.subscribe(function(t){return t.hasValue()?r&&t.isInitial()?a.more:(t.isInitial()||o(),r=!0,n=new T(t),e(t)):(t.isEnd()&&(i=o()),i!==a.noMore?e(t):void 0)}),o(),s})},t.prototype.toEventStream=function(){return this},t.prototype.withHandler=function(e){return new t(U(this,"withHandler",e),this.dispatcher.subscribe,e)},t}(w),a.EventStream=v,a.never=function(){return new v(U(a,"never"),function(e){return e(q()),se})},a.when=function(){var e,t,n,r,i,o,s,u,c,l,f,h,p,d,m,g,y,b,x,w;if(0===arguments.length)return a.never();for(s=arguments.length,w="when: expecting arguments in the form (Observable+,function)+",O(w,s%2===0),b=[],p=[],t=0,d=[];s>t;){for(d[t]=arguments[t],d[t+1]=arguments[t+1],h=A.toArray(arguments[t]),e=L(arguments[t+1]),f={f:e,ixs:[]},x=!1,i=0,u=h.length;u>i;i++){for(y=h[i],n=A.indexOf(b,y),x||(x=C.isTrigger(y)),0>n&&(b.push(y),n=b.length-1),m=f.ixs,o=0,c=m.length;c>o;o++)r=m[o],r.index===n&&r.count++;f.ixs.push({index:n,count:1})}O("At least one EventStream required",x||!h.length),h.length>0&&p.push(f),t+=2}return b.length?(b=A.map(C.fromObservable,b),l=A.any(b,function(e){return e.flatten})&&F(A.map(function(e){return e.obs},b)),g=new v(U.apply(null,[a,"when"].concat(Te.call(d))),function(e){var n,r,i,o,s,u,c;return c=[],i=!1,o=function(e){var n,r,i;for(i=e.ixs,n=0,r=i.length;r>n;n++)if(t=i[n],!b[t.index].hasAtLeast(t.count))return!1;return!0},r=function(e){return!e.sync||e.ended},n=function(e){var n,r,i;for(i=e.ixs,n=0,r=i.length;r>n;n++)if(t=i[n],!b[t.index].mayHave(t.count))return!0},s=function(e){return!e.source.flatten},u=function(u){return function(f){var h,d,m;return d=function(){return S.whenDoneWith(g,h)},m=function(){var n,r,i,u,l,f;if(!(c.length>0))return a.more;for(l=a.more,f=c.pop(),r=0,i=p.length;i>r;r++)if(u=p[r],o(u))return n=function(){var e,n,r,i;for(r=u.ixs,i=[],n=0,e=r.length;e>n;n++)t=r[n],i.push(b[t.index].consume());return i}(),l=e(f.e.apply(function(){var e,t;return t=function(){var t,r,i;for(i=[],r=0,t=n.length;t>r;r++)e=n[r],i.push(e.value());return i}(),u.f.apply(u,t)})),c.length&&(c=A.filter(s,c)),l===a.noMore?l:m()},h=function(){var t;return t=m(),i&&(i=!1,(A.all(b,r)||A.all(p,n))&&(t=a.noMore,e(q()))),t===a.noMore&&f(),t},u.subscribe(function(t){var n;return t.isEnd()?(i=!0,u.markEnded(),d()):t.isError()?n=e(t):(u.push(t),u.sync&&(c.push({source:u,e:t}),l||S.hasWaiters()?d():h())),n===a.noMore&&f(),n||a.more})}},new a.CompositeUnsubscribe(function(){var e,t,n;for(n=[],e=0,t=b.length;t>e;e++)y=b[e],n.push(u(y));return n}()).unsubscribe})):a.never()},F=function(e,t){var n;return null==t&&(t=[]),n=function(e){var r;return A.contains(t,e)?!0:(r=e.internalDeps(),r.length?(t.push(e),A.any(r,n)):(t.push(e),!1))},A.any(e,n)},L=function(e){return A.isFunction(e)?e:A.always(e)},a.groupSimultaneous=function(){var e,t,n;return n=1<=arguments.length?Te.call(arguments,0):[],1===n.length&&J(n[0])&&(n=n[0]),t=function(){var t,r,i;for(i=[],t=0,r=n.length;r>t;t++)e=n[t],i.push(new s(e));return i}(),xe.apply(null,[a,"groupSimultaneous"].concat(Te.call(n),[a.when(t,function(){var e;return e=1<=arguments.length?Te.call(arguments,0):[]})]))},E=function(e){function t(e,n,r){this.property=e,this.subscribe=Ce(this.subscribe,this),t.__super__.constructor.call(this,n,r),this.current=x,this.currentValueRootId=void 0,this.propertyEnded=!1}return Ee(t,e),t.prototype.push=function(e){return e.isEnd()&&(this.propertyEnded=!0),e.hasValue()&&(this.current=new T(e),this.currentValueRootId=S.currentEventId()),t.__super__.push.call(this,e)},t.prototype.maybeSubSource=function(e,t){return t===a.noMore?se:this.propertyEnded?(e(q()),se):h.prototype.subscribe.call(this,e)},t.prototype.subscribe=function(e){var t,n,r,i;return n=!1,r=a.more,this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)?(t=S.currentEventId(),i=this.currentValueRootId,!this.propertyEnded&&i&&t&&t!==i?(S.whenDoneWith(this.property,function(t){return function(){return t.currentValueRootId===i?e($(t.current.get().value())):void 0}}(this)),this.maybeSubSource(e,r)):(S.inTransaction(void 0,this,function(){return r=e($(this.current.get().value()))},[]),this.maybeSubSource(e,r))):this.maybeSubSource(e,r)},t}(h),_=function(e){function t(e,n,r){A.isFunction(e)&&(r=n,n=e,e=[]),t.__super__.constructor.call(this,e),j(n),this.dispatcher=new E(this,n,r),fe(this)}return Ee(t,e),t.prototype.changes=function(){return new v(U(this,"changes"),function(e){return function(t){return e.dispatcher.subscribe(function(e){return e.isInitial()?void 0:t(e)})}}(this))},t.prototype.withHandler=function(e){return new t(U(this,"withHandler",e),this.dispatcher.subscribe,e)},t.prototype.toProperty=function(){return R(arguments),this},t.prototype.toEventStream=function(){return new v(U(this,"toEventStream"),function(e){return function(t){return e.dispatcher.subscribe(function(e){return e.isInitial()&&(e=e.toNext()),t(e)})}}(this))},t}(w),a.Property=_,a.constant=function(e){return new _(U(a,"constant",e),function(t){return t($(e)),t(q()),se})},a.fromBinder=function(e,t){return null==t&&(t=A.id),new v(U(a,"fromBinder",e,t),function(n){var r,i,o,s;return s=!1,r=!1,i=function(){return s?void 0:"undefined"!=typeof o&&null!==o?(o(),s=!0):r=!0},o=e(function(){var e,r,o,s,u,c;for(e=1<=arguments.length?Te.call(arguments,0):[],c=t.apply(this,e),J(c)&&A.last(c)instanceof m||(c=[c]),u=a.more,o=0,s=c.length;s>o;o++)if(r=c[o],u=n(r=de(r)),u===a.noMore||r.isEnd())return i(),u;return u}),r&&i(),i})},W=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]],H=function(e){var t,n,r,i;for(t=0,n=W.length;n>t;t++)if(i=W[t],r=[e[i[0]],e[i[1]]],r[0]&&r[1])return r;throw new d("No suitable event methods in "+e)},a.fromEventTarget=function(e,t,n){var r,i,o;return r=H(e),i=r[0],o=r[1],xe(a,"fromEvent",e,t,a.fromBinder(function(n){return i.call(e,t,n),function(){return o.call(e,t,n)}},n))},a.fromEvent=a.fromEventTarget,a.Observable.prototype.map=function(){var e,t;return t=arguments[0],e=2<=arguments.length?Te.call(arguments,1):[],B(this,t,e,function(e){return xe(this,"map",e,this.withHandler(function(t){return this.push(t.fmap(e))}))})},a.combineAsArray=function(){var e,t,n,r,i,o,s;for(s=1<=arguments.length?Te.call(arguments,0):[],1===s.length&&J(s[0])&&(s=s[0]),e=t=0,n=s.length;n>t;e=++t)o=s[e],Q(o)||(s[e]=a.constant(o));return s.length?(i=function(){var e,t,n;for(n=[],e=0,t=s.length;t>e;e++)r=s[e],n.push(new C(r,!0));return n}(),xe.apply(null,[a,"combineAsArray"].concat(Te.call(s),[a.when(i,function(){var e;return e=1<=arguments.length?Te.call(arguments,0):[]}).toProperty()]))):a.constant([])},a.onValues=function(){var e,t,n;return n=2<=arguments.length?Te.call(arguments,0,t=arguments.length-1):(t=0,[]),e=arguments[t++],a.combineAsArray(n).onValues(e)},a.combineWith=function(){var e,t;return e=arguments[0],t=2<=arguments.length?Te.call(arguments,1):[],xe.apply(null,[a,"combineWith",e].concat(Te.call(t),[a.combineAsArray(t).map(function(t){return e.apply(null,t)})]))},a.combineTemplate=function(e){var t,n,r,i,o,s,u,c,l,f;return u=[],f=[],s=function(e){return e[e.length-1]},l=function(e,t,n){return s(e)[t]=n},t=function(e,t){return function(n,r){return l(n,e,r[t])}},o=function(e,t){return function(n){return l(n,e,t)}},c=function(e){return J(e)?[]:{}},r=function(e,n){var r,a;return Q(n)?(f.push(n),u.push(t(e,f.length-1))):n!==Object(n)||"function"==typeof n||n instanceof RegExp||n instanceof Date?u.push(o(e,n)):(a=function(e){return function(t){var r;return r=c(n),l(t,e,r),t.push(r)}},r=function(e){return e.pop()},u.push(a(e)),i(n),u.push(r))},i=function(e){return A.each(e,r)},i(e),n=function(t){var n,r,i,o,a;for(a=c(e),n=[a],i=0,o=u.length;o>i;i++)(r=u[i])(n,t);return a},xe(a,"combineTemplate",e,a.combineAsArray(f).map(n))},a.Observable.prototype.combine=function(e,t){var n;return n=pe(t),xe(this,"combine",e,t,a.combineAsArray(this,e).map(function(e){return n(e[0],e[1])}))},a.Observable.prototype.decode=function(e){return xe(this,"decode",e,this.combine(a.combineTemplate(e),function(e,t){return t[e]}))},a.Observable.prototype.withStateMachine=function(e,t){var n;return n=e,xe(this,"withStateMachine",e,t,this.withHandler(function(e){var r,i,o,s,u,c,l;for(r=t(n,e),s=r[0],c=r[1],n=s,l=a.more,i=0,o=c.length;o>i;i++)if(u=c[i],l=this.push(u),l===a.noMore)return l;return l}))},a.Observable.prototype.skipDuplicates=function(e){return null==e&&(e=function(e,t){return e===t}),xe(this,"skipDuplicates",this.withStateMachine(x,function(t,n){return n.hasValue()?n.isInitial()||t===x||!e(t.get(),n.value())?[new T(n.value()),[n]]:[t,[]]:[t,[n]]}))},a.Observable.prototype.awaiting=function(e){return xe(this,"awaiting",e,a.groupSimultaneous(this,e).map(function(e){var t,n;return t=e[0],n=e[1],0===n.length}).toProperty(!1).skipDuplicates())},a.Observable.prototype.not=function(){return xe(this,"not",this.map(function(e){return!e}))},a.Property.prototype.and=function(e){return xe(this,"and",e,this.combine(e,function(e,t){return e&&t}))},a.Property.prototype.or=function(e){return xe(this,"or",e,this.combine(e,function(e,t){return e||t}))},a.scheduler={setTimeout:function(e,t){return setTimeout(e,t)},setInterval:function(e,t){return setInterval(e,t)},clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)},now:function(){return(new Date).getTime()}},a.EventStream.prototype.bufferWithTime=function(e){return xe(this,"bufferWithTime",e,this.bufferWithTimeOrCount(e,Number.MAX_VALUE))},a.EventStream.prototype.bufferWithCount=function(e){return xe(this,"bufferWithCount",e,this.bufferWithTimeOrCount(void 0,e))},a.EventStream.prototype.bufferWithTimeOrCount=function(e,t){var n;return n=function(n){return n.values.length===t?n.flush():void 0!==e?n.schedule():void 0},xe(this,"bufferWithTimeOrCount",e,t,this.buffer(e,n,n))},a.EventStream.prototype.buffer=function(e,t,n){var r,i,o;return null==t&&(t=se),null==n&&(n=se),r={scheduled:null,end:void 0,values:[],flush:function(){var e;if(this.scheduled&&(a.scheduler.clearTimeout(this.scheduled),this.scheduled=null),this.values.length>0){if(e=this.push(ae(this.values)),this.values=[],null!=this.end)return this.push(this.end);if(e!==a.noMore)return n(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){return this.scheduled?void 0:this.scheduled=e(function(e){return function(){return e.flush()}}(this))}},o=a.more,A.isFunction(e)||(i=e,e=function(e){return a.scheduler.setTimeout(e,i)}),xe(this,"buffer",this.withHandler(function(e){return r.push=function(e){return function(t){return e.push(t)}}(this),e.isError()?o=this.push(e):e.isEnd()?(r.end=e,r.scheduled||r.flush()):(r.values.push(e.value()),t(r)),o}))},a.Observable.prototype.filter=function(){var e,t;return t=arguments[0],e=2<=arguments.length?Te.call(arguments,1):[],B(this,t,e,function(e){return xe(this,"filter",e,this.withHandler(function(t){return t.filter(e)?this.push(t):a.more}))})},a.once=function(e){return new v(U(a,"once",e),function(t){return t(de(e)),t(q()),se})},a.EventStream.prototype.concat=function(e){var t;return t=this,new v(U(t,"concat",e),function(n){var r,i;return i=se,r=t.dispatcher.subscribe(function(t){return t.isEnd()?i=e.dispatcher.subscribe(n):n(t)}),function(){return r(),i()}})},a.Observable.prototype.flatMap=function(){return z(this,oe(arguments))},a.Observable.prototype.flatMapFirst=function(){return z(this,oe(arguments),!0)},z=function(e,t,n,r){var i,o,s;return s=[e],i=[],o=new v(U(e,"flatMap"+(n?"First":""),t),function(o){var s,u,l,f,h;return l=new c,f=[],h=function(e){var n;return n=ie(t(e.value())),i.push(n),l.add(function(e,t){return n.dispatcher.subscribe(function(r){var c;return r.isEnd()?(A.remove(n,i),u(),s(t),a.noMore):(r instanceof y&&(r=r.toNext()),c=o(r),c===a.noMore&&e(),c)})})},u=function(){var e;return e=f.shift(),e?h(e):void 0},s=function(e){return e(),l.empty()?o(q()):void 0},l.add(function(t,i){return e.dispatcher.subscribe(function(e){return e.isEnd()?s(i):e.isError()?o(e):n&&l.count()>1?a.more:l.unsubscribed?a.noMore:r&&l.count()>r?f.push(e):h(e)})}),l.unsubscribe}),o.internalDeps=function(){return i.length?s.concat(i):s},o},oe=function(e){return 1===e.length&&Q(e[0])?A.always(e[0]):ne(e)},ie=function(e){return Q(e)?e:a.once(e)},a.Observable.prototype.flatMapWithConcurrencyLimit=function(){var e,t;return t=arguments[0],e=2<=arguments.length?Te.call(arguments,1):[],xe.apply(null,[this,"flatMapWithConcurrencyLimit",t].concat(Te.call(e),[z(this,oe(e),!1,t)]))},a.Observable.prototype.flatMapConcat=function(){return xe.apply(null,[this,"flatMapConcat"].concat(Te.call(arguments),[this.flatMapWithConcurrencyLimit.apply(this,[1].concat(Te.call(arguments)))]))},k=function(e,t){var n;return n=new v(U(e,"justInitValue"),function(t){var r,i;return i=void 0,r=e.dispatcher.subscribe(function(e){return e.isEnd()||(i=e),a.noMore}),S.whenDoneWith(n,function(){return null!=i&&t(i),t(q())}),r}),n.concat(t).toProperty()},a.Observable.prototype.mapEnd=function(){var e;return e=ne(arguments),xe(this,"mapEnd",e,this.withHandler(function(t){return t.isEnd()?(this.push(ae(e(t))),this.push(q()),a.noMore):this.push(t)}))},a.Observable.prototype.skipErrors=function(){return xe(this,"skipErrors",this.withHandler(function(e){return e.isError()?a.more:this.push(e)}))},a.EventStream.prototype.takeUntil=function(e){var t;return t={},xe(this,"takeUntil",e,a.groupSimultaneous(this.mapEnd(t),e.skipErrors()).withHandler(function(n){var r,i,o,s,u,c;if(n.hasValue()){if(s=n.value(),r=s[0],e=s[1],e.length)return this.push(q());for(u=a.more,i=0,o=r.length;o>i;i++)c=r[i],u=this.push(c===t?q():ae(c));return u}return this.push(n)}))},a.Property.prototype.takeUntil=function(e){var t;return t=this.changes().takeUntil(e),xe(this,"takeUntil",e,k(this,t))},a.Observable.prototype.flatMapLatest=function(){var e,t;return e=oe(arguments),t=this.toEventStream(),xe(this,"flatMapLatest",e,t.flatMap(function(n){return ie(e(n)).takeUntil(t)}))},a.fromPoll=function(e,t){return xe(a,"fromPoll",e,t,a.fromBinder(function(t){var n;return n=a.scheduler.setInterval(t,e),function(){return a.scheduler.clearInterval(n)}},t))},a.later=function(e,t){return xe(a,"later",e,t,a.fromBinder(function(n){var r,i;return i=function(){return n([t,q()])},r=a.scheduler.setTimeout(i,e),function(){return a.scheduler.clearTimeout(r)}}))},a.sequentially=function(e,t){var n;return n=0,xe(a,"sequentially",e,t,a.fromPoll(e,function(){var e;return e=t[n++],n<t.length?e:n===t.length?[e,q()]:q()}))},a.repeatedly=function(e,t){var n;return n=0,xe(a,"repeatedly",e,t,a.fromPoll(e,function(){return t[n++%t.length]}))},a.interval=function(e,t){return null==t&&(t={}),xe(a,"interval",e,t,a.fromPoll(e,function(){return ae(t)}))},a.EventStream.prototype.delay=function(e){return xe(this,"delay",e,this.flatMap(function(t){return a.later(e,t)}))},a.Property.prototype.delay=function(e){return this.delayChanges("delay",e,function(t){return t.delay(e)})},a.Property.prototype.delayChanges=function(){var e,t,n;return e=2<=arguments.length?Te.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++],xe.apply(null,[this].concat(Te.call(e),[k(this,t(this.changes()))]))},a.Observable.prototype.bufferingThrottle=function(e){return xe(this,"bufferingThrottle",e,this.flatMapConcat(function(t){return a.once(t).concat(a.later(e).filter(!1))}))},a.Property.prototype.bufferingThrottle=function(){return a.Observable.prototype.bufferingThrottle.apply(this,arguments).toProperty()},u=function(e){function t(){this.guardedSink=Ce(this.guardedSink,this),this.subscribeAll=Ce(this.subscribeAll,this),this.unsubAll=Ce(this.unsubAll,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,t.__super__.constructor.call(this,U(a,"Bus"),this.subscribeAll)}return Ee(t,e),t.prototype.unsubAll=function(){var e,t,n,r;for(n=this.subscriptions,e=0,t=n.length;t>e;e++)r=n[e],"function"==typeof r.unsub&&r.unsub();return void 0},t.prototype.subscribeAll=function(e){var t,n,r,i;for(this.sink=e,r=I(this.subscriptions),t=0,n=r.length;n>t;t++)i=r[t],this.subscribeInput(i);return this.unsubAll},t.prototype.guardedSink=function(e){return function(t){return function(n){return n.isEnd()?(t.unsubscribeInput(e),a.noMore):t.sink(n)}}(this)},t.prototype.subscribeInput=function(e){return e.unsub=e.input.dispatcher.subscribe(this.guardedSink(e.input))},t.prototype.unsubscribeInput=function(e){var t,n,r,i,o;for(i=this.subscriptions,t=n=0,r=i.length;r>n;t=++n)if(o=i[t],o.input===e)return"function"==typeof o.unsub&&o.unsub(),void this.subscriptions.splice(t,1)},t.prototype.plug=function(e){var t;return P(e),this.ended?void 0:(t={input:e},this.subscriptions.push(t),null!=this.sink&&this.subscribeInput(t),function(t){return function(){return t.unsubscribeInput(e)}}(this))},t.prototype.end=function(){return this.ended=!0,this.unsubAll(),"function"==typeof this.sink?this.sink(q()):void 0},t.prototype.push=function(e){return"function"==typeof this.sink?this.sink(ae(e)):void 0},t.prototype.error=function(e){return"function"==typeof this.sink?this.sink(new d(e)):void 0},t}(v),a.Bus=u,ee=function(e,t){return we(function(){var n,r,i;return r=arguments[0],n=2<=arguments.length?Te.call(arguments,1):[],i=ue(t,[function(e,t){return r.apply(null,Te.call(e).concat([t]))}]),xe.apply(null,[a,e,r].concat(Te.call(n),[a.combineAsArray(n).flatMap(i)]))})},a.fromCallback=ee("fromCallback",function(){var e,t;return t=arguments[0],e=2<=arguments.length?Te.call(arguments,1):[],a.fromBinder(function(n){return te(t,e)(n),se},function(e){return[e,q()]})}),a.fromNodeCallback=ee("fromNodeCallback",function(){var e,t;return t=arguments[0],e=2<=arguments.length?Te.call(arguments,1):[],a.fromBinder(function(n){return te(t,e)(n),se},function(e,t){return e?[new d(e),q()]:[t,q()]})}),a.EventStream.prototype.debounce=function(e){return xe(this,"debounce",e,this.flatMapLatest(function(t){return a.later(e,t)}))},a.Property.prototype.debounce=function(e){return this.delayChanges("debounce",e,function(t){return t.debounce(e)})},a.EventStream.prototype.debounceImmediate=function(e){return xe(this,"debounceImmediate",e,this.flatMapFirst(function(t){return a.once(t).concat(a.later(e).filter(!1))}))},a.Observable.prototype.scan=function(e,t){var n,r,i;return t=pe(t),n=ge(e),i=function(e){return function(i){var o,s,u,c;return o=!1,c=se,s=a.more,u=function(){return o?void 0:n.forEach(function(e){return o=!0,s=i(new y(function(){return e})),s===a.noMore?(c(),c=se):void 0})},c=e.dispatcher.subscribe(function(e){var r,c;return e.hasValue()?o&&e.isInitial()?a.more:(e.isInitial()||u(),o=!0,c=n.getOrElse(void 0),r=t(c,e.value()),n=new T(r),i(e.apply(function(){return r}))):(e.isEnd()&&(s=u()),s!==a.noMore?i(e):void 0)}),S.whenDoneWith(r,u),c}}(this),r=new _(U(this,"scan",e,t),i)},a.Observable.prototype.diff=function(e,t){return t=pe(t),xe(this,"diff",e,t,this.scan([e],function(e,n){return[n,t(e[0],n)]}).filter(function(e){return 2===e.length}).map(function(e){return e[1]}))},a.Observable.prototype.doAction=function(){var e;return e=ne(arguments),xe(this,"doAction",e,this.withHandler(function(t){return t.hasValue()&&e(t.value()),this.push(t)}))},a.Observable.prototype.endOnError=function(){var e,t;return t=arguments[0],e=2<=arguments.length?Te.call(arguments,1):[],null==t&&(t=!0),B(this,t,e,function(e){return xe(this,"endOnError",this.withHandler(function(t){return t.isError()&&e(t.error)?(this.push(t),this.push(q())):this.push(t)}))})},w.prototype.errors=function(){return xe(this,"errors",this.filter(function(){return!1}))},be=function(e){return[e,q()]},a.fromPromise=function(e,t){return xe(a,"fromPromise",e,a.fromBinder(function(n){var r;return null!=(r=e.then(n,function(e){return n(new d(e))}))&&"function"==typeof r.done&&r.done(),function(){return t&&"function"==typeof e.abort?e.abort():void 0}},be))},a.Observable.prototype.mapError=function(){var e;return e=ne(arguments),xe(this,"mapError",e,this.withHandler(function(t){return this.push(t.isError()?ae(e(t.error)):t)}))},a.Observable.prototype.flatMapError=function(e){return xe(this,"flatMapError",e,this.mapError(function(e){return new d(e)}).flatMap(function(t){return t instanceof d?e(t.error):a.once(t)}))},a.EventStream.prototype.sampledBy=function(e,t){return xe(this,"sampledBy",e,t,this.toProperty().sampledBy(e,t))},a.Property.prototype.sampledBy=function(e,t){var n,r,i,o,s;return null!=t?t=pe(t):(n=!0,t=function(e){return e.value()}),s=new C(this,!1,n),i=new C(e,!0,n),o=a.when([s,i],t),r=e instanceof _?o.toProperty():o,xe(this,"sampledBy",e,t,r)},a.Property.prototype.sample=function(e){return xe(this,"sample",e,this.sampledBy(a.interval(e,{})))},a.Observable.prototype.map=function(){var e,t;return t=arguments[0],e=2<=arguments.length?Te.call(arguments,1):[],t instanceof _?t.sampledBy(this,Y):B(this,t,e,function(e){return xe(this,"map",e,this.withHandler(function(t){return this.push(t.fmap(e))}))})},a.Observable.prototype.fold=function(e,t){return xe(this,"fold",e,t,this.scan(e,t).sampledBy(this.filter(!1).mapEnd().toProperty()))},w.prototype.reduce=w.prototype.fold,a.EventStream.prototype.merge=function(e){var t;return N(e),t=this,xe(t,"merge",e,a.mergeAll(this,e))},a.mergeAll=function(){var e;return e=1<=arguments.length?Te.call(arguments,0):[],J(e[0])&&(e=e[0]),e.length?new v(U.apply(null,[a,"mergeAll"].concat(Te.call(e))),function(t){var n,r,i;return n=0,i=function(r){return function(i){return r.dispatcher.subscribe(function(r){var o;return r.isEnd()?(n++,n===e.length?t(q()):a.more):(o=t(r),o===a.noMore&&i(),o)})}},r=A.map(i,e),new a.CompositeUnsubscribe(r).unsubscribe}):a.never()},a.Observable.prototype.take=function(e){return 0>=e?a.never():xe(this,"take",e,this.withHandler(function(t){return t.hasValue()?(e--,e>0?this.push(t):(0===e&&this.push(t),this.push(q()),a.noMore)):this.push(t)}))},a.fromArray=function(e){var t;return M(e),e.length?(t=0,new v(U(a,"fromArray",e),function(n){var r,i,o;return o=!1,i=a.more,r=function(){var s;return i===a.noMore||o||(s=e[t++],i=n(de(s)),i===a.noMore)?void 0:t===e.length?n(q()):S.afterTransaction(r)},r(),function(){return o=!0}})):xe(a,"fromArray",e,a.never())},a.EventStream.prototype.holdWhen=function(e){var t,n,r;return r=e.startWith(!1),n=r.filter(function(e){return!e}),t=r.filter(A.id),xe(this,"holdWhen",e,this.filter(!1).merge(r.flatMapConcat(function(e){return function(r){return r?e.scan([],function(e,t){return e.concat([t])}).sampledBy(n).take(1).flatMap(a.fromArray):e.takeUntil(t)}}(this))))},a.$={},a.$.asEventStream=function(e,t,n){var r;return A.isFunction(t)&&(r=[t,void 0],n=r[0],t=r[1]),xe(this.selector||this,"asEventStream",e,a.fromBinder(function(n){return function(r){return n.on(e,t,r),function(){return n.off(e,t,r)}}}(this),n))},null!=(le="undefined"!=typeof jQuery&&null!==jQuery?jQuery:"undefined"!=typeof Zepto&&null!==Zepto?Zepto:void 0)&&(le.fn.asEventStream=a.$.asEventStream),a.Observable.prototype.log=function(){var e;return e=1<=arguments.length?Te.call(arguments,0):[],this.subscribe(function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log.apply(console,Te.call(e).concat([t.log()])):void 0}),this},a.repeat=function(e){var t;return t=0,a.fromBinder(function(n){var r,i,o,s,u;return r=!1,o=a.more,u=function(){},i=function(e){return e.isEnd()?r?s():r=!0:o=n(e)},s=function(){var s;for(r=!0;r&&o!==a.noMore;)s=e(t++),r=!1,s?u=s.subscribeInternal(i):n(q());return r=!0},s(),function(){return u()}})},a.retry=function(e){var t,n,r,i,o,s,u;if(!A.isFunction(e.source))throw new g("'source' option has to be a function");return u=e.source,s=e.retries||0,o=e.maxRetries||s,t=e.delay||function(){return 0},i=e.isRetryable||function(){return!0},r=!1,n=null,xe(a,"retry",e,a.repeat(function(){var e,c,l;return r?null:(l=function(){return u().endOnError().withHandler(function(e){return e.isError()?(n=e,i(n.error)&&s>0?void 0:(r=!0,this.push(e))):(e.hasValue()&&(n=null,r=!0),this.push(e))})},n?(e={error:n.error,retriesDone:o-s},c=a.later(t(e)).filter(!1),s-=1,c.concat(a.once().flatMap(l))):l())}))},a.Observable.prototype.skip=function(e){return xe(this,"skip",e,this.withHandler(function(t){return t.hasValue()&&e>0?(e--,a.more):this.push(t)}))},a.EventStream.prototype.skipUntil=function(e){var t;return t=e.take(1).map(!0).toProperty(!1),xe(this,"skipUntil",e,this.filter(t))},a.EventStream.prototype.skipWhile=function(){var e,t,n;return t=arguments[0],e=2<=arguments.length?Te.call(arguments,1):[],n=!1,B(this,t,e,function(e){return xe(this,"skipWhile",e,this.withHandler(function(t){return!n&&t.hasValue()&&e(t.value())?a.more:(t.hasValue()&&(n=!0),this.push(t))}))})},a.Observable.prototype.slidingWindow=function(e,t){return null==t&&(t=0),xe(this,"slidingWindow",e,t,this.scan([],function(t,n){return t.concat([n]).slice(-e)}).filter(function(e){return e.length>=t}))},a.spy=function(e){return he.push(e)},he=[],fe=function(e){var t,n,r;if(he.length&&!fe.running)try{for(fe.running=!0,t=0,n=he.length;n>t;t++)(r=he[t])(e)}finally{delete fe.running}return void 0},a.Property.prototype.startWith=function(e){return xe(this,"startWith",e,this.scan(e,function(e,t){return t}))},a.EventStream.prototype.startWith=function(e){return xe(this,"startWith",e,a.once(e).concat(this))},a.Observable.prototype.takeWhile=function(){var e,t;return t=arguments[0],e=2<=arguments.length?Te.call(arguments,1):[],B(this,t,e,function(e){return xe(this,"takeWhile",e,this.withHandler(function(t){return t.filter(e)?this.push(t):(this.push(q()),a.noMore)}))})},a.update=function(){var e,t,n,r;for(t=arguments[0],r=2<=arguments.length?Te.call(arguments,1):[],n=function(e){return function(){var t;return t=1<=arguments.length?Te.call(arguments,0):[],function(n){return e.apply(null,[n].concat(t))}}},e=r.length-1;e>0;)r[e]instanceof Function||(r[e]=function(e){return function(){return e}}(r[e])),r[e]=n(r[e]),e-=2;return xe.apply(null,[a,"update",t].concat(Te.call(r),[a.when.apply(a,r).scan(t,function(e,t){
return t(e)})]))},a.zipAsArray=function(){var e;return e=1<=arguments.length?Te.call(arguments,0):[],J(e[0])&&(e=e[0]),xe.apply(null,[a,"zipAsArray"].concat(Te.call(e),[a.zipWith(e,function(){var e;return e=1<=arguments.length?Te.call(arguments,0):[]})]))},a.zipWith=function(){var e,t,n;return e=arguments[0],n=2<=arguments.length?Te.call(arguments,1):[],A.isFunction(e)||(t=[e,n[0]],n=t[0],e=t[1]),n=A.map(function(e){return e.toEventStream()},n),xe.apply(null,[a,"zipWith",e].concat(Te.call(n),[a.when(n,e)]))},a.Observable.prototype.zip=function(e,t){return null==t&&(t=Array),xe(this,"zip",e,a.zipWith([this,e],t))},a.Observable.prototype.first=function(){return xe(this,"first",this.take(1))},a.Observable.prototype.last=function(){var e;return xe(this,"last",this.withHandler(function(t){return t.isEnd()?(e&&this.push(e),this.push(q()),a.noMore):void(e=t)}))},a.EventStream.prototype.throttle=function(e){return xe(this,"throttle",e,this.bufferWithTime(e).map(function(e){return e[e.length-1]}))},a.Property.prototype.throttle=function(e){return this.delayChanges("throttle",e,function(t){return t.throttle(e)})},w.prototype.firstToPromise=function(e){var t=this;if("function"!=typeof e){if("function"!=typeof Promise)throw new g("There isn't default Promise, use shim or parameter");e=Promise}return new e(function(e,n){return t.subscribe(function(t){return t.hasValue()&&e(t.value()),t.isError()&&n(t.error),a.noMore})})},w.prototype.toPromise=function(e){return this.last().firstToPromise(e)},null!==n(409)&&null!=n(385)?(r=[],i=function(){return a}.apply(t,r),!(void 0!==i&&(o.exports=i)),this.Bacon=a):"undefined"!=typeof o&&null!==o&&null!=o.exports?(o.exports=a,a.Bacon=a):this.Bacon=a}).call(this)}).call(t,function(){return this}(),n(99)(e))},function(e,t,n){function r(e){var t=4/11,n=8/11,r=.9,i=4356/361,o=35442/1805,a=16061/1805,s=e*e;return t>e?7.5625*s:n>e?9.075*s-9.9*e+3.4:r>e?i*s-o*e+a:10.8*e*e-20.52*e+10.72}e.exports=r},function(e,t,n){"use strict";function r(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function i(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function o(e){switch(e){case k.topCompositionStart:return O.compositionStart;case k.topCompositionEnd:return O.compositionEnd;case k.topCompositionUpdate:return O.compositionUpdate}}function a(e,t){return e===k.topKeyDown&&t.keyCode===w}function s(e,t){switch(e){case k.topKeyUp:return-1!==x.indexOf(t.keyCode);case k.topKeyDown:return t.keyCode!==w;case k.topKeyPress:case k.topMouseDown:case k.topBlur:return!0;default:return!1}}function u(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function c(e,t,n,r){var i,c;if(_?i=o(e):N?s(e,r)&&(i=O.compositionEnd):a(e,r)&&(i=O.compositionStart),!i)return null;C&&(N||i!==O.compositionStart?i===O.compositionEnd&&N&&(c=N.getData()):N=v.getPooled(t));var l=g.getPooled(i,n,r);if(c)l.data=c;else{var f=u(r);null!==f&&(l.data=f)}return d.accumulateTwoPhaseDispatches(l),l}function l(e,t){switch(e){case k.topCompositionEnd:return u(t);case k.topKeyPress:var n=t.which;return n!==S?null:(M=!0,A);case k.topTextInput:var r=t.data;return r===A&&M?null:r;default:return null}}function f(e,t){if(N){if(e===k.topCompositionEnd||s(e,t)){var n=N.getData();return v.release(N),N=null,n}return null}switch(e){case k.topPaste:return null;case k.topKeyPress:return t.which&&!i(t)?String.fromCharCode(t.which):null;case k.topCompositionEnd:return C?null:t.data;default:return null}}function h(e,t,n,r){var i;if(i=T?l(e,r):f(e,r),!i)return null;var o=y.getPooled(O.beforeInput,n,r);return o.data=i,d.accumulateTwoPhaseDispatches(o),o}var p=n(10),d=n(30),m=n(6),v=n(136),g=n(172),y=n(175),b=n(20),x=[9,13,27,32],w=229,_=m.canUseDOM&&"CompositionEvent"in window,E=null;m.canUseDOM&&"documentMode"in document&&(E=document.documentMode);var T=m.canUseDOM&&"TextEvent"in window&&!E&&!r(),C=m.canUseDOM&&(!_||E&&E>8&&11>=E),S=32,A=String.fromCharCode(S),k=p.topLevelTypes,O={beforeInput:{phasedRegistrationNames:{bubbled:b({onBeforeInput:null}),captured:b({onBeforeInputCapture:null})},dependencies:[k.topCompositionEnd,k.topKeyPress,k.topTextInput,k.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:b({onCompositionEnd:null}),captured:b({onCompositionEndCapture:null})},dependencies:[k.topBlur,k.topCompositionEnd,k.topKeyDown,k.topKeyPress,k.topKeyUp,k.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:b({onCompositionStart:null}),captured:b({onCompositionStartCapture:null})},dependencies:[k.topBlur,k.topCompositionStart,k.topKeyDown,k.topKeyPress,k.topKeyUp,k.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:b({onCompositionUpdate:null}),captured:b({onCompositionUpdateCapture:null})},dependencies:[k.topBlur,k.topCompositionUpdate,k.topKeyDown,k.topKeyPress,k.topKeyUp,k.topMouseDown]}},M=!1,N=null,j={eventTypes:O,extractEvents:function(e,t,n,r){return[c(e,t,n,r),h(e,t,n,r)]}};e.exports=j},function(e,t,n){"use strict";function r(e){return"SELECT"===e.nodeName||"INPUT"===e.nodeName&&"file"===e.type}function i(e){var t=E.getPooled(k.change,M,e);x.accumulateTwoPhaseDispatches(t),_.batchedUpdates(o,t)}function o(e){b.enqueueEvents(e),b.processEventQueue()}function a(e,t){O=e,M=t,O.attachEvent("onchange",i)}function s(){O&&(O.detachEvent("onchange",i),O=null,M=null)}function u(e,t,n){return e===A.topChange?n:void 0}function c(e,t,n){e===A.topFocus?(s(),a(t,n)):e===A.topBlur&&s()}function l(e,t){O=e,M=t,N=e.value,j=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(O,"value",D),O.attachEvent("onpropertychange",h)}function f(){O&&(delete O.value,O.detachEvent("onpropertychange",h),O=null,M=null,N=null,j=null)}function h(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==N&&(N=t,i(e))}}function p(e,t,n){return e===A.topInput?n:void 0}function d(e,t,n){e===A.topFocus?(f(),l(t,n)):e===A.topBlur&&f()}function m(e,t,n){return e!==A.topSelectionChange&&e!==A.topKeyUp&&e!==A.topKeyDown||!O||O.value===N?void 0:(N=O.value,M)}function v(e){return"INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)}function g(e,t,n){return e===A.topClick?n:void 0}var y=n(10),b=n(29),x=n(30),w=n(6),_=n(13),E=n(22),T=n(68),C=n(96),S=n(20),A=y.topLevelTypes,k={change:{phasedRegistrationNames:{bubbled:S({onChange:null}),captured:S({onChangeCapture:null})},dependencies:[A.topBlur,A.topChange,A.topClick,A.topFocus,A.topInput,A.topKeyDown,A.topKeyUp,A.topSelectionChange]}},O=null,M=null,N=null,j=null,R=!1;w.canUseDOM&&(R=T("change")&&(!("documentMode"in document)||document.documentMode>8));var P=!1;w.canUseDOM&&(P=T("input")&&(!("documentMode"in document)||document.documentMode>9));var D={get:function(){return j.get.call(this)},set:function(e){N=""+e,j.set.call(this,e)}},I={eventTypes:k,extractEvents:function(e,t,n,i){var o,a;if(r(t)?R?o=u:a=c:C(t)?P?o=p:(o=m,a=d):v(t)&&(o=g),o){var s=o(e,t,n);if(s){var l=E.getPooled(k.change,s,i);return x.accumulateTwoPhaseDispatches(l),l}}a&&a(e,t,n)}};e.exports=I},function(e,t,n){"use strict";var r=0,i={createReactRootIndex:function(){return r++}};e.exports=i},function(e,t,n){(function(t){"use strict";function r(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var i=n(132),o=n(83),a=n(200),s=n(2),u={dangerouslyReplaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup,updateTextContent:a,processUpdates:function(e,n){for(var u,c=null,l=null,f=0;f<e.length;f++)if(u=e[f],u.type===o.MOVE_EXISTING||u.type===o.REMOVE_NODE){var h=u.fromIndex,p=u.parentNode.childNodes[h],d=u.parentID;"production"!==t.env.NODE_ENV?s(p,"processUpdates(): Unable to find child %s of element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",h,d):s(p),c=c||{},c[d]=c[d]||[],c[d][h]=p,l=l||[],l.push(p)}var m=i.dangerouslyRenderMarkup(n);if(l)for(var v=0;v<l.length;v++)l[v].parentNode.removeChild(l[v]);for(var g=0;g<e.length;g++)switch(u=e[g],u.type){case o.INSERT_MARKUP:r(u.parentNode,m[u.markupIndex],u.toIndex);break;case o.MOVE_EXISTING:r(u.parentNode,c[u.parentID][u.fromIndex],u.toIndex);break;case o.TEXT_CONTENT:a(u.parentNode,u.textContent);break;case o.REMOVE_NODE:}}};e.exports=u}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(e){return e.substring(1,e.indexOf(" "))}var i=n(6),o=n(184),a=n(19),s=n(93),u=n(2),c=/^(<[^ \/>]+)/,l="data-danger-index",f={dangerouslyRenderMarkup:function(e){"production"!==t.env.NODE_ENV?u(i.canUseDOM,"dangerouslyRenderMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering."):u(i.canUseDOM);for(var n,f={},h=0;h<e.length;h++)"production"!==t.env.NODE_ENV?u(e[h],"dangerouslyRenderMarkup(...): Missing markup."):u(e[h]),n=r(e[h]),n=s(n)?n:"*",f[n]=f[n]||[],f[n][h]=e[h];var p=[],d=0;for(n in f)if(f.hasOwnProperty(n)){var m,v=f[n];for(m in v)if(v.hasOwnProperty(m)){var g=v[m];v[m]=g.replace(c,"$1 "+l+'="'+m+'" ')}for(var y=o(v.join(""),a),b=0;b<y.length;++b){var x=y[b];x.hasAttribute&&x.hasAttribute(l)?(m=+x.getAttribute(l),x.removeAttribute(l),"production"!==t.env.NODE_ENV?u(!p.hasOwnProperty(m),"Danger: Assigning to an already-occupied result index."):u(!p.hasOwnProperty(m)),p[m]=x,d+=1):"production"!==t.env.NODE_ENV&&console.error("Danger: Discarding unexpected node:",x)}}return"production"!==t.env.NODE_ENV?u(d===p.length,"Danger: Did not assign to every index of resultList."):u(d===p.length),"production"!==t.env.NODE_ENV?u(p.length===e.length,"Danger: Expected markup to render %s nodes, but rendered %s.",e.length,p.length):u(p.length===e.length),p},dangerouslyReplaceNodeWithMarkup:function(e,n){"production"!==t.env.NODE_ENV?u(i.canUseDOM,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering."):u(i.canUseDOM),"production"!==t.env.NODE_ENV?u(n,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."):u(n),"production"!==t.env.NODE_ENV?u("html"!==e.tagName.toLowerCase(),"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See React.renderToString()."):u("html"!==e.tagName.toLowerCase());var r=o(n,a)[0];e.parentNode.replaceChild(r,e)}};e.exports=f}).call(t,n(1))},function(e,t,n){"use strict";var r=n(20),i=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({BeforeInputEventPlugin:null}),r({AnalyticsEventPlugin:null}),r({MobileSafariClickEventPlugin:null})];e.exports=i},function(e,t,n){"use strict";var r=n(10),i=n(30),o=n(41),a=n(12),s=n(20),u=r.topLevelTypes,c=a.getFirstReactDOM,l={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[u.topMouseOut,u.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[u.topMouseOut,u.topMouseOver]}},f=[null,null],h={eventTypes:l,extractEvents:function(e,t,n,r){if(e===u.topMouseOver&&(r.relatedTarget||r.fromElement))return null;if(e!==u.topMouseOut&&e!==u.topMouseOver)return null;var s;if(t.window===t)s=t;else{var h=t.ownerDocument;s=h?h.defaultView||h.parentWindow:window}var p,d;if(e===u.topMouseOut?(p=t,d=c(r.relatedTarget||r.toElement)||s):(p=s,d=t),p===d)return null;var m=p?a.getID(p):"",v=d?a.getID(d):"",g=o.getPooled(l.mouseLeave,m,r);g.type="mouseleave",g.target=p,g.relatedTarget=d;var y=o.getPooled(l.mouseEnter,v,r);return y.type="mouseenter",y.target=d,y.relatedTarget=p,i.accumulateEnterLeaveDispatches(g,y,m,v),f[0]=g,f[1]=y,f}};e.exports=h},function(e,t,n){(function(t){var r=n(19),i={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,n,i){return e.addEventListener?(e.addEventListener(n,i,!0),{remove:function(){e.removeEventListener(n,i,!0)}}):("production"!==t.env.NODE_ENV&&console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:r})},registerDefault:function(){}};e.exports=i}).call(t,n(1))},function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var i=n(15),o=n(3),a=n(94);o(r.prototype,{getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,i=this.getText(),o=i.length;for(e=0;r>e&&n[e]===i[e];e++);var a=r-e;for(t=1;a>=t&&n[r-t]===i[o-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=i.slice(e,s),this._fallbackText}}),i.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";var r,i=n(21),o=n(6),a=i.injection.MUST_USE_ATTRIBUTE,s=i.injection.MUST_USE_PROPERTY,u=i.injection.HAS_BOOLEAN_VALUE,c=i.injection.HAS_SIDE_EFFECTS,l=i.injection.HAS_NUMERIC_VALUE,f=i.injection.HAS_POSITIVE_NUMERIC_VALUE,h=i.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(o.canUseDOM){var p=document.implementation;r=p&&p.hasFeature&&p.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var d={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:a|u,allowTransparency:a,alt:null,async:u,autoComplete:null,autoPlay:u,cellPadding:null,cellSpacing:null,charSet:a,checked:s|u,classID:a,className:r?a:s,cols:a|f,colSpan:null,content:null,contentEditable:null,contextMenu:a,controls:s|u,coords:null,crossOrigin:null,data:null,dateTime:a,defer:u,dir:null,disabled:a|u,download:h,draggable:null,encType:null,form:a,formAction:a,formEncType:a,formMethod:a,formNoValidate:u,formTarget:a,frameBorder:a,headers:null,height:a,hidden:a|u,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:s,label:null,lang:null,list:a,loop:s|u,low:null,manifest:a,marginHeight:null,marginWidth:null,max:null,maxLength:a,media:a,mediaGroup:null,method:null,min:null,multiple:s|u,muted:s|u,name:null,noValidate:u,open:u,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:s|u,rel:null,required:u,role:a,rows:a|f,rowSpan:null,sandbox:null,scope:null,scoped:u,scrolling:null,seamless:a|u,selected:s|u,shape:null,size:a|f,sizes:a,span:f,spellCheck:null,src:null,srcDoc:s,srcSet:a,start:l,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:s|c,width:a,wmode:a,autoCapitalize:null,autoCorrect:null,itemProp:a,itemScope:a|u,itemType:a,itemID:a,itemRef:a,property:null,unselectable:a},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};e.exports=d},function(e,t,n){"use strict";var r=n(10),i=n(19),o=r.topLevelTypes,a={eventTypes:null,extractEvents:function(e,t,n,r){if(e===o.topTouchStart){var a=r.target;a&&!a.onclick&&(a.onclick=i)}}};e.exports=a},function(e,t,n){(function(t){"use strict";var r=n(51),i=n(141),o=n(78),a=n(11),s=n(56),u=n(17),c=n(4),l=n(31),f=n(143),h=n(80),p=n(154),d=n(24),m=n(12),v=n(18),g=n(84),y=n(26),b=n(165),x=n(3),w=n(89),_=n(196);p.inject();var E=c.createElement,T=c.createFactory,C=c.cloneElement;"production"!==t.env.NODE_ENV&&(E=l.createElement,T=l.createFactory,C=l.cloneElement);var S=v.measure("React","render",m.render),A={Children:{map:i.map,forEach:i.forEach,count:i.count,only:_},Component:o,DOM:f,PropTypes:g,initializeTouchEvents:function(e){r.useTouchEvents=e},createClass:a.createClass,createElement:E,cloneElement:C,createFactory:T,createMixin:function(e){return e},constructAndRenderComponent:m.constructAndRenderComponent,constructAndRenderComponentByID:m.constructAndRenderComponentByID,findDOMNode:w,render:S,renderToString:b.renderToString,renderToStaticMarkup:b.renderToStaticMarkup,unmountComponentAtNode:m.unmountComponentAtNode,isValidElement:c.isValidElement,withContext:s.withContext,__spread:x};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:u,InstanceHandles:d,Mount:m,Reconciler:y,TextComponent:h}),"production"!==t.env.NODE_ENV){var k=n(6);if(k.canUseDOM&&window.top===window.self){navigator.userAgent.indexOf("Chrome")>-1&&"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&console.debug("Download the React DevTools for a better development experience: http://fb.me/react-devtools");for(var O=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim,Object.create,Object.freeze],M=0;M<O.length;M++)if(!O[M]){console.error("One or more ES5 shim/shams expected by React are not available: http://fb.me/react-warning-polyfills");break}}}A.version="0.13.2",e.exports=A}).call(t,n(1))},function(e,t,n){"use strict";var r=n(26),i=n(186),o=n(67),a=n(70),s={instantiateChildren:function(e,t,n){var r=i(e);for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],u=o(s,null);r[a]=u}return r},updateChildren:function(e,t,n,s){var u=i(t);if(!u&&!e)return null;var c;for(c in u)if(u.hasOwnProperty(c)){var l=e&&e[c],f=l&&l._currentElement,h=u[c];if(a(f,h))r.receiveComponent(l,h,n,s),u[c]=l;else{l&&r.unmountComponent(l,c);var p=o(h,null);u[c]=p}}for(c in e)!e.hasOwnProperty(c)||u&&u.hasOwnProperty(c)||r.unmountComponent(e[c]);return u},unmountChildren:function(e){for(var t in e){var n=e[t];r.unmountComponent(n)}}};e.exports=s},function(e,t,n){(function(t){"use strict";function r(e,t){this.forEachFunction=e,this.forEachContext=t}function i(e,t,n,r){var i=e;i.forEachFunction.call(i.forEachContext,t,r)}function o(e,t,n){if(null==e)return e;var o=r.getPooled(t,n);p(e,i,o),r.release(o)}function a(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function s(e,n,r,i){var o=e,a=o.mapResult,s=!a.hasOwnProperty(r);if("production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?d(s,"ReactChildren.map(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",r):null),s){var u=o.mapFunction.call(o.mapContext,n,i);a[r]=u}}function u(e,t,n){if(null==e)return e;var r={},i=a.getPooled(r,t,n);return p(e,s,i),a.release(i),h.create(r)}function c(e,t,n,r){return null}function l(e,t){return p(e,c,null)}var f=n(15),h=n(38),p=n(97),d=n(5),m=f.twoArgumentPooler,v=f.threeArgumentPooler;f.addPoolingTo(r,m),f.addPoolingTo(a,v);var g={forEach:o,map:u,count:l};e.exports=g}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}var i=n(55),o=n(56),a=n(17),s=n(4),u=n(31),c=n(25),l=n(59),f=n(39),h=n(18),p=n(60),d=n(40),m=n(26),v=n(13),g=n(3),y=n(43),b=n(2),x=n(70),w=n(5),_=1,E={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._isTopLevel=!1,this._pendingCallbacks=null},mountComponent:function(e,n,r){this._context=r,this._mountOrder=_++,this._rootNodeID=e;var i=this._processProps(this._currentElement.props),o=this._processContext(this._currentElement._context),a=f.getComponentClassForElement(this._currentElement),s=new a(i,o);"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?w(null!=s.render,"%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render` in your component or you may have accidentally tried to render an element whose type is a function that isn't a React component.",a.displayName||a.name||"Component"):null),s.props=i,s.context=o,s.refs=y,this._instance=s,c.set(s,this),"production"!==t.env.NODE_ENV&&this._warnIfContextsDiffer(this._currentElement._context,r),"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?w(!s.getInitialState||s.getInitialState.isReactClassApproved,"getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",this.getName()||"a component"):null,"production"!==t.env.NODE_ENV?w(!s.getDefaultProps||s.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",this.getName()||"a component"):null,"production"!==t.env.NODE_ENV?w(!s.propTypes,"propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",this.getName()||"a component"):null,"production"!==t.env.NODE_ENV?w(!s.contextTypes,"contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",this.getName()||"a component"):null,"production"!==t.env.NODE_ENV?w("function"!=typeof s.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",this.getName()||"A component"):null);var u=s.state;void 0===u&&(s.state=u=null),"production"!==t.env.NODE_ENV?b("object"==typeof u&&!Array.isArray(u),"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"):b("object"==typeof u&&!Array.isArray(u)),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var h,p=l.currentlyMountingInstance;l.currentlyMountingInstance=this;try{s.componentWillMount&&(s.componentWillMount(),this._pendingStateQueue&&(s.state=this._processPendingState(s.props,s.context))),h=this._renderValidatedComponent()}finally{l.currentlyMountingInstance=p}this._renderedComponent=this._instantiateReactComponent(h,this._currentElement.type);var d=m.mountComponent(this._renderedComponent,e,n,this._processChildContext(r));return s.componentDidMount&&n.getReactMountReady().enqueue(s.componentDidMount,s),d},unmountComponent:function(){var e=this._instance;if(e.componentWillUnmount){var t=l.currentlyUnmountingInstance;l.currentlyUnmountingInstance=this;try{e.componentWillUnmount()}finally{l.currentlyUnmountingInstance=t}}m.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,c.remove(e)},_setPropsInternal:function(e,t){var n=this._pendingElement||this._currentElement;this._pendingElement=s.cloneAndReplaceProps(n,g({},n.props,e)),v.enqueueUpdate(this,t)},_maskContext:function(e){var t=null;if("string"==typeof this._currentElement.type)return y;var n=this._currentElement.type.contextTypes;if(!n)return y;t={};for(var r in n)t[r]=e[r];return t},_processContext:function(e){var n=this._maskContext(e);if("production"!==t.env.NODE_ENV){var r=f.getComponentClassForElement(this._currentElement);r.contextTypes&&this._checkPropTypes(r.contextTypes,n,p.context)}return n},_processChildContext:function(e){var n=this._instance,r=n.getChildContext&&n.getChildContext();if(r){"production"!==t.env.NODE_ENV?b("object"==typeof n.constructor.childContextTypes,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",this.getName()||"ReactCompositeComponent"):b("object"==typeof n.constructor.childContextTypes),"production"!==t.env.NODE_ENV&&this._checkPropTypes(n.constructor.childContextTypes,r,p.childContext);for(var i in r)"production"!==t.env.NODE_ENV?b(i in n.constructor.childContextTypes,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",i):b(i in n.constructor.childContextTypes);return g({},e,r)}return e},_processProps:function(e){if("production"!==t.env.NODE_ENV){var n=f.getComponentClassForElement(this._currentElement);n.propTypes&&this._checkPropTypes(n.propTypes,e,p.prop)}return e},_checkPropTypes:function(e,n,i){var o=this.getName();for(var a in e)if(e.hasOwnProperty(a)){var s;try{"production"!==t.env.NODE_ENV?b("function"==typeof e[a],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",o||"React class",d[i],a):b("function"==typeof e[a]),s=e[a](n,a,o,i)}catch(u){s=u}if(s instanceof Error){var c=r(this);i===p.prop?"production"!==t.env.NODE_ENV?w(!1,"Failed Composite propType: %s%s",s.message,c):null:"production"!==t.env.NODE_ENV?w(!1,"Failed Context Types: %s%s",s.message,c):null}}},receiveComponent:function(e,t,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(t,r,e,i,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&m.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&("production"!==t.env.NODE_ENV&&u.checkAndWarnForMutatedProps(this._currentElement),this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context))},_warnIfContextsDiffer:function(e,n){e=this._maskContext(e),n=this._maskContext(n);for(var r=Object.keys(n).sort(),i=this.getName()||"ReactCompositeComponent",o=0;o<r.length;o++){var a=r[o];"production"!==t.env.NODE_ENV?w(e[a]===n[a],"owner-based and parent-based contexts differ (values: `%s` vs `%s`) for key (%s) while mounting %s (see: http://fb.me/react-context-by-parent)",e[a],n[a],a,i):null}},updateComponent:function(e,n,r,i,o){var a=this._instance,s=a.context,u=a.props;n!==r&&(s=this._processContext(r._context),u=this._processProps(r.props),"production"!==t.env.NODE_ENV&&null!=o&&this._warnIfContextsDiffer(r._context,o),a.componentWillReceiveProps&&a.componentWillReceiveProps(u,s));var c=this._processPendingState(u,s),l=this._pendingForceUpdate||!a.shouldComponentUpdate||a.shouldComponentUpdate(u,c,s);"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?w("undefined"!=typeof l,"%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"):null),l?(this._pendingForceUpdate=!1,this._performComponentUpdate(r,u,c,s,e,o)):(this._currentElement=r,this._context=o,a.props=u,a.state=c,a.context=s)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;for(var o=g({},i?r[0]:n.state),a=i?1:0;a<r.length;a++){var s=r[a];g(o,"function"==typeof s?s.call(n,o,e,t):s)}return o},_performComponentUpdate:function(e,t,n,r,i,o){var a=this._instance,s=a.props,u=a.state,c=a.context;a.componentWillUpdate&&a.componentWillUpdate(t,n,r),this._currentElement=e,this._context=o,a.props=t,a.state=n,a.context=r,this._updateRenderedComponent(i,o),a.componentDidUpdate&&i.getReactMountReady().enqueue(a.componentDidUpdate.bind(a,s,u,c),a)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,i=this._renderValidatedComponent();if(x(r,i))m.receiveComponent(n,i,e,this._processChildContext(t));else{var o=this._rootNodeID,a=n._rootNodeID;m.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(i,this._currentElement.type);var s=m.mountComponent(this._renderedComponent,o,e,this._processChildContext(t));this._replaceNodeWithMarkupByID(a,s)}},_replaceNodeWithMarkupByID:function(e,t){i.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,n=e.render();return"production"!==t.env.NODE_ENV&&"undefined"==typeof n&&e.render._isMockFunction&&(n=null),n},_renderValidatedComponent:function(){var e,n=o.current;o.current=this._processChildContext(this._currentElement._context),a.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{o.current=n,a.current=null}return"production"!==t.env.NODE_ENV?b(null===e||e===!1||s.isValidElement(e),"%s.render(): A valid ReactComponent must be returned. You may have returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"):b(null===e||e===!1||s.isValidElement(e)),e},attachRef:function(e,t){var n=this.getPublicInstance(),r=n.refs===y?n.refs={}:n.refs;r[e]=t.getPublicInstance()},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){return this._instance},_instantiateReactComponent:null};h.measureMethods(E,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var T={Mixin:E};e.exports=T}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function r(e){return"production"!==t.env.NODE_ENV?o.createFactory(e):i.createFactory(e)}var i=n(4),o=n(31),a=n(194),s=a({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},r);e.exports=s}).call(t,n(1))},function(e,t,n){"use strict";var r=n(37),i=n(16),o=n(11),a=n(4),s=n(33),u=a.createFactory("button"),c=s({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),l=o.createClass({displayName:"ReactDOMButton",tagName:"BUTTON",mixins:[r,i],
render:function(){var e={};for(var t in this.props)!this.props.hasOwnProperty(t)||this.props.disabled&&c[t]||(e[t]=this.props[t]);return u(e,this.props.children)}});e.exports=l},function(e,t,n){"use strict";var r=n(10),i=n(53),o=n(16),a=n(11),s=n(4),u=s.createFactory("form"),c=a.createClass({displayName:"ReactDOMForm",tagName:"FORM",mixins:[o,i],render:function(){return u(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(r.topLevelTypes.topSubmit,"submit")}});e.exports=c},function(e,t,n){"use strict";var r=n(10),i=n(53),o=n(16),a=n(11),s=n(4),u=s.createFactory("iframe"),c=a.createClass({displayName:"ReactDOMIframe",tagName:"IFRAME",mixins:[o,i],render:function(){return u(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load")}});e.exports=c},function(e,t,n){"use strict";var r=n(10),i=n(53),o=n(16),a=n(11),s=n(4),u=s.createFactory("img"),c=a.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[o,i],render:function(){return u(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(r.topLevelTypes.topError,"error")}});e.exports=c},function(e,t,n){(function(t){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var i=n(37),o=n(28),a=n(52),s=n(16),u=n(11),c=n(4),l=n(12),f=n(13),h=n(3),p=n(2),d=c.createFactory("input"),m={},v=u.createClass({displayName:"ReactDOMInput",tagName:"INPUT",mixins:[i,a.Mixin,s],getInitialState:function(){var e=this.props.defaultValue;return{initialChecked:this.props.defaultChecked||!1,initialValue:null!=e?e:null}},render:function(){var e=h({},this.props);e.defaultChecked=null,e.defaultValue=null;var t=a.getValue(this);e.value=null!=t?t:this.state.initialValue;var n=a.getChecked(this);return e.checked=null!=n?n:this.state.initialChecked,e.onChange=this._handleChange,d(e,this.props.children)},componentDidMount:function(){var e=l.getID(this.getDOMNode());m[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=l.getID(e);delete m[t]},componentDidUpdate:function(e,t,n){var r=this.getDOMNode();null!=this.props.checked&&o.setValueForProperty(r,"checked",this.props.checked||!1);var i=a.getValue(this);null!=i&&o.setValueForProperty(r,"value",""+i)},_handleChange:function(e){var n,i=a.getOnChange(this);i&&(n=i.call(this,e)),f.asap(r,this);var o=this.props.name;if("radio"===this.props.type&&null!=o){for(var s=this.getDOMNode(),u=s;u.parentNode;)u=u.parentNode;for(var c=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),h=0,d=c.length;d>h;h++){var v=c[h];if(v!==s&&v.form===s.form){var g=l.getID(v);"production"!==t.env.NODE_ENV?p(g,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported."):p(g);var y=m[g];"production"!==t.env.NODE_ENV?p(y,"ReactDOMInput: Unknown radio button ID %s.",g):p(y),f.asap(r,y)}}}return n}});e.exports=v}).call(t,n(1))},function(e,t,n){(function(t){"use strict";var r=n(16),i=n(11),o=n(4),a=n(5),s=o.createFactory("option"),u=i.createClass({displayName:"ReactDOMOption",tagName:"OPTION",mixins:[r],componentWillMount:function(){"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?a(null==this.props.selected,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."):null)},render:function(){return s(this.props,this.props.children)}});e.exports=u}).call(t,n(1))},function(e,t,n){"use strict";function r(){if(this._pendingUpdate){this._pendingUpdate=!1;var e=s.getValue(this);null!=e&&this.isMounted()&&o(this,e)}}function i(e,t,n){if(null==e[t])return null;if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function o(e,t){var n,r,i,o=e.getDOMNode().options;if(e.props.multiple){for(n={},r=0,i=t.length;i>r;r++)n[""+t[r]]=!0;for(r=0,i=o.length;i>r;r++){var a=n.hasOwnProperty(o[r].value);o[r].selected!==a&&(o[r].selected=a)}}else{for(n=""+t,r=0,i=o.length;i>r;r++)if(o[r].value===n)return void(o[r].selected=!0);o.length&&(o[0].selected=!0)}}var a=n(37),s=n(52),u=n(16),c=n(11),l=n(4),f=n(13),h=n(3),p=l.createFactory("select"),d=c.createClass({displayName:"ReactDOMSelect",tagName:"SELECT",mixins:[a,s.Mixin,u],propTypes:{defaultValue:i,value:i},render:function(){var e=h({},this.props);return e.onChange=this._handleChange,e.value=null,p(e,this.props.children)},componentWillMount:function(){this._pendingUpdate=!1},componentDidMount:function(){var e=s.getValue(this);null!=e?o(this,e):null!=this.props.defaultValue&&o(this,this.props.defaultValue)},componentDidUpdate:function(e){var t=s.getValue(this);null!=t?(this._pendingUpdate=!1,o(this,t)):!e.multiple!=!this.props.multiple&&(null!=this.props.defaultValue?o(this,this.props.defaultValue):o(this,this.props.multiple?[]:""))},_handleChange:function(e){var t,n=s.getOnChange(this);return n&&(t=n.call(this,e)),this._pendingUpdate=!0,f.asap(r,this),t}});e.exports=d},function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function i(e){var t=document.selection,n=t.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var o=i.text.length,a=o+r;return{start:o,end:a}}function o(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,i=t.anchorOffset,o=t.focusNode,a=t.focusOffset,s=t.getRangeAt(0),u=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),c=u?0:s.toString().length,l=s.cloneRange();l.selectNodeContents(e),l.setEnd(s.startContainer,s.startOffset);var f=r(l.startContainer,l.startOffset,l.endContainer,l.endOffset),h=f?0:l.toString().length,p=h+c,d=document.createRange();d.setStart(n,i),d.setEnd(o,a);var m=d.collapsed;return{start:m?p:h,end:m?h:p}}function a(e,t){var n,r,i=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),i.moveToElementText(e),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),r=e[l()].length,i=Math.min(t.start,r),o="undefined"==typeof t.end?i:Math.min(t.end,r);if(!n.extend&&i>o){var a=o;o=i,i=a}var s=c(e,i),u=c(e,o);if(s&&u){var f=document.createRange();f.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(f),n.extend(u.node,u.offset)):(f.setEnd(u.node,u.offset),n.addRange(f))}}}var u=n(6),c=n(188),l=n(94),f=u.canUseDOM&&"selection"in document&&!("getSelection"in window),h={getOffsets:f?i:o,setOffsets:f?a:s};e.exports=h},function(e,t,n){(function(t){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var i=n(37),o=n(28),a=n(52),s=n(16),u=n(11),c=n(4),l=n(13),f=n(3),h=n(2),p=n(5),d=c.createFactory("textarea"),m=u.createClass({displayName:"ReactDOMTextarea",tagName:"TEXTAREA",mixins:[i,a.Mixin,s],getInitialState:function(){var e=this.props.defaultValue,n=this.props.children;null!=n&&("production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?p(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."):null),"production"!==t.env.NODE_ENV?h(null==e,"If you supply `defaultValue` on a <textarea>, do not pass children."):h(null==e),Array.isArray(n)&&("production"!==t.env.NODE_ENV?h(n.length<=1,"<textarea> can only have at most one child."):h(n.length<=1),n=n[0]),e=""+n),null==e&&(e="");var r=a.getValue(this);return{initialValue:""+(null!=r?r:e)}},render:function(){var e=f({},this.props);return"production"!==t.env.NODE_ENV?h(null==e.dangerouslySetInnerHTML,"`dangerouslySetInnerHTML` does not make sense on <textarea>."):h(null==e.dangerouslySetInnerHTML),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,d(e,this.state.initialValue)},componentDidUpdate:function(e,t,n){var r=a.getValue(this);if(null!=r){var i=this.getDOMNode();o.setValueForProperty(i,"value",""+r)}},_handleChange:function(e){var t,n=a.getOnChange(this);return n&&(t=n.call(this,e)),l.asap(r,this),t}});e.exports=m}).call(t,n(1))},function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var i=n(13),o=n(42),a=n(3),s=n(19),u={initialize:s,close:function(){h.isBatchingUpdates=!1}},c={initialize:s,close:i.flushBatchedUpdates.bind(i)},l=[c,u];a(r.prototype,o.Mixin,{getTransactionWrappers:function(){return l}});var f=new r,h={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,i){var o=h.isBatchingUpdates;h.isBatchingUpdates=!0,o?e(t,n,r,i):f.perform(e,null,t,n,r,i)}};e.exports=h},function(e,t,n){(function(t){"use strict";function r(e){return d.createClass({tagName:e.toUpperCase(),render:function(){return new k(e,null,null,null,null,this.props)}})}function i(){if(M.EventEmitter.injectReactEventListener(O),M.EventPluginHub.injectEventPluginOrder(u),M.EventPluginHub.injectInstanceHandle(N),M.EventPluginHub.injectMount(j),M.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:I,EnterLeaveEventPlugin:c,ChangeEventPlugin:a,MobileSafariClickEventPlugin:h,SelectEventPlugin:P,BeforeInputEventPlugin:o}),M.NativeComponent.injectGenericComponentClass(g),M.NativeComponent.injectTextComponentClass(A),M.NativeComponent.injectAutoWrapper(r),M.Class.injectMixin(p),M.NativeComponent.injectComponentClasses({button:y,form:b,iframe:_,img:x,input:E,option:T,select:C,textarea:S,html:F("html"),head:F("head"),body:F("body")}),M.DOMProperty.injectDOMPropertyConfig(f),M.DOMProperty.injectDOMPropertyConfig(L),M.EmptyComponent.injectEmptyComponent("noscript"),M.Updates.injectReconcileTransaction(R),M.Updates.injectBatchingStrategy(v),M.RootIndex.injectCreateReactRootIndex(l.canUseDOM?s.createReactRootIndex:D.createReactRootIndex),M.Component.injectEnvironment(m),M.DOMComponent.injectIDOperations(w),"production"!==t.env.NODE_ENV){var e=l.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(e)){var i=n(155);i.start()}}}var o=n(128),a=n(129),s=n(130),u=n(133),c=n(134),l=n(6),f=n(137),h=n(138),p=n(16),d=n(11),m=n(54),v=n(153),g=n(57),y=n(144),b=n(145),x=n(147),w=n(79),_=n(146),E=n(148),T=n(149),C=n(150),S=n(152),A=n(80),k=n(4),O=n(159),M=n(160),N=n(24),j=n(12),R=n(163),P=n(168),D=n(169),I=n(170),L=n(167),F=n(183);e.exports={inject:i}}).call(t,n(1))},function(e,t,n){"use strict";function r(e){return Math.floor(100*e)/100}function i(e,t,n){e[t]=(e[t]||0)+n}var o=n(21),a=n(156),s=n(12),u=n(18),c=n(198),l={_allMeasurements:[],_mountStack:[0],_injected:!1,start:function(){l._injected||u.injection.injectMeasure(l.measure),l._allMeasurements.length=0,u.enableMeasure=!0},stop:function(){u.enableMeasure=!1},getLastMeasurements:function(){return l._allMeasurements},printExclusive:function(e){e=e||l._allMeasurements;var t=a.getExclusiveSummary(e);console.table(t.map(function(e){return{"Component class name":e.componentName,"Total inclusive time (ms)":r(e.inclusive),"Exclusive mount time (ms)":r(e.exclusive),"Exclusive render time (ms)":r(e.render),"Mount time per instance (ms)":r(e.exclusive/e.count),"Render time per instance (ms)":r(e.render/e.count),Instances:e.count}}))},printInclusive:function(e){e=e||l._allMeasurements;var t=a.getInclusiveSummary(e);console.table(t.map(function(e){return{"Owner > component":e.componentName,"Inclusive time (ms)":r(e.time),Instances:e.count}})),console.log("Total time:",a.getTotalTime(e).toFixed(2)+" ms")},getMeasurementsSummaryMap:function(e){var t=a.getInclusiveSummary(e,!0);return t.map(function(e){return{"Owner > component":e.componentName,"Wasted time (ms)":e.time,Instances:e.count}})},printWasted:function(e){e=e||l._allMeasurements,console.table(l.getMeasurementsSummaryMap(e)),console.log("Total time:",a.getTotalTime(e).toFixed(2)+" ms")},printDOM:function(e){e=e||l._allMeasurements;var t=a.getDOMSummary(e);console.table(t.map(function(e){var t={};return t[o.ID_ATTRIBUTE_NAME]=e.id,t.type=e.type,t.args=JSON.stringify(e.args),t})),console.log("Total time:",a.getTotalTime(e).toFixed(2)+" ms")},_recordWrite:function(e,t,n,r){var i=l._allMeasurements[l._allMeasurements.length-1].writes;i[e]=i[e]||[],i[e].push({type:t,time:n,args:r})},measure:function(e,t,n){return function(){for(var r=[],o=0,a=arguments.length;a>o;o++)r.push(arguments[o]);var u,f,h;if("_renderNewRootComponent"===t||"flushBatchedUpdates"===t)return l._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0}),h=c(),f=n.apply(this,r),l._allMeasurements[l._allMeasurements.length-1].totalTime=c()-h,f;if("_mountImageIntoNode"===t||"ReactDOMIDOperations"===e){if(h=c(),f=n.apply(this,r),u=c()-h,"_mountImageIntoNode"===t){var p=s.getID(r[1]);l._recordWrite(p,t,u,r[0])}else"dangerouslyProcessChildrenUpdates"===t?r[0].forEach(function(e){var t={};null!==e.fromIndex&&(t.fromIndex=e.fromIndex),null!==e.toIndex&&(t.toIndex=e.toIndex),null!==e.textContent&&(t.textContent=e.textContent),null!==e.markupIndex&&(t.markup=r[1][e.markupIndex]),l._recordWrite(e.parentID,e.type,u,t)}):l._recordWrite(r[0],t,u,Array.prototype.slice.call(r,1));return f}if("ReactCompositeComponent"!==e||"mountComponent"!==t&&"updateComponent"!==t&&"_renderValidatedComponent"!==t)return n.apply(this,r);if("string"==typeof this._currentElement.type)return n.apply(this,r);var d="mountComponent"===t?r[0]:this._rootNodeID,m="_renderValidatedComponent"===t,v="mountComponent"===t,g=l._mountStack,y=l._allMeasurements[l._allMeasurements.length-1];if(m?i(y.counts,d,1):v&&g.push(0),h=c(),f=n.apply(this,r),u=c()-h,m)i(y.render,d,u);else if(v){var b=g.pop();g[g.length-1]+=u,i(y.exclusive,d,u-b),i(y.inclusive,d,u)}else i(y.inclusive,d,u);return y.displayNames[d]={current:this.getName(),owner:this._currentElement._owner?this._currentElement._owner.getName():"<root>"},f}}};e.exports=l},function(e,t,n){function r(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];t+=r.totalTime}return t}function i(e){for(var t=[],n=0;n<e.length;n++){var r,i=e[n];for(r in i.writes)i.writes[r].forEach(function(e){t.push({id:r,type:l[e.type]||e.type,args:e.args})})}return t}function o(e){for(var t,n={},r=0;r<e.length;r++){var i=e[r],o=u({},i.exclusive,i.inclusive);for(var a in o)t=i.displayNames[a].current,n[t]=n[t]||{componentName:t,inclusive:0,exclusive:0,render:0,count:0},i.render[a]&&(n[t].render+=i.render[a]),i.exclusive[a]&&(n[t].exclusive+=i.exclusive[a]),i.inclusive[a]&&(n[t].inclusive+=i.inclusive[a]),i.counts[a]&&(n[t].count+=i.counts[a])}var s=[];for(t in n)n[t].exclusive>=c&&s.push(n[t]);return s.sort(function(e,t){return t.exclusive-e.exclusive}),s}function a(e,t){for(var n,r={},i=0;i<e.length;i++){var o,a=e[i],l=u({},a.exclusive,a.inclusive);t&&(o=s(a));for(var f in l)if(!t||o[f]){var h=a.displayNames[f];n=h.owner+" > "+h.current,r[n]=r[n]||{componentName:n,time:0,count:0},a.inclusive[f]&&(r[n].time+=a.inclusive[f]),a.counts[f]&&(r[n].count+=a.counts[f])}}var p=[];for(n in r)r[n].time>=c&&p.push(r[n]);return p.sort(function(e,t){return t.time-e.time}),p}function s(e){var t={},n=Object.keys(e.writes),r=u({},e.exclusive,e.inclusive);for(var i in r){for(var o=!1,a=0;a<n.length;a++)if(0===n[a].indexOf(i)){o=!0;break}!o&&e.counts[i]>0&&(t[i]=!0)}return t}var u=n(3),c=1.2,l={_mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",TEXT_CONTENT:"set textContent",updatePropertyByID:"update attribute",deletePropertyByID:"delete attribute",updateStylesByID:"update styles",updateInnerHTMLByID:"set innerHTML",dangerouslyReplaceNodeWithMarkupByID:"replace"},f={getExclusiveSummary:o,getInclusiveSummary:a,getDOMSummary:i,getTotalTime:r};e.exports=f},function(e,t,n){"use strict";var r={guard:function(e,t){return e}};e.exports=r},function(e,t,n){"use strict";function r(e){i.enqueueEvents(e),i.processEventQueue()}var i=n(29),o={handleTopLevel:function(e,t,n,o){var a=i.extractEvents(e,t,n,o);r(a)}};e.exports=o},function(e,t,n){"use strict";function r(e){var t=f.getID(e),n=l.getReactRootIDFromNodeID(t),r=f.findReactContainerForID(n),i=f.getFirstReactDOM(r);return i}function i(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function o(e){for(var t=f.getFirstReactDOM(d(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=r(n);for(var i=0,o=e.ancestors.length;o>i;i++){t=e.ancestors[i];var a=f.getID(t)||"";v._handleTopLevel(e.topLevelType,t,a,e.nativeEvent)}}function a(e){var t=m(window);e(t)}var s=n(135),u=n(6),c=n(15),l=n(24),f=n(12),h=n(13),p=n(3),d=n(66),m=n(190);p(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(i,c.twoArgumentPooler);var v={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(e){v._handleTopLevel=e},setEnabled:function(e){v._enabled=!!e},isEnabled:function(){return v._enabled},trapBubbledEvent:function(e,t,n){var r=n;return r?s.listen(r,t,v.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var r=n;return r?s.capture(r,t,v.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=a.bind(null,e);s.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(v._enabled){var n=i.getPooled(e,t);try{h.batchedUpdates(o,n)}finally{i.release(n)}}}};e.exports=v},function(e,t,n){"use strict";var r=n(21),i=n(29),o=n(55),a=n(11),s=n(58),u=n(23),c=n(39),l=n(57),f=n(18),h=n(86),p=n(13),d={Component:o.injection,Class:a.injection,DOMComponent:l.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:i.injection,EventEmitter:u.injection,NativeComponent:c.injection,Perf:f.injection,RootIndex:h.injection,Updates:p.injection};e.exports=d},function(e,t,n){"use strict";function r(e,t,n){d.push({parentID:e,parentNode:null,type:l.INSERT_MARKUP,markupIndex:m.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function i(e,t,n){d.push({parentID:e,parentNode:null,type:l.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function o(e,t){d.push({parentID:e,parentNode:null,type:l.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function a(e,t){d.push({parentID:e,parentNode:null,type:l.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function s(){d.length&&(c.processChildrenUpdates(d,m),u())}function u(){d.length=0,m.length=0}var c=n(55),l=n(83),f=n(26),h=n(140),p=0,d=[],m=[],v={Mixin:{mountChildren:function(e,t,n){var r=h.instantiateChildren(e,t,n);this._renderedChildren=r;var i=[],o=0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],u=this._rootNodeID+a,c=f.mountComponent(s,u,t,n);s._mountIndex=o,i.push(c),o++}return i},updateTextContent:function(e){p++;var t=!0;try{var n=this._renderedChildren;h.unmountChildren(n);for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(e),t=!1}finally{p--,p||(t?u():s())}},updateChildren:function(e,t,n){p++;var r=!0;try{this._updateChildren(e,t,n),r=!1}finally{p--,p||(r?u():s())}},_updateChildren:function(e,t,n){var r=this._renderedChildren,i=h.updateChildren(r,e,t,n);if(this._renderedChildren=i,i||r){var o,a=0,s=0;for(o in i)if(i.hasOwnProperty(o)){var u=r&&r[o],c=i[o];u===c?(this.moveChild(u,s,a),a=Math.max(u._mountIndex,a),u._mountIndex=s):(u&&(a=Math.max(u._mountIndex,a),this._unmountChildByName(u,o)),this._mountChildByNameAtIndex(c,o,s,t,n)),s++}for(o in r)!r.hasOwnProperty(o)||i&&i.hasOwnProperty(o)||this._unmountChildByName(r[o],o)}},unmountChildren:function(){var e=this._renderedChildren;h.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&i(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){r(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){o(this._rootNodeID,e._mountIndex)},setTextContent:function(e){a(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,r,i){var o=this._rootNodeID+t,a=f.mountComponent(e,o,r,i);e._mountIndex=n,this.createChild(e,a)},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null}}};e.exports=v},function(e,t,n){(function(t){"use strict";var r=n(2),i={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,n,o){"production"!==t.env.NODE_ENV?r(i.isValidOwner(o),"addComponentAsRefTo(...): Only a ReactOwner can have refs. This usually means that you're trying to add a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."):r(i.isValidOwner(o)),o.attachRef(n,e)},removeComponentAsRefFrom:function(e,n,o){"production"!==t.env.NODE_ENV?r(i.isValidOwner(o),"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. This usually means that you're trying to remove a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."):r(i.isValidOwner(o)),o.getPublicInstance().refs[n]===e.getPublicInstance()&&o.detachRef(n)}};e.exports=i}).call(t,n(1))},function(e,t,n){"use strict";function r(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=i.getPooled(null),this.putListenerQueue=u.getPooled()}var i=n(50),o=n(15),a=n(23),s=n(81),u=n(85),c=n(42),l=n(3),f={initialize:s.getSelectionInformation,close:s.restoreSelection},h={initialize:function(){var e=a.isEnabled();return a.setEnabled(!1),e},close:function(e){a.setEnabled(e)}},p={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},d={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},m=[d,f,h,p],v={getTransactionWrappers:function(){return m},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null,u.release(this.putListenerQueue),this.putListenerQueue=null}};l(r.prototype,c.Mixin,v),o.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e?e(t.getPublicInstance()):o.addComponentAsRefTo(t,e,n)}function i(e,t,n){"function"==typeof e?e(null):o.removeComponentAsRefFrom(t,e,n)}var o=n(162),a={};a.attachRefs=function(e,t){var n=t.ref;null!=n&&r(n,e,t._owner)},a.shouldUpdateRefs=function(e,t){return t._owner!==e._owner||t.ref!==e.ref},a.detachRefs=function(e,t){var n=t.ref;null!=n&&i(n,e,t._owner)},e.exports=a},function(e,t,n){(function(t){"use strict";function r(e){"production"!==t.env.NODE_ENV?f(o.isValidElement(e),"renderToString(): You must pass a valid ReactElement."):f(o.isValidElement(e));var n;try{var r=a.createReactRootID();return n=u.getPooled(!1),n.perform(function(){var t=l(e,null),i=t.mountComponent(r,n,c);return s.addChecksumToMarkup(i)},null)}finally{u.release(n)}}function i(e){"production"!==t.env.NODE_ENV?f(o.isValidElement(e),"renderToStaticMarkup(): You must pass a valid ReactElement."):f(o.isValidElement(e));var n;try{var r=a.createReactRootID();return n=u.getPooled(!0),n.perform(function(){var t=l(e,null);return t.mountComponent(r,n,c)},null)}finally{u.release(n)}}var o=n(4),a=n(24),s=n(82),u=n(166),c=n(43),l=n(67),f=n(2);e.exports={renderToString:r,renderToStaticMarkup:i}}).call(t,n(1))},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=o.getPooled(null),this.putListenerQueue=a.getPooled()}var i=n(15),o=n(50),a=n(85),s=n(42),u=n(3),c=n(19),l={initialize:function(){this.reactMountReady.reset()},close:c},f={initialize:function(){this.putListenerQueue.reset()},close:c},h=[f,l],p={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null,a.release(this.putListenerQueue),this.putListenerQueue=null}};u(r.prototype,s.Mixin,p),i.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";var r=n(21),i=r.injection.MUST_USE_ATTRIBUTE,o={Properties:{cx:i,cy:i,d:i,dx:i,dy:i,fill:i,fillOpacity:i,fontFamily:i,fontSize:i,fx:i,fy:i,gradientTransform:i,gradientUnits:i,markerEnd:i,markerMid:i,markerStart:i,offset:i,opacity:i,patternContentUnits:i,patternUnits:i,points:i,preserveAspectRatio:i,r:i,rx:i,ry:i,spreadMethod:i,stopColor:i,stopOpacity:i,stroke:i,strokeDasharray:i,strokeLinecap:i,strokeOpacity:i,strokeWidth:i,textAnchor:i,transform:i,version:i,viewBox:i,x1:i,x2:i,x:i,y1:i,y2:i,y:i},DOMAttributeNames:{fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};e.exports=o},function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&s.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(e){if(y||null==m||m!==c())return null;var t=r(m);if(!g||!h(g,t)){g=t;var n=u.getPooled(d.select,v,e);return n.type="select",n.target=m,a.accumulateTwoPhaseDispatches(n),n}}var o=n(10),a=n(30),s=n(81),u=n(22),c=n(91),l=n(96),f=n(20),h=n(201),p=o.topLevelTypes,d={select:{phasedRegistrationNames:{bubbled:f({onSelect:null}),captured:f({onSelectCapture:null})},dependencies:[p.topBlur,p.topContextMenu,p.topFocus,p.topKeyDown,p.topMouseDown,p.topMouseUp,p.topSelectionChange]}},m=null,v=null,g=null,y=!1,b={eventTypes:d,extractEvents:function(e,t,n,r){switch(e){case p.topFocus:(l(t)||"true"===t.contentEditable)&&(m=t,v=n,g=null);break;case p.topBlur:m=null,v=null,g=null;break;case p.topMouseDown:y=!0;break;case p.topContextMenu:case p.topMouseUp:return y=!1,i(r);case p.topSelectionChange:case p.topKeyDown:case p.topKeyUp:return i(r)}}};e.exports=b},function(e,t,n){"use strict";var r=Math.pow(2,53),i={createReactRootIndex:function(){return Math.ceil(Math.random()*r)}};e.exports=i},function(e,t,n){(function(t){"use strict";var r=n(10),i=n(51),o=n(30),a=n(171),s=n(22),u=n(174),c=n(176),l=n(41),f=n(173),h=n(177),p=n(32),d=n(178),m=n(64),v=n(2),g=n(20),y=n(5),b=r.topLevelTypes,x={blur:{phasedRegistrationNames:{bubbled:g({onBlur:!0}),captured:g({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:g({onClick:!0}),captured:g({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:g({onContextMenu:!0}),captured:g({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:g({onCopy:!0}),captured:g({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:g({onCut:!0}),captured:g({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:g({onDoubleClick:!0}),captured:g({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:g({onDrag:!0}),captured:g({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:g({onDragEnd:!0}),captured:g({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:g({onDragEnter:!0}),captured:g({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:g({onDragExit:!0}),captured:g({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:g({onDragLeave:!0}),captured:g({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:g({onDragOver:!0}),captured:g({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:g({onDragStart:!0}),captured:g({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:g({onDrop:!0}),captured:g({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:g({onFocus:!0}),captured:g({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:g({onInput:!0}),captured:g({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:g({onKeyDown:!0}),captured:g({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:g({onKeyPress:!0}),captured:g({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:g({onKeyUp:!0}),captured:g({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:g({onLoad:!0}),captured:g({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:g({onError:!0}),captured:g({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:g({onMouseDown:!0}),captured:g({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:g({onMouseMove:!0}),captured:g({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:g({onMouseOut:!0}),captured:g({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:g({onMouseOver:!0}),captured:g({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:g({onMouseUp:!0}),captured:g({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:g({onPaste:!0}),captured:g({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:g({onReset:!0}),captured:g({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:g({onScroll:!0}),captured:g({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:g({onSubmit:!0}),captured:g({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:g({onTouchCancel:!0}),captured:g({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:g({onTouchEnd:!0}),captured:g({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:g({onTouchMove:!0}),captured:g({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:g({onTouchStart:!0}),captured:g({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:g({onWheel:!0}),captured:g({onWheelCapture:!0})}}},w={topBlur:x.blur,topClick:x.click,topContextMenu:x.contextMenu,topCopy:x.copy,topCut:x.cut,topDoubleClick:x.doubleClick,topDrag:x.drag,topDragEnd:x.dragEnd,topDragEnter:x.dragEnter,topDragExit:x.dragExit,topDragLeave:x.dragLeave,topDragOver:x.dragOver,topDragStart:x.dragStart,topDrop:x.drop,topError:x.error,topFocus:x.focus,topInput:x.input,topKeyDown:x.keyDown,topKeyPress:x.keyPress,topKeyUp:x.keyUp,topLoad:x.load,topMouseDown:x.mouseDown,topMouseMove:x.mouseMove,topMouseOut:x.mouseOut,topMouseOver:x.mouseOver,topMouseUp:x.mouseUp,topPaste:x.paste,topReset:x.reset,topScroll:x.scroll,topSubmit:x.submit,topTouchCancel:x.touchCancel,topTouchEnd:x.touchEnd,topTouchMove:x.touchMove,topTouchStart:x.touchStart,topWheel:x.wheel};for(var _ in w)w[_].dependencies=[_];var E={eventTypes:x,executeDispatch:function(e,n,r){var o=i.executeDispatch(e,n,r);"production"!==t.env.NODE_ENV?y("boolean"!=typeof o,"Returning `false` from an event handler is deprecated and will be ignored in a future release. Instead, manually call e.stopPropagation() or e.preventDefault(), as appropriate."):null,o===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,n,r,i){var g=w[e];if(!g)return null;var y;switch(e){case b.topInput:case b.topLoad:case b.topError:case b.topReset:case b.topSubmit:y=s;break;case b.topKeyPress:if(0===m(i))return null;case b.topKeyDown:case b.topKeyUp:y=c;break;case b.topBlur:case b.topFocus:y=u;break;case b.topClick:if(2===i.button)return null;case b.topContextMenu:case b.topDoubleClick:case b.topMouseDown:case b.topMouseMove:case b.topMouseOut:case b.topMouseOver:case b.topMouseUp:y=l;break;case b.topDrag:case b.topDragEnd:case b.topDragEnter:case b.topDragExit:
case b.topDragLeave:case b.topDragOver:case b.topDragStart:case b.topDrop:y=f;break;case b.topTouchCancel:case b.topTouchEnd:case b.topTouchMove:case b.topTouchStart:y=h;break;case b.topScroll:y=p;break;case b.topWheel:y=d;break;case b.topCopy:case b.topCut:case b.topPaste:y=a}"production"!==t.env.NODE_ENV?v(y,"SimpleEventPlugin: Unhandled event type, `%s`.",e):v(y);var x=y.getPooled(g,r,i);return o.accumulateTwoPhaseDispatches(x),x}};e.exports=E}).call(t,n(1))},function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=n(22),o={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=n(22),o={data:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=n(41),o={dataTransfer:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=n(32),o={relatedTarget:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=n(22),o={data:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=n(32),o=n(64),a=n(187),s=n(65),u={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?o(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?o(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};i.augmentClass(r,u),e.exports=r},function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=n(32),o=n(65),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};i.augmentClass(r,a),e.exports=r},function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=n(41),o={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e){for(var t=1,n=0,r=0;r<e.length;r++)t=(t+e.charCodeAt(r))%i,n=(n+t)%i;return t|n<<16}var i=65521;e.exports=r},function(e,t,n){function r(e){return e.replace(i,function(e,t){return t.toUpperCase()})}var i=/-(.)/g;e.exports=r},function(e,t,n){"use strict";function r(e){return i(e.replace(o,"ms-"))}var i=n(180),o=/^-ms-/;e.exports=r},function(e,t,n){function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function i(e){return r(e)?Array.isArray(e)?e.slice():o(e):[e]}var o=n(202);e.exports=i},function(e,t,n){(function(t){"use strict";function r(e){var n=o.createFactory(e),r=i.createClass({tagName:e.toUpperCase(),displayName:"ReactFullPageComponent"+e,componentWillUnmount:function(){"production"!==t.env.NODE_ENV?a(!1,"%s tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this.constructor.displayName):a(!1)},render:function(){return n(this.props)}});return r}var i=n(11),o=n(4),a=n(2);e.exports=r}).call(t,n(1))},function(e,t,n){(function(t){function r(e){var t=e.match(l);return t&&t[1].toLowerCase()}function i(e,n){var i=c;"production"!==t.env.NODE_ENV?u(!!c,"createNodesFromMarkup dummy not initialized"):u(!!c);var o=r(e),l=o&&s(o);if(l){i.innerHTML=l[1]+e+l[2];for(var f=l[0];f--;)i=i.lastChild}else i.innerHTML=e;var h=i.getElementsByTagName("script");h.length&&("production"!==t.env.NODE_ENV?u(n,"createNodesFromMarkup(...): Unexpected <script> element rendered."):u(n),a(h).forEach(n));for(var p=a(i.childNodes);i.lastChild;)i.removeChild(i.lastChild);return p}var o=n(6),a=n(182),s=n(93),u=n(2),c=o.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;e.exports=i}).call(t,n(1))},function(e,t,n){"use strict";function r(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var r=isNaN(t);return r||0===t||o.hasOwnProperty(e)&&o[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var i=n(75),o=i.isUnitlessNumber;e.exports=r},function(e,t,n){(function(t){"use strict";function r(e,n,r){var i=e,o=!i.hasOwnProperty(r);"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?a(o,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",r):null),o&&null!=n&&(i[r]=n)}function i(e){if(null==e)return e;var t={};return o(e,r,t),t}var o=n(97),a=n(5);e.exports=i}).call(t,n(1))},function(e,t,n){"use strict";function r(e){if(e.key){var t=o[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=i(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?a[e.keyCode]||"Unidentified":""}var i=n(64),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=r},function(e,t,n){"use strict";function r(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function i(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function o(e,t){for(var n=r(e),o=0,a=0;n;){if(3===n.nodeType){if(a=o+n.textContent.length,t>=o&&a>=t)return{node:n,offset:t-o};o=a}n=r(i(n))}}e.exports=o},function(e,t,n){"use strict";function r(e){return e?e.nodeType===i?e.documentElement:e.firstChild:null}var i=9;e.exports=r},function(e,t,n){"use strict";function r(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=r},function(e,t,n){function r(e){return e.replace(i,"-$1").toLowerCase()}var i=/([A-Z])/g;e.exports=r},function(e,t,n){"use strict";function r(e){return i(e).replace(o,"-ms-")}var i=n(191),o=/^ms-/;e.exports=r},function(e,t,n){function r(e){return i(e)&&3==e.nodeType}var i=n(95);e.exports=r},function(e,t,n){"use strict";function r(e,t,n){if(!e)return null;var r={};for(var o in e)i.call(e,o)&&(r[o]=t.call(n,e[o],o,e));return r}var i=Object.prototype.hasOwnProperty;e.exports=r},function(e,t,n){"use strict";function r(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=r},function(e,t,n){(function(t){"use strict";function r(e){return"production"!==t.env.NODE_ENV?o(i.isValidElement(e),"onlyChild must be passed a children with exactly one child."):o(i.isValidElement(e)),e}var i=n(4),o=n(2);e.exports=r}).call(t,n(1))},function(e,t,n){"use strict";var r,i=n(6);i.canUseDOM&&(r=window.performance||window.msPerformance||window.webkitPerformance),e.exports=r||{}},function(e,t,n){var r=n(197);r&&r.now||(r=Date);var i=r.now.bind(r);e.exports=i},function(e,t,n){"use strict";function r(e){return'"'+i(e)+'"'}var i=n(44);e.exports=r},function(e,t,n){"use strict";var r=n(6),i=n(44),o=n(69),a=function(e,t){e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(a=function(e,t){o(e,i(t))})),e.exports=a},function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}e.exports=r},function(e,t,n){(function(t){function r(e){var n=e.length;if("production"!==t.env.NODE_ENV?i(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e),"toArray: Array-like object expected"):i(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e)),"production"!==t.env.NODE_ENV?i("number"==typeof n,"toArray: Object needs a length property"):i("number"==typeof n),"production"!==t.env.NODE_ENV?i(0===n||n-1 in e,"toArray: Object should have keys for indices"):i(0===n||n-1 in e),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(r){}for(var o=Array(n),a=0;n>a;a++)o[a]=e[a];return o}var i=n(2);e.exports=r}).call(t,n(1))},function(e,t,n){"use strict";function r(){return window.innerWidth<window.innerHeight?"/skins/default/skin_touch.xml":"/skins/default/skin_screen.xml"}t.getSkinUrl=r,Object.defineProperty(t,"__esModule",{value:!0});var i=n(292).load,o=n(291).Context;t.load=i,t.Context=o},,function(e,t,n){(function(t){"undefined"!=typeof window?e.exports=window:"undefined"!=typeof t?e.exports=t:e.exports={}}).call(t,function(){return this}())},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],i=e[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(239)),u=r(n(14)),c=r(n(106)),l=t.GameInput=function(){function e(){a(this,e),this._controls=new Map,this._plugins=[]}return o(e,{update:{value:function(){var e=new Map,t=!0,n=!1,r=void 0;try{for(var o,a=this._controls[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=i(o.value,2),u=(s[0],s[1]);u.changed=!1}}catch(c){n=!0,r=c}finally{try{!t&&a["return"]&&a["return"]()}finally{if(n)throw r}}var l=!0,f=!1,h=void 0;try{for(var p,d=this._plugins[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var m=p.value,v=!0,g=!1,y=void 0;try{for(var b,x=m.get()[Symbol.iterator]();!(v=(b=x.next()).done);v=!0){var w=i(b.value,2),_=w[0],E=w[1];e.set(_,E)}}catch(c){g=!0,y=c}finally{try{!v&&x["return"]&&x["return"]()}finally{if(g)throw y}}}}catch(c){f=!0,h=c}finally{try{!l&&d["return"]&&d["return"]()}finally{if(f)throw h}}var T=!0,C=!1,S=void 0;try{for(var A,k=e[Symbol.iterator]();!(T=(A=k.next()).done);T=!0){var O=i(A.value,2),M=O[0],E=O[1],u=this.get(M);u.value!==E&&(u.changed=!0,u.value=E)}}catch(c){C=!0,S=c}finally{try{!T&&k["return"]&&k["return"]()}finally{if(C)throw S}}}},destroy:{value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this._plugins[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.destroy()}}catch(a){t=!0,n=a}finally{try{!e&&i["return"]&&i["return"]()}finally{if(t)throw n}}}},get:{value:function(e){return this._controls.has(e)||this._controls.set(e,new s),this._controls.get(e)}},use:{value:function(e){var t={},n="input:"+e.name;this._plugins.push({get:c.wrap(n,function(){var n=e.get(),r=[],i=!0,o=!1,a=void 0;try{for(var s,c=u.union(u.keys(n),u.keys(t))[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=s.value,f=+t[l]||0,h=+n[l]||0;f!==h&&r.push([l,h]),t[l]=h}}catch(p){o=!0,a=p}finally{try{!i&&c["return"]&&c["return"]()}finally{if(o)throw a}}return r}),destroy:function(){return"function"==typeof e.destroy?e.destroy():!0}})}}}),e}();t["default"]=l},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var o=t.Player=function(){function e(t,n,r){i(this,e),this._notechart=t,this._number=n,this._options={autosound:!!r.autosound,speed:+r.speed,placement:r.placement||"center",scratch:r.scratch||"left",input:r.input}}return r(e,{notechart:{get:function(){return this._notechart}},columns:{get:function(){return this._notechart.columns}},number:{get:function(){return this._number}},options:{get:function(){return this._options}}}),e}();t["default"]=o},,function(e,t,n){function r(e,t){e.split(/\r\n|\r|\n/).map(function(e){return e.trim()}).forEach(function(e,n){t(e,n+1)})}var i=n(104),o=n(110);t.compile=function(e,t){function n(e,t,n,r){var i=Math.floor(n.length/2);if(0!==i)for(var o=0;i>o;o++){var a=n.substr(2*o,2),u=o/i;"00"!==a&&s.objects.add({measure:e,fraction:u,value:a,channel:t,lineNumber:r})}}function a(e,t){f.warnings.push({lineNumber:e,message:t})}t=t||{};var s=new o,u=t.rng||function(e){return 1+Math.floor(Math.random()*e)},c=[],l=[!1],f={headerSentences:0,channelSentences:0,controlSentences:0,skippedSentences:0,malformedSentences:0,chart:s,warnings:[]};return r(e,function(e,t){var r=!0;if("#"===e.charAt(0)&&(i(e).when(/^#RANDOM\s+(\d+)$/i,function(e){f.controlSentences+=1,c.push(u(+e[1]))}).when(/^#IF\s+(\d+)$/i,function(e){f.controlSentences+=1,l.push(c[c.length-1]!==+e[1])}).when(/^#ENDIF$/i,function(e){f.controlSentences+=1,l.pop()})["else"](function(){r=!1}),!r)){var o=l[l.length-1];i(e).when(/^#(\d\d\d)02:(\S*)$/,function(e){f.channelSentences+=1,o||s.timeSignatures.set(+e[1],+e[2])}).when(/^#(\d\d\d)(\S\S):(\S*)$/,function(e){f.channelSentences+=1,o||n(+e[1],e[2],e[3],t)}).when(/^#(\w+)(?:\s+(\S.*))?$/,function(e){f.headerSentences+=1,o||s.headers.set(e[1],e[2])})["else"](function(){a(t,"Invalid command")})}}),f}},function(e,t,n){var r=n(215),i=n(214),o=n(212),a=(n(213),n(211),[new r,new i.UTF_16BE,new i.UTF_16LE,new o.sjis,new o.euc_kr]);e.exports.detect=function(e){for(var t=[],n=0;256>n;n++)t[n]=0;for(var n=e.length-1;n>=0;n--)t[255&e[n]]++;for(var r=!1,n=128;159>=n;n+=1)if(0!=t[n]){r=!0;break}var i={fByteStats:t,fC1Bytes:r,fRawInput:e,fRawLength:e.length,fInputBytes:e,fInputLen:e.length},o=a.map(function(e){return e.match(i)}).filter(function(e){return!!e}).sort(function(e,t){return e.confidence-t.confidence}).pop();return o?o.name:null}},function(e,t,n){function r(){}var i=n(47),o=n(36);r.prototype.match=function(e){var t,n,r,i,a=0,s=0,u=0,c=e.fInputBytes,l=e.fInputLen;e:for(t=0;l>t;t++){if(27==c[t]){t:for(r=0;r<this.escapeSequences.length;r++){var f=this.escapeSequences[r];if(!(l-t<f.length)){for(n=1;n<f.length;n++)if(f[n]!=c[t+n])continue t;a++,t+=f.length-1;continue e}}s++}(14==c[t]||15==c[t])&&u++}return 0==a?null:(i=(100*a-100*s)/(a+s),5>a+u&&(i-=10*(5-(a+u))),0>=i?null:new o(e,this,i))},e.exports.ISO_2022_JP=function(){this.name=function(){return"ISO-2022-JP"},this.escapeSequences=[[27,36,40,67],[27,36,40,68],[27,36,64],[27,36,65],[27,36,66],[27,38,64],[27,40,66],[27,40,72],[27,40,73],[27,40,74],[27,46,65],[27,46,70]]},i.inherits(e.exports.ISO_2022_JP,r),e.exports.ISO_2022_KR=function(){this.name=function(){return"ISO-2022-KR"},this.escapeSequences=[[27,36,41,67]]},i.inherits(e.exports.ISO_2022_KR,r),e.exports.ISO_2022_CN=function(){this.name=function(){return"ISO-2022-CN"},this.escapeSequences=[[27,36,41,65],[27,36,41,71],[27,36,42,72],[27,36,41,69],[27,36,43,73],[27,36,43,74],[27,36,43,75],[27,36,43,76],[27,36,43,77],[27,78],[27,79]]},i.inherits(e.exports.ISO_2022_CN,r)},function(e,t,n){function r(e,t){function n(e,t,r,i){if(r>i)return-1;var o=Math.floor(r+i>>>1);return t>e[o]?n(e,t,o+1,i):t<e[o]?n(e,t,r,o-1):o}return n(e,t,0,e.length-1)}function i(){this.charValue=0,this.index=0,this.nextIndex=0,this.error=!1,this.done=!1,this.reset=function(){this.charValue=0,this.index=-1,this.nextIndex=0,this.error=!1,this.done=!1},this.nextByte=function(e){if(this.nextIndex>=e.fRawLength)return this.done=!0,-1;var t=255&e.fRawInput[this.nextIndex++];return t}}function o(){}function a(e,t){e.index=e.nextIndex,e.error=!1;var n=0,r=0,i=0;return n=e.charValue=e.nextByte(t),0>n?e.done=!0:141>=n||(r=e.nextByte(t),e.charValue=e.charValue<<8|r,n>=161&&254>=n?161>r&&(e.error=!0):142!=n?143==n&&(i=e.nextByte(t),e.charValue=e.charValue<<8|i,161>i&&(e.error=!0)):161>r&&(e.error=!0)),0==e.done}var s=n(47),u=n(36);o.prototype.match=function(e){var t=0,n=0,o=0,a=0,s=0,c=0,l=new i;e:{for(l.reset();this.nextChar(l,e);){if(s++,l.error)a++;else{var f=4294967295&l.charValue;255>=f?t++:(n++,null!=this.commonChars&&r(this.commonChars,f)>=0&&o++)}if(a>=2&&5*a>=n)break e}if(10>=n&&0==a)c=0==n&&10>s?0:10;else if(20*a>n)c=0;else if(null==this.commonChars)c=30+n-20*a,c>100&&(c=100);else{var h=Math.log(parseFloat(n)/4),p=90/h;c=Math.floor(Math.log(o+1)*p+10),c=Math.min(c,100)}}return 0==c?null:new u(e,this,c)},o.prototype.nextChar=function(e,t){},e.exports.sjis=function(){this.name=function(){return"Shift-JIS"},this.language=function(){return"ja"},this.commonChars=[33088,33089,33090,33093,33115,33129,33130,33141,33142,33440,33442,33444,33449,33450,33451,33453,33455,33457,33459,33461,33463,33469,33470,33473,33476,33477,33478,33480,33481,33484,33485,33500,33504,33511,33512,33513,33514,33520,33521,33601,33603,33614,33615,33624,33630,33634,33639,33653,33654,33673,33674,33675,33677,33683,36502,37882,38314],this.nextChar=function(e,t){e.index=e.nextIndex,e.error=!1;var n;if(n=e.charValue=e.nextByte(t),0>n)return!1;if(127>=n||n>160&&223>=n)return!0;var r=e.nextByte(t);return 0>r?!1:(e.charValue=n<<8|r,r>=64&&127>=r||r>=128&&255>=r||(e.error=!0),!0)}},s.inherits(e.exports.sjis,o),e.exports.big5=function(){this.name=function(){return"Big5"},this.language=function(){return"zh"},this.commonChars=[41280,41281,41282,41283,41287,41289,41333,41334,42048,42054,42055,42056,42065,42068,42071,42084,42090,42092,42103,42147,42148,42151,42177,42190,42193,42207,42216,42237,42304,42312,42328,42345,42445,42471,42583,42593,42594,42600,42608,42664,42675,42681,42707,42715,42726,42738,42816,42833,42841,42970,43171,43173,43181,43217,43219,43236,43260,43456,43474,43507,43627,43706,43710,43724,43772,44103,44111,44208,44242,44377,44745,45024,45290,45423,45747,45764,45935,46156,46158,46412,46501,46525,46544,46552,46705,47085,47207,47428,47832,47940,48033,48593,49860,50105,50240,50271],this.nextChar=function(e,t){e.index=e.nextIndex,e.error=!1;var n=e.charValue=e.nextByte(t);if(0>n)return!1;if(127>=n||255==n)return!0;var r=e.nextByte(t);return 0>r?!1:(e.charValue=e.charValue<<8|r,(64>r||127==r||255==r)&&(e.error=!0),!0)}},s.inherits(e.exports.big5,o),e.exports.euc_jp=function(){this.name=function(){return"EUC-JP"},this.language=function(){return"ja"},this.commonChars=[41377,41378,41379,41382,41404,41418,41419,41430,41431,42146,42148,42150,42152,42154,42155,42156,42157,42159,42161,42163,42165,42167,42169,42171,42173,42175,42176,42177,42179,42180,42182,42183,42184,42185,42186,42187,42190,42191,42192,42206,42207,42209,42210,42212,42216,42217,42218,42219,42220,42223,42226,42227,42402,42403,42404,42406,42407,42410,42413,42415,42416,42419,42421,42423,42424,42425,42431,42435,42438,42439,42440,42441,42443,42448,42453,42454,42455,42462,42464,42465,42469,42473,42474,42475,42476,42477,42483,47273,47572,47854,48072,48880,49079,50410,50940,51133,51896,51955,52188,52689],this.nextChar=a},s.inherits(e.exports.euc_jp,o),e.exports.euc_kr=function(){this.name=function(){return"EUC-KR"},this.language=function(){return"ko"},this.commonChars=[45217,45235,45253,45261,45268,45286,45293,45304,45306,45308,45496,45497,45511,45527,45538,45994,46011,46274,46287,46297,46315,46501,46517,46527,46535,46569,46835,47023,47042,47054,47270,47278,47286,47288,47291,47337,47531,47534,47564,47566,47613,47800,47822,47824,47857,48103,48115,48125,48301,48314,48338,48374,48570,48576,48579,48581,48838,48840,48863,48878,48888,48890,49057,49065,49088,49124,49131,49132,49144,49319,49327,49336,49338,49339,49341,49351,49356,49358,49359,49366,49370,49381,49403,49404,49572,49574,49590,49622,49631,49654,49656,50337,50637,50862,51151,51153,51154,51160,51173,51373],this.nextChar=a},s.inherits(e.exports.euc_kr,o),e.exports.gb_18030=function(){this.name=function(){return"GB18030"},this.language=function(){return"zh"},this.nextChar=function(e,t){e.index=e.nextIndex,e.error=!1;var n=0,r=0,i=0,o=0;e:if(n=e.charValue=e.nextByte(t),0>n)e.done=!0;else if(!(128>=n))if(r=e.nextByte(t),e.charValue=e.charValue<<8|r,n>=129&&254>=n){if(r>=64&&126>=r||r>=80&&254>=r)break e;if(r>=48&&57>=r&&(i=e.nextByte(t),i>=129&&254>=i&&(o=e.nextByte(t),o>=48&&57>=o))){e.charValue=e.charValue<<16|i<<8|o;break e}e.error=!0}else;return 0==e.done},this.commonChars=[41377,41378,41379,41380,41392,41393,41457,41459,41889,41900,41914,45480,45496,45502,45755,46025,46070,46323,46525,46532,46563,46767,46804,46816,47010,47016,47037,47062,47069,47284,47327,47350,47531,47561,47576,47610,47613,47821,48039,48086,48097,48122,48316,48347,48382,48588,48845,48861,49076,49094,49097,49332,49389,49611,49883,50119,50396,50410,50636,50935,51192,51371,51403,51413,51431,51663,51706,51889,51893,51911,51920,51926,51957,51965,52460,52728,52906,52932,52946,52965,53173,53186,53206,53442,53445,53456,53460,53671,53930,53938,53941,53947,53972,54211,54224,54269,54466,54490,54754,54992]},s.inherits(e.exports.gb_18030,o)},function(e,t,n){function r(e,t){var n=16777215;this.byteIndex=0,this.ngram=0,this.ngramList=e,this.byteMap=t,this.ngramCount=0,this.hitCount=0,this.spaceChar,this.search=function(e,t){var n=0;return e[n+32]<=t&&(n+=32),e[n+16]<=t&&(n+=16),e[n+8]<=t&&(n+=8),e[n+4]<=t&&(n+=4),e[n+2]<=t&&(n+=2),e[n+1]<=t&&(n+=1),e[n]>t&&(n-=1),0>n||e[n]!=t?-1:n},this.lookup=function(e){this.ngramCount+=1,this.search(this.ngramList,e)>=0&&(this.hitCount+=1)},this.addByte=function(e){this.ngram=(this.ngram<<8)+(255&e)&n,this.lookup(this.ngram)},this.nextByte=function(e){return this.byteIndex>=e.fInputLen?-1:255&e.fInputBytes[this.byteIndex++]},this.parse=function(e,t){var n,r=!1;for(this.spaceChar=t;(n=this.nextByte(e))>=0;){var i=this.byteMap[n];0!=i&&(i==this.spaceChar&&r||this.addByte(i),r=i==this.spaceChar)}this.addByte(this.spaceChar);var o=this.hitCount/this.ngramCount;return o>.33?98:Math.floor(300*o)}}function i(e,t){this.fLang=e,this.fNGrams=t}function o(){}var a=n(47),s=n(36);o.prototype.spaceChar=32,o.prototype.ngrams=function(){},o.prototype.byteMap=function(){},o.prototype.match=function(e){var t=this.ngrams(),n=Array.isArray(t)&&t[0]instanceof i;if(!n){var o=new r(t,this.byteMap()),a=o.parse(e,this.spaceChar);return 0>=a?null:new s(e,this,a)}for(var u=-1,c=null,l=t.length-1;l>=0;l--){var f=t[l],o=new r(f.fNGrams,this.byteMap()),a=o.parse(e,this.spaceChar);a>u&&(u=a,c=f.fLang)}var h=this.name(e);return 0>=u?null:new s(e,this,u,h,c)},e.exports.ISO_8859_1=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]},this.ngrams=function(){return[new i("da",[2122086,2122100,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126697,2126708,2126953,2127465,6383136,6385184,6385252,6386208,6386720,6579488,6579566,6579570,6579572,6627443,6644768,6644837,6647328,6647396,6648352,6648421,6648608,6648864,6713202,6776096,6776174,6776178,6907749,6908960,6909543,7038240,7039845,7103858,7104871,7105637,7169380,7234661,7234848,7235360,7235429,7300896,7302432,7303712,7398688,7479396,7479397,7479411,7496992,7566437,7610483,7628064,7628146,7629164,7759218]),new i("de",[2122094,2122101,2122341,2122849,2122853,2122857,2123113,2123621,2123873,2124142,2125161,2126691,2126693,2127214,2127461,2127471,2127717,2128501,6448498,6514720,6514789,6514804,6578547,6579566,6579570,6580581,6627428,6627443,6646126,6646132,6647328,6648352,6648608,6776174,6841710,6845472,6906728,6907168,6909472,6909541,6911008,7104867,7105637,7217249,7217252,7217267,7234592,7234661,7234848,7235360,7235429,7238757,7479396,7496805,7497065,7562088,7566437,7610468,7628064,7628142,7628146,7695972,7695975,7759218]),new i("en",[2122016,2122094,2122341,2122607,2123375,2123873,2123877,2124142,2125153,2125670,2125938,2126437,2126689,2126708,2126952,2126959,2127720,6383972,6384672,6385184,6385252,6386464,6386720,6386789,6386793,6561889,6561908,6627425,6627443,6627444,6644768,6647412,6648352,6648608,6713202,6840692,6841632,6841714,6906912,6909472,6909543,6909806,6910752,7217249,7217268,7234592,7235360,7238688,7300640,7302688,7303712,7496992,7500576,7544929,7544948,7561577,7566368,7610484,7628146,7628897,7628901,7629167,7630624,7631648]),new i("es",[2122016,2122593,2122607,2122853,2123116,2123118,2123123,2124142,2124897,2124911,2125921,2125935,2125938,2126197,2126437,2126693,2127214,2128160,6365283,6365284,6365285,6365292,6365296,6382441,6382703,6384672,6386208,6386464,6515187,6516590,6579488,6579564,6582048,6627428,6627429,6627436,6646816,6647328,6647412,6648608,6648692,6907246,6943598,7102752,7106419,7217253,7238757,7282788,7282789,7302688,7303712,7303968,7364978,7435621,7495968,7497075,7544932,7544933,7544944,7562528,7628064,7630624,7693600,15953440]),new i("fr",[2122101,2122607,2122849,2122853,2122869,2123118,2123124,2124897,2124901,2125921,2125935,2125938,2126197,2126693,2126703,2127214,2154528,6385268,6386793,6513952,6516590,6579488,6579571,6583584,6627425,6627427,6627428,6627429,6627436,6627440,6627443,6647328,6647412,6648352,6648608,6648864,6649202,6909806,6910752,6911008,7102752,7103776,7103859,7169390,7217252,7234848,7238432,7238688,7302688,7302772,7304562,7435621,7479404,7496992,7544929,7544932,7544933,7544940,7544944,7610468,7628064,7629167,7693600,7696928]),new i("it",[2122092,2122600,2122607,2122853,2122857,2123040,2124140,2124142,2124897,2125925,2125938,2127214,6365283,6365284,6365296,6365299,6386799,6514789,6516590,6579564,6580512,6627425,6627427,6627428,6627433,6627436,6627440,6627443,6646816,6646892,6647412,6648352,6841632,6889569,6889571,6889572,6889587,6906144,6908960,6909472,6909806,7102752,7103776,7104800,7105633,7234848,7235872,7237408,7238757,7282785,7282788,7282793,7282803,7302688,7302757,7366002,7495968,7496992,7563552,7627040,7628064,7629088,7630624,8022383]),new i("nl",[2122092,2122341,2122849,2122853,2122857,2123109,2123118,2123621,2123877,2124142,2125153,2125157,2125680,2126949,2127457,2127461,2127471,2127717,2128489,6381934,6381938,6385184,6385252,6386208,6386720,6514804,6579488,6579566,6579570,6627426,6627446,6645102,6645106,6647328,6648352,6648435,6648864,6776174,6841716,6907168,6909472,6909543,6910752,7217250,7217252,7217253,7217256,7217263,7217270,7234661,7235360,7302756,7303026,7303200,7303712,7562088,7566437,7610468,7628064,7628142,7628146,7758190,7759218,7761775]),new i("no",[2122100,2122102,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126693,2126699,2126703,2126708,2126953,2127465,2155808,6385252,6386208,6386720,6579488,6579566,6579572,6627443,6644768,6647328,6647397,6648352,6648421,6648864,6648948,6713202,6776174,6908779,6908960,6909543,7038240,7039845,7103776,7105637,7169380,7169390,7217267,7234848,7235360,7235429,7237221,7300896,7302432,7303712,7398688,7479411,7496992,7565165,7566437,7610483,7628064,7628142,7628146,7629164,7631904,7631973,7759218]),new i("pt",[2122016,2122607,2122849,2122853,2122863,2123040,2123123,2125153,2125423,2125600,2125921,2125935,2125938,2126197,2126437,2126693,2127213,6365281,6365283,6365284,6365296,6382693,6382703,6384672,6386208,6386273,6386464,6516589,6516590,6578464,6579488,6582048,6582131,6627425,6627428,6647072,6647412,6648608,6648692,6906144,6906721,7169390,7238757,7238767,7282785,7282787,7282788,7282789,7282800,7303968,7364978,7435621,7495968,7497075,7544929,7544932,7544933,7544944,7566433,7628064,7630624,7693600,14905120,15197039]),new i("sv",[2122100,2122102,2122853,2123118,2123510,2123873,2124064,2124142,2124655,2125157,2125667,2126053,2126699,2126703,2126708,2126953,2127457,2127465,2155634,6382693,6385184,6385252,6386208,6386804,6514720,6579488,6579566,6579570,6579572,6644768,6647328,6648352,6648864,6747762,6776174,6909036,6909543,7037216,7105568,7169380,7217267,7233824,7234661,7235360,7235429,7235950,7299944,7302432,7302688,7398688,7479393,7479411,7495968,7564129,7565165,7610483,7627040,7628064,7628146,7629164,7631904,7758194,14971424,16151072])]},this.name=function(e){return e&&e.fC1Bytes?"windows-1252":"ISO-8859-1"}},a.inherits(e.exports.ISO_8859_1,o),e.exports.ISO_8859_2=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,177,32,179,32,181,182,32,32,185,186,187,188,32,190,191,32,177,32,179,32,181,182,183,32,185,186,187,188,32,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,32]},this.ngrams=function(){return[new i("cs",[2122016,2122361,2122863,2124389,2125409,2125413,2125600,2125668,2125935,2125938,2126072,2126447,2126693,2126703,2126708,2126959,2127392,2127481,2128481,6365296,6513952,6514720,6627440,6627443,6627446,6647072,6647533,6844192,6844260,6910836,6972704,7042149,7103776,7104800,7233824,7268640,7269408,7269664,7282800,7300206,7301737,7304052,7304480,7304801,7368548,7368554,7369327,7403621,7562528,7565173,7566433,7566441,7566446,7628146,7630573,7630624,7676016,12477728,14773997,15296623,15540336,15540339,15559968,16278884]),new i("hu",[2122016,2122106,2122341,2123111,2123116,2123365,2123873,2123887,2124147,2124645,2124649,2124790,2124901,2125153,2125157,2125161,2125413,2126714,2126949,2156915,6365281,6365291,6365293,6365299,6384416,6385184,6388256,6447470,6448494,6645625,6646560,6646816,6646885,6647072,6647328,6648421,6648864,6648933,6648948,6781216,6844263,6909556,6910752,7020641,7075450,7169383,7170414,7217249,7233899,7234923,7234925,7238688,7300985,7544929,7567973,7567988,7568097,7596391,7610465,7631904,7659891,8021362,14773792,15299360]),new i("pl",[2122618,2122863,2124064,2124389,2124655,2125153,2125161,2125409,2125417,2125668,2125935,2125938,2126697,2127648,2127721,2127737,2128416,2128481,6365296,6365303,6385257,6514720,6519397,6519417,6582048,6584937,6627440,6627443,6627447,6627450,6645615,6646304,6647072,6647401,6778656,6906144,6907168,6907242,7037216,7039264,7039333,7170405,7233824,7235937,7235941,7282800,7305057,7305065,7368556,7369313,7369327,7369338,7502437,7502457,7563754,7564137,7566433,7825765,7955304,7957792,8021280,8022373,8026400,15955744]),new i("ro",[2122016,2122083,2122593,2122597,2122607,2122613,2122853,2122857,2124897,2125153,2125925,2125938,2126693,2126819,2127214,2144873,2158190,6365283,6365284,6386277,6386720,6386789,6386976,6513010,6516590,6518048,6546208,6579488,6627425,6627427,6627428,6627440,6627443,6644e3,6646048,6646885,6647412,6648692,6889569,6889571,6889572,6889584,6907168,6908192,6909472,7102752,7103776,7106418,7107945,7234848,7238770,7303712,7365998,7496992,7497057,7501088,7594784,7628064,7631477,7660320,7694624,7695392,12216608,15625760])];

},this.name=function(e){return e&&e.fC1Bytes?"windows-1250":"ISO-8859-2"}},a.inherits(e.exports.ISO_8859_2,o),e.exports.ISO_8859_5=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255]},this.ngrams=function(){return[2150944,2151134,2151646,2152400,2152480,2153168,2153182,2153936,2153941,2154193,2154462,2154464,2154704,2154974,2154978,2155230,2156514,2158050,13688280,13689580,13884960,14015468,14015960,14016994,14017056,14164191,14210336,14211104,14216992,14407133,14407712,14413021,14536736,14538016,14538965,14538991,14540320,14540498,14557394,14557407,14557409,14602784,14602960,14603230,14604576,14605292,14605344,14606818,14671579,14672085,14672088,14672094,14733522,14734804,14803664,14803666,14803672,14806816,14865883,14868e3,14868192,14871584,15196894,15459616]},this.name=function(e){return"ISO-8859-5"},this.language=function(){return"ru"}},a.inherits(e.exports.ISO_8859_5,o),e.exports.ISO_8859_6=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32]},this.ngrams=function(){return[2148324,2148326,2148551,2152932,2154986,2155748,2156006,2156743,13050055,13091104,13093408,13095200,13100064,13100227,13100231,13100232,13100234,13100236,13100237,13100239,13100243,13100249,13100258,13100261,13100264,13100266,13100320,13100576,13100746,13115591,13181127,13181153,13181156,13181157,13181160,13246663,13574343,13617440,13705415,13748512,13836487,14229703,14279913,14805536,14950599,14993696,15001888,15002144,15016135,15058720,15059232,15066656,15081671,15147207,15189792,15255524,15263264,15278279,15343815,15343845,15343848,15386912,15388960,15394336]},this.name=function(e){return"ISO-8859-6"},this.language=function(){return"ar"}},a.inherits(e.exports.ISO_8859_6,o),e.exports.ISO_8859_7=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,161,162,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,220,32,221,222,223,32,252,32,253,254,192,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,32,243,244,245,246,247,248,249,250,251,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,32]},this.ngrams=function(){return[2154989,2154992,2155497,2155753,2156016,2156320,2157281,2157797,2158049,2158368,2158817,2158831,2158833,2159604,2159605,2159847,2159855,14672160,14754017,14754036,14805280,14806304,14807292,14807584,14936545,15067424,15069728,15147252,15199520,15200800,15278324,15327520,15330014,15331872,15393257,15393268,15525152,15540449,15540453,15540464,15589664,15725088,15725856,15790069,15790575,15793184,15868129,15868133,15868138,15868144,15868148,15983904,15984416,15987951,16048416,16048617,16050157,16050162,16050666,16052e3,16052213,16054765,16379168,16706848]},this.name=function(e){return e&&e.fC1Bytes?"windows-1253":"ISO-8859-7"},this.language=function(){return"el"}},a.inherits(e.exports.ISO_8859_7,o),e.exports.ISO_8859_8=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,32,32,32,32,32]},this.ngrams=function(){return[new i("he",[2154725,2154727,2154729,2154746,2154985,2154990,2155744,2155749,2155753,2155758,2155762,2155769,2155770,2157792,2157796,2158304,2159340,2161132,14744096,14950624,14950625,14950628,14950636,14950638,14950649,15001056,15065120,15068448,15068960,15071264,15071776,15278308,15328288,15328762,15329773,15330592,15331104,15333408,15333920,15474912,15474916,15523872,15524896,15540448,15540449,15540452,15540460,15540462,15540473,15655968,15671524,15787040,15788320,15788525,15920160,16261348,16312813,16378912,16392416,16392417,16392420,16392428,16392430,16392441]),new i("he",[2154725,2154732,2155753,2155756,2155758,2155760,2157040,2157810,2157817,2158053,2158057,2158565,2158569,2160869,2160873,2161376,2161381,2161385,14688484,14688492,14688493,14688506,14738464,14738916,14740512,14741024,14754020,14754029,14754042,14950628,14950633,14950636,14950637,14950639,14950648,14950650,15002656,15065120,15066144,15196192,15327264,15327520,15328288,15474916,15474925,15474938,15528480,15530272,15591913,15591920,15591928,15605988,15605997,15606010,15655200,15655968,15918112,16326884,16326893,16326906,16376864,16441376,16442400,16442857])]},this.name=function(e){return e&&e.fC1Bytes?"windows-1255":"ISO-8859-8"},this.language=function(){return"he"}},a.inherits(e.exports.ISO_8859_8,o),e.exports.ISO_8859_9=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,105,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]},this.ngrams=function(){return[2122337,2122345,2122357,2122849,2122853,2123621,2123873,2124140,2124641,2124655,2125153,2125676,2126689,2126945,2127461,2128225,6365282,6384416,6384737,6384993,6385184,6385405,6386208,6386273,6386429,6386685,6388065,6449522,6578464,6579488,6580512,6627426,6627435,6644841,6647328,6648352,6648425,6648681,6909029,6909472,6909545,6910496,7102830,7102834,7103776,7103858,7217249,7217250,7217259,7234657,7234661,7234848,7235872,7235950,7273760,7498094,7535982,7759136,7954720,7958386,16608800,16608868,16609021,16642301]},this.name=function(e){return e&&e.fC1Bytes?"windows-1254":"ISO-8859-9"},this.language=function(){return"tr"}},a.inherits(e.exports.ISO_8859_9,o),e.exports.windows_1251=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,144,131,32,131,32,32,32,32,32,32,154,32,156,157,158,159,144,32,32,32,32,32,32,32,32,32,154,32,156,157,158,159,32,162,162,188,32,180,32,32,184,32,186,32,32,32,32,191,32,32,179,179,180,181,32,32,184,32,186,32,188,190,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},this.ngrams=function(){return[2155040,2155246,2155758,2156512,2156576,2157280,2157294,2158048,2158053,2158305,2158574,2158576,2158816,2159086,2159090,2159342,2160626,2162162,14740968,14742268,14937632,15068156,15068648,15069682,15069728,15212783,15263008,15263776,15269664,15459821,15460384,15465709,15589408,15590688,15591653,15591679,15592992,15593186,15605986,15605999,15606001,15655456,15655648,15655918,15657248,15657980,15658016,15659506,15724267,15724773,15724776,15724782,15786210,15787492,15856352,15856354,15856360,15859488,15918571,15920672,15920880,15924256,16249582,16512288]},this.name=function(e){return"windows-1251"},this.language=function(){return"ru"}},a.inherits(e.exports.windows_1251,o),e.exports.windows_1256=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,129,32,131,32,32,32,32,136,32,138,32,156,141,142,143,144,32,32,32,32,32,32,32,152,32,154,32,156,32,32,159,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,32,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,32,32,32,244,32,32,32,32,249,32,251,252,32,32,255]},this.ngrams=function(){return[2148321,2148324,2148551,2153185,2153965,2154977,2155492,2156231,13050055,13091104,13093408,13095200,13099296,13099459,13099463,13099464,13099466,13099468,13099469,13099471,13099475,13099482,13099486,13099491,13099494,13099501,13099808,13100064,13100234,13115591,13181127,13181149,13181153,13181155,13181158,13246663,13574343,13617440,13705415,13748512,13836487,14295239,14344684,14544160,14753991,14797088,14806048,14806304,14885063,14927648,14928160,14935072,14950599,15016135,15058720,15124449,15131680,15474887,15540423,15540451,15540454,15583520,15585568,15590432]},this.name=function(e){return"windows-1256"},this.language=function(){return"ar"}},a.inherits(e.exports.windows_1256,o),e.exports.KOI8_R=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223]},this.ngrams=function(){return[2147535,2148640,2149313,2149327,2150081,2150085,2150338,2150607,2150610,2151105,2151375,2151380,2151631,2152224,2152399,2153153,2153684,2154196,12701385,12702936,12963032,12963529,12964820,12964896,13094688,13181136,13223200,13224224,13226272,13419982,13420832,13424846,13549856,13550880,13552069,13552081,13553440,13553623,13574352,13574355,13574359,13617103,13617696,13618392,13618464,13620180,13621024,13621185,13684684,13685445,13685449,13685455,13812183,13813188,13881632,13882561,13882569,13882583,13944268,13946656,13946834,13948960,14272544,14603471]},this.name=function(e){return"KOI8-R"},this.language=function(){return"ru"}},a.inherits(e.exports.KOI8_R,o)},function(e,t,n){function r(){}var i=n(47),o=n(36);e.exports.UTF_16BE=function(){this.name=function(){return"UTF-16BE"},this.match=function(e){var t=e.fRawInput;return t.length>=2&&254==(255&t[0])&&255==(255&t[1])?new o(e,this,confidence=100):null}},e.exports.UTF_16LE=function(){this.name=function(){return"UTF-16LE"},this.match=function(e){var t=e.fRawInput;return t.length>=2&&255==(255&t[0])&&254==(255&t[1])?t.length>=4&&0==t[2]&&0==t[3]?null:new o(e,this,confidence=100):null}},r.prototype.match=function(e){var t=e.fRawInput,n=e.fRawLength/4*4,r=0,i=0,a=!1,s=0;if(0==n)return null;65279==this.getChar(t,0)&&(a=!0);for(var u=0;n>u;u+=4){var c=this.getChar(t,u);0>c||c>=1114111||c>=55296&&57343>=c?i+=1:r+=1}return a&&0==i?s=100:a&&r>10*i?s=80:r>3&&0==i?s=100:r>0&&0==i?s=80:r>10*i&&(s=25),0==s?null:new o(e,this,s)},e.exports.UTF_32BE=function(){this.name=function(){return"UTF-32BE"},this.getChar=function(e,t){return(255&e[t+0])<<24|(255&e[t+1])<<16|(255&e[t+2])<<8|255&e[t+3]}},i.inherits(e.exports.UTF_32BE,r),e.exports.UTF_32LE=function(){this.name=function(){return"UTF-32LE"},this.getChar=function(e,t){return(255&e[t+3])<<24|(255&e[t+2])<<16|(255&e[t+1])<<8|255&e[t+0]}},i.inherits(e.exports.UTF_32LE,r)},function(e,t,n){var r=n(36);e.exports=function(){this.name=function(){return"UTF-8"},this.match=function(e){var t,n=!1,i=0,o=0,a=e.fRawInput,s=0;e.fRawLength>=3&&239==(255&a[0])&&187==(255&a[1])&&191==(255&a[2])&&(n=!0);for(var u=0;u<e.fRawLength;u++){var c=a[u];if(0!=(128&c)){if(192==(224&c))s=1;else if(224==(240&c))s=2;else if(240==(248&c))s=3;else{if(o++,o>5)break;s=0}for(;u++,!(u>=e.fRawLength);){if(128!=(192&a[u])){o++;break}if(0==--s){i++;break}}}}if(t=0,n&&0==o)t=100;else if(n&&i>10*o)t=80;else if(i>3&&0==o)t=100;else if(i>0&&0==o)t=80;else if(0==i&&0==o)t=10;else{if(!(i>10*o))return null;t=25}return new r(e,this,t)}}},function(e,t,n){function r(e){e.forEach(o.validate),this._notes=e}function i(e){this._chart=e}var o=n(217);e.exports=r;var a={IIDX_P1:{11:{column:"1"},12:{column:"2"},13:{column:"3"},14:{column:"4"},15:{column:"5"},18:{column:"6"},19:{column:"7"},16:{column:"SC"}}};r.prototype.count=function(){return this._notes.length},r.prototype.all=function(){return this._notes.slice()},r.fromBMSChart=function(e,t){t=t||{};var n=new i(e);return n.build()},i.prototype.build=function(){return this._notes=[],this._activeLN={},this._lastNote={},this._lnObj=(this._chart.headers.get("lnobj")||"").toLowerCase(),this._channelMapping=a.IIDX_P1,this._objects=this._chart.objects.allSorted(),this._objects.forEach(function(e){this._handle(e)}.bind(this)),new r(this._notes)},i.prototype._handle=function(e){if("01"===e.channel)this._handleNormalNote(e);else switch(e.channel.charAt(0)){case"1":case"2":this._handleNormalNote(e);break;case"5":case"6":this._handleLongNote(e)}},i.prototype._handleNormalNote=function(e){var t=this._normalizeChannel(e.channel),n=this._getBeat(e);if(e.value.toLowerCase()===this._lnObj)this._lastNote[t]&&(this._lastNote[t].endBeat=n);else{var r={beat:n,endBeat:void 0,keysound:e.value,column:this._getColumn(t)};this._lastNote[t]=r,this._notes.push(r)}},i.prototype._handleLongNote=function(e){var t=this._normalizeChannel(e.channel),n=this._getBeat(e);if(this._activeLN[t]){var r=this._activeLN[t];r.endBeat=n,this._notes.push(r),delete this._activeLN[t]}else this._activeLN[t]={beat:n,keysound:e.value,column:this._getColumn(t)}},i.prototype._getBeat=function(e){return this._chart.measureToBeat(e.measure,e.fraction)},i.prototype._getColumn=function(e){return this._channelMapping[e]},i.prototype._normalizeChannel=function(e){return e.replace(/^5/,"1").replace(/^6/,"2")}},function(e,t,n){var r=n(72),i=new r({column:String});e.exports=new r({beat:Number,endBeat:r.maybe(Number),column:r.maybe(i),keysound:String})},function(e,t,n){var r=n(210);t.read=function(e){throw new Error("Synchronous read unsupported in browser!")},t.readAsync=function(e,t){var n=r.detect(e),i=new FileReader;i.onload=function(){t(null,i.result)},i.onerror=function(){t(new Error("cannot read it"))},i.readAsText(new Blob([e]),n)}},function(e,t,n){function r(){this.title="NO TITLE",this.artist="NO ARTIST",this.genre="NO GENRE",this.subtitles=[],this.subartists=[],this.difficulty=0,this.level=0}var i=n(104);e.exports=r,r.fromBMSChart=function(e){var t=new r,n=e.headers.get("title"),o=e.headers.get("artist"),a=e.headers.get("genre"),s=+e.headers.get("difficulty"),u=+e.headers.get("playlevel"),c=e.headers.getAll("subtitle"),l=e.headers.getAll("subartist");if("string"==typeof n&&!c){var f=function(e){n=e[1],c=[e[2]]};i(n).when(/^(.*\S)\s*-(.+?)-$/,f).when(/^(.*\S)\s*(.+?)$/,f).when(/^(.*\S)\s*\((.+?)\)$/,f).when(/^(.*\S)\s*\[(.+?)\]$/,f).when(/^(.*\S)\s*<(.+?)>$/,f)}return n&&(t.title=n),o&&(t.artist=o),a&&(t.genre=a),c&&(t.subtitles=c),l&&(t.subartists=l),s&&(t.difficulty=s),u&&(t.level=u),t}},function(e,t,n){var r=n(72);e.exports=new r({t:Number,x:Number,dx:Number})},function(e,t,n){function r(e,t){var n={bpm:e,beat:0,seconds:0},r=[];r.push({t:0,x:0,dx:n.bpm/60,bpm:n.bpm,inclusive:!0}),t=t.slice(),t.sort(function(e,t){return e.beat-t.beat||a[e.type]-a[t.type]}),t.forEach(function(e){var t=e.beat,i=n.seconds+60*(t-n.beat)/n.bpm;switch(e.type){case"bpm":n.bpm=e.bpm,r.push({t:i,x:t,dx:n.bpm/60,bpm:n.bpm,inclusive:!0});break;case"stop":r.push({t:i,x:t,dx:0,bpm:n.bpm,inclusive:!0}),i+=60*(e.stopBeats||0)/n.bpm,r.push({t:i,x:t,dx:n.bpm/60,bpm:n.bpm,inclusive:!1});break;default:throw new Error("Unrecognized segment object!")}n.beat=t,n.seconds=i}),this._speedcore=new i(r),this._eventBeats=o.uniq(o.pluck(t,"beat"),!0)}var i=n(113),o=n(14);e.exports=r;var a={bpm:1,stop:2};r.prototype.beatToSeconds=function(e){return this._speedcore.t(e)},r.prototype.secondsToBeat=function(e){return this._speedcore.x(e)},r.prototype.bpmAtBeat=function(e){return this._speedcore.segmentAtX(e).bpm},r.prototype.getEventBeats=function(e){return this._eventBeats},r.fromBMSChart=function(e){var t=[];return e.objects.all().forEach(function(n){var r,i=e.measureToBeat(n.measure,n.fraction);if("03"===n.channel)r=parseInt(n.value,16),t.push({type:"bpm",beat:i,bpm:r});else if("08"===n.channel)r=+e.headers.get("bpm"+n.value),isNaN(r)||t.push({type:"bpm",beat:i,bpm:r});else if("09"===n.channel){var o=e.headers.get("stop"+n.value)/48;t.push({type:"stop",beat:i,stopBeats:o})}}),new r(+e.headers.get("bpm")||60,t)}},function(e,t,n){(function(t){function r(e,t,n){function r(){try{a.send(""+(new Date).getTime())}catch(e){}}function o(e){var t=e.split(","),r=+t[0],o=+t[1],a=(new Date).getTime();a>=r&&s.push(i.convert([r,o,o,a])),s.length>=8&&n&&n(i.offset(s))}var a=new WebSocket(e),s=[];a.onmessage=function(e){"k"==e.data&&r(),e.data.indexOf(",")>=0&&(o(e.data),r())},a.onclose=function(){return s.length<1?t(new Error("no offset received")):t(null,i.offset(s))}}var i=n(223);e.exports=r}).call(t,n(1))},function(e,t,n){t.convert=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return{offset:(n-t+(r-i))/2,delay:i-t-(r-n)}},t.offset=function(e){e=e.slice(),e.sort(function(e,t){return e.offset-t.offset}),e=e.slice(1,e.length-1),e.sort(function(e,t){return e.delay-t.delay});for(var t=0,n=0,r=Math.ceil(e.length/8),i=0;i<e.length&&(e[i].delay>e[0].delay&&r--,0!==r);i++)t+=e[i].offset,n+=1;return t/n}},function(e,t,n){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,n){"use strict";function r(e,t,n){return 1-(n-e)/(t-e)}function i(e){return e.position}var o=function(e){return e&&e.__esModule?e["default"]:e},a=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(14)),c=t.NoteArea=function(){function e(t,n){s(this,e),this._notes=u.sortBy(t,i),this._barLines=u(n).pluck("position").sortBy().value()}return a(e,{getVisibleNotes:{value:function(e,t,n){var i=[],o=this._notes;n||(n=0);for(var a=0;a<o.length;a++){var s=o[a],u=s.end?!(s.position>t||s.end.position<e-n):!(s.position>t||s.position<e-n);if(u){var c={note:s};if(s.end){var l=r(e,t,s.position),f=r(e,t,s.end.position);c.y=Math.min(l,f),c.height=Math.abs(l-f)}else c.y=r(e,t,s.position);i.push(c)}}return i}},getVisibleBarLines:{value:function(e,t,n){return n||(n=0),this._barLines.filter(function(r){return r>=e-n&&t>=r}).map(function(n){return{id:n,y:r(e,t,n)}})}}}),e}();t["default"]=c},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(226)),s=n(73),u=s.MISSED,c=s.breaksCombo,l=t.PlayerDisplay=function(){function e(t){o(this,e);var n=t.notechart;this._currentSpeed=1,this._player=t,this._noteArea=new a(n.notes,n.barLines),this._stateful={},this._defaultData={placement:t.options.placement,scratch:t.options.scratch}}return i(e,{update:{value:function(e,t,n){function r(){b.beat=g}function i(e){return n.stats.counts&&n.stats.counts[e]}function o(){return(100*(n.stats.currentAccuracy||0)).toFixed(2)+"%"}function a(){var e=m.getVisibleNotes(y,p(),1),t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value,c=s.note,l=c.column;if(s.height){var f=n.getNoteJudgment(c),h=n.getNoteStatus(c);x("longnote_"+l,{key:c.id,y:s.y,height:s.height,active:0!==f&&f!==u,missed:"judged"===h&&f===u})}else"judged"!==n.getNoteStatus(c)&&x("note_"+l,{key:c.id,y:s.y})}}catch(d){r=!0,i=d}finally{try{!t&&a["return"]&&a["return"]()}finally{if(r)throw i}}}function s(){var e=m.getVisibleBarLines(y,p(),1),t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;x("barlines",{key:a.id,y:a.y})}}catch(s){n=!0,r=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw r}}}function l(){var t=n.input,r=!0,i=!1,o=void 0;try{for(var a,s=d.columns[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,c=t.get(u);b[""+u+"_active"]=0!==c.value?1:0,c.changed&&(0!==c.value?v[""+u+"_down"]=e:v[""+u+"_up"]=e)}}catch(l){i=!0,o=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}}function f(){var t=n.notifications.judgments,r=t[t.length-1];if(r){var i=-1===r.judgment?"missed":""+r.judgment;v["judge_"+i]=e,v.combo=r.combo}b.score=n.stats.score}function h(){for(var t=n.notifications.judgments,r=0;r<t.length;r++){var i=t[r];c(i.judgment)||(v[""+i.column+"_explode"]=e)}}function p(){return y+5/w}var d=this._player,m=this._noteArea,v=this._stateful,g=d.notechart.secondsToBeat(t),y=d.notechart.beatToPosition(g),b=Object.assign({},this._defaultData),x=function(e,t){return(b[e]||(b[e]=[])).push(t)};this._currentSpeed+=(n.speed-this._currentSpeed)/3;var w=this._currentSpeed;return r(),a(),s(),l(),f(),h(),b.speed=n.speed.toFixed(1)+"x",b.stat_1=i(1),b.stat_2=i(2),b.stat_3=i(3),b.stat_4=i(4),b.stat_missed=i(u),b.stat_acc=o(),b.bpm=Math.round(d.notechart.bpmAtBeat(g)),Object.assign(b,v),b}}}),e}();t["default"]=l},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(117)),s=r(n(14)),u=r(n(122)),c=r(n(236)),l=t.Notechart=function(){function e(t){var n=this,r=(void 0===arguments[1]?1:arguments[1],void 0===arguments[2]?{}:arguments[2]);o(this,e);var i=a.Notes.fromBMSChart(t).all(),s=a.Timing.fromBMSChart(t),u=a.Keysounds.fromBMSChart(t),c=a.SongInfo.fromBMSChart(t);this._preTransform(i,r),this._timing=s,this._keysounds=u,this._duration=0,this._notes=this._generatePlayableNotesFromBMS(i),this._autos=this._generateAutoKeysoundEventsFromBMS(i),this._barLines=this._generateBarLines(i,t),this._samples=this._generateKeysoundFiles(u),this._infos=new Map(this._notes.map(function(e){return[e,n._getNoteInfo(e)]})),this._songInfo=c}return i(e,{notes:{get:function(){return this._notes}},autos:{get:function(){return this._autos}},samples:{get:function(){return this._samples}},keysounds:{get:function(){return this._keysounds.all()}},barLines:{get:function(){return this._barLines}},columns:{get:function(){return["SC","1","2","3","4","5","6","7"]}},duration:{get:function(){return this._duration}},songInfo:{get:function(){return this._songInfo}},info:{value:function(e){return this._infos.get(e)}},beatToSeconds:{value:function(e){return this._timing.beatToSeconds(e)}},beatToPosition:{value:function(e){return e}},secondsToBeat:{value:function(e){return this._timing.secondsToBeat(e)}},secondsToPosition:{value:function(e){return this.beatToPosition(this.secondsToBeat(e))}},bpmAtBeat:{value:function(e){return this._timing.bpmAtBeat(e)}},_preTransform:{value:function(e,t){if("off"===t.scratch){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.column&&"SC"===s.column.column&&(s.column=null)}}catch(u){r=!0,i=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}}}},_generatePlayableNotesFromBMS:{value:function(e){var t=this,n=1;return e.filter(function(e){return e.column}).map(function(e){var r=t._generateEvent(e.beat);return r.id=n++,r.column=e.column.column,r.keysound=e.keysound,t._updateDuration(r),void 0!==e.endBeat?(r.end=t._generateEvent(e.endBeat),t._updateDuration(r.end)):r.end=void 0,new c(r)})}},_updateDuration:{value:function(e){e.time>this._duration&&(this._duration=e.time)}},_generateAutoKeysoundEventsFromBMS:{value:function(e){var t=this;return e.filter(function(e){return!e.column}).map(function(e){var n=t._generateEvent(e.beat);return n.keysound=e.keysound,new u(n)})}},_generateBarLines:{value:function(e,t){var n=s.max(e.map(function(e){return e.endBeat||e.beat})),r=[{beat:0,position:0}],i=0,o=0,a=0;do i+=t.timeSignatures.getBeats(o),o+=1,a=this.beatToPosition(i),r.push({beat:i,position:a});while(n>=i);return r}},_generateKeysoundFiles:{value:function(e){var t=new Set,n=!0,r=!1,i=void 0;try{for(var o,a=[this.notes,this.autos][Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=!0,c=!1,l=void 0;try{for(var f,h=s[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value,d=e.get(p.keysound);d&&t.add(d)}}catch(m){c=!0,l=m}finally{try{!u&&h["return"]&&h["return"]()}finally{if(c)throw l}}}}catch(m){r=!0,i=m}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}return Array.from(t)}},_generateEvent:{value:function(e){return{beat:e,time:this.beatToSeconds(e),position:this.beatToPosition(e)}}},_getNoteInfo:{value:function(e){var t=e.end?2:1;return{combos:t}}}},{fromBMSChart:{value:function(t,n,r){return new e(t,n,r)}}}),e}();t["default"]=l},function(e,t,n){"use strict";function r(e){return function(t){var n=0;return Object.defineProperties({notes:t,update:function(){for(;n<t.length&&"judged"===e.getNoteStatus(t[n]);)n+=1}},{startIndex:{get:function(){return n},configurable:!0,enumerable:!0}})}}var i=function(e){return e&&e.__esModule?e["default"]:e},o=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(14)),u=n(73),c=u.judgeTime,l=u.judgeEndTime,f=u.isBad,h=u.MISSED,p=i(n(230)),d=t.PlayerState=function(){function e(t){a(this,e),this._player=t,this._columns=t.columns,this._noteBufferByColumn=s(t.notechart.notes).sortBy("time").groupBy("column").mapValues(r(this)).value(),this._noteResult=new Map,this._duration=t.notechart.duration,this.stats=new p(t.notechart),this.notifications={},this.speed=t.options.speed,this.finished=!1}return o(e,{player:{get:function(){return this._player}},update:{value:function(e,t){this._gameTime=e,this._rawInput=t,this.notifications={},this.notifications.sounds=[],this.notifications.judgments=[],this._updateInputColumnMap(),this._judgeNotes(),this._updateSpeed(),e>this._duration+1&&(this.finished=!0)}},getNoteStatus:{value:function(e){var t=this._noteResult.get(e);return t?t.status:"unjudged"}},getNoteJudgment:{value:function(e){var t=this._noteResult.get(e);return t?t.judgment:0}},getPlayerInput:{value:function(e){return this._rawInput.get("p"+this._player.number+"_"+e)}},_updateInputColumnMap:{value:function(){var e=this;this.input=new Map(this._columns.map(function(t){return[t,e.getPlayerInput(t)]}))}},_judgeNotes:{value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this._columns[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value,a=this._noteBufferByColumn[o];if(a){var s=this.input.get(o);this._judgeColumn(a,s),a.update()}}}catch(u){t=!0,n=u}finally{try{!e&&i["return"]&&i["return"]()}finally{if(t)throw n}}}},_updateSpeed:{value:function(){this.getPlayerInput("speedup").justPressed&&this._modifySpeed(1),this.getPlayerInput("speeddown").justPressed&&this._modifySpeed(-1);var e=this.getPlayerInput("pinch").value;if(e&&!this._pinching?this._pinching={start:e,speed:this.speed}:e||(this._pinching=null),e){var t=this._pinching,n=t.speed*e/t.start;this.speed=Math.max(.2,Math.round(10*n)/10);

}}},_modifySpeed:{value:function(e){var t=this._rawInput.get("select").value?.1:this.speed<.5?.3:.5;this.speed+=e*t,this.speed<.2&&(this.speed=.2)}},_judgeColumn:{value:function(e,t){for(var n=void 0,r=void 0,i=e.notes,o=e.startIndex;o<i.length;o++){var a=i[o];if(this._shouldJudge(a,t,e)){var s="active"!==this.getNoteStatus(a);if(n=a,r=this._judge(a),s)break}}if(t.justPressed)if(n)this.notifications.sounds.push({note:n,type:"hit",judgment:r});else{var u=this._getClosestNote(i);u&&this.notifications.sounds.push({note:u,type:"free"})}}},_getClosestNote:{value:function(e){var t=this;return s.min(e,function(e){return Math.abs(t._gameTime-e.time)})}},_shouldJudge:{value:function(e,t,n){var r=this.getNoteStatus(e);if("unjudged"===r){var i=c(this._gameTime,e.time),o=i===h,a=i>0&&t.changed&&t.value;return f(i)&&this._getClosestNote(n.notes)!==e&&(a=!1),o||a}if("active"===r){var i=l(this._gameTime,e.end.time),o=i===h,s=t.changed;return o||s}return!1}},_judge:{value:function(e){var t=this._gameTime-e.time,n=c(this._gameTime,e.time),r=this._noteResult.get(e);if(e.end)if(r&&"unjudged"!==r.status){if("active"===r.status){var i="SC"===e.column;t=this._gameTime-e.end.time,n=l(this._gameTime,e.end.time)||h,i&&t>0&&(n=1),r={status:"judged",judgment:n,delta:t}}}else{var o=n===h?"judged":"active";r={status:o,judgment:n,delta:t}}else r={status:"judged",judgment:n,delta:t};return n===h&&this.notifications.sounds.push({note:e,type:"break"}),this._noteResult.set(e,r),this._setJudgment(n,t,e.column),n}},_setJudgment:{value:function(e,t,n){this.stats.handleJudgment(e);var r={judgment:e,combo:this.stats.combo,delta:t,column:n};this.notifications.judgments.push(r)}}}),e}();t["default"]=d},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}},i=function(e){return e&&e.__esModule?e["default"]:e},o=function(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0})},a=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(14)),c=r(n(73)),l=t.PlayerStats=function(){function e(t){s(this,e),this.totalCombo=u(t.notes).map(function(e){return t.info(e).combos}).sum(),this.combo=0,this.maxCombo=0,this.rawSumJudgmentWeight=0,this.rawTotalComboScore=this._calculateRawTotalComboScore(),this.rawSumComboScore=0,this.counts=function(){var e={};return o(e,c.MISSED,0),o(e,"1",0),o(e,"2",0),o(e,"3",0),o(e,"4",0),e}(),this.numJudgments=0,this.poor=!1}return a(e,{score:{get:function(){var e=Math.floor(5e5*this.accuracy),t=Math.floor(55555*this.rawSumComboScore/this.rawTotalComboScore);return e+t}},accuracy:{get:function(){return this.rawSumJudgmentWeight/(c.weight(1)*this.totalCombo)}},currentAccuracy:{get:function(){return this.rawSumJudgmentWeight/(c.weight(1)*this.numJudgments||1)}},handleJudgment:{value:function(e){c.breaksCombo(e)?(this.combo=0,this.poor=!0):(this.combo+=1,this.rawSumComboScore+=this._calculateRawComboScore(this.combo),this.poor=!1),this.rawSumJudgmentWeight+=c.weight(e),this.combo>this.maxCombo&&(this.maxCombo=this.combo),this.counts[e]+=1,this.numJudgments+=1}},_calculateRawTotalComboScore:{value:function(){for(var e=0,t=1;t<=this.totalCombo;t++)e+=this._calculateRawComboScore(t);return e}},_calculateRawComboScore:{value:function(e){return 0===e?0:23>e?1:51>e?2:92>e?3:161>e?4:5}}}),e}();t["default"]=l},function(e,t,n){"use strict";function r(e){var t=e.match(/^(\d+)x(\d+)\+(\d+)\+(\d+)$/);return t?new o.Rectangle(+t[3],+t[4],+t[1],+t[2]):null}var i=function(e){return e&&e.__esModule?e["default"]:e};t.parseFrame=r,Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(27))},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};Object.defineProperty(t,"__esModule",{value:!0}),n(376);var i=r(n(7)),o=i.createClass({displayName:"SceneToolbar",render:function(){return i.createElement("div",{className:"scene-toolbar"},this.props.children)}});t.SceneToolbar=o,o.Spacer=i.createClass({displayName:"Spacer",render:function(){return i.createElement("div",{className:"scene-toolbar--spacer"})}}),t["default"]=o},function(e,t,n){var r=n(356);e.exports=function(e,t,n,i){if("number"==typeof e&&"number"==typeof t)return r(e,t,n);var o=Math.min(e.length,t.length);i=i||new Array(o);for(var a=0;o>a;a++)i[a]=r(e[a],t[a],n);return i}},function(e,t,n){"use strict";t.getName=function(e){var t=e.displayName||e.name;if(!t){var n=e.toString().match(/function ([^\s\(]+)/);t=n&&n[1]}return t},t.toString=function(){if(this.getCall&&this.callCount)for(var e,t,n=this.callCount;n--;){e=this.getCall(n).thisValue;for(t in e)if(e[t]===this)return t}return this.displayName||"sinon fake"},t.create=function(e){var t=function(){};return t.prototype=e,new t}},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};n(248);var i=r(n(7));e.exports=i.createClass({displayName:"benchmark-panel",render:function(){return i.createElement("div",{className:"benchmark-panel",onClick:this.handleInteraction,onTouchStart:this.handleInteraction},this.state.show?i.createElement("article",null,i.createElement("b",null,"Benchmark Stats"),i.createElement("br",null),this.renderTable()):"Show Benchmark Stats")},componentDidMount:function(){var e=this;setInterval(function(){return e.forceUpdate()},1e3)},renderTable:function(){var e=this.props.bench.stats;return i.createElement("table",null,i.createElement("tbody",null,Object.keys(e).map(function(t){var n=e[t];return i.createElement("tr",null,i.createElement("td",null,i.createElement("strong",null,t)),i.createElement("td",{align:"right"},""+n))})))},getInitialState:function(){return{show:!1,text:"wow"}},handleInteraction:function(e){e.preventDefault(),e.stopPropagation(),this.setState({show:!this.state.show})}})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(72)),o=r(n(122)),a=new i(o,{id:Number,end:i.maybe(o),column:String});t.GameNote=a,t["default"]=a},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],i=e[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(227)),u=t.GameDisplay=function(){function e(t){var n=t.game,r=(t.skin,t.context);a(this,e),this._game=n,this._context=r,this._players=new Map(n.players.map(function(e){return[e,new s(e)]})),this._stateful={}}return o(e,{start:{value:function(){this._started=(new Date).getTime();var e=this._game.players[0],t=e.notechart.songInfo;this._stateful.song_title=t.title,this._stateful.song_artist=t.artist,this._duration=e.notechart.duration}},destroy:{value:function(){this._context.destroy()}},update:{value:function(e,t){var n=((new Date).getTime()-this._started)/1e3,r=this._getData(n,e,t);this._updateStatefulData(n,e,t),this._context.render(Object.assign({},this._stateful,r))}},_getData:{value:function(e,t,n){var r={};r.tutorial=this._game.options.tutorial?"yes":"no",r.t=e,r.gameTime=t,r.ready=this._getReady(n),r.song_time=this._getSongTime(t);var o=!0,a=!1,s=void 0;try{for(var u,c=this._players[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=i(u.value,2),f=l[0],h=l[1],p=n.player(f),d=h.update(e,t,p);for(var m in d)r["p"+f.number+"_"+m]=d[m]}}catch(v){a=!0,s=v}finally{try{!o&&c["return"]&&c["return"]()}finally{if(a)throw s}}return r}},_updateStatefulData:{value:function(e,t,n){var r=this._stateful;void 0===r.started&&n.started&&(r.started=e),void 0===r.gettingStarted&&n.gettingStarted&&(r.gettingStarted=e)}},_getSongTime:{value:function(e){return this._formatTime(Math.min(this._duration,Math.max(0,e)))+" / "+this._formatTime(this._duration)}},_getReady:{value:function(e){var t=e.readyFraction;return t>.5?Math.pow(1-(t-.5)/.5,2):0}},context:{get:function(){return this._context}},view:{get:function(){return this._context.view}},_formatTime:{value:function(e){var t=Math.floor(e%60);return Math.floor(e/60)+":"+(10>t?"0":"")+t}}}),e}();t["default"]=u},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(228)),s=r(n(207)),u=t.Game=function(){function e(t,n){o(this,e),this.options=n,this.players=n.players.map(function(e,r){e=Object.assign({},e,{autosound:n.audioInputLatency>=.01});var i=a.fromBMSChart(t,r+1,e);return new s(i,r+1,e)})}return i(e,{samples:{get:function(){var e=new Set,t=!0,n=!1,r=void 0;try{for(var i,o=this.players[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,s=!0,u=!1,c=void 0;try{for(var l,f=a.notechart.samples[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;e.add(h)}}catch(p){u=!0,c=p}finally{try{!s&&f["return"]&&f["return"]()}finally{if(u)throw c}}}}catch(p){n=!0,r=p}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw r}}return Array.from(e)}}}),e}();t["default"]=u},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var o=t.Control=function(){function e(){i(this,e),this.value=0,this.changed=!1}return r(e,{justPressed:{get:function(){return this.changed&&this.value}}}),e}();t["default"]=o},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],i=e[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(229)),u=t.GameState=function(){function e(t){a(this,e),this._game=t,this._players=new Map(t.players.map(function(e){return[e,new s(e)]}))}return o(e,{game:{get:function(){return this._game}},update:{value:function(e,t,n){var r=!0,o=!0,a=!1,s=void 0;try{for(var u,c=this._players[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=i(u.value,2),f=(l[0],l[1]);f.update(e,t),f.finished||(r=!1)}}catch(h){a=!0,s=h}finally{try{!o&&c["return"]&&c["return"]()}finally{if(a)throw s}}this.readyFraction=n.readyFraction,this.gettingStarted=n.gettingStarted,this.started=n.started,this.finished=r}},player:{value:function(e){return this._players.get(e)}}}),e}();t["default"]=u},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};n(375);var i=r(n(7)),o=r(n(71));e.exports=i.createClass({displayName:"scene-heading",render:function(){return i.createElement("div",{className:o("scene-heading",this.props.className)},this.props.children)}})},function(e,t,n){function r(e){this._map=e}var i=n(14);r.prototype.get=function(e){return this._map[e.toLowerCase()]},r.prototype.files=function(){return i.uniq(i.values(this._map))},r.prototype.all=function(){return this._map},r.fromBMSChart=function(e){var t={};return e.headers.each(function(e,n){var r=e.match(/^wav(\S\S)$/i);r&&(t[r[1].toLowerCase()]=n)}),new r(t)},e.exports=r},function(e,t,n){function r(e){var t=1024*(1<<30),n=1<<30,r=1<<20,i=1024,o=Math.abs(e);return o>=t?Math.round(e/t*100)/100+"tb":o>=n?Math.round(e/n*100)/100+"gb":o>=r?Math.round(e/r*100)/100+"mb":o>=i?Math.round(e/i*100)/100+"kb":e+"b"}e.exports=function(e){if("number"==typeof e)return r(e);var t=e.match(/^(\d+(?:\.\d+)?) *(kb|mb|gb|tb)$/),n=parseFloat(t[1]),i=t[2],o={kb:1024,mb:1<<20,gb:1<<30,tb:1024*(1<<30)};return o[i]*n}},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,".benchmark-panel{background:#449;border:2px solid #66e;padding:4px}.benchmark-panel table{font-size:10px}",""])},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,'.scene{top:0;bottom:0;overflow:hidden;font-family:"Source Sans Pro","Segoe UI","Helvetica Neue",sans-serif}.scene,.scene>.scene-heading{position:absolute;right:0;left:0}.scene>.scene-heading{top:5vmin}.scene>.scene-toolbar{position:absolute;right:0;bottom:0;left:0}',""])},function(e,t,n){e.exports=n.p+"7d6d69a86d70e4e52079c5ce873435c6.jpg"},function(e,t,n){"use strict";var r=function(){var e={constructor:function(){return"0"},toString:function(){return"1"},valueOf:function(){return"2"},toLocaleString:function(){return"3"},prototype:function(){return"4"},isPrototypeOf:function(){return"5"},propertyIsEnumerable:function(){return"6"},hasOwnProperty:function(){return"7"},length:function(){return"8"},unique:function(){return"9"}},t=[];for(var n in e)t.push(e[n]());return"0123456789"!==t.join("")}();e.exports=function(e){var t,n,i,o=Array.prototype.slice.call(arguments,1);for(n=0;n<o.length;n++){t=o[n];for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);r&&t.hasOwnProperty("toString")&&t.toString!==e.toString&&(e.toString=t.toString)}return e}},function(e,t,n){var r=n(244);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){var r=n(245);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){"use strict";function r(e,t,n,r,i){var o=e.context;c.defineAttribute(this,"name","readonly",t,function(e){throw new TypeError(c.formatter.concat(this,e))}),c.defineAttribute(this,"defaultValue","readonly",n,function(e){throw new TypeError(c.formatter.concat(this,e))}),c.defineAttribute(this,"minValue","readonly",r,function(e){throw new TypeError(c.formatter.concat(this,e))}),c.defineAttribute(this,"maxValue","readonly",i,function(e){throw new TypeError(c.formatter.concat(this,e))}),Object.defineProperty(this,"value",{get:function(){return this._value=this.$valueAtTime(o.currentTime),this._value},set:function(e){if(!c.typeCheck(e,"number")){var t="";throw t+="type ",t+=c.formatter.shouldBeButGot("number",e),new TypeError(c.formatter.concat(this,t))}this._value=e},enumerable:!0}),Object.defineProperties(this,{$name:{value:"AudioParam"},$context:{value:o},$node:{value:e},$inputs:{value:[]},$events:{value:[]}}),this._value=this.defaultValue,this._tick=-1}function i(e,t){var n,r=t.time,i=e.$events,o=0,a=i.length;for(n=0;a>n;++n){if(i[n].time===r&&i[n].type===t.type){o=1;break}if(i[n].time>r)break}i.splice(n,o,t)}function o(e,t,n,r,i,o){var a=(r-i)/(o-i);return(1-a)*t+a*n}function a(e,t,n,r,i,o){var a=(r-i)/(o-i);return t>0&&n>0?t*Math.pow(n/t,a):e}function s(e,t,n,r,i){return t+(e-t)*Math.exp((r-n)/i)}function u(e,t,n,r,i){var o=(t-n)/(r-n);return 0>=o?c.defaults(i[0],e):o>=1?c.defaults(i[i.length-1],e):c.defaults(i[i.length*o|0],e)}var c=n(35),l=n(118),f=n(34),h=function(){throw new TypeError("Illegal constructor")};c.inherits(r,h),r.exports=h,h.prototype.setValueAtTime=function(e,t){var n=new l(this,"setValueTime",[{name:"value",type:"number"},{name:"startTime",type:"number"}]);n.validateArguments(arguments,function(e){throw new TypeError(n.form+"; "+e)}),i(this,{type:"SetValue",value:e,time:t})},h.prototype.linearRampToValueAtTime=function(e,t){var n=new l(this,"linearRampToValueAtTime",[{name:"value",type:"number"},{name:"endTime",type:"number"}]);n.validateArguments(arguments,function(e){throw new TypeError(n.form+"; "+e)}),i(this,{type:"LinearRampToValue",value:e,time:t})},h.prototype.exponentialRampToValueAtTime=function(e,t){var n=new l(this,"exponentialRampToValueAtTime",[{name:"value",type:"number"},{name:"endTime",type:"number"}]);n.validateArguments(arguments,function(e){throw new TypeError(n.form+"; "+e)}),i(this,{type:"ExponentialRampToValue",value:e,time:t})},h.prototype.setTargetAtTime=function(e,t,n){var r=new l(this,"setTargetAtTime",[{name:"target",type:"number"},{name:"startTime",type:"number"},{name:"timeConstant",type:"number"}]);r.validateArguments(arguments,function(e){throw new TypeError(r.form+"; "+e)}),i(this,{type:"SetTarget",value:e,time:t,timeConstant:n})},h.prototype.setValueCurveAtTime=function(e,t,n){var r=new l(this,"setValueCurveAtTime",[{name:"values",type:"Float32Array"},{name:"startTime",type:"number"},{name:"duration",type:"number"}]);r.validateArguments(arguments,function(e){throw new TypeError(r.form+"; "+e)}),i(this,{type:"SetValueCurve",time:t,duration:n,curve:e})},h.prototype.cancelScheduledValues=function(e){var t=new l(this,"cancelScheduledValues",[{name:"startTime",type:"number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)});for(var n=this.$events,r=0,i=n.length;i>r;++r)if(n[r].time>=e)return n.splice(r)},r.prototype.toJSON=function(e){return c.toJSON(this,function(e,t){var n={};return n.value=e.value,n.inputs=e.$inputs.map(function(e){return e.toJSON(t)}),n},e)},r.prototype.$valueAtTime=function(e){e=c.toSeconds(e);for(var t,n=this._value,r=this.$events,i=0;i<r.length;i++){var l=r[i],f=r[i+1];if(e<l.time)break;if(t=Math.min(e,f?f.time:e),f&&"LinearRampToValue"===f.type)n=o(n,l.value,f.value,t,l.time,f.time);else if(f&&"ExponentialRampToValue"===f.type)n=a(n,l.value,f.value,t,l.time,f.time);else switch(l.type){case"SetValue":case"LinearRampToValue":case"ExponentialRampToValue":n=l.value;break;case"SetTarget":n=s(n,l.value,t,l.time,l.timeConstant);break;case"SetValueCurve":n=u(n,t,l.time,l.time+l.duration,l.curve)}}return n},r.prototype.$process=function(e,t){this._tick!==t&&(this._tick=t,this.$inputs.forEach(function(n){n.$process(e,t)}))},e.exports=f.AudioParam=r},function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===a||t===f?62:t===s||t===h?63:u>t?-1:u+10>t?t-u+26+26:l+26>t?t-l:c+26>t?t-c+26:void 0}function n(e){function n(e){c[f++]=e}var r,i,a,s,u,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;u="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,c=new o(3*e.length/4-u),a=u>0?e.length-4:e.length;var f=0;for(r=0,i=0;a>r;r+=4,i+=3)s=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===u?(s=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&s)):1===u&&(s=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(s>>8&255),n(255&s)),c}function i(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,a,s=e.length%3,u="";for(i=0,a=e.length-s;a>i;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],u+=n(o);switch(s){case 1:o=e[e.length-1],u+=t(o>>2),u+=t(o<<4&63),u+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],u+=t(o>>10),u+=t(o>>4&63),u+=t(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),f="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=i}(t)},function(e,t,n){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?0/0:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,m=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?h/u:h*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=d,a/=256,c-=8);e[n+p-d]|=128*m}},function(e,t,n){var r=Array.isArray,i=Object.prototype.toString;e.exports=r||function(e){return!!e&&"[object Array]"==i.call(e)}},function(e,t,n){var r;(function(e,i){!function(o){function a(e){throw RangeError(j[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function u(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(N,".");var i=e.split("."),o=s(i,t).join(".");return r+o}function c(e){for(var t,n,r=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&o>i?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function l(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=D(e>>>10&1023|55296),e=56320|1023&e),t+=D(e)}).join("")}function f(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:w}function h(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function p(e,t,n){var r=0;for(e=n?P(e/C):e>>1,e+=P(e/t);e>R*E>>1;r+=w)e=P(e/R);return P(r+(R+1)*e/(e+T))}function d(e){var t,n,r,i,o,s,u,c,h,d,m=[],v=e.length,g=0,y=A,b=S;for(n=e.lastIndexOf(k),0>n&&(n=0),r=0;n>r;++r)e.charCodeAt(r)>=128&&a("not-basic"),m.push(e.charCodeAt(r));for(i=n>0?n+1:0;v>i;){for(o=g,s=1,u=w;i>=v&&a("invalid-input"),c=f(e.charCodeAt(i++)),(c>=w||c>P((x-g)/s))&&a("overflow"),g+=c*s,h=b>=u?_:u>=b+E?E:u-b,!(h>c);u+=w)d=w-h,s>P(x/d)&&a("overflow"),s*=d;t=m.length+1,b=p(g-o,t,0==o),P(g/t)>x-y&&a("overflow"),y+=P(g/t),g%=t,m.splice(g++,0,y)}return l(m)}function m(e){var t,n,r,i,o,s,u,l,f,d,m,v,g,y,b,T=[];for(e=c(e),v=e.length,t=A,n=0,o=S,s=0;v>s;++s)m=e[s],128>m&&T.push(D(m));for(r=i=T.length,i&&T.push(k);v>r;){for(u=x,s=0;v>s;++s)m=e[s],m>=t&&u>m&&(u=m);for(g=r+1,u-t>P((x-n)/g)&&a("overflow"),n+=(u-t)*g,t=u,s=0;v>s;++s)if(m=e[s],t>m&&++n>x&&a("overflow"),m==t){for(l=n,f=w;d=o>=f?_:f>=o+E?E:f-o,!(d>l);f+=w)b=l-d,y=w-d,T.push(D(h(d+b%y,0))),l=P(b/y);T.push(D(h(l,0))),o=p(n,g,r==i),n=0,++r}++n,++t}return T.join("")}function v(e){return u(e,function(e){return O.test(e)?d(e.slice(4).toLowerCase()):e})}function g(e){return u(e,function(e){return M.test(e)?"xn--"+m(e):e})}var y=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof i&&i);(y.global===y||y.window===y||y.self===y)&&(o=y);var b,x=2147483647,w=36,_=1,E=26,T=38,C=700,S=72,A=128,k="-",O=/^xn--/,M=/[^\x20-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=w-_,P=Math.floor,D=String.fromCharCode;b={version:"1.3.2",ucs2:{decode:c,encode:l},decode:d,encode:m,toASCII:g,toUnicode:v},r=function(){return b}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)}).call(t,n(99)(e),function(){return this}())},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(t);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var c=0;u>c;++c){var l,f,h,p,d=e[c].replace(a,"%20"),m=d.indexOf(n);m>=0?(l=d.substr(0,m),f=d.substr(m+1)):(l=d,f=""),h=decodeURIComponent(l),p=decodeURIComponent(f),r(o,h)?Array.isArray(o[h])?o[h].push(p):o[h]=[o[h],p]:o[h]=p}return o}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,i){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(i){var o=encodeURIComponent(r(i))+n;return Array.isArray(e[i])?e[i].map(function(e){return o+encodeURIComponent(r(e))}).join(t):o+encodeURIComponent(r(e[i]))}).join(t):i?encodeURIComponent(r(i))+n+encodeURIComponent(r(e)):""}},function(e,t,n){"use strict";t.decode=t.parse=n(255),t.encode=t.stringify=n(256)},function(e,t,n){"use strict";function r(e){f.push({url:e})}var i=function(e){return e&&e.__esModule?e["default"]:e};t.loadCollection=r,Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(126)),a=n(100).Action,s=i(n(46)),u=new a;t.startLoading=u;var c=new a;t.finishLoading=c;var l=new a;t.errorLoading=l;var f=new o.Bus;f.flatMapLatest(function(e){var t=new o.Bus;return setTimeout(function(){t.push(function(){return u(e)}),Promise.resolve(s.get(e.url+"/index.json")).then(function(e){t.push(function(){return c(e)})})["catch"](function(e){t.push(function(){return l(e)})})}),t}).onValue(function(e){return e()})},function(e,t,n){"use strict";function r(e){return localStorage[e]||a[e]}function i(e,t){localStorage[e]=t}function o(){var e={},t=!0,n=!1,i=void 0;try{for(var o,a=["SC","1","2","3","4","5","6","7","SC2"][Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;e[s]=+r("input.P1.keyboard."+s)}}catch(u){n=!0,i=u}finally{try{!t&&a["return"]&&a["return"]()}finally{if(n)throw i}}return e}t.get=r,t.set=i,t.getKeyboardMapping=o,Object.defineProperty(t,"__esModule",{value:!0});var a={"input.P1.keyboard.SC":"16","input.P1.keyboard.1":"90","input.P1.keyboard.2":"83","input.P1.keyboard.3":"88","input.P1.keyboard.4":"68","input.P1.keyboard.5":"67","input.P1.keyboard.6":"70","input.P1.keyboard.7":"86","player.P1.speed":"1.0","player.P1.scratch":"left","player.P1.panel":"center","player.P1.notes.mirror":"0","player.P1.notes.balance":"0","system.offset.audio-input":"0","system.offset.audio-visual":"0"}},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};n(365);var i=r(n(7));e.exports=i.createClass({displayName:"music-chart-info",render:function(){var e=this.props.info;return i.createElement("section",{className:"music-chart-info"},i.createElement("div",{className:"music-chart-info--genre"},e.genre),i.createElement("div",{className:"music-chart-info--title"},e.title),e.subtitles.map(function(e){return i.createElement("div",{className:"music-chart-info--subtitle"},e)}),i.createElement("div",{className:"music-chart-info--artist"},e.artist,e.subartists.length?i.createElement("small",null,"  "+e.subartists.join("  ")):null))}})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};n(366);var i=r(n(7)),o=r(n(71)),a=r(n(268));e.exports=i.createClass({displayName:"music-chart-selector-item",render:function(){var e=o("music-chart-selector-item",{"is-active":this.props.isSelected,"is-tutorial":this.props.isTutorial,"is-insane":this.props.chart.info.difficulty>=5});return i.createElement("li",{className:e,onClick:this.handleClick},this.props.isTutorial?"Start Tutorial":i.createElement("span",{className:"music-chart-selector-item--level"},this.props.chart.info.level),i.createElement("span",{className:"music-chart-selector-item--play"},i.createElement(a,{name:"play"})))},handleClick:function(){this.props.onChartClick(this.props.chart)}})},function(e,t,n){"use strict";function r(e){e=s.sortBy(e,"time");var t=0;return{next:function(n){for(var r=[];t<e.length&&n>=e[t].time;t++)r.push(e[t]);return r}}}var i=function(e){return e&&e.__esModule?e["default"]:e},o=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(14)),u=i(n(263)),c=n(73).isBad,l=t.PlayerAudio=function(){function e(t){var n=t.player,i=t.samples,o=t.master,s=t.waveFactory;a(this,e);var c=n.notechart;this._waveFactory=s||new u(o,i,c.keysounds),this._autos=r(c.autos),this._notes=r(c.notes),this._played=new Map,this._autosound=!!n.options.autosound}return o(e,{update:{value:function(e,t){this._playAutokeysounds(e),this._playAutosounds(e,t),this._handleSoundNotifications(t&&t.notifications.sounds||[])}},_playAutokeysounds:{value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this._autos.next(e+1/30)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this._waveFactory.playAuto(a.keysound,a.time-e)}}catch(s){n=!0,r=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw r}}}},_playAutosounds:{value:function(e,t){var n=this._notes.next(e+1/30),r=t&&t.stats.poor,i=this._autosound&&!r;if(i){var o=!0,a=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;this._hitNote(l,l.time-e)}}catch(f){a=!0,s=f}finally{try{!o&&c["return"]&&c["return"]()}finally{if(a)throw s}}}}},_handleSoundNotifications:{value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,s=a.type,u=a.note;"hit"===s?this._hitNote(u,0,a.judgment):"break"===s?this._breakNote(u):"free"===s&&this._waveFactory.playFree(u.keysound,0)}}catch(c){n=!0,r=c}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw r}}}},_hitNote:{value:function(e,t,n){var r=this._played.get(e);r||(r=this._waveFactory.playNote(e.keysound,t),this._played.set(e,r)),r&&c(n)&&r.bad()}},_breakNote:{value:function(e){var t=this._played.get(e);t&&(console.log(t),t.stop())}}}),e}();t["default"]=l},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var o=t.WaveFactory=function(){function e(t,n,r){i(this,e),this._master=t,this._samples=n,this._map=r,this._exclusiveInstances=new Map}return r(e,{playAuto:{value:function(e,t){return this._play({keysound:e,delay:t,exclusive:!0})}},playNote:{value:function(e,t){return this._play({keysound:e,delay:t,exclusive:!0})}},playFree:{value:function(e){return this._play({keysound:e,delay:0,exclusive:!1})}},_play:{value:function(e){var t=e.keysound,n=e.delay,r=e.exclusive;r&&this._stopOldExclusiveSound(t,n);var i=this._map[t.toLowerCase()];if(!i)return null;var o=this._samples[i];if(!o)return null;var a=o.play(n);return r&&this._exclusiveInstances.set(t,a),a}},_stopOldExclusiveSound:{value:function(e,t){var n=this._exclusiveInstances.get(e);n&&(setTimeout(function(){return n.stop()},1e3*t),this._exclusiveInstances["delete"](e))}}}),e}();t["default"]=o},function(e,t,n){"use strict";function r(e){function t(){return e.input}function n(t,n){var r=e.refs[n];if(r){var i=!0,o=!1,a=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=c.getBounds(),f=!0,h=!1,p=void 0;try{for(var d,m=t[Symbol.iterator]();!(f=(d=m.next()).done);f=!0){var v=d.value;if(l.contains(v.x,v.y))return 1}}catch(g){h=!0,p=g}finally{try{!f&&m["return"]&&m["return"]()}finally{if(h)throw p}}}}catch(g){o=!0,a=g}finally{try{!i&&u["return"]&&u["return"]()}finally{if(o)throw a}}}return 0}function r(t){var n=e.refs.p1_SC;if(!n)return 0;u=null;var r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value,f=!0,h=!1,p=void 0;try{for(var d,m=n[Symbol.iterator]();!(f=(d=m.next()).done);f=!0){
var v=d.value;if(v.getBounds().contains(l.x,l.y)){u=l.y;break}}}catch(g){h=!0,p=g}finally{try{!f&&m["return"]&&m["return"]()}finally{if(h)throw p}}if(null!==u)break}}catch(g){i=!0,o=g}finally{try{!r&&c["return"]&&c["return"]()}finally{if(i)throw o}}return null===u?(s=null,0):(null===s&&(s=u),u>s+16?s=u-16:s-16>u&&(s=u+16),u>s+4?-1:s-4>u?1:0)}function i(e){var t=null,n=null,r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(u.y<550)if(null===t)t=u.y;else{if(null!==n)return 0;n=u.y}}}catch(c){i=!0,o=c}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return null!==t&&null!==n?Math.abs(t-n):0}var s=null,u=null,c=o.wrap("input:touch:I",t),l=o.wrap("input:touch:SC",r),f=o.wrap("input:touch:B",n),h=o.wrap("input:touch:P",i);return{name:"TouchPlugin",get:function(){var e=c(),t={};o.enabled&&(o.stats["input:touch:n"]=""+e.length),t.p1_SC=l(e);var n=!0,r=!1,i=void 0;try{for(var s,u=a[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var p=s.value;t[p]=f(e,p)}}catch(d){r=!0,i=d}finally{try{!n&&u["return"]&&u["return"]()}finally{if(r)throw i}}return t.p1_pinch=h(e),t}}}var i=function(e){return e&&e.__esModule?e["default"]:e};t.TouchPlugin=r,Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(106)),a=["p1_1","p1_2","p1_3","p1_4","p1_5","p1_6","p1_7","start"];t["default"]=r},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}},i=function(e){return e&&e.__esModule?e["default"]:e},o=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(14)),u=r(n(108)),c=n(123).EXTRA_FORMATTER,l=n(103).canPlay,f=t.SamplesLoader=function(){function e(t,n){a(this,e),this._assets=t,this._master=n}return o(e,{loadFiles:{value:function(e,t,n){var r=this,i=u.fixed(e.length,t),o=u.fixed(e.length,n),a=function(e){return r._loadSample(e,i,o)};return n&&(n.formatter=c),Promise.map(e,a).then(function(e){return s(e).filter().object().value()})}},_loadSample:{value:function(e,t,n){var r=this;return this._getFile(e).then(function(i){return i.read().tap(function(){return t(e)}).then(function(e){return r._decode(e)}).tap(function(){return n(e)}).then(function(t){return[e,t]})["catch"](function(t){return console.error("Unable to decode: "+e,t),null})},function(){return null})}},_decode:{value:function(e){return this._master.sample(e)}},_getFile:{value:function(e){var t=this;return Promise["try"](function(){if(!l('audio/ogg; codecs="vorbis"'))throw new Error("cannot play OGG");return t._assets.file(e.replace(/\.\w+$/,".ogg"))})["catch"](function(){return t._assets.file(e.replace(/\.\w+$/,".m4a"))})["catch"](function(){return t._assets.file(e.replace(/\.\w+$/,".mp3"))})["catch"](function(){return t._assets.file(e)})}}}),e}();t["default"]=f},function(e,t,n){"use strict";function r(e){return p(e.slice(0,10)).as("text").then(function(t){if("BEMUSEPACK"!==t)throw new Error("Invalid magic number");return p(e.slice(10,14)).as("arraybuffer")}).then(function(e){var t=new Uint8Array(e),n=t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24);return n}).then(function(t){return e.slice(14+t)})}var i=function(e){return e&&e.__esModule?e:{"default":e}},o=function(e){return e&&e.__esModule?e["default"]:e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],i=e[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var c=n(120).resolve,l=o(n(359)),f=o(n(14)),h=o(n(125)),p=o(n(102)),d=o(n(377)),m=o(n(107)),v=i(n(108)),g=t.BemusePackageResources=function(){function e(t){var n=this;u(this,e);var i=l.bind(null,this);this._url=t,i("metadata",function(){return h(c(n._url,"metadata.json")).as("text").then(function(e){return JSON.parse(e)})}),i("refs",function(){return n.metadata.then(function(e){return e.refs.map(function(e){return new b(n,e)})})}),this.progress={all:new m,current:new m},this._loadPayload=v.wrapPromise(this.progress.all,d(1,function(e){return h(e).as("blob",n.progress.current).then(r)}))}return s(e,{url:{get:function(){return this._url}},file:{value:function(e){var t=this;return this.metadata.then(function(n){var r=f.find(n.files,{name:e});if(!r)throw new Error("Unable to find: "+e);return new y(t,r.ref,r.name)})}},getBlob:{value:function(e){var t=a(e,3),n=t[0],r=t[1],i=t[2];return this.refs.then(function(e){return e[n]}).then(function(e){return e.load()}).then(function(e){return e.slice(r,i)})}}}),e}(),y=function(){function e(t,n,r){u(this,e),this._resources=t,this._ref=n,this._name=r}return s(e,{read:{value:function(){return this._resources.getBlob(this._ref).then(function(e){return p(e).as("arraybuffer")})}},name:{get:function(){return this._name}}}),e}(),b=function(){function e(t,n){u(this,e),this._resources=t,this._url=c(t.url,n.path)}return s(e,{load:{value:function(){return this._promise||(this._promise=this._resources._loadPayload(this._url))}}}),e}();t["default"]=g},function(e,t,n){"use strict";function r(e){var t=l.map(Array.from(e.children("keyframe")),o),n={},r=!0,a=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var f=u.value,h=+f.t,p=f.ease||"linear";if(isNaN(h))throw new Error('Expected keyframe to have "t" attribute');for(var d in f)if("t"!==d&&"ease"!==d){var m=+f[d],v=n[d]||(n[d]=i(d));v.keyframes.push({time:h,value:m,ease:p})}}}catch(g){a=!0,s=g}finally{try{!r&&c["return"]&&c["return"]()}finally{if(a)throw s}}return{on:e.attr("on")||"",data:l.values(n)}}function i(e){return{name:e,keyframes:[]}}function o(e){return l(e.attributes).map(function(e){return[e.name.toLowerCase(),e.value]}).object().value()}var a=function(e){return e&&e.__esModule?e["default"]:e},s=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},u=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};t._compile=r,t._attrs=o,Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(14)),f=a(n(46)),h=a(n(320)),p=function(e){return Object.assign({},e,{data:h(e.data)})},d=t.Animation=function(){function e(t,n){c(this,e),this._timeKey=n||"t",this._properties=l(t).map(function(e){return l.pluck(e.data,"name")}).flatten().thru(function(e){return new Set(e)}).value(),this._animations=l.map(t,p),this._events=l.uniq(l.pluck(t,"on"))}return u(e,{prop:{value:function(e,t){var n=this;return this._properties.has(e)?function(r){var i=n._getAnimation(r);return i.hasOwnProperty(e)?i[e]:t(r)}:t}},_getAnimation:{value:function(e){var t=l(this._events).filter(function(t){return""===t||t in e}).max(function(t){return e[t]||0}),n=e[this._timeKey]-(e[t]||0),r=this._animations.filter(function(e){return e.on===t}),i=r.map(function(e){return e.data.values(n)});return Object.assign.apply(Object,[{}].concat(s(i)))}}},{compile:{value:function(t,n){var i=Array.from(n.children("animation")),o=l.map(i,function(e){return r(f(e))}),a=n.attr("t")||"t";return new e(o,a)}}}),e}();t["default"]=d},function(e,t,n){"use strict";n(364),e.exports=n(361)},function(e,t,n){"use strict";function r(e,t,n){var r=s(e);if(r!==t)throw new TypeError("Expected type of "+n+" to be "+t+", but was "+r)}function i(e){return c.isPrototypeOf(e)}function o(e,t){if(null===t||void 0===t)return!1;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],i=t[n];if(l.isMatcher(r)){if(!r.test(i))return!1}else if("object"===s(r)){if(!o(r,i))return!1}else if(!l.equal(r,i))return!1}return!0}function a(e,t){return function(n,i){r(n,"string","property");var o=1===arguments.length,a=t+'("'+n+'"';return o||(a+=", "+i),a+=")",l(function(t){return void 0!==t&&null!==t&&e(t,n)?o||l.equal(i,t[n]):!1},a)}}var s=n(443),u=n(234),c={toString:function(){return this.message}};c.or=function(e){if(!arguments.length)throw new TypeError("Matcher expected");i(e)||(e=l(e));var t=this,n=u.create(c);return n.test=function(n){return t.test(n)||e.test(n)},n.message=t.message+".or("+e.message+")",n},c.and=function(e){if(!arguments.length)throw new TypeError("Matcher expected");i(e)||(e=l(e));var t=this,n=u.create(c);return n.test=function(n){return t.test(n)&&e.test(n)},n.message=t.message+".and("+e.message+")",n};var l=function(e,t){var n=u.create(c),r=s(e);switch(r){case"object":if("function"==typeof e.test)return n.test=function(t){return e.test(t)===!0},n.message="match("+u.getName(e.test)+")",n;var i=[];for(var a in e)e.hasOwnProperty(a)&&i.push(a+": "+e[a]);n.test=function(t){return o(e,t)},n.message="match("+i.join(", ")+")";break;case"number":n.test=function(t){return e==t};break;case"string":n.test=function(t){return"string"!=typeof t?!1:-1!==t.indexOf(e)},n.message='match("'+e+'")';break;case"regexp":n.test=function(t){return"string"!=typeof t?!1:e.test(t)};break;case"function":n.test=e,t?n.message=t:n.message="match("+u.getName(e)+")";break;default:n.test=function(t){return l.equal(e,t)}}return n.message||(n.message="match("+e+")"),n};l.isMatcher=i,l.any=l(function(){return!0},"any"),l.defined=l(function(e){return null!==e&&void 0!==e},"defined"),l.truthy=l(function(e){return!!e},"truthy"),l.falsy=l(function(e){return!e},"falsy"),l.same=function(e){return l(function(t){return e===t},"same("+e+")")},l.typeOf=function(e){return r(e,"string","type"),l(function(t){return s(t)===e},'typeOf("'+e+'")')},l.instanceOf=function(e){return r(e,"function","type"),l(function(t){return t instanceof e},"instanceOf("+u.getName(e)+")")},l.has=a(function(e,t){return"object"==typeof e?t in e:void 0!==e[t]},"has"),l.hasOwn=a(function(e,t){return e.hasOwnProperty(t)},"hasOwn"),l.bool=l.typeOf("boolean"),l.number=l.typeOf("number"),l.string=l.typeOf("string"),l.object=l.typeOf("object"),l.func=l.typeOf("function"),l.array=l.typeOf("array"),l.regexp=l.typeOf("regexp"),l.date=l.typeOf("date"),l.equal=function(e,t){return e==t},e.exports=l},,function(e,t,n){"use strict";function r(){var e=void 0===arguments[0]?"":arguments[0];return s.Compiler.compile(e).chart}function i(e){var t=void 0===arguments[1]?{}:arguments[1];return u.fromBMSChart(r(e),1,t)}function o(e){var t=void 0===arguments[1]?{}:arguments[1];return new c(i(e,1,t),1,t)}var a=function(e){return e&&e.__esModule?e["default"]:e};t.chart=r,t.notechart=i,t.playerWithBMS=o,Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(117)),u=a(n(228)),c=a(n(207)),l=a(n(14)),f=l.tap;t.tap=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(100).Action,i=new r;t.selectSong=i;var o=new r;t.selectChart=o;var a=new r;t.launchGame=a;var s=new r;t.setFilterText=s},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};n(367);var i=r(n(7));e.exports=i.createClass({displayName:"result-grade",render:function(){return i.createElement("div",{className:"result-grade"},i.createElement("div",{className:"result-grade--label"},"GRADE"),i.createElement("div",{className:"result-grade--grade"},this.props.grade))}})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};n(368);var i=r(n(7)),o=r(n(109)),a=r(n(241)),s=r(n(232)),u=r(n(260)),c=r(n(261)),l=r(n(275)),f=r(n(273));e.exports=i.createClass({displayName:"result-scene",render:function(){return i.createElement(o,{className:"result-scene"},i.createElement(a,null,"Play Result"),i.createElement("div",{className:"result-scene--report"},i.createElement(l,{result:this.props.result})),i.createElement(f,{grade:this.props.result.grade}),i.createElement("div",{className:"result-scene--information"},i.createElement("div",{className:"result-scene--chart"},i.createElement(c,{chart:this.props.chart,onChartClick:this.noop})),i.createElement(u,{info:this.props.chart.info}),i.createElement("p",{style:{textAlign:"center"}},"Ranking is coming in later version..."),i.createElement("div",{className:"result-scene--exit",onClick:this.props.onExit},"Continue")),i.createElement(s,null,i.createElement(s.Spacer,null),i.createElement("a",{onClick:this.props.onExit,href:"javascript://"},"Continue")))},noop:function(){}})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};n(369);var i=r(n(7)),o=r(n(300));e.exports=i.createClass({displayName:"result-table",render:function(){var e=this.props.result;return i.createElement("div",{className:"result-table"},i.createElement("table",null,i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{value:e[1]})),i.createElement("th",null,"Meticulous")),i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{value:e[2]})),i.createElement("th",null,"Precise")),i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{value:e[3]})),i.createElement("th",null,"Good")),i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{value:e[4]})),i.createElement("th",null,"Offbeat")),i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{value:e.missed})),i.createElement("th",null,"Missed"))),i.createElement("table",null,i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{value:e.maxCombo})),i.createElement("th",null,"Max Combo")),i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{formatter:this.formatAccuracy,value:e.accuracy})),i.createElement("th",null,"Accurate"))),i.createElement("table",{className:"result-table--total"},i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{value:e.score})),i.createElement("th",null,"Total Score"))))},formatAccuracy:function(e){return(100*e).toFixed(2)+"%"}})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],i=e[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(262)),u=t.GameAudio=function(){function e(t){var n=t.game,r=t.samples,i=t.master;a(this,e),this._master=i,this._context=i.audioContext,this._players=new Map(n.players.map(function(e){return[e,new s({player:e,samples:r,master:i})]}))}return o(e,{destroy:{value:function(){this._master.destroy()}},unmute:{value:function(){this._master.unmute()}},context:{get:function(){return this._context}},update:{value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,s=this._players[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=i(a.value,2),c=u[0],l=u[1];l.update(e,t.player(c))}}catch(f){r=!0,o=f}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw o}}}}}),e}();t["default"]=u},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(74)),s=t.Clock=function(){function e(t){o(this,e),t.unmute(),this._context=t.context,this._offset=[],this._sum=0,this.update()}return i(e,{update:{value:function(){var e=a()/1e3,t=e-this._context.currentTime;for(this._offset.push(t),this._sum+=t;this._offset.length>60;)this._sum-=this._offset.shift();this.time=e-this._sum/this._offset.length}}}),e}();t["default"]=s},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(280)),s=r(n(240)),u=r(n(206)),c=r(n(277)),l=r(n(106)),f=r(n(282)),h=r(n(264)),p=r(n(281)),d=t.GameController=function(){function e(t){var n=this,r=t.game,i=t.display,f=t.audio;o(this,e),this._audioInputLatency=r.options.audioInputLatency,this._game=r,this._display=i,this._audio=f,this._clock=new c(this._audio),this._input=new u,this._timer=new a(this._clock,this._input),this._state=new s(r),this._promise=new Promise(function(e){return n._resolvePromise=e}),l.enabled&&this.enableBenchmark()}return i(e,{game:{get:function(){return this._game}},display:{get:function(){return this._display}},audio:{get:function(){return this._audio}},promise:{get:function(){return this._promise}},start:{value:function(){var e=this;this._handleEscape(),this._display.start(),this._input.use(new f),this._input.use(new p(this._game)),this._input.use(new h(this._display.context)),/Mobile.*?Safari/.test(navigator.userAgent)?!function(){var t=setInterval(function(){return e._update()},10);e._endGameLoop=function(){return clearInterval(t)}}():!function(){var t=!1,n=function(){t||(e._update(),requestAnimationFrame(n))};requestAnimationFrame(n),e._endGameLoop=function(){return t=!0}}()}},_handleEscape:{value:function(){var e=this,t=function(t){27===t.keyCode&&(t.preventDefault(),t.stopPropagation(),e._resolvePromise(e._state))};window.addEventListener("keydown",t,!0),this._promise["finally"](function(){window.removeEventListener("keydown",t,!0)}).done()}},destroy:{value:function(){this._endGameLoop(),this._audio.destroy(),this._input.destroy(),this._display.destroy()}},_update:{value:function(){this._clock.update(),this._input.update(),this._timer.update();var e=this._timer.time,t=this._audioInputLatency;this._state.update(e-t,this._input,this._timer),this._audio.update(e,this._state),this._display.update(e,this._state),this._state.finished&&this._resolvePromise&&(this._resolvePromise(this._state),this._resolvePromise=null)}},enableBenchmark:{value:function(){l.benchmark("update",this,"_update"),l.benchmark("input_update",this._input,"update"),l.benchmark("state_update",this._state,"update"),l.benchmark("audio_update",this._audio,"update"),l.benchmark("display_update",this._display,"update"),l.benchmark("display_compute",this._display,"_getData"),l.benchmark("display_push",this._display._context._instance,"push"),l.benchmark("display_render",this._display._context._renderer,"render")}}}),e}();t["default"]=d},function(e,t,n){"use strict";function r(e){return function(t){var n=function(){return!1};return a(window).on("touchstart",n),i(e.view,t),{teardown:function(){a(window).off("touchstart",n)}}}}function i(e,t){function n(){var t=Math.min(window.innerWidth/r,window.innerHeight/i);e.style.width=Math.round(r*t)+"px",e.style.height=Math.round(i*t)+"px";var n=(window.innerHeight-i*t)/2;e.style.marginTop=Math.round(n)+"px"}var r=e.width,i=e.height;e.style.display="block",e.style.margin="0 auto",t.appendChild(e),n(),a(window).on("resize",n)}var o=function(e){return e&&e.__esModule?e["default"]:e};e.exports=r;var a=o(n(46))},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(74)),s=t.GameTimer=function(){function e(t,n){o(this,e),this._clock=t,this._input=n,this._now=a["synchronized"](),this.startTime=null,this.readyFraction=0}return i(e,{started:{get:function(){return null!==this.startTime}},update:{value:function(){this._checkStartGame(),this.time=this._calculateTime()}},_checkStartGame:{value:function(){this.started||(this._input.get("start").value&&(this.gettingStarted=!0),this.gettingStarted&&!this._input.get("start").value&&(this.startTime=this._clock.time+this._getWait()),this.started||(this.readyFraction=1-this._getWait()))}},_getWait:{value:function(){var e=this._now()/1e3;return Math.ceil(e)-e}},_calculateTime:{value:function(){var e=null===this.startTime?0:this._clock.time-this.startTime;return 0>e&&(e=0),1>e?(Math.pow(e,6)-1)/6-1/30:e-31/30}}}),e}();t["default"]=s},function(e,t,n){"use strict";function r(e){function t(e){i[e.which]=1,e.metaKey||e.ctrlKey||(e.preventDefault(),e.stopPropagation())}function n(e){i[e.which]=0,e.metaKey||e.ctrlKey||(e.preventDefault(),e.stopPropagation())}var r=e.players[0].options.input.keyboard,i={};return o(window).on("keydown",t).on("keyup",n),{name:"GameKBPlugin",get:function(){return{p1_1:i[r[1]||83],p1_2:i[r[2]||68],p1_3:i[r[3]||70],p1_4:i[r[4]||32],p1_5:i[r[5]||74],p1_6:i[r[6]||75],p1_7:i[r[7]||76],p1_SC:i[r.SC||65]||-i[r.SC2||0],p1_speedup:i[38],p1_speeddown:i[40],start:i[13],select:i[18]}},destroy:function(){o(window).off("keydown",t).off("keyup",n)}}}var i=function(e){return e&&e.__esModule?e["default"]:e},o=i(n(46));e.exports=r},function(e,t,n){"use strict";function r(){function e(e){return i.some(function(t){return t&&t.buttons[e]&&t.buttons[e].pressed})}function t(e){for(var t=0;t<i.length;t++){var n=i[t];if(n&&Math.abs(n.axes[e])>.01)return n.axes[e]}return 0}return{name:"GamepadPlugin",get:function(){var n={p1_1:e(3),p1_2:e(6),p1_3:e(2),p1_4:e(7),p1_5:e(1),p1_6:e(4),p1_7:t(3)||t(0),p1_SC:t(4)||t(1),start:e(9),select:e(8)};return n.p1_speedup=(n.start||n.select)&&(n.p1_2||n.p1_4||n.p1_6),n.p1_speeddown=(n.start||n.select)&&(n.p1_1||n.p1_3||n.p1_5||n.p1_7),n}}}t.GamepadPlugin=r,Object.defineProperty(t,"__esModule",{value:!0});var i=[];window.addEventListener("gamepadconnected",function(e){i.push(e.gamepad)}),t["default"]=r},function(e,t,n){(function(e){"use strict";function r(t){var r=t.assets,i=t.bms;return h.start(function(o,h){o("Scintillator","Loading game engine",[],function(e){return new Promise(function(t){var r=new l(e);r.use(function(){n.e(8,function(e){return t(n(203))})})})}),o("Skin","Loading skin",["Scintillator"],function(e,t){return e.load(e.getSkinUrl(),t)}),o("SkinContext",null,["Scintillator","Skin"],function(e,t){return new e.Context(t)}),r.progress&&(r.progress.current&&o.bar("Loading package",r.progress.current),r.progress.all&&o.bar("Loading song packages",r.progress.all)),o("BMSChart","Loading "+t.bms.name,[],a.wrap(regeneratorRuntime.mark(function b(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,i.read(t);case 2:return n=c.sent,r=new e(new Uint8Array(n)),c.next=6,Promise.promisify(s.Reader.readAsync)(r);case 6:return o=c.sent,a=s.Compiler.compile(o),u=a.chart,c.abrupt("return",u);case 10:case"end":return c.stop()}},b,this)})));var g=new u,y=new u;return o.bar("Loading audio",g),o.bar("Decoding audio",y),o("SamplingMaster",null,[],function(){return new c}),o("Game",null,["BMSChart"],function(e){return new p(e,t.options)}),o("GameDisplay",null,["Game","Skin","SkinContext"],function(e,t,n){return new v({game:e,skin:t,context:n})}),o("Samples",null,["SamplingMaster","Game"],function(e,t){var n=new f(r,e);return n.loadFiles(t.samples,g,y)}),o("GameAudio",null,["Game","Samples","SamplingMaster"],function(e,t,n){return new m({game:e,samples:t,master:n})}),o("GameController",null,["Game","GameDisplay","GameAudio"],function(e,t,n){return new d({game:e,display:t,audio:n})}),h("GameController")})}var i=function(e){return e&&e.__esModule?e:{"default":e}},o=function(e){return e&&e.__esModule?e["default"]:e};t.load=r,Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(45)),s=o(n(117)),u=o(n(107)),c=o(n(103)),l=o(n(389)),f=o(n(265)),h=i(n(284)),p=o(n(238)),d=o(n(278)),m=o(n(276)),v=o(n(237))}).call(t,n(119).Buffer)},function(e,t,n){"use strict";function r(e){function t(e,t,n,i){var a=new s;t&&f.push({text:t,progress:a}),c[e]=function(){return Promise.all(n.map(r)).then(function(e){return i.apply(void 0,o(e.concat([a])))})}}function n(e,t){f.push({text:e,progress:t})}function r(e){return l[e]||(l[e]=c[e]())}function i(){return f.map(function(e){return{text:e.text,progress:e.progress.progress,progressText:e.progress.toString()}})}var c={},l={},f=[];t.bar=n;var h=e(t,r),p=new a(i()),d=u(function(){p.value=i()},16),m=!0,v=!1,g=void 0;try{for(var y,b=f[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var x=y.value;x.progress.watch(d)}}catch(w){v=!0,g=w}finally{try{!m&&b["return"]&&b["return"]()}finally{if(v)throw g}}return{tasks:p,promise:h}}var i=function(e){return e&&e.__esModule?e["default"]:e},o=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};t.start=r,Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(302)),s=i(n(107)),u=n(14).throttle},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};n(370);var i=r(n(7));e.exports=i.createClass({displayName:"loading-scene-progress-bar",render:function(){return i.createElement("div",{className:"loading-scene-progress-bar"},i.createElement("div",{className:"loading-scene-progress-bar--bar",style:{width:this.props.width}}))}})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};n(371);var i=r(n(7)),o=r(n(285));e.exports=i.createClass({displayName:"loading-scene-progress",render:function(){var e=this;return i.createElement("div",{className:"loading-scene-progress"},this.props.tasks.value.map(function(t){return e.renderItem(t)}))},renderItem:function(e){var t=e.text,n=e.progressText,r=e.progress,a=Math.round(100*r||0)+"%",s=n?" ("+n+")":"";return i.createElement("div",{className:"loading-scene-progress--item"},i.createElement(o,{width:a}),t,i.createElement("span",{className:"loading-scene-progress--extra"},s))},componentDidMount:function(){var e=this;this._unsubscribe=this.props.tasks.watch(function(){return e.forceUpdate()})},componentWillUnmount:function(){this._unsubscribe()}})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};n(372);var i=r(n(7));e.exports=i.createClass({displayName:"loading-scene-song-info",render:function(){var e=this.props.song;return i.createElement("div",{className:"loading-scene-song-info"},i.createElement("div",{className:"loading-scene-song-info--genre"},e.genre),i.createElement("div",{className:"loading-scene-song-info--title"},e.title),e.subtitles.map(function(e){return i.createElement("div",{className:"loading-scene-song-info--subtitle"},e)}),i.createElement("div",{className:"loading-scene-song-info--artist"},e.artist),e.subartists.map(function(e){return i.createElement("div",{className:"loading-scene-song-info--subartist"},e)}))}})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};n(373);var i=r(n(7)),o=r(n(109)),a=r(n(287)),s=r(n(286));e.exports=i.createClass({displayName:"loading-scene",render:function(){return i.createElement(o,{className:"loading-scene",ref:"scene"},i.createElement("div",{className:"loading-scene--info"},i.createElement(a,{song:this.props.song})),i.createElement(s,{tasks:this.props.tasks}),i.createElement("div",{className:"loading-scene--flash"}),i.createElement("div",{className:"loading-scene--cover"}))},teardown:function(){return i.findDOMNode(this.refs.scene).classList.add("is-exiting"),Promise.delay(500)}})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(125)),s=n(386).basename,u=t.URLResource=function(){function e(t){o(this,e),this._url=t}return i(e,{read:{value:function(e){return a(this._url).as("arraybuffer",e)}},name:{get:function(){return s(this._url)}}}),e}();t["default"]=u},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=r(n(204)),s=a("scintillator:compiler"),u=r(n(46)),c=r(n(296)),l=r(n(297)),f=r(n(293)),h=r(n(295)),p=r(n(298)),d=r(n(294)),m={skin:c,sprite:l,group:f,object:h,text:p,"if":d},v=function(){function e(t){o(this,e),Object.assign(this,t),this._defs=new Map}return i(e,{compile:{value:function(t){var n=t[0].nodeName;s("compiling",t[0]);var r=e.getNodeClass(n);if(!r)throw new Error("Invalid node name: "+n);return r.compile(this,t)}},compileChildren:{value:function(t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=Array.from(t.children())[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value,l=c.nodeName;if("defs"===l)this.compileDefs(u(c));else if("use"===l)n.push(this.getDef(c.getAttribute("def")));else{var f=e.getNodeClass(l);f&&n.push(this.compile(u(c)))}}}catch(h){i=!0,o=h}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}},compileDefs:{value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Array.from(e.children())[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,s=a.getAttribute("id");if(!s)throw new Error("A def should have an id: "+a.nodeName);this._defs.set(s,this.compile(u(a)))}}catch(c){n=!0,r=c}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw r}}}},getDef:{value:function(e){var t=this._defs.get(e);if(!t)throw new Error("Cannot find def: "+e);return t}}},{getNodeClass:{value:function(e){return m[e]}}}),e}();e.exports=v},function(e,t,n){"use strict";function r(e,t){return navigator.userAgent.match(/Gecko\//)?new s.autoDetectRenderer(e,t):new s.CanvasRenderer(e,t)}var i=function(e){return e&&e.__esModule?e["default"]:e},o=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(27)),u=t.Context=function(){function e(t){a(this,e),this.refs={},this._skin=t,this._instance=t.instantiate(this),this._renderer=r(t.width,t.height),this.stage=this._instance.object,this.view=this._renderer.view,this._setupInteractivity()}return o(e,{render:{value:function(e){this._instance.push(e),this._renderer.render(this.stage)}},destroy:{value:function(){this._instance.destroy(),this._instance=null,this._teardownInteractivity()}},input:{get:function(){return this._input.get()}},ref:{value:function(e,t){var n=this.refs[e]||(this.refs[e]=new Set);n.add(t)}},unref:{value:function(e,t){var n=this.refs[e];n&&n["delete"](t)}},_setupInteractivity:{value:function(){function e(e,t,n){return{x:(t.clientX-n.left)/n.width*c,y:(t.clientY-n.top)/n.height*l,id:e}}var t=this,n=null,r=[],i=function(e){
n=e},o=function(e){n=n&&e},a=function(){n=null},s=function(e){r=[].slice.call(e.touches)},u=this.view,c=this._skin.width,l=this._skin.height;u.addEventListener("mousedown",i,!1),u.addEventListener("mousemove",o,!1),u.addEventListener("mouseup",a,!1),u.addEventListener("touchstart",s,!1),u.addEventListener("touchmove",s,!1),u.addEventListener("touchend",s,!1),this._teardownInteractivity=function(){u.removeEventListener("mousedown",i,!1),u.removeEventListener("mousemove",o,!1),u.removeEventListener("mouseup",a,!1),u.removeEventListener("touchstart",s,!1),u.removeEventListener("touchmove",s,!1),u.removeEventListener("touchend",s,!1)},this._input={get:function(){var i=[],o=t.view.getBoundingClientRect();n&&i.push(e("mouse",n,o));for(var a=0;a<r.length;a++){var s=r[a];i.push(e("touch"+s.identifier,s,o))}return i}}}}}),e}();t["default"]=u},function(e,t,n){"use strict";function r(e,t){return h(regeneratorRuntime.mark(function n(){var r,a,s,u,h,p,g,y,b,x,w,_,E,T,C,S,A,k,O,M,N,j,R;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return c("load XML from %s",e),n.next=3,i(e);case 3:for(r=n.sent,a=new m,s=new Set,u=!0,h=!1,p=void 0,n.prev=9,g=Array.from(r.find("[image]"))[Symbol.iterator]();!(u=(y=g.next()).done);u=!0)b=y.value,s.add(l(b).attr("image"));n.next=17;break;case 13:n.prev=13,n.t6=n["catch"](9),h=!0,p=n.t6;case 17:n.prev=17,n.prev=18,!u&&g["return"]&&g["return"]();case 20:if(n.prev=20,!h){n.next=23;break}throw p;case 23:return n.finish(20);case 24:return n.finish(17);case 25:for(x=!0,w=!1,_=void 0,n.prev=28,E=Array.from(r.find("[font-src]"))[Symbol.iterator]();!(x=(T=E.next()).done);x=!0)b=T.value,s.add(l(b).attr("font-src"));n.next=36;break;case 32:n.prev=32,n.t7=n["catch"](28),w=!0,_=n.t7;case 36:n.prev=36,n.prev=37,!x&&E["return"]&&E["return"]();case 39:if(n.prev=39,!w){n.next=42;break}throw _;case 42:return n.finish(39);case 43:return n.finish(36);case 44:for(C=!0,S=!1,A=void 0,n.prev=47,k=s[Symbol.iterator]();!(C=(O=k.next()).done);C=!0)M=O.value,N=f.resolve(e,M),a.add(M,N);n.next=55;break;case 51:n.prev=51,n.t8=n["catch"](47),S=!0,A=n.t8;case 55:n.prev=55,n.prev=56,!C&&k["return"]&&k["return"]();case 58:if(n.prev=58,!S){n.next=61;break}throw A;case 61:return n.finish(58);case 62:return n.finish(55);case 63:return j=d.fixed(1+s.size,t),j(),n.next=67,o(a,j);case 67:return c("compiling"),R=new v({resources:a}).compile(r),n.abrupt("return",R);case 70:case"end":return n.stop()}},n,this,[[9,13,17,25],[18,,20,24],[28,32,36,44],[37,,39,43],[47,51,55,63],[56,,58,62]])}))}function i(e){return Promise.resolve(l.ajax({url:e,dataType:"xml"})).then(function(e){return l(e.documentElement)})}function o(e,t){return c("loading resources"),new Promise(function(n){if(0===e.urls.length)return n();var r=new p.AssetLoader(e.urls);r.on("onComplete",function(){c("resources finished loading"),n()}),t&&r.on("onProgress",t),r.load()})}var a=function(e){return e&&e.__esModule?e:{"default":e}},s=function(e){return e&&e.__esModule?e["default"]:e};t.load=r,Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(204)),c=u("scintillator:loader"),l=s(n(46)),f=s(n(120)),h=s(n(45)),p=s(n(27)),d=a(n(108)),m=s(n(299)),v=s(n(290))},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},o=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(27)),u=r(n(48)),c=r(n(49)),l=r(n(124)),f=n(231).parseFrame,h=t.Mask=function(){function e(t){a(this,e),this._frame=t}return o(e,{instantiate:{value:function(e,t){var n=new s.Graphics;return n.beginFill(),n.drawShape(this._frame),n.endFill(),t.object.mask=n,new c({context:e,object:n,parent:t.object})}}}),e}(),p=t.GroupNode=function(e){function t(){a(this,t),null!=e&&e.apply(this,arguments)}return i(t,e),o(t,{compile:{value:function(e,t){this.children=e.compileChildren(t),this.display=l.compile(e,t);var n=f(t.attr("mask")||"");n&&(this.mask=new h(n))}},instantiate:{value:function(e,t){var n=new s.DisplayObjectContainer,r=[this.display];return this.mask&&r.push(this.mask),new c({context:e,object:n,parent:t,concerns:r,children:this.children})}}}),t}(u);t["default"]=p},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(27)),u=r(n(48)),c=r(n(49)),l=r(n(101)),f=t.IfNode=function(e){function t(){a(this,t),null!=e&&e.apply(this,arguments)}return o(t,e),i(t,{compile:{value:function(e,t){var n=e.compileChildren(t);if(1!==n.length)throw new Error("Expected exactly 1 children, "+n.length+" found");this.child=n[0],this.key=new l(t.attr("key")),this.value=String(t.attr("value"))}},instantiate:{value:function(e,t){var n=new s.DisplayObjectContainer,r=this.key,i=this.value,o=this.child,a=null;return new c({context:e,parent:t,object:n,onData:function(t){String(r(t))===i?(null===a&&(a=o.instantiate(e,n)),a.push(t)):null!==a&&(a.destroy(),a=null)}})}}}),t}(u);t["default"]=f},function(e,t,n){"use strict";function r(e,t,n){return{instantiate:function(r,i){function o(){var e;console.log("init i"+n);for(var o=0;n>o;o++)e=t.instantiate(r,i.object),e.detach(),c.push(e)}function a(e){var t,n,r,i=new Set(u.keys());e||(e=[]);for(var o=0;o<e.length;o++)n=e[o],t=n.key,u.has(t)?r=u.get(t):(r=s(),u.set(t,r)),r.push(n),i["delete"](t);var a=!0,l=!1,f=void 0;try{for(var h,p=i[Symbol.iterator]();!(a=(h=p.next()).done);a=!0)t=h.value,r=u.get(t),r.detach(),u["delete"](t),c.push(r)}catch(d){l=!0,f=d}finally{try{!a&&p["return"]&&p["return"]()}finally{if(l)throw f}}}function s(){var e=c.pop();return e?e.attachTo(i.object):e=t.instantiate(r,i.object),e}var u=new Map,c=[];return o(),new l({context:r,onData:function(t){a(e(t))}})}}}var i=function(e){return e&&e.__esModule?e["default"]:e},o=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(27)),c=i(n(48)),l=i(n(49)),f=i(n(101)),h=t.ObjectNode=function(e){function t(){s(this,t),null!=e&&e.apply(this,arguments)}return a(t,e),o(t,{compile:{value:function(e,t){if(this.children=e.compileChildren(t),1!==this.children.length)throw new Error("Expected exactly 1 children, "+this.children.length+" given");this.pool=+t.attr("pool")||1,this.key=new f(t.attr("key"))}},instantiate:{value:function(e,t){var n=new u.SpriteBatch,i=new r(this.key,this.children[0],this.pool);return new l({context:e,parent:t,object:n,concerns:[i]})}}}),t}(c);t["default"]=h},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(27)),u=r(n(48)),c=r(n(49)),l=t.SkinRootNode=function(e){function t(){a(this,t),null!=e&&e.apply(this,arguments)}return o(t,e),i(t,{compile:{value:function(e,t){this.children=e.compileChildren(t),this.width=+t.attr("width"),this.height=+t.attr("height")}},instantiate:{value:function(e){var t=new s.Stage(591879);return new c({context:e,object:t,children:this.children})}}}),t}(u);t["default"]=l},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(27)),u=r(n(48)),c=r(n(49)),l=n(231).parseFrame,f=r(n(124)),h=t.SpriteNode=function(e){function t(){a(this,t),null!=e&&e.apply(this,arguments)}return o(t,e),i(t,{compile:{value:function(e,t){this.url=e.resources.get(t.attr("image")),this.display=f.compile(e,t),this.frame=l(t.attr("frame")||"")}},instantiate:{value:function(e,t){var n=new s.Sprite(this.getTexture());return new c({context:e,object:n,parent:t,concerns:[this.display]})}},getTexture:{value:function(){if(this._texture)return this._texture;var e=s.scaleModes.NEAREST,t=s.BaseTexture.fromImage(this.url,void 0,e),n=new s.Texture(t,this.frame);return this._texture=n,n}}}),t}(u);t["default"]=h},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(27)),u=r(n(48)),c=r(n(49)),l=r(n(124)),f=r(n(101)),h=t.TextNode=function(e){function t(){a(this,t),null!=e&&e.apply(this,arguments)}return o(t,e),i(t,{compile:{value:function(e,t){this.font=t.attr("font"),this.text=t.attr("text"),this.data=new f(t.attr("data")||"0"),this.display=l.compile(e,t),this.ttf=!t.attr("font-src"),this.fill=t.attr("fill"),this.align="left"===t.attr("align")?0:"right"===t.attr("align")?1:.5}},instantiate:{value:function(e,t){var n=this,r=void 0;r=this.ttf?new s.Text(this.text,{font:this.font,fill:this.fill}):new s.BitmapText(this.text,{font:this.font});var i=new s.DisplayObjectContainer;return i.addChild(r),new c({context:e,parent:t,object:i,concerns:[this.display],bindings:[[this.data,function(e){r.setText(n.text.replace("%s",e)),r.updateText(),r.x=r.width*-n.align}]]})}}}),t}(u);t["default"]=h},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(14)),s=t.Resources=function(){function e(){o(this,e),this._map={}}return i(e,{add:{value:function(e,t){this._map[e]=t}},get:{value:function(e){if(!(e in this._map))throw new Error("Not registered: "+e);return this._map[e]}},urls:{get:function(){return a.values(this._map)}}}),e}();t["default"]=s},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};n(374);var i=r(n(7)),o=r(n(74));e.exports=i.createClass({displayName:"running-number",render:function(){return i.createElement("span",{className:"running-number"})},componentDidMount:function(){var e=this,t=this.getDOMNode(),n=document.createTextNode("");t.appendChild(n),n.nodeValue=this._getText(0);var r=o(),i=setInterval(function(){var t=Math.min(1,Math.max(0,(o()-r)/2e3));n.nodeValue=e._getText(e.props.value*t),1===t&&clearInterval(i)},16)},_getText:function(e){return this.props.formatter?this.props.formatter(e):e.toFixed(0)}})},,,function(e,t,n){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40}},function(e,t,n){/*!
	 * Chai - flag utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));return 3!==arguments.length?r[t]:void(r[t]=n)}},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,"/*!\n *  Font Awesome 4.3.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */@font-face{font-family:'FontAwesome';src:url("+n(379)+");src:url("+n(378)+"?#iefix&v=4.3.0) format('embedded-opentype'),url("+n(382)+") format('woff2'),url("+n(383)+") format('woff'),url("+n(381)+") format('truetype'),url("+n(380)+'#fontawesomeregular) format(\'svg\');font-weight:400;font-style:normal}.fa{display:inline-block;font:14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-transform:translate(0,0);transform:translate(0,0)}.fa-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.28571429em;text-align:center}.fa-ul{padding-left:0;margin-left:2.14285714em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.14285714em;width:2.14285714em;top:.14285714em;text-align:center}.fa-li.fa-lg{left:-1.85714286em}.fa-border{padding:.2em .25em .15em;border:solid .08em #eee;border-radius:.1em}.pull-right{float:right}.pull-left{float:left}.fa.pull-left{margin-right:.3em}.fa.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);-webkit-transform:scale(-1,1);transform:scale(-1,1)}.fa-flip-vertical{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);-webkit-transform:scale(1,-1);transform:scale(1,-1)}:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-flip-horizontal,:root .fa-flip-vertical{-webkit-filter:none;filter:none}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-glass:before{content:"\\f000"}.fa-music:before{content:"\\f001"}.fa-search:before{content:"\\f002"}.fa-envelope-o:before{content:"\\f003"}.fa-heart:before{content:"\\f004"}.fa-star:before{content:"\\f005"}.fa-star-o:before{content:"\\f006"}.fa-user:before{content:"\\f007"}.fa-film:before{content:"\\f008"}.fa-th-large:before{content:"\\f009"}.fa-th:before{content:"\\f00a"}.fa-th-list:before{content:"\\f00b"}.fa-check:before{content:"\\f00c"}.fa-remove:before,.fa-close:before,.fa-times:before{content:"\\f00d"}.fa-search-plus:before{content:"\\f00e"}.fa-search-minus:before{content:"\\f010"}.fa-power-off:before{content:"\\f011"}.fa-signal:before{content:"\\f012"}.fa-gear:before,.fa-cog:before{content:"\\f013"}.fa-trash-o:before{content:"\\f014"}.fa-home:before{content:"\\f015"}.fa-file-o:before{content:"\\f016"}.fa-clock-o:before{content:"\\f017"}.fa-road:before{content:"\\f018"}.fa-download:before{content:"\\f019"}.fa-arrow-circle-o-down:before{content:"\\f01a"}.fa-arrow-circle-o-up:before{content:"\\f01b"}.fa-inbox:before{content:"\\f01c"}.fa-play-circle-o:before{content:"\\f01d"}.fa-rotate-right:before,.fa-repeat:before{content:"\\f01e"}.fa-refresh:before{content:"\\f021"}.fa-list-alt:before{content:"\\f022"}.fa-lock:before{content:"\\f023"}.fa-flag:before{content:"\\f024"}.fa-headphones:before{content:"\\f025"}.fa-volume-off:before{content:"\\f026"}.fa-volume-down:before{content:"\\f027"}.fa-volume-up:before{content:"\\f028"}.fa-qrcode:before{content:"\\f029"}.fa-barcode:before{content:"\\f02a"}.fa-tag:before{content:"\\f02b"}.fa-tags:before{content:"\\f02c"}.fa-book:before{content:"\\f02d"}.fa-bookmark:before{content:"\\f02e"}.fa-print:before{content:"\\f02f"}.fa-camera:before{content:"\\f030"}.fa-font:before{content:"\\f031"}.fa-bold:before{content:"\\f032"}.fa-italic:before{content:"\\f033"}.fa-text-height:before{content:"\\f034"}.fa-text-width:before{content:"\\f035"}.fa-align-left:before{content:"\\f036"}.fa-align-center:before{content:"\\f037"}.fa-align-right:before{content:"\\f038"}.fa-align-justify:before{content:"\\f039"}.fa-list:before{content:"\\f03a"}.fa-dedent:before,.fa-outdent:before{content:"\\f03b"}.fa-indent:before{content:"\\f03c"}.fa-video-camera:before{content:"\\f03d"}.fa-photo:before,.fa-image:before,.fa-picture-o:before{content:"\\f03e"}.fa-pencil:before{content:"\\f040"}.fa-map-marker:before{content:"\\f041"}.fa-adjust:before{content:"\\f042"}.fa-tint:before{content:"\\f043"}.fa-edit:before,.fa-pencil-square-o:before{content:"\\f044"}.fa-share-square-o:before{content:"\\f045"}.fa-check-square-o:before{content:"\\f046"}.fa-arrows:before{content:"\\f047"}.fa-step-backward:before{content:"\\f048"}.fa-fast-backward:before{content:"\\f049"}.fa-backward:before{content:"\\f04a"}.fa-play:before{content:"\\f04b"}.fa-pause:before{content:"\\f04c"}.fa-stop:before{content:"\\f04d"}.fa-forward:before{content:"\\f04e"}.fa-fast-forward:before{content:"\\f050"}.fa-step-forward:before{content:"\\f051"}.fa-eject:before{content:"\\f052"}.fa-chevron-left:before{content:"\\f053"}.fa-chevron-right:before{content:"\\f054"}.fa-plus-circle:before{content:"\\f055"}.fa-minus-circle:before{content:"\\f056"}.fa-times-circle:before{content:"\\f057"}.fa-check-circle:before{content:"\\f058"}.fa-question-circle:before{content:"\\f059"}.fa-info-circle:before{content:"\\f05a"}.fa-crosshairs:before{content:"\\f05b"}.fa-times-circle-o:before{content:"\\f05c"}.fa-check-circle-o:before{content:"\\f05d"}.fa-ban:before{content:"\\f05e"}.fa-arrow-left:before{content:"\\f060"}.fa-arrow-right:before{content:"\\f061"}.fa-arrow-up:before{content:"\\f062"}.fa-arrow-down:before{content:"\\f063"}.fa-mail-forward:before,.fa-share:before{content:"\\f064"}.fa-expand:before{content:"\\f065"}.fa-compress:before{content:"\\f066"}.fa-plus:before{content:"\\f067"}.fa-minus:before{content:"\\f068"}.fa-asterisk:before{content:"\\f069"}.fa-exclamation-circle:before{content:"\\f06a"}.fa-gift:before{content:"\\f06b"}.fa-leaf:before{content:"\\f06c"}.fa-fire:before{content:"\\f06d"}.fa-eye:before{content:"\\f06e"}.fa-eye-slash:before{content:"\\f070"}.fa-warning:before,.fa-exclamation-triangle:before{content:"\\f071"}.fa-plane:before{content:"\\f072"}.fa-calendar:before{content:"\\f073"}.fa-random:before{content:"\\f074"}.fa-comment:before{content:"\\f075"}.fa-magnet:before{content:"\\f076"}.fa-chevron-up:before{content:"\\f077"}.fa-chevron-down:before{content:"\\f078"}.fa-retweet:before{content:"\\f079"}.fa-shopping-cart:before{content:"\\f07a"}.fa-folder:before{content:"\\f07b"}.fa-folder-open:before{content:"\\f07c"}.fa-arrows-v:before{content:"\\f07d"}.fa-arrows-h:before{content:"\\f07e"}.fa-bar-chart-o:before,.fa-bar-chart:before{content:"\\f080"}.fa-twitter-square:before{content:"\\f081"}.fa-facebook-square:before{content:"\\f082"}.fa-camera-retro:before{content:"\\f083"}.fa-key:before{content:"\\f084"}.fa-gears:before,.fa-cogs:before{content:"\\f085"}.fa-comments:before{content:"\\f086"}.fa-thumbs-o-up:before{content:"\\f087"}.fa-thumbs-o-down:before{content:"\\f088"}.fa-star-half:before{content:"\\f089"}.fa-heart-o:before{content:"\\f08a"}.fa-sign-out:before{content:"\\f08b"}.fa-linkedin-square:before{content:"\\f08c"}.fa-thumb-tack:before{content:"\\f08d"}.fa-external-link:before{content:"\\f08e"}.fa-sign-in:before{content:"\\f090"}.fa-trophy:before{content:"\\f091"}.fa-github-square:before{content:"\\f092"}.fa-upload:before{content:"\\f093"}.fa-lemon-o:before{content:"\\f094"}.fa-phone:before{content:"\\f095"}.fa-square-o:before{content:"\\f096"}.fa-bookmark-o:before{content:"\\f097"}.fa-phone-square:before{content:"\\f098"}.fa-twitter:before{content:"\\f099"}.fa-facebook-f:before,.fa-facebook:before{content:"\\f09a"}.fa-github:before{content:"\\f09b"}.fa-unlock:before{content:"\\f09c"}.fa-credit-card:before{content:"\\f09d"}.fa-rss:before{content:"\\f09e"}.fa-hdd-o:before{content:"\\f0a0"}.fa-bullhorn:before{content:"\\f0a1"}.fa-bell:before{content:"\\f0f3"}.fa-certificate:before{content:"\\f0a3"}.fa-hand-o-right:before{content:"\\f0a4"}.fa-hand-o-left:before{content:"\\f0a5"}.fa-hand-o-up:before{content:"\\f0a6"}.fa-hand-o-down:before{content:"\\f0a7"}.fa-arrow-circle-left:before{content:"\\f0a8"}.fa-arrow-circle-right:before{content:"\\f0a9"}.fa-arrow-circle-up:before{content:"\\f0aa"}.fa-arrow-circle-down:before{content:"\\f0ab"}.fa-globe:before{content:"\\f0ac"}.fa-wrench:before{content:"\\f0ad"}.fa-tasks:before{content:"\\f0ae"}.fa-filter:before{content:"\\f0b0"}.fa-briefcase:before{content:"\\f0b1"}.fa-arrows-alt:before{content:"\\f0b2"}.fa-group:before,.fa-users:before{content:"\\f0c0"}.fa-chain:before,.fa-link:before{content:"\\f0c1"}.fa-cloud:before{content:"\\f0c2"}.fa-flask:before{content:"\\f0c3"}.fa-cut:before,.fa-scissors:before{content:"\\f0c4"}.fa-copy:before,.fa-files-o:before{content:"\\f0c5"}.fa-paperclip:before{content:"\\f0c6"}.fa-save:before,.fa-floppy-o:before{content:"\\f0c7"}.fa-square:before{content:"\\f0c8"}.fa-navicon:before,.fa-reorder:before,.fa-bars:before{content:"\\f0c9"}.fa-list-ul:before{content:"\\f0ca"}.fa-list-ol:before{content:"\\f0cb"}.fa-strikethrough:before{content:"\\f0cc"}.fa-underline:before{content:"\\f0cd"}.fa-table:before{content:"\\f0ce"}.fa-magic:before{content:"\\f0d0"}.fa-truck:before{content:"\\f0d1"}.fa-pinterest:before{content:"\\f0d2"}.fa-pinterest-square:before{content:"\\f0d3"}.fa-google-plus-square:before{content:"\\f0d4"}.fa-google-plus:before{content:"\\f0d5"}.fa-money:before{content:"\\f0d6"}.fa-caret-down:before{content:"\\f0d7"}.fa-caret-up:before{content:"\\f0d8"}.fa-caret-left:before{content:"\\f0d9"}.fa-caret-right:before{content:"\\f0da"}.fa-columns:before{content:"\\f0db"}.fa-unsorted:before,.fa-sort:before{content:"\\f0dc"}.fa-sort-down:before,.fa-sort-desc:before{content:"\\f0dd"}.fa-sort-up:before,.fa-sort-asc:before{content:"\\f0de"}.fa-envelope:before{content:"\\f0e0"}.fa-linkedin:before{content:"\\f0e1"}.fa-rotate-left:before,.fa-undo:before{content:"\\f0e2"}.fa-legal:before,.fa-gavel:before{content:"\\f0e3"}.fa-dashboard:before,.fa-tachometer:before{content:"\\f0e4"}.fa-comment-o:before{content:"\\f0e5"}.fa-comments-o:before{content:"\\f0e6"}.fa-flash:before,.fa-bolt:before{content:"\\f0e7"}.fa-sitemap:before{content:"\\f0e8"}.fa-umbrella:before{content:"\\f0e9"}.fa-paste:before,.fa-clipboard:before{content:"\\f0ea"}.fa-lightbulb-o:before{content:"\\f0eb"}.fa-exchange:before{content:"\\f0ec"}.fa-cloud-download:before{content:"\\f0ed"}.fa-cloud-upload:before{content:"\\f0ee"}.fa-user-md:before{content:"\\f0f0"}.fa-stethoscope:before{content:"\\f0f1"}.fa-suitcase:before{content:"\\f0f2"}.fa-bell-o:before{content:"\\f0a2"}.fa-coffee:before{content:"\\f0f4"}.fa-cutlery:before{content:"\\f0f5"}.fa-file-text-o:before{content:"\\f0f6"}.fa-building-o:before{content:"\\f0f7"}.fa-hospital-o:before{content:"\\f0f8"}.fa-ambulance:before{content:"\\f0f9"}.fa-medkit:before{content:"\\f0fa"}.fa-fighter-jet:before{content:"\\f0fb"}.fa-beer:before{content:"\\f0fc"}.fa-h-square:before{content:"\\f0fd"}.fa-plus-square:before{content:"\\f0fe"}.fa-angle-double-left:before{content:"\\f100"}.fa-angle-double-right:before{content:"\\f101"}.fa-angle-double-up:before{content:"\\f102"}.fa-angle-double-down:before{content:"\\f103"}.fa-angle-left:before{content:"\\f104"}.fa-angle-right:before{content:"\\f105"}.fa-angle-up:before{content:"\\f106"}.fa-angle-down:before{content:"\\f107"}.fa-desktop:before{content:"\\f108"}.fa-laptop:before{content:"\\f109"}.fa-tablet:before{content:"\\f10a"}.fa-mobile-phone:before,.fa-mobile:before{content:"\\f10b"}.fa-circle-o:before{content:"\\f10c"}.fa-quote-left:before{content:"\\f10d"}.fa-quote-right:before{content:"\\f10e"}.fa-spinner:before{content:"\\f110"}.fa-circle:before{content:"\\f111"}.fa-mail-reply:before,.fa-reply:before{content:"\\f112"}.fa-github-alt:before{content:"\\f113"}.fa-folder-o:before{content:"\\f114"}.fa-folder-open-o:before{content:"\\f115"}.fa-smile-o:before{content:"\\f118"}.fa-frown-o:before{content:"\\f119"}.fa-meh-o:before{content:"\\f11a"}.fa-gamepad:before{content:"\\f11b"}.fa-keyboard-o:before{content:"\\f11c"}.fa-flag-o:before{content:"\\f11d"}.fa-flag-checkered:before{content:"\\f11e"}.fa-terminal:before{content:"\\f120"}.fa-code:before{content:"\\f121"}.fa-mail-reply-all:before,.fa-reply-all:before{content:"\\f122"}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before{content:"\\f123"}.fa-location-arrow:before{content:"\\f124"}.fa-crop:before{content:"\\f125"}.fa-code-fork:before{content:"\\f126"}.fa-unlink:before,.fa-chain-broken:before{content:"\\f127"}.fa-question:before{content:"\\f128"}.fa-info:before{content:"\\f129"}.fa-exclamation:before{content:"\\f12a"}.fa-superscript:before{content:"\\f12b"}.fa-subscript:before{content:"\\f12c"}.fa-eraser:before{content:"\\f12d"}.fa-puzzle-piece:before{content:"\\f12e"}.fa-microphone:before{content:"\\f130"}.fa-microphone-slash:before{content:"\\f131"}.fa-shield:before{content:"\\f132"}.fa-calendar-o:before{content:"\\f133"}.fa-fire-extinguisher:before{content:"\\f134"}.fa-rocket:before{content:"\\f135"}.fa-maxcdn:before{content:"\\f136"}.fa-chevron-circle-left:before{content:"\\f137"}.fa-chevron-circle-right:before{content:"\\f138"}.fa-chevron-circle-up:before{content:"\\f139"}.fa-chevron-circle-down:before{content:"\\f13a"}.fa-html5:before{content:"\\f13b"}.fa-css3:before{content:"\\f13c"}.fa-anchor:before{content:"\\f13d"}.fa-unlock-alt:before{content:"\\f13e"}.fa-bullseye:before{content:"\\f140"}.fa-ellipsis-h:before{content:"\\f141"}.fa-ellipsis-v:before{content:"\\f142"}.fa-rss-square:before{content:"\\f143"}.fa-play-circle:before{content:"\\f144"}.fa-ticket:before{content:"\\f145"}.fa-minus-square:before{content:"\\f146"}.fa-minus-square-o:before{content:"\\f147"}.fa-level-up:before{content:"\\f148"}.fa-level-down:before{content:"\\f149"}.fa-check-square:before{content:"\\f14a"}.fa-pencil-square:before{content:"\\f14b"}.fa-external-link-square:before{content:"\\f14c"}.fa-share-square:before{content:"\\f14d"}.fa-compass:before{content:"\\f14e"}.fa-toggle-down:before,.fa-caret-square-o-down:before{content:"\\f150"}.fa-toggle-up:before,.fa-caret-square-o-up:before{content:"\\f151"}.fa-toggle-right:before,.fa-caret-square-o-right:before{content:"\\f152"}.fa-euro:before,.fa-eur:before{content:"\\f153"}.fa-gbp:before{content:"\\f154"}.fa-dollar:before,.fa-usd:before{content:"\\f155"}.fa-rupee:before,.fa-inr:before{content:"\\f156"}.fa-cny:before,.fa-rmb:before,.fa-yen:before,.fa-jpy:before{content:"\\f157"}.fa-ruble:before,.fa-rouble:before,.fa-rub:before{content:"\\f158"}.fa-won:before,.fa-krw:before{content:"\\f159"}.fa-bitcoin:before,.fa-btc:before{content:"\\f15a"}.fa-file:before{content:"\\f15b"}.fa-file-text:before{content:"\\f15c"}.fa-sort-alpha-asc:before{content:"\\f15d"}.fa-sort-alpha-desc:before{content:"\\f15e"}.fa-sort-amount-asc:before{content:"\\f160"}.fa-sort-amount-desc:before{content:"\\f161"}.fa-sort-numeric-asc:before{content:"\\f162"}.fa-sort-numeric-desc:before{content:"\\f163"}.fa-thumbs-up:before{content:"\\f164"}.fa-thumbs-down:before{content:"\\f165"}.fa-youtube-square:before{content:"\\f166"}.fa-youtube:before{content:"\\f167"}.fa-xing:before{content:"\\f168"}.fa-xing-square:before{content:"\\f169"}.fa-youtube-play:before{content:"\\f16a"}.fa-dropbox:before{content:"\\f16b"}.fa-stack-overflow:before{content:"\\f16c"}.fa-instagram:before{content:"\\f16d"}.fa-flickr:before{content:"\\f16e"}.fa-adn:before{content:"\\f170"}.fa-bitbucket:before{content:"\\f171"}.fa-bitbucket-square:before{content:"\\f172"}.fa-tumblr:before{content:"\\f173"}.fa-tumblr-square:before{content:"\\f174"}.fa-long-arrow-down:before{content:"\\f175"}.fa-long-arrow-up:before{content:"\\f176"}.fa-long-arrow-left:before{content:"\\f177"}.fa-long-arrow-right:before{content:"\\f178"}.fa-apple:before{content:"\\f179"}.fa-windows:before{content:"\\f17a"}.fa-android:before{content:"\\f17b"}.fa-linux:before{content:"\\f17c"}.fa-dribbble:before{content:"\\f17d"}.fa-skype:before{content:"\\f17e"}.fa-foursquare:before{content:"\\f180"}.fa-trello:before{content:"\\f181"}.fa-female:before{content:"\\f182"}.fa-male:before{content:"\\f183"}.fa-gittip:before,.fa-gratipay:before{content:"\\f184"}.fa-sun-o:before{content:"\\f185"}.fa-moon-o:before{content:"\\f186"}.fa-archive:before{content:"\\f187"}.fa-bug:before{content:"\\f188"}.fa-vk:before{content:"\\f189"}.fa-weibo:before{content:"\\f18a"}.fa-renren:before{content:"\\f18b"}.fa-pagelines:before{content:"\\f18c"}.fa-stack-exchange:before{content:"\\f18d"}.fa-arrow-circle-o-right:before{content:"\\f18e"}.fa-arrow-circle-o-left:before{content:"\\f190"}.fa-toggle-left:before,.fa-caret-square-o-left:before{content:"\\f191"}.fa-dot-circle-o:before{content:"\\f192"}.fa-wheelchair:before{content:"\\f193"}.fa-vimeo-square:before{content:"\\f194"}.fa-turkish-lira:before,.fa-try:before{content:"\\f195"}.fa-plus-square-o:before{content:"\\f196"}.fa-space-shuttle:before{content:"\\f197"}.fa-slack:before{content:"\\f198"}.fa-envelope-square:before{content:"\\f199"}.fa-wordpress:before{content:"\\f19a"}.fa-openid:before{content:"\\f19b"}.fa-institution:before,.fa-bank:before,.fa-university:before{content:"\\f19c"}.fa-mortar-board:before,.fa-graduation-cap:before{content:"\\f19d"}.fa-yahoo:before{content:"\\f19e"}.fa-google:before{content:"\\f1a0"}.fa-reddit:before{content:"\\f1a1"}.fa-reddit-square:before{content:"\\f1a2"}.fa-stumbleupon-circle:before{content:"\\f1a3"}.fa-stumbleupon:before{content:"\\f1a4"}.fa-delicious:before{content:"\\f1a5"}.fa-digg:before{content:"\\f1a6"}.fa-pied-piper:before{content:"\\f1a7"}.fa-pied-piper-alt:before{content:"\\f1a8"}.fa-drupal:before{content:"\\f1a9"}.fa-joomla:before{content:"\\f1aa"}.fa-language:before{content:"\\f1ab"}.fa-fax:before{content:"\\f1ac"}.fa-building:before{content:"\\f1ad"}.fa-child:before{content:"\\f1ae"}.fa-paw:before{content:"\\f1b0"}.fa-spoon:before{content:"\\f1b1"}.fa-cube:before{content:"\\f1b2"}.fa-cubes:before{content:"\\f1b3"}.fa-behance:before{content:"\\f1b4"}.fa-behance-square:before{content:"\\f1b5"}.fa-steam:before{content:"\\f1b6"}.fa-steam-square:before{content:"\\f1b7"}.fa-recycle:before{content:"\\f1b8"}.fa-automobile:before,.fa-car:before{content:"\\f1b9"}.fa-cab:before,.fa-taxi:before{content:"\\f1ba"}.fa-tree:before{content:"\\f1bb"}.fa-spotify:before{content:"\\f1bc"}.fa-deviantart:before{content:"\\f1bd"}.fa-soundcloud:before{content:"\\f1be"}.fa-database:before{content:"\\f1c0"}.fa-file-pdf-o:before{content:"\\f1c1"}.fa-file-word-o:before{content:"\\f1c2"}.fa-file-excel-o:before{content:"\\f1c3"}.fa-file-powerpoint-o:before{content:"\\f1c4"}.fa-file-photo-o:before,.fa-file-picture-o:before,.fa-file-image-o:before{content:"\\f1c5"}.fa-file-zip-o:before,.fa-file-archive-o:before{content:"\\f1c6"}.fa-file-sound-o:before,.fa-file-audio-o:before{content:"\\f1c7"}.fa-file-movie-o:before,.fa-file-video-o:before{content:"\\f1c8"}.fa-file-code-o:before{content:"\\f1c9"}.fa-vine:before{content:"\\f1ca"}.fa-codepen:before{content:"\\f1cb"}.fa-jsfiddle:before{content:"\\f1cc"}.fa-life-bouy:before,.fa-life-buoy:before,.fa-life-saver:before,.fa-support:before,.fa-life-ring:before{content:"\\f1cd"}.fa-circle-o-notch:before{content:"\\f1ce"}.fa-ra:before,.fa-rebel:before{content:"\\f1d0"}.fa-ge:before,.fa-empire:before{content:"\\f1d1"}.fa-git-square:before{content:"\\f1d2"}.fa-git:before{content:"\\f1d3"}.fa-hacker-news:before{content:"\\f1d4"}.fa-tencent-weibo:before{content:"\\f1d5"}.fa-qq:before{content:"\\f1d6"}.fa-wechat:before,.fa-weixin:before{content:"\\f1d7"}.fa-send:before,.fa-paper-plane:before{content:"\\f1d8"}.fa-send-o:before,.fa-paper-plane-o:before{content:"\\f1d9"}.fa-history:before{content:"\\f1da"}.fa-genderless:before,.fa-circle-thin:before{content:"\\f1db"}.fa-header:before{content:"\\f1dc"}.fa-paragraph:before{content:"\\f1dd"}.fa-sliders:before{content:"\\f1de"}.fa-share-alt:before{content:"\\f1e0"}.fa-share-alt-square:before{content:"\\f1e1"}.fa-bomb:before{content:"\\f1e2"}.fa-soccer-ball-o:before,.fa-futbol-o:before{content:"\\f1e3"}.fa-tty:before{content:"\\f1e4"}.fa-binoculars:before{content:"\\f1e5"}.fa-plug:before{content:"\\f1e6"}.fa-slideshare:before{content:"\\f1e7"}.fa-twitch:before{content:"\\f1e8"}.fa-yelp:before{content:"\\f1e9"}.fa-newspaper-o:before{content:"\\f1ea"}.fa-wifi:before{content:"\\f1eb"}.fa-calculator:before{content:"\\f1ec"}.fa-paypal:before{content:"\\f1ed"}.fa-google-wallet:before{content:"\\f1ee"}.fa-cc-visa:before{content:"\\f1f0"}.fa-cc-mastercard:before{content:"\\f1f1"}.fa-cc-discover:before{content:"\\f1f2"}.fa-cc-amex:before{content:"\\f1f3"}.fa-cc-paypal:before{content:"\\f1f4"}.fa-cc-stripe:before{content:"\\f1f5"}.fa-bell-slash:before{content:"\\f1f6"}.fa-bell-slash-o:before{content:"\\f1f7"}.fa-trash:before{content:"\\f1f8"}.fa-copyright:before{content:"\\f1f9"}.fa-at:before{content:"\\f1fa"}.fa-eyedropper:before{content:"\\f1fb"}.fa-paint-brush:before{content:"\\f1fc"}.fa-birthday-cake:before{content:"\\f1fd"}.fa-area-chart:before{content:"\\f1fe"}.fa-pie-chart:before{content:"\\f200"}.fa-line-chart:before{content:"\\f201"}.fa-lastfm:before{content:"\\f202"}.fa-lastfm-square:before{content:"\\f203"}.fa-toggle-off:before{content:"\\f204"}.fa-toggle-on:before{content:"\\f205"}.fa-bicycle:before{content:"\\f206"}.fa-bus:before{content:"\\f207"}.fa-ioxhost:before{content:"\\f208"}.fa-angellist:before{content:"\\f209"}.fa-cc:before{content:"\\f20a"}.fa-shekel:before,.fa-sheqel:before,.fa-ils:before{content:"\\f20b"}.fa-meanpath:before{content:"\\f20c"}.fa-buysellads:before{content:"\\f20d"}.fa-connectdevelop:before{content:"\\f20e"}.fa-dashcube:before{content:"\\f210"}.fa-forumbee:before{content:"\\f211"}.fa-leanpub:before{content:"\\f212"}.fa-sellsy:before{content:"\\f213"}.fa-shirtsinbulk:before{content:"\\f214"}.fa-simplybuilt:before{content:"\\f215"}.fa-skyatlas:before{content:"\\f216"}.fa-cart-plus:before{content:"\\f217"}.fa-cart-arrow-down:before{content:"\\f218"}.fa-diamond:before{content:"\\f219"}.fa-ship:before{content:"\\f21a"}.fa-user-secret:before{content:"\\f21b"}.fa-motorcycle:before{content:"\\f21c"}.fa-street-view:before{content:"\\f21d"}.fa-heartbeat:before{content:"\\f21e"}.fa-venus:before{content:"\\f221"}.fa-mars:before{content:"\\f222"}.fa-mercury:before{content:"\\f223"}.fa-transgender:before{content:"\\f224"}.fa-transgender-alt:before{content:"\\f225"}.fa-venus-double:before{content:"\\f226"}.fa-mars-double:before{content:"\\f227"}.fa-venus-mars:before{content:"\\f228"}.fa-mars-stroke:before{content:"\\f229"}.fa-mars-stroke-v:before{content:"\\f22a"}.fa-mars-stroke-h:before{content:"\\f22b"}.fa-neuter:before{content:"\\f22c"}.fa-facebook-official:before{content:"\\f230"}.fa-pinterest-p:before{content:"\\f231"}.fa-whatsapp:before{content:"\\f232"}.fa-server:before{content:"\\f233"}.fa-user-plus:before{content:"\\f234"}.fa-user-times:before{content:"\\f235"}.fa-hotel:before,.fa-bed:before{content:"\\f236"}.fa-viacoin:before{content:"\\f237"}.fa-train:before{content:"\\f238"}.fa-subway:before{content:"\\f239"}.fa-medium:before{content:"\\f23a"}',""])},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,'.music-chart-info{font:2.5vmin "Source Sans Pro","Segoe UI","Helvetica Neue",sans-serif}.music-chart-info--title{font-size:2em;font-weight:700}.music-chart-info--subtitle{font-size:1.5em;color:rgba(0,0,0,.6);font-weight:700}.music-chart-info--artist>small{font-size:1em;color:rgba(0,0,0,.6)}',""])},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,".music-chart-selector-item{list-style:none;border:2px solid #8ac;height:12vmin;line-height:12vmin;font-size:5vmin;text-align:center;background:rgba(255,255,255,.8);border-radius:2vmin;cursor:pointer;position:relative}.music-chart-selector-item.is-active{background:#8ac;color:#fff;-webkit-animation:3s music-chart-selector-item--active-animation infinite;animation:3s music-chart-selector-item--active-animation infinite}.music-chart-selector-item.is-insane{border-color:#c66}.music-chart-selector-item.is-insane.is-active{background:#c66;-webkit-animation:3s music-chart-selector-item--active-animation--insane infinite;animation:3s music-chart-selector-item--active-animation--insane infinite}.music-chart-selector-item--level{opacity:1;transition:.3s opacity}.music-chart-selector-item--play{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);opacity:0;transition:.3s opacity}.music-chart-selector-item:not(.is-tutorial).is-active:hover .music-chart-selector-item--play{opacity:1}.music-chart-selector-item:not(.is-tutorial).is-active:hover .music-chart-selector-item--level{opacity:0}@-webkit-keyframes music-chart-selector-item--active-animation{0%{background:#acc3db}50%{background:#6491bd}100%{background:#acc3db}}@keyframes music-chart-selector-item--active-animation{0%{background:#acc3db}50%{background:#6491bd}100%{background:#acc3db}}@-webkit-keyframes music-chart-selector-item--active-animation--insane{0%{background:#d98c8c}50%{background:#bf4040}100%{background:#d98c8c}}@keyframes music-chart-selector-item--active-animation--insane{0%{background:#d98c8c}50%{background:#bf4040}100%{background:#d98c8c}}",""])},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,".result-grade{display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;border:2px dashed rgba(255,255,255,.5);border-radius:1em;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.result-grade--label{position:absolute;right:0;bottom:0;left:0;color:rgba(255,255,255,.5);text-align:center}.result-grade--grade{font-weight:700;font-size:18vh;color:#ff9;position:relative;top:-.2ex;text-shadow:3px 3px 0 rgba(0,0,0,.3);-webkit-animation:.3s result-grade--animation linear;animation:.3s result-grade--animation linear;-webkit-animation-delay:2s;animation-delay:2s;-webkit-animation-fill-mode:backwards;animation-fill-mode:backwards}@-webkit-keyframes result-grade--animation{0%{opacity:0;-webkit-transform:scale(2);transform:scale(2)}80%{-webkit-transform:scale(.85);transform:scale(.85)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes result-grade--animation{0%{opacity:0;-webkit-transform:scale(2);transform:scale(2)}80%{-webkit-transform:scale(.85);transform:scale(.85)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}",""])},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,".result-scene{background:url("+n(318)+") center no-repeat;background-size:cover;color:#000}.result-scene--report{position:absolute;top:25vmin;right:52vw;bottom:3vmin;left:5vw}.result-scene--information{background:rgba(255,255,255,.8);position:absolute;top:0;right:5vw;bottom:0;left:52vw;padding-top:25vmin}.result-scene .music-chart-info{margin:0 2vw}.result-scene .result-grade{position:absolute;bottom:12vh;right:52vw;width:20vh;height:20vh}.result-scene--chart{float:right;margin-right:2vw}.result-scene .music-chart-selector-item{width:12vmin}.result-scene--exit{position:absolute;right:2vw;bottom:12vh;left:2vw;background:#5a5;border:2px solid #4d994d;text-align:center;font-size:5vmin;color:#fff;padding:1ex;cursor:pointer;border-radius:2vmin}",""])},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,".result-table table{width:100%;margin-bottom:1ex;text-shadow:2px 2px 0 rgba(0,0,0,.2)}.result-table th,.result-table td{font-size:4vh;font-weight:400}.result-table td{text-align:right;width:45%;color:#fff}.result-table th{text-align:left;padding-left:1ex;color:rgba(255,255,255,.7)}.result-table table.result-table--total th,.result-table table.result-table--total td{font-weight:700}",""])},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,".loading-scene-progress-bar{border:1px solid rgba(0,0,0,.6);padding:1px}.loading-scene-progress-bar--bar{height:8px;background:rgba(0,0,0,.6);width:0%}",""])},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,".loading-scene-progress{color:#333;font-size:11px}.loading-scene-progress .loading-scene-progress-bar{display:inline-block;vertical-align:middle;width:48px;margin-right:4px;position:relative;top:-1px}.loading-scene-progress--extra{font-size:83%;opacity:.7}",""])},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,".loading-scene-song-info{background:rgba(255,255,255,.96);color:#191817;text-align:center;padding:25px 0;box-shadow:0 2px 18px rgba(0,0,0,.2)}.loading-scene-song-info--genre{font-size:3vmin}.loading-scene-song-info--title{font-size:8vmin;font-weight:700}.loading-scene-song-info--subtitle{font-size:6vmin}.loading-scene-song-info--artist{font-size:4vmin;margin-top:.8ex}.loading-scene-song-info--subartist{font-size:2.5vmin}",""])},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,".loading-scene{background:url("+n(246)+") center no-repeat;background-size:cover}.loading-scene--info{position:absolute;top:40%;left:0;right:0;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.loading-scene .loading-scene-song-info{-webkit-animation:loading-scene--loading-scene-song-info--animation 1s ease;animation:loading-scene--loading-scene-song-info--animation 1s ease}.loading-scene .loading-scene-progress{position:absolute;bottom:10px;left:10px}.loading-scene--flash{background:#fff;-webkit-animation:loading-scene--flash-animation .8s ease-out;animation:loading-scene--flash-animation .8s ease-out}.loading-scene--flash,.loading-scene--cover{position:absolute;top:0;right:0;bottom:0;left:0;opacity:0;pointer-events:none}.loading-scene--cover{background:#000}.scene.is-exiting .loading-scene--info{-webkit-animation:loading-scene--info-exit .3s linear;animation:loading-scene--info-exit .3s linear}.scene.is-exiting .loading-scene--flash{-webkit-animation:loading-scene--flash-exit .3s ease;animation:loading-scene--flash-exit .3s ease}.scene.is-exiting .loading-scene--cover{-webkit-animation:loading-scene--cover-exit .3s linear;animation:loading-scene--cover-exit .3s linear;opacity:1}@-webkit-keyframes loading-scene--loading-scene-song-info--animation{0%{-webkit-transform:scale(1.5,.02);transform:scale(1.5,.02)}100%{-webkit-transform:scale(1,1);transform:scale(1,1)}}@keyframes loading-scene--loading-scene-song-info--animation{0%{-webkit-transform:scale(1.5,.02);transform:scale(1.5,.02)}100%{-webkit-transform:scale(1,1);transform:scale(1,1)}}@-webkit-keyframes loading-scene--info-exit{0%{-webkit-transform:translateY(-50%)scale(1,1);transform:translateY(-50%)scale(1,1)}100%{-webkit-transform:translateY(-50%)scale(2,2);transform:translateY(-50%)scale(2,2)}}@keyframes loading-scene--info-exit{0%{-webkit-transform:translateY(-50%)scale(1,1);transform:translateY(-50%)scale(1,1)}100%{-webkit-transform:translateY(-50%)scale(2,2);transform:translateY(-50%)scale(2,2)}}@-webkit-keyframes loading-scene--cover-exit{0%{opacity:0}100%{opacity:1}}@keyframes loading-scene--cover-exit{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes loading-scene--flash-animation{0%{opacity:1}100%{opacity:0}}@keyframes loading-scene--flash-animation{0%{opacity:1}100%{opacity:0}}@-webkit-keyframes loading-scene--flash-exit{0%{opacity:.5}100%{opacity:0}}@keyframes loading-scene--flash-exit{0%{opacity:.5}100%{opacity:0}}",""]);

},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,"",""])},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,'.scene-heading{box-shadow:0 .1vh 3vh rgba(0,0,0,.1);background:#fff;margin:0;padding:0 5vw;font:700 9vmin/16vmin "Source Sans Pro","Segoe UI","Helvetica Neue",sans-serif;color:#000}',""])},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,'.scene-toolbar{background:rgba(0,0,0,.7);overflow:hidden;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0 1vw;font-size:15px}.scene-toolbar>a,.scene-toolbar>span{display:block;padding:.8ex 1.3ex}.scene-toolbar>a{color:rgba(255,255,255,.8);text-decoration:none;background:0 0;transition:.1s background,.1s color}.scene-toolbar>a:hover{background:rgba(0,0,0,.5);color:#fff}.scene-toolbar>a[data-position="right"]{float:right}.scene-toolbar>span{color:rgba(255,255,255,.6)}.scene-toolbar--spacer{-webkit-flex:1;-ms-flex:1;flex:1}',""])},function(e,t,n){e.exports=n.p+"0cfe6fe9284bd4c4fcc04d66ee85c398.jpg"},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++)if(e[n].name===t)return n;return-1}function i(e){return this instanceof i?(this.properties=[],void(e&&this.load(e))):new i(e)}var o=n(233),a=n(358);i.prototype.dispose=function(){this.properties.forEach(function(e){e.dispose()}),this.properties.length=0},i.prototype.addProperty=function(e){this.properties.push(new a(e))},i.prototype.duration=function(){for(var e=0,t=0;t<this.properties.length;t++)for(var n=this.properties[t],r=n.keyframes.frames,i=0;i<r.length;i++)e=Math.max(r[i].time,e);return e},i.prototype.property=function(e){var t="number"==typeof e?e:r(this.properties,e);return 0>t?void 0:this.properties[t]},i.prototype.load=function(e){this.dispose(),e&&(this.properties=e.map(function(e){return new a(e)}))},i.prototype["export"]=function(){return this.properties.map(function(e){return e["export"]()})},i.prototype.ease=function(e,t){return t},i.prototype.interpolate=function(e,t,n,r){return o(t.value,n.value,r)},i.prototype.valueOf=function(e,t){var n=t.keyframes,r=n.interpolation(e),i=r[0],o=r[1],a=r[2];if(-1===i||-1===o)return t.value;var s=n.frames[i],u=n.frames[o];if(i===o)return s.value;var c=u.ease;return c&&(a=this.ease(c,a)),this.interpolate(t,s,u,a)},i.prototype.values=function(e,t){t||(t={});for(var n=0;n<this.properties.length;n++){var r=this.properties[n];t[r.name]=this.valueOf(e,r)}return t},e.exports=i},function(e,t,n){function r(e){return this instanceof r?void a.call(this,e):new r(e)}var i=n(338),o=n(352),a=n(319);o(r,a),r.prototype.ease=function(e,t){return i[e](t)},e.exports=r},function(e,t,n){function r(e){var t=2.5949095;return(e*=2)<1?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)}e.exports=r},function(e,t,n){function r(e){var t=1.70158;return e*e*((t+1)*e-t)}e.exports=r},function(e,t,n){function r(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}e.exports=r},function(e,t,n){function r(e){return.5>e?.5*(1-i(1-2*e)):.5*i(2*e-1)+.5}var i=n(127);e.exports=r},function(e,t,n){function r(e){return 1-i(1-e)}var i=n(127);e.exports=r},function(e,t,n){function r(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}e.exports=r},function(e,t,n){function r(e){return 1-Math.sqrt(1-e*e)}e.exports=r},function(e,t,n){function r(e){return Math.sqrt(1- --e*e)}e.exports=r},function(e,t,n){function r(e){return.5>e?4*e*e*e:.5*Math.pow(2*e-2,3)+1}e.exports=r},function(e,t,n){function r(e){return e*e*e}e.exports=r},function(e,t,n){function r(e){var t=e-1;return t*t*t+1}e.exports=r},function(e,t,n){function r(e){return.5>e?.5*Math.sin(13*Math.PI/2*2*e)*Math.pow(2,10*(2*e-1)):.5*Math.sin(-13*Math.PI/2*(2*e-1+1))*Math.pow(2,-10*(2*e-1))+1}e.exports=r},function(e,t,n){function r(e){return Math.sin(13*e*Math.PI/2)*Math.pow(2,10*(e-1))}e.exports=r},function(e,t,n){function r(e){return Math.sin(-13*(e+1)*Math.PI/2)*Math.pow(2,-10*e)+1}e.exports=r},function(e,t,n){function r(e){return 0===e||1===e?e:.5>e?.5*Math.pow(2,20*e-10):-.5*Math.pow(2,10-20*e)+1}e.exports=r},function(e,t,n){function r(e){return 0===e?e:Math.pow(2,10*(e-1))}e.exports=r},function(e,t,n){function r(e){return 1===e?e:1-Math.pow(2,-10*e)}e.exports=r},function(e,t,n){e.exports={backInOut:n(321),backIn:n(322),backOut:n(323),bounceInOut:n(324),bounceIn:n(325),bounceOut:n(127),circInOut:n(326),circIn:n(327),circOut:n(328),cubicInOut:n(329),cubicIn:n(330),cubicOut:n(331),elasticInOut:n(332),elasticIn:n(333),elasticOut:n(334),expoInOut:n(335),expoIn:n(336),expoOut:n(337),linear:n(339),quadInOut:n(340),quadIn:n(341),quadOut:n(342),quartInOut:n(343),quartIn:n(344),quartOut:n(345),quintInOut:n(346),quintIn:n(347),quintOut:n(348),sineInOut:n(349),sineIn:n(350),sineOut:n(351)}},function(e,t,n){function r(e){return e}e.exports=r},function(e,t,n){function r(e){return e/=.5,1>e?.5*e*e:(e--,-.5*(e*(e-2)-1))}e.exports=r},function(e,t,n){function r(e){return e*e}e.exports=r},function(e,t,n){function r(e){return-e*(e-2)}e.exports=r},function(e,t,n){function r(e){return.5>e?8*Math.pow(e,4):-8*Math.pow(e-1,4)+1}e.exports=r},function(e,t,n){function r(e){return Math.pow(e,4)}e.exports=r},function(e,t,n){function r(e){return Math.pow(e-1,3)*(1-e)+1}e.exports=r},function(e,t,n){function r(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}e.exports=r},function(e,t,n){function r(e){return e*e*e*e*e}e.exports=r},function(e,t,n){function r(e){return--e*e*e*e*e+1}e.exports=r},function(e,t,n){function r(e){return-.5*(Math.cos(Math.PI*e)-1)}e.exports=r},function(e,t,n){function r(e){return 1-Math.cos(e*Math.PI/2)}e.exports=r},function(e,t,n){function r(e){return Math.sin(e*Math.PI/2)}e.exports=r},function(e,t,n){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){function r(e,t){return e.time-t.time}function i(e,t){return this instanceof i?(this.frames=e||[],void(t||this.sort())):new i(e,t)}var o=n(233),a=n(355),s=n(354),u=[0,0,0];i.prototype.nearestIndex=function(e,t){t="number"==typeof t?t:Number.MAX_VALUE;for(var n=Number.MAX_VALUE,r=-1,i=0;i<this.frames.length;i++){var o=Math.abs(this.frames[i].time-e);n>o&&t>=o&&(n=o,r=i)}return r},i.prototype.nearest=function(e,t){var n=this.nearestIndex(e,t);return-1===n?null:this.frames[n]},i.prototype.get=function(e){return this.nearest(e,0)},i.prototype.getIndex=function(e){return this.nearestIndex(e,0)},i.prototype.value=function(e,t){var n=this.interpolation(e);if(-1===n[0]||-1===n[1])return null;var r=this.frames[n[0]],i=this.frames[n[1]],a=n[2];return"function"==typeof t?t(r,i,a):o(r.value,i.value,a)},i.prototype.interpolation=function(e){if(0===this.frames.length)return s(u,-1,-1,0);for(var t=-1,n=this.frames.length-1;n>=0;n--)if(e>=this.frames[n].time){t=n;break}if(-1===t||t===this.frames.length-1)return 0>t&&(t=0),s(u,t,t,0);var r=this.frames[t],i=this.frames[t+1];e=Math.max(r.time,Math.min(e,i.time));var o=a(r.time,i.time,e);return s(u,t,t+1,o)},i.prototype.next=function(e){if(this.frames.length<1)return null;for(var t=-1,n=0;n<this.frames.length;n++)if(e<this.frames[n].time){t=n;break}return-1===t?null:this.frames[t]},i.prototype.previous=function(e){if(this.frames.length<1)return null;for(var t=-1,n=this.frames.length-1;n>=0;n--)if(e>this.frames[n].time){t=n;break}return-1===t?null:this.frames[t]},i.prototype.add=function(e){this.frames.push(e),this.sort()},i.prototype.splice=function(e,t,n){this.frames.splice.apply(this.frames,arguments),arguments.length>2&&this.sort()},i.prototype.sort=function(){this.frames.sort(r)},i.prototype.clear=function(){this.frames.length=0},Object.defineProperty(i.prototype,"count",{get:function(){return this.frames.length}}),e.exports=i},function(e,t,n){function r(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}e.exports=r},function(e,t,n){e.exports=function(e,t,n){return(n-e)/(t-e)}},function(e,t,n){function r(e,t,n){return e*(1-n)+t*n}e.exports=r},function(e,t,n){function r(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}e.exports=r},function(e,t,n){function r(e){return this instanceof r?(this.keyframes=i(),this.value=null,this.name="",void(e&&this.load(e))):new r(e)}var i=n(353),o=n(357);r.prototype.dispose=function(){this.keyframes.clear()},r.prototype["export"]=function(){return o(this,{keyframes:this.keyframes.frames})},r.prototype.load=function(e){if(this.dispose(),e)for(var t in e)e.hasOwnProperty(t)&&("keyframes"===t?this.keyframes.frames=e.keyframes:this[t]=e[t])},e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){Object.defineProperty(e,t,{get:function(){var e=n.call(this);return Object.defineProperty(this,t,{value:e,enumerable:!!r,writable:!0}),e},set:function(e){return Object.defineProperty(this,t,{value:e,enumerable:!!r,writable:!0}),e},enumerable:!!r,configurable:!0})}e.exports=r},function(e,t,n){e.exports=function(){function e(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function t(e,t,n,r,i,o){this.message=e,this.expected=t,this.found=n,this.offset=r,this.line=i,this.column=o,this.name="SyntaxError"}function n(e){function n(){return e.substring(ge,ve)}function r(t){function n(t,n,r){var i,o;for(i=n;r>i;i++)o=e.charAt(i),"\n"===o?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return ye!==t&&(ye>t&&(ye=0,be={line:1,column:1,seenCR:!1}),n(be,ye,t),ye=t),be}function i(e){xe>ve||(ve>xe&&(xe=ve,we=[]),we.push(e))}function o(n,i,o){function a(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function s(e,t){function n(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var r,i,o,a=new Array(e.length);for(o=0;o<e.length;o++)a[o]=e[o].description;return r=e.length>1?a.slice(0,-1).join(", ")+" or "+a[e.length-1]:a[0],i=t?'"'+n(t)+'"':"end of input","Expected "+r+" but "+i+" found."}var u=r(o),c=o<e.length?e.charAt(o):null;return null!==i&&a(i),new t(null!==n?n:s(i,c),i,c,o,u.line,u.column)}function a(){var e;return e=s()}function s(){var t,n,r,o,a,s,c,l;if(t=ve,n=u(),n!==_){for(r=[],o=ve,a=g(),a!==_?(e.substr(ve,2)===S?(s=S,ve+=2):(s=_,0===_e&&i(A)),s!==_?(c=g(),c!==_?(l=u(),l!==_?(a=[a,s,c,l],o=a):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C);o!==_;)r.push(o),o=ve,a=g(),a!==_?(e.substr(ve,2)===S?(s=S,ve+=2):(s=_,0===_e&&i(A)),s!==_?(c=g(),c!==_?(l=u(),l!==_?(a=[a,s,c,l],o=a):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C);r!==_?(ge=t,n=k(n,r),t=n):(ve=t,t=C)}else ve=t,t=C;return t}function u(){var t,n,r,o,a,s,u,l;if(t=ve,n=c(),n!==_){for(r=[],o=ve,a=g(),a!==_?(e.substr(ve,2)===O?(s=O,ve+=2):(s=_,0===_e&&i(M)),s!==_?(u=g(),u!==_?(l=c(),l!==_?(a=[a,s,u,l],o=a):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C);o!==_;)r.push(o),o=ve,a=g(),a!==_?(e.substr(ve,2)===O?(s=O,ve+=2):(s=_,0===_e&&i(M)),s!==_?(u=g(),u!==_?(l=c(),l!==_?(a=[a,s,u,l],o=a):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C);r!==_?(ge=t,n=k(n,r),t=n):(ve=t,t=C)}else ve=t,t=C;return t}function c(){var t,n,r,o,a,s,u,c;if(t=ve,n=l(),n!==_){for(r=[],o=ve,a=g(),a!==_?(43===e.charCodeAt(ve)?(s=N,ve++):(s=_,0===_e&&i(j)),s===_&&(45===e.charCodeAt(ve)?(s=R,ve++):(s=_,0===_e&&i(P))),s!==_?(u=g(),u!==_?(c=l(),c!==_?(a=[a,s,u,c],o=a):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C);o!==_;)r.push(o),o=ve,a=g(),a!==_?(43===e.charCodeAt(ve)?(s=N,ve++):(s=_,0===_e&&i(j)),s===_&&(45===e.charCodeAt(ve)?(s=R,ve++):(s=_,0===_e&&i(P))),s!==_?(u=g(),u!==_?(c=l(),c!==_?(a=[a,s,u,c],o=a):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C);r!==_?(ge=t,n=k(n,r),t=n):(ve=t,t=C)}else ve=t,t=C;return t}function l(){var t,n,r,o,a,s,u,c;if(t=ve,n=f(),n!==_){for(r=[],o=ve,a=g(),a!==_?(42===e.charCodeAt(ve)?(s=D,ve++):(s=_,0===_e&&i(I)),s===_&&(47===e.charCodeAt(ve)?(s=L,ve++):(s=_,0===_e&&i(F)),s===_&&(37===e.charCodeAt(ve)?(s=B,ve++):(s=_,0===_e&&i(U)))),s!==_?(u=g(),u!==_?(c=f(),c!==_?(a=[a,s,u,c],o=a):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C);o!==_;)r.push(o),o=ve,a=g(),a!==_?(42===e.charCodeAt(ve)?(s=D,ve++):(s=_,0===_e&&i(I)),s===_&&(47===e.charCodeAt(ve)?(s=L,ve++):(s=_,0===_e&&i(F)),s===_&&(37===e.charCodeAt(ve)?(s=B,ve++):(s=_,0===_e&&i(U)))),s!==_?(u=g(),u!==_?(c=f(),c!==_?(a=[a,s,u,c],o=a):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C)):(ve=o,o=C);r!==_?(ge=t,n=k(n,r),t=n):(ve=t,t=C)}else ve=t,t=C;return t}function f(){var t,n,r,o,a,u;return t=ve,40===e.charCodeAt(ve)?(n=q,ve++):(n=_,0===_e&&i(V)),n!==_?(r=g(),r!==_?(o=s(),o!==_?(a=g(),a!==_?(41===e.charCodeAt(ve)?(u=W,ve++):(u=_,0===_e&&i(G)),u!==_?(ge=t,n=H(o),t=n):(ve=t,t=C)):(ve=t,t=C)):(ve=t,t=C)):(ve=t,t=C)):(ve=t,t=C),t===_&&(t=ve,33===e.charCodeAt(ve)?(n=z,ve++):(n=_,0===_e&&i(Y)),n!==_?(r=f(),r!==_?(ge=t,n=X(r),t=n):(ve=t,t=C)):(ve=t,t=C),t===_&&(t=h(),t===_&&(t=v()))),t}function h(){var t,n,r,o,a;return _e++,t=ve,45===e.charCodeAt(ve)?(n=R,ve++):(n=_,0===_e&&i(P)),n===_&&(n=J),n!==_?(r=m(),r!==_?(o=d(),o===_&&(o=J),o!==_?(a=p(),a===_&&(a=J),a!==_?(ge=t,n=K(),t=n):(ve=t,t=C)):(ve=t,t=C)):(ve=t,t=C)):(ve=t,t=C),_e--,t===_&&(n=_,0===_e&&i($)),t}function p(){var t,n,r,o,a;if(t=ve,Q.test(e.charAt(ve))?(n=e.charAt(ve),ve++):(n=_,0===_e&&i(Z)),n!==_)if(45===e.charCodeAt(ve)?(r=R,ve++):(r=_,0===_e&&i(P)),r===_&&(43===e.charCodeAt(ve)?(r=N,ve++):(r=_,0===_e&&i(j))),r===_&&(r=J),r!==_){if(o=[],ee.test(e.charAt(ve))?(a=e.charAt(ve),ve++):(a=_,0===_e&&i(te)),a!==_)for(;a!==_;)o.push(a),ee.test(e.charAt(ve))?(a=e.charAt(ve),ve++):(a=_,0===_e&&i(te));else o=C;o!==_?(n=[n,r,o],t=n):(ve=t,t=C)}else ve=t,t=C;else ve=t,t=C;return t}function d(){var t,n,r,o;if(t=ve,46===e.charCodeAt(ve)?(n=ne,ve++):(n=_,0===_e&&i(re)),n!==_){if(r=[],ee.test(e.charAt(ve))?(o=e.charAt(ve),ve++):(o=_,0===_e&&i(te)),o!==_)for(;o!==_;)r.push(o),ee.test(e.charAt(ve))?(o=e.charAt(ve),ve++):(o=_,0===_e&&i(te));else r=C;r!==_?(n=[n,r],t=n):(ve=t,t=C)}else ve=t,t=C;return t}function m(){var t,n,r,o;if(48===e.charCodeAt(ve)?(t=ie,ve++):(t=_,0===_e&&i(oe)),t===_)if(t=ve,ae.test(e.charAt(ve))?(n=e.charAt(ve),ve++):(n=_,0===_e&&i(se)),n!==_){for(r=[],ee.test(e.charAt(ve))?(o=e.charAt(ve),ve++):(o=_,0===_e&&i(te));o!==_;)r.push(o),ee.test(e.charAt(ve))?(o=e.charAt(ve),ve++):(o=_,0===_e&&i(te));r!==_?(n=[n,r],t=n):(ve=t,t=C)}else ve=t,t=C;return t}function v(){var t,n,r,o;if(t=ve,n=[],ue.test(e.charAt(ve))?(r=e.charAt(ve),ve++):(r=_,0===_e&&i(ce)),r!==_)for(;r!==_;)n.push(r),ue.test(e.charAt(ve))?(r=e.charAt(ve),ve++):(r=_,0===_e&&i(ce));else n=C;if(n!==_){for(r=[],le.test(e.charAt(ve))?(o=e.charAt(ve),ve++):(o=_,0===_e&&i(fe));o!==_;)r.push(o),le.test(e.charAt(ve))?(o=e.charAt(ve),ve++):(o=_,0===_e&&i(fe));r!==_?(ge=t,n=he(),t=n):(ve=t,t=C)}else ve=t,t=C;return t}function g(){var t,n;for(_e++,t=[],de.test(e.charAt(ve))?(n=e.charAt(ve),ve++):(n=_,0===_e&&i(me));n!==_;)t.push(n),de.test(e.charAt(ve))?(n=e.charAt(ve),ve++):(n=_,0===_e&&i(me));return _e--,t===_&&(n=_,0===_e&&i(pe)),t}function y(e){var t=e[1],n=e[3];return" "+t+" "+n}function b(e,t){return e+t.map(y).join("")}var x,w=arguments.length>1?arguments[1]:{},_={},E={expr:a},T=a,C=_,S="||",A={type:"literal",value:"||",description:'"||"'},k=function(e,t){return b(e,t)},O="&&",M={type:"literal",value:"&&",description:'"&&"'},N="+",j={type:"literal",value:"+",description:'"+"'},R="-",P={type:"literal",value:"-",description:'"-"'},D="*",I={type:"literal",value:"*",description:'"*"'},L="/",F={type:"literal",value:"/",description:'"/"'},B="%",U={type:"literal",value:"%",description:'"%"'},q="(",V={type:"literal",value:"(",description:'"("'},W=")",G={type:"literal",value:")",description:'")"'},H=function(e){return"("+e+")"},z="!",Y={type:"literal",value:"!",description:'"!"'},X=function(e){return"!"+e},$={type:"other",description:"number"},J=null,K=function(){return n()},Q=/^[eE]/,Z={type:"class",value:"[eE]",description:"[eE]"},ee=/^[0-9]/,te={type:"class",value:"[0-9]",description:"[0-9]"},ne=".",re={type:"literal",value:".",description:'"."'},ie="0",oe={type:"literal",value:"0",description:'"0"'},ae=/^[1-9]/,se={type:"class",value:"[1-9]",description:"[1-9]"},ue=/^[a-zA-Z]/,ce={type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},le=/^[a-zA-Z0-9_]/,fe={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},he=function(){return"get("+JSON.stringify(n())+")"},pe={type:"other",description:"whitespace"},de=/^[ \t\n\r]/,me={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},ve=0,ge=0,ye=0,be={line:1,column:1,seenCR:!1},xe=0,we=[],_e=0;if("startRule"in w){if(!(w.startRule in E))throw new Error("Can't start parsing from rule \""+w.startRule+'".');T=E[w.startRule]}if(x=T(),x!==_&&ve===e.length)return x;throw x!==_&&ve<e.length&&i({type:"end",description:"end of input"}),o(null,we,xe)}return e(t,Error),{SyntaxError:t,parse:n}}()},function(e,t,n){"use strict";var r=n(7),i=r.PropTypes,o=r.createClass({displayName:"Icon",propTypes:{name:i.string.isRequired,size:i.oneOf(["lg","2x","3x","4x","5x"]),rotate:i.oneOf(["90","180","270"]),flip:i.oneOf(["horizontal","vertical"]),fixedWidth:i.bool,spin:i.bool,stack:r.PropTypes.oneOf(["1x","2x"]),inverse:r.PropTypes.bool},render:function(){var e=this.props,t=e.name,n=e.size,i=e.rotate,o=e.flip,a=e.spin,s=e.fixedWidth,u=e.stack,c=e.inverse,l=e.className,f=function(e,t){var n={},r=Object.prototype.hasOwnProperty;if(null==e)throw new TypeError;for(var i in e)r.call(e,i)&&!r.call(t,i)&&(n[i]=e[i]);return n}(e,{name:1,size:1,rotate:1,flip:1,spin:1,fixedWidth:1,stack:1,inverse:1,className:1}),h="fa fa-"+t;return n&&(h+=" fa-"+n),i&&(h+=" fa-rotate-"+i),o&&(h+=" fa-flip-"+o),s&&(h+=" fa-fw"),a&&(h+=" fa-spin"),u&&(h+=" fa-stack-"+u),c&&(l+=" fa-inverse"),l&&(h+=" "+l),r.createElement("span",r.__spread({},f,{className:h}))}});e.exports=o},function(e,t,n){"use strict";function r(e){var t=!1;try{e.appendChild(s),t=s.parentNode==e}catch(n){return!1}finally{try{e.removeChild(s)}catch(n){}}return t}function i(e){return"number"==typeof e&&isNaN(e)}function o(e){return s&&e&&1===e.nodeType&&r(e)}var a=n(269),s="undefined"!=typeof document&&document.createElement("div");e.exports=function u(e,t){if(a.isMatcher(e))return e.test(t);if("object"!=typeof e||"object"!=typeof t)return i(e)&&i(t)?!0:e===t;if(o(e)||o(t))return e===t;if(e===t)return!0;if(null===e&&null!==t||null!==e&&null===t)return!1;if(e instanceof RegExp&&t instanceof RegExp)return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline;var n=Object.prototype.toString.call(e);if(n!==Object.prototype.toString.call(t))return!1;if("[object Date]"===n)return e.valueOf()===t.valueOf();var r,s=0,c=0;if("[object Array]"==n&&e.length!==t.length)return!1;for(r in e){if(s+=1,!(r in t))return!1;if(!u(e[r],t[r]))return!1}for(r in t)c+=1;return s==c}},function(e,t,n){"use strict";var r=n(652),i=r.configure({quoteStrings:!1,limitChildrenCount:250});e.exports=function(){return i.ascii.apply(i,arguments)}},function(e,t,n){var r=n(305);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){var r=n(306);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){var r=n(307);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){var r=n(308);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){var r=n(309);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){var r=n(310);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){var r=n(311);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){var r=n(312);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){var r=n(313);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){var r=n(314);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){var r=n(315);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){var r=n(316);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){var r=n(317);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){"use strict";function r(e,t,n,r){this.resolve=e,this.fn=t,this.self=n||null,this.args=r}e.exports=function(t){function n(e,t){function n(t,n,s){if(e){e--;var u=new i(function(e){e(t.apply(n,s))});return u.then(o,o),u}return new i(function(e){a.push(new r(e,t,n,s))})}function o(){if(e++,a.length){var t=a.shift();t.resolve(n(t.fn,t.self,t.args))}}var a=[];if("function"==typeof e&&"number"==typeof t){var s=t;t=e,e=s}return"function"==typeof t?function(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);return n(t,this,e)}:function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);return n(e,this,t)}}var i;if("number"==typeof arguments[0]||"number"==typeof arguments[1]){if(i=e.exports.Promise,"function"!=typeof i)throw new Error("You must provide a Promise polyfill for this library to work in older environments");return n(arguments[0],arguments[1])}return i=t,n},"function"==typeof Promise&&(e.exports.Promise=Promise)},function(e,t,n){e.exports=n.p+"f7c2b4b747b1a225eb8dee034134a1b0.eot"},function(e,t,n){e.exports=n.p+"f7c2b4b747b1a225eb8dee034134a1b0.eot"},function(e,t,n){e.exports=n.p+"2980083682e94d33a66eef2e7d612519.svg"},function(e,t,n){e.exports=n.p+"706450d7bba6374ca02fe167d86685cb.ttf"},function(e,t,n){e.exports=n.p+"97493d3f11c0a3bd5cbd959f5d19b699.woff2"},function(e,t,n){e.exports=n.p+"d9ee23d59d0e0e727b51368b458a0bff.woff"},function(e,t,n){(function(t){"use strict";function r(){this._listeners={}}var i=n(35),o=n(118),a=n(34);"undefined"==typeof t.EventTarget&&(t.EventTarget=function(){throw new TypeError("Illegal constructor")}),i.inherits(r,t.EventTarget),r.prototype.addEventListener=function(e,t){var n=new o(this,"addEventListener",[{name:"type",type:"string"},{name:"listener",type:"function"}]);n.validateArguments(arguments,function(e){throw new TypeError(n.form+"; "+e)}),this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t)},r.prototype.removeEventListener=function(e,t){var n=new o(this,"addEventListener",[{name:"type",type:"string"},{name:"listener",type:"function"}]);n.validateArguments(arguments,function(e){throw new TypeError(n.form+"; "+e)}),this._listeners[e]=this._listeners[e]||[];var r=this._listeners[e].indexOf(t);-1!==r&&this._listeners[e].splice(r,1)},r.prototype.dispatchEvent=function(e){var t=new o(this,"addEventListener",[{name:"event",type:"Event"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)});var n=e.type;return"function"==typeof this["on"+n]&&this["on"+n].call(this,e),this.$listeners(n).forEach(function(t){t.call(this,e)},this),!0},r.prototype.$listeners=function(e){return(this._listeners[e]||[]).slice()},e.exports=a.EventTarget=r}).call(t,function(){return this}())},function(e,t,n){(function(t){e.exports=t}).call(t,{})},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,i="/"===a.charAt(0))}return t=n(r(t.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var i=t.isAbsolute(e),o="/"===a(e,-1);return e=n(r(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;a>u;u++)if(i[u]!==o[u]){s=u;break}for(var c=[],u=s;u<i.length;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return o(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)}}).call(t,n(1))},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}},i=function(e){return e&&e.__esModule?e["default"]:e},o=i(n(126)),a=n(100).Store,s=r(n(258)),u=o.update(null,[s.startLoading.bus],function(e,t){return t}),c=o.update({loading:!0},[s.startLoading.bus],function(){return{loading:!0}},[s.finishLoading.bus],function(e,t){return{loading:!1,collection:t}},[s.errorLoading.bus],function(e,t){return{loading:!1,error:t}});e.exports=new a({server:u,collection:c})},function(e,t,n){"use strict";function r(e){var t=e.map(function(e){return e.server}),n=e.map(function(e){return e.collection}),r=n.map(function(e){var t=e.loading;return t}),o=n.map(function(e){var t=e.collection;return c(t&&t.songs||[]).sortByAll([function(e){return e.tutorial?0:1},function(e){return e.title.toLowerCase()}]).value()}),s=l.update(0,[p.selectChart.bus],function(e,t){return t.info.level}),u=l.update("",[p.setFilterText.bus],function(e,t){return t}),d=o.combine(u,function(e,t){return e.filter(function(e){return i(e,t)})}),m=l.update(null,[p.selectSong.bus],function(e,t){return t},[d.changes()],a),v=m.map(function(e){return e&&e.charts||[]}),g=v.map(function(e){return c(e).filter({keys:"7K"}).sortByAll(function(e){return e.info.difficulty>=5?1:0},function(e){return e.info.level}).value()}),y=s.map(function(e){return function(t){return c.min(t,function(t){return Math.abs(t.info.level-e)})}}),b=l.update(null,[p.selectChart.bus],function(e,t){return t},[g.changes(),y],a);return l.when([p.launchGame.bus,t,m,b],function(e,t,n,r){return{server:t,song:n,chart:r}}).onValue(function(e){return h.launch(e).done()}),new f({loading:r,server:t,songs:d,song:m,charts:g,chart:b,filterText:u})}function i(e,t){return t?o(e.title,t)||o(e.artist,t)||o(e.genre,t):!0}function o(e,t){return String(e.toLowerCase()).indexOf(t.toLowerCase())>=0}function a(e,t,n){return t&&t.length&&-1===t.indexOf(e)?n?n(t):t[0]:e}var s=function(e){return e&&e.__esModule?e:{"default":e}},u=function(e){return e&&e.__esModule?e["default"]:e};t.MusicSelectStoreFactory=r,Object.defineProperty(t,"__esModule",{value:!0});var c=u(n(14)),l=u(n(126)),f=n(100).Store,h=s(n(400)),p=s(n(272)),d=u(n(387));t["default"]=r(d)},,,,,function(e,t,n){"use strict";function r(e,t,n){var r=o.getName(e)+t;throw n.length&&(r+=" Received ["+c.call(n).join(", ")+"]"),new Error(r)}function i(e,t,n,r,i,a){if("number"!=typeof a)throw new TypeError("Call id is not a number");var s=o.create(l);return s.proxy=e,s.thisValue=t,s.args=n,s.returnValue=r,s.exception=i,s.callId=a,s}var o=n(234),a=n(269),s=n(362),u=n(363),c=Array.prototype.slice,l={calledOn:function(e){return a.isMatcher(e)?e.test(this.thisValue):this.thisValue===e},calledWith:function(){for(var e=0,t=arguments.length;t>e;e+=1)if(!s(arguments[e],this.args[e]))return!1;return!0},calledWithMatch:function(){for(var e=0,t=arguments.length;t>e;e+=1){var n=this.args[e],r=arguments[e];if(!a(r).test(n))return!1}return!0},calledWithExactly:function(){return arguments.length==this.args.length&&this.calledWith.apply(this,arguments)},notCalledWith:function(){return!this.calledWith.apply(this,arguments)},notCalledWithMatch:function(){return!this.calledWithMatch.apply(this,arguments)},returned:function(e){return s(e,this.returnValue)},threw:function(e){return"undefined"!=typeof e&&this.exception?this.exception===e||this.exception.name===e:!!this.exception},calledWithNew:function(){return this.proxy.prototype&&this.thisValue instanceof this.proxy},calledBefore:function(e){return this.callId<e.callId},calledAfter:function(e){return this.callId>e.callId},callArg:function(e){this.args[e]()},callArgOn:function(e,t){this.args[e].apply(t)},callArgWith:function(e){this.callArgOnWith.apply(this,[e,null].concat(c.call(arguments,1)))},callArgOnWith:function(e,t){var n=c.call(arguments,2);this.args[e].apply(t,n)},"yield":function(){this.yieldOn.apply(this,[null].concat(c.call(arguments,0)))},yieldOn:function(e){for(var t=this.args,n=0,i=t.length;i>n;++n)if("function"==typeof t[n])return void t[n].apply(e,c.call(arguments,1));r(this.proxy," cannot yield since no callback was passed.",t)},yieldTo:function(e){this.yieldToOn.apply(this,[e,null].concat(c.call(arguments,1)))},yieldToOn:function(e,t){for(var n=this.args,i=0,o=n.length;o>i;++i)if(n[i]&&"function"==typeof n[i][e])return void n[i][e].apply(t,c.call(arguments,2));r(this.proxy," cannot yield to '"+e+"' since no callback was passed.",n)},toString:function(){for(var e=this.proxy.toString()+"(",t=[],n=0,r=this.args.length;r>n;++n)t.push(u(this.args[n]));return e=e+t.join(", ")+")","undefined"!=typeof this.returnValue&&(e+=" => "+u(this.returnValue)),this.exception&&(e+=" !"+this.exception.name,this.exception.message&&(e+="("+this.exception.message+")")),e}};l.invokeCallback=l["yield"],i.toString=l.toString,e.exports=i},function(module,exports,__webpack_require__){"use strict";function spy(e,t){if(!t&&"function"==typeof e)return spy.create(e);if(!e&&!t)return spy.create(function(){});var n=e[t];return wrapMethod(e,t,spy.create(n))}function matchingFake(e,t,n){if(e)for(var r=0,i=e.length;i>r;r++)if(e[r].matches(t,n))return e[r]}function incrementCallCount(){this.called=!0,this.callCount+=1,this.notCalled=!1,this.calledOnce=1==this.callCount,this.calledTwice=2==this.callCount,this.calledThrice=3==this.callCount}function createCallProperties(){this.firstCall=this.getCall(0),this.secondCall=this.getCall(1),this.thirdCall=this.getCall(2),this.lastCall=this.getCall(this.callCount-1),this.calledWithNew=!!(this.calledWithNew||this.lastCall&&this.lastCall.calledWithNew())}function createProxy(func){var p;return func.length?eval("p = (function proxy("+vars.substring(0,2*func.length-1)+") { return p.invoke(func, this, slice.call(arguments)); });"):p=function(){return p.invoke(func,this,slice.call(arguments))},p}function delegateToCalls(e,t,n,r){spyApi[e]=function(){if(!this.called)return r?r.apply(this,arguments):!1;for(var i,o=0,a=0,s=this.callCount;s>a;a+=1)if(i=this.getCall(a),i[n||e].apply(i,arguments)&&(o+=1,t))return!0;return o===this.callCount}}var timesInWords=__webpack_require__(396),wrapMethod=__webpack_require__(397),fn=__webpack_require__(234),extend=__webpack_require__(247),spyCall=__webpack_require__(393),deepEqual=__webpack_require__(362),format=__webpack_require__(363),push=Array.prototype.push,slice=Array.prototype.slice,callId=0,vars="a,b,c,d,e,f,g,h,i,j,k,l",uuid=0,spyApi={reset:function(){if(this.invoking){var e=new Error("Cannot reset Sinon function while invoking it. Move the call to .reset outside of the callback.");throw e.name="InvalidResetException",e}if(this.called=!1,this.notCalled=!0,this.calledOnce=!1,this.calledTwice=!1,this.calledThrice=!1,this.callCount=0,this.firstCall=null,this.secondCall=null,this.thirdCall=null,this.lastCall=null,this.calledWithNew=!1,
this.args=[],this.returnValues=[],this.thisValues=[],this.exceptions=[],this.callIds=[],this.fakes)for(var t=0;t<this.fakes.length;t++)this.fakes[t].reset()},create:function(e){var t;"function"!=typeof e?e=function(){}:t=fn.getName(e);var n=createProxy(e);return extend(n,spy),delete n.create,extend(n,e),n.reset(),n.prototype=e.prototype,n.displayName=t||"spy",n.toString=fn.toString,n.instantiateFake=spy.create,n.id="spy#"+uuid++,n},invoke:function(e,t,n){var r,i,o=matchingFake(this.fakes,n);incrementCallCount.call(this),push.call(this.thisValues,t),push.call(this.args,n),push.call(this.callIds,callId++),createCallProperties.call(this);try{this.invoking=!0,i=o?o.invoke(e,t,n):(this.func||e).apply(t,n);var a=this.getCall(this.callCount-1);a.calledWithNew()&&"object"!=typeof i&&(i=t)}catch(s){r=s}finally{delete this.invoking}if(push.call(this.exceptions,r),push.call(this.returnValues,i),createCallProperties.call(this),void 0!==r)throw r;return i},named:function(e){return this.displayName=e,this},getCall:function(e){return 0>e||e>=this.callCount?null:spyCall(this,this.thisValues[e],this.args[e],this.returnValues[e],this.exceptions[e],this.callIds[e])},getCalls:function(){var e,t=[];for(e=0;e<this.callCount;e++)t.push(this.getCall(e));return t},calledBefore:function(e){return this.called?e.called?this.callIds[0]<e.callIds[e.callIds.length-1]:!0:!1},calledAfter:function(e){return this.called&&e.called?this.callIds[this.callCount-1]>e.callIds[e.callCount-1]:!1},withArgs:function(){var e=slice.call(arguments);if(this.fakes){var t=matchingFake(this.fakes,e,!0);if(t)return t}else this.fakes=[];var n=this,r=this.instantiateFake();r.matchingAguments=e,r.parent=this,push.call(this.fakes,r),r.withArgs=function(){return n.withArgs.apply(n,arguments)};for(var i=0;i<this.args.length;i++)r.matches(this.args[i])&&(incrementCallCount.call(r),push.call(r.thisValues,this.thisValues[i]),push.call(r.args,this.args[i]),push.call(r.returnValues,this.returnValues[i]),push.call(r.exceptions,this.exceptions[i]),push.call(r.callIds,this.callIds[i]));return createCallProperties.call(r),r},matches:function(e,t){var n=this.matchingAguments;return n.length<=e.length&&deepEqual(n,e.slice(0,n.length))?!t||n.length==e.length:void 0},printf:function(e){var t,n=this,r=slice.call(arguments,1);return(e||"").replace(/%(.)/g,function(e,i){if(t=spyApi.formatters[i],"function"==typeof t)return t.call(null,n,r);if(!isNaN(parseInt(i,10))){var o=r[i-1];return format(o)}return"%"+i})}};delegateToCalls("calledOn",!0),delegateToCalls("alwaysCalledOn",!1,"calledOn"),delegateToCalls("calledWith",!0),delegateToCalls("calledWithMatch",!0),delegateToCalls("alwaysCalledWith",!1,"calledWith"),delegateToCalls("alwaysCalledWithMatch",!1,"calledWithMatch"),delegateToCalls("calledWithExactly",!0),delegateToCalls("alwaysCalledWithExactly",!1,"calledWithExactly"),delegateToCalls("neverCalledWith",!1,"notCalledWith",function(){return!0}),delegateToCalls("neverCalledWithMatch",!1,"notCalledWithMatch",function(){return!0}),delegateToCalls("threw",!0),delegateToCalls("alwaysThrew",!1,"threw"),delegateToCalls("returned",!0),delegateToCalls("alwaysReturned",!1,"returned"),delegateToCalls("alwaysCalledWithNew",!1,"calledWithNew"),delegateToCalls("callArg",!1,"callArgWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgWith=spyApi.callArg,delegateToCalls("callArgOn",!1,"callArgOnWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgOnWith=spyApi.callArgOn,delegateToCalls("yield",!1,"yield",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),spyApi.invokeCallback=spyApi["yield"],delegateToCalls("yieldOn",!1,"yieldOn",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),delegateToCalls("yieldTo",!1,"yieldTo",function(e){throw new Error(this.toString()+" cannot yield to '"+e+"' since it was not yet invoked.")}),delegateToCalls("yieldToOn",!1,"yieldToOn",function(e){throw new Error(this.toString()+" cannot yield to '"+e+"' since it was not yet invoked.")}),spyApi.formatters={c:function(e){return timesInWords(e.callCount)},n:function(e){return e.toString()},C:function(e){for(var t=[],n=0,r=e.callCount;r>n;++n){var i="    "+e.getCall(n).toString();/\n/.test(t[n-1])&&(i="\n"+i),push.call(t,i)}return t.length>0?"\n"+t.join("\n"):""},t:function(e){for(var t=[],n=0,r=e.callCount;r>n;++n)push.call(t,format(e.thisValues[n]));return t.join(", ")},"*":function(e,t){for(var n=[],r=0,i=t.length;i>r;++r)push.call(n,format(t[r]));return n.join(", ")}},extend(spy,spyApi),module.exports=spy},function(e,t,n){"use strict";function r(e,t,n){if(n&&"function"!=typeof n)throw new TypeError("Custom stub should be function");var i;if(i=n?s(n):r.create(),!e&&void 0===t)return r.create();if(void 0===t&&"object"==typeof e){for(var o in e)"function"==typeof e[o]&&r(e,o);return e}return u(e,t,i)}function i(e){return e.defaultBehavior||o(e)||c.create(e)}function o(e){return e.parent&&a(e.parent)}function a(e){var t=e.behaviors[e.callCount-1];return t&&t.isPresent()?t:i(e)}var s=n(394),u=n(397),c=n(646),l=n(247),f=n(234),h=0,p={create:function(){var e=function(){return a(e).invoke(this,arguments)};e.id="stub#"+h++;var t=e;return e=s(e),e.func=t,l(e,r),e.instantiateFake=r.create,e.displayName="stub",e.toString=f.toString,e.defaultBehavior=null,e.behaviors=[],e},resetBehavior:function(){var e;if(this.defaultBehavior=null,this.behaviors=[],delete this.returnValue,delete this.returnArgAt,this.returnThis=!1,this.fakes)for(e=0;e<this.fakes.length;e++)this.fakes[e].resetBehavior()},onCall:function(e){return this.behaviors[e]||(this.behaviors[e]=c.create(this)),this.behaviors[e]},onFirstCall:function(){return this.onCall(0)},onSecondCall:function(){return this.onCall(1)},onThirdCall:function(){return this.onCall(2)}};for(var d in c)c.hasOwnProperty(d)&&!p.hasOwnProperty(d)&&"create"!=d&&"withArgs"!=d&&"invoke"!=d&&(p[d]=function(e){return function(){return this.defaultBehavior=this.defaultBehavior||c.create(this),this.defaultBehavior[e].apply(this.defaultBehavior,arguments),this}}(d));l(r,p),e.exports=r},function(e,t,n){"use strict";e.exports=function(e){switch(e){case 1:return"once";case 2:return"twice";case 3:return"thrice";default:return(e||0)+" times"}}},function(e,t,n){"use strict";function r(e,t){for(var n in t)o.call(e,n)||(e[n]=t[n])}function i(e){return"function"==typeof e||!!(e&&e.constructor&&e.call&&e.apply)}var o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!e)throw new TypeError("Should wrap property of object");if("function"!=typeof n)throw new TypeError("Method wrapper should be function");var a,s=e[t];if(i(s)){if(s.restore&&s.restore.sinon)a=new TypeError("Attempted to wrap "+t+" which is already wrapped");else if(s.calledBefore){var u=s.returns?"stubbed":"spied on";a=new TypeError("Attempted to wrap "+t+" which is already "+u)}}else a=new TypeError("Attempted to wrap "+typeof s+" property "+t+" as function");if(a)throw s&&s.stackTrace&&(a.stack+="\n--------------\n"+s.stackTrace),a;var c=e.hasOwnProperty?e.hasOwnProperty(t):o.call(e,t);return e[t]=n,n.displayName=t,n.stackTrace=new Error("Stack Trace for original").stack,n.restore=function(){c||delete e[t],e[t]===n&&(e[t]=s)},n.restore.sinon=!0,r(n,s),n}},function(e,t,n){(function(t){"use strict";function r(e,t){this.type=e,this.target=i.defaults(t,null),this.timeStamp=Date.now()}var i=n(35),o=n(34);i.inherits(r,t.Event),"undefined"==typeof t.Event&&(t.Event=r),e.exports=o.Event=r}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return""+e.md5+" "+[e.info.title].concat(a(e.info.subtitles)).join(" ")}function i(e,t){s("send","event","song","play",e.title),s("send","event","game","start",r(t),t.info.level)}function o(e,t,n){var i=n.player(n.game.players[0]);s("send","event","song","finish",e.title),s("send","event","game","finish",r(t),i.stats.score)}var a=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};t.gameStart=i,t.gameFinish=o,Object.defineProperty(t,"__esModule",{value:!0});var s=window.ga||function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];console.log.apply(console,["[log]"].concat(t))}},function(e,t,n){"use strict";function r(e){var t=e.server,n=e.song,r=e.chart;return u(regeneratorRuntime.mark(function o(){var e,a,s,u,b,_,T,C,S,A,k;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return l.enabled&&!E()&&(e=/Safari/.test(navigator.userAgent)&&!/Chrom/.test(navigator.userAgent),e||l.request()),a=t.url+"/"+n.path+"/"+r.file,s=c(a,"assets/"),u={bms:new d(a),assets:new m(s),options:{audioInputLatency:+h.latency||0,tutorial:n.tutorial,players:[{speed:+x.get("player.P1.speed")||1,autoplay:!1,placement:x.get("player.P1.panel"),scratch:x.get("player.P1.scratch"),input:{keyboard:x.getKeyboardMapping()}}]}},b=v.load(u),_=b.tasks,T=b.promise,C=f.createElement(y,{tasks:_,song:r.info}),o.next=10,p.push(C);case 10:return w.gameStart(n,r),o.next=13,T;case 13:return S=o.sent,o.next=16,p.display(new g(S.display));case 16:return S.start(),o.next=19,S.promise;case 19:if(A=o.sent,w.gameFinish(n,r,A),k=A.player(A.game.players[0]),x.set("player.P1.speed",k.speed),!A.finished){o.next=26;break}return o.next=26,i(k,r);case 26:return S.destroy(),o.next=29,p.pop();case 29:case"end":return o.stop()}},o,this)}))}function i(e,t){return new Promise(function(n){var r=e.stats,i={result:{1:r.counts[1],2:r.counts[2],3:r.counts[3],4:r.counts[4],missed:r.counts[_],score:r.score,maxCombo:r.maxCombo,accuracy:r.accuracy,grade:o(r)},chart:t,onExit:n};p.display(f.createElement(b,i)).done()})}function o(e){var t=e.score;return 3e5>t?"F":35e4>t?"D":4e5>t?"C":45e4>t?"B":5e5>t?"A":"S"}var a=function(e){return e&&e.__esModule?e:{"default":e}},s=function(e){return e&&e.__esModule?e["default"]:e};t.launch=r,Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(45)),c=n(120).resolve,l=s(n(404)),f=s(n(7)),h=s(n(208)),p=s(n(116)),d=s(n(289)),m=s(n(266)),v=a(n(283)),g=s(n(279)),y=s(n(288)),b=s(n(274)),x=a(n(259)),w=a(n(399)),_=n(73).MISSED,E=n(121).shouldDisableFullScreen},,function(e,t,n){function r(e,t,n,r){var o={showHidden:t,seen:[],stylize:function(e){return e}};return i(o,e,"undefined"==typeof n?2:n)}function i(e,n,r){if(n&&"function"==typeof n.inspect&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var d=n.inspect(r);return"string"!=typeof d&&(d=i(e,d,r)),d}var b=o(e,n);if(b)return b;if(y(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion){var x=new XMLSerializer;return x.serializeToString(n)}var w="http://www.w3.org/1999/xhtml",_=document.createElementNS(w,"_");return _.appendChild(n.cloneNode(!1)),html=_.innerHTML.replace("><",">"+n.innerHTML+"<"),_.innerHTML="",html}catch(E){}}var T=g(n),C=e.showHidden?v(n):T;if(0===C.length||p(n)&&(1===C.length&&"stack"===C[0]||2===C.length&&"description"===C[0]&&"stack"===C[1])){if("function"==typeof n){var S=m(n),A=S?": "+S:"";return e.stylize("[Function"+A+"]","special")}if(f(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(h(n))return e.stylize(Date.prototype.toUTCString.call(n),"date");if(p(n))return a(n)}var k="",O=!1,M=["{","}"];if(l(n)&&(O=!0,M=["[","]"]),"function"==typeof n){var S=m(n),A=S?": "+S:"";k=" [Function"+A+"]"}if(f(n)&&(k=" "+RegExp.prototype.toString.call(n)),h(n)&&(k=" "+Date.prototype.toUTCString.call(n)),p(n))return a(n);if(0===C.length&&(!O||0==n.length))return M[0]+k+M[1];if(0>r)return f(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var N;return N=O?s(e,n,r,T,C):C.map(function(t){return u(e,n,r,T,t,O)}),e.seen.pop(),c(N,k,M)}function o(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string");case"number":return 0===t&&1/t===-(1/0)?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean")}return null===t?e.stylize("null","null"):void 0}function a(e){return"["+Error.prototype.toString.call(e)+"]"}function s(e,t,n,r,i){for(var o=[],a=0,s=t.length;s>a;++a)o.push(Object.prototype.hasOwnProperty.call(t,String(a))?u(e,t,n,r,String(a),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(u(e,t,n,r,i,!0))}),o}function u(e,t,n,r,o,a){var s,u;if(t.__lookupGetter__&&(t.__lookupGetter__(o)?u=t.__lookupSetter__(o)?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.__lookupSetter__(o)&&(u=e.stylize("[Setter]","special"))),r.indexOf(o)<0&&(s="["+o+"]"),u||(e.seen.indexOf(t[o])<0?(u=null===n?i(e,t[o],null):i(e,t[o],n-1),u.indexOf("\n")>-1&&(u=a?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),"undefined"==typeof s){if(a&&o.match(/^\d+$/))return u;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function c(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function l(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===d(e)}function f(e){return"object"==typeof e&&"[object RegExp]"===d(e)}function h(e){return"object"==typeof e&&"[object Date]"===d(e)}function p(e){return"object"==typeof e&&"[object Error]"===d(e)}function d(e){return Object.prototype.toString.call(e)}var m=n(426),v=n(526),g=n(523);e.exports=r;var y=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}},,function(e,t,n){/*!
	* screenfull
	* v2.0.0 - 2014-12-22
	* (c) Sindre Sorhus; MIT License
	*/
!function(){"use strict";var t="undefined"!=typeof e&&e.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,r=function(){for(var e,t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,i=n.length,o={};i>r;r++)if(e=n[r],e&&e[1]in document){for(r=0,t=e.length;t>r;r++)o[n[0][r]]=e[r];return o}return!1}(),i={request:function(e){var t=r.requestFullscreen;e=e||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[t]():e[t](n&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[r.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},raw:r};return r?(Object.defineProperties(i,{isFullscreen:{get:function(){return!!document[r.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[r.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!document[r.fullscreenEnabled]}}}),void(t?e.exports=i:window.screenfull=i)):void(t?e.exports=!1:window.screenfull=!1)}()},function(e,t,n){"use strict";function r(e,t,n,r){i.defineAttribute(this,"sampleRate","readonly",r,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"length","readonly",n,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"duration","readonly",n/r,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"numberOfChannels","readonly",t,function(e){throw new TypeError(i.formatter.concat(this,e))}),Object.defineProperties(this,{$name:{value:"AudioBuffer"},$context:{value:e}}),this._data=new Array(t);for(var o=0;t>o;o++)this._data[o]=new Float32Array(n)}var i=n(35),o=n(118),a=n(34),s=function(){throw new TypeError("Illegal constructor: use audioContext.createBuffer(numberOfChannels: number, length: number, sampleRate: number)")};i.inherits(r,s),r.exports=s,s.prototype.getChannelData=function(e){var t=new o(this,"getChannelData",[{name:"channel",type:"number"}]);return t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)}),t.assert(e>=0&&e<this._data.length,function(){throw new TypeError(t.form+"; channel index ("+e+") exceeds number of channels (#{"+this._data.length+"})")}),this._data[e]},r.prototype.toJSON=function(){var e={name:this.$name,sampleRate:this.sampleRate,length:this.length,duration:this.duration,numberOfChannels:this.numberOfChannels};return this.$context.VERBOSE_JSON&&(e.data=this._data.map(function(e){return Array.prototype.slice.call(e)})),e},e.exports=a.AudioBuffer=r},function(e,t,n){"use strict";function r(e){return/[aeiou]/i.test(e.charAt(0))?"an":"a"}e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r="";return e?(r+=e.constructor.name,t&&(r+="#"+t)):r+=t,r+="(",r+=n.map(function(e){return e.name+": "+e.type}).join(", "),r+=")"}function i(e,t){var n="";return e=e.replace(/^optional\s*/,"").trim(),n+="should be "+a(e)+" "+e+", ",n+="but got: "+s(t)}function o(e,t){return e.constructor.name+"#"+t}var a=n(406),s=n(726);e.exports={methodForm:r,shouldBeButGot:i,concat:o}},function(e,t,n){(function(t){"use strict";function n(e,n){switch(n){case"boolean":return"boolean"==typeof e;case"function":return"function"==typeof e;case"number":return"number"==typeof e&&!isNaN(e);case"string":return"string"==typeof e;case"null":return null===e}if(/[A-Z]/.test(n.charAt(0))&&"function"==typeof t[n])return e instanceof t[n];var i=/^enum\s*{(.*?)}$/.exec(n);return i?r(e,i[1].split(",").map(function(e){return e.trim()})):!1}function r(e,t){return t.some(function(t){return/^\d+$/.test(t)?e===+t:e===t})}e.exports=function(e,t){return t.split("|").some(function(t){return n(e,t.trim())})}}).call(t,function(){return this}())},function(e,t,n){e.exports=function(){throw new Error("define cannot be used indirect")}},,,,,,,,,,,,,,function(e,t,n){(function(e){"use strict";function r(){i(),o(),a()}function i(){var t=document.createElement("div");t.id="mocha",document.body.appendChild(t),mocha.setup("bdd"),u.use(c),u.use(l),e.expect=u.expect,e.sinon=f}function o(){n(693)}function a(){var e=[];mocha.run().on("test end",function(e){e.err&&(console.log("%cFailed Spec: %c%s\n %c%s","color: black; font: 16px sans-serif","color: black; font: bold 16px sans-serif",e.title,"color: red; font: bold 1em sans-serif",e.err.message),console.error(e.err.stack))}).on("test end",function(t){e.push("passed"===t.state?{fullName:t.title,status:"passed"}:t.pending?{fullName:t.title,status:"pending"}:{fullName:t.title,status:"failed",failedExpectations:[{message:t.err.message,stack:t.err.stack}]})}).on("suite end",function(t){if(t.root){var n=window.__coverage__||null,r=JSON.stringify({specs:e,coverage:n}),i=new XMLHttpRequest;i.open("POST","/api/test",!0),i.setRequestHeader("Content-Type","application/json"),i.send(r)}})}var s=function(e){return e&&e.__esModule?e["default"]:e};t.main=r,Object.defineProperty(t,"__esModule",{value:!0}),n(641),n(686),n(688);var u=s(n(513)),c=s(n(512)),l=s(n(643)),f=s(n(644))}).call(t,function(){return this}())},,function(e,t,n){/*!
	 * Chai - getActual utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t){return t.length>4?t[4]:e._obj}},function(e,t,n){/*!
	 * Chai - getName utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e){if(e.name)return e.name;var t=/^\s?function ([^(]*)\(/.exec(e);return t&&t[1]?t[1]:""}},function(e,t,n){/*!
	 * ## parsePath(path)
	 *
	 * Helper function used to parse string object
	 * paths. Use in conjunction with `_getPathValue`.
	 *
	 *      var parsed = parsePath('myobject.property.subprop');
	 *
	 * ### Paths:
	 *
	 * * Can be as near infinitely deep and nested
	 * * Arrays are also valid using the formal `myobject.document[3].property`.
	 * * Literal dots and brackets (not delimiter) must be backslash-escaped.
	 *
	 * @param {String} path
	 * @returns {Object} parsed
	 * @api private
	 */
function r(e){var t=e.replace(/([^\\])\[/g,"$1.["),n=t.match(/(\\\.|[^.]+?)+/g);return n.map(function(e){var t=/^\[(\d+)\]$/,n=t.exec(e);return n?{i:parseFloat(n[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}})}/*!
	 * ## _getPathValue(parsed, obj)
	 *
	 * Helper companion function for `.parsePath` that returns
	 * the value located at the parsed address.
	 *
	 *      var value = getPathValue(parsed, obj);
	 *
	 * @param {Object} parsed definition from `parsePath`.
	 * @param {Object} object to search against
	 * @param {Number} object to search against
	 * @returns {Object|Undefined} value
	 * @api private
	 */
function i(e,t,n){var r,i=t;n=void 0===n?e.length:n;for(var o=0,a=n;a>o;o++){var s=e[o];i?("undefined"!=typeof s.p?i=i[s.p]:"undefined"!=typeof s.i&&(i=i[s.i]),o==a-1&&(r=i)):r=void 0}return r}/*!
	 * Chai - getPathInfo utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var o=n(428);e.exports=function(e,t){var n=r(e),a=n[n.length-1],s={parent:n.length>1?i(n,t,n.length-1):t,name:a.p||a.i,value:i(n,t)};return s.exists=o(s.name,s.parent),s}},function(e,t,n){/*!
	 * Chai - hasProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(431),i={number:Number,string:String};e.exports=function(e,t){var n=r(t);return"null"===n||"undefined"===n?!1:(i[n]&&"object"!=typeof t&&(t=new i[n](t)),e in t)}},function(e,t,n){/*!
	 * Chai - flag utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(402),i=n(303);e.exports=function(e){var t=r(e),n=Object.prototype.toString.call(e);if(i.truncateThreshold&&t.length>=i.truncateThreshold){if("[object Function]"===n)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+e.length+") ]";if("[object Object]"===n){var o=Object.keys(e),a=o.length>2?o.splice(0,2).join(", ")+", ...":o.join(", ");return"{ Object ("+a+") }"}return t}return t}},function(e,t,n){/*!
	 * Chai - transferFlags utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));t.__flags||(t.__flags=Object.create(null)),n=3===arguments.length?n:!0;for(var i in r)(n||"object"!==i&&"ssfi"!==i&&"message"!=i)&&(t.__flags[i]=r[i])}},function(e,t,n){/*!
	 * Chai - type utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Detectable javascript natives
	 */
var r={"[object Arguments]":"arguments","[object Array]":"array","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object RegExp]":"regexp","[object String]":"string"};e.exports=function(e){var t=Object.prototype.toString.call(e);return r[t]?r[t]:null===e?"null":void 0===e?"undefined":e===Object(e)?"object":typeof e}},,,,,,function(e,t,n){"use strict";function r(e){return e.fakes||(e.fakes=[]),e.fakes}function i(e,t){for(var n=r(e),i=0,o=n.length;o>i;i+=1)"function"==typeof n[i][t]&&n[i][t]()}function o(e){for(var t=r(e),n=0;n<t.length;)t.splice(n,1)}var a=n(394),s=n(395),u=n(440),c=[].push,l=Object.prototype.hasOwnProperty;e.exports={verify:function(){i(this,"verify")},restore:function(){i(this,"restore"),o(this)},reset:function(){i(this,"reset")},verifyAndRestore:function(){var e;try{this.verify()}catch(t){e=t}if(this.restore(),e)throw e},add:function(e){return c.call(r(this),e),e},spy:function(){return this.add(a.apply(null,arguments))},stub:function(e,t,n){if(t){var r=e[t];if("function"!=typeof r){if(!l.call(e,t))throw new TypeError("Cannot stub non-existent own property "+t);return e[t]=n,this.add({restore:function(){e[t]=r}})}}if(!t&&e&&"object"==typeof e){var i=s.apply(null,arguments);for(var o in i)"function"==typeof i[o]&&this.add(i[o]);return i}return this.add(s.apply(null,arguments))},mock:function(){return this.add(u.apply(null,arguments))},inject:function(e){var t=this;return e.spy=function(){return t.spy.apply(t,arguments)},e.stub=function(){return t.stub.apply(t,arguments)},e.mock=function(){return t.mock.apply(t,arguments)},e}}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;t.defaultConfig={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},t.getConfig=function(e){var n={};e=e||{};var i=t.defaultConfig;for(var o in i)r.call(i,o)&&(n[o]=r.call(e,o)?e[o]:i[o]);return n}},function(e,t,n){"use strict";function r(e){var t="number"==typeof e.minCalls;return!t||e.callCount>=e.minCalls}function i(e){return"number"!=typeof e.maxCalls?!1:e.callCount===e.maxCalls}function o(e,t){return d&&d.isMatcher(e)?e.test(t):!0}function a(e){return 0==e?"never called":"called "+m(e)}function s(e){var t=e.minCalls,n=e.maxCalls;if("number"==typeof t&&"number"==typeof n){var r=m(t);return t!==n&&(r="at least "+r+" and at most "+m(n)),r}return"number"==typeof t?"at least "+m(t):"at most "+m(n)}var u=n(247),c=n(395),l=n(394),f=n(363),h=n(362),p=n(393),d=n(269),m=n(396),v=Array.prototype.push,g=Array.prototype.slice;e.exports={minCalls:1,maxCalls:1,create:function(t){var n=u(c(),e.exports);return delete n.create,n.method=t,n},invoke:function(e,t,n){return this.verifyCallAllowed(t,n),l.invoke.apply(this,arguments)},atLeast:function(e){if("number"!=typeof e)throw new TypeError("'"+e+"' is not number");return this.limitsSet||(this.maxCalls=null,this.limitsSet=!0),this.minCalls=e,this},atMost:function(e){if("number"!=typeof e)throw new TypeError("'"+e+"' is not number");return this.limitsSet||(this.minCalls=null,this.limitsSet=!0),this.maxCalls=e,this},never:function(){return this.exactly(0)},once:function(){return this.exactly(1)},twice:function(){return this.exactly(2)},thrice:function(){return this.exactly(3)},exactly:function(e){if("number"!=typeof e)throw new TypeError("'"+e+"' is not a number");return this.atLeast(e),this.atMost(e)},met:function(){return!this.failed&&r(this)},verifyCallAllowed:function(t,n){if(i(this)&&(this.failed=!0,e.exports.fail(this.method+" already called "+m(this.maxCalls))),"expectedThis"in this&&this.expectedThis!==t&&e.exports.fail(this.method+" called with "+t+" as thisValue, expected "+this.expectedThis),"expectedArguments"in this){n||e.exports.fail(this.method+" received no arguments, expected "+f(this.expectedArguments)),n.length<this.expectedArguments.length&&e.exports.fail(this.method+" received too few arguments ("+f(n)+"), expected "+f(this.expectedArguments)),this.expectsExactArgCount&&n.length!==this.expectedArguments.length&&e.exports.fail(this.method+" received too many arguments ("+f(n)+"), expected "+f(this.expectedArguments));for(var r=0,a=this.expectedArguments.length;a>r;r+=1)o(this.expectedArguments[r],n[r])||e.exports.fail(this.method+" received wrong arguments "+f(n)+", didn't match "+this.expectedArguments.toString()),h(this.expectedArguments[r],n[r])||e.exports.fail(this.method+" received wrong arguments "+f(n)+", expected "+f(this.expectedArguments))}},allowsCall:function(e,t){if(this.met()&&i(this))return!1;if("expectedThis"in this&&this.expectedThis!==e)return!1;if(!("expectedArguments"in this))return!0;if(t=t||[],t.length<this.expectedArguments.length)return!1;if(this.expectsExactArgCount&&t.length!=this.expectedArguments.length)return!1;for(var n=0,r=this.expectedArguments.length;r>n;n+=1){if(!o(this.expectedArguments[n],t[n]))return!1;if(!h(this.expectedArguments[n],t[n]))return!1}return!0},withArgs:function(){return this.expectedArguments=g.call(arguments),this},withExactArgs:function(){return this.withArgs.apply(this,arguments),this.expectsExactArgCount=!0,this},on:function(e){return this.expectedThis=e,this},toString:function(){var e=(this.expectedArguments||[]).slice();this.expectsExactArgCount||v.call(e,"[...]");var t=p.toString.call({proxy:this.method||"anonymous mock expectation",args:e}),n=t.replace(", [...","[, ...")+" "+s(this);return this.met()?"Expectation met: "+n:"Expected "+n+" ("+a(this.callCount)+")"},verify:function(){return this.met()?e.exports.pass(this.toString()):e.exports.fail(this.toString()),!0},pass:function(e){},fail:function(e){var t=new Error(e);throw t.name="ExpectationError",t}}},function(e,t,n){"use strict";function r(e){return e?r.create(e):o.create("Anonymous mock")}function i(e,t){if(e)for(var n=0,r=e.length;r>n;n+=1)t(e[n])}var o=n(439),a=n(247),s=n(397),u=n(393),c=Array.prototype.push;e.exports=a(r,{create:function(e){if(!e)throw new TypeError("object is null");var t=a({},r);return t.object=e,delete t.create,t},expects:function(e){if(!e)throw new TypeError("method is falsy");if(this.expectations||(this.expectations={},this.proxies=[]),!this.expectations[e]){this.expectations[e]=[];var t=this;s(this.object,e,function(){return t.invokeMethod(e,this,arguments)}),c.call(this.proxies,e)}var n=o.create(e);return c.call(this.expectations[e],n),n},restore:function(){var e=this.object;i(this.proxies,function(t){"function"==typeof e[t].restore&&e[t].restore()})},verify:function(){var e=this.expectations||{},t=[],n=[];return i(this.proxies,function(r){i(e[r],function(e){e.met()?c.call(n,e.toString()):c.call(t,e.toString())})}),this.restore(),t.length>0?o.fail(t.concat(n).join("\n")):n.length>0&&o.pass(t.concat(n).join("\n")),!0},invokeMethod:function(e,t,n){var r,i=this.expectations&&this.expectations[e],a=i&&i.length||0;for(r=0;a>r;r+=1)if(!i[r].met()&&i[r].allowsCall(t,n))return i[r].apply(t,n);var s,l=[],f=0;for(r=0;a>r;r+=1)i[r].allowsCall(t,n)?s=s||i[r]:f+=1,c.call(l,"    "+i[r].toString());return 0===f?s.apply(t,n):(l.unshift("Unexpected call: "+u.toString.call({proxy:e,args:n})),void o.fail(l.join("\n")))}})},function(e,t,n){"use strict";function r(e,t,n,r){r&&(!t.injectInto||n in t.injectInto?l.call(e.args,r):(t.injectInto[n]=r,e.injectedKeys.push(n)))}function i(t){var n=o.create(e.exports);return t.useFakeServer&&("object"==typeof t.useFakeServer&&(n.serverPrototype=t.useFakeServer),n.useFakeServer()),t.useFakeTimers&&("object"==typeof t.useFakeTimers?n.useFakeTimers.apply(n,t.useFakeTimers):n.useFakeTimers()),n}var o=n(234),a=n(247),s=n(437),u=n(651),c=n(269),l=[].push;e.exports=a(o.create(s),{useFakeTimers:function(){return this.clock=u.apply(null,arguments),this.add(this.clock)},serverPrototype:{},useFakeServer:function(){var e=this.serverPrototype||sinon.fakeServer;return e&&e.create?(this.server=e.create(),this.add(this.server)):null},inject:function(e){return s.inject.call(this,e),this.clock&&(e.clock=this.clock),this.server&&(e.server=this.server,e.requests=this.server.requests),e.match=c,e},restore:function(){s.restore.apply(this,arguments),this.restoreContext()},restoreContext:function(){if(this.injectedKeys){for(var e=0,t=this.injectedKeys.length;t>e;e++)delete this.injectInto[this.injectedKeys[e]];this.injectedKeys=[]}},create:function(t){if(!t)return o.create(e.exports);var n=i(t);n.args=n.args||[],n.injectedKeys=[],n.injectInto=t.injectInto;var a,s,u=n.inject({});if(t.properties)for(var c=0,l=t.properties.length;l>c;c++)a=t.properties[c],s=u[a]||"sandbox"==a&&n,r(n,t,a,s);else r(n,t,"sandbox",s);return n},match:c})},function(e,t,n){"use strict";function r(e){function t(){var t=i.getConfig(i.config);t.injectInto=t.injectIntoThis&&this||t.injectInto;var n,r,a=o(t),s=!1,u=Array.prototype.slice.call(arguments);if(u.length>0&&"function"==typeof u[arguments.length-1]){var c=u[arguments.length-1];u[arguments.length-1]=function(e){if(e)throw a.restore(),n;a.verifyAndRestore(),c(e)},s=!0}var l=u.concat(a.args);try{r=e.apply(this,l)}catch(f){n=f}if(!s){if("undefined"!=typeof n)throw a.restore(),n;a.verifyAndRestore()}return r}var n=typeof e;if("function"!==n)throw new TypeError("sinon.test needs to wrap a test function, got "+n);return e.length?function(e){return t.apply(this,arguments)}:t}var i=n(438),o=n(441).create;r.config={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=Object.prototype.toString.call(e);return t.substring(8,t.length-1).toLowerCase()}},function(e,t,n){var r,i;(!0&&n(385)&&function(o){r=o,i="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==i&&(e.exports=i))}||"object"==typeof e&&function(t){e.exports=t()}||function(e){this.samsam=e()})(function(){function e(e){var t=e;return"number"==typeof e&&e!==t}function t(e){return f.toString.call(e).split(/[ \]]/)[1]}function n(e){if("Arguments"===t(e))return!0;if("object"!=typeof e||"number"!=typeof e.length||"Array"===t(e))return!1;if("function"==typeof e.callee)return!0;try{e[e.length]=6,delete e[e.length]}catch(n){return!0}return!1}function r(e){if(!e||1!==e.nodeType||!h)return!1;try{e.appendChild(h),e.removeChild(h)}catch(t){return!1}return!0}function i(e){var t,n=[];for(t in e)f.hasOwnProperty.call(e,t)&&n.push(t);return n}function o(e){return"function"==typeof e.getTime&&e.getTime()==e.valueOf()}function a(e){return 0===e&&1/e===-(1/0)}function s(t,n){return t===n||e(t)&&e(n)?0!==t||a(t)===a(n):void 0}function u(a,u){function c(e){return"object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof String?!1:!0}function l(e,t){var n;for(n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var h=[],p=[],d=[],m=[],v={};return function g(a,u,y,b){var x=typeof a,w=typeof u;if(a===u||e(a)||e(u)||null==a||null==u||"object"!==x||"object"!==w)return s(a,u);if(r(a)||r(u))return!1;var _=o(a),E=o(u);if(!(!_&&!E||_&&E&&a.getTime()===u.getTime()))return!1;if(a instanceof RegExp&&u instanceof RegExp&&a.toString()!==u.toString())return!1;var T=t(a),C=t(u),S=i(a),A=i(u);if(n(a)||n(u)){if(a.length!==u.length)return!1}else if(x!==w||T!==C||S.length!==A.length)return!1;var k,O,M,N,j,R,P,D,I,L,F;for(O=0,M=S.length;M>O;O++){if(k=S[O],!f.hasOwnProperty.call(u,k))return!1;if(N=a[k],j=u[k],R=c(N),P=c(j),D=R?l(h,N):-1,I=P?l(p,j):-1,L=-1!==D?d[D]:y+"["+JSON.stringify(k)+"]",F=-1!==I?m[I]:b+"["+JSON.stringify(k)+"]",v[L+F])return!0;if(-1===D&&R&&(h.push(N),d.push(L)),-1===I&&P&&(p.push(j),m.push(F)),R&&P&&(v[L+F]=!0),!g(N,j,L,F))return!1}return!0}(a,u,"$1","$2")}function c(e,t){if(0===t.length)return!0;var n,r,i,o;for(n=0,r=e.length;r>n;++n)if(l(e[n],t[0])){for(i=0,o=t.length;o>i;++i)if(!l(e[n+i],t[i]))return!1;return!0}return!1}var l,f=Object.prototype,h="undefined"!=typeof document&&document.createElement("div");return l=function p(e,n){if(n&&"function"==typeof n.test)return n.test(e);if("function"==typeof n)return n(e)===!0;if("string"==typeof n){n=n.toLowerCase();var r="string"==typeof e||!!e;return r&&String(e).toLowerCase().indexOf(n)>=0}if("number"==typeof n)return n===e;if("boolean"==typeof n)return n===e;if("undefined"==typeof n)return"undefined"==typeof e;if(null===n)return null===e;if("Array"===t(e)&&"Array"===t(n))return c(e,n);if(n&&"object"==typeof n){if(n===e)return!0;var i;for(i in n){var o=e[i];if("undefined"==typeof o&&"function"==typeof e.getAttribute&&(o=e.getAttribute(i)),null===n[i]||"undefined"==typeof n[i]){if(o!==n[i])return!1}else if("undefined"==typeof o||!p(o,n[i]))return!1}return!0}throw new Error("Matcher was not a string, a number, a function, a boolean or an object")},{isArguments:n,isElement:r,isDate:o,isNegZero:a,identical:s,deepEqual:u,match:l,keys:i}})},function(e,t,n){"use strict";function r(){if(!(this instanceof r))throw new TypeError("Failed to construct 'AudioContext': Please use the 'new' operator");A.call(this);var e=new s(this),t=a.sampleRate,n=function(){return this._microCurrentTime/1e6},o=new u(this);i.defineAttribute(this,"destination","readonly",e,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"sampleRate","readonly",t,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"currentTime","readonly",n,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"listener","readonly",o,function(e){throw new TypeError(i.formatter.concat(this,e))}),Object.defineProperties(this,{$name:{value:"AudioContext"},$context:{value:this}}),this._microCurrentTime=0,this._processedSamples=0,this._tick=0}var i=n(35),o=n(118),a=n(34),s=n(446),u=n(447),c=n(405),l=n(696),f=n(708),h=n(711),p=n(710),d=n(717),m=n(695),v=n(705),g=n(702),y=n(698),b=n(718),x=n(715),w=n(701),_=n(700),E=n(699),T=n(703),C=n(714),S=n(716),A=n(384);n(709),n(707),i.inherits(r,A),r.WEB_AUDIO_TEST_API_VERSION=a.VERSION,r.prototype.createBuffer=function(e,t,n){var r=new o(this,null,[{name:"numberOfChannels",type:"number"},{name:"length",type:"number"},{name:"sampleRate",type:"number"}]);return r.validateArguments(arguments,function(e){throw new TypeError(r.form+"; "+e)}),new c(this,e,t,n)},r.prototype.decodeAudioData=function(e,t,n){var r=new o(this,"decodeAudioData",[{name:"audioData",type:"ArrayBuffer"},{name:"successCallback",type:"function"},{name:"errorCallback",type:"optional function"}]);r.validateArguments(arguments,function(e){throw new TypeError(r.form+"; "+e)}),t=i.defaults(t,i.NOP),n=i.defaults(n,i.NOP);var a=this;setTimeout(function(){a.DECODE_AUDIO_DATA_FAILED?n():t(a.DECODE_AUDIO_DATA_RESULT||new c(a,2,1024,a.sampleRate))},0)},r.prototype.createBufferSource=function(){return new l(this)},r.prototype.createMediaElementSource=function(e){var t=new o(this,"createMediaElementSource",[{name:"mediaElement",type:"HTMLMediaElement"}]);return t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)}),new f(this,e)},r.prototype.createMediaStreamSource=function(e){var t=new o(this,"createMediaStreamSource",[{name:"mediaStream",type:"MediaStream"}]);return t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)}),new h(this,e)},r.prototype.createMediaStreamDestination=function(){return new p(this)},r.prototype.createScriptProcessor=function(e,t,n){var r=new o(this,"createScriptProcessor",[{name:"bufferSize",type:"enum { 256, 512, 1024, 2048, 4096, 8192, 16384 }"},{name:"numberOfInputChannels",type:"optional number"},{name:"numberOfOutputChannels",type:"optional number"}]);return r.validateArguments(arguments,function(e){throw new TypeError(r.form+"; "+e)}),e=i.defaults(e,0),t=i.defaults(t,2),n=i.defaults(n,2),new d(this,e,t,n)},r.prototype.createAnalyser=function(){return new m(this)},r.prototype.createGain=function(){return new v(this)},r.prototype.createDelay=function(e){var t=new o(this,"createDelay",[{name:"maxDelayTime",type:"optional number"}]);return t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)}),e=i.defaults(e,1),new g(this,e)},r.prototype.createBiquadFilter=function(){return new y(this)},r.prototype.createWaveShaper=function(){return new b(this)},r.prototype.createPanner=function(){return new x(this)},r.prototype.createConvolver=function(){return new w(this)},r.prototype.createChannelSplitter=function(e){var t=new o(this,"createChannelSplitter",[{name:"numberOfOutputs",type:"optional number"}]);return t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)}),e=i.defaults(e,6),new _(this,e)},r.prototype.createChannelMerger=function(e){var t=new o(this,"createChannelMerger",[{name:"numberOfInputs",type:"optional number"}]);return t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)}),e=i.defaults(e,6),new E(this,e)},r.prototype.createDynamicsCompressor=function(){return new T(this)},r.prototype.createOscillator=function(){return new C(this)},r.prototype.createPeriodicWave=function(e,t){function n(e,t){return 4096<e.length?"length of "+t+" array ("+e.length+") exceeds allow maximum of 4096":void 0}var r=new o(this,"createPeriodicWave",[{name:"real",type:"Float32Array",validate:n},{name:"imag",type:"Float32Array",validate:n}]);return r.validateArguments(arguments,function(e){throw new TypeError(r.form+"; "+e)}),r.assert(e.length===t.length,function(){throw new TypeError(r.form+"; length of real array ("+e.length+") and length of imaginary array ("+t.length+") must match")}),new S(e,t)},r.prototype.toJSON=function(){return this.destination.toJSON([])},r.prototype.$process=function(e){this._process(i.toMicroseconds(e))},r.prototype.$processTo=function(e){e=i.toMicroseconds(e),this._microCurrentTime<e&&this._process(e-this._microCurrentTime)},r.prototype.$reset=function(){this._microCurrentTime=0,this._processedSamples=0,this.destination.$inputs.forEach(function(e){e.disconnect()})},r.prototype._process=function(e){for(var t=this._microCurrentTime+e;this._microCurrentTime<t;){var n=Math.min(this._microCurrentTime+1e3,t),r=Math.floor(n/1e6*this.sampleRate),i=r-this._processedSamples;this._microCurrentTime=n,this._processedSamples=r,this.destination.$process(i,++this._tick)}},e.exports=a.AudioContext=r},function(e,t,n){"use strict";function r(e){o.call(this,e,{name:"AudioDestinationNode",numberOfInputs:1,numberOfOutputs:0,channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"});var t=2;i.defineAttribute(this,"maxChannelCount","readonly",t,function(e){throw new TypeError(i.formatter.concat(this,e))})}var i=n(35),o=n(98),a=n(34),s=function(){throw new TypeError("Illegal constructor")};i.inherits(s,o),i.inherits(r,s),r.exports=s,e.exports=a.AudioDestinationNode=r},function(e,t,n){"use strict";function r(e){var t=1,n=343.3;i.defineAttribute(this,"dopplerFactor","number",t,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"speedOfSound","number",n,function(e){throw new TypeError(i.formatter.concat(this,e))}),Object.defineProperties(this,{$name:{value:"AudioListener"},$context:{value:e}})}var i=n(35),o=n(118),a=n(34),s=function(){throw new TypeError("Illegal constructor")};i.inherits(r,s),r.exports=s,s.prototype.setPosition=function(){var e=new o(this,"setPosition",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)})},s.prototype.setOrientation=function(){var e=new o(this,"setOrientation",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"},{name:"xUp",type:"number"},{name:"yUp",type:"number"},{name:"zUp",type:"number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)})},s.prototype.setVelocity=function(){var e=new o(this,"setVelocity",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)})},e.exports=a.AudioListener=r},function(e,t,n){"use strict";function r(e){return e.hasOwnProperty("$id")?e.$name+"#"+e.$id:e.$name}e.exports=r},function(e,t,n){"use strict";function r(e){var t=0;if("number"==typeof e)return t=Math.floor(1e3*e*1e3)||0,Math.max(i,Math.min(t,o));var n=/^([0-5]\d):([0-5]\d)\.(\d\d\d)$/.exec(e);return n?(t+=+n[1],t*=60,t+=+n[2],t*=1e3,t+=+n[3],t*=1e3,Math.max(i,Math.min(t,o))):t}var i=0,o=864e8;e.exports=r},,,,,function(e,t,n){"use strict";function r(e){return new Promise(function(t){var n=e.bus.onValue(function(e){n(),t({value:e})})})}var i=function(e){return e&&e.__esModule?e:{"default":e}},o=function(e){return e&&e.__esModule?e["default"]:e},a=o(n(45)),s=i(n(258));describe("CollectionActions",function(){describe("loadCollection(url)",function(){it("should load the collection",a.wrap(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.loadCollection("/spec/app/fixtures"),t=r(s.startLoading),n=r(s.finishLoading),e.next=5,t;case 5:return expect(e.sent.value).to.deep.equal({url:"/spec/app/fixtures"}),e.next=8,n;case 8:expect(e.sent.value.songs).to.be.an["instanceof"](Array);case 9:case"end":return e.stop()}},e,this)}))),it("should call errorLoading when cannot load",a.wrap(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.loadCollection("/spec/app/fixtures/nonexistant"),e.next=3,r(s.errorLoading);case 3:case"end":return e.stop()}},t,this)})))})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}},i=function(e){return e&&e.__esModule?e["default"]:e},o=i(n(46)),a=i(n(14)),s=i(n(45)),u=n(388).MusicSelectStoreFactory,c=i(n(387)),l=r(n(258)),f=r(n(272));describe("MusicSelectStore",function(){var e=void 0,t=void 0,n="/spec/app/fixtures/index.json";before(s.wrap(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(o.get(n));case 2:t=e.sent;case 3:case"end":return e.stop()}},r,this)}))),beforeEach(function(){e=u(c)}),describe("during loading",function(){beforeEach(function(){l.startLoading({url:n})}),it("loading should be true",function(){void expect(e.get().loading).to.be["true"]}),it("songs should be empty array",function(){expect(e.get().songs).to.deep.equal([])})}),describe("after loading",function(){beforeEach(function(){l.startLoading({url:n}),l.finishLoading(t)}),it("loading should be false",function(){void expect(e.get().loading).to.be["false"]}),it("songs should be empty array",function(){expect(e.get().songs).to.have.length(t.songs.length)}),it("selected song should be tutorial",function(){void expect(!!e.get().songs[0].tutorial).to.be["true"]}),it("should select first matching song+chart when filtered",function(){f.setFilterText("toki"),expect(e.get().songs[0].title).to.equal("Toki"),expect(e.get().song).to.equal(e.get().songs[0]),expect(e.get().chart.file).to.equal("toki_beginner7.bms")}),it("should set song when selected",function(){f.selectSong(a.find(e.get().songs,{title:"mom"})),expect(e.get().song.artist).to.equal("w_tre"),expect(e.get().chart.file).to.equal("mom_s1.bme")}),it("should select and set chart with nearby level",function(){f.selectSong(a.find(e.get().songs,{title:"mom"})),f.selectChart(a.find(e.get().song.charts,{file:"mom_s4.bme"})),expect(e.get().chart.info.level).to.equal(12),f.selectSong(a.find(e.get().songs,{title:"L"})),expect(e.get().chart.file).to.equal("L_[SPA](XEIR).bme")})})})},function(e,t,n){"use strict";var r=n(505).Cachier;describe("Cachier",function(){var e=void 0,t=0,n=function(e){return function(t){return function(){var n=function(r){var i=Promise.resolve().then(t);return r>=e?i:i["catch"](function(){return Promise.delay(100).then(function(){return n(r+1)})})};return n(1)}}};beforeEach(function(){return e=new r("test."+(new Date).getTime()+"."+ ++t)}),afterEach(n(3)(function(){return e.destroyDatabase()})),describe(".connection",function(){it("should be a promise which fullfill with the db connection",function(){return e.connection.then(function(e){expect(e.constructor+"").to.match(/DBDatabase/)})})}),describe("#save",function(){it("stores a blob",function(){var t=new Blob(["hello"]);return expect(e.save("wow",t)).to.eventually.be.ok}),it("rejects when key is invalid",function(){var t=new Blob(["hello"]);return expect(e.save(void 0,t)).to.be.rejected})}),describe("with a blob saved",function(){beforeEach(function(){var t=new Blob(["hello"]);return e.save("wow2",t,{name:"example1"}).delay(10)}),describe("#load",function(){it("should return the blob value",function(){return e.load("wow2").then(function(e){var t=e.blob,n=e.metadata;expect(t.size).to.equal(5),expect(n).to.deep.equal({name:"example1"})})})}),describe("#save",function(){it("should replace content with a new blob",function(){var t=new Blob(["world!"]);return e.save("wow2",t).delay(10).then(function(){return e.load("wow2")}).then(function(e){var t=e.blob,n=e.metadata;expect(t.size).to.equal(6),expect(n).to.equal(void 0)})})}),describe("#delete",function(){it("should remove the blob",function(){return e["delete"]("wow3").then(function(){return expect(e.load("wow3")).to.be.rejected})})})}),describe("#destroyDatabase",function(){it("may be called twice",function(){return e.destroyDatabase()})}),describe("without blob support in IndexedDB",function(){it("still works",function(){var t=new Blob(["hello"],{type:"text/plain"});return e._NO_BLOB=!0,e.save("wow4",t).delay(10).then(function(){return e.load("wow4")}).then(function(e){var t=e.blob;expect(t.size).to.equal(5),expect(t.type).to.equal("text/plain")})})})})},function(e,t,n){"use strict";describe("The specs",function(){it("runs",function(){expect({runs:!0}.runs).to.equal(!0)})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(262)),o=n(271).playerWithBMS;describe("PlayerAudio",function(){function e(e){t=e,r={playAuto:sinon.stub().returns({}),playNote:sinon.stub().returns({}),playFree:sinon.stub().returns({})},n=new i({player:t,waveFactory:r})}var t=void 0,n=void 0,r=void 0;it("should play autokeysounds on correct time",function(){e({notechart:{autos:[{time:1,keysound:"0x"},{time:2,keysound:"0y"},{time:2,keysound:"0z"}],notes:[]},options:{autosound:!1}}),n.update(0),expect(r.playAuto).to.have.callCount(0),n.update(1),expect(r.playAuto).to.have.callCount(1),expect(r.playAuto).to.have.been.calledWith("0x"),n.update(2),expect(r.playAuto).to.have.callCount(3)}),it("should play notes automatically when autosound is on",function(){e({notechart:{autos:[],notes:[{time:1,keysound:"0x"}]},options:{autosound:!0}}),n.update(1),expect(r.playNote).to.have.been.calledWith("0x")}),it("should not play notes automatically when autosound is off",function(){e({notechart:{autos:[],notes:[{time:1,keysound:"0x"}]},options:{}}),n.update(1),void expect(r.playNote).to.not.have.been.called}),it("should play notes ahead of time",function(){e({notechart:{autos:[{time:1,keysound:"0x"}],notes:[]},options:{}}),n.update(.999),expect(r.playAuto).to.have.been.calledWith("0x"),expect(r.playAuto.getCall(0).args[1]).to.be.closeTo(.001,1e-5)}),it("should play hit notes",function(){e(o()),n.update(.999,{notifications:{sounds:[{note:{keysound:"0x"},type:"hit",judgment:1}]},stats:{}}),expect(r.playNote).to.have.been.calledWith("0x")}),it("badly hit note should sound off-pitch",function(){e(o());var t={bad:sinon.stub()};r.playNote.returns(t),n.update(.999,{notifications:{sounds:[{note:{keysound:"0x"},type:"hit",judgment:4}]},stats:{}}),void expect(t.bad).to.have.been.called}),it("should work even without audio",function(){e(o()),r.playNote.returns(null),n.update(.999,{notifications:{sounds:[{note:{keysound:"0x"},type:"hit",judgment:4}]},stats:{}})}),it("should stop sound when broken",function(){e(o());var t={keysound:"0x"},i={stop:sinon.spy()};r.playNote.returns(i),n.update(.999,{notifications:{sounds:[{note:t,type:"hit"}]},stats:{}}),n.update(1.1,{notifications:{sounds:[{note:t,type:"break"}]},stats:{}}),void expect(i.stop).to.have.been.called}),it("should play sounds when hitting blank space",function(){e(o()),n.update(.999,{notifications:{sounds:[{note:{keysound:"0x"},type:"free"}]},stats:{}}),expect(r.playFree).to.have.been.calledWith("0x")}),it("should play hit note once",function(){e(o());var t={keysound:"0x"};n.update(.999,{notifications:{sounds:[{note:t,type:"hit"}]},stats:{}}),n.update(1,{notifications:{sounds:[{note:t,type:"hit"}]},stats:{}}),expect(r.playNote).to.have.callCount(1)})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(263));describe("WaveFactory",function(){var e=void 0,t=void 0,n=void 0,r=void 0,o=void 0;beforeEach(function(){e={},t={play:sinon.stub()},n={"wow.wav":t},r={"0z":"wow.wav"},o=new i(e,n,r)}),describe("playAuto",function(){it("should play an autokeysound",function(){o.playAuto("0z",.1),expect(t.play).to.have.been.calledWith(.1)})}),describe("playNote",function(){it("should play the keysound",function(){o.playNote("0z",.1),expect(t.play).to.have.been.calledWith(.1)}),it("should stop old sound",function(){var e={stop:sinon.spy()};return t.play.returns(e),o.playNote("0z",0),o.playNote("0z",0),Promise.delay(0).then(function(){return expect(e.stop).to.have.callCount(1)})})}),describe("playFree",function(){it("should play the keysound",function(){o.playFree("0z"),void expect(t.play).to.have.been.called})})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(226));describe("NoteArea",function(){it("allows querying the visible note from a list of notes",function(){var e=[{position:1,column:"A"},{position:2,column:"A"},{position:3,column:"A"},{position:4,column:"A"},{position:5,column:"A"},{position:6,column:"A"},{position:10,end:{position:12},column:"B"},{position:11,column:"C"}],t=new i(e,[]);expect(t.getVisibleNotes(1.5,3.5)).to.have.length(2),expect(t.getVisibleNotes(2.5,3.5,1)).to.have.length(2),expect(t.getVisibleNotes(-1,7)).to.have.length(6),expect(t.getVisibleNotes(8,10.1)).to.have.length(1),expect(t.getVisibleNotes(8,10.1)).to.have.length(1),expect(t.getVisibleNotes(8,14)).to.have.length(2),expect(t.getVisibleNotes(11.5,14)).to.have.length(1),expect(t.getVisibleNotes(12.5,14)).to.have.length(0)}),it("allows querying barlines",function(){var e=new i([],[{beat:0,position:0},{beat:4,position:4},{beat:7,position:7}]);expect(e.getVisibleBarLines(1.5,4.5)).to.have.length(1)})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(227)),o=n(271),a=o.tap,s=o.notechart,u=o.playerWithBMS;describe("PlayerDisplay",function(){function e(e){o=new i(e)}function t(e,t,n){c=o.update(e,t,n)}function n(){return{speed:1,input:{get:function(){return{value:0,changed:!1}}},notifications:{judgments:[]},getNoteStatus:sinon.stub().returns("unjudged"),getNoteJudgment:sinon.stub().returns(0),stats:{score:0}}}function r(e){return Object.assign(n(),e)}var o=void 0,c=void 0;it("reacts to input",function(){var n=function(e){return r({input:new Map(e)})};e({notechart:s(),columns:["wow"],options:{placement:"center",scratch:"left"}}),t(555,.5,n([["wow",{value:0,changed:!1}]])),expect(c.wow_active).to.equal(0),t(557,2.5,n([["wow",{value:1,changed:!0}]])),expect(c.wow_active).to.equal(1),expect(c.wow_down).to.equal(557),t(558,3.5,n([["wow",{value:0,changed:!0}]])),expect(c.wow_active).to.equal(0),expect(c.wow_up).to.equal(558)}),describe("with note",function(){beforeEach(function(){e(u("#BPM 60\n#00111:11"))}),it("displays unjudged notes",function(){t(3.95,3.95,n()),expect(c.note_1).to.have.length(1)}),it("hides judged notes",function(){var e=a(n(),function(e){return e.getNoteStatus.returns("judged")});t(3.95,3.95,e),void expect(c.note_1).to.be.empty})}),describe("with long note",function(){beforeEach(function(){e(u("#BPM 60\n#00151:1111"))}),it("displays unjudged long notes",function(){t(3.95,3.95,n()),
expect(c.longnote_1).to.have.length(1),void expect(c.longnote_1[0].active).to.be["false"],void expect(c.longnote_1[0].missed).to.be["false"]}),it("displays holding long notes",function(){var e=a(n(),function(e){return e.getNoteJudgment.returns(1)});t(3.95,3.95,e),void expect(c.longnote_1[0].active).to.be["true"]}),it("displays holding long notes event it is bad",function(){var e=a(n(),function(e){return e.getNoteJudgment.returns(4)});t(3.95,3.95,e),void expect(c.longnote_1[0].active).to.be["true"]}),it("displays missed long notes",function(){var e=n();e.getNoteJudgment.returns(-1),e.getNoteStatus.returns("judged"),t(3.95,3.95,e),void expect(c.longnote_1[0].missed).to.be["true"]})}),describe("with notification",function(){beforeEach(function(){e(u())}),it("sets judgment time",function(){var e={judgment:1,delta:0,combo:123,column:"SC"};t(12,34,r({notifications:{judgments:[e]}})),expect(c.judge_1).to.equal(12)}),it("sets judgment missed time",function(){var e={judgment:-1,delta:0,combo:0,column:"SC"};t(12,34,r({notifications:{judgments:[e]}})),expect(c.judge_missed).to.equal(12)}),it("sets combo",function(){var e={judgment:1,delta:0,combo:123,column:"SC"};t(12,34,r({notifications:{judgments:[e]}})),expect(c.combo).to.equal(123)}),it("sets note explode time",function(){var e={judgment:1,delta:0,combo:123,column:"SC"};t(12,34,r({notifications:{judgments:[e]}})),expect(c.SC_explode).to.equal(12)}),it("does not set note explode time if missed",function(){var e={judgment:-1,delta:0,combo:123,column:"SC"};t(12,34,r({notifications:{judgments:[e]}})),void expect(c.SC_explode).to.be.empty})})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(206));describe("GameInput",function(){var e=void 0,t=void 0;beforeEach(function(){e=new i,t={out:{},get:function(){return this.out}},e.use(t)}),it("should return control with default value of 0",function(){expect(e.get("wow").value).to.equal(0)}),describe("Control#value",function(){it("should return control with correct value",function(){t.out={wow:-1},e.update(),expect(e.get("wow").value).to.equal(-1)})}),describe("Control#changed",function(){it("should return changed state between last update",function(){e.update(),expect(e.get("wow").changed).to.equal(!1),t.out={wow:0},e.update(),expect(e.get("wow").changed).to.equal(!1),t.out={wow:-1},e.update(),expect(e.get("wow").changed).to.equal(!0),t.out={wow:1},e.update(),expect(e.get("wow").changed).to.equal(!0),t.out={wow:1},e.update(),expect(e.get("wow").changed).to.equal(!1),e.update(),expect(e.get("wow").changed).to.equal(!1),t.out={wow:0},e.update(),expect(e.get("wow").changed).to.equal(!0)})})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(27)),o=r(n(264));describe("TouchPlugin",function(){it("should get value when touching",function(){var e=new o({refs:{p1_1:new Set([{getBounds:function(){return new i.Rectangle(64,64,64,64)}}]),p1_2:new Set([{getBounds:function(){return new i.Rectangle(128,64,64,64)}}])},input:[{x:72,y:72,id:"touch1"},{x:32,y:32,id:"touch2"}]}),t=e.get();expect(t.p1_1).to.equal(1),expect(t.p1_2).to.equal(0)})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(265));xdescribe("SamplesLoader",function(){var e,t,n;beforeEach(function(){e={file:sinon.stub()},t={sample:sinon.stub()},n=new i(e,t)}),describe("#loadFiles",function(){it("should not include undecodable audio",function(){return e.file.returns(Promise.reject()),e.file.withArgs("a.wav").returns(Promise.resolve({read:function(){return Promise.resolve("ok1")}})),t.sample.withArgs("ok1").returns(Promise.reject(new Error(".."))),expect(n.loadFiles(["a.wav"])).to.eventually.deep.eq({})}),it("should try mp3",function(){return e.file.returns(Promise.reject()),e.file.withArgs("a.mp3").returns(Promise.resolve({read:function(){return Promise.resolve("ok1")}})),t.sample.withArgs("ok1").returns(Promise.resolve("ok2")),expect(n.loadFiles(["a.wav"])).to.eventually.deep.eq({"a.wav":"ok2"})}),it("should not include failed matches",function(){return e.file.returns(Promise.reject()),expect(n.loadFiles(["a.wav"])).to.eventually.deep.eq({})})})})},function(e,t,n){"use strict";var r=n(271).notechart;describe("Notechart",function(){describe(".fromBMSChart",function(){it("should work",function(){var e=r("#00116:01\n#00101:02");expect(e.notes).to.have.length(1),expect(e.autos).to.have.length(1),expect(e.notes[0].beat).to.equal(4)}),it("should work with long notes",function(){var e=r("#00151:0101");expect(e.notes).to.have.length(1),expect(e.notes[0].beat).to.equal(4),expect(e.notes[0].end.beat).to.equal(6)})}),describe("scratch off",function(){it("should move scratch to autokeysounds",function(){var e=r("#00116:01\n#00101:02",{scratch:"off"});expect(e.notes).to.have.length(0),expect(e.autos).to.have.length(2)})}),describe("#samples",function(){it("should return an array of all used samples",function(){var e=r("#WAV0X wow.wav\n#00101:0x0x");expect(e.samples).to.deep.equal(["wow.wav"])})}),describe("#duration",function(){it("should return the duration of notechart",function(){var e=r("#00111:0101");expect(e.duration).to.equal(6)}),it("should work with long notes",function(){var e=r("#00151:0101");expect(e.duration).to.equal(6)})}),describe("#keysounds",function(){it("should return an object of all keysounds",function(){var e=r("#WAV0X wow.wav\n#WAV0Y wow.wav\n#WAV0Z foon.wav\n#00101:0x0x0y0y0Z0Z");expect(e.keysounds).to.deep.equal({"0x":"wow.wav","0y":"wow.wav","0z":"foon.wav"})})}),describe("#barLines",function(){it("should return the list of beat with barlines",function(){var e=r("#00111:0001\n#00102:0.75");expect(e.barLines).to.deep.equal([{beat:0,position:0},{beat:4,position:4},{beat:7,position:7}])}),it("should consider long notes",function(){var e=r("#00151:0001\n#00251:0001");expect(e.barLines).to.deep.equal([{beat:0,position:0},{beat:4,position:4},{beat:8,position:8},{beat:12,position:12}])})}),describe("#secondsToBeat",function(){it("should convert seconds to beat",function(){var e=r("#BPM 120");expect(e.secondsToBeat(1)).to.equal(2)})}),describe("#secondsToPosition",function(){it("should convert seconds to position",function(){var e=r("#BPM 120");expect(e.secondsToPosition(1)).to.equal(2)})}),describe("#columns",function(){it("should return columns in notechart",function(){var e=r("#00111:11");expect(e.columns).to.deep.equal(["SC","1","2","3","4","5","6","7"])})}),describe("#info",function(){it("normal note should have 1 combo",function(){var e=r("#00111:11");expect(e.info(e.notes[0]).combos).to.equal(1)}),it("long note should have 2 combos",function(){var e=r("#00151:1111");expect(e.info(e.notes[0]).combos).to.equal(2)})})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(229)),o=r(n(207)),a=r(n(206)),s=n(271).notechart;describe("PlayerState",function(){it("updates the input",function(){var e=new i({number:1,columns:["wow"],notechart:s(""),options:{speed:1}}),t={get:function(e){return{name:e}}};e.update(0,t),expect(e.input.get("wow").name).to.equal("p1_wow")}),describe("with player and chart",function(){function e(e){var t=void 0===arguments[1]?{speed:1}:arguments[1];n=s(e),r=new o(n,1,t),u=new i(r),c=new a,l={},c.use({get:function(){return l}})}function t(e,t){l=t,c.update(),u.update(e,c)}var n=void 0,r=void 0,u=void 0,c=void 0,l=void 0;describe("node judging",function(){it("judges notes",function(){e("\n          #BPM 120\n          #00111:0101\n        ");var r=n.notes[0].column;expect(u.getNoteStatus(n.notes[0])).to.equal("unjudged"),expect(u.stats.combo).to.equal(0),expect(u.stats.poor).to.equal(!1),expect(u.stats.totalCombo).to.equal(2),void expect(u.notifications.judgments).to.be.empty,t(1.999,{}),expect(u.getNoteStatus(n.notes[0])).to.equal("unjudged"),t(2,{p1_1:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteJudgment(n.notes[0])).to.equal(1),expect(u.getNoteStatus(n.notes[1])).to.equal("unjudged"),expect(u.notifications.judgments[0]).to.deep.equal({judgment:1,combo:1,delta:0,column:r}),expect(u.stats.poor).to.equal(!1),t(2.1,{p1_1:0}),t(5,{p1_1:0}),expect(u.getNoteStatus(n.notes[1])).to.equal("judged"),expect(u.getNoteJudgment(n.notes[1])).to.equal(-1),expect(u.notifications.judgments[0]).to.deep.equal({judgment:-1,combo:0,delta:2,column:r}),expect(u.stats.poor).to.equal(!0)}),it("judges multiple notes in different column",function(){e("\n          #BPM 120\n          #00111:01\n          #00112:01\n        "),t(2,{p1_1:1,p1_2:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteStatus(n.notes[1])).to.equal("judged")}),it("judges single note from one column at a time",function(){e("\n          #BPM 480\n          #00111:01010100000000000000000000000000\n        "),t(.531,{p1_1:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteStatus(n.notes[1])).to.equal("unjudged"),expect(u.getNoteStatus(n.notes[2])).to.equal("unjudged"),t(.531,{p1_1:0}),t(.531,{p1_1:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteStatus(n.notes[1])).to.equal("judged"),expect(u.getNoteStatus(n.notes[2])).to.equal("unjudged"),t(.531,{p1_1:0}),t(.531,{p1_1:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteStatus(n.notes[1])).to.equal("judged"),expect(u.getNoteStatus(n.notes[2])).to.equal("judged"),expect(u.getNoteJudgment(n.notes[0])).to.gt(1),expect(u.getNoteJudgment(n.notes[1])).to.eq(1),expect(u.getNoteJudgment(n.notes[2])).to.gt(1)}),it("leaves note unjudged when bad and there are closer note",function(){e("\n          #BPM 120\n          #00111:01010100000000000000000000000000\n        "),t(2.125,{p1_1:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("unjudged"),expect(u.getNoteStatus(n.notes[1])).to.equal("judged"),expect(u.getNoteStatus(n.notes[2])).to.equal("unjudged")}),describe("with long note",function(){var r=void 0;beforeEach(function(){e("\n            #BPM 120\n            #00151:0101\n          "),r=n.notes[0]}),it("judges long note",function(){t(2,{p1_1:1}),expect(u.getNoteStatus(r)).to.equal("active"),expect(u.getNoteJudgment(r)).to.equal(1),expect(u.notifications.judgments[0].judgment).to.equal(1),t(3,{p1_1:0}),expect(u.getNoteStatus(r)).to.equal("judged"),expect(u.getNoteJudgment(r)).to.equal(1),expect(u.notifications.judgments[0].judgment).to.equal(1)}),it("judges missed long note",function(){t(2.3,{p1_1:1}),expect(u.getNoteStatus(r)).to.equal("judged"),expect(u.getNoteJudgment(r)).to.equal(-1)}),it("judges long note lifted too fast as missed",function(){t(2,{p1_1:1}),t(2.01,{p1_1:0}),expect(u.getNoteStatus(r)).to.equal("judged"),expect(u.getNoteJudgment(r)).to.equal(-1)}),it("judges long note lifted too slow as missed",function(){t(2,{p1_1:1}),t(4,{p1_1:1}),expect(u.getNoteStatus(r)).to.equal("judged"),expect(u.getNoteJudgment(r)).to.equal(-1),expect(u.notifications.judgments[0]).to.deep.equal({judgment:-1,combo:0,delta:1,column:r.column})})}),describe("with long scratch note",function(){var r=void 0;beforeEach(function(){e("\n            #BPM 120\n            #00156:0101\n          "),r=n.notes[0]}),it("ends automatically",function(){t(2,{p1_SC:1}),expect(u.getNoteStatus(r)).to.equal("active"),expect(u.getNoteJudgment(r)).to.equal(1),expect(u.notifications.judgments[0].judgment).to.equal(1),t(4,{p1_SC:1}),expect(u.getNoteStatus(r)).to.equal("judged"),expect(u.getNoteJudgment(r)).to.equal(1),expect(u.notifications.judgments[0].judgment).to.equal(1)})}),describe("with long scratch note next to each other",function(){beforeEach(function(){e("\n#BPM 120\n#00156:0100000000000000000000000000000000000000000000000000000000000001\n#00256:0100000000000000000000000000000000000000000000000000000000000001\n          ")}),it("should switch to next one on change",function(){t(2,{p1_SC:1}),t(4,{p1_SC:-1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteStatus(n.notes[1])).to.equal("active")})}),describe("sound notifications",function(){it("notifies of note hit",function(){e("\n            #BPM 120\n            #00111:0102\n          "),t(2,{p1_1:1}),expect(u.notifications.sounds[0].note).to.equal(n.notes[0]),expect(u.notifications.sounds[0].type).to.equal("hit")}),it("should notify missed notes as break",function(){e("\n            #BPM 120\n            #00111:01\n          "),t(5,{p1_1:0}),expect(u.notifications.sounds[0].note).to.equal(n.notes[0]),expect(u.notifications.sounds[0].type).to.equal("break")}),it("notifies of free keysound hit",function(){e("\n            #BPM 60\n            #00111:01\n            #00211:02\n          "),t(4,{p1_1:1}),t(4,{p1_1:0}),t(4,{p1_1:1}),expect(u.notifications.sounds[0].note).to.equal(n.notes[0]),expect(u.notifications.sounds[0].type).to.equal("free"),t(4,{p1_1:0}),void expect(u.notifications.sounds).to.be.empty,t(5,{p1_1:1}),expect(u.notifications.sounds[0].note).to.equal(n.notes[0]),t(5,{p1_1:0}),t(7,{p1_1:1}),expect(u.notifications.sounds[0].note).to.equal(n.notes[1])})})}),describe("speed",function(){it("infers speed from player",function(){e("",{speed:2}),expect(u.speed).to.equal(2)}),it("updates speed on dedicated buttons",function(){e("",{speed:2}),t(1,{p1_speedup:1}),expect(u.speed).to.equal(2.5),t(1.2,{p1_speedup:0,p1_speeddown:1}),expect(u.speed).to.equal(2)}),it("supports fine-grained speed modifications",function(){e("",{speed:2}),t(1,{p1_speedup:1,select:1}),expect(u.speed).to.equal(2.1)}),it("supports pinching to zoom",function(){e("",{speed:2}),t(1,{p1_pinch:300}),t(1.2,{p1_pinch:450}),expect(u.speed).to.equal(3)})}),describe("finish",function(){it("should become true when song is finished",function(){e("#00111:0101"),expect(u.finished).to.equal(!1),t(4,{}),expect(u.finished).to.equal(!1),t(16,{}),expect(u.finished).to.equal(!0)})})})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(230)),o=n(271).notechart;describe("PlayerStats",function(){describe("#score",function(){it("returns the score",function(){var e=new i(o("#00111:1111111111"));expect(e.score).to.equal(0),e.handleJudgment(1),e.handleJudgment(1),e.handleJudgment(1),e.handleJudgment(1),e.handleJudgment(1),expect(e.score).to.equal(555555)})})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}},i=function(e){return e&&e.__esModule?e["default"]:e},o=i(n(107)),a=r(n(123));describe("ProgressFormatters",function(){describe("BYTES_FORMATTER",function(){it("should return blank for indeterminate",function(){var e=new o;expect(a.BYTES_FORMATTER(e)).to.equal("")}),it("should format as human readable size",function(){var e=new o;e.report(1,1024),expect(a.BYTES_FORMATTER(e)).to.equal("1b / 1kb")})}),describe("EXTRA_FORMATTER",function(){it("should just use the extra",function(){var e=new o;e.report(1,1024,"one.wav"),expect(a.EXTRA_FORMATTER(e)).to.equal("one.wav")})})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(107));describe("Progress",function(){describe("#watch",function(){it("should report current progress when watched",function(){var e=new i,t=sinon.spy();e.report(1,10),e.watch(t),expect(t).to.have.callCount(1),expect(t).to.have.been.calledWith(e)})}),describe("#toString",function(){it("should return blank string when no progress",function(){var e=new i;expect(e.toString()).to.equal("")}),it("should return a string representation of the progress",function(){var e=new i;e.report(1,10),expect(e.toString()).to.equal("1 / 10")}),it("should use a formatter",function(){var e=new i;e.report(1,10),e.formatter=function(e){return e.progress+""},expect(e.toString()).to.equal("0.1")})}),describe("#report",function(){it("should fire to all watchers",function(){var e=new i,t=sinon.spy();e.report(1,10),e.report(2,10),e.watch(t),e.report(3,10),e.report(4,10),expect(t).to.have.callCount(3)}),it("should return a function to unsubscribe",function(){var e=new i,t=sinon.spy();e.report(1,10),e.report(2,10);var n=e.watch(t);e.report(3,10),n(),e.report(4,10),expect(t).to.have.callCount(2)})}),describe("#progress",function(){it("returns progress in fraction",function(){var e=new i;e.report(1,10),expect(e.progress).to.equal(.1)}),it("returns null in unavailable",function(){var e=new i;expect(e.progress).to.equal(null)})})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}},i=function(e){return e&&e.__esModule?e["default"]:e},o=i(n(107)),a=r(n(108));describe("ProgressUtils",function(){describe(".fixed",function(){it("should report for fixed number of items",function(){var e=new o,t=a.fixed(10,e);expect(e.current).to.equal(0),expect(e.total).to.equal(10),t("wow"),expect(e.current).to.equal(1),expect(e.total).to.equal(10),expect(e.extra).to.equal("wow")})}),describe(".wrapPromise",function(){it("should report number of fulfilled promises",function(){var e=new o,t=a.wrapPromise(e,function(e){return e}),n=(t(new Promise(function(){})),t(Promise.resolve(1))),r=(t(Promise.reject(new Error("no"))),t(Promise.resolve(3)));return Promise.all([n,r]).then(function(){expect(e.current).to.equal(2),expect(e.total).to.equal(4)})})}),describe(".bind",function(){it("should bind from one progress to another",function(){var e=new o,t=new o;e.report(10,20),a.bind(e,t),expect(t.current).to.equal(10),expect(t.total).to.equal(20),e.report(15,25),expect(t.current).to.equal(15),expect(t.total).to.equal(25)})})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(266));describe("BemusePackageResources",function(){describe("#file",function(){var e;beforeEach(function(){e=new i("/spec/resources/fixtures/a/")}),it("returns a file",function(){return expect(e.file("do.mp3")).to.be.fulfilled}),it("rejects if file not found",function(){return expect(e.file("wow.mp3")).to.be.rejected}),it("can be read",function(){return expect(e.file("mi.mp3").then(function(e){return e.read()}).then(function(e){return e.byteLength})).to.eventually.eq(30093)}),it("cannot read if not bemuse file",function(){return e=new i("/spec/resources/fixtures/b/"),expect(e.file("do.mp3").then(function(e){return e.read()})).to.be.rejected}),it("data is correct",function(){return e.file("mi.mp3").then(function(e){return e.read()}).then(function(e){return new Uint8Array(e)}).then(function(e){expect([e[0],e[1],e[2]]).to.deep.equal([255,251,144])})})})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(103));n(720),describe("SamplingMaster",function(){var e=void 0,t=void 0;before(function(){WebAudioTestAPI.use()}),beforeEach(function(){e=new AudioContext,t=new i(e)}),describe("#unmute",function(){it("unmutes the audio",function(){var n=e.createGain();sinon.stub(e,"createGain").returns(n),sinon.spy(n,"connect"),sinon.spy(n,"disconnect"),t.unmute(),void expect(e.createGain).to.have.been.called,void expect(n.connect).to.have.been.called,void expect(n.disconnect).to.have.been.called})}),describe("#sample",function(){it("should coerce blob",function(){return t.sample(new Blob([]))}),it("should coerce array buffer",function(){return t.sample(new ArrayBuffer(0))}),it("should reject when decoding failed",function(){return e.DECODE_AUDIO_DATA_FAILED=!0,expect(t.sample(new ArrayBuffer(0))["finally"](function(){return e.DECODE_AUDIO_DATA_FAILED=!1})).to.be.rejected}),describe("#play",function(){var n=void 0,r=void 0,i=void 0;beforeEach(function(){return r=e.createBufferSource(),i=e.createBuffer(1,44100,44100),r.buffer=i,sinon.stub(e,"createBufferSource").returns(r),sinon.spy(r,"start"),t.sample(new Blob([])).then(function(e){return n=e})}),it("should play a buffer source",function(){n.play(),void expect(e.createBufferSource).to.have.been.called,expect(r.start).to.have.been.calledWith(0)}),it("should play a buffer source with delay",function(){e.$processTo(1),n.play(20),void expect(e.createBufferSource).to.have.been.called,expect(r.start).to.have.been.calledWith(21)}),void function(){try{return new Event("wat").type="customevent",it}catch(e){return it.skip}}()("should call #stop when playing finished",function(){var t=n.play();sinon.spy(t,"stop"),e.$processTo(1.5),void expect(t.stop).to.have.been.called}),describe("#stop",function(){it("should stop the buffer source",function(){var e=n.play();sinon.spy(r,"stop"),e.stop(),void expect(r.stop).to.have.been.called}),it("can be called multiple times",function(){var e=n.play();sinon.spy(r,"stop"),e.stop(),e.stop(),e.stop(),void expect(r.stop).to.have.been.calledOnce}),it("should call #onstop",function(){var e=n.play();e.onstop=sinon.spy(),e.stop(),void expect(e.onstop).to.have.been.called})}),describe("#bad",function(){it("should change pitch of sound",function(){var e=n.play();e.bad(),expect(r.playbackRate.value).not.to.equal(1)})})})}),describe("#destroy",function(){var e=void 0;beforeEach(function(){return t.sample(new Blob([])).then(function(t){return e=t})}),it("should stop all samples",function(){var n=e.play(),r=e.play(),i=e.play();sinon.spy(n,"stop"),sinon.spy(r,"stop"),sinon.spy(i,"stop"),t.destroy(),void expect(n.stop).to.have.been.called,void expect(r.stop).to.have.been.called,void expect(i.stop).to.have.been.called}),it("can no longer create samples",function(){return t.destroy(),expect(t.sample(new Blob([]))).to.be.rejected}),it("only destroys once",function(){var n=e.play();sinon.spy(n,"destroy"),t.destroy(),t.destroy(),expect(n.destroy).to.have.callCount(1)})}),after(function(){WebAudioTestAPI.unuse()})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(101));describe("Scintillator Expression",function(){describe("()",function(){it("should parse",function(){var e=new i("a+b");expect(e({a:1,b:5})).to.equal(6)})}),describe("#constant",function(){it("should be false when containing variables",function(){var e=new i("a+b");void expect(e.constant).to.be["false"]}),it("should be true when only contains number",function(){var e=new i("-1.25");void expect(e.constant).to.be["true"]})})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=n(267),o=i._compile,a=i._attrs,s=i.Animation,u=r(n(46)),c=function(e){return u(u.parseXML(e).documentElement)};describe("Scintillator::Animation",function(){describe("_attrs",function(){it("lists all attributes of an element",function(){var e=c('<keyframe t="0" x="10" y="30" />')[0];expect(a(e)).to.deep.equal({t:"0",x:"10",y:"30"})})}),describe("_compile",function(){it("compiles animation into keyframes",function(){var e=c('<animation>\n        <keyframe t="0" x="10" y="30" />\n        <keyframe t="2" x="20" />\n        <keyframe t="5" x="15" y="20" />\n      </animation>');expect(o(e)).to.deep.equal({on:"",data:[{name:"x",keyframes:[{time:0,value:10,ease:"linear"},{time:2,value:20,ease:"linear"},{time:5,value:15,ease:"linear"}]},{name:"y",keyframes:[{time:0,value:30,ease:"linear"},{time:5,value:20,ease:"linear"}]}]})}),it("throws when there is no time",function(){var e=c("<animation>\n        <keyframe />\n      </animation>");expect(function(){return o(e)}).to["throw"](Error)})}),describe("#_properties",function(){it("should return a set of properties",function(){var e=s.compile(null,c('<group>\n        <animation>\n          <keyframe t="0" x="10" />\n          <keyframe t="1" x="20" />\n        </animation>\n        <animation>\n          <keyframe t="0" y="10" />\n          <keyframe t="1" y="20" />\n        </animation>\n      </group>'));expect(Array.from(e._properties)).to.deep.equal(["x","y"])})}),describe("#_events",function(){it("list distinct events",function(){var e=s.compile(null,c('<group>\n        <animation />\n        <animation />\n        <animation on="exit" />\n        <animation on="exit" />\n      </group>'));expect(e._events).to.deep.equal(["","exit"])})})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}},i=function(e){return e&&e.__esModule?e["default"]:e},o=i(n(45)),a=r(n(203)),s=function(e){return"/spec/scintillator/fixtures/"+e};describe("Scintillator",function(){describe("#load",function(){it("should load skin and return skin node",o.wrap(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("bare.xml"));case 2:t=e.sent,expect(t.width).to.equal(123),expect(t.height).to.equal(456);case 5:case"end":return e.stop()}},e,this)}))),it("should reject if invalid",function(){return expect(a.load(s("invalid_tag.xml"))).to.be.rejected})}),describe("Context",function(){it("should instantiate and able to destroy",o.wrap(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("bare.xml"));case 2:t=e.sent,n=new a.Context(t),n.render({}),n.destroy();case 6:case"end":return e.stop()}},e,this)}))),describe("#input",function(){function e(e,t,n){r.view.dispatchEvent(new MouseEvent("mouse"+e,{clientX:t,clientY:n}))}function t(e,t,n){var i=new Event("touch"+e);i.touches=t,i.changedTouches=n,r.view.dispatchEvent(i)}var n=void 0,r=void 0;beforeEach(o.wrap(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("bare.xml"));case 2:n=e.sent,r=new a.Context(n),r.render({}),r.view.style.position="fixed",r.view.style.top="0",r.view.style.left="0",document.body.appendChild(r.view);case 9:case"end":return e.stop()}},i,this)}))),afterEach(function(){r.destroy(),document.body.removeChild(r.view)}),it("should report touches/mouse inside the region",function(){e("move",10,10),e("down",10,10),expect(r.input).to.deep.equal([{x:10,y:10,id:"mouse"}]);var n={identifier:1,clientX:80,clientY:80};t("start",[n],[n]),expect(r.input).to.deep.equal([{x:10,y:10,id:"mouse"},{x:80,y:80,id:"touch1"}]),e("move",20,20),expect(r.input).to.deep.equal([{x:20,y:20,id:"mouse"},{x:80,y:80,id:"touch1"}]),e("up",10,10),expect(r.input).to.deep.equal([{x:80,y:80,id:"touch1"}]),t("end",[],[n]),expect(r.input).to.deep.equal([])})}),describe("#refs",function(){it("should be a set of refs to the display object",o.wrap(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("refs.xml"));case 2:t=e.sent,n=new a.Context(t),n.render({}),expect(Array.from(n.refs.a)[0]).to.equal(n.stage.children[0]),n.destroy();case 7:case"end":return e.stop()}},e,this)})))})}),describe("Expressions",function(){it("should be parsed and processed",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("expr_basic.xml"));case 2:t=e.sent,n=new a.Context(t),n.render({}),r=n.stage,expect(r.children[0].x).to.equal(6),expect(r.children[0].y).to.equal(7),n.destroy();case 9:case"end":return e.stop()}},e,this)}))),it("should support variables",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("expr_variables.xml"));case 2:e=t.sent,n=new a.Context(e),r=n.stage,n.render({a:4,b:3}),expect(r.children[0].x).to.equal(7),expect(r.children[0].y).to.equal(12),n.render({a:10,b:20}),expect(r.children[0].x).to.equal(30),expect(r.children[0].y).to.equal(200),n.destroy();case 12:case"end":return t.stop()}},t,this)})))}),describe("SpriteNode",function(){it("should allow setting sprite frame",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("sprite_attrs.xml"));case 2:t=e.sent,n=new a.Context(t),r=n.stage,n.render({}),i=r.children[0].texture.frame,expect(i.width).to.equal(10),expect(i.height).to.equal(11),expect(i.x).to.equal(12),expect(i.y).to.equal(13),n.destroy();case 12:case"end":return e.stop()}},e,this)}))),it("should allow setting visibility, width, height",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("sprite_attrs.xml"));case 2:e=t.sent,n=new a.Context(e),r=n.stage,n.render({}),i=r.children[0],expect(i.width).to.equal(3),expect(i.height).to.equal(1),expect(i.visible).to.equal(!1),n.destroy();case 11:case"end":return t.stop()}},t,this)}))),it("should reject if blend mode is invalid",function(){return expect(a.load(s("sprite_invalid_blend.xml"))).to.be.rejected})}),describe("TextNode",function(){it("should display text",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("text.xml"));case 2:t=e.sent,n=new a.Context(t),r=n.stage,n.render({}),i=r.children[0].children[0],expect(i.text).to.equal("Hello world"),n.destroy();case 9:case"end":return e.stop()}},e,this)}))),it("should center text",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("text_center.xml"));case 2:e=t.sent,n=new a.Context(e),r=n.stage,n.render({}),i=r.children[0].children[0],expect(i.x).to.be.lessThan(0),n.destroy();case 9:case"end":return t.stop()}},t,this)}))),it("should support data interpolation",o.wrap(regeneratorRuntime.mark(function n(){var e,t,r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.load(s("text_interpolation.xml"));case 2:e=n.sent,t=new a.Context(e),r=t.stage,t.render({lol:"wow"}),i=r.children[0].children[0],expect(i.text).to.equal("Hello world wow"),t.destroy();case 9:case"end":return n.stop()}},n,this)})))}),describe("IfNode",function(){it("should display child when correct value",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("expr_if.xml"));case 2:t=e.sent,n=new a.Context(t),r=n.stage,n.render({a:"b"}),expect(r.children[0].children).to.have.length(1),n.destroy();case 8:case"end":return e.stop()}},e,this)}))),it("should not display child when correct value",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("expr_if.xml"));case 2:e=t.sent,n=new a.Context(e),r=n.stage,n.render({a:"x"}),expect(r.children[0].children).to.have.length(0),n.destroy();case 8:case"end":return t.stop()}},t,this)})))}),describe("ObjectNode",function(){it("should display children",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("expr_object.xml"));case 2:t=e.sent,n=new a.Context(t),r=n.stage,n.render({notes:[]}),expect(r.children[0].children).to.have.length(0),n.render({notes:[{key:"a",y:20}]}),expect(r.children[0].children).to.have.length(1),n.render({notes:[{key:"a",y:20},{key:"b",y:10}]}),expect(r.children[0].children).to.have.length(2),n.render({notes:[{key:"b",y:10}]}),expect(r.children[0].children).to.have.length(1),n.destroy();case 14:case"end":return e.stop()}},e,this)}))),it("should update same array with content changed",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("expr_object.xml"));case 2:e=t.sent,n=new a.Context(e),r=n.stage,i=[],n.render({notes:i}),expect(r.children[0].children).to.have.length(0),i.push({key:"a",y:20}),n.render({notes:i}),expect(r.children[0].children).to.have.length(1),n.destroy();case 12:case"end":return t.stop()}},t,this)}))),it("should let children get value from item",o.wrap(regeneratorRuntime.mark(function n(){var e,t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.load(s("expr_object_var.xml"));case 2:e=n.sent,t=new a.Context(e),r=t.stage,
t.render({notes:[]}),t.render({notes:[{key:"a",y:20}]}),expect(r.children[0].children[0].y).to.equal(20),t.render({notes:[{key:"a",y:20},{key:"b",y:10}]}),expect(r.children[0].children[0].y).to.equal(20),t.render({notes:[{key:"b",y:10}]}),expect(r.children[0].children[0].y).to.equal(10),t.destroy();case 13:case"end":return n.stop()}},n,this)})))}),describe("GroupNode",function(){it("should allow masking",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("group_mask.xml"));case 2:t=e.sent,n=new a.Context(t),r=n.stage,i=r.children[0].mask,expect(i).not.to.equal(null),n.destroy();case 8:case"end":return e.stop()}},e,this)})))}),describe("AnimationNode",function(){it("should allow animations",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("animation.xml"));case 2:t=e.sent,n=new a.Context(t),r=n.stage.children[0],n.render({t:0}),expect(r.x).to.equal(10),expect(r.y).to.equal(0),n.render({t:.5}),expect(r.x).to.equal(15),expect(r.y).to.equal(1),n.render({t:1}),expect(r.x).to.equal(20),expect(r.y).to.equal(2),n.destroy();case 15:case"end":return e.stop()}},e,this)}))),it("should allow animations on different events",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("animation.xml"));case 2:e=t.sent,n=new a.Context(e),r=n.stage.children[0],n.render({t:.5,exitEvent:.5}),expect(r.x).to.equal(50),expect(r.y).to.equal(0),n.render({t:1,exitEvent:.5}),expect(r.x).to.equal(60),expect(r.y).to.equal(50),n.render({t:1.5,exitEvent:.5}),expect(r.x).to.equal(70),expect(r.y).to.equal(100),n.destroy();case 15:case"end":return t.stop()}},t,this)}))),it("should allow animations on different value",o.wrap(regeneratorRuntime.mark(function n(){var e,t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.load(s("animation_timekey.xml"));case 2:e=n.sent,t=new a.Context(e),r=t.stage.children[0],t.render({t:0,x:.5}),expect(r.x).to.equal(15);case 7:case"end":return n.stop()}},n,this)})))}),describe("defs",function(){it("should allow reuse of skin nodes",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("defs.xml"));case 2:t=e.sent,n=new a.Context(t),n.render({}),r=n.stage,expect(r.children[0].x).to.equal(6),expect(r.children[0].y).to.equal(7),expect(r.children[1].x).to.equal(6),expect(r.children[1].y).to.equal(7),n.destroy();case 11:case"end":return e.stop()}},e,this)})))})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(125));describe("download",function(){it("resolves with correct type",function(){return expect(i("/spec/utils/fixtures/download/hello.txt").as("text")).to.eventually.match(/hello world/)}),it("rejects for 404",function(){return expect(i("/nonexistant").as("blob")).to.be.rejected}),it("rejects for bad url",function(){return expect(i("file:///nonexistant").as("blob")).to.be.rejected}),it("rejects for XHR error",function(){var e=sinon.stub(XMLHttpRequest.prototype,"send",function(){this.onerror(new Error("..."))});return expect(i("/spec/download/fixtures/hello.txt").as("blob")["finally"](function(){return e.restore()})).to.be.rejected})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(302));describe("Observable",function(){describe("stateless mode",function(){it("should call watchers",function(){var e=sinon.spy(),t=sinon.spy(),n=new i,r=n.watch(e);void expect(e).not.to.have.been.called,n.notify("1"),expect(e).to.have.been.calledWith("1"),n.watch(t),void expect(t).not.to.have.been.called,n.notify("2"),expect(e).to.have.been.calledWith("2"),expect(t).to.have.been.calledWith("2"),r(),n.notify("3"),expect(e).not.to.have.been.calledWith("3"),expect(t).to.have.been.calledWith("3")})}),describe("stateful mode",function(){it("should have value",function(){var e=new i("0");expect(e.value).to.equal("0")}),it("should call watchers",function(){var e=sinon.spy(),t=sinon.spy(),n=new i("0"),r=n.watch(e);expect(e).to.have.been.calledWith("0"),n.value="1",expect(e).to.have.been.calledWith("1"),n.watch(t),expect(t).to.have.been.calledWith("1"),n.value="2",expect(e).to.have.been.calledWith("2"),expect(t).to.have.been.calledWith("2"),r(),n.value="3",expect(e).not.to.have.been.calledWith("3"),expect(t).to.have.been.calledWith("3")})})})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e},i=r(n(102));describe("readBlob",function(){it("rejects when cannot read blob",function(){var e=new Blob(["hello world"]),t=sinon.stub(FileReader.prototype,"readAsText",function(){this.onerror(new Error("..."))});return expect(i(e).as("text")["finally"](function(){return t.restore()})).to.be.rejected}),it("resolves with correct type",function(){var e=new Blob(["hello world"]);return expect(i(e).as("text")).to.eventually.equal("hello world")})})},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){function t(){return new Promise(function(t,n){var r=o.open(e,1);r.onupgradeneeded=function(e){var r=e.target.result,i=r.createObjectStore("cachier",{keyPath:"_id"});i.transaction.oncomplete=function(){t(r)},i.transaction.onerror=function(){n(new Error("Cannot upgrade database!"))}},r.onerror=function(){n(new Error("Cannot request database!"))},r.onsuccess=function(e){var n=e.target.result;t(n)}})}function n(e){return new Promise(function(t,n){e.onerror=function(){n(new Error("IndexedDB Error: "+e.error))},e.onblocked=function(){console.log(e),n(new Error("IndexedDB Blocked: "+e))},e.onsuccess=function(e){t(e)}})}function r(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){t({buffer:r.result,type:e.type})},r.onerror=function(){n(new Error("Unable to convert blob to object!"))},r.readAsArrayBuffer(e)})}function i(e){return e instanceof Blob?e:e.buffer?new Blob([e.buffer],{type:e.type}):void 0}var o=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,a=t();return e=e||"cachier",{connection:a,save:function(e,t,i){var o=!!this._NO_BLOB;return a.then(function(a){return Promise.resolve().then(function(){if(o)throw new Error("Requested non-Blob storing mode");var r=a.transaction("cachier","readwrite").objectStore("cachier").put({_id:e,blob:t,metadata:i});return n(r)})["catch"](function(){return console.log("Cannot store as blob, store as data-URL instead."),r(t).then(function(t){var r=a.transaction("cachier","readwrite").objectStore("cachier").put({_id:e,blob:t,metadata:i});return n(r)})})})},load:function(e){return a.then(function(t){var r=t.transaction("cachier").objectStore("cachier").get(e);return n(r).then(function(){var e=r.result;return{blob:i(e.blob),metadata:e.metadata}})})},"delete":function(e){return a.then(function(t){var r=t.transaction("cachier","readwrite").objectStore("cachier")["delete"](e);return n(r)})},destroyDatabase:function(){return a?a.then(function(e){e.close()}).then(function(){var t=o.deleteDatabase(e);return n(t)}).tap(function(){a=null}):Promise.resolve()}}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=new r,t.Cachier=r},,,,,,,function(e,t,n){!function(){"use strict";function t(e,n){function r(e){return"function"==typeof e.always&&"function"==typeof e.done&&"function"==typeof e.fail&&"function"==typeof e.pipe&&"function"==typeof e.progress&&"function"==typeof e.state}function i(e){if("function"!=typeof e._obj.then)throw new TypeError(n.inspect(e._obj)+" is not a thenable.");if(r(e._obj))throw new TypeError("Chai as Promised is incompatible with jQuery's thenables, sorry! Please use a Promises/A+ compatible library (see http://promisesaplus.com/).")}function o(e,t){n.addMethod(h.prototype,e,function(){return i(this),t.apply(this,arguments)})}function a(e,t){n.addProperty(h.prototype,e,function(){return i(this),t.apply(this,arguments)})}function s(e,t){e.then(function(){t()},t)}function u(e,t,n){e.assert(!0,null,t,n.expected,n.actual)}function c(e,t,n){e.assert(!1,t,null,n.expected,n.actual)}function l(e){return"function"==typeof e.then?e:e._obj}function f(e,r,i){if(!n.flag(r,"eventually"))return e.apply(r,i);var o=l(r).then(function(e){return r._obj=e,n.flag(r,"eventually",!1),i?t.transformAsserterArgs(i):i}).then(function(t){return e.apply(r,t),r._obj});t.transferPromiseness(r,o)}var h=e.Assertion,p=e.assert,d=Object.getOwnPropertyNames(h.prototype),m={};d.forEach(function(e){m[e]=Object.getOwnPropertyDescriptor(h.prototype,e)}),a("fulfilled",function(){var e=this,n=l(e).then(function(t){return e._obj=t,u(e,"expected promise not to be fulfilled but it was fulfilled with #{act}",{actual:t}),t},function(t){c(e,"expected promise to be fulfilled but it was rejected with #{act}",{actual:t})});t.transferPromiseness(e,n)}),a("rejected",function(){var e=this,n=l(e).then(function(t){return e._obj=t,c(e,"expected promise to be rejected but it was fulfilled with #{act}",{actual:t}),t},function(t){return u(e,"expected promise not to be rejected but it was rejected with #{act}",{actual:t}),t});t.transferPromiseness(e,n)}),o("rejectedWith",function(e,r){var i=null,o=null;e instanceof RegExp||"string"==typeof e?(r=e,e=null):e&&e instanceof Error?(i=e,e=null,r=null):"function"==typeof e?o=(new e).name:e=null;var a=this,s=l(a).then(function(t){var n=null,s=null;if(e)n="expected promise to be rejected with #{exp} but it was fulfilled with #{act}",s=o;else if(r){var u=r instanceof RegExp?"matching":"including";n="expected promise to be rejected with an error "+u+" #{exp} but it was fulfilled with #{act}",s=r}else i&&(n="expected promise to be rejected with #{exp} but it was fulfilled with #{act}",s=i);a._obj=t,c(a,n,{expected:s,actual:t})},function(t){e&&a.assert(t instanceof e,"expected promise to be rejected with #{exp} but it was rejected with #{act}","expected promise not to be rejected with #{exp} but it was rejected with #{act}",o,t);var s="object"===n.type(t)&&"message"in t?t.message:""+t;r&&null!==s&&void 0!==s&&(r instanceof RegExp&&a.assert(r.test(s),"expected promise to be rejected with an error matching #{exp} but got #{act}","expected promise not to be rejected with an error matching #{exp}",r,s),"string"==typeof r&&a.assert(-1!==s.indexOf(r),"expected promise to be rejected with an error including #{exp} but got #{act}","expected promise not to be rejected with an error including #{exp}",r,s)),i&&a.assert(t===i,"expected promise to be rejected with #{exp} but it was rejected with #{act}","expected promise not to be rejected with #{exp}",i,t)});t.transferPromiseness(a,s)}),a("eventually",function(){n.flag(this,"eventually",!0)}),o("notify",function(e){s(l(this),e)}),o("become",function(e){return this.eventually.deep.equal(e)});var v=d.filter(function(e){return"assert"!==e&&"function"==typeof m[e].value});v.forEach(function(e){h.overwriteMethod(e,function(e){return function(){f(e,this,arguments)}})});var g=d.filter(function(e){return"_obj"!==e&&"function"==typeof m[e].get});g.forEach(function(e){var t=m[e],n=!1;try{n="function"==typeof t.get.call({})}catch(r){}n?h.addChainableMethod(e,function(){function e(){return t.get.call(n).apply(n,arguments)}var n=this;f(e,this,arguments)},function(){var e=t.get;f(e,this)}):h.overwriteProperty(e,function(e){return function(){f(e,this)}})});var y=Object.getOwnPropertyNames(p).filter(function(e){return"function"==typeof p[e]});p.isFulfilled=function(e,t){return new h(e,t).to.be.fulfilled},p.isRejected=function(e,t,n){"string"==typeof t&&(n=t,t=void 0);var r=new h(e,n);return void 0!==t?r.to.be.rejectedWith(t):r.to.be.rejected},p.becomes=function(e,t,n){return p.eventually.deepEqual(e,t,n)},p.doesNotBecome=function(e,t,n){return p.eventually.notDeepEqual(e,t,n)},p.eventually={},y.forEach(function(t){p.eventually[t]=function(r){var i,o=Array.prototype.slice.call(arguments,1),a=arguments[p[t].length-1];"string"==typeof a&&(i=function(t){throw new e.AssertionError(a+"\n\nOriginal reason: "+n.inspect(t))});var u=r.then(function(e){return p[t].apply(p,[e].concat(o))},i);return u.notify=function(e){s(u,e)},u}})}e.exports=t,t.transferPromiseness=function(e,t){e.then=t.then.bind(t)},t.transformAsserterArgs=function(e){return e}}()},function(e,t,n){e.exports=n(514)},function(e,t,n){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=[],t=e.exports={};/*!
	 * Chai version
	 */
t.version="2.3.0",/*!
	 * Assertion Error
	 */
t.AssertionError=n(532);/*!
	 * Utils for plugins (not exported)
	 */
var i=n(527);t.use=function(e){return~r.indexOf(e)||(e(this,i),r.push(e)),this},/*!
	 * Utility Functions
	 */
t.util=i;/*!
	 * Configuration
	 */
var o=n(303);t.config=o;/*!
	 * Primary `Assertion` prototype
	 */
var a=n(515);t.use(a);/*!
	 * Core Assertions
	 */
var s=n(516);t.use(s);/*!
	 * Expect interface
	 */
var u=n(518);t.use(u);/*!
	 * Should interface
	 */
var c=n(519);t.use(c);/*!
	 * Assert interface
	 */
var l=n(517);t.use(l)},function(e,t,n){/*!
	 * chai
	 * http://chaijs.com
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(303);e.exports=function(e,t){/*!
	   * Assertion Constructor
	   *
	   * Creates object for chaining.
	   *
	   * @api private
	   */
function n(e,t,n){o(this,"ssfi",n||arguments.callee),o(this,"object",e),o(this,"message",t)}/*!
	   * Module dependencies.
	   */
var i=e.AssertionError,o=t.flag;/*!
	   * Module export.
	   */
e.Assertion=n,Object.defineProperty(n,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=e}}),Object.defineProperty(n,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=e}}),n.addProperty=function(e,n){t.addProperty(this.prototype,e,n)},n.addMethod=function(e,n){t.addMethod(this.prototype,e,n)},n.addChainableMethod=function(e,n,r){t.addChainableMethod(this.prototype,e,n,r)},n.overwriteProperty=function(e,n){t.overwriteProperty(this.prototype,e,n)},n.overwriteMethod=function(e,n){t.overwriteMethod(this.prototype,e,n)},n.overwriteChainableMethod=function(e,n,r){t.overwriteChainableMethod(this.prototype,e,n,r)},/*!
	   * ### .assert(expression, message, negateMessage, expected, actual)
	   *
	   * Executes an expression and check expectations. Throws AssertionError for reporting if test doesn't pass.
	   *
	   * @name assert
	   * @param {Philosophical} expression to be tested
	   * @param {String or Function} message or function that returns message to display if expression fails
	   * @param {String or Function} negatedMessage or function that returns negatedMessage to display if negated expression fails
	   * @param {Mixed} expected value (remember to check for negation)
	   * @param {Mixed} actual (optional) will default to `this.obj`
	   * @param {Boolean} showDiff (optional) when set to `true`, assert will display a diff in addition to the message if expression fails
	   * @api private
	   */
n.prototype.assert=function(e,n,a,s,u,c){var l=t.test(this,arguments);if(!0!==c&&(c=!1),!0!==r.showDiff&&(c=!1),!l){var n=t.getMessage(this,arguments),f=t.getActual(this,arguments);throw new i(n,{actual:f,expected:s,showDiff:c},r.includeStack?this.assert:o(this,"ssfi"))}},/*!
	   * ### ._obj
	   *
	   * Quick reference to stored `actual` value for plugin developers.
	   *
	   * @api private
	   */
Object.defineProperty(n.prototype,"_obj",{get:function(){return o(this,"object")},set:function(e){o(this,"object",e)}})}},function(e,t,n){/*!
	 * chai
	 * http://chaijs.com
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t){function n(e,n){n&&T(this,"message",n),e=e.toLowerCase();var r=T(this,"object"),i=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(r),"expected #{this} to be "+i+e,"expected #{this} not to be "+i+e)}function r(){T(this,"contains",!0)}function i(e,n){n&&T(this,"message",n);var r=T(this,"object"),i=!1;if("array"===t.type(r)&&"object"===t.type(e)){for(var o in r)if(t.eql(r[o],e)){i=!0;break}}else if("object"===t.type(e)){if(!T(this,"negate")){for(var a in e)new E(r).property(a,e[a]);return}var s={};for(var a in e)s[a]=r[a];i=t.eql(s,e)}else i=r&&~r.indexOf(e);this.assert(i,"expected #{this} to include "+t.inspect(e),"expected #{this} to not include "+t.inspect(e))}function o(){var e=T(this,"object"),t=Object.prototype.toString.call(e);this.assert("[object Arguments]"===t,"expected #{this} to be arguments but got "+t,"expected #{this} to not be arguments")}function a(e,t){t&&T(this,"message",t);var n=T(this,"object");return T(this,"deep")?this.eql(e):void this.assert(e===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function s(e,n){n&&T(this,"message",n),this.assert(t.eql(e,T(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function u(e,t){t&&T(this,"message",t);var n=T(this,"object");if(T(this,"doLength")){new E(n,t).to.have.property("length");var r=n.length;this.assert(r>e,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",e,r)}else this.assert(n>e,"expected #{this} to be above "+e,"expected #{this} to be at most "+e)}function c(e,t){t&&T(this,"message",t);var n=T(this,"object");if(T(this,"doLength")){new E(n,t).to.have.property("length");var r=n.length;this.assert(r>=e,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to have a length below #{exp}",e,r)}else this.assert(n>=e,"expected #{this} to be at least "+e,"expected #{this} to be below "+e)}function l(e,t){t&&T(this,"message",t);var n=T(this,"object");if(T(this,"doLength")){new E(n,t).to.have.property("length");var r=n.length;this.assert(e>r,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",e,r)}else this.assert(e>n,"expected #{this} to be below "+e,"expected #{this} to be at least "+e)}function f(e,t){t&&T(this,"message",t);var n=T(this,"object");if(T(this,"doLength")){new E(n,t).to.have.property("length");var r=n.length;this.assert(e>=r,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to have a length above #{exp}",e,r)}else this.assert(e>=n,"expected #{this} to be at most "+e,"expected #{this} to be above "+e)}function h(e,n){n&&T(this,"message",n);var r=t.getName(e);this.assert(T(this,"object")instanceof e,"expected #{this} to be an instance of "+r,"expected #{this} to not be an instance of "+r)}function p(e,n){n&&T(this,"message",n);var r=T(this,"object");this.assert(r.hasOwnProperty(e),"expected #{this} to have own property "+t.inspect(e),"expected #{this} to not have own property "+t.inspect(e))}function d(e,n,r){"string"==typeof n&&(r=n,n=null),r&&T(this,"message",r);var i=T(this,"object"),o=Object.getOwnPropertyDescriptor(Object(i),e);o&&n?this.assert(t.eql(n,o),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(n)+", got "+t.inspect(o),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(n),n,o,!0):this.assert(o,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),T(this,"object",o)}function m(){T(this,"doLength",!0)}function v(e,t){t&&T(this,"message",t);var n=T(this,"object");new E(n,t).to.have.property("length");var r=n.length;this.assert(r==e,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",e,r)}function g(e){var n,r=T(this,"object"),i=!0,o="keys must be given single argument of Array|Object|String, or multiple String arguments";switch(t.type(e)){case"array":if(arguments.length>1)throw new Error(o);break;case"object":if(arguments.length>1)throw new Error(o);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}if(!e.length)throw new Error("keys required");var a=Object.keys(r),s=e,u=e.length,c=T(this,"any"),l=T(this,"all");if(c||l||(l=!0),c){var f=s.filter(function(e){return~a.indexOf(e)});i=f.length>0}if(l&&(i=e.every(function(e){return~a.indexOf(e)}),T(this,"negate")||T(this,"contains")||(i=i&&e.length==a.length)),u>1){e=e.map(function(e){return t.inspect(e)});var h=e.pop();l&&(n=e.join(", ")+", and "+h),c&&(n=e.join(", ")+", or "+h)}else n=t.inspect(e[0]);n=(u>1?"keys ":"key ")+n,n=(T(this,"contains")?"contain ":"have ")+n,this.assert(i,"expected #{this} to "+n,"expected #{this} to not "+n,s.slice(0).sort(),a.sort(),!0)}function y(e,n,r){r&&T(this,"message",r);var i=T(this,"object");new E(i,r).is.a("function");var o=!1,a=null,s=null,u=null;0===arguments.length?(n=null,e=null):e&&(e instanceof RegExp||"string"==typeof e)?(n=e,e=null):e&&e instanceof Error?(a=e,e=null,n=null):"function"==typeof e?(s=e.prototype.name||e.name,"Error"===s&&e!==Error&&(s=(new e).name)):e=null;try{i()}catch(c){if(a)return this.assert(c===a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}",a instanceof Error?a.toString():a,c instanceof Error?c.toString():c),T(this,"object",c),this;if(e&&(this.assert(c instanceof e,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp} but #{act} was thrown",s,c instanceof Error?c.toString():c),!n))return T(this,"object",c),this;var l="object"===t.type(c)&&"message"in c?c.message:""+c;if(null!=l&&n&&n instanceof RegExp)return this.assert(n.exec(l),"expected #{this} to throw error matching #{exp} but got #{act}","expected #{this} to throw error not matching #{exp}",n,l),T(this,"object",c),this;if(null!=l&&n&&"string"==typeof n)return this.assert(~l.indexOf(n),"expected #{this} to throw error including #{exp} but got #{act}","expected #{this} to throw error not including #{act}",n,l),T(this,"object",c),this;o=!0,u=c}var f="",h=null!==s?s:a?"#{exp}":"an error";o&&(f=" but #{act} was thrown"),this.assert(o===!0,"expected #{this} to throw "+h+f,"expected #{this} to not throw "+h+f,a instanceof Error?a.toString():a,u instanceof Error?u.toString():u),T(this,"object",u)}function b(e,t,n){return e.every(function(e){return n?t.some(function(t){return n(e,t)}):-1!==t.indexOf(e)})}function x(e,t,n){n&&T(this,"message",n);var r=T(this,"object");new E(e,n).to.have.property(t),new E(r).is.a("function");var i=e[t];r(),this.assert(i!==e[t],"expected ."+t+" to change","expected ."+t+" to not change")}function w(e,t,n){n&&T(this,"message",n);var r=T(this,"object");new E(e,n).to.have.property(t),new E(r).is.a("function");var i=e[t];r(),this.assert(e[t]-i>0,"expected ."+t+" to increase","expected ."+t+" to not increase")}function _(e,t,n){n&&T(this,"message",n);var r=T(this,"object");new E(e,n).to.have.property(t),new E(r).is.a("function");var i=e[t];r(),this.assert(e[t]-i<0,"expected ."+t+" to decrease","expected ."+t+" to not decrease")}var E=e.Assertion,T=(Object.prototype.toString,t.flag);["to","be","been","is","and","has","have","with","that","which","at","of","same"].forEach(function(e){E.addProperty(e,function(){return this})}),E.addProperty("not",function(){T(this,"negate",!0)}),E.addProperty("deep",function(){T(this,"deep",!0)}),E.addProperty("any",function(){T(this,"any",!0),T(this,"all",!1)}),E.addProperty("all",function(){T(this,"all",!0),T(this,"any",!1)}),E.addChainableMethod("an",n),E.addChainableMethod("a",n),E.addChainableMethod("include",i,r),E.addChainableMethod("contain",i,r),E.addChainableMethod("contains",i,r),E.addChainableMethod("includes",i,r),E.addProperty("ok",function(){this.assert(T(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),E.addProperty("true",function(){this.assert(!0===T(this,"object"),"expected #{this} to be true","expected #{this} to be false",this.negate?!1:!0)}),E.addProperty("false",function(){this.assert(!1===T(this,"object"),"expected #{this} to be false","expected #{this} to be true",this.negate?!0:!1)}),E.addProperty("null",function(){this.assert(null===T(this,"object"),"expected #{this} to be null","expected #{this} not to be null")}),E.addProperty("undefined",function(){this.assert(void 0===T(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")}),E.addProperty("exist",function(){this.assert(null!=T(this,"object"),"expected #{this} to exist","expected #{this} to not exist")}),E.addProperty("empty",function(){var e=T(this,"object"),t=e;Array.isArray(e)||"string"==typeof object?t=e.length:"object"==typeof e&&(t=Object.keys(e).length),this.assert(!t,"expected #{this} to be empty","expected #{this} not to be empty")}),E.addProperty("arguments",o),E.addProperty("Arguments",o),E.addMethod("equal",a),E.addMethod("equals",a),E.addMethod("eq",a),E.addMethod("eql",s),E.addMethod("eqls",s),E.addMethod("above",u),E.addMethod("gt",u),E.addMethod("greaterThan",u),E.addMethod("least",c),E.addMethod("gte",c),E.addMethod("below",l),E.addMethod("lt",l),E.addMethod("lessThan",l),E.addMethod("most",f),E.addMethod("lte",f),E.addMethod("within",function(e,t,n){n&&T(this,"message",n);var r=T(this,"object"),i=e+".."+t;if(T(this,"doLength")){new E(r,n).to.have.property("length");var o=r.length;this.assert(o>=e&&t>=o,"expected #{this} to have a length within "+i,"expected #{this} to not have a length within "+i)}else this.assert(r>=e&&t>=r,"expected #{this} to be within "+i,"expected #{this} to not be within "+i)}),E.addMethod("instanceof",h),E.addMethod("instanceOf",h),E.addMethod("property",function(e,n,r){r&&T(this,"message",r);var i=!!T(this,"deep"),o=i?"deep property ":"property ",a=T(this,"negate"),s=T(this,"object"),u=i?t.getPathInfo(e,s):null,c=i?u.exists:t.hasProperty(e,s),l=i?u.value:s[e];if(a&&void 0!==n){if(void 0===l)throw r=null!=r?r+": ":"",new Error(r+t.inspect(s)+" has no "+o+t.inspect(e))}else this.assert(c,"expected #{this} to have a "+o+t.inspect(e),"expected #{this} to not have "+o+t.inspect(e));void 0!==n&&this.assert(n===l,"expected #{this} to have a "+o+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have a "+o+t.inspect(e)+" of #{act}",n,l),T(this,"object",l)}),E.addMethod("ownProperty",p),E.addMethod("haveOwnProperty",p),E.addMethod("ownPropertyDescriptor",d),E.addMethod("haveOwnPropertyDescriptor",d),E.addChainableMethod("length",v,m),E.addMethod("lengthOf",v),E.addMethod("match",function(e,t){t&&T(this,"message",t);var n=T(this,"object");this.assert(e.exec(n),"expected #{this} to match "+e,"expected #{this} not to match "+e)}),E.addMethod("string",function(e,n){n&&T(this,"message",n);var r=T(this,"object");new E(r,n).is.a("string"),this.assert(~r.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))}),E.addMethod("keys",g),E.addMethod("key",g),E.addMethod("throw",y),E.addMethod("throws",y),E.addMethod("Throw",y),E.addMethod("respondTo",function(e,n){n&&T(this,"message",n);var r=T(this,"object"),i=T(this,"itself"),o="function"!==t.type(r)||i?r[e]:r.prototype[e];this.assert("function"==typeof o,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}),E.addProperty("itself",function(){T(this,"itself",!0)}),E.addMethod("satisfy",function(e,n){n&&T(this,"message",n);var r=T(this,"object"),i=e(r);this.assert(i,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),this.negate?!1:!0,i)}),E.addMethod("closeTo",function(e,n,r){r&&T(this,"message",r);var i=T(this,"object");if(new E(i,r).is.a("number"),"number"!==t.type(e)||"number"!==t.type(n))throw new Error("the arguments to closeTo must be numbers");this.assert(Math.abs(i-e)<=n,"expected #{this} to be close to "+e+" +/- "+n,"expected #{this} not to be close to "+e+" +/- "+n)}),E.addMethod("members",function(e,n){n&&T(this,"message",n);var r=T(this,"object");new E(r).to.be.an("array"),new E(e).to.be.an("array");var i=T(this,"deep")?t.eql:void 0;return T(this,"contains")?this.assert(b(e,r,i),"expected #{this} to be a superset of #{act}","expected #{this} to not be a superset of #{act}",r,e):void this.assert(b(r,e,i)&&b(e,r,i),"expected #{this} to have the same members as #{act}","expected #{this} to not have the same members as #{act}",r,e)}),E.addChainableMethod("change",x),E.addChainableMethod("changes",x),E.addChainableMethod("increase",w),E.addChainableMethod("increases",w),E.addChainableMethod("decrease",_),E.addChainableMethod("decreases",_)}},function(e,t,n){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t){/*!
	   * Chai dependencies.
	   */
var n=e.Assertion,r=t.flag,i=e.assert=function(t,r){var i=new n(null,null,e.assert);i.assert(t,r,"[ negation message unavailable ]")};i.fail=function(t,n,r,o){throw r=r||"assert.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:o},i.fail)},i.ok=function(e,t){new n(e,t).is.ok},i.notOk=function(e,t){new n(e,t).is.not.ok},i.equal=function(e,t,o){var a=new n(e,o,i.equal);a.assert(t==r(a,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e)},i.notEqual=function(e,t,o){var a=new n(e,o,i.notEqual);a.assert(t!=r(a,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e)},i.strictEqual=function(e,t,r){new n(e,r).to.equal(t)},i.notStrictEqual=function(e,t,r){new n(e,r).to.not.equal(t)},i.deepEqual=function(e,t,r){new n(e,r).to.eql(t)},i.notDeepEqual=function(e,t,r){new n(e,r).to.not.eql(t)},i.isAbove=function(e,t,r){new n(e,r).to.be.above(t)},i.isBelow=function(e,t,r){new n(e,r).to.be.below(t)},i.isTrue=function(e,t){new n(e,t).is["true"]},i.isFalse=function(e,t){new n(e,t).is["false"]},i.isNull=function(e,t){new n(e,t).to.equal(null)},i.isNotNull=function(e,t){new n(e,t).to.not.equal(null)},i.isUndefined=function(e,t){new n(e,t).to.equal(void 0)},i.isDefined=function(e,t){new n(e,t).to.not.equal(void 0)},i.isFunction=function(e,t){new n(e,t).to.be.a("function")},i.isNotFunction=function(e,t){new n(e,t).to.not.be.a("function")},i.isObject=function(e,t){new n(e,t).to.be.a("object")},i.isNotObject=function(e,t){new n(e,t).to.not.be.a("object")},i.isArray=function(e,t){new n(e,t).to.be.an("array")},i.isNotArray=function(e,t){new n(e,t).to.not.be.an("array")},i.isString=function(e,t){new n(e,t).to.be.a("string")},i.isNotString=function(e,t){new n(e,t).to.not.be.a("string")},i.isNumber=function(e,t){new n(e,t).to.be.a("number")},i.isNotNumber=function(e,t){new n(e,t).to.not.be.a("number")},i.isBoolean=function(e,t){new n(e,t).to.be.a("boolean")},i.isNotBoolean=function(e,t){new n(e,t).to.not.be.a("boolean")},i.typeOf=function(e,t,r){new n(e,r).to.be.a(t)},i.notTypeOf=function(e,t,r){new n(e,r).to.not.be.a(t)},i.instanceOf=function(e,t,r){new n(e,r).to.be.instanceOf(t)},i.notInstanceOf=function(e,t,r){new n(e,r).to.not.be.instanceOf(t)},i.include=function(e,t,r){new n(e,r,i.include).include(t)},i.notInclude=function(e,t,r){new n(e,r,i.notInclude).not.include(t)},i.match=function(e,t,r){new n(e,r).to.match(t)},i.notMatch=function(e,t,r){new n(e,r).to.not.match(t)},i.property=function(e,t,r){new n(e,r).to.have.property(t)},i.notProperty=function(e,t,r){new n(e,r).to.not.have.property(t)},i.deepProperty=function(e,t,r){new n(e,r).to.have.deep.property(t)},i.notDeepProperty=function(e,t,r){new n(e,r).to.not.have.deep.property(t)},i.propertyVal=function(e,t,r,i){new n(e,i).to.have.property(t,r)},i.propertyNotVal=function(e,t,r,i){new n(e,i).to.not.have.property(t,r)},i.deepPropertyVal=function(e,t,r,i){new n(e,i).to.have.deep.property(t,r)},i.deepPropertyNotVal=function(e,t,r,i){new n(e,i).to.not.have.deep.property(t,r)},i.lengthOf=function(e,t,r){new n(e,r).to.have.length(t)},i.Throw=function(e,t,i,o){("string"==typeof t||t instanceof RegExp)&&(i=t,t=null);var a=new n(e,o).to.Throw(t,i);return r(a,"object")},i.doesNotThrow=function(e,t,r){"string"==typeof t&&(r=t,t=null),new n(e,r).to.not.Throw(t)},i.operator=function(e,i,o,a){var s;switch(i){case"==":s=e==o;break;case"===":s=e===o;break;case">":s=e>o;break;case">=":s=e>=o;break;case"<":s=o>e;break;case"<=":s=o>=e;break;case"!=":s=e!=o;break;case"!==":s=e!==o;break;default:throw new Error('Invalid operator "'+i+'"')}var u=new n(s,a);u.assert(!0===r(u,"object"),"expected "+t.inspect(e)+" to be "+i+" "+t.inspect(o),"expected "+t.inspect(e)+" to not be "+i+" "+t.inspect(o))},i.closeTo=function(e,t,r,i){new n(e,i).to.be.closeTo(t,r)},i.sameMembers=function(e,t,r){new n(e,r).to.have.same.members(t)},i.sameDeepMembers=function(e,t,r){new n(e,r).to.have.same.deep.members(t)},i.includeMembers=function(e,t,r){new n(e,r).to.include.members(t)},i.changes=function(e,t,r){new n(e).to.change(t,r)},i.doesNotChange=function(e,t,r){new n(e).to.not.change(t,r)},i.increases=function(e,t,r){new n(e).to.increase(t,r)},i.doesNotIncrease=function(e,t,r){new n(e).to.not.increase(t,r)},i.decreases=function(e,t,r){new n(e).to.decrease(t,r)},i.doesNotDecrease=function(e,t,r){new n(e).to.not.decrease(t,r)},/*!
	   * Undocumented / untested
	   */
i.ifError=function(e,t){new n(e,t).to.not.be.ok},/*!
	   * Aliases.
	   */
function o(e,t){return i[t]=i[e],o}("Throw","throw")("Throw","throws")}},function(e,t,n){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t){e.expect=function(t,n){return new e.Assertion(t,n)},e.expect.fail=function(t,n,r,i){throw r=r||"expect.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:i},e.expect.fail)}}},function(e,t,n){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t){function n(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean?new r(this.valueOf(),null,t):new r(this,null,t)}function n(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})}Object.defineProperty(Object.prototype,"should",{set:n,get:t,configurable:!0});var i={};return i.fail=function(t,n,r,o){throw r=r||"should.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:o},i.fail)},i.equal=function(e,t,n){new r(e,n).to.equal(t)},i.Throw=function(e,t,n,i){new r(e,i).to.Throw(t,n)},i.exist=function(e,t){new r(e,t).to.exist},i.not={},i.not.equal=function(e,t,n){new r(e,n).to.not.equal(t)},i.not.Throw=function(e,t,n,i){new r(e,i).to.not.Throw(t,n)},i.not.exist=function(e,t){new r(e,t).to.not.exist},i["throw"]=i.Throw,i.not["throw"]=i.not.Throw,i}var r=e.Assertion;e.should=n,e.Should=n}},function(e,t,n){/*!
	 * Chai - addChainingMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependencies
	 */
var r=n(430),i=n(304),o=n(303),a="__proto__"in Object,s=/^(?:length|name|arguments|caller)$/,u=Function.prototype.call,c=Function.prototype.apply;e.exports=function(e,t,n,l){"function"!=typeof l&&(l=function(){});var f={method:n,chainingBehavior:l};e.__methods||(e.__methods={}),e.__methods[t]=f,Object.defineProperty(e,t,{get:function(){f.chainingBehavior.call(this);var t=function h(){var e=i(this,"ssfi");e&&o.includeStack===!1&&i(this,"ssfi",h);var t=f.method.apply(this,arguments);return void 0===t?this:t};if(a){var n=t.__proto__=Object.create(this);n.call=u,n.apply=c}else{var l=Object.getOwnPropertyNames(e);l.forEach(function(n){if(!s.test(n)){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r)}})}return r(this,t),t},configurable:!0})}},function(e,t,n){/*!
	 * Chai - addMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(303),i=n(304);e.exports=function(e,t,n){e[t]=function(){var o=i(this,"ssfi");o&&r.includeStack===!1&&i(this,"ssfi",e[t]);var a=n.apply(this,arguments);return void 0===a?this:a}}},function(e,t,n){/*!
	 * Chai - addProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t,n){Object.defineProperty(e,t,{get:function(){var e=n.call(this);return void 0===e?this:e},configurable:!0})}},function(e,t,n){/*!
	 * Chai - getEnumerableProperties utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e){var t=[];for(var n in e)t.push(n);return t}},function(e,t,n){/*!
	 * Chai - message composition utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(304),i=n(425),o=(n(402),n(429));e.exports=function(e,t){var n=r(e,"negate"),a=r(e,"object"),s=t[3],u=i(e,t),c=n?t[2]:t[1],l=r(e,"message");return"function"==typeof c&&(c=c()),c=c||"",c=c.replace(/#{this}/g,o(a)).replace(/#{act}/g,o(u)).replace(/#{exp}/g,o(s)),l?l+": "+c:c}},function(e,t,n){/*!
	 * Chai - getPathValue utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * @see https://github.com/logicalparadox/filtr
	 * MIT Licensed
	 */
var r=n(427);e.exports=function(e,t){var n=r(e,t);return n.value}},function(e,t,n){/*!
	 * Chai - getProperties utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e){function t(e){-1===n.indexOf(e)&&n.push(e)}for(var n=Object.getOwnPropertyNames(subject),r=Object.getPrototypeOf(subject);null!==r;)Object.getOwnPropertyNames(r).forEach(t),r=Object.getPrototypeOf(r);return n}},function(e,t,n){/*!
	 * chai
	 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Main exports
	 */
var t=e.exports={};/*!
	 * test utility
	 */
t.test=n(531),/*!
	 * type utility
	 */
t.type=n(431),/*!
	 * message utility
	 */
t.getMessage=n(524),/*!
	 * actual utility
	 */
t.getActual=n(425),/*!
	 * Inspect util
	 */
t.inspect=n(402),/*!
	 * Object Display util
	 */
t.objDisplay=n(429),/*!
	 * Flag utility
	 */
t.flag=n(304),/*!
	 * Flag transferring utility
	 */
t.transferFlags=n(430),/*!
	 * Deep equal utility
	 */
t.eql=n(533),/*!
	 * Deep path value
	 */
t.getPathValue=n(525),/*!
	 * Deep path info
	 */
t.getPathInfo=n(427),/*!
	 * Check if a property exists
	 */
t.hasProperty=n(428),/*!
	 * Function name
	 */
t.getName=n(426),/*!
	 * add Property
	 */
t.addProperty=n(522),/*!
	 * add Method
	 */
t.addMethod=n(521),/*!
	 * overwrite Property
	 */
t.overwriteProperty=n(530),/*!
	 * overwrite Method
	 */
t.overwriteMethod=n(529),/*!
	 * Add a chainable method
	 */
t.addChainableMethod=n(520),/*!
	 * Overwrite chainable method
	 */
t.overwriteChainableMethod=n(528)},function(e,t,n){/*!
	 * Chai - overwriteChainableMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t,n,r){var i=e.__methods[t],o=i.chainingBehavior;i.chainingBehavior=function(){var e=r(o).call(this);return void 0===e?this:e};var a=i.method;i.method=function(){var e=n(a).apply(this,arguments);return void 0===e?this:e}}},function(e,t,n){/*!
	 * Chai - overwriteMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t,n){var r=e[t],i=function(){return this};r&&"function"==typeof r&&(i=r),e[t]=function(){var e=n(i).apply(this,arguments);return void 0===e?this:e}}},function(e,t,n){/*!
	 * Chai - overwriteProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t),i=function(){};r&&"function"==typeof r.get&&(i=r.get),Object.defineProperty(e,t,{get:function(){var e=n(i).call(this);return void 0===e?this:e},configurable:!0})}},function(e,t,n){/*!
	 * Chai - test utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(304);e.exports=function(e,t){var n=r(e,"negate"),i=t[0];return n?!i:i}},function(e,t,n){/*!
	 * assertion-error
	 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
	 * MIT Licensed
	 */
/*!
	 * Return a function that will copy properties from
	 * one object to another excluding any originally
	 * listed. Returned function will create a new `{}`.
	 *
	 * @param {String} excluded properties ...
	 * @return {Function}
	 */
function r(){function e(e,n){Object.keys(n).forEach(function(r){~t.indexOf(r)||(e[r]=n[r])})}var t=[].slice.call(arguments);return function(){for(var t=[].slice.call(arguments),n=0,r={};n<t.length;n++)e(r,t[n]);return r}}function i(e,t,n){var i=r("name","message","stack","constructor","toJSON"),o=i(t||{});this.message=e||"Unspecified AssertionError",this.showDiff=!1;for(var a in o)this[a]=o[a];n=n||arguments.callee,n&&Error.captureStackTrace&&Error.captureStackTrace(this,n)}/*!
	 * Primary Exports
	 */
e.exports=i,/*!
	 * Inherit from Error.prototype
	 */
i.prototype=Object.create(Error.prototype),/*!
	 * Statically set name
	 */
i.prototype.name="AssertionError",/*!
	 * Ensure correct constructor
	 */
i.prototype.constructor=i,i.prototype.toJSON=function(e){var t=r("constructor","toJSON","stack"),n=t({name:this.name},this);return!1!==e&&this.stack&&(n.stack=this.stack),n}},function(e,t,n){e.exports=n(534)},function(e,t,n){function r(e,t,n){return i(e,t)?!0:"date"===m(e)?a(e,t):"regexp"===m(e)?s(e,t):d.isBuffer(e)?f(e,t):"arguments"===m(e)?u(e,t,n):o(e,t)?"object"!==m(e)&&"object"!==m(t)&&"array"!==m(e)&&"array"!==m(t)?i(e,t):p(e,t,n):!1}/*!
	 * Strict (egal) equality test. Ensures that NaN always
	 * equals NaN and `-0` does not equal `+0`.
	 *
	 * @param {Mixed} a
	 * @param {Mixed} b
	 * @return {Boolean} equal match
	 */
function i(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}/*!
	 * Compare the types of two given objects and
	 * return if they are equal. Note that an Array
	 * has a type of `array` (not `object`) and arguments
	 * have a type of `arguments` (not `array`/`object`).
	 *
	 * @param {Mixed} a
	 * @param {Mixed} b
	 * @return {Boolean} result
	 */
function o(e,t){return m(e)===m(t)}/*!
	 * Compare two Date objects by asserting that
	 * the time values are equal using `saveValue`.
	 *
	 * @param {Date} a
	 * @param {Date} b
	 * @return {Boolean} result
	 */
function a(e,t){return"date"!==m(t)?!1:i(e.getTime(),t.getTime())}/*!
	 * Compare two regular expressions by converting them
	 * to string and checking for `sameValue`.
	 *
	 * @param {RegExp} a
	 * @param {RegExp} b
	 * @return {Boolean} result
	 */
function s(e,t){return"regexp"!==m(t)?!1:i(e.toString(),t.toString())}/*!
	 * Assert deep equality of two `arguments` objects.
	 * Unfortunately, these must be sliced to arrays
	 * prior to test to ensure no bad behavior.
	 *
	 * @param {Arguments} a
	 * @param {Arguments} b
	 * @param {Array} memoize (optional)
	 * @return {Boolean} result
	 */
function u(e,t,n){return"arguments"!==m(t)?!1:(e=[].slice.call(e),t=[].slice.call(t),r(e,t,n))}/*!
	 * Get enumerable properties of a given object.
	 *
	 * @param {Object} a
	 * @return {Array} property names
	 */
function c(e){var t=[];for(var n in e)t.push(n);return t}/*!
	 * Simple equality for flat iterable objects
	 * such as Arrays or Node.js buffers.
	 *
	 * @param {Iterable} a
	 * @param {Iterable} b
	 * @return {Boolean} result
	 */
function l(e,t){if(e.length!==t.length)return!1;for(var n=0,r=!0;n<e.length;n++)if(e[n]!==t[n]){r=!1;break}return r}/*!
	 * Extension to `iterableEqual` specifically
	 * for Node.js Buffers.
	 *
	 * @param {Buffer} a
	 * @param {Mixed} b
	 * @return {Boolean} result
	 */
function f(e,t){return d.isBuffer(t)?l(e,t):!1}/*!
	 * Block for `objectEqual` ensuring non-existing
	 * values don't get in.
	 *
	 * @param {Mixed} object
	 * @return {Boolean} result
	 */
function h(e){return null!==e&&void 0!==e}/*!
	 * Recursively check the equality of two objects.
	 * Once basic sameness has been established it will
	 * defer to `deepEqual` for each enumerable key
	 * in the object.
	 *
	 * @param {Mixed} a
	 * @param {Mixed} b
	 * @return {Boolean} result
	 */
function p(e,t,n){if(!h(e)||!h(t))return!1;if(e.prototype!==t.prototype)return!1;var i;if(n){for(i=0;i<n.length;i++)if(n[i][0]===e&&n[i][1]===t||n[i][0]===t&&n[i][1]===e)return!0}else n=[];try{var o=c(e),a=c(t)}catch(s){return!1}if(o.sort(),a.sort(),!l(o,a))return!1;n.push([e,t]);var u;for(i=o.length-1;i>=0;i--)if(u=o[i],!r(e[u],t[u],n))return!1;return!0}/*!
	 * deep-eql
	 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependencies
	 */
var d,m=n(535);try{d=n(119).Buffer}catch(v){d={},d.isBuffer=function(){return!1}}/*!
	 * Primary Export
	 */
e.exports=r},function(e,t,n){e.exports=n(536)},function(e,t,n){function r(e){var t=Object.prototype.toString.call(e);return o[t]?o[t]:null===e?"null":void 0===e?"undefined":e===Object(e)?"object":typeof e}function i(){this.tests={}}/*!
	 * type-detect
	 * Copyright(c) 2013 jake luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Primary Exports
	 */
var t=e.exports=r,o={"[object Array]":"array","[object RegExp]":"regexp","[object Function]":"function","[object Arguments]":"arguments","[object Date]":"date"};t.Library=i,i.prototype.of=r,i.prototype.define=function(e,t){return 1===arguments.length?this.tests[e]:(this.tests[e]=t,this)},i.prototype.test=function(e,t){if(t===r(e))return!0;var n=this.tests[t];if(n&&"regexp"===r(n))return n.test(e);if(n&&"function"===r(n))return n(e);throw new ReferenceError('Type test "'+t+'" not defined or invalid.')}},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,"@charset \"utf-8\";body{margin:0}#mocha{font:20px/1.5 \"Helvetica Neue\",Helvetica,Arial,sans-serif;margin:60px 50px}#mocha ul,#mocha li{margin:0;padding:0}#mocha ul{list-style:none}#mocha h2{margin:0}#mocha h1{margin:15px 0 0;font-size:1em;font-weight:200}#mocha h1 a{text-decoration:none;color:inherit}#mocha h1 a:hover{text-decoration:underline}#mocha .suite .suite h1{margin-top:0;font-size:.8em}#mocha .hidden{display:none}#mocha h2{font-size:12px;font-weight:400;cursor:pointer}#mocha .suite,#mocha .test{margin-left:15px}#mocha .test{overflow:hidden}#mocha .test.pending:hover h2::after{content:'(pending)';font-family:arial,sans-serif}#mocha .test.pass.medium .duration{background:#c09853}#mocha .test.pass.slow .duration{background:#b94a48}#mocha .test.pass::before{content:'';font-size:12px;display:block;float:left;margin-right:5px;color:#00d6b2}#mocha .test.pass .duration{font-size:9px;margin-left:5px;padding:2px 5px;color:#fff;box-shadow:inset 0 1px 1px rgba(0,0,0,.2);border-radius:5px}#mocha .test.pass.fast .duration{display:none}#mocha .test.pending{color:#0b97c4}#mocha .test.pending::before{content:'';color:#0b97c4}#mocha .test.fail{color:#c00}#mocha .test.fail pre{color:#000}#mocha .test.fail::before{content:'';font-size:12px;display:block;float:left;margin-right:5px;color:#c00}#mocha .test pre.error{color:#c00;max-height:300px;overflow:auto}#mocha .test pre{display:block;float:left;clear:left;font:12px/1.5 monaco,monospace;margin:5px;padding:15px;border:1px solid #eee;max-width:calc(100% - 42px);word-wrap:break-word;border-bottom-color:#ddd;-webkit-border-radius:3px;-webkit-box-shadow:0 1px 3px #eee;-moz-border-radius:3px;-moz-box-shadow:0 1px 3px #eee;border-radius:3px}#mocha .test h2{position:relative}#mocha .test a.replay{position:absolute;top:3px;right:0;text-decoration:none;vertical-align:middle;display:block;width:15px;height:15px;line-height:15px;text-align:center;background:#eee;font-size:15px;border-radius:15px;transition:opacity 200ms;opacity:.3;color:#888}#mocha .test:hover a.replay{opacity:1}#mocha-report.pass .test.fail,#mocha-report.fail .test.pass,#mocha-report.pending .test.pass,#mocha-report.pending .test.fail{display:none}#mocha-report.pending .test.pass.pending{display:block}#mocha-error{color:#c00;font-size:1.5em;font-weight:100;letter-spacing:1px}#mocha-stats{position:fixed;top:15px;right:10px;font-size:12px;margin:0;color:#888;z-index:1}#mocha-stats .progress{float:right;padding-top:0}#mocha-stats em{color:#000}#mocha-stats a{text-decoration:none;color:inherit}#mocha-stats a:hover{border-bottom:1px solid #eee}#mocha-stats li{display:inline-block;margin:0 5px;list-style:none;padding-top:11px}#mocha-stats canvas{width:40px;height:40px}#mocha code .comment{color:#ddd}#mocha code .init{color:#2f6fad}#mocha code .string{color:#5890ad}#mocha code .keyword{color:#8a6343}#mocha code .number{color:#2f6fad}@media screen and (max-device-width:480px){#mocha{margin:60px 0}#mocha #stats{position:absolute}}",""])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){t=e.exports=n(9)(),t.push([e.id,"#mocha-stats em{color:#fff}",""])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=function(e){"function"==typeof execScript?execScript(e):eval.call(null,e)}},function(e,t,n){n(640)(n(642))},function(e,t,n){e.exports=";(function(){\n\n// CommonJS require()\n\nfunction require(p){\n    var path = require.resolve(p)\n      , mod = require.modules[path];\n    if (!mod) throw new Error('failed to require \"' + p + '\"');\n    if (!mod.exports) {\n      mod.exports = {};\n      mod.call(mod.exports, mod, mod.exports, require.relative(path));\n    }\n    return mod.exports;\n  }\n\nrequire.modules = {};\n\nrequire.resolve = function (path){\n    var orig = path\n      , reg = path + '.js'\n      , index = path + '/index.js';\n    return require.modules[reg] && reg\n      || require.modules[index] && index\n      || orig;\n  };\n\nrequire.register = function (path, fn){\n    require.modules[path] = fn;\n  };\n\nrequire.relative = function (parent) {\n    return function(p){\n      if ('.' != p.charAt(0)) return require(p);\n\n      var path = parent.split('/')\n        , segs = p.split('/');\n      path.pop();\n\n      for (var i = 0; i < segs.length; i++) {\n        var seg = segs[i];\n        if ('..' == seg) path.pop();\n        else if ('.' != seg) path.push(seg);\n      }\n\n      return require(path.join('/'));\n    };\n  };\n\n\nrequire.register(\"browser/debug.js\", function(module, exports, require){\nmodule.exports = function(type){\n  return function(){\n  }\n};\n\n}); // module: browser/debug.js\n\nrequire.register(\"browser/diff.js\", function(module, exports, require){\n/* See LICENSE file for terms of use */\n\n/*\n * Text diff implementation.\n *\n * This library supports the following APIS:\n * JsDiff.diffChars: Character by character diff\n * JsDiff.diffWords: Word (as defined by \\b regex) diff which ignores whitespace\n * JsDiff.diffLines: Line based diff\n *\n * JsDiff.diffCss: Diff targeted at CSS content\n *\n * These methods are based on the implementation proposed in\n * \"An O(ND) Difference Algorithm and its Variations\" (Myers, 1986).\n * http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.4.6927\n */\nvar JsDiff = (function() {\n  /*jshint maxparams: 5*/\n  function clonePath(path) {\n    return { newPos: path.newPos, components: path.components.slice(0) };\n  }\n  function removeEmpty(array) {\n    var ret = [];\n    for (var i = 0; i < array.length; i++) {\n      if (array[i]) {\n        ret.push(array[i]);\n      }\n    }\n    return ret;\n  }\n  function escapeHTML(s) {\n    var n = s;\n    n = n.replace(/&/g, '&amp;');\n    n = n.replace(/</g, '&lt;');\n    n = n.replace(/>/g, '&gt;');\n    n = n.replace(/\"/g, '&quot;');\n\n    return n;\n  }\n\n  var Diff = function(ignoreWhitespace) {\n    this.ignoreWhitespace = ignoreWhitespace;\n  };\n  Diff.prototype = {\n      diff: function(oldString, newString) {\n        // Handle the identity case (this is due to unrolling editLength == 0\n        if (newString === oldString) {\n          return [{ value: newString }];\n        }\n        if (!newString) {\n          return [{ value: oldString, removed: true }];\n        }\n        if (!oldString) {\n          return [{ value: newString, added: true }];\n        }\n\n        newString = this.tokenize(newString);\n        oldString = this.tokenize(oldString);\n\n        var newLen = newString.length, oldLen = oldString.length;\n        var maxEditLength = newLen + oldLen;\n        var bestPath = [{ newPos: -1, components: [] }];\n\n        // Seed editLength = 0\n        var oldPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n        if (bestPath[0].newPos+1 >= newLen && oldPos+1 >= oldLen) {\n          return bestPath[0].components;\n        }\n\n        for (var editLength = 1; editLength <= maxEditLength; editLength++) {\n          for (var diagonalPath = -1*editLength; diagonalPath <= editLength; diagonalPath+=2) {\n            var basePath;\n            var addPath = bestPath[diagonalPath-1],\n                removePath = bestPath[diagonalPath+1];\n            oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n            if (addPath) {\n              // No one else is going to attempt to use this value, clear it\n              bestPath[diagonalPath-1] = undefined;\n            }\n\n            var canAdd = addPath && addPath.newPos+1 < newLen;\n            var canRemove = removePath && 0 <= oldPos && oldPos < oldLen;\n            if (!canAdd && !canRemove) {\n              bestPath[diagonalPath] = undefined;\n              continue;\n            }\n\n            // Select the diagonal that we want to branch from. We select the prior\n            // path whose position in the new string is the farthest from the origin\n            // and does not pass the bounds of the diff graph\n            if (!canAdd || (canRemove && addPath.newPos < removePath.newPos)) {\n              basePath = clonePath(removePath);\n              this.pushComponent(basePath.components, oldString[oldPos], undefined, true);\n            } else {\n              basePath = clonePath(addPath);\n              basePath.newPos++;\n              this.pushComponent(basePath.components, newString[basePath.newPos], true, undefined);\n            }\n\n            var oldPos = this.extractCommon(basePath, newString, oldString, diagonalPath);\n\n            if (basePath.newPos+1 >= newLen && oldPos+1 >= oldLen) {\n              return basePath.components;\n            } else {\n              bestPath[diagonalPath] = basePath;\n            }\n          }\n        }\n      },\n\n      pushComponent: function(components, value, added, removed) {\n        var last = components[components.length-1];\n        if (last && last.added === added && last.removed === removed) {\n          // We need to clone here as the component clone operation is just\n          // as shallow array clone\n          components[components.length-1] =\n            {value: this.join(last.value, value), added: added, removed: removed };\n        } else {\n          components.push({value: value, added: added, removed: removed });\n        }\n      },\n      extractCommon: function(basePath, newString, oldString, diagonalPath) {\n        var newLen = newString.length,\n            oldLen = oldString.length,\n            newPos = basePath.newPos,\n            oldPos = newPos - diagonalPath;\n        while (newPos+1 < newLen && oldPos+1 < oldLen && this.equals(newString[newPos+1], oldString[oldPos+1])) {\n          newPos++;\n          oldPos++;\n\n          this.pushComponent(basePath.components, newString[newPos], undefined, undefined);\n        }\n        basePath.newPos = newPos;\n        return oldPos;\n      },\n\n      equals: function(left, right) {\n        var reWhitespace = /\\S/;\n        if (this.ignoreWhitespace && !reWhitespace.test(left) && !reWhitespace.test(right)) {\n          return true;\n        } else {\n          return left === right;\n        }\n      },\n      join: function(left, right) {\n        return left + right;\n      },\n      tokenize: function(value) {\n        return value;\n      }\n  };\n\n  var CharDiff = new Diff();\n\n  var WordDiff = new Diff(true);\n  var WordWithSpaceDiff = new Diff();\n  WordDiff.tokenize = WordWithSpaceDiff.tokenize = function(value) {\n    return removeEmpty(value.split(/(\\s+|\\b)/));\n  };\n\n  var CssDiff = new Diff(true);\n  CssDiff.tokenize = function(value) {\n    return removeEmpty(value.split(/([{}:;,]|\\s+)/));\n  };\n\n  var LineDiff = new Diff();\n  LineDiff.tokenize = function(value) {\n    var retLines = [],\n        lines = value.split(/^/m);\n\n    for(var i = 0; i < lines.length; i++) {\n      var line = lines[i],\n          lastLine = lines[i - 1];\n\n      // Merge lines that may contain windows new lines\n      if (line == '\\n' && lastLine && lastLine[lastLine.length - 1] === '\\r') {\n        retLines[retLines.length - 1] += '\\n';\n      } else if (line) {\n        retLines.push(line);\n      }\n    }\n\n    return retLines;\n  };\n\n  return {\n    Diff: Diff,\n\n    diffChars: function(oldStr, newStr) { return CharDiff.diff(oldStr, newStr); },\n    diffWords: function(oldStr, newStr) { return WordDiff.diff(oldStr, newStr); },\n    diffWordsWithSpace: function(oldStr, newStr) { return WordWithSpaceDiff.diff(oldStr, newStr); },\n    diffLines: function(oldStr, newStr) { return LineDiff.diff(oldStr, newStr); },\n\n    diffCss: function(oldStr, newStr) { return CssDiff.diff(oldStr, newStr); },\n\n    createPatch: function(fileName, oldStr, newStr, oldHeader, newHeader) {\n      var ret = [];\n\n      ret.push('Index: ' + fileName);\n      ret.push('===================================================================');\n      ret.push('--- ' + fileName + (typeof oldHeader === 'undefined' ? '' : '\\t' + oldHeader));\n      ret.push('+++ ' + fileName + (typeof newHeader === 'undefined' ? '' : '\\t' + newHeader));\n\n      var diff = LineDiff.diff(oldStr, newStr);\n      if (!diff[diff.length-1].value) {\n        diff.pop();   // Remove trailing newline add\n      }\n      diff.push({value: '', lines: []});   // Append an empty value to make cleanup easier\n\n      function contextLines(lines) {\n        return lines.map(function(entry) { return ' ' + entry; });\n      }\n      function eofNL(curRange, i, current) {\n        var last = diff[diff.length-2],\n            isLast = i === diff.length-2,\n            isLastOfType = i === diff.length-3 && (current.added !== last.added || current.removed !== last.removed);\n\n        // Figure out if this is the last line for the given file and missing NL\n        if (!/\\n$/.test(current.value) && (isLast || isLastOfType)) {\n          curRange.push('\\\\ No newline at end of file');\n        }\n      }\n\n      var oldRangeStart = 0, newRangeStart = 0, curRange = [],\n          oldLine = 1, newLine = 1;\n      for (var i = 0; i < diff.length; i++) {\n        var current = diff[i],\n            lines = current.lines || current.value.replace(/\\n$/, '').split('\\n');\n        current.lines = lines;\n\n        if (current.added || current.removed) {\n          if (!oldRangeStart) {\n            var prev = diff[i-1];\n            oldRangeStart = oldLine;\n            newRangeStart = newLine;\n\n            if (prev) {\n              curRange = contextLines(prev.lines.slice(-4));\n              oldRangeStart -= curRange.length;\n              newRangeStart -= curRange.length;\n            }\n          }\n          curRange.push.apply(curRange, lines.map(function(entry) { return (current.added?'+':'-') + entry; }));\n          eofNL(curRange, i, current);\n\n          if (current.added) {\n            newLine += lines.length;\n          } else {\n            oldLine += lines.length;\n          }\n        } else {\n          if (oldRangeStart) {\n            // Close out any changes that have been output (or join overlapping)\n            if (lines.length <= 8 && i < diff.length-2) {\n              // Overlapping\n              curRange.push.apply(curRange, contextLines(lines));\n            } else {\n              // end the range and output\n              var contextSize = Math.min(lines.length, 4);\n              ret.push(\n                  '@@ -' + oldRangeStart + ',' + (oldLine-oldRangeStart+contextSize)\n                  + ' +' + newRangeStart + ',' + (newLine-newRangeStart+contextSize)\n                  + ' @@');\n              ret.push.apply(ret, curRange);\n              ret.push.apply(ret, contextLines(lines.slice(0, contextSize)));\n              if (lines.length <= 4) {\n                eofNL(ret, i, current);\n              }\n\n              oldRangeStart = 0;  newRangeStart = 0; curRange = [];\n            }\n          }\n          oldLine += lines.length;\n          newLine += lines.length;\n        }\n      }\n\n      return ret.join('\\n') + '\\n';\n    },\n\n    applyPatch: function(oldStr, uniDiff) {\n      var diffstr = uniDiff.split('\\n');\n      var diff = [];\n      var remEOFNL = false,\n          addEOFNL = false;\n\n      for (var i = (diffstr[0][0]==='I'?4:0); i < diffstr.length; i++) {\n        if(diffstr[i][0] === '@') {\n          var meh = diffstr[i].split(/@@ -(\\d+),(\\d+) \\+(\\d+),(\\d+) @@/);\n          diff.unshift({\n            start:meh[3],\n            oldlength:meh[2],\n            oldlines:[],\n            newlength:meh[4],\n            newlines:[]\n          });\n        } else if(diffstr[i][0] === '+') {\n          diff[0].newlines.push(diffstr[i].substr(1));\n        } else if(diffstr[i][0] === '-') {\n          diff[0].oldlines.push(diffstr[i].substr(1));\n        } else if(diffstr[i][0] === ' ') {\n          diff[0].newlines.push(diffstr[i].substr(1));\n          diff[0].oldlines.push(diffstr[i].substr(1));\n        } else if(diffstr[i][0] === '\\\\') {\n          if (diffstr[i-1][0] === '+') {\n            remEOFNL = true;\n          } else if(diffstr[i-1][0] === '-') {\n            addEOFNL = true;\n          }\n        }\n      }\n\n      var str = oldStr.split('\\n');\n      for (var i = diff.length - 1; i >= 0; i--) {\n        var d = diff[i];\n        for (var j = 0; j < d.oldlength; j++) {\n          if(str[d.start-1+j] !== d.oldlines[j]) {\n            return false;\n          }\n        }\n        Array.prototype.splice.apply(str,[d.start-1,+d.oldlength].concat(d.newlines));\n      }\n\n      if (remEOFNL) {\n        while (!str[str.length-1]) {\n          str.pop();\n        }\n      } else if (addEOFNL) {\n        str.push('');\n      }\n      return str.join('\\n');\n    },\n\n    convertChangesToXML: function(changes){\n      var ret = [];\n      for ( var i = 0; i < changes.length; i++) {\n        var change = changes[i];\n        if (change.added) {\n          ret.push('<ins>');\n        } else if (change.removed) {\n          ret.push('<del>');\n        }\n\n        ret.push(escapeHTML(change.value));\n\n        if (change.added) {\n          ret.push('</ins>');\n        } else if (change.removed) {\n          ret.push('</del>');\n        }\n      }\n      return ret.join('');\n    },\n\n    // See: http://code.google.com/p/google-diff-match-patch/wiki/API\n    convertChangesToDMP: function(changes){\n      var ret = [], change;\n      for ( var i = 0; i < changes.length; i++) {\n        change = changes[i];\n        ret.push([(change.added ? 1 : change.removed ? -1 : 0), change.value]);\n      }\n      return ret;\n    }\n  };\n})();\n\nif (typeof module !== 'undefined') {\n    module.exports = JsDiff;\n}\n\n}); // module: browser/diff.js\n\nrequire.register(\"browser/escape-string-regexp.js\", function(module, exports, require){\n'use strict';\n\nvar matchOperatorsRe = /[|\\\\{}()[\\]^$+*?.]/g;\n\nmodule.exports = function (str) {\n  if (typeof str !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n\n  return str.replace(matchOperatorsRe,  '\\\\$&');\n};\n\n}); // module: browser/escape-string-regexp.js\n\nrequire.register(\"browser/events.js\", function(module, exports, require){\n/**\n * Module exports.\n */\n\nexports.EventEmitter = EventEmitter;\n\n/**\n * Check if `obj` is an array.\n */\n\nfunction isArray(obj) {\n  return '[object Array]' == {}.toString.call(obj);\n}\n\n/**\n * Event emitter constructor.\n *\n * @api public\n */\n\nfunction EventEmitter(){};\n\n/**\n * Adds a listener.\n *\n * @api public\n */\n\nEventEmitter.prototype.on = function (name, fn) {\n  if (!this.$events) {\n    this.$events = {};\n  }\n\n  if (!this.$events[name]) {\n    this.$events[name] = fn;\n  } else if (isArray(this.$events[name])) {\n    this.$events[name].push(fn);\n  } else {\n    this.$events[name] = [this.$events[name], fn];\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n/**\n * Adds a volatile listener.\n *\n * @api public\n */\n\nEventEmitter.prototype.once = function (name, fn) {\n  var self = this;\n\n  function on () {\n    self.removeListener(name, on);\n    fn.apply(this, arguments);\n  };\n\n  on.listener = fn;\n  this.on(name, on);\n\n  return this;\n};\n\n/**\n * Removes a listener.\n *\n * @api public\n */\n\nEventEmitter.prototype.removeListener = function (name, fn) {\n  if (this.$events && this.$events[name]) {\n    var list = this.$events[name];\n\n    if (isArray(list)) {\n      var pos = -1;\n\n      for (var i = 0, l = list.length; i < l; i++) {\n        if (list[i] === fn || (list[i].listener && list[i].listener === fn)) {\n          pos = i;\n          break;\n        }\n      }\n\n      if (pos < 0) {\n        return this;\n      }\n\n      list.splice(pos, 1);\n\n      if (!list.length) {\n        delete this.$events[name];\n      }\n    } else if (list === fn || (list.listener && list.listener === fn)) {\n      delete this.$events[name];\n    }\n  }\n\n  return this;\n};\n\n/**\n * Removes all listeners for an event.\n *\n * @api public\n */\n\nEventEmitter.prototype.removeAllListeners = function (name) {\n  if (name === undefined) {\n    this.$events = {};\n    return this;\n  }\n\n  if (this.$events && this.$events[name]) {\n    this.$events[name] = null;\n  }\n\n  return this;\n};\n\n/**\n * Gets all listeners for a certain event.\n *\n * @api public\n */\n\nEventEmitter.prototype.listeners = function (name) {\n  if (!this.$events) {\n    this.$events = {};\n  }\n\n  if (!this.$events[name]) {\n    this.$events[name] = [];\n  }\n\n  if (!isArray(this.$events[name])) {\n    this.$events[name] = [this.$events[name]];\n  }\n\n  return this.$events[name];\n};\n\n/**\n * Emits an event.\n *\n * @api public\n */\n\nEventEmitter.prototype.emit = function (name) {\n  if (!this.$events) {\n    return false;\n  }\n\n  var handler = this.$events[name];\n\n  if (!handler) {\n    return false;\n  }\n\n  var args = [].slice.call(arguments, 1);\n\n  if ('function' == typeof handler) {\n    handler.apply(this, args);\n  } else if (isArray(handler)) {\n    var listeners = handler.slice();\n\n    for (var i = 0, l = listeners.length; i < l; i++) {\n      listeners[i].apply(this, args);\n    }\n  } else {\n    return false;\n  }\n\n  return true;\n};\n\n}); // module: browser/events.js\n\nrequire.register(\"browser/fs.js\", function(module, exports, require){\n\n}); // module: browser/fs.js\n\nrequire.register(\"browser/glob.js\", function(module, exports, require){\n\n}); // module: browser/glob.js\n\nrequire.register(\"browser/path.js\", function(module, exports, require){\n\n}); // module: browser/path.js\n\nrequire.register(\"browser/progress.js\", function(module, exports, require){\n/**\n * Expose `Progress`.\n */\n\nmodule.exports = Progress;\n\n/**\n * Initialize a new `Progress` indicator.\n */\n\nfunction Progress() {\n  this.percent = 0;\n  this.size(0);\n  this.fontSize(11);\n  this.font('helvetica, arial, sans-serif');\n}\n\n/**\n * Set progress size to `n`.\n *\n * @param {Number} n\n * @return {Progress} for chaining\n * @api public\n */\n\nProgress.prototype.size = function(n){\n  this._size = n;\n  return this;\n};\n\n/**\n * Set text to `str`.\n *\n * @param {String} str\n * @return {Progress} for chaining\n * @api public\n */\n\nProgress.prototype.text = function(str){\n  this._text = str;\n  return this;\n};\n\n/**\n * Set font size to `n`.\n *\n * @param {Number} n\n * @return {Progress} for chaining\n * @api public\n */\n\nProgress.prototype.fontSize = function(n){\n  this._fontSize = n;\n  return this;\n};\n\n/**\n * Set font `family`.\n *\n * @param {String} family\n * @return {Progress} for chaining\n */\n\nProgress.prototype.font = function(family){\n  this._font = family;\n  return this;\n};\n\n/**\n * Update percentage to `n`.\n *\n * @param {Number} n\n * @return {Progress} for chaining\n */\n\nProgress.prototype.update = function(n){\n  this.percent = n;\n  return this;\n};\n\n/**\n * Draw on `ctx`.\n *\n * @param {CanvasRenderingContext2d} ctx\n * @return {Progress} for chaining\n */\n\nProgress.prototype.draw = function(ctx){\n  try {\n    var percent = Math.min(this.percent, 100)\n      , size = this._size\n      , half = size / 2\n      , x = half\n      , y = half\n      , rad = half - 1\n      , fontSize = this._fontSize;\n\n    ctx.font = fontSize + 'px ' + this._font;\n\n    var angle = Math.PI * 2 * (percent / 100);\n    ctx.clearRect(0, 0, size, size);\n\n    // outer circle\n    ctx.strokeStyle = '#9f9f9f';\n    ctx.beginPath();\n    ctx.arc(x, y, rad, 0, angle, false);\n    ctx.stroke();\n\n    // inner circle\n    ctx.strokeStyle = '#eee';\n    ctx.beginPath();\n    ctx.arc(x, y, rad - 1, 0, angle, true);\n    ctx.stroke();\n\n    // text\n    var text = this._text || (percent | 0) + '%'\n      , w = ctx.measureText(text).width;\n\n    ctx.fillText(\n        text\n      , x - w / 2 + 1\n      , y + fontSize / 2 - 1);\n  } catch (ex) {} //don't fail if we can't render progress\n  return this;\n};\n\n}); // module: browser/progress.js\n\nrequire.register(\"browser/tty.js\", function(module, exports, require){\nexports.isatty = function(){\n  return true;\n};\n\nexports.getWindowSize = function(){\n  if ('innerHeight' in global) {\n    return [global.innerHeight, global.innerWidth];\n  } else {\n    // In a Web Worker, the DOM Window is not available.\n    return [640, 480];\n  }\n};\n\n}); // module: browser/tty.js\n\nrequire.register(\"context.js\", function(module, exports, require){\n/**\n * Expose `Context`.\n */\n\nmodule.exports = Context;\n\n/**\n * Initialize a new `Context`.\n *\n * @api private\n */\n\nfunction Context(){}\n\n/**\n * Set or get the context `Runnable` to `runnable`.\n *\n * @param {Runnable} runnable\n * @return {Context}\n * @api private\n */\n\nContext.prototype.runnable = function(runnable){\n  if (0 == arguments.length) return this._runnable;\n  this.test = this._runnable = runnable;\n  return this;\n};\n\n/**\n * Set test timeout `ms`.\n *\n * @param {Number} ms\n * @return {Context} self\n * @api private\n */\n\nContext.prototype.timeout = function(ms){\n  if (arguments.length === 0) return this.runnable().timeout();\n  this.runnable().timeout(ms);\n  return this;\n};\n\n/**\n * Set test timeout `enabled`.\n *\n * @param {Boolean} enabled\n * @return {Context} self\n * @api private\n */\n\nContext.prototype.enableTimeouts = function (enabled) {\n  this.runnable().enableTimeouts(enabled);\n  return this;\n};\n\n\n/**\n * Set test slowness threshold `ms`.\n *\n * @param {Number} ms\n * @return {Context} self\n * @api private\n */\n\nContext.prototype.slow = function(ms){\n  this.runnable().slow(ms);\n  return this;\n};\n\n/**\n * Mark a test as skipped.\n *\n * @return {Context} self\n * @api private\n */\n\nContext.prototype.skip = function(){\n    this.runnable().skip();\n    return this;\n};\n\n/**\n * Inspect the context void of `._runnable`.\n *\n * @return {String}\n * @api private\n */\n\nContext.prototype.inspect = function(){\n  return JSON.stringify(this, function(key, val){\n    if ('_runnable' == key) return;\n    if ('test' == key) return;\n    return val;\n  }, 2);\n};\n\n}); // module: context.js\n\nrequire.register(\"hook.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Runnable = require('./runnable');\n\n/**\n * Expose `Hook`.\n */\n\nmodule.exports = Hook;\n\n/**\n * Initialize a new `Hook` with the given `title` and callback `fn`.\n *\n * @param {String} title\n * @param {Function} fn\n * @api private\n */\n\nfunction Hook(title, fn) {\n  Runnable.call(this, title, fn);\n  this.type = 'hook';\n}\n\n/**\n * Inherit from `Runnable.prototype`.\n */\n\nfunction F(){};\nF.prototype = Runnable.prototype;\nHook.prototype = new F;\nHook.prototype.constructor = Hook;\n\n\n/**\n * Get or set the test `err`.\n *\n * @param {Error} err\n * @return {Error}\n * @api public\n */\n\nHook.prototype.error = function(err){\n  if (0 == arguments.length) {\n    var err = this._error;\n    this._error = null;\n    return err;\n  }\n\n  this._error = err;\n};\n\n}); // module: hook.js\n\nrequire.register(\"interfaces/bdd.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test')\n  , utils = require('../utils')\n  , escapeRe = require('browser/escape-string-regexp');\n\n/**\n * BDD-style interface:\n *\n *      describe('Array', function(){\n *        describe('#indexOf()', function(){\n *          it('should return -1 when not present', function(){\n *\n *          });\n *\n *          it('should return the index when present', function(){\n *\n *          });\n *        });\n *      });\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('pre-require', function(context, file, mocha){\n\n    var common = require('./common')(suites, context);\n\n    context.before = common.before;\n    context.after = common.after;\n    context.beforeEach = common.beforeEach;\n    context.afterEach = common.afterEach;\n    context.run = mocha.options.delay && common.runWithSuite(suite);\n    /**\n     * Describe a \"suite\" with the given `title`\n     * and callback `fn` containing nested suites\n     * and/or tests.\n     */\n\n    context.describe = context.context = function(title, fn){\n      var suite = Suite.create(suites[0], title);\n      suite.file = file;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n      return suite;\n    };\n\n    /**\n     * Pending describe.\n     */\n\n    context.xdescribe =\n    context.xcontext =\n    context.describe.skip = function(title, fn){\n      var suite = Suite.create(suites[0], title);\n      suite.pending = true;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n    };\n\n    /**\n     * Exclusive suite.\n     */\n\n    context.describe.only = function(title, fn){\n      var suite = context.describe(title, fn);\n      mocha.grep(suite.fullTitle());\n      return suite;\n    };\n\n    /**\n     * Describe a specification or test-case\n     * with the given `title` and callback `fn`\n     * acting as a thunk.\n     */\n\n    context.it = context.specify = function(title, fn){\n      var suite = suites[0];\n      if (suite.pending) fn = null;\n      var test = new Test(title, fn);\n      test.file = file;\n      suite.addTest(test);\n      return test;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.it.only = function(title, fn){\n      var test = context.it(title, fn);\n      var reString = '^' + escapeRe(test.fullTitle()) + '$';\n      mocha.grep(new RegExp(reString));\n      return test;\n    };\n\n    /**\n     * Pending test case.\n     */\n\n    context.xit =\n    context.xspecify =\n    context.it.skip = function(title){\n      context.it(title);\n    };\n\n  });\n};\n\n}); // module: interfaces/bdd.js\n\nrequire.register(\"interfaces/common.js\", function(module, exports, require){\n/**\n * Functions common to more than one interface\n * @module lib/interfaces/common\n */\n\n'use strict';\n\nmodule.exports = function (suites, context) {\n\n  return {\n    /**\n     * This is only present if flag --delay is passed into Mocha.  It triggers\n     * root suite execution.  Returns a function which runs the root suite.\n     */\n    runWithSuite: function runWithSuite(suite) {\n      return function run() {\n        suite.run();\n      };\n    },\n\n    /**\n     * Execute before running tests.\n     */\n    before: function (name, fn) {\n      suites[0].beforeAll(name, fn);\n    },\n\n    /**\n     * Execute after running tests.\n     */\n    after: function (name, fn) {\n      suites[0].afterAll(name, fn);\n    },\n\n    /**\n     * Execute before each test case.\n     */\n    beforeEach: function (name, fn) {\n      suites[0].beforeEach(name, fn);\n    },\n\n    /**\n     * Execute after each test case.\n     */\n    afterEach: function (name, fn) {\n      suites[0].afterEach(name, fn);\n    },\n\n    test: {\n      /**\n       * Pending test case.\n       */\n      skip: function (title) {\n        context.test(title);\n      }\n    }\n  }\n};\n\n}); // module: interfaces/common.js\n\nrequire.register(\"interfaces/exports.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test');\n\n/**\n * TDD-style interface:\n *\n *     exports.Array = {\n *       '#indexOf()': {\n *         'should return -1 when the value is not present': function(){\n *\n *         },\n *\n *         'should return the correct index when the value is present': function(){\n *\n *         }\n *       }\n *     };\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('require', visit);\n\n  function visit(obj, file) {\n    var suite;\n    for (var key in obj) {\n      if ('function' == typeof obj[key]) {\n        var fn = obj[key];\n        switch (key) {\n          case 'before':\n            suites[0].beforeAll(fn);\n            break;\n          case 'after':\n            suites[0].afterAll(fn);\n            break;\n          case 'beforeEach':\n            suites[0].beforeEach(fn);\n            break;\n          case 'afterEach':\n            suites[0].afterEach(fn);\n            break;\n          default:\n            var test = new Test(key, fn);\n            test.file = file;\n            suites[0].addTest(test);\n        }\n      } else {\n        suite = Suite.create(suites[0], key);\n        suites.unshift(suite);\n        visit(obj[key]);\n        suites.shift();\n      }\n    }\n  }\n};\n\n}); // module: interfaces/exports.js\n\nrequire.register(\"interfaces/index.js\", function(module, exports, require){\nexports.bdd = require('./bdd');\nexports.tdd = require('./tdd');\nexports.qunit = require('./qunit');\nexports.exports = require('./exports');\n\n}); // module: interfaces/index.js\n\nrequire.register(\"interfaces/qunit.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test')\n  , escapeRe = require('browser/escape-string-regexp')\n  , utils = require('../utils');\n\n/**\n * QUnit-style interface:\n *\n *     suite('Array');\n *\n *     test('#length', function(){\n *       var arr = [1,2,3];\n *       ok(arr.length == 3);\n *     });\n *\n *     test('#indexOf()', function(){\n *       var arr = [1,2,3];\n *       ok(arr.indexOf(1) == 0);\n *       ok(arr.indexOf(2) == 1);\n *       ok(arr.indexOf(3) == 2);\n *     });\n *\n *     suite('String');\n *\n *     test('#length', function(){\n *       ok('foo'.length == 3);\n *     });\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('pre-require', function(context, file, mocha){\n\n    var common = require('./common')(suites, context);\n\n    context.before = common.before;\n    context.after = common.after;\n    context.beforeEach = common.beforeEach;\n    context.afterEach = common.afterEach;\n    context.run = mocha.options.delay && common.runWithSuite(suite);\n    /**\n     * Describe a \"suite\" with the given `title`.\n     */\n\n    context.suite = function(title){\n      if (suites.length > 1) suites.shift();\n      var suite = Suite.create(suites[0], title);\n      suite.file = file;\n      suites.unshift(suite);\n      return suite;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.suite.only = function(title, fn){\n      var suite = context.suite(title, fn);\n      mocha.grep(suite.fullTitle());\n    };\n\n    /**\n     * Describe a specification or test-case\n     * with the given `title` and callback `fn`\n     * acting as a thunk.\n     */\n\n    context.test = function(title, fn){\n      var test = new Test(title, fn);\n      test.file = file;\n      suites[0].addTest(test);\n      return test;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.test.only = function(title, fn){\n      var test = context.test(title, fn);\n      var reString = '^' + escapeRe(test.fullTitle()) + '$';\n      mocha.grep(new RegExp(reString));\n    };\n\n    context.test.skip = common.test.skip;\n\n  });\n};\n\n}); // module: interfaces/qunit.js\n\nrequire.register(\"interfaces/tdd.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test')\n  , escapeRe = require('browser/escape-string-regexp')\n  , utils = require('../utils');\n\n/**\n * TDD-style interface:\n *\n *      suite('Array', function(){\n *        suite('#indexOf()', function(){\n *          suiteSetup(function(){\n *\n *          });\n *\n *          test('should return -1 when not present', function(){\n *\n *          });\n *\n *          test('should return the index when present', function(){\n *\n *          });\n *\n *          suiteTeardown(function(){\n *\n *          });\n *        });\n *      });\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('pre-require', function(context, file, mocha){\n\n    var common = require('./common')(suites, context);\n\n    context.setup = common.beforeEach;\n    context.teardown = common.afterEach;\n    context.suiteSetup = common.before;\n    context.suiteTeardown = common.after;\n    context.run = mocha.options.delay && common.runWithSuite(suite);\n    /**\n     * Describe a \"suite\" with the given `title`\n     * and callback `fn` containing nested suites\n     * and/or tests.\n     */\n\n    context.suite = function(title, fn){\n      var suite = Suite.create(suites[0], title);\n      suite.file = file;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n      return suite;\n    };\n\n    /**\n     * Pending suite.\n     */\n    context.suite.skip = function(title, fn) {\n      var suite = Suite.create(suites[0], title);\n      suite.pending = true;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.suite.only = function(title, fn){\n      var suite = context.suite(title, fn);\n      mocha.grep(suite.fullTitle());\n    };\n\n    /**\n     * Describe a specification or test-case\n     * with the given `title` and callback `fn`\n     * acting as a thunk.\n     */\n\n    context.test = function(title, fn){\n      var suite = suites[0];\n      if (suite.pending) fn = null;\n      var test = new Test(title, fn);\n      test.file = file;\n      suite.addTest(test);\n      return test;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.test.only = function(title, fn){\n      var test = context.test(title, fn);\n      var reString = '^' + escapeRe(test.fullTitle()) + '$';\n      mocha.grep(new RegExp(reString));\n    };\n\n    context.test.skip = common.test.skip;\n  });\n};\n\n}); // module: interfaces/tdd.js\n\nrequire.register(\"mocha.js\", function(module, exports, require){\n/*!\n * mocha\n * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\n\nvar path = require('browser/path')\n  , escapeRe = require('browser/escape-string-regexp')\n  , utils = require('./utils');\n\n/**\n * Expose `Mocha`.\n */\n\nexports = module.exports = Mocha;\n\n/**\n * To require local UIs and reporters when running in node.\n */\n\nif (typeof process !== 'undefined' && typeof process.cwd === 'function') {\n  var join = path.join\n    , cwd = process.cwd();\n  module.paths.push(cwd, join(cwd, 'node_modules'));\n}\n\n/**\n * Expose internals.\n */\n\nexports.utils = utils;\nexports.interfaces = require('./interfaces');\nexports.reporters = require('./reporters');\nexports.Runnable = require('./runnable');\nexports.Context = require('./context');\nexports.Runner = require('./runner');\nexports.Suite = require('./suite');\nexports.Hook = require('./hook');\nexports.Test = require('./test');\n\n/**\n * Return image `name` path.\n *\n * @param {String} name\n * @return {String}\n * @api private\n */\n\nfunction image(name) {\n  return __dirname + '/../images/' + name + '.png';\n}\n\n/**\n * Setup mocha with `options`.\n *\n * Options:\n *\n *   - `ui` name \"bdd\", \"tdd\", \"exports\" etc\n *   - `reporter` reporter instance, defaults to `mocha.reporters.spec`\n *   - `globals` array of accepted globals\n *   - `timeout` timeout in milliseconds\n *   - `bail` bail on the first test failure\n *   - `slow` milliseconds to wait before considering a test slow\n *   - `ignoreLeaks` ignore global leaks\n *   - `fullTrace` display the full stack-trace on failing\n *   - `grep` string or regexp to filter tests with\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Mocha(options) {\n  options = options || {};\n  this.files = [];\n  this.options = options;\n  if (options.grep) this.grep(new RegExp(options.grep));\n  if (options.fgrep) this.grep(options.fgrep);\n  this.suite = new exports.Suite('', new exports.Context);\n  this.ui(options.ui);\n  this.bail(options.bail);\n  this.reporter(options.reporter, options.reporterOptions);\n  if (null != options.timeout) this.timeout(options.timeout);\n  this.useColors(options.useColors);\n  if (options.enableTimeouts !== null) this.enableTimeouts(options.enableTimeouts);\n  if (options.slow) this.slow(options.slow);\n\n  this.suite.on('pre-require', function (context) {\n    exports.afterEach = context.afterEach || context.teardown;\n    exports.after = context.after || context.suiteTeardown;\n    exports.beforeEach = context.beforeEach || context.setup;\n    exports.before = context.before || context.suiteSetup;\n    exports.describe = context.describe || context.suite;\n    exports.it = context.it || context.test;\n    exports.setup = context.setup || context.beforeEach;\n    exports.suiteSetup = context.suiteSetup || context.before;\n    exports.suiteTeardown = context.suiteTeardown || context.after;\n    exports.suite = context.suite || context.describe;\n    exports.teardown = context.teardown || context.afterEach;\n    exports.test = context.test || context.it;\n    exports.run = context.run;\n  });\n}\n\n/**\n * Enable or disable bailing on the first failure.\n *\n * @param {Boolean} [bail]\n * @api public\n */\n\nMocha.prototype.bail = function(bail){\n  if (0 == arguments.length) bail = true;\n  this.suite.bail(bail);\n  return this;\n};\n\n/**\n * Add test `file`.\n *\n * @param {String} file\n * @api public\n */\n\nMocha.prototype.addFile = function(file){\n  this.files.push(file);\n  return this;\n};\n\n/**\n * Set reporter to `reporter`, defaults to \"spec\".\n *\n * @param {String|Function} reporter name or constructor\n * @param {Object} reporterOptions optional options\n * @api public\n */\nMocha.prototype.reporter = function(reporter, reporterOptions){\n  if ('function' == typeof reporter) {\n    this._reporter = reporter;\n  } else {\n    reporter = reporter || 'spec';\n    var _reporter;\n    try { _reporter = require('./reporters/' + reporter); } catch (err) {}\n    if (!_reporter) try { _reporter = require(reporter); } catch (err) {\n      err.message.indexOf('Cannot find module') !== -1\n        ? console.warn('\"' + reporter + '\" reporter not found')\n        : console.warn('\"' + reporter + '\" reporter blew up with error:\\n' + err.stack);\n    }\n    if (!_reporter && reporter === 'teamcity')\n      console.warn('The Teamcity reporter was moved to a package named ' +\n        'mocha-teamcity-reporter ' +\n        '(https://npmjs.org/package/mocha-teamcity-reporter).');\n    if (!_reporter) throw new Error('invalid reporter \"' + reporter + '\"');\n    this._reporter = _reporter;\n  }\n  this.options.reporterOptions = reporterOptions;\n  return this;\n};\n\n/**\n * Set test UI `name`, defaults to \"bdd\".\n *\n * @param {String} bdd\n * @api public\n */\n\nMocha.prototype.ui = function(name){\n  name = name || 'bdd';\n  this._ui = exports.interfaces[name];\n  if (!this._ui) try { this._ui = require(name); } catch (err) {}\n  if (!this._ui) throw new Error('invalid interface \"' + name + '\"');\n  this._ui = this._ui(this.suite);\n  return this;\n};\n\n/**\n * Load registered files.\n *\n * @api private\n */\n\nMocha.prototype.loadFiles = function(fn){\n  var self = this;\n  var suite = this.suite;\n  var pending = this.files.length;\n  this.files.forEach(function(file){\n    file = path.resolve(file);\n    suite.emit('pre-require', global, file, self);\n    suite.emit('require', require(file), file, self);\n    suite.emit('post-require', global, file, self);\n    --pending || (fn && fn());\n  });\n};\n\n/**\n * Enable growl support.\n *\n * @api private\n */\n\nMocha.prototype._growl = function(runner, reporter) {\n  var notify = require('growl');\n\n  runner.on('end', function(){\n    var stats = reporter.stats;\n    if (stats.failures) {\n      var msg = stats.failures + ' of ' + runner.total + ' tests failed';\n      notify(msg, { name: 'mocha', title: 'Failed', image: image('error') });\n    } else {\n      notify(stats.passes + ' tests passed in ' + stats.duration + 'ms', {\n          name: 'mocha'\n        , title: 'Passed'\n        , image: image('ok')\n      });\n    }\n  });\n};\n\n/**\n * Add regexp to grep, if `re` is a string it is escaped.\n *\n * @param {RegExp|String} re\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.grep = function(re){\n  this.options.grep = 'string' == typeof re\n    ? new RegExp(escapeRe(re))\n    : re;\n  return this;\n};\n\n/**\n * Invert `.grep()` matches.\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.invert = function(){\n  this.options.invert = true;\n  return this;\n};\n\n/**\n * Ignore global leaks.\n *\n * @param {Boolean} ignore\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.ignoreLeaks = function(ignore){\n  this.options.ignoreLeaks = !!ignore;\n  return this;\n};\n\n/**\n * Enable global leak checking.\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.checkLeaks = function(){\n  this.options.ignoreLeaks = false;\n  return this;\n};\n\n/**\n * Display long stack-trace on failing\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.fullTrace = function() {\n  this.options.fullStackTrace = true;\n  return this;\n};\n\n/**\n * Enable growl support.\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.growl = function(){\n  this.options.growl = true;\n  return this;\n};\n\n/**\n * Ignore `globals` array or string.\n *\n * @param {Array|String} globals\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.globals = function(globals){\n  this.options.globals = (this.options.globals || []).concat(globals);\n  return this;\n};\n\n/**\n * Emit color output.\n *\n * @param {Boolean} colors\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.useColors = function(colors){\n  if (colors !== undefined) {\n    this.options.useColors = colors;\n  }\n  return this;\n};\n\n/**\n * Use inline diffs rather than +/-.\n *\n * @param {Boolean} inlineDiffs\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.useInlineDiffs = function(inlineDiffs) {\n  this.options.useInlineDiffs = arguments.length && inlineDiffs != undefined\n  ? inlineDiffs\n  : false;\n  return this;\n};\n\n/**\n * Set the timeout in milliseconds.\n *\n * @param {Number} timeout\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.timeout = function(timeout){\n  this.suite.timeout(timeout);\n  return this;\n};\n\n/**\n * Set slowness threshold in milliseconds.\n *\n * @param {Number} slow\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.slow = function(slow){\n  this.suite.slow(slow);\n  return this;\n};\n\n/**\n * Enable timeouts.\n *\n * @param {Boolean} enabled\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.enableTimeouts = function(enabled) {\n  this.suite.enableTimeouts(arguments.length && enabled !== undefined\n    ? enabled\n    : true);\n  return this\n};\n\n/**\n * Makes all tests async (accepting a callback)\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.asyncOnly = function(){\n  this.options.asyncOnly = true;\n  return this;\n};\n\n/**\n * Disable syntax highlighting (in browser).\n * @returns {Mocha}\n * @api public\n */\nMocha.prototype.noHighlighting = function() {\n  this.options.noHighlighting = true;\n  return this;\n};\n\n/**\n * Delay root suite execution.\n * @returns {Mocha}\n * @api public\n */\nMocha.prototype.delay = function delay() {\n  this.options.delay = true;\n  return this;\n};\n\n/**\n * Run tests and invoke `fn()` when complete.\n *\n * @param {Function} fn\n * @return {Runner}\n * @api public\n */\nMocha.prototype.run = function(fn){\n  if (this.files.length) this.loadFiles();\n  var suite = this.suite;\n  var options = this.options;\n  options.files = this.files;\n  var runner = new exports.Runner(suite, options.delay);\n  var reporter = new this._reporter(runner, options);\n  runner.ignoreLeaks = false !== options.ignoreLeaks;\n  runner.fullStackTrace = options.fullStackTrace;\n  runner.asyncOnly = options.asyncOnly;\n  if (options.grep) runner.grep(options.grep, options.invert);\n  if (options.globals) runner.globals(options.globals);\n  if (options.growl) this._growl(runner, reporter);\n  if (options.useColors !== undefined) {\n    exports.reporters.Base.useColors = options.useColors;\n  }\n  exports.reporters.Base.inlineDiffs = options.useInlineDiffs;\n\n  function done(failures) {\n      if (reporter.done) {\n          reporter.done(failures, fn);\n      } else fn && fn(failures);\n  }\n\n  return runner.run(done);\n};\n\n}); // module: mocha.js\n\nrequire.register(\"ms.js\", function(module, exports, require){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options){\n  options = options || {};\n  if ('string' == typeof val) return parse(val);\n  return options['long'] ? longFormat(val) : shortFormat(val);\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  var match = /^((?:\\d+)?\\.?\\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(str);\n  if (!match) return;\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 's':\n      return n * s;\n    case 'ms':\n      return n;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction shortFormat(ms) {\n  if (ms >= d) return Math.round(ms / d) + 'd';\n  if (ms >= h) return Math.round(ms / h) + 'h';\n  if (ms >= m) return Math.round(ms / m) + 'm';\n  if (ms >= s) return Math.round(ms / s) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction longFormat(ms) {\n  return plural(ms, d, 'day')\n    || plural(ms, h, 'hour')\n    || plural(ms, m, 'minute')\n    || plural(ms, s, 'second')\n    || ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) return;\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n}); // module: ms.js\n\nrequire.register(\"pending.js\", function(module, exports, require){\n\n/**\n * Expose `Pending`.\n */\n\nmodule.exports = Pending;\n\n/**\n * Initialize a new `Pending` error with the given message.\n *\n * @param {String} message\n */\n\nfunction Pending(message) {\n    this.message = message;\n}\n\n}); // module: pending.js\n\nrequire.register(\"reporters/base.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar tty = require('browser/tty')\n  , diff = require('browser/diff')\n  , ms = require('../ms')\n  , utils = require('../utils')\n  , supportsColor = process.env ? require('supports-color') : null;\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Check if both stdio streams are associated with a tty.\n */\n\nvar isatty = tty.isatty(1) && tty.isatty(2);\n\n/**\n * Expose `Base`.\n */\n\nexports = module.exports = Base;\n\n/**\n * Enable coloring by default, except in the browser interface.\n */\n\nexports.useColors = process.env\n  ? (supportsColor || (process.env.MOCHA_COLORS !== undefined))\n  : false;\n\n/**\n * Inline diffs instead of +/-\n */\n\nexports.inlineDiffs = false;\n\n/**\n * Default color map.\n */\n\nexports.colors = {\n    'pass': 90\n  , 'fail': 31\n  , 'bright pass': 92\n  , 'bright fail': 91\n  , 'bright yellow': 93\n  , 'pending': 36\n  , 'suite': 0\n  , 'error title': 0\n  , 'error message': 31\n  , 'error stack': 90\n  , 'checkmark': 32\n  , 'fast': 90\n  , 'medium': 33\n  , 'slow': 31\n  , 'green': 32\n  , 'light': 90\n  , 'diff gutter': 90\n  , 'diff added': 42\n  , 'diff removed': 41\n};\n\n/**\n * Default symbol map.\n */\n\nexports.symbols = {\n  ok: '',\n  err: '',\n  dot: ''\n};\n\n// With node.js on Windows: use symbols available in terminal default fonts\nif ('win32' == process.platform) {\n  exports.symbols.ok = '\\u221A';\n  exports.symbols.err = '\\u00D7';\n  exports.symbols.dot = '.';\n}\n\n/**\n * Color `str` with the given `type`,\n * allowing colors to be disabled,\n * as well as user-defined color\n * schemes.\n *\n * @param {String} type\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nvar color = exports.color = function(type, str) {\n  if (!exports.useColors) return String(str);\n  return '\\u001b[' + exports.colors[type] + 'm' + str + '\\u001b[0m';\n};\n\n/**\n * Expose term window size, with some\n * defaults for when stderr is not a tty.\n */\n\nexports.window = {\n  width: isatty\n    ? process.stdout.getWindowSize\n      ? process.stdout.getWindowSize(1)[0]\n      : tty.getWindowSize()[1]\n    : 75\n};\n\n/**\n * Expose some basic cursor interactions\n * that are common among reporters.\n */\n\nexports.cursor = {\n  hide: function(){\n    isatty && process.stdout.write('\\u001b[?25l');\n  },\n\n  show: function(){\n    isatty && process.stdout.write('\\u001b[?25h');\n  },\n\n  deleteLine: function(){\n    isatty && process.stdout.write('\\u001b[2K');\n  },\n\n  beginningOfLine: function(){\n    isatty && process.stdout.write('\\u001b[0G');\n  },\n\n  CR: function(){\n    if (isatty) {\n      exports.cursor.deleteLine();\n      exports.cursor.beginningOfLine();\n    } else {\n      process.stdout.write('\\r');\n    }\n  }\n};\n\n/**\n * Outut the given `failures` as a list.\n *\n * @param {Array} failures\n * @api public\n */\n\nexports.list = function(failures){\n  console.log();\n  failures.forEach(function(test, i){\n    // format\n    var fmt = color('error title', '  %s) %s:\\n')\n      + color('error message', '     %s')\n      + color('error stack', '\\n%s\\n');\n\n    // msg\n    var err = test.err\n      , message = err.message || ''\n      , stack = err.stack || message\n      , index = stack.indexOf(message)\n      , actual = err.actual\n      , expected = err.expected\n      , escape = true;\n    if (index === -1) {\n      msg = message;\n    } else {\n      index += message.length;\n      msg = stack.slice(0, index);\n      // remove msg from stack\n      stack = stack.slice(index + 1);\n    }\n\n    // uncaught\n    if (err.uncaught) {\n      msg = 'Uncaught ' + msg;\n    }\n    // explicitly show diff\n    if (err.showDiff !== false && sameType(actual, expected)\n        && expected !== undefined) {\n\n      if ('string' !== typeof actual) {\n        escape = false;\n        err.actual = actual = utils.stringify(actual);\n        err.expected = expected = utils.stringify(expected);\n      }\n\n      fmt = color('error title', '  %s) %s:\\n%s') + color('error stack', '\\n%s\\n');\n      var match = message.match(/^([^:]+): expected/);\n      msg = '\\n      ' + color('error message', match ? match[1] : msg);\n\n      if (exports.inlineDiffs) {\n        msg += inlineDiff(err, escape);\n      } else {\n        msg += unifiedDiff(err, escape);\n      }\n    }\n\n    // indent stack trace\n    stack = stack.replace(/^/gm, '  ');\n\n    console.log(fmt, (i + 1), test.fullTitle(), msg, stack);\n  });\n};\n\n/**\n * Initialize a new `Base` reporter.\n *\n * All other reporters generally\n * inherit from this reporter, providing\n * stats such as test duration, number\n * of tests passed / failed etc.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Base(runner) {\n  var self = this\n    , stats = this.stats = { suites: 0, tests: 0, passes: 0, pending: 0, failures: 0 }\n    , failures = this.failures = [];\n\n  if (!runner) return;\n  this.runner = runner;\n\n  runner.stats = stats;\n\n  runner.on('start', function(){\n    stats.start = new Date;\n  });\n\n  runner.on('suite', function(suite){\n    stats.suites = stats.suites || 0;\n    suite.root || stats.suites++;\n  });\n\n  runner.on('test end', function(test){\n    stats.tests = stats.tests || 0;\n    stats.tests++;\n  });\n\n  runner.on('pass', function(test){\n    stats.passes = stats.passes || 0;\n\n    var medium = test.slow() / 2;\n    test.speed = test.duration > test.slow()\n      ? 'slow'\n      : test.duration > medium\n        ? 'medium'\n        : 'fast';\n\n    stats.passes++;\n  });\n\n  runner.on('fail', function(test, err){\n    stats.failures = stats.failures || 0;\n    stats.failures++;\n    test.err = err;\n    failures.push(test);\n  });\n\n  runner.on('end', function(){\n    stats.end = new Date;\n    stats.duration = new Date - stats.start;\n  });\n\n  runner.on('pending', function(){\n    stats.pending++;\n  });\n}\n\n/**\n * Output common epilogue used by many of\n * the bundled reporters.\n *\n * @api public\n */\n\nBase.prototype.epilogue = function(){\n  var stats = this.stats;\n  var tests;\n  var fmt;\n\n  console.log();\n\n  // passes\n  fmt = color('bright pass', ' ')\n    + color('green', ' %d passing')\n    + color('light', ' (%s)');\n\n  console.log(fmt,\n    stats.passes || 0,\n    ms(stats.duration));\n\n  // pending\n  if (stats.pending) {\n    fmt = color('pending', ' ')\n      + color('pending', ' %d pending');\n\n    console.log(fmt, stats.pending);\n  }\n\n  // failures\n  if (stats.failures) {\n    fmt = color('fail', '  %d failing');\n\n    console.log(fmt, stats.failures);\n\n    Base.list(this.failures);\n    console.log();\n  }\n\n  console.log();\n};\n\n/**\n * Pad the given `str` to `len`.\n *\n * @param {String} str\n * @param {String} len\n * @return {String}\n * @api private\n */\n\nfunction pad(str, len) {\n  str = String(str);\n  return Array(len - str.length + 1).join(' ') + str;\n}\n\n\n/**\n * Returns an inline diff between 2 strings with coloured ANSI output\n *\n * @param {Error} Error with actual/expected\n * @return {String} Diff\n * @api private\n */\n\nfunction inlineDiff(err, escape) {\n  var msg = errorDiff(err, 'WordsWithSpace', escape);\n\n  // linenos\n  var lines = msg.split('\\n');\n  if (lines.length > 4) {\n    var width = String(lines.length).length;\n    msg = lines.map(function(str, i){\n      return pad(++i, width) + ' |' + ' ' + str;\n    }).join('\\n');\n  }\n\n  // legend\n  msg = '\\n'\n    + color('diff removed', 'actual')\n    + ' '\n    + color('diff added', 'expected')\n    + '\\n\\n'\n    + msg\n    + '\\n';\n\n  // indent\n  msg = msg.replace(/^/gm, '      ');\n  return msg;\n}\n\n/**\n * Returns a unified diff between 2 strings\n *\n * @param {Error} Error with actual/expected\n * @return {String} Diff\n * @api private\n */\n\nfunction unifiedDiff(err, escape) {\n  var indent = '      ';\n  function cleanUp(line) {\n    if (escape) {\n      line = escapeInvisibles(line);\n    }\n    if (line[0] === '+') return indent + colorLines('diff added', line);\n    if (line[0] === '-') return indent + colorLines('diff removed', line);\n    if (line.match(/\\@\\@/)) return null;\n    if (line.match(/\\\\ No newline/)) return null;\n    else return indent + line;\n  }\n  function notBlank(line) {\n    return line != null;\n  }\n  var msg = diff.createPatch('string', err.actual, err.expected);\n  var lines = msg.split('\\n').splice(4);\n  return '\\n      '\n         + colorLines('diff added',   '+ expected') + ' '\n         + colorLines('diff removed', '- actual')\n         + '\\n\\n'\n         + lines.map(cleanUp).filter(notBlank).join('\\n');\n}\n\n/**\n * Return a character diff for `err`.\n *\n * @param {Error} err\n * @return {String}\n * @api private\n */\n\nfunction errorDiff(err, type, escape) {\n  var actual   = escape ? escapeInvisibles(err.actual)   : err.actual;\n  var expected = escape ? escapeInvisibles(err.expected) : err.expected;\n  return diff['diff' + type](actual, expected).map(function(str){\n    if (str.added) return colorLines('diff added', str.value);\n    if (str.removed) return colorLines('diff removed', str.value);\n    return str.value;\n  }).join('');\n}\n\n/**\n * Returns a string with all invisible characters in plain text\n *\n * @param {String} line\n * @return {String}\n * @api private\n */\nfunction escapeInvisibles(line) {\n    return line.replace(/\\t/g, '<tab>')\n               .replace(/\\r/g, '<CR>')\n               .replace(/\\n/g, '<LF>\\n');\n}\n\n/**\n * Color lines for `str`, using the color `name`.\n *\n * @param {String} name\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction colorLines(name, str) {\n  return str.split('\\n').map(function(str){\n    return color(name, str);\n  }).join('\\n');\n}\n\n/**\n * Check that a / b have the same type.\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Boolean}\n * @api private\n */\n\nfunction sameType(a, b) {\n  a = Object.prototype.toString.call(a);\n  b = Object.prototype.toString.call(b);\n  return a == b;\n}\n\n}); // module: reporters/base.js\n\nrequire.register(\"reporters/doc.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils');\n\n/**\n * Expose `Doc`.\n */\n\nexports = module.exports = Doc;\n\n/**\n * Initialize a new `Doc` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Doc(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , total = runner.total\n    , indents = 2;\n\n  function indent() {\n    return Array(indents).join('  ');\n  }\n\n  runner.on('suite', function(suite){\n    if (suite.root) return;\n    ++indents;\n    console.log('%s<section class=\"suite\">', indent());\n    ++indents;\n    console.log('%s<h1>%s</h1>', indent(), utils.escape(suite.title));\n    console.log('%s<dl>', indent());\n  });\n\n  runner.on('suite end', function(suite){\n    if (suite.root) return;\n    console.log('%s</dl>', indent());\n    --indents;\n    console.log('%s</section>', indent());\n    --indents;\n  });\n\n  runner.on('pass', function(test){\n    console.log('%s  <dt>%s</dt>', indent(), utils.escape(test.title));\n    var code = utils.escape(utils.clean(test.fn.toString()));\n    console.log('%s  <dd><pre><code>%s</code></pre></dd>', indent(), code);\n  });\n\n  runner.on('fail', function(test, err){\n    console.log('%s  <dt class=\"error\">%s</dt>', indent(), utils.escape(test.title));\n    var code = utils.escape(utils.clean(test.fn.toString()));\n    console.log('%s  <dd class=\"error\"><pre><code>%s</code></pre></dd>', indent(), code);\n    console.log('%s  <dd class=\"error\">%s</dd>', indent(), utils.escape(err));\n  });\n}\n\n}); // module: reporters/doc.js\n\nrequire.register(\"reporters/dot.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , color = Base.color;\n\n/**\n * Expose `Dot`.\n */\n\nexports = module.exports = Dot;\n\n/**\n * Initialize a new `Dot` matrix test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Dot(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , width = Base.window.width * .75 | 0\n    , n = -1;\n\n  runner.on('start', function(){\n    process.stdout.write('\\n');\n  });\n\n  runner.on('pending', function(test){\n    if (++n % width == 0) process.stdout.write('\\n  ');\n    process.stdout.write(color('pending', Base.symbols.dot));\n  });\n\n  runner.on('pass', function(test){\n    if (++n % width == 0) process.stdout.write('\\n  ');\n    if ('slow' == test.speed) {\n      process.stdout.write(color('bright yellow', Base.symbols.dot));\n    } else {\n      process.stdout.write(color(test.speed, Base.symbols.dot));\n    }\n  });\n\n  runner.on('fail', function(test, err){\n    if (++n % width == 0) process.stdout.write('\\n  ');\n    process.stdout.write(color('fail', Base.symbols.dot));\n  });\n\n  runner.on('end', function(){\n    console.log();\n    self.epilogue();\n  });\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nDot.prototype = new F;\nDot.prototype.constructor = Dot;\n\n\n}); // module: reporters/dot.js\n\nrequire.register(\"reporters/html-cov.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar JSONCov = require('./json-cov')\n  , fs = require('browser/fs');\n\n/**\n * Expose `HTMLCov`.\n */\n\nexports = module.exports = HTMLCov;\n\n/**\n * Initialize a new `JsCoverage` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction HTMLCov(runner) {\n  var jade = require('jade')\n    , file = __dirname + '/templates/coverage.jade'\n    , str = fs.readFileSync(file, 'utf8')\n    , fn = jade.compile(str, { filename: file })\n    , self = this;\n\n  JSONCov.call(this, runner, false);\n\n  runner.on('end', function(){\n    process.stdout.write(fn({\n        cov: self.cov\n      , coverageClass: coverageClass\n    }));\n  });\n}\n\n/**\n * Return coverage class for `n`.\n *\n * @return {String}\n * @api private\n */\n\nfunction coverageClass(n) {\n  if (n >= 75) return 'high';\n  if (n >= 50) return 'medium';\n  if (n >= 25) return 'low';\n  return 'terrible';\n}\n\n}); // module: reporters/html-cov.js\n\nrequire.register(\"reporters/html.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils')\n  , Progress = require('../browser/progress')\n  , escape = utils.escape;\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Expose `HTML`.\n */\n\nexports = module.exports = HTML;\n\n/**\n * Stats template.\n */\n\nvar statsTemplate = '<ul id=\"mocha-stats\">'\n  + '<li class=\"progress\"><canvas width=\"40\" height=\"40\"></canvas></li>'\n  + '<li class=\"passes\"><a href=\"#\">passes:</a> <em>0</em></li>'\n  + '<li class=\"failures\"><a href=\"#\">failures:</a> <em>0</em></li>'\n  + '<li class=\"duration\">duration: <em>0</em>s</li>'\n  + '</ul>';\n\n/**\n * Initialize a new `HTML` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction HTML(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , total = runner.total\n    , stat = fragment(statsTemplate)\n    , items = stat.getElementsByTagName('li')\n    , passes = items[1].getElementsByTagName('em')[0]\n    , passesLink = items[1].getElementsByTagName('a')[0]\n    , failures = items[2].getElementsByTagName('em')[0]\n    , failuresLink = items[2].getElementsByTagName('a')[0]\n    , duration = items[3].getElementsByTagName('em')[0]\n    , canvas = stat.getElementsByTagName('canvas')[0]\n    , report = fragment('<ul id=\"mocha-report\"></ul>')\n    , stack = [report]\n    , progress\n    , ctx\n    , root = document.getElementById('mocha');\n\n  if (canvas.getContext) {\n    var ratio = window.devicePixelRatio || 1;\n    canvas.style.width = canvas.width;\n    canvas.style.height = canvas.height;\n    canvas.width *= ratio;\n    canvas.height *= ratio;\n    ctx = canvas.getContext('2d');\n    ctx.scale(ratio, ratio);\n    progress = new Progress;\n  }\n\n  if (!root) return error('#mocha div missing, add it to your document');\n\n  // pass toggle\n  on(passesLink, 'click', function(){\n    unhide();\n    var name = /pass/.test(report.className) ? '' : ' pass';\n    report.className = report.className.replace(/fail|pass/g, '') + name;\n    if (report.className.trim()) hideSuitesWithout('test pass');\n  });\n\n  // failure toggle\n  on(failuresLink, 'click', function(){\n    unhide();\n    var name = /fail/.test(report.className) ? '' : ' fail';\n    report.className = report.className.replace(/fail|pass/g, '') + name;\n    if (report.className.trim()) hideSuitesWithout('test fail');\n  });\n\n  root.appendChild(stat);\n  root.appendChild(report);\n\n  if (progress) progress.size(40);\n\n  runner.on('suite', function(suite){\n    if (suite.root) return;\n\n    // suite\n    var url = self.suiteURL(suite);\n    var el = fragment('<li class=\"suite\"><h1><a href=\"%s\">%s</a></h1></li>', url, escape(suite.title));\n\n    // container\n    stack[0].appendChild(el);\n    stack.unshift(document.createElement('ul'));\n    el.appendChild(stack[0]);\n  });\n\n  runner.on('suite end', function(suite){\n    if (suite.root) return;\n    stack.shift();\n  });\n\n  runner.on('fail', function(test, err){\n    if ('hook' == test.type) runner.emit('test end', test);\n  });\n\n  runner.on('test end', function(test){\n    // TODO: add to stats\n    var percent = stats.tests / this.total * 100 | 0;\n    if (progress) progress.update(percent).draw(ctx);\n\n    // update stats\n    var ms = new Date - stats.start;\n    text(passes, stats.passes);\n    text(failures, stats.failures);\n    text(duration, (ms / 1000).toFixed(2));\n\n    // test\n    if ('passed' == test.state) {\n      var url = self.testURL(test);\n      var el = fragment('<li class=\"test pass %e\"><h2>%e<span class=\"duration\">%ems</span> <a href=\"%s\" class=\"replay\"></a></h2></li>', test.speed, test.title, test.duration, url);\n    } else if (test.pending) {\n      var el = fragment('<li class=\"test pass pending\"><h2>%e</h2></li>', test.title);\n    } else {\n      var el = fragment('<li class=\"test fail\"><h2>%e <a href=\"%e\" class=\"replay\"></a></h2></li>', test.title, self.testURL(test));\n      var str = test.err.stack || test.err.toString();\n\n      // FF / Opera do not add the message\n      if (!~str.indexOf(test.err.message)) {\n        str = test.err.message + '\\n' + str;\n      }\n\n      // <=IE7 stringifies to [Object Error]. Since it can be overloaded, we\n      // check for the result of the stringifying.\n      if ('[object Error]' == str) str = test.err.message;\n\n      // Safari doesn't give you a stack. Let's at least provide a source line.\n      if (!test.err.stack && test.err.sourceURL && test.err.line !== undefined) {\n        str += \"\\n(\" + test.err.sourceURL + \":\" + test.err.line + \")\";\n      }\n\n      el.appendChild(fragment('<pre class=\"error\">%e</pre>', str));\n    }\n\n    // toggle code\n    // TODO: defer\n    if (!test.pending) {\n      var h2 = el.getElementsByTagName('h2')[0];\n\n      on(h2, 'click', function(){\n        pre.style.display = 'none' == pre.style.display\n          ? 'block'\n          : 'none';\n      });\n\n      var pre = fragment('<pre><code>%e</code></pre>', utils.clean(test.fn.toString()));\n      el.appendChild(pre);\n      pre.style.display = 'none';\n    }\n\n    // Don't call .appendChild if #mocha-report was already .shift()'ed off the stack.\n    if (stack[0]) stack[0].appendChild(el);\n  });\n}\n\n/**\n * Makes a URL, preserving querystring (\"search\") parameters.\n * @param {string} s\n * @returns {string} your new URL\n */\nvar makeUrl = function makeUrl(s) {\n  var search = window.location.search;\n\n  // Remove previous grep query parameter if present\n  if (search) {\n    search = search.replace(/[?&]grep=[^&\\s]*/g, '').replace(/^&/, '?');\n  }\n\n  return window.location.pathname + (search ? search + '&' : '?' ) + 'grep=' + encodeURIComponent(s);\n};\n\n/**\n * Provide suite URL\n *\n * @param {Object} [suite]\n */\nHTML.prototype.suiteURL = function(suite){\n  return makeUrl(suite.fullTitle());\n};\n\n/**\n * Provide test URL\n *\n * @param {Object} [test]\n */\n\nHTML.prototype.testURL = function(test){\n  return makeUrl(test.fullTitle());\n};\n\n/**\n * Display error `msg`.\n */\n\nfunction error(msg) {\n  document.body.appendChild(fragment('<div id=\"mocha-error\">%s</div>', msg));\n}\n\n/**\n * Return a DOM fragment from `html`.\n */\n\nfunction fragment(html) {\n  var args = arguments\n    , div = document.createElement('div')\n    , i = 1;\n\n  div.innerHTML = html.replace(/%([se])/g, function(_, type){\n    switch (type) {\n      case 's': return String(args[i++]);\n      case 'e': return escape(args[i++]);\n    }\n  });\n\n  return div.firstChild;\n}\n\n/**\n * Check for suites that do not have elements\n * with `classname`, and hide them.\n */\n\nfunction hideSuitesWithout(classname) {\n  var suites = document.getElementsByClassName('suite');\n  for (var i = 0; i < suites.length; i++) {\n    var els = suites[i].getElementsByClassName(classname);\n    if (0 == els.length) suites[i].className += ' hidden';\n  }\n}\n\n/**\n * Unhide .hidden suites.\n */\n\nfunction unhide() {\n  var els = document.getElementsByClassName('suite hidden');\n  for (var i = 0; i < els.length; ++i) {\n    els[i].className = els[i].className.replace('suite hidden', 'suite');\n  }\n}\n\n/**\n * Set `el` text to `str`.\n */\n\nfunction text(el, str) {\n  if (el.textContent) {\n    el.textContent = str;\n  } else {\n    el.innerText = str;\n  }\n}\n\n/**\n * Listen on `event` with callback `fn`.\n */\n\nfunction on(el, event, fn) {\n  if (el.addEventListener) {\n    el.addEventListener(event, fn, false);\n  } else {\n    el.attachEvent('on' + event, fn);\n  }\n}\n\n}); // module: reporters/html.js\n\nrequire.register(\"reporters/index.js\", function(module, exports, require){\nexports.Base = require('./base');\nexports.Dot = require('./dot');\nexports.Doc = require('./doc');\nexports.TAP = require('./tap');\nexports.JSON = require('./json');\nexports.HTML = require('./html');\nexports.List = require('./list');\nexports.Min = require('./min');\nexports.Spec = require('./spec');\nexports.Nyan = require('./nyan');\nexports.XUnit = require('./xunit');\nexports.Markdown = require('./markdown');\nexports.Progress = require('./progress');\nexports.Landing = require('./landing');\nexports.JSONCov = require('./json-cov');\nexports.HTMLCov = require('./html-cov');\nexports.JSONStream = require('./json-stream');\n\n}); // module: reporters/index.js\n\nrequire.register(\"reporters/json-cov.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base');\n\n/**\n * Expose `JSONCov`.\n */\n\nexports = module.exports = JSONCov;\n\n/**\n * Initialize a new `JsCoverage` reporter.\n *\n * @param {Runner} runner\n * @param {Boolean} output\n * @api public\n */\n\nfunction JSONCov(runner, output) {\n  var self = this\n    , output = 1 == arguments.length ? true : output;\n\n  Base.call(this, runner);\n\n  var tests = []\n    , failures = []\n    , passes = [];\n\n  runner.on('test end', function(test){\n    tests.push(test);\n  });\n\n  runner.on('pass', function(test){\n    passes.push(test);\n  });\n\n  runner.on('fail', function(test){\n    failures.push(test);\n  });\n\n  runner.on('end', function(){\n    var cov = global._$jscoverage || {};\n    var result = self.cov = map(cov);\n    result.stats = self.stats;\n    result.tests = tests.map(clean);\n    result.failures = failures.map(clean);\n    result.passes = passes.map(clean);\n    if (!output) return;\n    process.stdout.write(JSON.stringify(result, null, 2 ));\n  });\n}\n\n/**\n * Map jscoverage data to a JSON structure\n * suitable for reporting.\n *\n * @param {Object} cov\n * @return {Object}\n * @api private\n */\n\nfunction map(cov) {\n  var ret = {\n      instrumentation: 'node-jscoverage'\n    , sloc: 0\n    , hits: 0\n    , misses: 0\n    , coverage: 0\n    , files: []\n  };\n\n  for (var filename in cov) {\n    var data = coverage(filename, cov[filename]);\n    ret.files.push(data);\n    ret.hits += data.hits;\n    ret.misses += data.misses;\n    ret.sloc += data.sloc;\n  }\n\n  ret.files.sort(function(a, b) {\n    return a.filename.localeCompare(b.filename);\n  });\n\n  if (ret.sloc > 0) {\n    ret.coverage = (ret.hits / ret.sloc) * 100;\n  }\n\n  return ret;\n}\n\n/**\n * Map jscoverage data for a single source file\n * to a JSON structure suitable for reporting.\n *\n * @param {String} filename name of the source file\n * @param {Object} data jscoverage coverage data\n * @return {Object}\n * @api private\n */\n\nfunction coverage(filename, data) {\n  var ret = {\n    filename: filename,\n    coverage: 0,\n    hits: 0,\n    misses: 0,\n    sloc: 0,\n    source: {}\n  };\n\n  data.source.forEach(function(line, num){\n    num++;\n\n    if (data[num] === 0) {\n      ret.misses++;\n      ret.sloc++;\n    } else if (data[num] !== undefined) {\n      ret.hits++;\n      ret.sloc++;\n    }\n\n    ret.source[num] = {\n        source: line\n      , coverage: data[num] === undefined\n        ? ''\n        : data[num]\n    };\n  });\n\n  ret.coverage = ret.hits / ret.sloc * 100;\n\n  return ret;\n}\n\n/**\n * Return a plain-object representation of `test`\n * free of cyclic properties etc.\n *\n * @param {Object} test\n * @return {Object}\n * @api private\n */\n\nfunction clean(test) {\n  return {\n      title: test.title\n    , fullTitle: test.fullTitle()\n    , duration: test.duration\n  }\n}\n\n}); // module: reporters/json-cov.js\n\nrequire.register(\"reporters/json-stream.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , color = Base.color;\n\n/**\n * Expose `List`.\n */\n\nexports = module.exports = List;\n\n/**\n * Initialize a new `List` test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction List(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , total = runner.total;\n\n  runner.on('start', function(){\n    console.log(JSON.stringify(['start', { total: total }]));\n  });\n\n  runner.on('pass', function(test){\n    console.log(JSON.stringify(['pass', clean(test)]));\n  });\n\n  runner.on('fail', function(test, err){\n    test = clean(test);\n    test.err = err.message;\n    console.log(JSON.stringify(['fail', test]));\n  });\n\n  runner.on('end', function(){\n    process.stdout.write(JSON.stringify(['end', self.stats]));\n  });\n}\n\n/**\n * Return a plain-object representation of `test`\n * free of cyclic properties etc.\n *\n * @param {Object} test\n * @return {Object}\n * @api private\n */\n\nfunction clean(test) {\n  return {\n      title: test.title\n    , fullTitle: test.fullTitle()\n    , duration: test.duration\n  }\n}\n\n}); // module: reporters/json-stream.js\n\nrequire.register(\"reporters/json.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `JSON`.\n */\n\nexports = module.exports = JSONReporter;\n\n/**\n * Initialize a new `JSON` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction JSONReporter(runner) {\n  var self = this;\n  Base.call(this, runner);\n\n  var tests = []\n    , pending = []\n    , failures = []\n    , passes = [];\n\n  runner.on('test end', function(test){\n    tests.push(test);\n  });\n\n  runner.on('pass', function(test){\n    passes.push(test);\n  });\n\n  runner.on('fail', function(test){\n    failures.push(test);\n  });\n\n  runner.on('pending', function(test){\n    pending.push(test);\n  });\n\n  runner.on('end', function(){\n    var obj = {\n      stats: self.stats,\n      tests: tests.map(clean),\n      pending: pending.map(clean),\n      failures: failures.map(clean),\n      passes: passes.map(clean)\n    };\n\n    runner.testResults = obj;\n\n    process.stdout.write(JSON.stringify(obj, null, 2));\n  });\n}\n\n/**\n * Return a plain-object representation of `test`\n * free of cyclic properties etc.\n *\n * @param {Object} test\n * @return {Object}\n * @api private\n */\n\nfunction clean(test) {\n  return {\n    title: test.title,\n    fullTitle: test.fullTitle(),\n    duration: test.duration,\n    err: errorJSON(test.err || {})\n  }\n}\n\n/**\n * Transform `error` into a JSON object.\n * @param {Error} err\n * @return {Object}\n */\n\nfunction errorJSON(err) {\n  var res = {};\n  Object.getOwnPropertyNames(err).forEach(function(key) {\n    res[key] = err[key];\n  }, err);\n  return res;\n}\n\n}); // module: reporters/json.js\n\nrequire.register(\"reporters/landing.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `Landing`.\n */\n\nexports = module.exports = Landing;\n\n/**\n * Airplane color.\n */\n\nBase.colors.plane = 0;\n\n/**\n * Airplane crash color.\n */\n\nBase.colors['plane crash'] = 31;\n\n/**\n * Runway color.\n */\n\nBase.colors.runway = 90;\n\n/**\n * Initialize a new `Landing` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Landing(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , width = Base.window.width * .75 | 0\n    , total = runner.total\n    , stream = process.stdout\n    , plane = color('plane', '')\n    , crashed = -1\n    , n = 0;\n\n  function runway() {\n    var buf = Array(width).join('-');\n    return '  ' + color('runway', buf);\n  }\n\n  runner.on('start', function(){\n    stream.write('\\n\\n\\n  ');\n    cursor.hide();\n  });\n\n  runner.on('test end', function(test){\n    // check if the plane crashed\n    var col = -1 == crashed\n      ? width * ++n / total | 0\n      : crashed;\n\n    // show the crash\n    if ('failed' == test.state) {\n      plane = color('plane crash', '');\n      crashed = col;\n    }\n\n    // render landing strip\n    stream.write('\\u001b['+(width+1)+'D\\u001b[2A');\n    stream.write(runway());\n    stream.write('\\n  ');\n    stream.write(color('runway', Array(col).join('')));\n    stream.write(plane)\n    stream.write(color('runway', Array(width - col).join('') + '\\n'));\n    stream.write(runway());\n    stream.write('\\u001b[0m');\n  });\n\n  runner.on('end', function(){\n    cursor.show();\n    console.log();\n    self.epilogue();\n  });\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nLanding.prototype = new F;\nLanding.prototype.constructor = Landing;\n\n\n}); // module: reporters/landing.js\n\nrequire.register(\"reporters/list.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `List`.\n */\n\nexports = module.exports = List;\n\n/**\n * Initialize a new `List` test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction List(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , n = 0;\n\n  runner.on('start', function(){\n    console.log();\n  });\n\n  runner.on('test', function(test){\n    process.stdout.write(color('pass', '    ' + test.fullTitle() + ': '));\n  });\n\n  runner.on('pending', function(test){\n    var fmt = color('checkmark', '  -')\n      + color('pending', ' %s');\n    console.log(fmt, test.fullTitle());\n  });\n\n  runner.on('pass', function(test){\n    var fmt = color('checkmark', '  '+Base.symbols.dot)\n      + color('pass', ' %s: ')\n      + color(test.speed, '%dms');\n    cursor.CR();\n    console.log(fmt, test.fullTitle(), test.duration);\n  });\n\n  runner.on('fail', function(test, err){\n    cursor.CR();\n    console.log(color('fail', '  %d) %s'), ++n, test.fullTitle());\n  });\n\n  runner.on('end', self.epilogue.bind(self));\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nList.prototype = new F;\nList.prototype.constructor = List;\n\n\n}); // module: reporters/list.js\n\nrequire.register(\"reporters/markdown.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils');\n\n/**\n * Constants\n */\n\nvar SUITE_PREFIX = '$';\n\n/**\n * Expose `Markdown`.\n */\n\nexports = module.exports = Markdown;\n\n/**\n * Initialize a new `Markdown` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Markdown(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , level = 0\n    , buf = '';\n\n  function title(str) {\n    return Array(level).join('#') + ' ' + str;\n  }\n\n  function indent() {\n    return Array(level).join('  ');\n  }\n\n  function mapTOC(suite, obj) {\n    var ret = obj,\n        key = SUITE_PREFIX + suite.title;\n    obj = obj[key] = obj[key] || { suite: suite };\n    suite.suites.forEach(function(suite){\n      mapTOC(suite, obj);\n    });\n    return ret;\n  }\n\n  function stringifyTOC(obj, level) {\n    ++level;\n    var buf = '';\n    var link;\n    for (var key in obj) {\n      if ('suite' == key) continue;\n      if (key !== SUITE_PREFIX) {\n        link = ' - [' + key.substring(1) + ']';\n        link += '(#' + utils.slug(obj[key].suite.fullTitle()) + ')\\n';\n        buf += Array(level).join('  ') + link;\n      }\n      buf += stringifyTOC(obj[key], level);\n    }\n    return buf;\n  }\n\n  function generateTOC(suite) {\n    var obj = mapTOC(suite, {});\n    return stringifyTOC(obj, 0);\n  }\n\n  generateTOC(runner.suite);\n\n  runner.on('suite', function(suite){\n    ++level;\n    var slug = utils.slug(suite.fullTitle());\n    buf += '<a name=\"' + slug + '\"></a>' + '\\n';\n    buf += title(suite.title) + '\\n';\n  });\n\n  runner.on('suite end', function(suite){\n    --level;\n  });\n\n  runner.on('pass', function(test){\n    var code = utils.clean(test.fn.toString());\n    buf += test.title + '.\\n';\n    buf += '\\n```js\\n';\n    buf += code + '\\n';\n    buf += '```\\n\\n';\n  });\n\n  runner.on('end', function(){\n    process.stdout.write('# TOC\\n');\n    process.stdout.write(generateTOC(runner.suite));\n    process.stdout.write(buf);\n  });\n}\n\n}); // module: reporters/markdown.js\n\nrequire.register(\"reporters/min.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base');\n\n/**\n * Expose `Min`.\n */\n\nexports = module.exports = Min;\n\n/**\n * Initialize a new `Min` minimal test reporter (best used with --watch).\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Min(runner) {\n  Base.call(this, runner);\n\n  runner.on('start', function(){\n    // clear screen\n    process.stdout.write('\\u001b[2J');\n    // set cursor position\n    process.stdout.write('\\u001b[1;3H');\n  });\n\n  runner.on('end', this.epilogue.bind(this));\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nMin.prototype = new F;\nMin.prototype.constructor = Min;\n\n\n}); // module: reporters/min.js\n\nrequire.register(\"reporters/nyan.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base');\n\n/**\n * Expose `Dot`.\n */\n\nexports = module.exports = NyanCat;\n\n/**\n * Initialize a new `Dot` matrix test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction NyanCat(runner) {\n  Base.call(this, runner);\n  var self = this\n    , stats = this.stats\n    , width = Base.window.width * .75 | 0\n    , rainbowColors = this.rainbowColors = self.generateColors()\n    , colorIndex = this.colorIndex = 0\n    , numerOfLines = this.numberOfLines = 4\n    , trajectories = this.trajectories = [[], [], [], []]\n    , nyanCatWidth = this.nyanCatWidth = 11\n    , trajectoryWidthMax = this.trajectoryWidthMax = (width - nyanCatWidth)\n    , scoreboardWidth = this.scoreboardWidth = 5\n    , tick = this.tick = 0\n    , n = 0;\n\n  runner.on('start', function(){\n    Base.cursor.hide();\n    self.draw();\n  });\n\n  runner.on('pending', function(test){\n    self.draw();\n  });\n\n  runner.on('pass', function(test){\n    self.draw();\n  });\n\n  runner.on('fail', function(test, err){\n    self.draw();\n  });\n\n  runner.on('end', function(){\n    Base.cursor.show();\n    for (var i = 0; i < self.numberOfLines; i++) write('\\n');\n    self.epilogue();\n  });\n}\n\n/**\n * Draw the nyan cat\n *\n * @api private\n */\n\nNyanCat.prototype.draw = function(){\n  this.appendRainbow();\n  this.drawScoreboard();\n  this.drawRainbow();\n  this.drawNyanCat();\n  this.tick = !this.tick;\n};\n\n/**\n * Draw the \"scoreboard\" showing the number\n * of passes, failures and pending tests.\n *\n * @api private\n */\n\nNyanCat.prototype.drawScoreboard = function(){\n  var stats = this.stats;\n\n  function draw(type, n) {\n    write(' ');\n    write(Base.color(type, n));\n    write('\\n');\n  }\n\n  draw('green', stats.passes);\n  draw('fail', stats.failures);\n  draw('pending', stats.pending);\n  write('\\n');\n\n  this.cursorUp(this.numberOfLines);\n};\n\n/**\n * Append the rainbow.\n *\n * @api private\n */\n\nNyanCat.prototype.appendRainbow = function(){\n  var segment = this.tick ? '_' : '-';\n  var rainbowified = this.rainbowify(segment);\n\n  for (var index = 0; index < this.numberOfLines; index++) {\n    var trajectory = this.trajectories[index];\n    if (trajectory.length >= this.trajectoryWidthMax) trajectory.shift();\n    trajectory.push(rainbowified);\n  }\n};\n\n/**\n * Draw the rainbow.\n *\n * @api private\n */\n\nNyanCat.prototype.drawRainbow = function(){\n  var self = this;\n\n  this.trajectories.forEach(function(line, index) {\n    write('\\u001b[' + self.scoreboardWidth + 'C');\n    write(line.join(''));\n    write('\\n');\n  });\n\n  this.cursorUp(this.numberOfLines);\n};\n\n/**\n * Draw the nyan cat\n *\n * @api private\n */\n\nNyanCat.prototype.drawNyanCat = function() {\n  var self = this;\n  var startWidth = this.scoreboardWidth + this.trajectories[0].length;\n  var dist = '\\u001b[' + startWidth + 'C';\n  var padding = '';\n\n  write(dist);\n  write('_,------,');\n  write('\\n');\n\n  write(dist);\n  padding = self.tick ? '  ' : '   ';\n  write('_|' + padding + '/\\\\_/\\\\ ');\n  write('\\n');\n\n  write(dist);\n  padding = self.tick ? '_' : '__';\n  var tail = self.tick ? '~' : '^';\n  var face;\n  write(tail + '|' + padding + this.face() + ' ');\n  write('\\n');\n\n  write(dist);\n  padding = self.tick ? ' ' : '  ';\n  write(padding + '\"\"  \"\" ');\n  write('\\n');\n\n  this.cursorUp(this.numberOfLines);\n};\n\n/**\n * Draw nyan cat face.\n *\n * @return {String}\n * @api private\n */\n\nNyanCat.prototype.face = function() {\n  var stats = this.stats;\n  if (stats.failures) {\n    return '( x .x)';\n  } else if (stats.pending) {\n    return '( o .o)';\n  } else if(stats.passes) {\n    return '( ^ .^)';\n  } else {\n    return '( - .-)';\n  }\n};\n\n/**\n * Move cursor up `n`.\n *\n * @param {Number} n\n * @api private\n */\n\nNyanCat.prototype.cursorUp = function(n) {\n  write('\\u001b[' + n + 'A');\n};\n\n/**\n * Move cursor down `n`.\n *\n * @param {Number} n\n * @api private\n */\n\nNyanCat.prototype.cursorDown = function(n) {\n  write('\\u001b[' + n + 'B');\n};\n\n/**\n * Generate rainbow colors.\n *\n * @return {Array}\n * @api private\n */\n\nNyanCat.prototype.generateColors = function(){\n  var colors = [];\n\n  for (var i = 0; i < (6 * 7); i++) {\n    var pi3 = Math.floor(Math.PI / 3);\n    var n = (i * (1.0 / 6));\n    var r = Math.floor(3 * Math.sin(n) + 3);\n    var g = Math.floor(3 * Math.sin(n + 2 * pi3) + 3);\n    var b = Math.floor(3 * Math.sin(n + 4 * pi3) + 3);\n    colors.push(36 * r + 6 * g + b + 16);\n  }\n\n  return colors;\n};\n\n/**\n * Apply rainbow to the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nNyanCat.prototype.rainbowify = function(str){\n  if (!Base.useColors)\n    return str;\n  var color = this.rainbowColors[this.colorIndex % this.rainbowColors.length];\n  this.colorIndex += 1;\n  return '\\u001b[38;5;' + color + 'm' + str + '\\u001b[0m';\n};\n\n/**\n * Stdout helper.\n */\n\nfunction write(string) {\n  process.stdout.write(string);\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nNyanCat.prototype = new F;\nNyanCat.prototype.constructor = NyanCat;\n\n\n}); // module: reporters/nyan.js\n\nrequire.register(\"reporters/progress.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `Progress`.\n */\n\nexports = module.exports = Progress;\n\n/**\n * General progress bar color.\n */\n\nBase.colors.progress = 90;\n\n/**\n * Initialize a new `Progress` bar test reporter.\n *\n * @param {Runner} runner\n * @param {Object} options\n * @api public\n */\n\nfunction Progress(runner, options) {\n  Base.call(this, runner);\n\n  var self = this\n    , options = options || {}\n    , stats = this.stats\n    , width = Base.window.width * .50 | 0\n    , total = runner.total\n    , complete = 0\n    , max = Math.max\n    , lastN = -1;\n\n  // default chars\n  options.open = options.open || '[';\n  options.complete = options.complete || '';\n  options.incomplete = options.incomplete || Base.symbols.dot;\n  options.close = options.close || ']';\n  options.verbose = false;\n\n  // tests started\n  runner.on('start', function(){\n    console.log();\n    cursor.hide();\n  });\n\n  // tests complete\n  runner.on('test end', function(){\n    complete++;\n    var incomplete = total - complete\n      , percent = complete / total\n      , n = width * percent | 0\n      , i = width - n;\n\n    if (lastN === n && !options.verbose) {\n      // Don't re-render the line if it hasn't changed\n      return;\n    }\n    lastN = n;\n\n    cursor.CR();\n    process.stdout.write('\\u001b[J');\n    process.stdout.write(color('progress', '  ' + options.open));\n    process.stdout.write(Array(n).join(options.complete));\n    process.stdout.write(Array(i).join(options.incomplete));\n    process.stdout.write(color('progress', options.close));\n    if (options.verbose) {\n      process.stdout.write(color('progress', ' ' + complete + ' of ' + total));\n    }\n  });\n\n  // tests are complete, output some stats\n  // and the failures if any\n  runner.on('end', function(){\n    cursor.show();\n    console.log();\n    self.epilogue();\n  });\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nProgress.prototype = new F;\nProgress.prototype.constructor = Progress;\n\n\n}); // module: reporters/progress.js\n\nrequire.register(\"reporters/spec.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `Spec`.\n */\n\nexports = module.exports = Spec;\n\n/**\n * Initialize a new `Spec` test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Spec(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , indents = 0\n    , n = 0;\n\n  function indent() {\n    return Array(indents).join('  ')\n  }\n\n  runner.on('start', function(){\n    console.log();\n  });\n\n  runner.on('suite', function(suite){\n    ++indents;\n    console.log(color('suite', '%s%s'), indent(), suite.title);\n  });\n\n  runner.on('suite end', function(suite){\n    --indents;\n    if (1 == indents) console.log();\n  });\n\n  runner.on('pending', function(test){\n    var fmt = indent() + color('pending', '  - %s');\n    console.log(fmt, test.title);\n  });\n\n  runner.on('pass', function(test){\n    if ('fast' == test.speed) {\n      var fmt = indent()\n        + color('checkmark', '  ' + Base.symbols.ok)\n        + color('pass', ' %s');\n      cursor.CR();\n      console.log(fmt, test.title);\n    } else {\n      var fmt = indent()\n        + color('checkmark', '  ' + Base.symbols.ok)\n        + color('pass', ' %s')\n        + color(test.speed, ' (%dms)');\n      cursor.CR();\n      console.log(fmt, test.title, test.duration);\n    }\n  });\n\n  runner.on('fail', function(test, err){\n    cursor.CR();\n    console.log(indent() + color('fail', '  %d) %s'), ++n, test.title);\n  });\n\n  runner.on('end', self.epilogue.bind(self));\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nSpec.prototype = new F;\nSpec.prototype.constructor = Spec;\n\n\n}); // module: reporters/spec.js\n\nrequire.register(\"reporters/tap.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `TAP`.\n */\n\nexports = module.exports = TAP;\n\n/**\n * Initialize a new `TAP` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction TAP(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , n = 1\n    , passes = 0\n    , failures = 0;\n\n  runner.on('start', function(){\n    var total = runner.grepTotal(runner.suite);\n    console.log('%d..%d', 1, total);\n  });\n\n  runner.on('test end', function(){\n    ++n;\n  });\n\n  runner.on('pending', function(test){\n    console.log('ok %d %s # SKIP -', n, title(test));\n  });\n\n  runner.on('pass', function(test){\n    passes++;\n    console.log('ok %d %s', n, title(test));\n  });\n\n  runner.on('fail', function(test, err){\n    failures++;\n    console.log('not ok %d %s', n, title(test));\n    if (err.stack) console.log(err.stack.replace(/^/gm, '  '));\n  });\n\n  runner.on('end', function(){\n    console.log('# tests ' + (passes + failures));\n    console.log('# pass ' + passes);\n    console.log('# fail ' + failures);\n  });\n}\n\n/**\n * Return a TAP-safe title of `test`\n *\n * @param {Object} test\n * @return {String}\n * @api private\n */\n\nfunction title(test) {\n  return test.fullTitle().replace(/#/g, '');\n}\n\n}); // module: reporters/tap.js\n\nrequire.register(\"reporters/xunit.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils')\n  , fs = require('browser/fs')\n  , escape = utils.escape;\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Expose `XUnit`.\n */\n\nexports = module.exports = XUnit;\n\n/**\n * Initialize a new `XUnit` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction XUnit(runner, options) {\n  Base.call(this, runner);\n  var stats = this.stats\n    , tests = []\n    , self = this;\n\n  if (options.reporterOptions && options.reporterOptions.output) {\n      if (! fs.createWriteStream) {\n          throw new Error('file output not supported in browser');\n      }\n      self.fileStream = fs.createWriteStream(options.reporterOptions.output);\n  }\n\n  runner.on('pending', function(test){\n    tests.push(test);\n  });\n\n  runner.on('pass', function(test){\n    tests.push(test);\n  });\n\n  runner.on('fail', function(test){\n    tests.push(test);\n  });\n\n  runner.on('end', function(){\n    self.write(tag('testsuite', {\n        name: 'Mocha Tests'\n      , tests: stats.tests\n      , failures: stats.failures\n      , errors: stats.failures\n      , skipped: stats.tests - stats.failures - stats.passes\n      , timestamp: (new Date).toUTCString()\n      , time: (stats.duration / 1000) || 0\n    }, false));\n\n    tests.forEach(function(t) { self.test(t); });\n    self.write('</testsuite>');\n  });\n}\n\n/**\n * Override done to close the stream (if it's a file).\n */\nXUnit.prototype.done = function(failures, fn) {\n    if (this.fileStream) {\n        this.fileStream.end(function() {\n            fn(failures);\n        });\n    } else {\n        fn(failures);\n    }\n};\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nXUnit.prototype = new F;\nXUnit.prototype.constructor = XUnit;\n\n\n/**\n * Write out the given line\n */\nXUnit.prototype.write = function(line) {\n    if (this.fileStream) {\n        this.fileStream.write(line + '\\n');\n    } else {\n        console.log(line);\n    }\n};\n\n/**\n * Output tag for the given `test.`\n */\n\nXUnit.prototype.test = function(test, ostream) {\n  var attrs = {\n      classname: test.parent.fullTitle()\n    , name: test.title\n    , time: (test.duration / 1000) || 0\n  };\n\n  if ('failed' == test.state) {\n    var err = test.err;\n    this.write(tag('testcase', attrs, false, tag('failure', {}, false, cdata(escape(err.message) + \"\\n\" + err.stack))));\n  } else if (test.pending) {\n    this.write(tag('testcase', attrs, false, tag('skipped', {}, true)));\n  } else {\n    this.write(tag('testcase', attrs, true) );\n  }\n};\n\n/**\n * HTML tag helper.\n */\n\nfunction tag(name, attrs, close, content) {\n  var end = close ? '/>' : '>'\n    , pairs = []\n    , tag;\n\n  for (var key in attrs) {\n    pairs.push(key + '=\"' + escape(attrs[key]) + '\"');\n  }\n\n  tag = '<' + name + (pairs.length ? ' ' + pairs.join(' ') : '') + end;\n  if (content) tag += content + '</' + name + end;\n  return tag;\n}\n\n/**\n * Return cdata escaped CDATA `str`.\n */\n\nfunction cdata(str) {\n  return '<![CDATA[' + escape(str) + ']]>';\n}\n\n}); // module: reporters/xunit.js\n\nrequire.register(\"runnable.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar EventEmitter = require('browser/events').EventEmitter\n  , debug = require('browser/debug')('mocha:runnable')\n  , Pending = require('./pending')\n  , milliseconds = require('./ms')\n  , utils = require('./utils');\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Object#toString().\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Expose `Runnable`.\n */\n\nmodule.exports = Runnable;\n\n/**\n * Initialize a new `Runnable` with the given `title` and callback `fn`.\n *\n * @param {String} title\n * @param {Function} fn\n * @api private\n */\n\nfunction Runnable(title, fn) {\n  this.title = title;\n  this.fn = fn;\n  this.async = fn && fn.length;\n  this.sync = ! this.async;\n  this._timeout = 2000;\n  this._slow = 75;\n  this._enableTimeouts = true;\n  this.timedOut = false;\n  this._trace = new Error('done() called multiple times')\n}\n\n/**\n * Inherit from `EventEmitter.prototype`.\n */\n\nfunction F(){};\nF.prototype = EventEmitter.prototype;\nRunnable.prototype = new F;\nRunnable.prototype.constructor = Runnable;\n\n\n/**\n * Set & get timeout `ms`.\n *\n * @param {Number|String} ms\n * @return {Runnable|Number} ms or self\n * @api private\n */\n\nRunnable.prototype.timeout = function(ms){\n  if (0 == arguments.length) return this._timeout;\n  if (ms === 0) this._enableTimeouts = false;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('timeout %d', ms);\n  this._timeout = ms;\n  if (this.timer) this.resetTimeout();\n  return this;\n};\n\n/**\n * Set & get slow `ms`.\n *\n * @param {Number|String} ms\n * @return {Runnable|Number} ms or self\n * @api private\n */\n\nRunnable.prototype.slow = function(ms){\n  if (0 === arguments.length) return this._slow;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('timeout %d', ms);\n  this._slow = ms;\n  return this;\n};\n\n/**\n * Set and & get timeout `enabled`.\n *\n * @param {Boolean} enabled\n * @return {Runnable|Boolean} enabled or self\n * @api private\n */\n\nRunnable.prototype.enableTimeouts = function(enabled){\n  if (arguments.length === 0) return this._enableTimeouts;\n  debug('enableTimeouts %s', enabled);\n  this._enableTimeouts = enabled;\n  return this;\n};\n\n/**\n * Halt and mark as pending.\n *\n * @api private\n */\n\nRunnable.prototype.skip = function(){\n    throw new Pending();\n};\n\n/**\n * Return the full title generated by recursively\n * concatenating the parent's full title.\n *\n * @return {String}\n * @api public\n */\n\nRunnable.prototype.fullTitle = function(){\n  return this.parent.fullTitle() + ' ' + this.title;\n};\n\n/**\n * Clear the timeout.\n *\n * @api private\n */\n\nRunnable.prototype.clearTimeout = function(){\n  clearTimeout(this.timer);\n};\n\n/**\n * Inspect the runnable void of private properties.\n *\n * @return {String}\n * @api private\n */\n\nRunnable.prototype.inspect = function(){\n  return JSON.stringify(this, function(key, val){\n    if ('_' == key[0]) return;\n    if ('parent' == key) return '#<Suite>';\n    if ('ctx' == key) return '#<Context>';\n    return val;\n  }, 2);\n};\n\n/**\n * Reset the timeout.\n *\n * @api private\n */\n\nRunnable.prototype.resetTimeout = function(){\n  var self = this;\n  var ms = this.timeout() || 1e9;\n\n  if (!this._enableTimeouts) return;\n  this.clearTimeout();\n  this.timer = setTimeout(function(){\n    if (!self._enableTimeouts) return;\n    self.callback(new Error('timeout of ' + ms + 'ms exceeded. Ensure the done() callback is being called in this test.'));\n    self.timedOut = true;\n  }, ms);\n};\n\n/**\n * Whitelist these globals for this test run\n *\n * @api private\n */\nRunnable.prototype.globals = function(arr){\n  var self = this;\n  this._allowedGlobals = arr;\n};\n\n/**\n * Run the test and invoke `fn(err)`.\n *\n * @param {Function} fn\n * @api private\n */\n\nRunnable.prototype.run = function(fn){\n  var self = this\n    , start = new Date\n    , ctx = this.ctx\n    , finished\n    , emitted;\n\n  // Some times the ctx exists but it is not runnable\n  if (ctx && ctx.runnable) ctx.runnable(this);\n\n  // called multiple times\n  function multiple(err) {\n    if (emitted) return;\n    emitted = true;\n    self.emit('error', err || new Error('done() called multiple times; stacktrace may be inaccurate'));\n  }\n\n  // finished\n  function done(err) {\n    var ms = self.timeout();\n    if (self.timedOut) return;\n    if (finished) return multiple(err || self._trace);\n\n    // Discard the resolution if this test has already failed asynchronously\n    if (self.state) return;\n\n    self.clearTimeout();\n    self.duration = new Date - start;\n    finished = true;\n    if (!err && self.duration > ms && self._enableTimeouts) err = new Error('timeout of ' + ms + 'ms exceeded. Ensure the done() callback is being called in this test.');\n    fn(err);\n  }\n\n  // for .resetTimeout()\n  this.callback = done;\n\n  // explicit async with `done` argument\n  if (this.async) {\n    this.resetTimeout();\n\n    try {\n      this.fn.call(ctx, function(err){\n        if (err instanceof Error || toString.call(err) === \"[object Error]\") return done(err);\n        if (null != err) {\n          if (Object.prototype.toString.call(err) === '[object Object]') {\n            return done(new Error('done() invoked with non-Error: ' + JSON.stringify(err)));\n          } else {\n            return done(new Error('done() invoked with non-Error: ' + err));\n          }\n        }\n        done();\n      });\n    } catch (err) {\n      done(utils.getError(err));\n    }\n    return;\n  }\n\n  if (this.asyncOnly) {\n    return done(new Error('--async-only option in use without declaring `done()`'));\n  }\n\n  // sync or promise-returning\n  try {\n    if (this.pending) {\n      done();\n    } else {\n      callFn(this.fn);\n    }\n  } catch (err) {\n    done(utils.getError(err));\n  }\n\n  function callFn(fn) {\n    var result = fn.call(ctx);\n    if (result && typeof result.then === 'function') {\n      self.resetTimeout();\n      result\n        .then(function() {\n          done()\n        },\n        function(reason) {\n          done(reason || new Error('Promise rejected with no or falsy reason'))\n        });\n    } else {\n      done();\n    }\n  }\n};\n\n}); // module: runnable.js\n\nrequire.register(\"runner.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar EventEmitter = require('browser/events').EventEmitter\n  , debug = require('browser/debug')('mocha:runner')\n  , Pending = require('./pending')\n  , Test = require('./test')\n  , utils = require('./utils')\n  , filter = utils.filter\n  , keys = utils.keys\n  , type = utils.type\n  , stringify = utils.stringify\n  , stackFilter = utils.stackTraceFilter();\n\n/**\n * Non-enumerable globals.\n */\n\nvar globals = [\n  'setTimeout',\n  'clearTimeout',\n  'setInterval',\n  'clearInterval',\n  'XMLHttpRequest',\n  'Date',\n  'setImmediate',\n  'clearImmediate'\n];\n\n/**\n * Expose `Runner`.\n */\n\nmodule.exports = Runner;\n\n/**\n * Initialize a `Runner` for the given `suite`.\n *\n * Events:\n *\n *   - `start`  execution started\n *   - `end`  execution complete\n *   - `suite`  (suite) test suite execution started\n *   - `suite end`  (suite) all tests (and sub-suites) have finished\n *   - `test`  (test) test execution started\n *   - `test end`  (test) test completed\n *   - `hook`  (hook) hook execution started\n *   - `hook end`  (hook) hook complete\n *   - `pass`  (test) test passed\n *   - `fail`  (test, err) test failed\n *   - `pending`  (test) test pending\n *\n * @param {Suite} suite Root suite\n * @param {boolean} [delay] Whether or not to delay execution of root suite\n *   until ready.\n * @api public\n */\n\nfunction Runner(suite, delay) {\n  var self = this;\n  this._globals = [];\n  this._abort = false;\n  this._delay = delay;\n  this.suite = suite;\n  this.total = suite.total();\n  this.failures = 0;\n  this.on('test end', function(test){ self.checkGlobals(test); });\n  this.on('hook end', function(hook){ self.checkGlobals(hook); });\n  this.grep(/.*/);\n  this.globals(this.globalProps().concat(extraGlobals()));\n}\n\n/**\n * Wrapper for setImmediate, process.nextTick, or browser polyfill.\n *\n * @param {Function} fn\n * @api private\n */\n\nRunner.immediately = global.setImmediate || process.nextTick;\n\n/**\n * Inherit from `EventEmitter.prototype`.\n */\n\nfunction F(){};\nF.prototype = EventEmitter.prototype;\nRunner.prototype = new F;\nRunner.prototype.constructor = Runner;\n\n\n/**\n * Run tests with full titles matching `re`. Updates runner.total\n * with number of tests matched.\n *\n * @param {RegExp} re\n * @param {Boolean} invert\n * @return {Runner} for chaining\n * @api public\n */\n\nRunner.prototype.grep = function(re, invert){\n  debug('grep %s', re);\n  this._grep = re;\n  this._invert = invert;\n  this.total = this.grepTotal(this.suite);\n  return this;\n};\n\n/**\n * Returns the number of tests matching the grep search for the\n * given suite.\n *\n * @param {Suite} suite\n * @return {Number}\n * @api public\n */\n\nRunner.prototype.grepTotal = function(suite) {\n  var self = this;\n  var total = 0;\n\n  suite.eachTest(function(test){\n    var match = self._grep.test(test.fullTitle());\n    if (self._invert) match = !match;\n    if (match) total++;\n  });\n\n  return total;\n};\n\n/**\n * Return a list of global properties.\n *\n * @return {Array}\n * @api private\n */\n\nRunner.prototype.globalProps = function() {\n  var props = utils.keys(global);\n\n  // non-enumerables\n  for (var i = 0; i < globals.length; ++i) {\n    if (~utils.indexOf(props, globals[i])) continue;\n    props.push(globals[i]);\n  }\n\n  return props;\n};\n\n/**\n * Allow the given `arr` of globals.\n *\n * @param {Array} arr\n * @return {Runner} for chaining\n * @api public\n */\n\nRunner.prototype.globals = function(arr){\n  if (0 == arguments.length) return this._globals;\n  debug('globals %j', arr);\n  this._globals = this._globals.concat(arr);\n  return this;\n};\n\n/**\n * Check for global variable leaks.\n *\n * @api private\n */\n\nRunner.prototype.checkGlobals = function(test){\n  if (this.ignoreLeaks) return;\n  var ok = this._globals;\n\n  var globals = this.globalProps();\n  var leaks;\n\n  if (test) {\n    ok = ok.concat(test._allowedGlobals || []);\n  }\n\n  if(this.prevGlobalsLength == globals.length) return;\n  this.prevGlobalsLength = globals.length;\n\n  leaks = filterLeaks(ok, globals);\n  this._globals = this._globals.concat(leaks);\n\n  if (leaks.length > 1) {\n    this.fail(test, new Error('global leaks detected: ' + leaks.join(', ') + ''));\n  } else if (leaks.length) {\n    this.fail(test, new Error('global leak detected: ' + leaks[0]));\n  }\n};\n\n/**\n * Fail the given `test`.\n *\n * @param {Test} test\n * @param {Error} err\n * @api private\n */\n\nRunner.prototype.fail = function(test, err) {\n  ++this.failures;\n  test.state = 'failed';\n\n  if (!(err instanceof Error)) {\n    err = new Error('the ' + type(err) + ' ' + stringify(err) + ' was thrown, throw an Error :)');\n  }\n\n  err.stack = (this.fullStackTrace || !err.stack)\n    ? err.stack\n    : stackFilter(err.stack);\n\n  this.emit('fail', test, err);\n};\n\n/**\n * Fail the given `hook` with `err`.\n *\n * Hook failures work in the following pattern:\n * - If bail, then exit\n * - Failed `before` hook skips all tests in a suite and subsuites,\n *   but jumps to corresponding `after` hook\n * - Failed `before each` hook skips remaining tests in a\n *   suite and jumps to corresponding `after each` hook,\n *   which is run only once\n * - Failed `after` hook does not alter\n *   execution order\n * - Failed `after each` hook skips remaining tests in a\n *   suite and subsuites, but executes other `after each`\n *   hooks\n *\n * @param {Hook} hook\n * @param {Error} err\n * @api private\n */\n\nRunner.prototype.failHook = function(hook, err){\n  this.fail(hook, err);\n  if (this.suite.bail()) {\n    this.emit('end');\n  }\n};\n\n/**\n * Run hook `name` callbacks and then invoke `fn()`.\n *\n * @param {String} name\n * @param {Function} function\n * @api private\n */\n\nRunner.prototype.hook = function(name, fn){\n  var suite = this.suite\n    , hooks = suite['_' + name]\n    , self = this\n    , timer;\n\n  function next(i) {\n    var hook = hooks[i];\n    if (!hook) return fn();\n    self.currentRunnable = hook;\n\n    hook.ctx.currentTest = self.test;\n\n    self.emit('hook', hook);\n\n    hook.on('error', function(err){\n      self.failHook(hook, err);\n    });\n\n    hook.run(function(err){\n      hook.removeAllListeners('error');\n      var testError = hook.error();\n      if (testError) self.fail(self.test, testError);\n      if (err) {\n        if (err instanceof Pending) {\n          suite.pending = true;\n        } else {\n          self.failHook(hook, err);\n\n          // stop executing hooks, notify callee of hook err\n          return fn(err);\n        }\n      }\n      self.emit('hook end', hook);\n      delete hook.ctx.currentTest;\n      next(++i);\n    });\n  }\n\n  Runner.immediately(function(){\n    next(0);\n  });\n};\n\n/**\n * Run hook `name` for the given array of `suites`\n * in order, and callback `fn(err, errSuite)`.\n *\n * @param {String} name\n * @param {Array} suites\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.hooks = function(name, suites, fn){\n  var self = this\n    , orig = this.suite;\n\n  function next(suite) {\n    self.suite = suite;\n\n    if (!suite) {\n      self.suite = orig;\n      return fn();\n    }\n\n    self.hook(name, function(err){\n      if (err) {\n        var errSuite = self.suite;\n        self.suite = orig;\n        return fn(err, errSuite);\n      }\n\n      next(suites.pop());\n    });\n  }\n\n  next(suites.pop());\n};\n\n/**\n * Run hooks from the top level down.\n *\n * @param {String} name\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.hookUp = function(name, fn){\n  var suites = [this.suite].concat(this.parents()).reverse();\n  this.hooks(name, suites, fn);\n};\n\n/**\n * Run hooks from the bottom up.\n *\n * @param {String} name\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.hookDown = function(name, fn){\n  var suites = [this.suite].concat(this.parents());\n  this.hooks(name, suites, fn);\n};\n\n/**\n * Return an array of parent Suites from\n * closest to furthest.\n *\n * @return {Array}\n * @api private\n */\n\nRunner.prototype.parents = function(){\n  var suite = this.suite\n    , suites = [];\n  while (suite = suite.parent) suites.push(suite);\n  return suites;\n};\n\n/**\n * Run the current test and callback `fn(err)`.\n *\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.runTest = function(fn){\n  var test = this.test\n    , self = this;\n\n  if (this.asyncOnly) test.asyncOnly = true;\n\n  try {\n    test.on('error', function(err){\n      self.fail(test, err);\n    });\n    test.run(fn);\n  } catch (err) {\n    fn(err);\n  }\n};\n\n/**\n * Run tests in the given `suite` and invoke\n * the callback `fn()` when complete.\n *\n * @param {Suite} suite\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.runTests = function(suite, fn){\n  var self = this\n    , tests = suite.tests.slice()\n    , test;\n\n\n  function hookErr(err, errSuite, after) {\n    // before/after Each hook for errSuite failed:\n    var orig = self.suite;\n\n    // for failed 'after each' hook start from errSuite parent,\n    // otherwise start from errSuite itself\n    self.suite = after ? errSuite.parent : errSuite;\n\n    if (self.suite) {\n      // call hookUp afterEach\n      self.hookUp('afterEach', function(err2, errSuite2) {\n        self.suite = orig;\n        // some hooks may fail even now\n        if (err2) return hookErr(err2, errSuite2, true);\n        // report error suite\n        fn(errSuite);\n      });\n    } else {\n      // there is no need calling other 'after each' hooks\n      self.suite = orig;\n      fn(errSuite);\n    }\n  }\n\n  function next(err, errSuite) {\n    // if we bail after first err\n    if (self.failures && suite._bail) return fn();\n\n    if (self._abort) return fn();\n\n    if (err) return hookErr(err, errSuite, true);\n\n    // next test\n    test = tests.shift();\n\n    // all done\n    if (!test) return fn();\n\n    // grep\n    var match = self._grep.test(test.fullTitle());\n    if (self._invert) match = !match;\n    if (!match) return next();\n\n    // pending\n    if (test.pending) {\n      self.emit('pending', test);\n      self.emit('test end', test);\n      return next();\n    }\n\n    // execute test and hook(s)\n    self.emit('test', self.test = test);\n    self.hookDown('beforeEach', function(err, errSuite){\n\n      if (suite.pending) {\n        self.emit('pending', test);\n        self.emit('test end', test);\n        return next();\n      }\n      if (err) return hookErr(err, errSuite, false);\n\n      self.currentRunnable = self.test;\n      self.runTest(function(err){\n        test = self.test;\n\n        if (err) {\n          if (err instanceof Pending) {\n            self.emit('pending', test);\n          } else {\n            self.fail(test, err);\n          }\n          self.emit('test end', test);\n\n          if (err instanceof Pending) {\n            return next();\n          }\n\n          return self.hookUp('afterEach', next);\n        }\n\n        test.state = 'passed';\n        self.emit('pass', test);\n        self.emit('test end', test);\n        self.hookUp('afterEach', next);\n      });\n    });\n  }\n\n  this.next = next;\n  next();\n};\n\n/**\n * Run the given `suite` and invoke the\n * callback `fn()` when complete.\n *\n * @param {Suite} suite\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.runSuite = function(suite, fn){\n  var total = this.grepTotal(suite)\n    , self = this\n    , i = 0;\n\n  debug('run suite %s', suite.fullTitle());\n\n  if (!total) return fn();\n\n  this.emit('suite', this.suite = suite);\n\n  function next(errSuite) {\n    if (errSuite) {\n      // current suite failed on a hook from errSuite\n      if (errSuite == suite) {\n        // if errSuite is current suite\n        // continue to the next sibling suite\n        return done();\n      } else {\n        // errSuite is among the parents of current suite\n        // stop execution of errSuite and all sub-suites\n        return done(errSuite);\n      }\n    }\n\n    if (self._abort) return done();\n\n    var curr = suite.suites[i++];\n    if (!curr) return done();\n    self.runSuite(curr, next);\n  }\n\n  function done(errSuite) {\n    self.suite = suite;\n    self.hook('afterAll', function(){\n      self.emit('suite end', suite);\n      fn(errSuite);\n    });\n  }\n\n  this.hook('beforeAll', function(err){\n    if (err) return done();\n    self.runTests(suite, next);\n  });\n};\n\n/**\n * Handle uncaught exceptions.\n *\n * @param {Error} err\n * @api private\n */\n\nRunner.prototype.uncaught = function(err){\n  if (err) {\n    debug('uncaught exception %s', err !== function () {\n      return this;\n    }.call(err) ? err : ( err.message || err ));\n  } else {\n    debug('uncaught undefined exception');\n    err = utils.undefinedError();\n  }\n  err.uncaught = true;\n\n  var runnable = this.currentRunnable;\n  if (!runnable) return;\n\n  runnable.clearTimeout();\n\n  // Ignore errors if complete\n  if (runnable.state) return;\n  this.fail(runnable, err);\n\n  // recover from test\n  if ('test' == runnable.type) {\n    this.emit('test end', runnable);\n    this.hookUp('afterEach', this.next);\n    return;\n  }\n\n  // bail on hooks\n  this.emit('end');\n};\n\n/**\n * Run the root suite and invoke `fn(failures)`\n * on completion.\n *\n * @param {Function} fn\n * @return {Runner} for chaining\n * @api public\n */\n\nRunner.prototype.run = function(fn){\n  var self = this,\n    rootSuite = this.suite;\n\n  fn = fn || function(){};\n\n  function uncaught(err){\n    self.uncaught(err);\n  }\n\n  function start() {\n    self.emit('start');\n    self.runSuite(rootSuite, function(){\n      debug('finished running');\n      self.emit('end');\n    });\n  }\n\n  debug('start');\n\n  // callback\n  this.on('end', function(){\n    debug('end');\n    process.removeListener('uncaughtException', uncaught);\n    fn(self.failures);\n  });\n\n  // uncaught exception\n  process.on('uncaughtException', uncaught);\n\n  if (this._delay) {\n    // for reporters, I guess.\n    // might be nice to debounce some dots while we wait.\n    this.emit('waiting', rootSuite);\n    rootSuite.once('run', start);\n  }\n  else {\n    start();\n  }\n\n  return this;\n};\n\n/**\n * Cleanly abort execution\n *\n * @return {Runner} for chaining\n * @api public\n */\nRunner.prototype.abort = function(){\n  debug('aborting');\n  this._abort = true;\n};\n\n/**\n * Filter leaks with the given globals flagged as `ok`.\n *\n * @param {Array} ok\n * @param {Array} globals\n * @return {Array}\n * @api private\n */\n\nfunction filterLeaks(ok, globals) {\n  return filter(globals, function(key){\n    // Firefox and Chrome exposes iframes as index inside the window object\n    if (/^d+/.test(key)) return false;\n\n    // in firefox\n    // if runner runs in an iframe, this iframe's window.getInterface method not init at first\n    // it is assigned in some seconds\n    if (global.navigator && /^getInterface/.test(key)) return false;\n\n    // an iframe could be approached by window[iframeIndex]\n    // in ie6,7,8 and opera, iframeIndex is enumerable, this could cause leak\n    if (global.navigator && /^\\d+/.test(key)) return false;\n\n    // Opera and IE expose global variables for HTML element IDs (issue #243)\n    if (/^mocha-/.test(key)) return false;\n\n    var matched = filter(ok, function(ok){\n      if (~ok.indexOf('*')) return 0 == key.indexOf(ok.split('*')[0]);\n      return key == ok;\n    });\n    return matched.length == 0 && (!global.navigator || 'onerror' !== key);\n  });\n}\n\n/**\n * Array of globals dependent on the environment.\n *\n * @return {Array}\n * @api private\n */\n\nfunction extraGlobals() {\n if (typeof(process) === 'object' &&\n     typeof(process.version) === 'string') {\n\n   var nodeVersion = process.version.split('.').reduce(function(a, v) {\n     return a << 8 | v;\n   });\n\n   // 'errno' was renamed to process._errno in v0.9.11.\n\n   if (nodeVersion < 0x00090B) {\n     return ['errno'];\n   }\n }\n\n return [];\n}\n\n}); // module: runner.js\n\nrequire.register(\"suite.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar EventEmitter = require('browser/events').EventEmitter\n  , debug = require('browser/debug')('mocha:suite')\n  , milliseconds = require('./ms')\n  , utils = require('./utils')\n  , Hook = require('./hook');\n\n/**\n * Expose `Suite`.\n */\n\nexports = module.exports = Suite;\n\n/**\n * Create a new `Suite` with the given `title`\n * and parent `Suite`. When a suite with the\n * same title is already present, that suite\n * is returned to provide nicer reporter\n * and more flexible meta-testing.\n *\n * @param {Suite} parent\n * @param {String} title\n * @return {Suite}\n * @api public\n */\n\nexports.create = function(parent, title){\n  var suite = new Suite(title, parent.ctx);\n  suite.parent = parent;\n  if (parent.pending) suite.pending = true;\n  title = suite.fullTitle();\n  parent.addSuite(suite);\n  return suite;\n};\n\n/**\n * Initialize a new `Suite` with the given\n * `title` and `ctx`.\n *\n * @param {String} title\n * @param {Context} ctx\n * @api private\n */\n\nfunction Suite(title, parentContext) {\n  this.title = title;\n  var context = function() {};\n  context.prototype = parentContext;\n  this.ctx = new context();\n  this.suites = [];\n  this.tests = [];\n  this.pending = false;\n  this._beforeEach = [];\n  this._beforeAll = [];\n  this._afterEach = [];\n  this._afterAll = [];\n  this.root = !title;\n  this._timeout = 2000;\n  this._enableTimeouts = true;\n  this._slow = 75;\n  this._bail = false;\n  this.delayed = false;\n}\n\n/**\n * Inherit from `EventEmitter.prototype`.\n */\n\nfunction F(){};\nF.prototype = EventEmitter.prototype;\nSuite.prototype = new F;\nSuite.prototype.constructor = Suite;\n\n\n/**\n * Return a clone of this `Suite`.\n *\n * @return {Suite}\n * @api private\n */\n\nSuite.prototype.clone = function(){\n  var suite = new Suite(this.title);\n  debug('clone');\n  suite.ctx = this.ctx;\n  suite.timeout(this.timeout());\n  suite.enableTimeouts(this.enableTimeouts());\n  suite.slow(this.slow());\n  suite.bail(this.bail());\n  return suite;\n};\n\n/**\n * Set timeout `ms` or short-hand such as \"2s\".\n *\n * @param {Number|String} ms\n * @return {Suite|Number} for chaining\n * @api private\n */\n\nSuite.prototype.timeout = function(ms){\n  if (0 == arguments.length) return this._timeout;\n  if (ms.toString() === '0') this._enableTimeouts = false;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('timeout %d', ms);\n  this._timeout = parseInt(ms, 10);\n  return this;\n};\n\n/**\n  * Set timeout `enabled`.\n  *\n  * @param {Boolean} enabled\n  * @return {Suite|Boolean} self or enabled\n  * @api private\n  */\n\nSuite.prototype.enableTimeouts = function(enabled){\n  if (arguments.length === 0) return this._enableTimeouts;\n  debug('enableTimeouts %s', enabled);\n  this._enableTimeouts = enabled;\n  return this;\n};\n\n/**\n * Set slow `ms` or short-hand such as \"2s\".\n *\n * @param {Number|String} ms\n * @return {Suite|Number} for chaining\n * @api private\n */\n\nSuite.prototype.slow = function(ms){\n  if (0 === arguments.length) return this._slow;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('slow %d', ms);\n  this._slow = ms;\n  return this;\n};\n\n/**\n * Sets whether to bail after first error.\n *\n * @param {Boolean} bail\n * @return {Suite|Number} for chaining\n * @api private\n */\n\nSuite.prototype.bail = function(bail){\n  if (0 == arguments.length) return this._bail;\n  debug('bail %s', bail);\n  this._bail = bail;\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` before running tests.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.beforeAll = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"before all\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._beforeAll.push(hook);\n  this.emit('beforeAll', hook);\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` after running tests.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.afterAll = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"after all\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._afterAll.push(hook);\n  this.emit('afterAll', hook);\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` before each test case.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.beforeEach = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"before each\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._beforeEach.push(hook);\n  this.emit('beforeEach', hook);\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` after each test case.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.afterEach = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"after each\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._afterEach.push(hook);\n  this.emit('afterEach', hook);\n  return this;\n};\n\n/**\n * Add a test `suite`.\n *\n * @param {Suite} suite\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.addSuite = function(suite){\n  suite.parent = this;\n  suite.timeout(this.timeout());\n  suite.enableTimeouts(this.enableTimeouts());\n  suite.slow(this.slow());\n  suite.bail(this.bail());\n  this.suites.push(suite);\n  this.emit('suite', suite);\n  return this;\n};\n\n/**\n * Add a `test` to this suite.\n *\n * @param {Test} test\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.addTest = function(test){\n  test.parent = this;\n  test.timeout(this.timeout());\n  test.enableTimeouts(this.enableTimeouts());\n  test.slow(this.slow());\n  test.ctx = this.ctx;\n  this.tests.push(test);\n  this.emit('test', test);\n  return this;\n};\n\n/**\n * Return the full title generated by recursively\n * concatenating the parent's full title.\n *\n * @return {String}\n * @api public\n */\n\nSuite.prototype.fullTitle = function(){\n  if (this.parent) {\n    var full = this.parent.fullTitle();\n    if (full) return full + ' ' + this.title;\n  }\n  return this.title;\n};\n\n/**\n * Return the total number of tests.\n *\n * @return {Number}\n * @api public\n */\n\nSuite.prototype.total = function(){\n  return utils.reduce(this.suites, function(sum, suite){\n    return sum + suite.total();\n  }, 0) + this.tests.length;\n};\n\n/**\n * Iterates through each suite recursively to find\n * all tests. Applies a function in the format\n * `fn(test)`.\n *\n * @param {Function} fn\n * @return {Suite}\n * @api private\n */\n\nSuite.prototype.eachTest = function(fn){\n  utils.forEach(this.tests, fn);\n  utils.forEach(this.suites, function(suite){\n    suite.eachTest(fn);\n  });\n  return this;\n};\n\n/**\n * This will run the root suite if we happen to be running in delayed mode.\n */\nSuite.prototype.run = function run() {\n  if (this.root) {\n    this.emit('run');\n  }\n};\n\n}); // module: suite.js\n\nrequire.register(\"test.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Runnable = require('./runnable');\n\n/**\n * Expose `Test`.\n */\n\nmodule.exports = Test;\n\n/**\n * Initialize a new `Test` with the given `title` and callback `fn`.\n *\n * @param {String} title\n * @param {Function} fn\n * @api private\n */\n\nfunction Test(title, fn) {\n  Runnable.call(this, title, fn);\n  this.pending = !fn;\n  this.type = 'test';\n}\n\n/**\n * Inherit from `Runnable.prototype`.\n */\n\nfunction F(){};\nF.prototype = Runnable.prototype;\nTest.prototype = new F;\nTest.prototype.constructor = Test;\n\n\n}); // module: test.js\n\nrequire.register(\"utils.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar fs = require('browser/fs')\n  , path = require('browser/path')\n  , basename = path.basename\n  , exists = fs.existsSync || path.existsSync\n  , glob = require('browser/glob')\n  , join = path.join\n  , debug = require('browser/debug')('mocha:watch');\n\n/**\n * Ignored directories.\n */\n\nvar ignore = ['node_modules', '.git'];\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {String} html\n * @return {String}\n * @api private\n */\n\nexports.escape = function(html){\n  return String(html)\n    .replace(/&/g, '&amp;')\n    .replace(/\"/g, '&quot;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n};\n\n/**\n * Array#forEach (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @param {Object} scope\n * @api private\n */\n\nexports.forEach = function(arr, fn, scope){\n  for (var i = 0, l = arr.length; i < l; i++)\n    fn.call(scope, arr[i], i);\n};\n\n/**\n * Array#map (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @param {Object} scope\n * @api private\n */\n\nexports.map = function(arr, fn, scope){\n  var result = [];\n  for (var i = 0, l = arr.length; i < l; i++)\n    result.push(fn.call(scope, arr[i], i, arr));\n  return result;\n};\n\n/**\n * Array#indexOf (<=IE8)\n *\n * @parma {Array} arr\n * @param {Object} obj to find index of\n * @param {Number} start\n * @api private\n */\n\nexports.indexOf = function(arr, obj, start){\n  for (var i = start || 0, l = arr.length; i < l; i++) {\n    if (arr[i] === obj)\n      return i;\n  }\n  return -1;\n};\n\n/**\n * Array#reduce (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @param {Object} initial value\n * @api private\n */\n\nexports.reduce = function(arr, fn, val){\n  var rval = val;\n\n  for (var i = 0, l = arr.length; i < l; i++) {\n    rval = fn(rval, arr[i], i, arr);\n  }\n\n  return rval;\n};\n\n/**\n * Array#filter (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @api private\n */\n\nexports.filter = function(arr, fn){\n  var ret = [];\n\n  for (var i = 0, l = arr.length; i < l; i++) {\n    var val = arr[i];\n    if (fn(val, i, arr)) ret.push(val);\n  }\n\n  return ret;\n};\n\n/**\n * Object.keys (<=IE8)\n *\n * @param {Object} obj\n * @return {Array} keys\n * @api private\n */\n\nexports.keys = Object.keys || function(obj) {\n  var keys = []\n    , has = Object.prototype.hasOwnProperty; // for `window` on <=IE8\n\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      keys.push(key);\n    }\n  }\n\n  return keys;\n};\n\n/**\n * Watch the given `files` for changes\n * and invoke `fn(file)` on modification.\n *\n * @param {Array} files\n * @param {Function} fn\n * @api private\n */\n\nexports.watch = function(files, fn){\n  var options = { interval: 100 };\n  files.forEach(function(file){\n    debug('file %s', file);\n    fs.watchFile(file, options, function(curr, prev){\n      if (prev.mtime < curr.mtime) fn(file);\n    });\n  });\n};\n\n/**\n * Array.isArray (<=IE8)\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\nvar isArray = Array.isArray || function (obj) {\n  return '[object Array]' == {}.toString.call(obj);\n};\n\n/**\n * @description\n * Buffer.prototype.toJSON polyfill\n * @type {Function}\n */\nif(typeof Buffer !== 'undefined' && Buffer.prototype) {\n  Buffer.prototype.toJSON = Buffer.prototype.toJSON || function () {\n    return Array.prototype.slice.call(this, 0);\n  };\n}\n\n/**\n * Ignored files.\n */\n\nfunction ignored(path){\n  return !~ignore.indexOf(path);\n}\n\n/**\n * Lookup files in the given `dir`.\n *\n * @return {Array}\n * @api private\n */\n\nexports.files = function(dir, ext, ret){\n  ret = ret || [];\n  ext = ext || ['js'];\n\n  var re = new RegExp('\\\\.(' + ext.join('|') + ')$');\n\n  fs.readdirSync(dir)\n    .filter(ignored)\n    .forEach(function(path){\n      path = join(dir, path);\n      if (fs.statSync(path).isDirectory()) {\n        exports.files(path, ext, ret);\n      } else if (path.match(re)) {\n        ret.push(path);\n      }\n    });\n\n  return ret;\n};\n\n/**\n * Compute a slug from the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nexports.slug = function(str){\n  return str\n    .toLowerCase()\n    .replace(/ +/g, '-')\n    .replace(/[^-\\w]/g, '');\n};\n\n/**\n * Strip the function definition from `str`,\n * and re-indent for pre whitespace.\n */\n\nexports.clean = function(str) {\n  str = str\n    .replace(/\\r\\n?|[\\n\\u2028\\u2029]/g, \"\\n\").replace(/^\\uFEFF/, '')\n    .replace(/^function *\\(.*\\)\\s*{|\\(.*\\) *=> *{?/, '')\n    .replace(/\\s+\\}$/, '');\n\n  var spaces = str.match(/^\\n?( *)/)[1].length\n    , tabs = str.match(/^\\n?(\\t*)/)[1].length\n    , re = new RegExp('^\\n?' + (tabs ? '\\t' : ' ') + '{' + (tabs ? tabs : spaces) + '}', 'gm');\n\n  str = str.replace(re, '');\n\n  return exports.trim(str);\n};\n\n/**\n * Trim the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nexports.trim = function(str){\n  return str.replace(/^\\s+|\\s+$/g, '');\n};\n\n/**\n * Parse the given `qs`.\n *\n * @param {String} qs\n * @return {Object}\n * @api private\n */\n\nexports.parseQuery = function(qs){\n  return exports.reduce(qs.replace('?', '').split('&'), function(obj, pair){\n    var i = pair.indexOf('=')\n      , key = pair.slice(0, i)\n      , val = pair.slice(++i);\n\n    obj[key] = decodeURIComponent(val);\n    return obj;\n  }, {});\n};\n\n/**\n * Highlight the given string of `js`.\n *\n * @param {String} js\n * @return {String}\n * @api private\n */\n\nfunction highlight(js) {\n  return js\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\\/\\/(.*)/gm, '<span class=\"comment\">//$1</span>')\n    .replace(/('.*?')/gm, '<span class=\"string\">$1</span>')\n    .replace(/(\\d+\\.\\d+)/gm, '<span class=\"number\">$1</span>')\n    .replace(/(\\d+)/gm, '<span class=\"number\">$1</span>')\n    .replace(/\\bnew[ \\t]+(\\w+)/gm, '<span class=\"keyword\">new</span> <span class=\"init\">$1</span>')\n    .replace(/\\b(function|new|throw|return|var|if|else)\\b/gm, '<span class=\"keyword\">$1</span>')\n}\n\n/**\n * Highlight the contents of tag `name`.\n *\n * @param {String} name\n * @api private\n */\n\nexports.highlightTags = function(name) {\n  var code = document.getElementById('mocha').getElementsByTagName(name);\n  for (var i = 0, len = code.length; i < len; ++i) {\n    code[i].innerHTML = highlight(code[i].innerHTML);\n  }\n};\n\n/**\n * If a value could have properties, and has none, this function is called, which returns\n * a string representation of the empty value.\n *\n * Functions w/ no properties return `'[Function]'`\n * Arrays w/ length === 0 return `'[]'`\n * Objects w/ no properties return `'{}'`\n * All else: return result of `value.toString()`\n *\n * @param {*} value Value to inspect\n * @param {string} [type] The type of the value, if known.\n * @returns {string}\n */\nvar emptyRepresentation = function emptyRepresentation(value, type) {\n  type = type || exports.type(value);\n\n  switch(type) {\n    case 'function':\n      return '[Function]';\n    case 'object':\n      return '{}';\n    case 'array':\n      return '[]';\n    default:\n      return value.toString();\n  }\n};\n\n/**\n * Takes some variable and asks `{}.toString()` what it thinks it is.\n * @param {*} value Anything\n * @example\n * type({}) // 'object'\n * type([]) // 'array'\n * type(1) // 'number'\n * type(false) // 'boolean'\n * type(Infinity) // 'number'\n * type(null) // 'null'\n * type(new Date()) // 'date'\n * type(/foo/) // 'regexp'\n * type('type') // 'string'\n * type(global) // 'global'\n * @api private\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString\n * @returns {string}\n */\nexports.type = function type(value) {\n  if (typeof Buffer !== 'undefined' && Buffer.isBuffer(value)) {\n    return 'buffer';\n  }\n  return Object.prototype.toString.call(value)\n    .replace(/^\\[.+\\s(.+?)\\]$/, '$1')\n    .toLowerCase();\n};\n\n/**\n * @summary Stringify `value`.\n * @description Different behavior depending on type of value.\n * - If `value` is undefined or null, return `'[undefined]'` or `'[null]'`, respectively.\n * - If `value` is not an object, function or array, return result of `value.toString()` wrapped in double-quotes.\n * - If `value` is an *empty* object, function, or array, return result of function\n *   {@link emptyRepresentation}.\n * - If `value` has properties, call {@link exports.canonicalize} on it, then return result of\n *   JSON.stringify().\n *\n * @see exports.type\n * @param {*} value\n * @return {string}\n * @api private\n */\n\nexports.stringify = function(value) {\n  var type = exports.type(value);\n\n  if (!~exports.indexOf(['object', 'array', 'function'], type)) {\n    if(type != 'buffer') {\n      return jsonStringify(value);\n    }\n    var json = value.toJSON();\n    // Based on the toJSON result\n    return jsonStringify(json.data && json.type ? json.data : json, 2)\n      .replace(/,(\\n|$)/g, '$1');\n  }\n\n  for (var prop in value) {\n    if (Object.prototype.hasOwnProperty.call(value, prop)) {\n      return jsonStringify(exports.canonicalize(value), 2).replace(/,(\\n|$)/g, '$1');\n    }\n  }\n\n  return emptyRepresentation(value, type);\n};\n\n/**\n * @description\n * like JSON.stringify but more sense.\n * @param {Object}  object\n * @param {Number=} spaces\n * @param {number=} depth\n * @returns {*}\n * @private\n */\nfunction jsonStringify(object, spaces, depth) {\n  if(typeof spaces == 'undefined') return _stringify(object);  // primitive types\n\n  depth = depth || 1;\n  var space = spaces * depth\n    , str = isArray(object) ? '[' : '{'\n    , end = isArray(object) ? ']' : '}'\n    , length = object.length || exports.keys(object).length\n    , repeat = function(s, n) { return new Array(n).join(s); }; // `.repeat()` polyfill\n\n  function _stringify(val) {\n    switch (exports.type(val)) {\n      case 'null':\n      case 'undefined':\n        val = '[' + val + ']';\n        break;\n      case 'array':\n      case 'object':\n        val = jsonStringify(val, spaces, depth + 1);\n        break;\n      case 'boolean':\n      case 'regexp':\n      case 'number':\n        val = val === 0 && (1/val) === -Infinity // `-0`\n          ? '-0'\n          : val.toString();\n        break;\n      case 'date':\n        val = '[Date: ' + val.toISOString() + ']';\n        break;\n      case 'buffer':\n        var json = val.toJSON();\n        // Based on the toJSON result\n        json = json.data && json.type ? json.data : json;\n        val = '[Buffer: ' + jsonStringify(json, 2, depth + 1) + ']';\n        break;\n      default:\n        val = (val == '[Function]' || val == '[Circular]')\n          ? val\n          : '\"' + val + '\"'; //string\n    }\n    return val;\n  }\n\n  for(var i in object) {\n    if(!object.hasOwnProperty(i)) continue;        // not my business\n    --length;\n    str += '\\n ' + repeat(' ', space)\n      + (isArray(object) ? '' : '\"' + i + '\": ') // key\n      +  _stringify(object[i])                   // value\n      + (length ? ',' : '');                     // comma\n  }\n\n  return str + (str.length != 1                    // [], {}\n    ? '\\n' + repeat(' ', --space) + end\n    : end);\n}\n\n/**\n * Return if obj is a Buffer\n * @param {Object} arg\n * @return {Boolean}\n * @api private\n */\nexports.isBuffer = function (arg) {\n  return typeof Buffer !== 'undefined' && Buffer.isBuffer(arg);\n};\n\n/**\n * @summary Return a new Thing that has the keys in sorted order.  Recursive.\n * @description If the Thing...\n * - has already been seen, return string `'[Circular]'`\n * - is `undefined`, return string `'[undefined]'`\n * - is `null`, return value `null`\n * - is some other primitive, return the value\n * - is not a primitive or an `Array`, `Object`, or `Function`, return the value of the Thing's `toString()` method\n * - is a non-empty `Array`, `Object`, or `Function`, return the result of calling this function again.\n * - is an empty `Array`, `Object`, or `Function`, return the result of calling `emptyRepresentation()`\n *\n * @param {*} value Thing to inspect.  May or may not have properties.\n * @param {Array} [stack=[]] Stack of seen values\n * @return {(Object|Array|Function|string|undefined)}\n * @see {@link exports.stringify}\n * @api private\n */\n\nexports.canonicalize = function(value, stack) {\n  var canonicalizedObj,\n    type = exports.type(value),\n    prop,\n    withStack = function withStack(value, fn) {\n      stack.push(value);\n      fn();\n      stack.pop();\n    };\n\n  stack = stack || [];\n\n  if (exports.indexOf(stack, value) !== -1) {\n    return '[Circular]';\n  }\n\n  switch(type) {\n    case 'undefined':\n    case 'buffer':\n    case 'null':\n      canonicalizedObj = value;\n      break;\n    case 'array':\n      withStack(value, function () {\n        canonicalizedObj = exports.map(value, function (item) {\n          return exports.canonicalize(item, stack);\n        });\n      });\n      break;\n    case 'function':\n      for (prop in value) {\n        canonicalizedObj = {};\n        break;\n      }\n      if (!canonicalizedObj) {\n        canonicalizedObj = emptyRepresentation(value, type);\n        break;\n      }\n    /* falls through */\n    case 'object':\n      canonicalizedObj = canonicalizedObj || {};\n      withStack(value, function () {\n        exports.forEach(exports.keys(value).sort(), function (key) {\n          canonicalizedObj[key] = exports.canonicalize(value[key], stack);\n        });\n      });\n      break;\n    case 'date':\n    case 'number':\n    case 'regexp':\n    case 'boolean':\n      canonicalizedObj = value;\n      break;\n    default:\n      canonicalizedObj = value.toString();\n  }\n\n  return canonicalizedObj;\n};\n\n/**\n * Lookup file names at the given `path`.\n */\nexports.lookupFiles = function lookupFiles(path, extensions, recursive) {\n  var files = [];\n  var re = new RegExp('\\\\.(' + extensions.join('|') + ')$');\n\n  if (!exists(path)) {\n    if (exists(path + '.js')) {\n      path += '.js';\n    } else {\n      files = glob.sync(path);\n      if (!files.length) throw new Error(\"cannot resolve path (or pattern) '\" + path + \"'\");\n      return files;\n    }\n  }\n\n  try {\n    var stat = fs.statSync(path);\n    if (stat.isFile()) return path;\n  }\n  catch (ignored) {\n    return;\n  }\n\n  fs.readdirSync(path).forEach(function(file) {\n    file = join(path, file);\n    try {\n      var stat = fs.statSync(file);\n      if (stat.isDirectory()) {\n        if (recursive) {\n          files = files.concat(lookupFiles(file, extensions, recursive));\n        }\n        return;\n      }\n    }\n    catch (ignored) {\n      return;\n    }\n    if (!stat.isFile() || !re.test(file) || basename(file)[0] === '.') return;\n    files.push(file);\n  });\n\n  return files;\n};\n\n/**\n * Generate an undefined error with a message warning the user.\n *\n * @return {Error}\n */\n\nexports.undefinedError = function() {\n  return new Error('Caught undefined error, did you throw without specifying what?');\n};\n\n/**\n * Generate an undefined error if `err` is not defined.\n *\n * @param {Error} err\n * @return {Error}\n */\n\nexports.getError = function(err) {\n  return err || exports.undefinedError();\n};\n\n\n/**\n * @summary\n * This Filter based on `mocha-clean` module.(see: `github.com/rstacruz/mocha-clean`)\n * @description\n * When invoking this function you get a filter function that get the Error.stack as an input,\n * and return a prettify output.\n * (i.e: strip Mocha, node_modules, bower and componentJS from stack trace).\n * @returns {Function}\n */\n\nexports.stackTraceFilter = function() {\n  var slash = '/'\n    , is = typeof document === 'undefined'\n      ? { node: true }\n      : { browser: true }\n    , cwd = is.node\n      ? process.cwd() + slash\n      : location.href.replace(/\\/[^\\/]*$/, '/');\n\n  function isNodeModule (line) {\n    return (~line.indexOf('node_modules'));\n  }\n\n  function isMochaInternal (line) {\n    return (~line.indexOf('node_modules' + slash + 'mocha'))  ||\n      (~line.indexOf('components' + slash + 'mochajs'))       ||\n      (~line.indexOf('components' + slash + 'mocha'));\n  }\n\n  // node_modules, bower, componentJS\n  function isBrowserModule(line) {\n    return (~line.indexOf('node_modules')) ||\n      (~line.indexOf('components'));\n  }\n\n  function isNodeInternal (line) {\n    return (~line.indexOf('(timers.js:')) ||\n      (~line.indexOf('(events.js:'))      ||\n      (~line.indexOf('(node.js:'))        ||\n      (~line.indexOf('(module.js:'))      ||\n      (~line.indexOf('GeneratorFunctionPrototype.next (native)')) ||\n      false\n  }\n\n  return function(stack) {\n    stack = stack.split('\\n');\n\n    stack = exports.reduce(stack, function(list, line) {\n      if (is.node && (isNodeModule(line) ||\n        isMochaInternal(line) ||\n        isNodeInternal(line)))\n        return list;\n\n      if (is.browser && (isBrowserModule(line)))\n        return list;\n\n      // Clean up cwd(absolute)\n      list.push(line.replace(cwd, ''));\n      return list;\n    }, []);\n\n    return stack.join('\\n');\n  }\n};\n}); // module: utils.js\n// The global object is \"self\" in Web Workers.\nvar global = (function() { return this; })();\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date;\nvar setTimeout = global.setTimeout;\nvar setInterval = global.setInterval;\nvar clearTimeout = global.clearTimeout;\nvar clearInterval = global.clearInterval;\n\n/**\n * Node shims.\n *\n * These are meant only to allow\n * mocha.js to run untouched, not\n * to allow running node code in\n * the browser.\n */\n\nvar process = {};\nprocess.exit = function(status){};\nprocess.stdout = {};\n\nvar uncaughtExceptionHandlers = [];\n\nvar originalOnerrorHandler = global.onerror;\n\n/**\n * Remove uncaughtException listener.\n * Revert to original onerror handler if previously defined.\n */\n\nprocess.removeListener = function(e, fn){\n  if ('uncaughtException' == e) {\n    if (originalOnerrorHandler) {\n      global.onerror = originalOnerrorHandler;\n    } else {\n      global.onerror = function() {};\n    }\n    var i = Mocha.utils.indexOf(uncaughtExceptionHandlers, fn);\n    if (i != -1) { uncaughtExceptionHandlers.splice(i, 1); }\n  }\n};\n\n/**\n * Implements uncaughtException listener.\n */\n\nprocess.on = function(e, fn){\n  if ('uncaughtException' == e) {\n    global.onerror = function(err, url, line){\n      fn(new Error(err + ' (' + url + ':' + line + ')'));\n      return true;\n    };\n    uncaughtExceptionHandlers.push(fn);\n  }\n};\n\n/**\n * Expose mocha.\n */\n\nvar Mocha = global.Mocha = require('mocha'),\n    mocha = global.mocha = new Mocha({ reporter: 'html' });\n\n// The BDD UI is registered by default, but no UI will be functional in the\n// browser without an explicit call to the overridden `mocha.ui` (see below).\n// Ensure that this default UI does not expose its methods to the global scope.\nmocha.suite.removeAllListeners('pre-require');\n\nvar immediateQueue = []\n  , immediateTimeout;\n\nfunction timeslice() {\n  var immediateStart = new Date().getTime();\n  while (immediateQueue.length && (new Date().getTime() - immediateStart) < 100) {\n    immediateQueue.shift()();\n  }\n  if (immediateQueue.length) {\n    immediateTimeout = setTimeout(timeslice, 0);\n  } else {\n    immediateTimeout = null;\n  }\n}\n\n/**\n * High-performance override of Runner.immediately.\n */\n\nMocha.Runner.immediately = function(callback) {\n  immediateQueue.push(callback);\n  if (!immediateTimeout) {\n    immediateTimeout = setTimeout(timeslice, 0);\n  }\n};\n\n/**\n * Function to allow assertion libraries to throw errors directly into mocha.\n * This is useful when running tests in a browser because window.onerror will\n * only receive the 'message' attribute of the Error.\n */\nmocha.throwError = function(err) {\n  Mocha.utils.forEach(uncaughtExceptionHandlers, function (fn) {\n    fn(err);\n  });\n  throw err;\n};\n\n/**\n * Override ui to ensure that the ui functions are initialized.\n * Normally this would happen in Mocha.prototype.loadFiles.\n */\n\nmocha.ui = function(ui){\n  Mocha.prototype.ui.call(this, ui);\n  this.suite.emit('pre-require', global, null, this);\n  return this;\n};\n\n/**\n * Setup mocha with the given setting options.\n */\n\nmocha.setup = function(opts){\n  if ('string' == typeof opts) opts = { ui: opts };\n  for (var opt in opts) this[opt](opts[opt]);\n  return this;\n};\n\n/**\n * Run mocha, returning the Runner.\n */\n\nmocha.run = function(fn){\n  var options = mocha.options;\n  mocha.globals('location');\n\n  var query = Mocha.utils.parseQuery(global.location.search || '');\n  if (query.grep) mocha.grep(new RegExp(query.grep));\n  if (query.fgrep) mocha.grep(query.fgrep);\n  if (query.invert) mocha.invert();\n\n  return Mocha.prototype.run.call(mocha, function(err){\n    // The DOM Document is not available in Web Workers.\n    var document = global.document;\n    if (document && document.getElementById('mocha') && options.noHighlighting !== true) {\n      Mocha.utils.highlightTags('code');\n    }\n    if (fn) fn(err);\n  });\n};\n\n/**\n * Expose the process shim.\n */\n\nMocha.process = process;\n})();\n";

},function(e,t,n){!function(t){"use strict";e.exports=t}(function(e,t){"use strict";function n(e){return"function"==typeof e&&"function"==typeof e.getCall&&"function"==typeof e.calledWithExactly}function r(e){return 1===e?"once":2===e?"twice":3===e?"thrice":(e||0)+" times"}function i(e){return e&&n(e.proxy)}function o(e){if(!n(e._obj)&&!i(e._obj))throw new TypeError(t.inspect(e._obj)+" is not a spy or a call to a spy!")}function a(e,t,r,i,o){function a(t){return e.printf.apply(e,t)}var s=i?"always have ":"have ";return r=r||"",n(e.proxy)&&(e=e.proxy),{affirmative:function(){return a(["expected %n to "+s+t+r].concat(o))},negative:function(){return a(["expected %n to not "+s+t].concat(o))}}}function s(n,r,i){t.addProperty(e.Assertion.prototype,n,function(){o(this);var e=a(this._obj,r,i,!1);this.assert(this._obj[n],e.affirmative,e.negative)})}function u(n,i,s){t.addMethod(e.Assertion.prototype,n,function(e){o(this);var t=a(this._obj,i,s,!1,[r(e)]);this.assert(this._obj[n]===e,t.affirmative,t.negative)})}function c(e,n,r){return function(){o(this);var i="always"+e[0].toUpperCase()+e.substring(1),s=t.flag(this,"always")&&"function"==typeof this._obj[i],u=s?i:e,c=a(this._obj,n,r,s,p.call(arguments));this.assert(this._obj[u].apply(this._obj,arguments),c.affirmative,c.negative)}}function l(n,r,i){var o=c(n,r,i);t.addProperty(e.Assertion.prototype,n,o)}function f(n,r,i,o){var a=c(r,i,o);t.addMethod(e.Assertion.prototype,n,a)}function h(e,t,n){f(e,e,t,n)}var p=Array.prototype.slice;t.addProperty(e.Assertion.prototype,"always",function(){t.flag(this,"always",!0)}),s("called","been called"," at least once, but it was never called"),u("callCount","been called exactly %1",", but it was called %c%C"),s("calledOnce","been called exactly once",", but it was called %c%C"),s("calledTwice","been called exactly twice",", but it was called %c%C"),s("calledThrice","been called exactly thrice",", but it was called %c%C"),l("calledWithNew","been called with new"),h("calledBefore","been called before %1"),h("calledAfter","been called after %1"),h("calledOn","been called with %1 as this",", but it was called with %t instead"),h("calledWith","been called with arguments %*","%C"),h("calledWithExactly","been called with exact arguments %*","%C"),h("calledWithMatch","been called with arguments matching %*","%C"),h("returned","returned %1"),f("thrown","threw","thrown %1")})},function(e,t,n){"use strict";t.spy=n(394),t.stub=n(395),t.spyCall=n(393),t.mock=n(440),t.expectation=n(439),t.collection=n(437),t.sandbox=n(441),t.createStubInstance=n(647),t.match=n(269);var r=n(362);t.match.equal=r;var i=n(648);t.log=i.log,t.logError=i.logError,t.restore=n(649),t.format=n(363),t.assert=n(645),t.test=n(442),t.testCase=n(650);var o=n(234);t.wrapMethod=n(397),t.deepEqual=n(362),t.extend=n(247),t.functionToString=o.toString,t.create=o.create;var a=n(438);t.getConfig=a.getConfig,t.defaultConfig=a.defaultConfig,t.timesInWords=n(396),t.typeOf=n(443)},function(e,t,n){(function(t){"use strict";function r(e){for(var t=1,n=e.length;n>t;t++)if(!e[t-1].calledBefore(e[t])||!e[t].called)return!1;return!0}function i(e){return e.sort(function(e,t){var n=e.getCall(0),r=t.getCall(0),i=n&&n.callId||-1,o=r&&r.callId||-1;return o>i?-1:1})}function o(){for(var e,t=0,n=arguments.length;n>t;++t)e=arguments[t],e||c.fail("fake is not a spy"),"function"!=typeof e&&c.fail(e+" is not a function"),"function"!=typeof e.getCall&&c.fail(e+" is not stubbed")}function a(e,t){e=e||d;var n=e.fail||c.fail;n.call(e,t)}function s(e,t,n){2==arguments.length&&(n=t,t=e),c[e]=function(r){o(r);var i=p.call(arguments,1),s=!1;s="function"==typeof t?!t(r):"function"==typeof r[t]?!r[t].apply(r,i):!r[t],s?a(this,r.printf.apply(r,[n].concat(i))):c.pass(e)}}function u(e,t){return!e||/^fail/.test(t)?t:e+t.slice(0,1).toUpperCase()+t.slice(1)}var c,l=n(396),f=n(269),h=n(363),p=Array.prototype.slice,d="undefined"==typeof t?window:t;c={failException:"AssertError",fail:function(e){var t=new Error(e);throw t.name=this.failException||c.failException,t},pass:function(e){},callOrder:function(){o.apply(null,arguments);var e="",t="";if(r(arguments))c.pass("callOrder");else{try{e=[].join.call(arguments,", ");for(var n=p.call(arguments),s=n.length;s;)n[--s].called||n.splice(s,1);t=i(n).join(", ")}catch(u){}a(this,"expected "+e+" to be called in order but were called as "+t)}},callCount:function(e,t){if(o(e),e.callCount!=t){var n="expected %n to be called "+l(t)+" but was called %c%C";a(this,e.printf(n))}else c.pass("callCount")},expose:function(e,t){if(!e)throw new TypeError("target is null or undefined");var n=t||{},r="undefined"==typeof n.prefix&&"assert"||n.prefix,i="undefined"==typeof n.includeFail||!!n.includeFail;for(var o in this)"expose"==o||!i&&/^(fail)/.test(o)||(e[u(r,o)]=this[o]);return e},match:function(e,t){var n=f(t);if(n.test(e))c.pass("match");else{var r=["expected value to match","    expected = "+h(t),"    actual = "+h(e)];a(this,r.join("\n"))}}},s("called","expected %n to have been called at least once but was never called"),s("notCalled",function(e){return!e.called},"expected %n to not have been called but was called %c%C"),s("calledOnce","expected %n to be called once but was called %c%C"),s("calledTwice","expected %n to be called twice but was called %c%C"),s("calledThrice","expected %n to be called thrice but was called %c%C"),s("calledOn","expected %n to be called with %1 as this but was called with %t"),s("alwaysCalledOn","expected %n to always be called with %1 as this but was called with %t"),s("calledWithNew","expected %n to be called with new"),s("alwaysCalledWithNew","expected %n to always be called with new"),s("calledWith","expected %n to be called with arguments %*%C"),s("calledWithMatch","expected %n to be called with match %*%C"),s("alwaysCalledWith","expected %n to always be called with arguments %*%C"),s("alwaysCalledWithMatch","expected %n to always be called with match %*%C"),s("calledWithExactly","expected %n to be called with exact arguments %*%C"),s("alwaysCalledWithExactly","expected %n to always be called with exact arguments %*%C"),s("neverCalledWith","expected %n to never be called with arguments %*%C"),s("neverCalledWithMatch","expected %n to never be called with match %*%C"),s("threw","%n did not throw exception%C"),s("alwaysThrew","%n did not always throw exception%C"),e.exports=c}).call(t,function(){return this}())},function(e,t,n){(function(t,r){"use strict";function i(e,t){return"string"==typeof e?(this.exception=new Error(t||""),this.exception.name=e):e?this.exception=e:this.exception=new Error("Error"),this}function o(e,t){var n=e.callArgAt;if(0>n){for(var r=e.callArgProp,i=0,o=t.length;o>i;++i){if(!r&&"function"==typeof t[i])return t[i];if(r&&t[i]&&"function"==typeof t[i][r])return t[i][r]}return null}return t[n]}function a(e,t,n){if(e.callArgAt<0){var r;return r=e.callArgProp?u.getName(e.stub)+" expected to yield to '"+e.callArgProp+"', but no object with such a property was passed.":u.getName(e.stub)+" expected to yield, but no callback was passed.",n.length>0&&(r+=" Received ["+f.call(n,", ")+"]"),r}return"argument at index "+e.callArgAt+" is not a function: "+t}function s(e,t){if("number"==typeof e.callArgAt){var n=o(e,t);if("function"!=typeof n)throw new TypeError(a(e,n,t));e.callbackAsync?h(function(){n.apply(e.callbackContext,e.callbackArguments)}):n.apply(e.callbackContext,e.callbackArguments)}}var u=n(234),c=n(247),l=Array.prototype.slice,f=Array.prototype.join,h=function(){return"object"==typeof t&&"function"==typeof t.nextTick?t.nextTick:"function"==typeof r?r:function(e){setTimeout(e,0)}}(),p={create:function(e){var t=c({},p);return delete t.create,t.stub=e,t},isPresent:function(){return"number"==typeof this.callArgAt||this.exception||"number"==typeof this.returnArgAt||this.returnThis||this.returnValueDefined},invoke:function(e,t){if(s(this,t),this.exception)throw this.exception;return"number"==typeof this.returnArgAt?t[this.returnArgAt]:this.returnThis?e:this.returnValue},onCall:function(e){return this.stub.onCall(e)},onFirstCall:function(){return this.stub.onFirstCall()},onSecondCall:function(){return this.stub.onSecondCall()},onThirdCall:function(){return this.stub.onThirdCall()},withArgs:function(){throw new Error('Defining a stub by invoking "stub.onCall(...).withArgs(...)" is not supported. Use "stub.withArgs(...).onCall(...)" to define sequential behavior for calls with certain arguments.')},callsArg:function(e){if("number"!=typeof e)throw new TypeError("argument index is not number");return this.callArgAt=e,this.callbackArguments=[],this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgOn:function(e,t){if("number"!=typeof e)throw new TypeError("argument index is not number");if("object"!=typeof t)throw new TypeError("argument context is not an object");return this.callArgAt=e,this.callbackArguments=[],this.callbackContext=t,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgWith:function(e){if("number"!=typeof e)throw new TypeError("argument index is not number");return this.callArgAt=e,this.callbackArguments=l.call(arguments,1),this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgOnWith:function(e,t){if("number"!=typeof e)throw new TypeError("argument index is not number");if("object"!=typeof t)throw new TypeError("argument context is not an object");return this.callArgAt=e,this.callbackArguments=l.call(arguments,2),this.callbackContext=t,this.callArgProp=void 0,this.callbackAsync=!1,this},yields:function(){return this.callArgAt=-1,this.callbackArguments=l.call(arguments,0),this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},yieldsOn:function(e){if("object"!=typeof e)throw new TypeError("argument context is not an object");return this.callArgAt=-1,this.callbackArguments=l.call(arguments,1),this.callbackContext=e,this.callArgProp=void 0,this.callbackAsync=!1,this},yieldsTo:function(e){return this.callArgAt=-1,this.callbackArguments=l.call(arguments,1),this.callbackContext=void 0,this.callArgProp=e,this.callbackAsync=!1,this},yieldsToOn:function(e,t){if("object"!=typeof t)throw new TypeError("argument context is not an object");return this.callArgAt=-1,this.callbackArguments=l.call(arguments,2),this.callbackContext=t,this.callArgProp=e,this.callbackAsync=!1,this},"throws":i,throwsException:i,returns:function(e){return this.returnValue=e,this.returnValueDefined=!0,this},returnsArg:function(e){if("number"!=typeof e)throw new TypeError("argument index is not number");return this.returnArgAt=e,this},returnsThis:function(){return this.returnThis=!0,this}};for(var d in p)p.hasOwnProperty(d)&&d.match(/^(callsArg|yields)/)&&!d.match(/Async/)&&(p[d+"Async"]=function(e){return function(){var t=this[e].apply(this,arguments);return this.callbackAsync=!0,t}}(d));e.exports=p}).call(t,n(1),n(270).setImmediate)},function(e,t,n){"use strict";var r=n(234),i=n(395);e.exports=function(e){if("function"!=typeof e)throw new TypeError("The constructor should be a function.");return i(r.create(e.prototype))}},function(e,t,n){"use strict";function r(){}function i(e,t){var n=e+" threw exception: ";r(n+"["+t.name+"] "+t.message),t.stack&&r(t.stack),i.setTimeout(function(){throw t.message=n+t.message,t},0)}var o=setTimeout;i.setTimeout=function(e,t){o(e,t)},t.log=r,t.logError=i},function(e,t,n){"use strict";function r(e){return"function"==typeof e&&"function"==typeof e.restore&&e.restore.sinon}e.exports=function(e){if(null!==e&&"object"==typeof e)for(var t in e)r(e[t])&&e[t].restore();else r(e)&&e.restore()}},function(e,t,n){"use strict";function r(e,t,n){return function(){t&&t.apply(this,arguments);var r,i;try{i=e.apply(this,arguments)}catch(o){r=o}if(n&&n.apply(this,arguments),r)throw r;return i}}function i(e,t){if(!e||"object"!=typeof e)throw new TypeError("sinon.testCase needs an object with test functions");t=t||"test";var n,i,a,s=new RegExp("^"+t),u={},c=e.setUp,l=e.tearDown;for(n in e)if(e.hasOwnProperty(n)){if(i=e[n],/^(setUp|tearDown)$/.test(n))continue;"function"==typeof i&&s.test(n)?(a=i,(c||l)&&(a=r(i,c,l)),u[n]=o(a)):u[n]=e[n]}return u}var o=n(442);e.exports=i},function(e,t,n){"use strict";var r=n(653);e.exports=function(){var e,t=Array.prototype.slice.call(arguments);e="string"==typeof t[0]?0:t.shift();var n=r.install(e||0,t);return n.restore=n.uninstall,n}},function(e,t,n){var r,i,o;(function(a){(!0&&n(385)&&function(a){i=[n(444)],r=a,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o))}||"object"==typeof e&&function(t){e.exports=t(n(444))}||function(e){this.formatio=e(this.samsam)})(function(e){"use strict";function t(e){if(!e)return"";if(e.displayName)return e.displayName;if(e.name)return e.name;var t=e.toString().match(/function\s+([^\(]+)/m);return t&&t[1]||""}function n(e,n){var r,i,o=t(n&&n.constructor),a=e.excludeConstructors||s.excludeConstructors||[];for(r=0,i=a.length;i>r;++r){if("string"==typeof a[r]&&a[r]===o)return"";if(a[r].test&&a[r].test(o))return""}return o}function r(e,t){if("object"!=typeof e)return!1;var n,r;for(n=0,r=t.length;r>n;++n)if(t[n]===e)return!0;return!1}function i(t,n,o,a){if("string"==typeof n){if(0===n.length)return"(empty string)";var s=t.quoteStrings,c="boolean"!=typeof s||s;return o||c?'"'+n+'"':n}if("function"==typeof n&&!(n instanceof RegExp))return i.func(n);if(o=o||[],r(n,o))return"[Circular]";if("[object Array]"===Object.prototype.toString.call(n))return i.array.call(t,n,o);if(!n)return String(1/n===-(1/0)?"-0":n);if(e.isElement(n))return i.element(n);if("function"==typeof n.toString&&n.toString!==Object.prototype.toString)return n.toString();var l,f;for(l=0,f=u.length;f>l;l++)if(n===u[l].object)return u[l].value;return i.object.call(t,n,o,a)}function o(e){for(var t in e)this[t]=e[t]}var s={excludeConstructors:["Object",/^.$/],quoteStrings:!0,limitChildrenCount:0},u=(Object.prototype.hasOwnProperty,[]);return"undefined"!=typeof a&&u.push({object:a,value:"[object global]"}),"undefined"!=typeof document&&u.push({object:document,value:"[object HTMLDocument]"}),"undefined"!=typeof window&&u.push({object:window,value:"[object Window]"}),i.func=function(e){return"function "+t(e)+"() {}"},i.array=function(e,t){t=t||[],t.push(e);var n,r,o=[];for(r=this.limitChildrenCount>0?Math.min(this.limitChildrenCount,e.length):e.length,n=0;r>n;++n)o.push(i(this,e[n],t));return r<e.length&&o.push("[... "+(e.length-r)+" more elements]"),"["+o.join(", ")+"]"},i.object=function(t,o,a){o=o||[],o.push(t),a=a||0;var s,u,c,l,f,h,p=[],d=e.keys(t).sort(),m=3;for(h=this.limitChildrenCount>0?Math.min(this.limitChildrenCount,d.length):d.length,l=0;h>l;++l)s=d[l],c=t[s],u=r(c,o)?"[Circular]":i(this,c,o,a+2),u=(/\s/.test(s)?'"'+s+'"':s)+": "+u,m+=u.length,p.push(u);var v=n(this,t),g=v?"["+v+"] ":"",y="";for(l=0,f=a;f>l;++l)y+=" ";return h<d.length&&p.push("[... "+(d.length-h)+" more elements]"),m+a>80?g+"{\n  "+y+p.join(",\n  "+y)+"\n"+y+"}":g+"{ "+p.join(", ")+" }"},i.element=function(e){var t,n,r,i,o,a=e.tagName.toLowerCase(),s=e.attributes,u=[];for(r=0,i=s.length;i>r;++r)t=s.item(r),n=t.nodeName.toLowerCase().replace("html:",""),o=t.nodeValue,("contenteditable"!==n||"inherit"!==o)&&o&&u.push(n+'="'+o+'"');var c="<"+a+(u.length>0?" ":""),l=e.innerHTML||"";l.length>20&&(l=l.substr(0,20)+"[...]");var f=c+u.join(" ")+">"+l+"</"+a+">";return f.replace(/ contentEditable="inherit"/,"")},o.prototype={functionName:t,configure:function(e){return new o(e)},constructorName:function(e){return n(this,e)},ascii:function(e,t,n){return i(this,e,t,n)}},o.prototype})}).call(t,function(){return this}())},function(module,exports,__webpack_require__){(function(setImmediate,clearImmediate,global){/**
	 * @author Christian Johansen (christian@cjohansen.no) and contributors
	 * @license BSD
	 *
	 * Copyright (c) 2010-2014 Christian Johansen
	 */
"use strict";function parseTime(e){if(!e)return 0;var t,n=e.split(":"),r=n.length,i=r,o=0;if(r>3||!/^(\d\d:){0,2}\d\d?$/.test(e))throw new Error("tick only understands numbers and 'h:m:s'");for(;i--;){if(t=parseInt(n[i],10),t>=60)throw new Error("Invalid time "+e);o+=t*Math.pow(60,r-i-1)}return 1e3*o}function getEpoch(e){if(!e)return 0;if("function"==typeof e.getTime)return e.getTime();if("number"==typeof e)return e;throw new TypeError("now should be milliseconds since UNIX epoch")}function inRange(e,t,n){return n&&n.callAt>=e&&n.callAt<=t}function mirrorDateProperties(e,t){t.now?e.now=function(){return e.clock.now}:delete e.now,t.toSource?e.toSource=function(){return t.toSource()}:delete e.toSource,e.toString=function(){return t.toString()},e.prototype=t.prototype,e.parse=t.parse,e.UTC=t.UTC,e.prototype.toUTCString=t.prototype.toUTCString;for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function createDate(){function e(t,n,r,i,o,a,s){switch(arguments.length){case 0:return new NativeDate(e.clock.now);case 1:return new NativeDate(t);case 2:return new NativeDate(t,n);case 3:return new NativeDate(t,n,r);case 4:return new NativeDate(t,n,r,i);case 5:return new NativeDate(t,n,r,i,o);case 6:return new NativeDate(t,n,r,i,o,a);default:return new NativeDate(t,n,r,i,o,a,s)}}return mirrorDateProperties(e,NativeDate)}function addTimer(e,t){if("undefined"==typeof t.func)throw new Error("Callback must be provided to timer calls");return e.timers||(e.timers={}),t.id=id++,t.createdAt=e.now,t.callAt=e.now+(t.delay||0),e.timers[t.id]=t,addTimerReturnsObject?{id:t.id,ref:function(){},unref:function(){}}:t.id}function firstTimerInRange(e,t,n){var r=e.timers,i=null;for(var o in r)inRange(t,n,r[o])&&(!i||~compareTimers(i,r[o]))&&(i=r[o]);return i}function compareTimers(e,t){return e.callAt<t.callAt?-1:e.callAt>t.callAt?1:e.immediate&&!t.immediate?-1:!e.immediate&&t.immediate?1:e.createdAt<t.createdAt?-1:e.createdAt>t.createdAt?1:e.id<t.id?-1:e.id>t.id?1:void 0}function callTimer(clock,timer){"number"==typeof timer.interval?clock.timers[timer.id].callAt+=timer.interval:delete clock.timers[timer.id];try{"function"==typeof timer.func?timer.func.apply(null,timer.args):eval(timer.func)}catch(e){var exception=e}if(clock.timers[timer.id]){if(exception)throw exception}else if(exception)throw exception}function uninstall(e,t){for(var n,r=0,i=e.methods.length;i>r;r++)if(n=e.methods[r],t[n].hadOwnProperty)t[n]=e["_"+n];else try{delete t[n]}catch(o){}e.methods=[]}function hijackMethod(e,t,n){if(n[t].hadOwnProperty=Object.prototype.hasOwnProperty.call(e,t),n["_"+t]=e[t],"Date"==t){var r=mirrorDateProperties(n[t],e[t]);e[t]=r}else{e[t]=function(){return n[t].apply(n,arguments)};for(var i in n[t])n[t].hasOwnProperty(i)&&(e[t][i]=n[t][i])}e[t].clock=n}var timeoutResult=setTimeout(function(){},0),addTimerReturnsObject="object"==typeof timeoutResult;clearTimeout(timeoutResult);var NativeDate=Date,id=1,timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setImmediate:"undefined"!=typeof setImmediate?setImmediate:void 0,clearImmediate:"undefined"!=typeof clearImmediate?clearImmediate:void 0,setInterval:setInterval,clearInterval:clearInterval,Date:Date},keys=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};exports.timers=timers;var createClock=exports.createClock=function(e){var t={now:getEpoch(e),timeouts:{},Date:createDate()};return t.Date.clock=t,t.setTimeout=function(e,n){return addTimer(t,{func:e,args:Array.prototype.slice.call(arguments,2),delay:n})},t.clearTimeout=function(e){e&&(t.timers||(t.timers=[]),"object"==typeof e&&(e=e.id),e in t.timers&&delete t.timers[e])},t.setInterval=function(e,n){return addTimer(t,{func:e,args:Array.prototype.slice.call(arguments,2),delay:n,interval:n})},t.clearInterval=function(e){t.clearTimeout(e)},t.setImmediate=function(e){return addTimer(t,{func:e,args:Array.prototype.slice.call(arguments,1),immediate:!0})},t.clearImmediate=function(e){t.clearTimeout(e)},t.tick=function(e){e="number"==typeof e?e:parseTime(e);for(var n,r=t.now,i=t.now+e,o=t.now,a=firstTimerInRange(t,r,i);a&&i>=r;){if(t.timers[a.id]){r=t.now=a.callAt;try{callTimer(t,a)}catch(s){n=n||s}}a=firstTimerInRange(t,o,i),o=r}if(t.now=i,n)throw n;return t.now},t.reset=function(){t.timers={}},t};exports.install=function(e,t,n){"number"==typeof e&&(n=t,t=e,e=null),e||(e=global);var r=createClock(t);r.uninstall=function(){uninstall(r,e)},r.methods=n||[],0===r.methods.length&&(r.methods=keys(timers));for(var i=0,o=r.methods.length;o>i;i++)hijackMethod(e,r.methods[i],r);return r}}).call(exports,__webpack_require__(270).setImmediate,__webpack_require__(270).clearImmediate,function(){return this}())},function(e,t,n){var r=n(537);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(568);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},function(e,t,n){var r=n(654);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},,function(e,t,n){var r=n(685);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r,{})},,,,,function(e,t,n){n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(468),n(469),n(470),n(471),n(472),n(473),n(474),n(475),n(476),n(477),n(478)},,function(e,t,n){"use strict";function r(e){s.call(this,e,{name:"AnalyserNode",numberOfInputs:1,numberOfOutputs:1,channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers"});var t=2048,n=function(){return this.fftSize>>1},r=-100,o=30,a=.8;i.defineAttribute(this,"fftSize",u,t,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"frequencyBinCount","readonly",n,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"minDecibels","number",r,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"maxDecibels","number",o,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"smoothingTimeConstant","number",a,function(e){throw new TypeError(i.formatter.concat(this,e))})}var i=n(35),o=n(118),a=n(34),s=n(98),u="enum { 32, 64, 128, 256, 512, 1024, 2048 }",c=function(){throw new TypeError("Illegal constructor: use audioContext.createAnalyser()")};i.inherits(c,s),i.inherits(r,c),r.exports=c,r.jsonAttrs=["fftSize","minDecibels","maxDecibels","smoothingTimeConstant"],c.prototype.getFloatFrequencyData=function(){var e=new o(this,"getFloatFrequencyData",[{name:"array",type:"Float32Array"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)})},c.prototype.getByteFrequencyData=function(){var e=new o(this,"getByteFrequencyData",[{name:"array",type:"Uint8Array"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)})},c.prototype.getByteTimeDomainData=function(){var e=new o(this,"getByteTimeDomainData",[{name:"array",type:"Uint8Array"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)})},e.exports=a.AnalyserNode=r},function(e,t,n){"use strict";function r(e){s.call(this,e,{name:"AudioBufferSourceNode",numberOfInputs:0,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var t=null,n=new u(this,"playbackRate",1,0,1024),r=!1,o=0,a=0,c=null;i.defineAttribute(this,"buffer","AudioBuffer|null",t,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"playbackRate","readonly",n,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"loop","boolean",r,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"loopStart","number",o,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"loopEnd","number",a,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"onended","function|null",c,function(e){throw new TypeError(i.formatter.concat(this,e))}),Object.defineProperties(this,{$state:{get:function(){return this.$stateAtTime(this.context.currentTime)}}}),this._startTime=1/0,this._stopTime=1/0,this._firedOnEnded=!1}var i=n(35),o=n(118),a=n(34),s=n(98),u=n(250),c=n(398),l=function(){throw new TypeError("Illegal constructor: use audioContext.createBufferSource()")};i.inherits(l,s),i.inherits(r,l),r.exports=l,r.jsonAttrs=["buffer","playbackRate","loop","loopStart","loopEnd"],l.prototype.start=function(e){var t=new o(this,"start",[{name:"when",type:"optional number"},{name:"offset",type:"optional number"},{name:"duration",type:"optional number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)}),t.assert(this._startTime===1/0,function(){throw new Error(t.form+"; cannot start more than once")}),this._startTime=i.defaults(e,0)},l.prototype.stop=function(e){var t=new o(this,"stop",[{name:"when",type:"optional number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)}),t.assert(this._startTime!==1/0,function(){throw new Error(t.form+"; cannot call stop without calling start first")}),t.assert(this._stopTime===1/0,function(){throw new Error(t.form+"; cannot stop more than once")}),this._stopTime=e},r.prototype.$stateAtTime=function(e){if(e=i.toSeconds(e),this._startTime===1/0)return"UNSCHEDULED";if(e<this._startTime)return"SCHEDULED";var t=this._stopTime;return!this.loop&&this.buffer&&(t=Math.min(t,this._startTime+this.buffer.duration)),t>e?"PLAYING":"FINISHED"},r.prototype._process=function(){this._firedOnEnded||"FINISHED"!==this.$stateAtTime(this.context.currentTime)||(this.dispatchEvent(new c("ended",this)),this._firedOnEnded=!0)},e.exports=a.AudioBufferSourceNode=r},function(e,t,n){"use strict";function r(e){a.call(this,"audioprocess",e),Object.defineProperties(this,{$name:{value:"AudioProcessingEvent"},$node:{value:e}})}var i=n(35),o=n(34),a=n(398),s=function(){throw new TypeError("Illegal constructor")};i.inherits(s,a),i.inherits(r,s),r.exports=s,e.exports=o.AudioProcessingEvent=r},function(e,t,n){"use strict";function r(e){s.call(this,e,{name:"BiquadFilterNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var t="lowpass",n=new u(this,"frequency",350,10,e.sampleRate/2),r=new u(this,"detune",0,-4800,4800),o=new u(this,"Q",1,1e-4,1e3),a=new u(this,"gain",0,-40,40);i.defineAttribute(this,"type",c,t,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"frequency","readonly",n,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"detune","readonly",r,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"Q","readonly",o,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"gain","readonly",a,function(e){throw new TypeError(i.formatter.concat(this,e))})}var i=n(35),o=n(118),a=n(34),s=n(98),u=n(250),c="enum { lowpass, highpass, bandpass, lowshelf, highshelf, peaking, notch, allpass }",l=function(){throw new TypeError("Illegal constructor: use audioContext.createBiquadFilter()")};i.inherits(l,s),i.inherits(r,l),r.exports=l,r.jsonAttrs=["type","frequency","detune","Q","gain"],l.prototype.getFrequencyResponse=function(){var e=new o(this,"getFrequencyResponse",[{name:"frequencyHz",type:"Float32Array"},{name:"magResponse",type:"Float32Array"},{name:"phaseResponse",type:"Float32Array"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)})},e.exports=a.BiquadFilterNode=r},function(e,t,n){"use strict";function r(e,t){a.call(this,e,{name:"ChannelMergerNode",numberOfInputs:t,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"})}var i=n(35),o=n(34),a=n(98),s=function(){throw new TypeError("Illegal constructor: use audioContext.createChannelMerger([numberOfInputs: number])")};i.inherits(s,a),i.inherits(r,s),r.exports=s,e.exports=o.ChannelMergerNode=r},function(e,t,n){"use strict";function r(e,t){a.call(this,e,{name:"ChannelSplitterNode",numberOfInputs:1,numberOfOutputs:t,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"})}var i=n(35),o=n(34),a=n(98),s=function(){throw new TypeError("Illegal constructor: use audioContext.createChannelSplitter([numberOfOutputs: number])")};i.inherits(s,a),i.inherits(r,s),r.exports=s,e.exports=o.ChannelSplitterNode=r},function(e,t,n){"use strict";function r(e){a.call(this,e,{name:"ConvolverNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers"});var t=null,n=!0;i.defineAttribute(this,"buffer","AudioBuffer|null",t,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"normalize","boolean",n,function(e){throw new TypeError(i.formatter.concat(this,e))})}var i=n(35),o=n(34),a=n(98),s=function(){throw new TypeError("Illegal constructor: use audioContext.createConvolver()")};i.inherits(s,a),i.inherits(r,s),r.exports=s,r.jsonAttrs=["normalize"],e.exports=o.ConvolverNode=r},function(e,t,n){"use strict";function r(e,t){a.call(this,e,{name:"DelayNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var n=new s(this,"delayTime",0,0,t);i.defineAttribute(this,"delayTime","readonly",n,function(e){throw new TypeError(i.formatter.concat(this,e))}),Object.defineProperties(this,{$maxDelayTime:{value:t}})}var i=n(35),o=n(34),a=n(98),s=n(250),u=function(){throw new TypeError("Illegal constructor: use audioContext.createDelay([maxDelayTime: number])")};i.inherits(u,a),i.inherits(r,u),r.exports=u,r.jsonAttrs=["delayTime"],e.exports=o.DelayNode=r},function(e,t,n){"use strict";function r(e){a.call(this,e,{name:"DynamicsCompressorNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"});var t=new s(this,"threshold",-24,-100,0),n=new s(this,"knee",30,0,40),r=new s(this,"ratio",12,1,20),o=new s(this,"reduction",0,-20,0),u=new s(this,"attack",.003,0,1),c=new s(this,"release",.25,0,1);i.defineAttribute(this,"threshold","readonly",t,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"knee","readonly",n,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"ratio","readonly",r,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"reduction","readonly",o,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"attack","readonly",u,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"release","readonly",c,function(e){throw new TypeError(i.formatter.concat(this,e))})}var i=n(35),o=n(34),a=n(98),s=n(250),u=function(){throw new TypeError("Illegal constructor: use audioContext.createDynamicsCompressor()")};i.inherits(u,a),i.inherits(r,u),r.exports=u,r.jsonAttrs=["threshold","knee","ratio","reduction","attack","release"],e.exports=o.DynamicsCompressorNode=r},function(e,t,n){(function(t){"use strict";function r(){}var i=n(35),o=n(34),a=n(384);"undefined"==typeof t.Element&&(t.Element=function(){throw new TypeError("Illegal constructor")},i.inherits(t.Element,a)),i.inherits(r,t.Element),e.exports=o.Element=r}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){a.call(this,e,{name:"GainNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var t=new s(this,"gain",1,0,1);i.defineAttribute(this,"gain","readonly",t,function(e){throw new TypeError(i.formatter.concat(this,e))})}var i=n(35),o=n(34),a=n(98),s=n(250),u=function(){throw new TypeError("Illegal constructor: use audioContext.createGain()")};i.inherits(u,a),i.inherits(r,u),r.exports=u,r.jsonAttrs=["gain"],e.exports=o.GainNode=r},function(e,t,n){(function(t){"use strict";function r(){}var i=n(35),o=n(34),a=n(704);"undefined"==typeof t.HTMLElement&&(t.HTMLElement=function(){throw new TypeError("Illegal constructor")},i.inherits(t.HTMLElement,a)),i.inherits(r,t.HTMLElement),e.exports=o.HTMLElement=r}).call(t,function(){return this}())},function(e,t,n){(function(t){"use strict";function r(){}var i=n(35),o=n(34),a=n(706);"undefined"==typeof t.HTMLMediaElement&&(t.HTMLMediaElement=function(){throw new TypeError("Illegal constructor")},i.inherits(t.HTMLMediaElement,a)),i.inherits(r,t.HTMLMediaElement),e.exports=o.HTMLMediaElement=r}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){a.call(this,e,{name:"MediaElementAudioSourceNode",numberOfInputs:0,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"})}var i=n(35),o=n(34),a=n(98),s=function(){throw new TypeError("Illegal constructor: use audioContext.createMediaElementSource(mediaElement: HTMLMediaElement)")};i.inherits(s,a),i.inherits(r,s),r.exports=s,e.exports=o.MediaElementAudioSourceNode=r},function(e,t,n){(function(t){"use strict";function r(){}var i=n(35),o=n(34),a=n(384);"undefined"==typeof t.MediaStream&&(t.MediaStream=function(){throw new TypeError("Illegal constructor")},i.inherits(t.MediaStream,a)),i.inherits(r,t.MediaStream),e.exports=o.MediaStream=r}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){a.call(this,e,{name:"MediaStreamAudioDestinationNode",numberOfInputs:1,numberOfOutputs:0,channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"})}var i=n(35),o=n(34),a=n(98),s=function(){throw new TypeError("Illegal constructor: use audioContext.createMediaStreamDestination()")};i.inherits(s,a),i.inherits(r,s),r.exports=s,e.exports=o.MediaStreamAudioDestinationNode=r},function(e,t,n){"use strict";function r(e){a.call(this,e,{name:"MediaStreamAudioSourceNode",numberOfInputs:0,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"})}var i=n(35),o=n(34),a=n(98),s=function(){throw new TypeError("Illegal constructor: use audioContext.createMediaStreamSource(mediaStream: MediaStream)")};i.inherits(s,a),i.inherits(r,s),r.exports=s,e.exports=o.MediaStreamAudioSourceNode=r},function(e,t,n){"use strict";function r(e){a.call(this,"complete",e),Object.defineProperties(this,{$name:{value:"OfflineAudioCompletionEvent"},$node:{value:e}})}var i=n(35),o=n(34),a=n(398),s=function(){throw new TypeError("Illegal constructor")};i.inherits(s,a),i.inherits(r,s),r.exports=s,e.exports=o.OfflineAudioCompletionEvent=r},function(e,t,n){"use strict";function r(e,t,n){if(!(this instanceof r))throw new TypeError("Failed to construct 'AudioContext': Please use the 'new' operator");f.call(this);var a=new o(this,null,[{name:"numberOfChannels",type:"number"},{name:"length",type:"number"},{name:"sampleRate",type:"number"}]);a.validateArguments(arguments,function(e){throw new TypeError(a.form+"; "+e)});var s=new c(this),u=function(){return this._microCurrentTime/1e6},h=new l(this),p=null;i.defineAttribute(this,"destination","readonly",s,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"sampleRate","readonly",n,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"currentTime","readonly",u,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"listener","readonly",h,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"oncomplete","function|null",p,function(e){throw new TypeError(i.formatter.concat(this,e))}),Object.defineProperties(this,{$name:{value:"OfflineAudioContext"},$context:{value:this}}),this._microCurrentTime=0,this._processedSamples=0,this._tick=0,this._numberOfChannels=e,this._length=t,this._rendering=!1}var i=n(35),o=n(118),a=n(34),s=n(445),u=n(405),c=n(446),l=n(447),f=n(384),h=n(712);i.inherits(r,s),r.prototype.startRendering=function(){var e=new o(this,"startRendering",[]);e.assert(!this._rendering,function(){throw Error(e.form+"; must only be called one time")}),this._rendering=!0},r.prototype._process=function(e){if(this._rendering&&!(this._length<=this._processedSamples)){for(var t=this._microCurrentTime+e;this._microCurrentTime<t;){var n=Math.min(this._microCurrentTime+1e3,t),r=Math.floor(n/1e6*this.sampleRate),i=r-this._processedSamples;if(this.destination.$process(i,++this._tick),this._microCurrentTime=n,this._processedSamples=r,this._length<=this._processedSamples)break}if(this._length<=this._processedSamples){var o=new h(this);o.renderedBuffer=new u(this,this._numberOfChannels,this._length,this.sampleRate),this.dispatchEvent(o)}}},e.exports=a.OfflineAudioContext=r},function(e,t,n){"use strict";function r(e){s.call(this,e,{name:"OscillatorNode",numberOfInputs:0,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var t="sine",n=new u(this,"frequency",440,0,1e5),r=new u(this,"detune",0,-4800,4800),o=null;Object.defineProperty(this,"type",{get:function(){return this._custom?"custom":this._type},set:function(e){if(!i.typeCheck(e,l)){var t="";throw t+="type ",t+=i.formatter.shouldBeButGot(l,e),new TypeError(i.formatter.concat(this,t))}this._type=e},enumerable:!0}),i.defineAttribute(this,"frequency","readonly",n,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"detune","readonly",r,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"onended","function|null",o,function(e){throw new TypeError(i.formatter.concat(this,e))}),Object.defineProperties(this,{$state:{get:function(){return this.$stateAtTime(this.context.currentTime)}},$custom:{get:function(){return this._custom}}}),this._type=t,this._custom=null,this._startTime=1/0,this._stopTime=1/0,this._firedOnEnded=!1}var i=n(35),o=n(118),a=n(34),s=n(98),u=n(250),c=n(398),l="enum { sine, square, sawtooth, triangle }",f=function(){throw new TypeError("Illegal constructor: use audioContext.createOscillator()")};i.inherits(f,s),i.inherits(r,f),r.exports=f,r.jsonAttrs=["type","frequency","detune"],f.prototype.start=function(e){var t=new o(this,"start",[{name:"when",type:"optional number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)}),t.assert(this._startTime===1/0,function(){throw new Error(t.form+"; cannot start more than once")}),this._startTime=i.defaults(e,0)},f.prototype.stop=function(e){var t=new o(this,"stop",[{name:"when",type:"optional number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)}),t.assert(this._startTime!==1/0,function(){throw new Error(t.form+"; cannot call stop without calling start first")}),t.assert(this._stopTime===1/0,function(){throw new Error(t.form+"; cannot stop more than once")}),this._stopTime=i.defaults(e,0)},f.prototype.setPeriodicWave=function(e){var t=new o(this,"setPeriodicWave",[{name:"periodicWave",type:"PeriodicWave"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)}),this._type="custom",this._custom=e},r.prototype.$stateAtTime=function(e){return e=i.toSeconds(e),this._startTime===1/0?"UNSCHEDULED":e<this._startTime?"SCHEDULED":e<this._stopTime?"PLAYING":"FINISHED"},r.prototype._process=function(){this._firedOnEnded||"FINISHED"!==this.$stateAtTime(this.context.currentTime)||(this.dispatchEvent(new c("ended",this)),this._firedOnEnded=!0)},e.exports=a.OscillatorNode=r},function(e,t,n){"use strict";function r(e){s.call(this,e,{name:"PannerNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers"});var t="HRTF",n="inverse",r=1,o=1e4,a=1,l=360,f=360,h=0;i.defineAttribute(this,"panningModel",u,t,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"distanceModel",c,n,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"refDistance","number",r,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"maxDistance","number",o,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"rolloffFactor","number",a,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"coneInnerAngle","number",l,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"coneOuterAngle","number",f,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"coneOuterGain","number",h,function(e){throw new TypeError(i.formatter.concat(this,e))})}var i=n(35),o=n(118),a=n(34),s=n(98),u="enum { equalpower, HRTF }",c="enum { linear, inverse, exponential }",l=function(){throw new TypeError("Illegal constructor: use audioContext.createPanner()")};i.inherits(l,s),i.inherits(r,l),r.exports=l,r.jsonAttrs=["panningModel","distanceModel","refDistance","maxDistance","rolloffFactor","coneInnerAngle","coneOuterAngle","coneOuterGain"],l.prototype.setPosition=function(){var e=new o(this,"setPosition",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)})},l.prototype.setOrientation=function(){var e=new o(this,"setOrientation",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)})},l.prototype.setVelocity=function(){var e=new o(this,"setVelocity",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)})},e.exports=a.PannerNode=r},function(e,t,n){"use strict";function r(e,t){Object.defineProperties(this,{$name:{value:"PeriodicWave"},$real:{value:e},$imag:{value:t}})}var i=n(35),o=n(34),a=function(){throw new TypeError("Illegal constructor")};i.inherits(r,a),r.exports=a,e.exports=o.PeriodicWave=r},function(e,t,n){"use strict";function r(e,t,n,r){a.call(this,e,{name:"ScriptProcessorNode",numberOfInputs:1,numberOfOutputs:1,channelCount:n,channelCountMode:"max",channelInterpretation:"speakers"});var o=null;i.defineAttribute(this,"numberOfInputChannels","readonly",n,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"numberOfOutputChannels","readonly",r,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"bufferSize","readonly",t,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"onaudioprocess","function|null",o,function(e){throw new TypeError(i.formatter.concat(this,e))}),this._numSamples=0}var i=n(35),o=n(34),a=n(98),s=n(405),u=n(697),c=function(){throw new TypeError("Illegal constructor: use audioContext.createScriptProcessor(bufferSize: number, [numberOfInputChannels: number], [numberOfOutputChannels: number])")};i.inherits(c,a),i.inherits(r,c),r.exports=c,r.prototype._process=function(e){if(this._numSamples-=e,this._numSamples<=0){this._numSamples+=this.bufferSize;var t=new u(this);t.playbackTime=this.context.currentTime+this.bufferSize/this.context.sampleRate,t.inputBuffer=new s(this.context,this.numberOfInputChannels,this.bufferSize,this.context.sampleRate),t.outputBuffer=new s(this.context,this.numberOfOutputChannels,this.bufferSize,this.context.sampleRate),this.dispatchEvent(t)}},e.exports=o.ScriptProcessorNode=r},function(e,t,n){"use strict";function r(e){a.call(this,e,{name:"WaveShaperNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var t=null,n="none";i.defineAttribute(this,"curve","Float32Array|null",t,function(e){throw new TypeError(i.formatter.concat(this,e))}),i.defineAttribute(this,"oversample",s,n,function(e){throw new TypeError(i.formatter.concat(this,e))})}var i=n(35),o=n(34),a=n(98),s="enum { none, 2x, 4x }",u=function(){throw new TypeError("Illegal constructor: use audioContext.createWaveShaper()")};i.inherits(u,a),i.inherits(r,u),r.exports=u,r.jsonAttrs=["oversample"],e.exports=o.WaveShaperNode=r},function(e,t,n){(function(t){"use strict";var n={};n.AnalyserNode=t.AnalyserNode,n.AudioBuffer=t.AudioBuffer,n.AudioBufferSourceNode=t.AudioBufferSourceNode,n.AudioContext=t.AudioContext||t.webkitAudioContext,n.AudioDestinationNode=t.AudioDestinationNode,n.AudioListener=t.AudioListener,n.AudioNode=t.AudioNode,n.AudioParam=t.AudioParam,n.AudioProcessingEvent=t.AudioProcessingEvent,n.BiquadFilterNode=t.BiquadFilterNode,n.ChannelMergerNode=t.ChannelMergerNode,n.ChannelSplitterNode=t.ChannelSplitterNode,n.ConvolverNode=t.ConvolverNode,n.DelayNode=t.DelayNode,n.DynamicsCompressorNode=t.DynamicsCompressorNode,n.GainNode=t.GainNode,n.MediaElementAudioSourceNode=t.MediaElementAudioSourceNode,n.MediaStreamAudioDestinationNode=t.MediaStreamAudioDestinationNode,n.MediaStreamAudioSourceNode=t.MediaStreamAudioSourceNode,n.OfflineAudioCompletionEvent=t.OfflineAudioCompletionEvent,n.OfflineAudioContext=t.OfflineAudioContext||t.webkitOfflineAudioContext,n.OscillatorNode=t.OscillatorNode,n.PannerNode=t.PannerNode,n.PeriodicWave=t.PeriodicWave,n.ScriptProcessorNode=t.ScriptProcessorNode,n.WaveShaperNode=t.WaveShaperNode,e.exports=n}).call(t,function(){return this}())},function(e,t,n){(function(t){"use strict";if(!t.WEB_AUDIO_TEST_API_IGNORE){n(445),n(713);var r=n(34);r.use(),e.exports=t.WebAudioTestAPI=r}}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){t=t.filter(function(t,n){return!(/^optional/.test(t)&&e.length<=n)}),t=t.map(function(e){return e.replace(/^optional\s*/,"")});for(var n=0,r=t.length;r>n;n++)if(!i(e[n],t[n]))return n;return-1}var i=n(408);e.exports=r},function(e,t,n){"use strict";function r(e,t){return"undefined"!=typeof e?e:t}e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r,a){var s={enumerable:!0};"function"==typeof r?(n="readonly",s.get=r):s.get=function(){return r},"readonly"===n?s.set=function(){a.call(e,t+" is readonly")}:s.set=function(s){i(s,n)?r=s:a.call(e,t+" "+o.shouldBeButGot(n,s))},Object.defineProperty(e,t,s)}var i=n(408),o=n(407);e.exports=r},function(e,t,n){"use strict";function r(e,t){t&&(e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}e.exports=r},function(e,t,n){"use strict";function r(e){return e+=1,{1:"1st",2:"2nd",3:"3rd"}[e]||e+"th"}e.exports=r},function(e,t,n){"use strict";function r(e){if(!e)return String(e);var t=typeof e;if("number"===t||"boolean"===t)return String(e);if("string"===t)return"'"+e+"'";if(Array.isArray(e))return"[ "+e.map(r).join(", ")+" ]";if(e.constructor==={}.constructor)return"{ "+Object.keys(e).map(function(t){return t+": "+r(e[t])}).join(", ")+"}";var n=e.constructor.name||Object.prototype.toString.call(e).slice(8,-1);return i(n)+" "+n}var i=n(406);e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r;return n=n||[],-1!==n.indexOf(e)?"<circular:"+i(e)+">":(n.push(e),r=t(e,n),n.pop(),r)}var i=n(448);e.exports=r},function(e,t,n){"use strict";function r(e){return i(e)/1e6}var i=n(449);e.exports=r}]);
//# sourceMappingURL=testMode-aada032542355af67443.js.map