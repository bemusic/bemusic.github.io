(this.webpackJsonp=this.webpackJsonp||[]).push([[15],{104:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(633));t.uniq=i.default;var o=r(n(634));t.map=o.default;var a=r(n(635));t.values=a.default;var s=r(n(636));t.assign=s.default},109:function(e,t,n){"use strict";t.a=function(e){return{as:function(t){return new Promise(function(n,r){var i=new FileReader;switch(i.onload=function(){n(i.result)},i.onerror=function(){r(new Error("Unable to read from Blob"))},t){case"arraybuffer":i.readAsArrayBuffer(e);break;case"text":i.readAsText(e)}})}}}},116:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"e",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return u});var r=n(86);function i(e,t){if(!t)return function(){};var n=0;return t.report(0,e),function(r){return t.report(++n,e,r)}}function o(e,t){return e?Promise.resolve(t).tap(function(t){t&&t.byteLength?(e.formatter=r.a,e.report(t.byteLength,t.byteLength)):e.report(1,1)}):t}function a(e,t){var n=0,r=0;return function(){return e.report(n,++r),Promise.resolve(t.apply(this,arguments)).tap(function(){return e.report(++n,r)})}}function s(e,t){return e.watch(function(){return t.report(e.current,e.total,e.extra)})}function u(e){var t,n,r=[];function i(){t&&e.report(t.current,t.total,t.extra),r.length>0&&(!t||t.progress>=1)&&function(e){if(t===e)return;n&&(n(),n=null);(t=e)&&(n=t.watch(i))}(r.shift())}return{add:function(e){r.push(e),i()}}}},118:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(272));t.Reader=i;var o=r(n(274));t.Compiler=o;var a=n(43);t.BMSChart=a.BMSChart;var s=n(163);t.BMSHeaders=s.BMSHeaders;var u=n(164);t.BMSObjects=u.BMSObjects;var c=n(75);t.Speedcore=c.Speedcore;var f=n(165);t.TimeSignatures=f.TimeSignatures;var l=n(276);t.Notes=l.Notes;var h=n(279);t.Timing=h.Timing;var d=n(280);t.SongInfo=d.SongInfo;var p=n(281);t.Keysounds=p.Keysounds;var m=n(282);t.Positioning=m.Positioning;var v=n(283);t.Spacing=v.Spacing},161:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return f}),n.d(t,"d",function(){return m});var r=n(186),i=n(109);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var u=.001,c=document.createElement("audio");function f(e){return"probably"===c.canPlayType(e)}var l=function(){function e(t){o(this,e),this._audioContext=t||r.a,this._samples=[],this._groups=[],this._instances=new Set,this._destination=this._audioContext.destination}return s(e,[{key:"unmute",value:function(){m(this._audioContext)}},{key:"destroy",value:function(){if(!this._destroyed){this._destroyed=!0;var e=!0,t=!1,n=void 0;try{for(var r,i=this._samples[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}var o=!0,a=!1,s=void 0;try{for(var u,c=this._instances[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){u.value.destroy()}}catch(e){a=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}this._samples=null,this._instances=null}}},{key:"decode",value:function(e){var t=this;return this._coerceToArrayBuffer(e).then(function(e){return t._decodeAudio(e)})}},{key:"sample",value:function(e){var t=this;return(e.numberOfChannels?Promise.resolve(e):t.decode(e)).then(function(e){if(t._destroyed)throw new Error("SamplingMaster already destroyed!");var n=new d(t,e);return t._samples.push(n),n})}},{key:"group",value:function(e){var t=new h(this,e);return this._groups.push(t),t}},{key:"_coerceToArrayBuffer",value:function(e){return e instanceof ArrayBuffer?Promise.resolve(e):Object(i.a)(e).as("arraybuffer")}},{key:"_decodeAudio",value:function(e){var t=this;return new Promise(function(n,r){t.audioContext.decodeAudioData(e,function(e){n(e)},function(e){r(new Error("Unable to decode audio: "+e))})})}},{key:"_startPlaying",value:function(e){this._instances.add(e)}},{key:"_stoppedPlaying",value:function(e){this._instances.delete(e)}},{key:"audioContext",get:function(){return this._audioContext}},{key:"destination",get:function(){return this._destination}}]),e}(),h=function(){function e(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).volume;o(this,e),this._master=t,this._gain=this._master.audioContext.createGain(),null!=n&&(this._gain.gain.value=n),this._gain.connect(this._master.destination)}return s(e,[{key:"destroy",value:function(){this._gain.disconnect(),this._gain=null}},{key:"destination",get:function(){return this._gain}}]),e}(),d=function(){function e(t,n){o(this,e),this._master=t,this._buffer=n}return s(e,[{key:"play",value:function(e,t){return new p(this._master,this._buffer,e,t)}},{key:"destroy",value:function(){this._master=null,this._buffer=null}}]),e}(),p=function(){function e(t,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};o(this,e),r=r||0,this._master=t;var s=t.audioContext,c=s.createBufferSource();c.buffer=n,c.onended=function(){return i.stop()};var f=s.createGain();c.connect(f);var l=a.node||a.group&&a.group.destination||t.destination;f.connect(l),this._source=c,this._gain=this.TEST_node=f;var h=r?Math.max(0,s.currentTime+r):0,d=a.start||0,p=d>0,m=!1;if(p&&f.gain.setValueAtTime(0,0),void 0!==a.end){var v=Math.max(a.end-d,0);c.start(h,d,v+u),m=s.currentTime+r+v}else c.start(h,d);p&&(f.gain.setValueAtTime(0,s.currentTime+r),f.gain.linearRampToValueAtTime(1,s.currentTime+r+u)),!1!==m&&(f.gain.setValueAtTime(1,m),f.gain.linearRampToValueAtTime(0,m+u)),this._master._startPlaying(this)}return s(e,[{key:"stop",value:function(){this._source&&(this._source.stop(0),this._source.disconnect(),this._gain.disconnect(),this._source=null,this._gain=null,this._master._stoppedPlaying(this),this.onstop&&this.onstop())}},{key:"bad",value:function(){this._source&&(this._source.playbackRate.value=Math.random()<.5?Math.pow(2,1/24):Math.pow(2,-1/24))}},{key:"destroy",value:function(){this.stop()}}]),e}();function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a,t=e.createGain(),n=e.createOscillator();n.frequency.value=440,n.start(e.currentTime+.1),n.stop(e.currentTime+.1),t.connect(e.destination),t.disconnect();try{e.resume()}catch(e){console.error("[sampling-master] Cannot resume AudioContext",e)}}t.c=l},162:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.match=function(e){var t=!1;return{when:function(n,r){if(t)return this;var i=e.match(n);return i&&(t=!0,r(i)),this},else:function(e){if(t)return this;e()}}}},163:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._data={},this._dataAll={}}return e.prototype.each=function(e){for(var t in this._data)e(t,this._data[t])},e.prototype.get=function(e){return this._data[e.toLowerCase()]},e.prototype.getAll=function(e){return this._dataAll[e.toLowerCase()]},e.prototype.set=function(e,t){var n=e.toLowerCase();this._data[n]=t,(this._dataAll[n]||(this._dataAll[n]=[])).push(t)},e}();t.BMSHeaders=r},164:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._objects=[]}return e.prototype.add=function(e){if("01"!==e.channel)for(var t=0;t<this._objects.length;t++){var n=this._objects[t];if(n.channel===e.channel&&n.measure===e.measure&&n.fraction===e.fraction)return void(this._objects[t]=e)}this._objects.push(e)},e.prototype.all=function(){return this._objects.slice()},e.prototype.allSorted=function(){var e=this.all();return e.sort(function(e,t){return e.measure+e.fraction-(t.measure+t.fraction)}),e},e}();t.BMSObjects=r},165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._values={}}return e.prototype.set=function(e,t){this._values[e]=t},e.prototype.get=function(e){return this._values[e]||1},e.prototype.getBeats=function(e){return 4*this.get(e)},e.prototype.measureToBeat=function(e,t){for(var n=0,r=0;r<e;r++)n+=this.getBeats(r);return n+this.getBeats(e)*t},e}();t.TimeSignatures=r},186:function(e,t,n){"use strict";var r=n(271),i=n.n(r);t.a=i()({latencyHint:"interaction"})},2012:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"main",function(){return d});n(2013);var r=n(70),i=n.n(r),o=n(118),a=n(537),s=n(161),u=n(77),c=n.n(u),f=n(186),l=n(2015),h=n.n(l);function d(t){i()(t).text("Technical Demo!").on("click",function n(){!function(){var t=i()(h()()).appendTo("body");t.find(".js-play").hide(),t.on("dragover",function(){return!1}).on("drop",function(n){n.preventDefault();var r=new a.a(n.originalEvent);return function(t,n){var r=new s.c(f.a),a=n.find(".js-log"),u=n.find(".js-play").hide(),l=n.find(".js-sampler");function h(e){a.text(e)}function d(e,n){var i={},o=[],a=0,s=!0,u=!1,c=void 0;try{for(var f,l=function(){var e=f.value,s=e.keysound;s in i||(i[s]=null,o.push(function(e){return"string"!=typeof e?Promise.reject(new Error("Empty name")):t.file(e).catch(function(){return t.file(e.replace(/\.\w+$/,".ogg"))}).catch(function(){return t.file(e.replace(/\.\w+$/,".mp3"))}).catch(function(){return t.file(e.replace(/\.\w+$/,".wav"))}).then(function(e){return e.read()})}(n.headers.get("wav"+s)).then(function(e){return r.sample(e)}).then(function(e){return i[s]=e}).catch(function(e){return console.error("Unable to load "+s+": "+e)}).tap(function(){return h("[loaded "+ ++a+"/"+o.length+" samples]")})))},d=e.all()[Symbol.iterator]();!(s=(f=d.next()).done);s=!0)l()}catch(e){u=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(u)throw c}}return Promise.all(o).then(function(){return i})}c()(regeneratorRuntime.mark(function n(){var a,s,c,f,p,m,v,b,_,g;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return h("Loading file list"),n.next=3,t.fileList;case 3:return a=n.sent,h("Loading "+(s=a.filter(function(e){return e.match(/\.(?:bms|bme|bml|pms)$/i)})[0])),n.next=8,t.file(s);case 8:return n.next=10,n.sent.read();case 10:return c=n.sent,f=e.from(new Uint8Array(c)),n.next=14,Promise.promisify(o.Reader.readAsync)(f);case 14:return p=n.sent,m=o.Compiler.compile(p).chart,v=o.Timing.fromBMSChart(m),b=o.Notes.fromBMSChart(m),_=o.SongInfo.fromBMSChart(m),i()("<pre wrap></pre>").text(JSON.stringify(_,null,2)).appendTo(l),h("Loading samples"),n.next=23,d(b,m);case 23:return g=n.sent,h("Click the button to play!"),n.next=27,new Promise(function(e){u.show(),u.on("click",function(){e(),u.hide()})});case 27:!function(){r.unmute();var e=!0,t=!1,n=void 0;try{for(var o,a=function(){var e=o.value;setTimeout(function(){var t=g[e.keysound];if(t){var n=i()("<span></span>").text("["+e.keysound+"] ").appendTo(l),r=t.play();l[0].scrollTop=l[0].scrollHeight,r.onstop=function(){n.addClass("is-off")}}else console.log("warn: unknown sample "+e.keysound)},1e3*v.beatToSeconds(e.beat))},s=b.all()[Symbol.iterator]();!(e=(o=s.next()).done);e=!0)a()}catch(e){t=!0,n=e}finally{try{e||null==s.return||s.return()}finally{if(t)throw n}}}();case 28:case"end":return n.stop()}},n,this)})).done()}(r,t),!1})}();i()(t).off("click",n);i()(t).hide();return!1})}}.call(this,n(313).Buffer)},2013:function(e,t,n){var r=n(2014);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(e.exports=r.locals)},2014:function(e,t,n){(e.exports=n(1)(!1)).push([e.i,".jukebox--overlay {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: rgba(139, 134, 133, 0.5);\n}\n\n.jukebox--inner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  border: 2px solid #8b8685;\n  background: #252423;\n  padding: 12px;\n}\n\n.jukebox--sampler {\n  background: #090807;\n  padding: 9px;\n  border: 1px solid #8b8685;\n  margin-top: 10px;\n  height: 192px;\n  width: 40em;\n  overflow: auto;\n}\n\n.jukebox--sampler span {\n  font-size: 12px;\n  opacity: 1;\n  transition: 0.5s opacity;\n}\n\n.jukebox--sampler span.is-off {\n  color: #8b8685;\n  opacity: 0;\n}\n\n.jukebox h1 {\n  margin: 0 0 20px;\n  font: 30px Helvetica Neue, Helvetica, sans-serif;\n}\n\n.jukebox p {\n  margin: 10px 0 0;\n}\n\n.jukebox .jukebox--status {\n  color: #8b8685;\n  font-style: italic;\n  margin-bottom: 20px;\n}\n\n.jukebox button {\n  display: block;\n  box-sizing: border-box;\n  width: 100%;\n  background: #090807;\n  color: #7f3;\n  cursor: pointer;\n  border: 1px solid #8b8685;\n  padding: 8px;\n  font: bold 15px verdana, sans-serif;\n  margin-top: 18px;\n}\n",""])},2015:function(e,t,n){n(7);e.exports=function(e){var t=[];return t.push('<div class="jukebox"><div class="jukebox--overlay"></div><div class="jukebox--inner"><h1>BMS Jukebox</h1><p class="jukebox--status js-log">Waiting for BMS file...</p><p>Google Chrome: Drag a BMS folder into this box.</p><p>Firefox, Safari: Select all files (BMS+sounds) and drag into this box.</p><button class="js-play">Click Here to Play</button><div class="js-sampler jukebox--sampler"></div></div></div>'),t.join("")}},272:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(631);t.read=function(e){throw new Error("Synchronous read unsupported in browser!")},t.readAsync=function(e,t,n){n||(n=t,t=null);var i=t&&t.forceEncoding||r.detect(e),o=new FileReader;o.onload=function(){n(null,o.result)},o.onerror=function(){n(new Error("cannot read it"))},o.readAsText(new Blob([e]),i)};var i=n(273);t.getReaderOptionsFromFilename=i.getReaderOptionsFromFilename},273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReaderOptionsFromFilename=function(e){var t;return e.match(/\.sjis\.\w+$/i)&&(t="Shift-JIS"),e.match(/\.euc_kr\.\w+$/i)&&(t="EUC-KR"),e.match(/\.utf8\.\w+$/i)&&(t="UTF-8"),{forceEncoding:t}}},274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(162),i=n(43),o={bms:{random:/^#RANDOM\s+(\d+)$/i,if:/^#IF\s+(\d+)$/i,endif:/^#ENDIF$/i,timeSignature:/^#(\d\d\d)02:(\S*)$/,channel:/^#(?:EXT\s+#)?(\d\d\d)(\S\S):(\S*)$/,header:/^#(\w+)(?:\s+(\S.*))?$/},dtx:{random:/^#RANDOM\s+(\d+)$/i,if:/^#IF\s+(\d+)$/i,endif:/^#ENDIF$/i,timeSignature:/^#(\d\d\d)02:\s*(\S*)$/,channel:/^#(?:EXT\s+#)?(\d\d\d)(\S\S):\s*(\S*)$/,header:/^#(\w+):(?:\s+(\S.*))?$/}};t.compile=function(e,t){t=t||{};var n=new i.BMSChart,a=t.rng||function(e){return 1+Math.floor(Math.random()*e)},s=o[t.format]||o.bms,u=[],c=[!1],f={headerSentences:0,channelSentences:0,controlSentences:0,skippedSentences:0,malformedSentences:0,chart:n,warnings:[]};return function(e,t){e.split(/\r\n|\r|\n/).map(function(e){return e.trim()}).forEach(function(e,n){t(e,n+1)})}(e,function(e,t){var i=!0;if("#"===e.charAt(0)&&(r.match(e).when(s.random,function(e){f.controlSentences+=1,u.push(a(+e[1]))}).when(s.if,function(e){f.controlSentences+=1,c.push(u[u.length-1]!==+e[1])}).when(s.endif,function(e){f.controlSentences+=1,c.pop()}).else(function(){i=!1}),!i)){var o=c[c.length-1];r.match(e).when(s.timeSignature,function(e){f.channelSentences+=1,o||n.timeSignatures.set(+e[1],+e[2])}).when(s.channel,function(e){f.channelSentences+=1,o||function(e,t,r,i){var o=Math.floor(r.length/2);if(0!==o)for(var a=0;a<o;a++){var s=r.substr(2*a,2),u=a/o;"00"!==s&&n.objects.add({measure:e,fraction:u,value:s,channel:t,lineNumber:i})}}(+e[1],e[2],e[3],t)}).when(s.header,function(e){f.headerSentences+=1,o||n.headers.set(e[1],e[2])}).else(function(){!function(e,t){f.warnings.push({lineNumber:e,message:t})}(t,"Invalid command")})}}),f}},275:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(110));t.Segment=new i.default({t:"number",x:"number",dx:"number"})},276:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(277),a=r(n(82)),s=i(n(278)),u=n(43),c=function(){function e(e){e.forEach(o.Note),this._notes=e}return e.prototype.count=function(){return this._notes.length},e.prototype.all=function(){return this._notes.slice()},e.fromBMSChart=function(t,n){u.BMSChart;var r=(n=n||{}).mapping||e.CHANNEL_MAPPING.IIDX_P1;return new f(t,{mapping:r}).build()},e}();t.Notes=c,c.CHANNEL_MAPPING=s;var f=function(){function e(e,t){this._chart=e,a.default(t.mapping,"Expected options.mapping"),a.default("object"==typeof t.mapping,"options.mapping must be object"),this._mapping=t.mapping}return e.prototype.build=function(){return this._notes=[],this._activeLN={},this._lastNote={},this._lnObj=(this._chart.headers.get("lnobj")||"").toLowerCase(),this._channelMapping=this._mapping,this._objects=this._chart.objects.allSorted(),this._objects.forEach(function(e){this._handle(e)}.bind(this)),new c(this._notes)},e.prototype._handle=function(e){if("01"===e.channel)this._handleNormalNote(e);else switch(e.channel.charAt(0)){case"1":case"2":this._handleNormalNote(e);break;case"5":case"6":this._handleLongNote(e)}},e.prototype._handleNormalNote=function(e){var t=this._normalizeChannel(e.channel),n=this._getBeat(e);if(e.value.toLowerCase()===this._lnObj)this._lastNote[t]&&(this._lastNote[t].endBeat=n);else{var r={beat:n,endBeat:void 0,keysound:e.value,column:this._getColumn(t)};this._lastNote[t]=r,this._notes.push(r)}},e.prototype._handleLongNote=function(e){var t=this._normalizeChannel(e.channel),n=this._getBeat(e);if(this._activeLN[t]){var r=this._activeLN[t];r.endBeat=n,this._notes.push(r),delete this._activeLN[t]}else this._activeLN[t]={beat:n,keysound:e.value,column:this._getColumn(t)}},e.prototype._getBeat=function(e){return this._chart.measureToBeat(e.measure,e.fraction)},e.prototype._getColumn=function(e){return this._channelMapping[e]},e.prototype._normalizeChannel=function(e){return e.replace(/^5/,"1").replace(/^6/,"2")},e}()},277:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(110));t.Note=new i.default({beat:"number",endBeat:i.default.maybe("number"),column:i.default.maybe("string"),keysound:"string"})},278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IIDX_P1={11:"1",12:"2",13:"3",14:"4",15:"5",18:"6",19:"7",16:"SC"}},279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(75),i=n(104),o=n(43),a={bpm:1,stop:2},s=function(){function e(e,t){var n={bpm:e,beat:0,seconds:0},o=[];o.push({t:0,x:0,dx:n.bpm/60,bpm:n.bpm,inclusive:!0}),(t=t.slice()).sort(function(e,t){return e.beat-t.beat||a[e.type]-a[t.type]}),t.forEach(function(e){var t=e.beat,r=n.seconds+60*(t-n.beat)/n.bpm;switch(e.type){case"bpm":n.bpm=e.bpm,o.push({t:r,x:t,dx:n.bpm/60,bpm:n.bpm,inclusive:!0});break;case"stop":o.push({t:r,x:t,dx:0,bpm:n.bpm,inclusive:!0}),r+=60*(e.stopBeats||0)/n.bpm,o.push({t:r,x:t,dx:n.bpm/60,bpm:n.bpm,inclusive:!1});break;default:throw new Error("Unrecognized segment object!")}n.beat=t,n.seconds=r}),this._speedcore=new r.Speedcore(o),this._eventBeats=i.uniq(i.map(t,"beat"),!0)}return e.prototype.beatToSeconds=function(e){return this._speedcore.t(e)},e.prototype.secondsToBeat=function(e){return this._speedcore.x(e)},e.prototype.bpmAtBeat=function(e){return this._speedcore.segmentAtX(e).bpm},e.prototype.getEventBeats=function(){return this._eventBeats},e.fromBMSChart=function(t){o.BMSChart;var n=[];return t.objects.all().forEach(function(e){var r,i=t.measureToBeat(e.measure,e.fraction);if("03"===e.channel)r=parseInt(e.value,16),n.push({type:"bpm",beat:i,bpm:r});else if("08"===e.channel)r=+t.headers.get("bpm"+e.value),isNaN(r)||n.push({type:"bpm",beat:i,bpm:r});else if("09"===e.channel){var o=t.headers.get("stop"+e.value)/48;n.push({type:"stop",beat:i,stopBeats:o})}}),new e(+t.headers.get("bpm")||60,n)},e}();t.Timing=s},280:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(162),i=n(104),o=n(43),a=function(){function e(e){this.title="NO TITLE",this.artist="NO ARTIST",this.genre="NO GENRE",this.subtitles=[],this.subartists=[],this.difficulty=0,this.level=0,e&&i.assign(this,e)}return e.fromBMSChart=function(t){o.BMSChart;var n={},i=t.headers.get("title"),a=t.headers.get("artist"),s=t.headers.get("genre"),u=+t.headers.get("difficulty"),c=+t.headers.get("playlevel"),f=t.headers.getAll("subtitle"),l=t.headers.getAll("subartist");if("string"==typeof i&&!f){var h=function(e){i=e[1],f=[e[2]]};r.match(i).when(/^(.*\S)\s*-(.+?)-$/,h).when(/^(.*\S)\s*～(.+?)～$/,h).when(/^(.*\S)\s*\((.+?)\)$/,h).when(/^(.*\S)\s*\[(.+?)\]$/,h).when(/^(.*\S)\s*<(.+?)>$/,h)}return i&&(n.title=i),a&&(n.artist=a),s&&(n.genre=s),f&&(n.subtitles=f),l&&(n.subartists=l),u&&(n.difficulty=u),c&&(n.level=c),new e(n)},e}();t.SongInfo=a},281:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(104),i=n(43),o=function(){function e(e){this._map=e}return e.prototype.get=function(e){return this._map[e.toLowerCase()]},e.prototype.files=function(){return r.uniq(r.values(this._map))},e.prototype.all=function(){return this._map},e.fromBMSChart=function(t){i.BMSChart;var n={};return t.headers.each(function(e,t){var r=e.match(/^wav(\S\S)$/i);r&&(n[r[1].toLowerCase()]=t)}),new e(n)},e}();t.Keysounds=o},282:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(75),i=n(43),o=function(){function e(e){this._speedcore=new r.Speedcore(e)}return e.prototype.speed=function(e){return this._speedcore.dx(e)},e.prototype.position=function(e){return this._speedcore.x(e)},e.fromBMSChart=function(t){i.BMSChart;var n=[],r=0;return n.push({t:0,x:r,dx:1,inclusive:!0}),t.objects.allSorted().forEach(function(e){if("SC"===e.channel){var i=t.measureToBeat(e.measure,e.fraction),o=+t.headers.get("scroll"+e.value);if(isNaN(o))return;var a=n[n.length-1];r+=(i-a.t)*a.dx,0===i&&1===n.length?n[0].dx=o:n.push({t:i,x:r,dx:o,inclusive:!0})}}),new e(n)},e}();t.Positioning=o},283:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(75),i=n(43),o=function(){function e(e){e.length>0&&(this._speedcore=new r.Speedcore(e))}return e.prototype.factor=function(e){return this._speedcore?this._speedcore.x(e):1},e.fromBMSChart=function(t){i.BMSChart;var n=[];return t.objects.allSorted().forEach(function(e){if("SP"===e.channel){var r=t.measureToBeat(e.measure,e.fraction),i=+t.headers.get("speed"+e.value);if(isNaN(i))return;if(n.length>0){var o=n[n.length-1];o.dx=(i-o.x)/(r-o.t)}n.push({t:r,x:i,dx:0,inclusive:!0})}}),n.length>0&&n.unshift({t:0,x:n[0].x,dx:0,inclusive:!0}),new e(n)},e}();t.Spacing=o},43:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(163),i=n(164),o=n(165),a=function(){function e(){this.headers=new r.BMSHeaders,this.objects=new i.BMSObjects,this.timeSignatures=new o.TimeSignatures}return e.prototype.measureToBeat=function(e,t){return this.timeSignatures.measureToBeat(e,t)},e}();t.BMSChart=a},537:function(e,t,n){"use strict";var r=n(116),i=n(77),o=n.n(i),a=n(109);function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var l=function(){function e(t){u(this,e),this._files=function(e){var t=[];return o()(regeneratorRuntime.mark(function r(){var o,a,s,u,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.dataTransfer.items){r.next=12;break}o=Array.from(e.dataTransfer.items),a=0;case 3:if(!(a<o.length)){r.next=10;break}return s=o[a],r.next=7,n(s);case 7:a++,r.next=3;break;case 10:r.next=13;break;case 12:if(e.dataTransfer.files)for(u=Array.from(e.dataTransfer.files),c=0;c<u.length;c++)i(u[c]);case 13:return r.abrupt("return",t);case 14:case"end":return r.stop()}},r,this)}));function n(e){return o()(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.webkitGetAsEntry&&e.webkitGetAsEntry())){t.next=6;break}return t.next=4,r(n);case 4:t.next=8;break;case 6:i(e.getAsFile&&e.getAsFile());case 8:case"end":return t.stop()}},t,this)}))}function r(e){return e.isFile?function(e){return new Promise(function(t,n){e.file(t,n)}).tap(function(e){i(e)})}(e):e.isDirectory?function(e){return o()(regeneratorRuntime.mark(function t(){var n,i,o,a,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=[],i=e.createReader(),o=function(){return new Promise(function(e,t){i.readEntries(e,t)})};case 3:return t.next=5,o();case 5:if((a=t.sent)&&0!==a.length){t.next=8;break}return t.abrupt("break",11);case 8:n.push.apply(n,s(Array.from(a)));case 9:t.next=3;break;case 11:u=0;case 12:if(!(u<n.length)){t.next=19;break}return c=n[u],t.next=16,r(c);case 16:u++,t.next=12;break;case 19:case"end":return t.stop()}},t,this)}))}(e):void 0}function i(e){e&&t.push({name:e.name,file:e})}}(t)}return f(e,[{key:"file",value:function(e){return this._files.then(function(t){var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s.name.toLowerCase()===e.toLowerCase())return new h(s.file)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}throw new Error("unable to find "+e)})}},{key:"fileList",get:function(){return Promise.resolve(this._files.map(function(e){return e.name}))}}]),e}(),h=function(){function e(t){u(this,e),this._file=t}return f(e,[{key:"read",value:function(e){return r.a(e,Object(a.a)(this._file).as("arraybuffer"))}},{key:"resolveUrl",value:function(){return Promise.resolve(URL.createObjectURL(this._file))}},{key:"name",get:function(){return this._file.name}}]),e}();t.a=l},75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(275),i=function(){function e(e){this._segments=e.map(r.Segment)}return e.prototype._reached=function(e,t,n){if(e>=this._segments.length)return!1;var r=this._segments[e],i=t(r);return r.inclusive?n>=i:n>i},e.prototype._segmentAt=function(e,t){for(var n=0;n<this._segments.length;n++)if(!this._reached(n+1,e,t))return this._segments[n]},e.prototype.segmentAtX=function(e){return this._segmentAt(a,e)},e.prototype.segmentAtT=function(e){return this._segmentAt(o,e)},e.prototype.t=function(e){var t=this.segmentAtX(e);return t.t+(e-t.x)/(t.dx||1)},e.prototype.x=function(e){var t=this.segmentAtT(e);return t.x+(e-t.t)*t.dx},e.prototype.dx=function(e){return this.segmentAtT(e).dx},e}();t.Speedcore=i;var o=function(e){return e.t},a=function(e){return e.x}},86:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return u});var r=n(524),i=n.n(r),o=function(e){return function(t){return null!==t.progress?e(t):""}},a=o(function(e){return i()(e.current)+" / "+i()(e.total)}),s=o(function(e){return(e.current/e.total*100).toFixed(1)+"%"}),u=o(function(e){return e.extra+""})}}]);
//# sourceMappingURL=comingSoonDemo-07e3222fc9ba8e8bb2aa.js.map