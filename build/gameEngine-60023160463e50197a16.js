(this.webpackJsonp=this.webpackJsonp||[]).push([[13],{156:function(module,__webpack_exports__,__webpack_require__){"use strict";var debug__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(172),debug__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(debug__WEBPACK_IMPORTED_MODULE_0__),_parser_pegjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(854),_parser_pegjs__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_parser_pegjs__WEBPACK_IMPORTED_MODULE_1__),log=debug__WEBPACK_IMPORTED_MODULE_0___default()("scintillator:expression");function createFunction(code){var fn=eval("(function(get) { return "+code+" })");return fn.displayName="("+code+")",fn.constant=!!/^[-0-9.]+$/.test(code),fn}function Expression(t){log("parsing %s",t);var e=_parser_pegjs__WEBPACK_IMPORTED_MODULE_1___default.a.parse(t);log("parsed %s => %s",t,e);var n,r=createFunction(e);return(n=r.constant?r:function(t){return r(function(e){return t[e]})}).constant=r.constant,n}__webpack_exports__.a=Expression},588:function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"c",function(){return p}),n.d(e,"b",function(){return d});var r=n(34),o=n.n(r),i=n(70),a=n.n(i),u=n(855),c=n.n(u);function s(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(t){return Object.assign({},t,{data:c()(t.data)})},h=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._timeKey=n||"t",this._properties=o()(e).map(function(t){return o.a.map(t.data,"name")}).flatten().thru(function(t){return new Set(t)}).value(),this._animations=o.a.map(e,l),this._events=o.a.uniq(o.a.map(e,"on"))}return function(t,e,n){e&&f(t.prototype,e),n&&f(t,n)}(t,[{key:"prop",value:function(t,e){var n=this;return this._properties.has(t)?function(r){var o=n._getAnimation(r);return o.hasOwnProperty(t)?o[t]:e(r)}:e}},{key:"_getAnimation",value:function(t){var e=o()(this._events).filter(function(e){return""===e||e in t}).maxBy(function(e){return t[e]||0}),n=t[this._timeKey]-(t[e]||0),r=this._animations.filter(function(t){return t.on===e}).map(function(t){return t.data.values(n)});return Object.assign.apply(Object,[{}].concat(s(r)))}}],[{key:"compile",value:function(e,n){var r=Array.from(n.children("animation"));return new t(o.a.map(r,function(t){return p(a()(t))}),n.attr("t")||"t")}}]),t}();function p(t){var e=o.a.map(Array.from(t.children("keyframe")),d),n={},r=!0,i=!1,a=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var s=u.value,f=+s.t,l=s.ease||"linear";if(isNaN(f))throw new Error('Expected keyframe to have "t" attribute');for(var h in s)if("t"!==h&&"ease"!==h){var p=+s[h];(n[h]||(n[h]=y(h))).keyframes.push({time:f,value:p,ease:l})}}}catch(t){i=!0,a=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return{on:t.attr("on")||"",data:o.a.values(n)}}function y(t){return{name:t,keyframes:[]}}function d(t){return o()(t.attributes).map(function(t){return[t.name.toLowerCase(),t.value]}).fromPairs().value()}e.d=h},854:function(t,e,n){"use strict";function r(t,e,n,o){this.message=t,this.expected=e,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(r,Error),r.buildMessage=function(t,e){var n={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var e,n="";for(e=0;e<t.parts.length;e++)n+=t.parts[e]instanceof Array?i(t.parts[e][0])+"-"+i(t.parts[e][1]):i(t.parts[e]);return"["+(t.inverted?"^":"")+n+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function a(t){return n[t.type](t)}return"Expected "+function(t){var e,n,r=new Array(t.length);for(e=0;e<t.length;e++)r[e]=a(t[e]);if(r.sort(),r.length>0){for(e=1,n=1;e<r.length;e++)r[e-1]!==r[e]&&(r[n]=r[e],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(t)+" but "+function(t){return t?'"'+o(t)+'"':"end of input"}(e)+" found."},t.exports={SyntaxError:r,parse:function(t,e){e=void 0!==e?e:{};var n,o={},i={expr:ft},a=ft,u="||",c=rt("||",!1),s=function(t,e){return function(t,e){return t+e.map(vt).join("")}(t,e)},f="&&",l=rt("&&",!1),h="+",p=rt("+",!1),y="-",d=rt("-",!1),b="*",v=rt("*",!1),m="/",_=rt("/",!1),g="%",w=rt("%",!1),O="(",x=rt("(",!1),E=")",k=rt(")",!1),j=function(t){return"("+t+")"},A="!",S=rt("!",!1),C=function(t){return"!"+t},P=it("number"),T=function(){return nt()},D=/^[eE]/,M=ot(["e","E"],!1,!1),L=/^[0-9]/,R=ot([["0","9"]],!1,!1),I=".",N=rt(".",!1),B="0",F=rt("0",!1),U=/^[1-9]/,K=ot([["1","9"]],!1,!1),W=/^[a-zA-Z]/,q=ot([["a","z"],["A","Z"]],!1,!1),z=/^[a-zA-Z0-9_]/,X=ot([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),Z=function(){return"get("+JSON.stringify(nt())+")"},J=it("whitespace"),Y=/^[ \t\n\r]/,$=ot([" ","\t","\n","\r"],!1,!1),G=0,H=0,Q=[{line:1,column:1}],V=0,tt=[],et=0;if("startRule"in e){if(!(e.startRule in i))throw new Error("Can't start parsing from rule \""+e.startRule+'".');a=i[e.startRule]}function nt(){return t.substring(H,G)}function rt(t,e){return{type:"literal",text:t,ignoreCase:e}}function ot(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function it(t){return{type:"other",description:t}}function at(e){var n,r=Q[e];if(r)return r;for(n=e-1;!Q[n];)n--;for(r={line:(r=Q[n]).line,column:r.column};n<e;)10===t.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Q[e]=r,r}function ut(t,e){var n=at(t),r=at(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:r.line,column:r.column}}}function ct(t){G<V||(G>V&&(V=G,tt=[]),tt.push(t))}function st(t,e,n){return new r(r.buildMessage(t,e),t,e,n)}function ft(){return lt()}function lt(){var e,n,r,i,a,f,l,h;if(e=G,(n=ht())!==o){for(r=[],i=G,(a=bt())!==o?(t.substr(G,2)===u?(f=u,G+=2):(f=o,0===et&&ct(c)),f!==o&&(l=bt())!==o&&(h=ht())!==o?i=a=[a,f,l,h]:(G=i,i=o)):(G=i,i=o);i!==o;)r.push(i),i=G,(a=bt())!==o?(t.substr(G,2)===u?(f=u,G+=2):(f=o,0===et&&ct(c)),f!==o&&(l=bt())!==o&&(h=ht())!==o?i=a=[a,f,l,h]:(G=i,i=o)):(G=i,i=o);r!==o?(H=e,e=n=s(n,r)):(G=e,e=o)}else G=e,e=o;return e}function ht(){var e,n,r,i,a,u,c,h;if(e=G,(n=pt())!==o){for(r=[],i=G,(a=bt())!==o?(t.substr(G,2)===f?(u=f,G+=2):(u=o,0===et&&ct(l)),u!==o&&(c=bt())!==o&&(h=pt())!==o?i=a=[a,u,c,h]:(G=i,i=o)):(G=i,i=o);i!==o;)r.push(i),i=G,(a=bt())!==o?(t.substr(G,2)===f?(u=f,G+=2):(u=o,0===et&&ct(l)),u!==o&&(c=bt())!==o&&(h=pt())!==o?i=a=[a,u,c,h]:(G=i,i=o)):(G=i,i=o);r!==o?(H=e,e=n=s(n,r)):(G=e,e=o)}else G=e,e=o;return e}function pt(){var e,n,r,i,a,u,c,f;if(e=G,(n=yt())!==o){for(r=[],i=G,(a=bt())!==o?(43===t.charCodeAt(G)?(u=h,G++):(u=o,0===et&&ct(p)),u===o&&(45===t.charCodeAt(G)?(u=y,G++):(u=o,0===et&&ct(d))),u!==o&&(c=bt())!==o&&(f=yt())!==o?i=a=[a,u,c,f]:(G=i,i=o)):(G=i,i=o);i!==o;)r.push(i),i=G,(a=bt())!==o?(43===t.charCodeAt(G)?(u=h,G++):(u=o,0===et&&ct(p)),u===o&&(45===t.charCodeAt(G)?(u=y,G++):(u=o,0===et&&ct(d))),u!==o&&(c=bt())!==o&&(f=yt())!==o?i=a=[a,u,c,f]:(G=i,i=o)):(G=i,i=o);r!==o?(H=e,e=n=s(n,r)):(G=e,e=o)}else G=e,e=o;return e}function yt(){var e,n,r,i,a,u,c,f;if(e=G,(n=dt())!==o){for(r=[],i=G,(a=bt())!==o?(42===t.charCodeAt(G)?(u=b,G++):(u=o,0===et&&ct(v)),u===o&&(47===t.charCodeAt(G)?(u=m,G++):(u=o,0===et&&ct(_)),u===o&&(37===t.charCodeAt(G)?(u=g,G++):(u=o,0===et&&ct(w)))),u!==o&&(c=bt())!==o&&(f=dt())!==o?i=a=[a,u,c,f]:(G=i,i=o)):(G=i,i=o);i!==o;)r.push(i),i=G,(a=bt())!==o?(42===t.charCodeAt(G)?(u=b,G++):(u=o,0===et&&ct(v)),u===o&&(47===t.charCodeAt(G)?(u=m,G++):(u=o,0===et&&ct(_)),u===o&&(37===t.charCodeAt(G)?(u=g,G++):(u=o,0===et&&ct(w)))),u!==o&&(c=bt())!==o&&(f=dt())!==o?i=a=[a,u,c,f]:(G=i,i=o)):(G=i,i=o);r!==o?(H=e,e=n=s(n,r)):(G=e,e=o)}else G=e,e=o;return e}function dt(){var e,n,r,i,a;return e=G,40===t.charCodeAt(G)?(n=O,G++):(n=o,0===et&&ct(x)),n!==o&&(r=bt())!==o&&(i=lt())!==o&&bt()!==o?(41===t.charCodeAt(G)?(a=E,G++):(a=o,0===et&&ct(k)),a!==o?(H=e,e=n=j(i)):(G=e,e=o)):(G=e,e=o),e===o&&(e=G,33===t.charCodeAt(G)?(n=A,G++):(n=o,0===et&&ct(S)),n!==o&&(r=dt())!==o?(H=e,e=n=C(r)):(G=e,e=o),e===o&&(e=function(){var e,n,r,i;return et++,e=G,45===t.charCodeAt(G)?(n=y,G++):(n=o,0===et&&ct(d)),n===o&&(n=null),n!==o&&function(){var e,n,r,i;if(48===t.charCodeAt(G)?(e=B,G++):(e=o,0===et&&ct(F)),e===o)if(e=G,U.test(t.charAt(G))?(n=t.charAt(G),G++):(n=o,0===et&&ct(K)),n!==o){for(r=[],L.test(t.charAt(G))?(i=t.charAt(G),G++):(i=o,0===et&&ct(R));i!==o;)r.push(i),L.test(t.charAt(G))?(i=t.charAt(G),G++):(i=o,0===et&&ct(R));r!==o?e=n=[n,r]:(G=e,e=o)}else G=e,e=o;return e}()!==o?((r=function(){var e,n,r,i;if(e=G,46===t.charCodeAt(G)?(n=I,G++):(n=o,0===et&&ct(N)),n!==o){if(r=[],L.test(t.charAt(G))?(i=t.charAt(G),G++):(i=o,0===et&&ct(R)),i!==o)for(;i!==o;)r.push(i),L.test(t.charAt(G))?(i=t.charAt(G),G++):(i=o,0===et&&ct(R));else r=o;r!==o?e=n=[n,r]:(G=e,e=o)}else G=e,e=o;return e}())===o&&(r=null),r!==o?((i=function(){var e,n,r,i,a;if(e=G,D.test(t.charAt(G))?(n=t.charAt(G),G++):(n=o,0===et&&ct(M)),n!==o)if(45===t.charCodeAt(G)?(r=y,G++):(r=o,0===et&&ct(d)),r===o&&(43===t.charCodeAt(G)?(r=h,G++):(r=o,0===et&&ct(p))),r===o&&(r=null),r!==o){if(i=[],L.test(t.charAt(G))?(a=t.charAt(G),G++):(a=o,0===et&&ct(R)),a!==o)for(;a!==o;)i.push(a),L.test(t.charAt(G))?(a=t.charAt(G),G++):(a=o,0===et&&ct(R));else i=o;i!==o?e=n=[n,r,i]:(G=e,e=o)}else G=e,e=o;else G=e,e=o;return e}())===o&&(i=null),i!==o?(H=e,n=T(),e=n):(G=e,e=o)):(G=e,e=o)):(G=e,e=o),et--,e===o&&(n=o,0===et&&ct(P)),e}())===o&&(e=function(){var e,n,r,i;if(e=G,n=[],W.test(t.charAt(G))?(r=t.charAt(G),G++):(r=o,0===et&&ct(q)),r!==o)for(;r!==o;)n.push(r),W.test(t.charAt(G))?(r=t.charAt(G),G++):(r=o,0===et&&ct(q));else n=o;if(n!==o){for(r=[],z.test(t.charAt(G))?(i=t.charAt(G),G++):(i=o,0===et&&ct(X));i!==o;)r.push(i),z.test(t.charAt(G))?(i=t.charAt(G),G++):(i=o,0===et&&ct(X));r!==o?(H=e,n=Z(),e=n):(G=e,e=o)}else G=e,e=o;return e}())),e}function bt(){var e,n;for(et++,e=[],Y.test(t.charAt(G))?(n=t.charAt(G),G++):(n=o,0===et&&ct($));n!==o;)e.push(n),Y.test(t.charAt(G))?(n=t.charAt(G),G++):(n=o,0===et&&ct($));return et--,e===o&&(n=o,0===et&&ct(J)),e}function vt(t){return" "+t[1]+" "+t[3]}if((n=a())!==o&&G===t.length)return n;throw n!==o&&G<t.length&&ct({type:"end"}),st(tt,V<t.length?t.charAt(V):null,V<t.length?ut(V,V+1):ut(V,V))}}},929:function(t,e,n){"use strict";n.r(e);var r=n(53);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return r.utils.canUseNewCanvasBlendModes=function(){return!0},new r.CanvasRenderer(t,e,{transparent:!0})}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.refs={},this._skin=e,this._instance=e.instantiate(this),this._renderer=i(e.width,e.height),this.stage=this._instance.object,this.view=this._renderer.view,this.skinData=e.data,this._setupInteractivity()}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,[{key:"render",value:function(t){this._instance.push(t),this._renderer.render(this.stage)}},{key:"destroy",value:function(){this._instance.destroy(),this._instance=null,this._teardownInteractivity()}},{key:"ref",value:function(t,e){(this.refs[t]||(this.refs[t]=new Set)).add(e)}},{key:"unref",value:function(t,e){var n=this.refs[t];n&&n.delete(e)}},{key:"_setupInteractivity",value:function(){var t=this,e=null,n=[],r=function(t){e=t},o=function(t){e=e&&t},i=function(){e=null},a=function(t){n=[].slice.call(t.touches)},u=this.view,c=this._skin.width,s=this._skin.height;function f(t,e,n){return{x:(e.clientX-n.left)/n.width*c,y:(e.clientY-n.top)/n.height*s,id:t}}u.addEventListener("mousedown",r,!1),u.addEventListener("mousemove",o,!1),u.addEventListener("mouseup",i,!1),u.addEventListener("touchstart",a,!1),u.addEventListener("touchmove",a,!1),u.addEventListener("touchend",a,!1),this._teardownInteractivity=function(){u.removeEventListener("mousedown",r,!1),u.removeEventListener("mousemove",o,!1),u.removeEventListener("mouseup",i,!1),u.removeEventListener("touchstart",a,!1),u.removeEventListener("touchmove",a,!1),u.removeEventListener("touchend",a,!1)},this._input={get:function(){var r=[],o=t.view.getBoundingClientRect();e&&r.push(f("mouse",e,o));for(var i=0;i<n.length;i++){var a=n[i];r.push(f("touch"+a.identifier,a,o))}return r}}}},{key:"input",get:function(){return this._input.get()}}]),t}(),u=n(70),c=n.n(u),s=n(77),f=n.n(s),l=n(172),h=n.n(l),p=n(117),y=n.n(p),d=n(86);function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&b(t.prototype,e),n&&b(t,n)}(t,null,[{key:"compile",value:function(t,e){var n=new this;return n.compile(t,e),n}}]),t}(),m=n(6);function _(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var w=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._context=e.context,this._object=e.object,this._children=e.children,this._bindings=[],this._concerns=[],this.onData=new m.a(e.onData),this.onDestroy=new m.a(e.onDestroy),e.bindings){var n=!0,r=!1,o=void 0;try{for(var i,a=e.bindings[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;this.bind.apply(this,_(u))}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}if(e.concerns){var c=!0,s=!1,f=void 0;try{for(var l,h=e.concerns[Symbol.iterator]();!(c=(l=h.next()).done);c=!0){var p=l.value;this._concerns.push(p.instantiate(this._context,this))}}catch(t){s=!0,f=t}finally{try{c||null==h.return||h.return()}finally{if(s)throw f}}}if(e.children){var y=!0,d=!1,b=void 0;try{for(var v,g=e.children[Symbol.iterator]();!(y=(v=g.next()).done);y=!0){var w=v.value;this._concerns.push(w.instantiate(this._context,this._object))}}catch(t){d=!0,b=t}finally{try{y||null==g.return||g.return()}finally{if(d)throw b}}}e.onCreate&&new m.a(e.onCreate).call(),e.parent&&this.attachTo(e.parent)}return function(t,e,n){e&&g(t.prototype,e),n&&g(t,n)}(t,[{key:"bind",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=function(t){var e;return function(n){e!==n&&(e=n,t(n))}}(e.pop());1===e.length&&e[0].constant?r(e[0]()):this._bindings.push(function(t){for(var n=0;n<e.length;n++)t=e[n](t);r(t)})}},{key:"attachTo",value:function(t){this._parent=t,this._parent.addChild(this._object)}},{key:"detach",value:function(){this._parent&&(this._parent.removeChild(this._object),this._parent=null)}},{key:"push",value:function(t){var e;for(e=0;e<this._bindings.length;e++)this._bindings[e](t);for(e=0;e<this._concerns.length;e++)this._concerns[e].push(t);this.onData.call(t)}},{key:"destroy",value:function(){this.detach();for(var t=0;t<this._concerns.length;t++)this._concerns[t].destroy();this.onDestroy.call(),this._concerns=null,this._bindings=null,this._parent=null,this._object=null}},{key:"object",get:function(){return this._object}},{key:"parent",get:function(){return this._parent}}]),t}(),O=n(156),x=n(588);function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=[{name:"x",default:"0",apply:function(t,e){return t.x=e}},{name:"y",default:"0",apply:function(t,e){return t.y=e}},{name:"scale-x",default:"1",apply:function(t,e){return t.scale.x=e}},{name:"scale-y",default:"1",apply:function(t,e){return t.scale.y=e}},{name:"alpha",default:"1",apply:function(t,e){return t.alpha=e}},{name:"width",apply:function(t,e){return t.width=e}},{name:"height",apply:function(t,e){return t.height=e}},{name:"visible",apply:function(t,e){return t.visible=e}}];var P=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,A(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(e,v),function(t,e,n){e&&k(t.prototype,e),n&&k(t,n)}(e,[{key:"compile",value:function(t,e){this._animation=x.d.compile(t,e),this._bindings=[];for(var n=0;n<C.length;n++){var o=C[n],i=e.attr(o.name)||o.default;if(i){var a=new O.a(i),u=this._animation.prop(o.name,a);this._bindings.push({getter:u,apply:o.apply})}}this.blendMode=function(t){if("normal"===t)return r.BLEND_MODES.NORMAL;if("screen"===t)return r.BLEND_MODES.SCREEN;throw new Error("Invalid blend mode: "+t)}(e.attr("blend")||"normal"),this.ref=e.attr("ref")||null}},{key:"instantiate",value:function(t,e){var n=this,r=e.object,o=[],i=null;r.blendMode=this.blendMode;for(var a=0;a<this._bindings.length;a++){var u=this._bindings[a];o.push([u.getter,u.apply.bind(null,r)])}return this.ref&&(t.ref(this.ref,r),i=function(){return t.unref(n.ref,r)}),new w({bindings:o,onDestroy:i})}}]),e}();function T(t){var e=t.match(/^(\d+)x(\d+)\+(\d+)\+(\d+)$/);return e?new r.Rectangle(+e[3],+e[4],+e[1],+e[2]):null}function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){return!e||"object"!==D(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function B(t,e,n){return e&&N(t.prototype,e),n&&N(t,n),t}var F=function(){function t(e){I(this,t),this._frame=e}return B(t,[{key:"instantiate",value:function(t,e){var n=new r.Graphics;return n.beginFill(),n.drawShape(this._frame),n.endFill(),e.object.mask=n,new w({context:t,object:n,parent:e.object})}}]),t}(),U=function(t){function e(){return I(this,e),M(this,L(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(e,v),B(e,[{key:"compile",value:function(t,e){this.children=t.compileChildren(e),this.display=P.compile(t,e);var n=T(e.attr("mask")||"");n&&(this.mask=new F(n))}},{key:"instantiate",value:function(t,e){var n=new r.Container,o=[this.display];return this.mask&&o.push(this.mask),new w({context:t,object:n,parent:e,concerns:o,children:this.children})}}]),e}();function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function q(t,e){return!e||"object"!==K(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Z=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),q(this,z(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}(e,v),function(t,e,n){e&&W(t.prototype,e),n&&W(t,n)}(e,[{key:"compile",value:function(t,e){var n=t.compileChildren(e);if(1!==n.length)throw new Error("Expected exactly 1 children, "+n.length+" found");this.child=n[0],this.key=new O.a(e.attr("key")),this.value=String(e.attr("value"))}},{key:"instantiate",value:function(t,e){var n=new r.Container,o=this.key,i=this.value,a=this.child,u=null;return new w({context:t,parent:e,object:n,onData:function(e){String(o(e))===i?(null===u&&(u=a.instantiate(t,n)),u.push(e)):null!==u&&(u.destroy(),u=null)}})}}]),e}();function J(t){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $(t,e){return!e||"object"!==J(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Q(t,e,n){return{instantiate:function(r,o){var i=new Map,a=[];return function(){for(var t,i=0;i<n;i++)(t=e.instantiate(r,o.object)).detach(),a.push(t)}(),new w({context:r,onData:function(e){!function(t){var e,n,r,o=new Set(i.keys());t||(t=[]);for(var c=0;c<t.length;c++)n=t[c],e=n.key,i.has(e)?r=i.get(e):(r=u(),i.set(e,r)),r.push(n),o.delete(e);var s=!0,f=!1,l=void 0;try{for(var h,p=o[Symbol.iterator]();!(s=(h=p.next()).done);s=!0)e=h.value,(r=i.get(e)).detach(),i.delete(e),a.push(r)}catch(t){f=!0,l=t}finally{try{s||null==p.return||p.return()}finally{if(f)throw l}}}(t(e))}});function u(){var t=a.pop();return t?t.attachTo(o.object):t=e.instantiate(r,o.object),t}}}}var V=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),$(this,G(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(e,v),function(t,e,n){e&&Y(t.prototype,e),n&&Y(t,n)}(e,[{key:"compile",value:function(t,e){if(this.children=t.compileChildren(e),1!==this.children.length)throw new Error("Expected exactly 1 children, "+this.children.length+" given");this.pool=+e.attr("pool")||1,this.key=new O.a(e.attr("key"))}},{key:"instantiate",value:function(t,e){var n=new r.particles.ParticleContainer(void 0,{position:!0,alpha:!0}),o=new Q(this.key,this.children[0],this.pool);return new w({context:t,parent:e,object:n,concerns:[o]})}}]),e}();function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nt(t,e){return!e||"object"!==tt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ot(t,e){return(ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var it=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),nt(this,rt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ot(t,e)}(e,v),function(t,e,n){e&&et(t.prototype,e),n&&et(t,n)}(e,[{key:"compile",value:function(t,e){this.children=t.compileChildren(e),this.width=+e.attr("width"),this.height=+e.attr("height"),this.data=e.data()}},{key:"instantiate",value:function(t){var e=new r.Stage(591879);return new w({context:t,object:e,children:this.children})}}]),e}();function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ct(t,e){return!e||"object"!==at(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ft(t,e){return(ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ct(this,st(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ft(t,e)}(e,v),function(t,e,n){e&&ut(t.prototype,e),n&&ut(t,n)}(e,[{key:"compile",value:function(t,e){this.url=t.resources.get(e.attr("image")),this.display=P.compile(t,e),this.frame=T(e.attr("frame")||""),this.anchorX=+e.attr("anchor-x")||0,this.anchorY=+e.attr("anchor-y")||0}},{key:"instantiate",value:function(t,e){var n=new r.Sprite(this.getTexture());return n.anchor.x=this.anchorX,n.anchor.y=this.anchorY,new w({context:t,object:n,parent:e,concerns:[this.display]})}},{key:"getTexture",value:function(){if(this._texture)return this._texture;var t=r.SCALE_MODES.NEAREST,e=r.BaseTexture.fromImage(this.url,void 0,t),n=new r.Texture(e,this.frame);return this._texture=n,n}}]),e}();function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yt(t,e){return!e||"object"!==ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bt(t,e){return(bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),yt(this,dt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bt(t,e)}(e,v),function(t,e,n){e&&pt(t.prototype,e),n&&pt(t,n)}(e,[{key:"compile",value:function(t,e){this.font=e.attr("font"),this.text=e.attr("text"),this.data=new O.a(e.attr("data")||"0"),this.display=P.compile(t,e),this.ttf=!e.attr("font-src"),this.fill=e.attr("fill"),this.align="left"===e.attr("align")?0:"right"===e.attr("align")?1:.5}},{key:"instantiate",value:function(t,e){var n,o=this;n=this.ttf?new r.Text(this.text,{font:this.font,fill:this.fill}):new r.extras.BitmapText(this.text,{font:this.font});var i=new r.Container;return i.addChild(n),new w({context:t,parent:e,object:i,concerns:[this.display],bindings:[[this.data,function(t){n.text=o.text.replace("%s",t),n.updateText(),n.x=n.width*-o.align}]]})}}]),e}();function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _t=h()("scintillator:compiler"),gt={skin:it,sprite:lt,group:U,object:V,text:vt,if:Z},wt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,e),this._defs=new Map}return function(t,e,n){e&&mt(t.prototype,e),n&&mt(t,n)}(t,[{key:"compile",value:function(e){var n=e[0].nodeName;_t("compiling",e[0]);var r=t.getNodeClass(n);if(!r)throw new Error("Invalid node name: "+n);return r.compile(this,e)}},{key:"compileChildren",value:function(e){for(var n=[],r=Array.from(e.children()),o=0;o<r.length;o++){var i=r[o],a=i.nodeName;if("defs"===a)this.compileDefs(c()(i));else if("use"===a)n.push(this.getDef(i.getAttribute("def")));else{t.getNodeClass(a)&&n.push(this.compile(c()(i)))}}return n}},{key:"compileDefs",value:function(t){for(var e=Array.from(t.children()),n=0;n<e.length;n++){var r=e[n],o=r.getAttribute("id");if(!o)throw new Error("A def should have an id: "+r.nodeName);this._defs.set(o,this.compile(c()(r)))}}},{key:"getDef",value:function(t){var e=this._defs.get(t);if(!e)throw new Error("Cannot find def: "+t);return e}}],[{key:"getNodeClass",value:function(t){return gt[t]}}]),t}(),Ot=n(34),xt=n.n(Ot);function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var kt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._map={}}return function(t,e,n){e&&Et(t.prototype,e),n&&Et(t,n)}(t,[{key:"add",value:function(t,e){this._map[t]=e}},{key:"get",value:function(t){if(!(t in this._map))throw new Error("Not registered: "+t);return this._map[t]}},{key:"urls",get:function(){return xt.a.values(this._map)}}]),t}(),jt=h()("scintillator:loader");function At(t,e){return f()(regeneratorRuntime.mark(function n(){var r,o,i,a,u,s,f,l,h,p,d,b,v,m,_,g,w;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return jt("load XML from %s",t),n.next=3,St(t);case 3:for(r=n.sent,o=new kt,i=new Set,a=Array.from(r.find("[image]")),u=0;u<a.length;u++)s=a[u],i.add(c()(s).attr("image"));for(f=Array.from(r.find("[font-src]")),l=0;l<f.length;l++)h=f[l],i.add(c()(h).attr("font-src"));for(p=!0,d=!1,b=void 0,n.prev=13,v=i[Symbol.iterator]();!(p=(m=v.next()).done);p=!0)_=m.value,g=y.a.resolve(t,_),o.add(_,g);n.next=21;break;case 17:n.prev=17,n.t0=n.catch(13),d=!0,b=n.t0;case 21:n.prev=21,n.prev=22,p||null==v.return||v.return();case 24:if(n.prev=24,!d){n.next=27;break}throw b;case 27:return n.finish(24);case 28:return n.finish(21);case 29:return n.next=31,Ct(o,e);case 31:return jt("compiling"),w=new wt({resources:o}).compile(r),n.abrupt("return",w);case 34:case"end":return n.stop()}},n,this,[[13,17,21,29],[22,,24,28]])}))}function St(t){return Promise.resolve(c.a.ajax({url:t,dataType:"xml"})).then(function(t){return c()(t.documentElement)})}function Ct(t,e){return jt("loading resources"),new Promise(function(n){if(0===t.urls.length)return n();var o=new r.loaders.Loader,i=!0,a=!1,u=void 0;try{for(var c,s=t.urls[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var f=c.value;o.add(f,f)}}catch(t){a=!0,u=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}o.once("complete",function(){jt("resources finished loading"),n()}),e&&(e.formatter=d.c,o.once("complete",function(){e.report(100,100)}),o.on("progress",function(){e.report(o.progress,100)})),o.load()})}function Pt(){return"touch3d"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).displayMode?"/skins/default/skin_touch3d.xml":window.innerWidth<window.innerHeight?"/skins/default/skin_touch.xml":"/skins/default/skin_screen.xml"}n.d(e,"getSkinUrl",function(){return Pt}),n.d(e,"load",function(){return At}),n.d(e,"Context",function(){return a})}}]);
//# sourceMappingURL=gameEngine-60023160463e50197a16.js.map