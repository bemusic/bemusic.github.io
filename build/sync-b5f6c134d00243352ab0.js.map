{"version":3,"file":"build/sync-b5f6c134d00243352ab0.js","mappings":"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","sources":["file:///home/runner/work/bemuse/bemuse/bemuse/src/auto-synchro/ui/ExperimentScene.scss","file:///home/runner/work/bemuse/bemuse/bemuse/src/audio-context/index.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/auto-synchro/music/index.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/auto-synchro/ui/ExperimentScene.scss?[contenthash]","file:///home/runner/work/bemuse/bemuse/bemuse/src/auto-synchro/ui/ExperimentScene.tsx","file:///home/runner/work/bemuse/bemuse/bemuse/src/flux/index.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/auto-synchro/index.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/progress/formatters.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/sampling-master/index.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/sampling-master/ogg.ts","file:///home/runner/work/bemuse/bemuse/bemuse/src/utils/download.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/utils/read-blob.js"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../common/temp/node_modules/.pnpm/css-loader@6.7.3_webpack@5.75.0/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../common/temp/node_modules/.pnpm/css-loader@6.7.3_webpack@5.75.0/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@charset \\\"UTF-8\\\";\\n.ExperimentScene {\\n  display: flex;\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  align-items: center;\\n  justify-content: center;\\n}\\n.ExperimentSceneのbutton {\\n  font: inherit;\\n  background: #252423 linear-gradient(to bottom, #454443, #151413);\\n  border: 1px solid #555453;\\n  padding: 0.5ex 1.3ex;\\n  color: #fff;\\n  border-radius: 4px;\\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);\\n  font-size: 18px;\\n}\\n.ExperimentSceneのbutton:hover {\\n  border-color: #656463;\\n}\\n.ExperimentSceneのbutton:focus {\\n  border-color: #8b8685;\\n  outline: 0;\\n}\\n.ExperimentSceneのbutton:active {\\n  background: #252423 linear-gradient(to top, #353433, #151413);\\n  border-color: #454443;\\n}\\n.ExperimentSceneのmessage {\\n  text-align: center;\\n  font-size: 16px;\\n}\\n.ExperimentSceneのprogress {\\n  width: 100px;\\n  margin: 1em auto;\\n  border: 1px solid #8b8685;\\n  padding: 1px;\\n}\\n.ExperimentSceneのprogressBar {\\n  height: 5px;\\n  background: #8b8685;\\n  transition: 0.5s transform linear;\\n  transform-origin: left;\\n}\\n.ExperimentScene.is-finished .ExperimentSceneのwrapper {\\n  animation: 3.243243243s experiment-scene--auto-synchro linear infinite;\\n}\\n.ExperimentScene.is-finished .ExperimentSceneのwrapperInner {\\n  animation: 3s experiment-scene--spin linear infinite;\\n  animation-delay: 13.378378377s;\\n}\\n\\n@keyframes experiment-scene--auto-synchro {\\n  0.00% {\\n    transform: scale(1);\\n  }\\n  11.88% {\\n    transform: scale(0.95);\\n  }\\n  13.13% {\\n    transform: scale(1.05);\\n  }\\n  24.38% {\\n    transform: scale(0.95);\\n  }\\n  25.63% {\\n    transform: scale(1.05);\\n  }\\n  36.88% {\\n    transform: scale(0.95);\\n  }\\n  38.13% {\\n    transform: scale(1.05);\\n  }\\n  49.38% {\\n    transform: scale(0.95);\\n  }\\n  50.63% {\\n    transform: scale(1.05);\\n  }\\n  61.88% {\\n    transform: scale(0.95);\\n  }\\n  63.13% {\\n    transform: scale(1.05);\\n  }\\n  74.38% {\\n    transform: scale(0.95);\\n  }\\n  75.63% {\\n    transform: scale(1.05);\\n  }\\n  86.88% {\\n    transform: scale(0.95);\\n  }\\n  88.13% {\\n    transform: scale(1.05);\\n  }\\n  100.00% {\\n    transform: scale(1);\\n  }\\n}\\n@keyframes experiment-scene--spin {\\n  0% {\\n    transform: rotate(0deg);\\n  }\\n  4% {\\n    transform: rotate(1.99deg);\\n  }\\n  8% {\\n    transform: rotate(3.85deg);\\n  }\\n  12% {\\n    transform: rotate(5.48deg);\\n  }\\n  16% {\\n    transform: rotate(6.75deg);\\n  }\\n  20% {\\n    transform: rotate(7.61deg);\\n  }\\n  24% {\\n    transform: rotate(7.98deg);\\n  }\\n  28% {\\n    transform: rotate(7.86deg);\\n  }\\n  32% {\\n    transform: rotate(7.24deg);\\n  }\\n  36% {\\n    transform: rotate(6.16deg);\\n  }\\n  40% {\\n    transform: rotate(4.7deg);\\n  }\\n  44% {\\n    transform: rotate(2.94deg);\\n  }\\n  48% {\\n    transform: rotate(1deg);\\n  }\\n  52% {\\n    transform: rotate(-1deg);\\n  }\\n  56% {\\n    transform: rotate(-2.94deg);\\n  }\\n  60% {\\n    transform: rotate(-4.7deg);\\n  }\\n  64% {\\n    transform: rotate(-6.16deg);\\n  }\\n  68% {\\n    transform: rotate(-7.24deg);\\n  }\\n  72% {\\n    transform: rotate(-7.86deg);\\n  }\\n  76% {\\n    transform: rotate(-7.98deg);\\n  }\\n  80% {\\n    transform: rotate(-7.61deg);\\n  }\\n  84% {\\n    transform: rotate(-6.75deg);\\n  }\\n  88% {\\n    transform: rotate(-5.48deg);\\n  }\\n  92% {\\n    transform: rotate(-3.85deg);\\n  }\\n  96% {\\n    transform: rotate(-1.99deg);\\n  }\\n  100% {\\n    transform: rotate(0deg);\\n  }\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./auto-synchro/ui/ExperimentScene.scss\",\"webpack://./ui/common.scss\"],\"names\":[],\"mappings\":\"AAAA,gBAAgB;AAEhB;EACE,aAAA;EACA,kBAAA;EACA,MAAA;EACA,QAAA;EACA,SAAA;EACA,OAAA;EACA,mBAAA;EACA,uBAAA;AAAF;AAEE;ECkDA,aAAA;EACA,gEAAA;EACA,yBAAA;EACA,oBAAA;EACA,WAAA;EACA,kBAAA;EACA,wCAAA;EDtDE,eAAA;AAMJ;ACiDE;EACE,qBAAA;AD/CJ;ACiDE;EACE,qBAAA;EACA,UAAA;AD/CJ;ACiDE;EACE,6DAAA;EACA,qBAAA;AD/CJ;AAdE;EACE,kBAAA;EACA,eAAA;AAgBJ;AAbE;EACE,YAAA;EACA,gBAAA;EACA,yBAAA;EACA,YAAA;AAeJ;AAbE;EACE,WAAA;EACA,mBAAA;EACA,iCAAA;EACA,sBAAA;AAeJ;AAZE;EACE,sEAAA;AAcJ;AAZE;EACE,oDAAA;EACA,8BAAA;AAcJ;;AAVA;EAGE;IACE,mBAAA;EAWF;EATA;IACE,sBAAA;EAWF;EATA;IACE,sBAAA;EAWF;EATA;IACE,sBAAA;EAWF;EATA;IACE,sBAAA;EAWF;EATA;IACE,sBAAA;EAWF;EATA;IACE,sBAAA;EAWF;EATA;IACE,sBAAA;EAWF;EATA;IACE,sBAAA;EAWF;EATA;IACE,sBAAA;EAWF;EATA;IACE,sBAAA;EAWF;EATA;IACE,sBAAA;EAWF;EATA;IACE,sBAAA;EAWF;EATA;IACE,sBAAA;EAWF;EATA;IACE,sBAAA;EAWF;EATA;IACE,mBAAA;EAWF;AACF;AARA;EACE;IACE,uBAAA;EAUF;EARA;IACE,0BAAA;EAUF;EARA;IACE,0BAAA;EAUF;EARA;IACE,0BAAA;EAUF;EARA;IACE,0BAAA;EAUF;EARA;IACE,0BAAA;EAUF;EARA;IACE,0BAAA;EAUF;EARA;IACE,0BAAA;EAUF;EARA;IACE,0BAAA;EAUF;EARA;IACE,0BAAA;EAUF;EARA;IACE,yBAAA;EAUF;EARA;IACE,0BAAA;EAUF;EARA;IACE,uBAAA;EAUF;EARA;IACE,wBAAA;EAUF;EARA;IACE,2BAAA;EAUF;EARA;IACE,0BAAA;EAUF;EARA;IACE,2BAAA;EAUF;EARA;IACE,2BAAA;EAUF;EARA;IACE,2BAAA;EAUF;EARA;IACE,2BAAA;EAUF;EARA;IACE,2BAAA;EAUF;EARA;IACE,2BAAA;EAUF;EARA;IACE,2BAAA;EAUF;EARA;IACE,2BAAA;EAUF;EARA;IACE,2BAAA;EAUF;EARA;IACE,uBAAA;EAUF;AACF\",\"sourcesContent\":[\"@import '~bemuse/ui/common';\\n\\n.ExperimentScene {\\n  display: flex;\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  align-items: center;\\n  justify-content: center;\\n\\n  &のbutton {\\n    @include button;\\n    font-size: 18px;\\n  }\\n\\n  &のmessage {\\n    text-align: center;\\n    font-size: 16px;\\n  }\\n\\n  &のprogress {\\n    width: 100px;\\n    margin: 1em auto;\\n    border: 1px solid #8b8685;\\n    padding: 1px;\\n  }\\n  &のprogressBar {\\n    height: 5px;\\n    background: #8b8685;\\n    transition: 0.5s transform linear;\\n    transform-origin: left;\\n  }\\n\\n  &.is-finished &のwrapper {\\n    animation: 3.243243243s experiment-scene--auto-synchro linear infinite;\\n  }\\n  &.is-finished &のwrapperInner {\\n    animation: 3s experiment-scene--spin linear infinite;\\n    animation-delay: 13.378378377s;\\n  }\\n}\\n\\n@keyframes experiment-scene--auto-synchro {\\n  $small: 0.95;\\n  $large: 1.05;\\n  0.00% {\\n    transform: scale(1);\\n  }\\n  11.88% {\\n    transform: scale($small);\\n  }\\n  13.13% {\\n    transform: scale($large);\\n  }\\n  24.38% {\\n    transform: scale($small);\\n  }\\n  25.63% {\\n    transform: scale($large);\\n  }\\n  36.88% {\\n    transform: scale($small);\\n  }\\n  38.13% {\\n    transform: scale($large);\\n  }\\n  49.38% {\\n    transform: scale($small);\\n  }\\n  50.63% {\\n    transform: scale($large);\\n  }\\n  61.88% {\\n    transform: scale($small);\\n  }\\n  63.13% {\\n    transform: scale($large);\\n  }\\n  74.38% {\\n    transform: scale($small);\\n  }\\n  75.63% {\\n    transform: scale($large);\\n  }\\n  86.88% {\\n    transform: scale($small);\\n  }\\n  88.13% {\\n    transform: scale($large);\\n  }\\n  100.00% {\\n    transform: scale(1);\\n  }\\n}\\n\\n@keyframes experiment-scene--spin {\\n  0% {\\n    transform: rotate(0deg);\\n  }\\n  4% {\\n    transform: rotate(1.99deg);\\n  }\\n  8% {\\n    transform: rotate(3.85deg);\\n  }\\n  12% {\\n    transform: rotate(5.48deg);\\n  }\\n  16% {\\n    transform: rotate(6.75deg);\\n  }\\n  20% {\\n    transform: rotate(7.61deg);\\n  }\\n  24% {\\n    transform: rotate(7.98deg);\\n  }\\n  28% {\\n    transform: rotate(7.86deg);\\n  }\\n  32% {\\n    transform: rotate(7.24deg);\\n  }\\n  36% {\\n    transform: rotate(6.16deg);\\n  }\\n  40% {\\n    transform: rotate(4.7deg);\\n  }\\n  44% {\\n    transform: rotate(2.94deg);\\n  }\\n  48% {\\n    transform: rotate(1deg);\\n  }\\n  52% {\\n    transform: rotate(-1deg);\\n  }\\n  56% {\\n    transform: rotate(-2.94deg);\\n  }\\n  60% {\\n    transform: rotate(-4.7deg);\\n  }\\n  64% {\\n    transform: rotate(-6.16deg);\\n  }\\n  68% {\\n    transform: rotate(-7.24deg);\\n  }\\n  72% {\\n    transform: rotate(-7.86deg);\\n  }\\n  76% {\\n    transform: rotate(-7.98deg);\\n  }\\n  80% {\\n    transform: rotate(-7.61deg);\\n  }\\n  84% {\\n    transform: rotate(-6.75deg);\\n  }\\n  88% {\\n    transform: rotate(-5.48deg);\\n  }\\n  92% {\\n    transform: rotate(-3.85deg);\\n  }\\n  96% {\\n    transform: rotate(-1.99deg);\\n  }\\n  100% {\\n    transform: rotate(0deg);\\n  }\\n}\\n\",\"// The common library for user interface.\\n// This file must not emit any CSS code! It can only contain variable,\\n// mixin, or silent class declarations.\\n\\n$ui-font: 'Source Sans Pro', 'Segoe UI', 'Helvetica Neue', sans-serif;\\n$link-color: #039;\\n\\n@mixin full-screen {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n}\\n\\n@mixin full-screen-fixed {\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n}\\n\\n@mixin centered {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n}\\n\\n@mixin scrolling-y {\\n  overflow-x: hidden;\\n  overflow-y: auto;\\n  -webkit-overflow-scrolling: touch;\\n}\\n\\n@mixin scrolling-x {\\n  overflow-x: auto;\\n  overflow-y: hidden;\\n  -webkit-overflow-scrolling: touch;\\n}\\n\\n@mixin center-content {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n@mixin scene-background($url) {\\n  background: $url center no-repeat;\\n  background-size: cover;\\n}\\n\\n@mixin main-bg {\\n  @include scene-background(url(~bemuse/ui/images/bg/a.jpg));\\n}\\n\\n@mixin soft-shadow {\\n  box-shadow: 0 0.1vh 3vh rgba(#000, 0.1);\\n}\\n\\n@mixin button {\\n  font: inherit;\\n  background: #252423 linear-gradient(to bottom, #454443, #151413);\\n  border: 1px solid #555453;\\n  padding: 0.5ex 1.3ex;\\n  color: #fff;\\n  border-radius: 4px;\\n  box-shadow: 0 1px 3px rgba(#000, 0.5);\\n  &:hover {\\n    border-color: #656463;\\n  }\\n  &:focus {\\n    border-color: #8b8685;\\n    outline: 0;\\n  }\\n  &:active {\\n    background: #252423 linear-gradient(to top, #353433, #151413);\\n    border-color: #454443;\\n  }\\n}\\n\\n@mixin input {\\n  font: inherit;\\n  background: #252423 linear-gradient(to bottom, #151413, #292827);\\n  border: 1px solid #555453;\\n  padding: 0.5ex 1.3ex;\\n  color: #fff;\\n  border-radius: 4px;\\n  box-shadow: 0 1px 3px rgba(#000, 0.5);\\n  &:hover {\\n    border-color: #656463;\\n  }\\n  &:focus {\\n    border-color: #8b8685;\\n    outline: 0;\\n  }\\n  &:active {\\n    border-color: #454443;\\n  }\\n  &::selection {\\n    background: #8b8685;\\n    color: #8e8;\\n  }\\n}\\n\\n@mixin input-button-zindex($nominal) {\\n  position: relative;\\n  z-index: $nominal;\\n  &:hover {\\n    z-index: 30;\\n  }\\n  &:focus {\\n    z-index: 40;\\n  }\\n  &:active {\\n    z-index: 10;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","export default new AudioContext({\n  latencyHint: 'interactive',\n})\n","import _ from 'lodash'\nimport context from 'bemuse/audio-context'\nimport download from 'bemuse/utils/download'\nimport SamplingMaster from 'bemuse/sampling-master'\n\n/**\n * The asset URL of these files...\n */\nconst ASSET_URLS = {\n  'bgm.ogg': require('./data/bgm.ogg'),\n  'intro.ogg': require('./data/intro.ogg'),\n  'kick.ogg': require('./data/kick.ogg'),\n  'snare.ogg': require('./data/snare.ogg'),\n}\n\n/**\n * Loads the files and create a music instance.\n */\nexport async function load() {\n  const master = new SamplingMaster(context)\n\n  const sample = (name) =>\n    download(ASSET_URLS[`${name}.ogg`])\n      .as('arraybuffer')\n      .then((buf) => master.sample(buf))\n  const samples = _.fromPairs(\n    await Promise.all(\n      ['bgm', 'intro', 'kick', 'snare'].map((name) =>\n        sample(name).then((sampleObj) => [name, sampleObj])\n      )\n    )\n  )\n  return music(master, samples)\n}\n\n/**\n * Takes the sample and sequences a music\n */\nfunction music(master, samples) {\n  return function play(callbacks) {\n    master.unmute()\n\n    const BPM = 148\n    const time = new AudioTime(context, -1)\n\n    const filter = context.createBiquadFilter()\n    filter.type = 'lowpass'\n    filter.frequency.value = 0\n    filter.Q.value = 10\n    filter.connect(context.destination)\n\n    const state = { part2: null }\n\n    const sequence = beatSequencer(BPM, (beat, delay) => {\n      if (beat % 8 !== 7) {\n        samples.kick.play(delay)\n      }\n      if (state.part2 !== null) {\n        beat -= state.part2.begin\n        if (beat % 128 === 0) {\n          samples.bgm.play(delay)\n        }\n      } else {\n        if (beat % 32 === 0) {\n          samples.intro.play(delay, { node: filter })\n        }\n        if (beat % 32 === 31) {\n          if (state.ok === true) {\n            samples.snare.play(delay)\n            state.part2 = { begin: beat + 1 }\n            callbacks.a()\n          }\n        }\n      }\n    })\n\n    setInterval(() => sequence(time.t), 33)\n\n    return {\n      ok() {\n        state.ok = true\n      },\n      progress(p) {\n        filter.frequency.value = 20000 * p * p * p\n      },\n      getSample() {\n        const nearestBeat = Math.round((time.t * BPM) / 60)\n        const nearestBeatTime = (nearestBeat * 60) / BPM\n        return [nearestBeat, time.t - nearestBeatTime]\n      },\n    }\n  }\n}\n\nfunction beatSequencer(bpm, f) {\n  let beat = -1\n  return (time) => {\n    const nowBeat = Math.floor(((time + 0.1) * bpm) / 60)\n    while (beat < nowBeat) {\n      beat += 1\n      const beatTime = (beat * 60) / bpm\n      f(beat, beatTime - time)\n    }\n  }\n}\n\nclass AudioTime {\n  constructor(audioContext, leadTime) {\n    this._context = audioContext\n    this._start = audioContext.currentTime\n    this._startTime = leadTime\n  }\n\n  get t() {\n    return this._context.currentTime - this._start + this._startTime\n  }\n}\n","\n      import API from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../common/temp/node_modules/.pnpm/css-loader@6.7.3_webpack@5.75.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../common/temp/node_modules/.pnpm/postcss-loader@7.0.2_webpack@5.75.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!../../../../common/temp/node_modules/.pnpm/sass-loader@13.2.0_sass@1.57.1+webpack@5.75.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./ExperimentScene.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../common/temp/node_modules/.pnpm/css-loader@6.7.3_webpack@5.75.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../common/temp/node_modules/.pnpm/postcss-loader@7.0.2_webpack@5.75.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!../../../../common/temp/node_modules/.pnpm/sass-loader@13.2.0_sass@1.57.1+webpack@5.75.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./ExperimentScene.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import './ExperimentScene.scss'\n\nimport c from 'classnames'\nimport React, { MouseEventHandler } from 'react'\n\nexport interface ExperimentSceneProps {\n  finished: boolean\n  loading: boolean\n  started: boolean\n  listening: boolean\n  numSamples: number\n  latency: number\n  onStart?: MouseEventHandler<HTMLButtonElement>\n}\n\nconst ExperimentScene = (props: ExperimentSceneProps) => {\n  return (\n    <div className={c('ExperimentScene', { 'is-finished': props.finished })}>\n      <div className='ExperimentSceneのwrapper'>\n        <div className='ExperimentSceneのwrapperInner'>\n          <Contents {...props} onStart={props.onStart} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ExperimentScene\n\nconst Ready = ({\n  onStart,\n}: {\n  onStart?: MouseEventHandler<HTMLButtonElement>\n}) => (\n  <div className='ExperimentSceneのready'>\n    <button className='ExperimentSceneのbutton' onClick={onStart}>\n      Start Calibration\n    </button>\n  </div>\n)\n\nconst Message = ({ text }: { text: string }) => (\n  <div className='ExperimentSceneのmessage'>{text}</div>\n)\n\nconst Contents = ({\n  loading,\n  started,\n  listening,\n  onStart,\n  finished,\n  numSamples,\n  latency,\n}: ExperimentSceneProps) => {\n  if (loading) {\n    return null\n  }\n  if (!started) {\n    return <Ready onStart={onStart} />\n  }\n  if (!listening) {\n    return <Message text='Please listen to the beats…' />\n  }\n  return (\n    <Collection finished={finished} numSamples={numSamples} latency={latency} />\n  )\n}\n\nconst Collection = ({\n  finished,\n  numSamples,\n  latency,\n}: {\n  finished: boolean\n  numSamples: number\n  latency: number\n}) => {\n  const scale = finished ? 1 : easeOut(Math.min(1, numSamples / 84))\n  const transform = `scaleX(${scale})`\n  const style = {\n    transform: transform,\n    WebkitTransform: transform,\n  }\n  return (\n    <div className='ExperimentSceneのcollection'>\n      <Message\n        text={\n          finished\n            ? `Your latency is ${latency}ms. Please close this window.`\n            : 'Please press the space bar when you hear the kick drum.'\n        }\n      />\n      <div className='ExperimentSceneのprogress'>\n        <div className='ExperimentSceneのprogressBar' style={style} />\n      </div>\n    </div>\n  )\n}\n\nfunction easeOut(x: number) {\n  return 1 - Math.pow(1 - x, 2)\n}\n","import Bacon from 'baconjs'\nimport React from 'react'\n\nexport { Bacon }\n\nlet lock = false\n\nexport function Action(transform = (x) => x) {\n  const bus = new Bacon.Bus()\n  const action = function () {\n    if (lock) {\n      throw new Error(\n        'An action should not fire another action! (' + lock.stack + ')'\n      )\n    }\n    try {\n      const payload = transform.apply(null, arguments)\n      lock = new Error('Previous lock:')\n      bus.push(payload)\n    } finally {\n      lock = false\n    }\n  }\n  action.bus = bus\n  action.debug = function (prefix) {\n    bus.map((value) => [prefix, value]).log()\n    return action\n  }\n  return action\n}\n\nexport function Store(store, options = {}) {\n  const lazy = !!options.lazy\n  store = toProperty(store)\n  store.get = () => {\n    let data\n    const unsubscribe = store.onValue((_data) => (data = _data))\n    setTimeout(unsubscribe)\n    return data\n  }\n  if (!lazy) {\n    store.onValue(() => {})\n  }\n  return store\n}\n\nfunction toProperty(store) {\n  if (store instanceof Bacon.Property) {\n    return store\n  } else if (store instanceof Bacon.EventStream) {\n    throw new Error('Please convert Bacon.EventStream to Bacon.Property first.')\n  } else if (store && typeof store === 'object') {\n    return Bacon.combineTemplate(store)\n  } else {\n    throw new Error('Expected a Bacon.Property or a template.')\n  }\n}\n\nexport const connect = (props川) => (Component) => {\n  const propsProperty = toProperty(props川)\n  return class extends React.Component {\n    constructor(props) {\n      super(props)\n      this._unsubscribe = propsProperty.onValue(this.handleValue)\n      let initialValue\n      const initialUnsubscribe = propsProperty.onValue(\n        (value) => (initialValue = value)\n      )\n      initialUnsubscribe()\n      this.state = { value: initialValue }\n    }\n\n    componentWillUnmount() {\n      this._mounted = false\n      if (this._unsubscribe) this._unsubscribe()\n    }\n\n    componentDidMount() {\n      this._mounted = true\n    }\n\n    handleValue = (value) => {\n      if (this._mounted) this.setState({ value })\n    }\n\n    render() {\n      return <Component {...(this.state.value || {})} {...this.props} />\n    }\n  }\n}\n","import * as Music from './music'\nimport React from 'react'\nimport { createRoot } from 'react-dom/client'\nimport ExperimentScene from './ui/ExperimentScene'\nimport $ from 'jquery'\nimport _ from 'lodash'\nimport Bacon from 'baconjs'\nimport { connect } from 'bemuse/flux'\n\nexport function main(bootContext) {\n  bootContext.setStatus('Loading song')\n  const state口 = new Bacon.Bus()\n\n  const state川 = state口.scan(\n    {\n      loading: true,\n      started: false,\n      finished: false,\n      listening: false,\n      numSamples: 0,\n      latency: 0,\n    },\n    (state, change) => _.assign({}, state, change)\n  )\n\n  const ConnectedExperimentScene = connect(state川)(ExperimentScene)\n\n  const scene = React.createElement(ConnectedExperimentScene, {\n    onStart: () => {\n      play()\n      postMessage({ type: 'calibration-started' })\n      addEventListener('beforeunload', () => {\n        postMessage({ type: 'calibration-closed' })\n      })\n    },\n  })\n\n  createRoot($('<div></div>').appendTo('body')[0]).render(scene)\n\n  let play\n\n  function postMessage(data) {\n    if (window.opener) {\n      window.opener.postMessage(data, '*')\n    }\n  }\n\n  function getLatency(samples) {\n    const data = samples.map((d) => d[1])\n    data.sort((a, b) => a - b)\n    let count = 0\n    let sum = 0\n    const start = Math.floor((data.length * 1) / 7)\n    for (let i = start; i < (data.length * 6) / 7; i++) {\n      count += 1\n      sum += data[i]\n    }\n    return Math.round((sum / count) * 1000)\n  }\n\n  return Music.load().then((music) => {\n    const bound = 56\n    const samples = []\n    state口.push({ loading: false })\n    play = () => {\n      state口.push({ started: true })\n      const remote = music({\n        a() {\n          const latency = Math.max(0, getLatency(samples))\n          state口.push({ finished: true, latency })\n          postMessage({ latency: latency })\n        },\n      })\n      const tap = () => {\n        samples.push(remote.getSample())\n        remote.progress(Math.min(1, samples.length / bound))\n        if (samples.length >= bound) remote.ok()\n        state口.push({ numSamples: samples.length })\n      }\n      setTimeout(() => {\n        state口.push({ listening: true })\n        window.addEventListener('keydown', (e) => {\n          if (e.which !== 32) return\n          e.preventDefault()\n          tap()\n        })\n        window.addEventListener('touchstart', (e) => {\n          if (e.touches.length !== 1) return\n          e.preventDefault()\n          tap()\n        })\n      }, 6675)\n    }\n  })\n}\n","import bytes from 'bytes'\n\nconst wrap = (f) => (progress) => progress.progress !== null ? f(progress) : ''\n\n// Formats the `Progress` as bytes (e.g. 1.23mb of 1.31mb).\nexport const BYTES_FORMATTER = wrap(\n  (progress) => bytes(progress.current) + ' / ' + bytes(progress.total)\n)\n\n// Formats the `Progress` as percentage.\nexport const PERCENTAGE_FORMATTER = wrap(\n  (progress) => ((progress.current / progress.total) * 100).toFixed(1) + '%'\n)\n\n// Formats the `Progress` simply by using the value of `Progress#extra`.\nexport const EXTRA_FORMATTER = wrap((progress) => progress.extra + '')\n","import defaultAudioContext from 'bemuse/audio-context'\nimport readBlob from 'bemuse/utils/read-blob'\nimport { decodeOGG } from './ogg'\n\nexport const FADE_LENGTH = 0.001\n\nconst dummyAudioTag = document.createElement('audio')\n// Checks whether an audio format is supported.\nexport function canPlay(type) {\n  // We have a Vorbis audio decoder!\n  if (type === 'audio/ogg; codecs=\"vorbis\"') return true\n  return dummyAudioTag.canPlayType(type) === 'probably'\n}\n\nconst needsVorbisDecoder = !dummyAudioTag.canPlayType(\n  'audio/ogg; codecs=\"vorbis\"'\n)\n\n// The sampling master is a wrapper class around Web Audio API\n// that takes care of:\n//\n// - Decoding audio from an ArrayBuffer or Blob (resulting in a \"Sample\").\n// - Playing the `Sample` and managing its lifecycle.\nexport class SamplingMaster {\n  constructor(audioContext) {\n    this._audioContext = audioContext || defaultAudioContext\n    this._samples = []\n    this._groups = []\n    this._instances = new Set()\n    this._destination = this._audioContext.destination\n  }\n\n  // Connects a dummy node to the audio, thereby unmuting the audio system on\n  // iOS devices (which keeps the audio muted until a user interacts with the\n  // page).\n  unmute() {\n    unmuteAudio(this._audioContext)\n  }\n\n  // The underlying AudioContext.\n  get audioContext() {\n    return this._audioContext\n  }\n\n  // The audio destination.\n  get destination() {\n    return this._destination\n  }\n\n  // The current time\n  // See: https://webaudio.github.io/web-audio-api/#dom-baseaudiocontext-currenttime\n  get currentTime() {\n    return this._audioContext.currentTime\n  }\n\n  // Destroys this SamplingMaster, make it unusable.\n  destroy() {\n    if (this._destroyed) return\n    this._destroyed = true\n    for (const sample of this._samples) sample.destroy()\n    for (const instance of this._instances) instance.destroy()\n    this._samples = null\n    this._instances = null\n  }\n\n  // Decodes the audio data from a Blob or an ArrayBuffer.\n  // Returns an AudioBuffer which can be re-used in other sampling masters.\n  decode(blobOrArrayBuffer) {\n    return this._coerceToArrayBuffer(blobOrArrayBuffer).then((arrayBuffer) =>\n      this._decodeAudio(arrayBuffer)\n    )\n  }\n\n  // Creates a `Sample` from a Blob or an ArrayBuffer or an AudioBuffer.\n  sample(blobOrArrayBufferOrAudioBuffer) {\n    const audioBufferPromise = (() => {\n      if (blobOrArrayBufferOrAudioBuffer.numberOfChannels) {\n        return Promise.resolve(blobOrArrayBufferOrAudioBuffer)\n      } else {\n        return this.decode(blobOrArrayBufferOrAudioBuffer)\n      }\n    })()\n    return audioBufferPromise.then((audioBuffer) => {\n      if (this._destroyed) throw new Error('SamplingMaster already destroyed!')\n      const sample = new Sample(this, audioBuffer)\n      this._samples.push(sample)\n      return sample\n    })\n  }\n\n  group(options) {\n    const group = new SoundGroup(this, options)\n    this._groups.push(group)\n    return group\n  }\n\n  _coerceToArrayBuffer(blobOrArrayBuffer) {\n    if (blobOrArrayBuffer instanceof ArrayBuffer) {\n      return Promise.resolve(blobOrArrayBuffer)\n    } else {\n      return readBlob(blobOrArrayBuffer).as('arraybuffer')\n    }\n  }\n\n  _decodeAudio(arrayBuffer) {\n    return new Promise((resolve, reject) => {\n      if (needsVorbisDecoder && arrayBuffer.byteLength > 4) {\n        const view = new Uint8Array(arrayBuffer, 0, 4)\n        if (\n          view[0] === 0x4f &&\n          view[1] === 0x67 &&\n          view[2] === 0x67 &&\n          view[3] === 0x53\n        ) {\n          return resolve(decodeOGG(this.audioContext, arrayBuffer))\n        }\n      }\n      this.audioContext.decodeAudioData(\n        arrayBuffer,\n        function decodeAudioDataSuccess(audioBuffer) {\n          resolve(audioBuffer)\n        },\n        function decodeAudioDataFailure(e) {\n          reject(new Error('Unable to decode audio: ' + e))\n        }\n      )\n    })\n  }\n\n  _startPlaying(instance) {\n    this._instances.add(instance)\n  }\n\n  _stoppedPlaying(instance) {\n    this._instances.delete(instance)\n  }\n}\n\n// Sound group\nexport class SoundGroup {\n  constructor(samplingMaster, { volume } = {}) {\n    this._master = samplingMaster\n    this._gain = this._master.audioContext.createGain()\n    if (volume != null) this._gain.gain.value = volume\n    this._gain.connect(this._master.destination)\n  }\n\n  get destination() {\n    return this._gain\n  }\n\n  destroy() {\n    this._gain.disconnect()\n    this._gain = null\n  }\n}\n\n// The Sample is created by and belongs to the `SamplingMaster`.\n//\n// You don't invoke this constructor directly; it is invoked by\n// `SamplingMaster#create`.\nexport class Sample {\n  constructor(samplingMaster, /** @type {AudioBuffer} */ audioBuffer) {\n    this._master = samplingMaster\n    this._buffer = audioBuffer\n  }\n\n  // Plays the sample and returns the new PlayInstance.\n  play(delay, options) {\n    return new PlayInstance(this._master, this._buffer, delay, options)\n  }\n\n  // Destroys this sample, thereby making it unusable.\n  destroy() {\n    this._master = null\n    this._buffer = null\n  }\n\n  get duration() {\n    return this._buffer.duration\n  }\n}\n\n// When a `Sample` is played, a PlayInstance is created.\n// A PlayInstance may not be reused; after the sound finishes playing,\n// you have to invoke `Sample#play` again.\n//\n// You don't invoke this constructor directly; it is invoked by `Sample#play`.\nexport class PlayInstance {\n  constructor(samplingMaster, buffer, delay, options = {}) {\n    delay = delay || 0\n    this._master = samplingMaster\n\n    // Connect all the stuff...\n    const context = samplingMaster.audioContext\n    const source = context.createBufferSource()\n    source.buffer = buffer\n    source.onended = () => this.stop()\n    const gain = context.createGain()\n    source.connect(gain)\n    const destination =\n      options.node ||\n      (options.group && options.group.destination) ||\n      samplingMaster.destination\n    gain.connect(destination)\n    this._source = source\n    this._gain = this.TEST_node = gain\n\n    // Start the sound.\n    const startTime = !delay ? 0 : Math.max(0, context.currentTime + delay)\n    const startOffset = options.start || 0\n    const fadeIn = startOffset > 0\n    let fadeOutAt = false\n    if (fadeIn) {\n      gain.gain.setValueAtTime(0, 0)\n    }\n    if (options.end !== undefined) {\n      const duration = Math.max(options.end - startOffset, 0)\n      source.start(startTime, startOffset, duration + FADE_LENGTH)\n      fadeOutAt = context.currentTime + delay + duration\n    } else {\n      source.start(startTime, startOffset)\n    }\n    if (fadeIn) {\n      gain.gain.setValueAtTime(0, context.currentTime + delay)\n      gain.gain.linearRampToValueAtTime(\n        1,\n        context.currentTime + delay + FADE_LENGTH\n      )\n    }\n    if (fadeOutAt !== false) {\n      gain.gain.setValueAtTime(1, fadeOutAt)\n      gain.gain.linearRampToValueAtTime(0, fadeOutAt + FADE_LENGTH)\n    }\n    this._master._startPlaying(this)\n  }\n\n  // Stops the sample and disconnects the underlying Web Audio nodes.\n  stop() {\n    if (!this._source) return\n    this._source.stop(0)\n    this._source.disconnect()\n    this._gain.disconnect()\n    this._source = null\n    this._gain = null\n    this._master._stoppedPlaying(this)\n    if (this.onstop) this.onstop()\n  }\n\n  // Makes this PlayInstance sound off-pitch, as a result of badly hitting\n  // a note.\n  bad() {\n    if (!this._source) return\n    this._source.playbackRate.value =\n      Math.random() < 0.5 ? Math.pow(2, 1 / 24) : Math.pow(2, -1 / 24)\n  }\n\n  // Destroys this PlayInstance.\n  destroy() {\n    this.stop()\n  }\n}\n\nexport default SamplingMaster\n\n/**\n * Enables Web Audio on iOS. By default, on iOS, audio is disabled.\n * This function must be called before audio will start working. It must be\n * called as a response to some user interaction (e.g. touchstart).\n *\n * Also, there’s now Chrome autoplay policy taking effect.\n * https://developers.google.com/web/updates/2017/09/autoplay-policy-changes\n *\n * @param {AudioContext} ctx The AudioContext to be unmuted.\n */\nexport function unmuteAudio(ctx = defaultAudioContext) {\n  // Perform some strange magic to unmute the audio on iOS devices.\n  // This code doesn’t make sense at all, you know.\n  const gain = ctx.createGain()\n  const osc = ctx.createOscillator()\n  osc.frequency.value = 440\n  osc.start(ctx.currentTime + 0.1)\n  osc.stop(ctx.currentTime + 0.1)\n  gain.connect(ctx.destination)\n  gain.disconnect()\n\n  resumeContext(ctx).catch((e) => {\n    console.error('[sampling-master] Cannot resume AudioContext', e)\n  })\n}\n\nasync function resumeContext(ctx) {\n  return ctx.resume()\n}\n","import throat from 'throat'\n\ntype OGGDecodeEvent = {\n  data?: Float32Array[]\n  sampleRate: number\n  error?: any\n  eof?: boolean\n}\n\ntype OGGDecoder = {\n  decode(arrayBuffer: ArrayBuffer, callback: (e: OGGDecodeEvent) => void): void\n}\n\nlet decoderPromise: Promise<OGGDecoder>\n\nconst limit = throat(1)\n\nfunction getDecoder() {\n  if (!decoderPromise) {\n    decoderPromise = import(\n      // @ts-ignore\n      /* webpackChunkName: 'stbvorbis' */ './vendor/stbvorbis/stbvorbis-e6da5fe-NDEBUG.js?raw'\n    )\n      .then((ns) => ns.default)\n      .then((src) => {\n        // eslint-disable-next-line no-eval\n        return (0, eval)(src + 'stbvorbis')\n      })\n  }\n  return decoderPromise\n}\n\n/**\n * Decodes an OGG file using stbvorbis.js.\n */\nexport async function decodeOGG(\n  audioContext: AudioContext,\n  arrayBuffer: ArrayBuffer\n) {\n  const stbvorbis = await getDecoder()\n  return limit(() => doDecodeOGG(stbvorbis, audioContext, arrayBuffer))\n}\n\nfunction doDecodeOGG(\n  stbvorbis: OGGDecoder,\n  audioContext: AudioContext,\n  arrayBuffer: ArrayBuffer\n) {\n  return new Promise<AudioBuffer>((resolve, reject) => {\n    const buffers: Float32Array[][] = []\n    let totalLength = 0\n    let sampleRate: number\n    stbvorbis.decode(arrayBuffer, function (e) {\n      if (e.data) {\n        sampleRate = e.sampleRate\n        buffers.push(e.data)\n        totalLength += e.data[0].length\n      }\n      if (e.error) {\n        const error =\n          e.error instanceof Error ? e.error : `stbvorbis.js Error: ${e.error}`\n        reject(error)\n      }\n      if (e.eof) {\n        resolve(createBuffer(audioContext, buffers, totalLength, sampleRate))\n      }\n    })\n  })\n}\n\nasync function createBuffer(\n  audioContext: AudioContext,\n  decodedChunks: Float32Array[][],\n  length: number,\n  sampleRate: number\n) {\n  if (!length) throw new Error(`stbvorbis.js Error: No length`)\n  if (!sampleRate) throw new Error(`stbvorbis.js Error: No sample rate`)\n  const numberOfChannels = decodedChunks[0].length\n  const audioBuffer = audioContext.createBuffer(\n    numberOfChannels,\n    length,\n    sampleRate\n  )\n  const channels: ChannelDataWriter[] = Array(audioBuffer.numberOfChannels)\n    .fill(null)\n    .map((_, ch) => new ChannelDataWriter(audioBuffer.getChannelData(ch)))\n  for (const chunk of decodedChunks) {\n    chunk.forEach((audioSamples, channelIndex) => {\n      channels[channelIndex].write(audioSamples)\n    })\n  }\n  return audioBuffer\n}\n\nclass ChannelDataWriter {\n  private offset = 0\n  constructor(private data: Float32Array) {}\n  write(audioSamples: Float32Array) {\n    // iOS Safari does not support `buf.copyToChannel(a, ch, track[ch])`, so we had to copy audio data sample-by-sample.\n    const { offset, data } = this\n    for (let i = 0; i < audioSamples.length; i++) {\n      data[i + offset] = audioSamples[i]\n    }\n    this.offset += audioSamples.length\n  }\n}\n","import delay from 'delay'\nimport { BYTES_FORMATTER } from 'bemuse/progress/formatters'\n\n// Downloads the file from the URL.\n// The download will not actually be started unless the ``as()`` method\n// is called.\n//\n// .. js:function:: as(type)\n//\n//    Initiates the download as ``type``. The ``type`` is a string such as\n//    \"arraybuffer\" or \"blob\".\nexport function download(\n  url,\n  { getRetryDelay = () => 1000 + Math.random() * 4000 } = {}\n) {\n  return {\n    async as(type, progress) {\n      let shouldGiveUp = false\n      for (let i = 1; ; i++) {\n        try {\n          return await attempt()\n        } catch (error) {\n          console.error(`Unable to download ${url} [attempt ${i}]`, error)\n          if (i >= 3 || shouldGiveUp) throw error\n          const waitMs = getRetryDelay()\n          await delay(waitMs)\n        }\n      }\n      function attempt() {\n        return new Promise((resolve, reject) => {\n          const xh = new XMLHttpRequest()\n          xh.open('GET', url, true)\n          xh.responseType = type\n          xh.onload = () => {\n            if (+xh.status === 200) {\n              resolve(xh.response)\n            } else {\n              if (+xh.status === 403 || +xh.status === 404) {\n                shouldGiveUp = true\n              }\n              reject(new Error(`Unable to download ${url}: HTTP ${xh.status}`))\n            }\n          }\n          xh.onerror = () => reject(new Error(`Unable to download ${url}`))\n          if (progress) {\n            progress.formatter = BYTES_FORMATTER\n            xh.onprogress = (e) => progress.report(e.loaded, e.total)\n          }\n          xh.send(null)\n        })\n      }\n    },\n  }\n}\n\nexport default download\n","export default readBlob\n\n// Reads the blob as a specified type. The blob will not actually be read\n// unless the ``as()`` method is called.\n//\n// .. js:function:: as(type)\n//\n//    Starts reading the blob as ``type``. The ``type`` is a String such as\n//    \"arraybuffer\" or \"text\".\nexport function readBlob(blob) {\n  return {\n    as(type) {\n      return new Promise(function (resolve, reject) {\n        const reader = new FileReader()\n        reader.onload = function () {\n          resolve(reader.result)\n        }\n        reader.onerror = function () {\n          reject(new Error('Unable to read from Blob'))\n        }\n        switch (type) {\n          case 'arraybuffer':\n            reader.readAsArrayBuffer(blob)\n            break\n          case 'text':\n            reader.readAsText(blob)\n            break\n        }\n      })\n    },\n  }\n}\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","AudioContext","latencyHint","ASSET_URLS","async","load","master","samples","Promise","all","map","name","download","as","then","buf","sample","sampleObj","callbacks","unmute","BPM","time","AudioTime","filter","type","frequency","value","Q","connect","state","part2","sequence","bpm","f","beat","nowBeat","Math","floor","beatSequencer","delay","kick","play","begin","bgm","intro","node","ok","snare","a","setInterval","t","progress","p","getSample","nearestBeat","round","nearestBeatTime","music","constructor","audioContext","leadTime","this","_context","_start","currentTime","_startTime","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","props","className","finished","Contents","onStart","Ready","onClick","Message","text","loading","started","listening","numSamples","latency","Collection","x","transform","min","pow","style","WebkitTransform","toProperty","store","Error","Component","propsProperty","initialValue","super","handleValue","_mounted","setState","_unsubscribe","onValue","initialUnsubscribe","componentWillUnmount","componentDidMount","render","main","bootContext","setStatus","scan","change","ConnectedExperimentScene","scene","postMessage","addEventListener","data","window","opener","appendTo","remote","max","d","sort","b","count","sum","i","length","getLatency","tap","setTimeout","e","which","preventDefault","touches","wrap","BYTES_FORMATTER","current","total","PERCENTAGE_FORMATTER","toFixed","EXTRA_FORMATTER","extra","FADE_LENGTH","dummyAudioTag","document","createElement","needsVorbisDecoder","canPlayType","SoundGroup","samplingMaster","volume","_master","_gain","createGain","gain","destination","destroy","disconnect","Sample","audioBuffer","_buffer","PlayInstance","duration","buffer","context","source","createBufferSource","onended","stop","group","_source","TEST_node","startTime","startOffset","start","fadeIn","fadeOutAt","setValueAtTime","undefined","end","linearRampToValueAtTime","_startPlaying","_stoppedPlaying","onstop","bad","playbackRate","random","unmuteAudio","ctx","osc","createOscillator","resume","resumeContext","catch","console","error","_audioContext","_samples","_groups","_instances","Set","_destination","_destroyed","instance","decode","blobOrArrayBuffer","_coerceToArrayBuffer","arrayBuffer","_decodeAudio","blobOrArrayBufferOrAudioBuffer","numberOfChannels","resolve","ArrayBuffer","reject","byteLength","view","Uint8Array","decodeAudioData","add","delete","decoderPromise","limit","decodeOGG","stbvorbis","ns","default","src","eval","buffers","sampleRate","totalLength","eof","decodedChunks","createBuffer","channels","Array","fill","_","ch","ChannelDataWriter","getChannelData","chunk","forEach","audioSamples","channelIndex","write","doDecodeOGG","offset","url","getRetryDelay","shouldGiveUp","xh","XMLHttpRequest","open","responseType","onload","status","response","onerror","formatter","onprogress","report","loaded","send","waitMs","blob","reader","FileReader","result","readAsArrayBuffer","readAsText"],"sourceRoot":""}