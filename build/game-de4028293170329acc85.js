(this.webpackJsonp=this.webpackJsonp||[]).push([[7,15,17],{105:function(t,e,n){"use strict";e.a=function(t){return{as:function(e){return new Promise(function(n,r){var i=new FileReader;switch(i.onload=function(){n(i.result)},i.onerror=function(){r(new Error("Unable to read from Blob"))},e){case"arraybuffer":i.readAsArrayBuffer(t);break;case"text":i.readAsText(t)}})}}}},1080:function(t,e,n){(function(e,n,r){t.exports=function(){var t,i,o;return function t(e,n,r){function i(a,u){if(!n[a]){if(!e[a]){var s="function"==typeof _dereq_&&_dereq_;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n||t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function n(t){var n=new e(t),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}t.any=function(t){return n(t)},t.prototype.any=function(){return n(this)}}},{}],2:[function(t,n,r){"use strict";var i;try{throw new Error}catch(t){i=t}var o=t("./schedule"),a=t("./queue"),u=t("./util");function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new a(16),this._normalQueue=new a(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=o}function c(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function l(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function f(t){this._normalQueue._pushOne(t),this._queueTick()}s.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},s.prototype.disableTrampolineIfNecessary=function(){u.hasDevTools&&(this._trampolineEnabled=!1)},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},s.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},u.hasDevTools?(s.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?c.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},s.prototype.invoke=function(t,e,n){this._trampolineEnabled?l.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},s.prototype.settlePromises=function(t){this._trampolineEnabled?f.call(this,t):this._schedule(function(){t._settlePromises()})}):(s.prototype.invokeLater=c,s.prototype.invoke=l,s.prototype.settlePromises=f),s.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},s.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},n.exports=s,n.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},u=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},s=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var c=n(o),l=new t(e);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(c),c instanceof t){var h={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:c};f._then(e,a,void 0,l,h),c._then(u,s,void 0,l,h),l._setOnCancel(c)}else l._resolveCallback(f);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var i=t("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(t){}return i},e.exports=i},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){var n=t("./util"),r=n.canEvaluate;function i(t){var r=this.pop(),i=function(t,r){var i;if(null!=t&&(i=t[r]),"function"!=typeof i){var o="Object "+n.classString(t)+" has no method '"+n.toString(r)+"'";throw new e.TypeError(o)}return i}(t,r);return i.apply(t,this)}function o(t){return t[this]}function a(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}n.isIdentifier,e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(i,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=a;else if(r){var i=(void 0)(t);e=null!==i?i:o}else e=o;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),a=o.tryCatch,u=o.errorObj,s=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),s.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=a(t).call(this._boundValue());r===u&&(this._attachExtraTrace(r.e),s.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),s.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=t("./es5").keys,i=n.tryCatch,o=n.errorObj;return function(t,a,u){return function(s){var c=u._boundValue();t:for(var l=0;l<t.length;++l){var f=t[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(s instanceof f)return i(a).call(c,s)}else if("function"==typeof f){var h=i(f).call(c,s);if(h===o)return h;if(h)return i(a).call(c,s)}else if(n.isObject(s)){for(var p=r(f),d=0;d<p.length;++d){var v=p[d];if(f[v]!=s[v])continue t}return i(a).call(c,s)}}return e}}}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){var e=!1,n=[];function r(){this._trace=new r.CapturedTrace(i())}function i(){var t=n.length-1;if(t>=0)return n[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var t=n.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},r.CapturedTrace=null,r.create=function(){if(e)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,u=t.prototype._peekContext,s=t.prototype._promiseCreated;r.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=u,t.prototype._promiseCreated=s,e=!1},e=!0,t.prototype._pushContext=r.prototype._pushContext,t.prototype._popContext=r.prototype._popContext,t._peekContext=t.prototype._peekContext=i,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},r}},{}],9:[function(t,n,r){"use strict";n.exports=function(n,r){var i,o,a,u=n._getDomain,s=n._async,c=t("./errors").Warning,l=t("./util"),f=l.canAttachTrace,h=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,p=/\((?:timers\.js):\d+:\d+\)/,d=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,v=null,_=null,y=!1,g=!(0==l.env("BLUEBIRD_DEBUG")),m=!(0==l.env("BLUEBIRD_WARNINGS")||!g&&!l.env("BLUEBIRD_WARNINGS")),b=!(0==l.env("BLUEBIRD_LONG_STACK_TRACES")||!g&&!l.env("BLUEBIRD_LONG_STACK_TRACES")),w=0!=l.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(m||!!l.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout(function(){t._notifyUnhandledRejection()},1)}},n.prototype._notifyUnhandledRejectionIsHandled=function(){G("rejectionHandled",i,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),G("unhandledRejection",o,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return U(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=u();o="function"==typeof t?null===e?t:l.domainBind(e,t):void 0},n.onUnhandledRejectionHandled=function(t){var e=u();i="function"==typeof t?null===e?t:l.domainBind(e,t):void 0};var x=function(){};n.longStackTraces=function(){if(s.haveItemsQueued()&&!Q.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Q.longStackTraces&&H()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace;Q.longStackTraces=!0,x=function(){if(s.haveItemsQueued()&&!Q.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,r.deactivateLongStackTraces(),s.enableTrampoline(),Q.longStackTraces=!1},n.prototype._captureStackTrace=L,n.prototype._attachExtraTrace=N,r.activateLongStackTraces(),s.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return Q.longStackTraces&&H()};var k=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return l.global.dispatchEvent(t),function(t,e){var n=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!l.global.dispatchEvent(n)}}if("function"==typeof Event){var t=new Event("CustomEvent");return l.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,!l.global.dispatchEvent(n)}}var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),l.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!l.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),S=l.isNode?function(){return e.emit.apply(e,arguments)}:l.global?function(t){var e="on"+t.toLowerCase(),n=l.global[e];return!!n&&(n.apply(l.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function E(t,e){return{promise:e}}var j={promiseCreated:E,promiseFulfilled:E,promiseRejected:E,promiseResolved:E,promiseCancelled:E,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:E},C=function(t){var e=!1;try{e=S.apply(null,arguments)}catch(t){s.throwLater(t),e=!0}var n=!1;try{n=k(t,j[t].apply(null,arguments))}catch(t){s.throwLater(t),n=!0}return n||e};function A(){return!1}function O(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+l.toString(t));r._attachCancellationCallback(t)})}catch(t){return t}}function T(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?l.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function P(){return this._onCancelField}function R(t){this._onCancelField=t}function I(){this._cancellationParent=void 0,this._onCancelField=void 0}function B(t,e){if(0!=(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}n.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&x()),"warnings"in t){var e=t.warnings;Q.warnings=!!e,w=Q.warnings,l.isObject(e)&&"wForgottenReturn"in e&&(w=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!Q.cancellation){if(s.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=I,n.prototype._propagateFrom=B,n.prototype._onCancel=P,n.prototype._setOnCancel=R,n.prototype._attachCancellationCallback=T,n.prototype._execute=O,M=B,Q.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!Q.monitoring?(Q.monitoring=!0,n.prototype._fireEvent=C):!t.monitoring&&Q.monitoring&&(Q.monitoring=!1,n.prototype._fireEvent=A)),n},n.prototype._fireEvent=A,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var M=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function F(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function L(){this._trace=new J(this._peekContext())}function N(t,e){if(f(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=z(t);l.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),l.notEnumerableProp(t,"__stackCleaned__",!0)}}}function U(t,e,r){if(Q.warnings){var i,o=new c(t);if(e)r._attachExtraTrace(o);else if(Q.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var a=z(o);o.stack=a.message+"\n"+a.stack.join("\n")}C("warning",o)||W(o,"",!0)}}function D(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||v.test(r),o=i&&q(r);i&&!o&&(y&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function z(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||v.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:D(e)}}function W(t,e,n){if("undefined"!=typeof console){var r;if(l.isObject(t)){var i=t.stack;r=e+_(i,t)}else r=e+String(t);"function"==typeof a?a(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function G(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){s.throwLater(t)}"unhandledRejection"===t?C(t,n,r)||i||W(n,"Unhandled rejection "):C(t,r)}function V(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{if(e=t&&"function"==typeof t.toString?t.toString():l.toString(t),/\[object [a-zA-Z0-9$_]+\]/.test(e))try{var n=JSON.stringify(t);e=n}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){return t.length<41?t:t.substr(0,38)+"..."}(e)+">, no stack trace)"}function H(){return"function"==typeof K}var q=function(){return!1},Y=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function $(t){var e=t.match(Y);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function J(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);K(this,J),e>32&&this.uncycle()}l.inherits(J,Error),r.CapturedTrace=J,J.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;for(var r=(t=this._length=r)-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;r<t;++r){var a=e[r].stack,u=n[a];if(void 0!==u&&u!==r){u>0&&(e[u-1]._parent=void 0,e[u-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var s=r>0?e[r-1]:this;u<t-1?(s._parent=e[u+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var c=s._length+1,l=r-2;l>=0;--l)e[l]._length=c,c++;return}}}},J.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=z(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(D(i.stack.split("\n"))),i=i._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],a=-1,u=r.length-1;u>=0;--u)if(r[u]===o){a=u;break}for(var u=a;u>=0;--u){var s=r[u];if(e[i]!==s)break;e.pop(),i--}e=r}}(r),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(r),l.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}(n,r)),l.notEnumerableProp(t,"__stackCleaned__",!0)}};var K=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():V(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,v=t,_=e;var n=Error.captureStackTrace;return q=function(t){return h.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return v=/@/,_=e,y=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){r="stack"in t}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(_=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?V(e):e.toString()},null):(v=t,_=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(a=function(t){console.warn(t)},l.isNode&&e.stderr.isTTY?a=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:l.isNode||"string"!=typeof(new Error).stack||(a=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var Q={warnings:m,longStackTraces:!1,cancellation:!1,monitoring:!1};return b&&n.longStackTraces(),{longStackTraces:function(){return Q.longStackTraces},warnings:function(){return Q.warnings},cancellation:function(){return Q.cancellation},monitoring:function(){return Q.monitoring},propagateFromFunction:function(){return M},boundValueFunction:function(){return F},checkForgottenReturns:function(t,e,n,r,i){if(void 0===t&&null!==e&&w){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(e._trace){for(var u=e._trace.stack.split("\n"),s=D(u),c=s.length-1;c>=0;--c){var l=s[c];if(!p.test(l)){var f=l.match(d);f&&(o="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(s.length>0)for(var h=s[0],c=0;c<u.length;++c)if(u[c]===h){c>0&&(a="\n"+u[c-1]);break}}var v="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(v,!0,e)}},setBounds:function(t,e){if(H()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),a=-1,u=-1,s=0;s<i.length;++s){var c=$(i[s]);if(c){n=c.fileName,a=c.line;break}}for(var s=0;s<o.length;++s){var c=$(o[s]);if(c){r=c.fileName,u=c.line;break}}a<0||u<0||!n||!r||n!==r||a>=u||(q=function(t){if(h.test(t))return!0;var e=$(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=u)})}},warn:U,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),U(n)},CapturedTrace:J,fireDomEvent:k,fireGlobalEvent:S}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1];return this.caught(t,function(){throw e})},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];return r instanceof t&&r.suppressUnhandledRejections(),this.caught(n,function(){return r})}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.reduce,r=t.all;function i(){return r(this)}t.prototype.each=function(t){return n(this,t,e,0)._then(i,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return n(this,t,e,e)},t.each=function(t,r){return n(t,r,e,0)._then(i,void 0,void 0,t,void 0)},t.mapSeries=function(t,r){return n(t,r,e,e)}}},{}],12:[function(t,e,n){"use strict";var r,i,o=t("./es5"),a=o.freeze,u=t("./util"),s=u.inherits,c=u.notEnumerableProp;function l(t,e){function n(r){if(!(this instanceof n))return new n(r);c(this,"message","string"==typeof r?r:e),c(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return s(n,Error),n}var f=l("Warning","warning"),h=l("CancellationError","cancellation error"),p=l("TimeoutError","timeout error"),d=l("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(t){r=l("TypeError","type error"),i=l("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),_=0;_<v.length;++_)"function"==typeof Array.prototype[v[_]]&&(d.prototype[v[_]]=Array.prototype[v[_]]);o.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var y=0;function g(t){if(!(this instanceof g))return new g(t);c(this,"name","OperationalError"),c(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(c(this,"message",t.message),c(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}d.prototype.toString=function(){var t=Array(4*y+1).join(" "),e="\n"+t+"AggregateError of:\n";y++,t=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return y--,e},s(g,Error);var m=Error.__BluebirdErrorTypes__;m||(m=a({CancellationError:h,TimeoutError:p,OperationalError:g,RejectionError:g,AggregateError:d}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:m,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:m.CancellationError,OperationalError:m.OperationalError,TimeoutError:m.TimeoutError,AggregateError:m.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,u=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}},keys:u,names:u,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return a}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=e.CancellationError,a=i.errorObj,u=t("./catch_filter")(r);function s(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function c(t){this.finallyHandler=t}function l(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function f(){return p.call(this,this.promise._target()._settledValue())}function h(t){if(!l(this,t))return a.e=t,a}function p(t){var i=this.promise,u=this.handler;if(!this.called){this.called=!0;var s=this.isFinallyHandler()?u.call(i._boundValue()):u.call(i._boundValue(),t);if(s===r)return s;if(void 0!==s){i._setReturnedNonUndefined();var p=n(s,i);if(p instanceof e){if(null!=this.cancelPromise){if(p._isCancelled()){var d=new o("late cancellation observer");return i._attachExtraTrace(d),a.e=d,a}p.isPending()&&p._attachCancellationCallback(new c(this))}return p._then(f,h,void 0,this,void 0)}}}return i.isRejected()?(l(this),a.e=t,a):(l(this),t)}return s.prototype.isFinallyHandler=function(){return 0===this.type},c.prototype._resultCancelled=function(){l(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,new s(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,p,p)},e.prototype.tap=function(t){return this._passThrough(t,1,p)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,p);var r,o=new Array(n-1),a=0;for(r=0;r<n-1;++r){var s=arguments[r];if(!i.isObject(s))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(s)));o[a++]=s}o.length=a;var c=arguments[r];return this._passThrough(u(o,c,this),1,void 0,p)},s}},{"./catch_filter":7,"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var u=t("./errors"),s=u.TypeError,c=t("./util"),l=c.errorObj,f=c.tryCatch,h=[];function p(t,n,i,o){if(a.cancellation()){var u=new e(r),s=this._finallyPromise=new e(r);this._promise=u.lastly(function(){return s}),u._captureStackTrace(),u._setOnCancel(this)}else{var c=this._promise=new e(r);c._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(p,o),p.prototype._isResolved=function(){return null===this._promise},p.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},p.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n=void 0!==this._generator.return;if(n)this._promise._pushContext(),t=f(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=f(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},p.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=f(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},p.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=f(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},p.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},p.prototype.promise=function(){return this._promise},p.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},p.prototype._continue=function(t){var n=this._promise;if(t===l)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof e||null!==(o=function(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=f(n[o])(t);if(r._popContext(),a===l){r._pushContext();var u=e.reject(l.e);return r._popContext(),u}var s=i(a,r);if(s instanceof e)return s}return null}(o,this._yieldHandlers,this._promise))){var a=(o=o._target())._bitField;0==(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&a)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&a)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new s("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(t,e){if("function"!=typeof t)throw new s("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=p,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new s("expecting a function but got "+c.classString(t));h.push(t)},e.spawn=function(t){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new p(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var u=t("./util");u.canEvaluate,u.tryCatch,u.errorObj,e.join=function(){var t,e=arguments.length-1;e>0&&"function"==typeof arguments[e]&&(t=arguments[e]);var r=[].slice.call(arguments);t&&r.pop();var i=new n(r).promise();return void 0!==t?i.spread(t):i}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var u=e._getDomain,s=t("./util"),c=s.tryCatch,l=s.errorObj,f=e._async;function h(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=u();this._callback=null===i?e:s.domainBind(i,e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],f.invoke(this._asyncInit,this,void 0)}function p(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+s.classString(n));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+s.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+s.classString(i.concurrency)));a=i.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new h(t,n,a,o).promise()}s.inherits(h,n),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),u=this._preservedValues,s=this._limit;if(n<0){if(r[n=-1*n-1]=t,s>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(s>=1&&this._inFlight>=s)return r[n]=t,this._queue.push(n),!1;null!==u&&(u[n]=t);var f=this._promise,h=this._callback,p=f._boundValue();f._pushContext();var d=c(h).call(p,t,n,o),v=f._popContext();if(a.checkForgottenReturns(d,v,null!==u?"Promise.filter":"Promise.map",f),d===l)return this._reject(d.e),!0;var _=i(d,this._promise);if(_ instanceof e){var y=(_=_._target())._bitField;if(0==(50397184&y))return s>=1&&this._inFlight++,r[n]=_,_._proxy(this,-1*(n+1)),!1;if(0==(33554432&y))return 0!=(16777216&y)?(this._reject(_._reason()),!0):(this._cancel(),!0);d=_._value()}r[n]=d}var g=++this._totalResolved;return g>=o&&(null!==u?this._filter(r,u):this._resolve(r),!0)},h.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},h.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},h.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return p(this,t,e,null)},e.map=function(t,e,n,r){return p(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util"),u=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=u(t).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e.try=function(t){if("function"!=typeof t)return i("expecting a function but got "+a.classString(t));var r,s=new e(n);if(s._captureStackTrace(),s._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];r=a.isArray(c)?u(t).apply(l,c):u(t).call(l,c)}else r=u(t)();var f=s._popContext();return o.checkForgottenReturns(r,f,"Promise.try",s),s._resolveFromSyncValue(r),s},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";var r=t("./util"),i=r.maybeWrapAsError,o=t("./errors"),a=o.OperationalError,u=t("./es5"),s=/^(?:name|message|stack|cause)$/;function c(t){var e;if(function(t){return t instanceof Error&&u.getPrototypeOf(t)===Error.prototype}(t)){(e=new a(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=u.keys(t),i=0;i<n.length;++i){var o=n[i];s.test(o)||(e[o]=t[o])}return e}return r.markAsOriginatingFromRejection(t),t}e.exports=function(t,e){return function(n,r){if(null!==t){if(n){var o=c(i(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var a=[].slice.call(arguments,1);t._fulfill(a)}else t._fulfill(r);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=e._async,i=n.tryCatch,o=n.errorObj;function a(t,e){if(!n.isArray(t))return u.call(this,t,e);var a=i(e).apply(this._boundValue(),[null].concat(t));a===o&&r.throwLater(a.e)}function u(t,e){var n=this._boundValue(),a=void 0===t?i(e).call(n,null):i(e).call(n,null,t);a===o&&r.throwLater(a.e)}function s(t,e){if(!t){var n=new Error(t+"");n.cause=t,t=n}var a=i(e).call(this._boundValue(),t);a===o&&r.throwLater(a.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var n=u;void 0!==e&&Object(e).spread&&(n=a),this._then(n,s,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,n,r){"use strict";n.exports=function(){var r=function(){return new d("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new O.PromiseInspection(this._target())},o=function(t){return O.reject(new d(t))};function a(){}var u,s={},c=t("./util");u=c.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},c.notEnumerableProp(O,"_getDomain",u);var l=t("./es5"),f=t("./async"),h=new f;l.defineProperty(O,"_async",{value:h});var p=t("./errors"),d=O.TypeError=p.TypeError;O.RangeError=p.RangeError;var v=O.CancellationError=p.CancellationError;O.TimeoutError=p.TimeoutError,O.OperationalError=p.OperationalError,O.RejectionError=p.OperationalError,O.AggregateError=p.AggregateError;var _=function(){},y={},g={},m=t("./thenables")(O,_),b=t("./promise_array")(O,_,m,o,a),w=t("./context")(O),x=w.create,k=t("./debuggability")(O,w),S=(k.CapturedTrace,t("./finally")(O,m,g)),E=t("./catch_filter")(g),j=t("./nodeback"),C=c.errorObj,A=c.tryCatch;function O(t){t!==_&&function(t,e){if(null==t||t.constructor!==O)throw new d("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new d("expecting a function but got "+c.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function T(t){this.promise._resolveCallback(t)}function P(t){this.promise._rejectCallback(t,!1)}function R(t){var e=new O(_);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return O.prototype.toString=function(){return"[object Promise]"},O.prototype.caught=O.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var a=arguments[n];if(!c.isObject(a))return o("Catch statement predicate: expecting an object but got "+c.classString(a));r[i++]=a}return r.length=i,t=arguments[n],this.then(void 0,E(r,t,this))}return this.then(void 0,t)},O.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},O.prototype.then=function(t,e){if(k.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+c.classString(t);arguments.length>1&&(n+=", "+c.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},O.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},O.prototype.spread=function(t){return"function"!=typeof t?o("expecting a function but got "+c.classString(t)):this.all()._then(t,void 0,void 0,y,void 0)},O.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},O.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new b(this).promise()},O.prototype.error=function(t){return this.caught(c.originatesFromRejection,t)},O.getNewLibraryCopy=n.exports,O.is=function(t){return t instanceof O},O.fromNode=O.fromCallback=function(t){var e=new O(_);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=A(t)(j(e,n));return r===C&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},O.all=function(t){return new b(t).promise()},O.cast=function(t){var e=m(t);return e instanceof O||((e=new O(_))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},O.resolve=O.fulfilled=O.cast,O.reject=O.rejected=function(t){var e=new O(_);return e._captureStackTrace(),e._rejectCallback(t,!0),e},O.setScheduler=function(t){if("function"!=typeof t)throw new d("expecting a function but got "+c.classString(t));return h.setScheduler(t)},O.prototype._then=function(t,e,n,r,i){var o=void 0!==i,a=o?i:new O(_),s=this._target(),l=s._bitField;o||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():s===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var f=u();if(0!=(50397184&l)){var p,d,y=s._settlePromiseCtx;0!=(33554432&l)?(d=s._rejectionHandler0,p=t):0!=(16777216&l)?(d=s._fulfillmentHandler0,p=e,s._unsetRejectionIsUnhandled()):(y=s._settlePromiseLateCancellationObserver,d=new v("late cancellation observer"),s._attachExtraTrace(d),p=e),h.invoke(y,s,{handler:null===f?p:"function"==typeof p&&c.domainBind(f,p),promise:a,receiver:r,value:d})}else s._addCallbacks(t,e,a,r,f);return a},O.prototype._length=function(){return 65535&this._bitField},O.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},O.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},O.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},O.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},O.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},O.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},O.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},O.prototype._isFinal=function(){return(4194304&this._bitField)>0},O.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},O.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},O.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},O.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},O.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==s)return void 0===e&&this._isBound()?this._boundValue():e},O.prototype._promiseAt=function(t){return this[4*t-4+2]},O.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},O.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},O.prototype._boundValue=function(){},O.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=s),this._addCallbacks(e,n,r,i,null)},O.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=s),this._addCallbacks(n,r,i,o,null)},O.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:c.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:c.domainBind(i,e));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof t&&(this[a+0]=null===i?t:c.domainBind(i,t)),"function"==typeof e&&(this[a+1]=null===i?e:c.domainBind(i,e))}return this._setLength(o+1),o},O.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},O.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(r(),!1);var n=m(t,this);if(!(n instanceof O))return this._fulfill(t);e&&this._propagateFrom(n,2);var i=n._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var a=this._length();a>0&&i._migrateCallback0(this);for(var u=1;u<a;++u)i._migrateCallbackAt(this,u);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var s=new v("late cancellation observer");i._attachExtraTrace(s),this._reject(s)}}else this._reject(r())}},O.prototype._rejectCallback=function(t,e,n){var r=c.ensureErrorObject(t),i=r===t;if(!i&&!n&&k.warnings()){var o="a promise was rejected with a non-error: "+c.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},O.prototype._resolveFromExecutor=function(t){if(t!==_){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},O.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),e===y?n&&"number"==typeof n.length?o=A(t).apply(this._boundValue(),n):(o=C).e=new d("cannot .spread() a non-array: "+c.classString(n)):o=A(t).call(e,n);var a=r._popContext();0==(65536&(i=r._bitField))&&(o===g?r._reject(n):o===C?r._rejectCallback(o.e,!1):(k.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},O.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},O.prototype._followee=function(){return this._rejectionHandler0},O.prototype._setFollowee=function(t){this._rejectionHandler0=t},O.prototype._settlePromise=function(t,e,n,r){var o=t instanceof O,u=this._bitField,s=0!=(134217728&u);0!=(65536&u)?(o&&t._invokeInternalOnCancel(),n instanceof S&&n.isFinallyHandler()?(n.cancelPromise=t,A(e).call(n,r)===C&&t._reject(C.e)):e===i?t._fulfill(i.call(n)):n instanceof a?n._promiseCancelled(t):o||t instanceof b?t._cancel():n.cancel()):"function"==typeof e?o?(s&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,r,t)):e.call(n,r,t):n instanceof a?n._isResolved()||(0!=(33554432&u)?n._promiseFulfilled(r,t):n._promiseRejected(r,t)):o&&(s&&t._setAsyncGuaranteed(),0!=(33554432&u)?t._fulfill(r):t._reject(r))},O.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,i=t.value;"function"==typeof e?n instanceof O?this._settlePromiseFromHandler(e,r,i,n):e.call(r,i,n):n instanceof O&&n._reject(i)},O.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},O.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},O.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},O.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=r();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():h.settlePromises(this))}},O.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return h.fatalError(t,c.isNode);(65535&e)>0?h.settlePromises(this):this._ensurePossibleRejectionHandled()}},O.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},O.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},O.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},O.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},O.defer=O.pending=function(){k.deprecated("Promise.defer","new Promise");var t=new O(_);return{promise:t,resolve:T,reject:P}},c.notEnumerableProp(O,"_makeSelfResolutionError",r),t("./method")(O,_,m,o,k),t("./bind")(O,_,m,k),t("./cancel")(O,b,o,k),t("./direct_resolve")(O),t("./synchronous_inspection")(O),t("./join")(O,b,m,_,h,u),O.Promise=O,O.version="3.5.1",t("./map.js")(O,b,o,m,_,k),t("./call_get.js")(O),t("./using.js")(O,o,m,x,_,k),t("./timers.js")(O,_,k),t("./generators.js")(O,o,_,m,a,k),t("./nodeify.js")(O),t("./promisify.js")(O,_),t("./props.js")(O,b,m,o),t("./race.js")(O,_,m,o),t("./reduce.js")(O,b,o,m,_,k),t("./settle.js")(O,b,k),t("./some.js")(O,b,o),t("./filter.js")(O,_),t("./each.js")(O,_),t("./any.js")(O),c.toFastProperties(O),c.toFastProperties(O.prototype),R({a:1}),R({b:2}),R({c:3}),R(1),R(function(){}),R(void 0),R(!1),R(new O(_)),k.setBounds(f.firstLineError,c.lastLineError),O}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util");function u(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.isArray,a.inherits(u,o),u.prototype.length=function(){return this._length},u.prototype.promise=function(){return this._promise},u.prototype._init=function t(n,o){var u=r(this._values,this._promise);if(u instanceof e){var s=(u=u._target())._bitField;if(this._values=u,0==(50397184&s))return this._promise._setAsyncGuaranteed(),u._then(t,this._reject,void 0,this,o);if(0==(33554432&s))return 0!=(16777216&s)?this._reject(u._reason()):this._cancel();u=u._value()}if(null!==(u=a.asArray(u)))0!==u.length?this._iterate(u):-5===o?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(o));else{var c=i("expecting an array or an iterable object but got "+a.classString(u)).reason();this._promise._rejectCallback(c,!1)}},u.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,u=0;u<n;++u){var s=r(t[u],i);s instanceof e?(s=s._target(),a=s._bitField):a=null,o?null!==a&&s.suppressUnhandledRejections():null!==a?0==(50397184&a)?(s._proxy(this,u),this._values[u]=s):o=0!=(33554432&a)?this._promiseFulfilled(s._value(),u):0!=(16777216&a)?this._promiseRejected(s._reason(),u):this._promiseCancelled(u):o=this._promiseFulfilled(s,u)}o||i._setAsyncGuaranteed()},u.prototype._isResolved=function(){return null===this._values},u.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},u.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},u.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},u.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},u.prototype._promiseCancelled=function(){return this._cancel(),!0},u.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},u.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},u.prototype.shouldCopyValues=function(){return!0},u.prototype.getActualLength=function(t){return t},u}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){var r={},i=t("./util"),o=t("./nodeback"),a=i.withAppended,u=i.maybeWrapAsError,s=i.canEvaluate,c=t("./errors").TypeError,l={__isPromisified__:!0},f=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),h=function(t){return i.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function p(t){return!f.test(t)}function d(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function v(t,e,n){var r=i.getDataPropertyOrDefault(t,e+n,l);return!!r&&d(r)}function _(t,e,n,r){for(var o=i.inheritedDataKeys(t),a=[],u=0;u<o.length;++u){var s=o[u],l=t[s],f=r===h||h(s,l,t);"function"!=typeof l||d(l)||v(t,s,e)||!r(s,l,t,f)||a.push(s,l)}return function(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new c("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(a,e,n),a}var y=function(t){return t.replace(/([$])/,"\\$")},g=s?void 0:function(t,s,c,l,f,h){var p=function(){return this}(),d=t;function v(){var i=s;s===r&&(i=this);var c=new e(n);c._captureStackTrace();var l="string"==typeof d&&this!==p?this[d]:t,f=o(c,h);try{l.apply(i,a(arguments,f))}catch(t){c._rejectCallback(u(t),!0,!0)}return c._isFateSealed()||c._setAsyncGuaranteed(),c}return"string"==typeof d&&(t=l),i.notEnumerableProp(v,"__isPromisified__",!0),v};function m(t,e,n,o,a){for(var u=new RegExp(y(e)+"$"),s=_(t,e,u,n),c=0,l=s.length;c<l;c+=2){var f=s[c],h=s[c+1],p=f+e;if(o===g)t[p]=g(f,r,f,h,e,a);else{var d=o(h,function(){return g(f,r,f,h,e,a)});i.notEnumerableProp(d,"__isPromisified__",!0),t[p]=d}}return i.toFastProperties(t),t}e.promisify=function(t,e){if("function"!=typeof t)throw new c("expecting a function but got "+i.classString(t));if(d(t))return t;var n=void 0===(e=Object(e)).context?r:e.context,o=!!e.multiArgs,a=function(t,e,n){return g(t,e,void 0,t,null,n)}(t,n,o);return i.copyDescriptors(t,a,p),a},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new c("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(e=Object(e)).multiArgs,r=e.suffix;"string"!=typeof r&&(r="Async");var o=e.filter;"function"!=typeof o&&(o=h);var a=e.promisifier;if("function"!=typeof a&&(a=g),!i.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var u=i.inheritedDataKeys(t),s=0;s<u.length;++s){var l=t[u[s]];"constructor"!==u[s]&&i.isClass(l)&&(m(l.prototype,r,o,a,n),m(l,r,o,a,n))}return m(t,r,o,a,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o,a=t("./util"),u=a.isObject,s=t("./es5");"function"==typeof Map&&(o=Map);var c=function(){var t=0,e=0;function n(n,r){this[t]=n,this[t+e]=r,t++}return function(r){e=r.size,t=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function l(t){var e,n=!1;if(void 0!==o&&t instanceof o)e=c(t),n=!0;else{var r=s.keys(t),i=r.length;e=new Array(2*i);for(var a=0;a<i;++a){var u=r[a];e[a]=t[u],e[a+i]=u}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function f(t){var n,o=r(t);return u(o)?(n=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new l(o).promise(),o instanceof e&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}a.inherits(l,n),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=function(t){for(var e=new o,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],a=t[r];e.set(i,a)}return e}(this._values);else{r={};for(var i=this.length(),a=0,u=this.length();a<u;++a)r[this._values[a+i]]=this._values[a]}return this._resolve(r),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return f(this)},e.props=function(t){return f(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},r.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,r=this._length,i=n+r&e-1;!function(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}(this,0,this,e,i)},e.exports=r},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),a=function(t){return t.then(function(e){return u(e,t)})};function u(t,u){var s=r(t);if(s instanceof e)return a(s);if(null===(t=o.asArray(t)))return i("expecting an array or an iterable object but got "+o.classString(t));var c=new e(n);void 0!==u&&c._propagateFrom(u,3);for(var l=c._fulfill,f=c._reject,h=0,p=t.length;h<p;++h){var d=t[h];(void 0!==d||h in t)&&e.cast(d)._then(l,f,void 0,c,null)}return c}e.race=function(t){return u(t,void 0)},e.prototype.race=function(){return u(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var u=e._getDomain,s=t("./util"),c=s.tryCatch;function l(t,n,r,i){this.constructor$(t);var a=u();this._fn=null===a?n:s.domainBind(a,n),void 0!==r&&(r=e.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function f(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function h(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+s.classString(e));var o=new l(t,e,n,i);return o.promise()}function p(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(d,void 0,void 0,this,void 0)):d.call(this,n)}function d(t){var n,r=this.array,i=r._promise,o=c(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),t,this.index,this.length):o.call(i._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(r._currentCancellable=n);var u=i._popContext();return a.checkForgottenReturns(n,u,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}s.inherits(l,n),l.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},l.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},l.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},l.prototype._iterate=function(t){var n,r;this._values=t;var i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(p,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(f,f,void 0,n,this)},e.prototype.reduce=function(t,e){return h(this,t,e,null)},e.reduce=function(t,e,n,r){return h(t,e,n,r)}}},{"./util":36}],29:[function(t,i,o){"use strict";var a,u,s,c,l,f=t("./util"),h=f.getNativePromise();if(f.isNode&&"undefined"==typeof MutationObserver){var p=n.setImmediate,d=e.nextTick;a=f.isRecentNode?function(t){p.call(n,t)}:function(t){d.call(e,t)}}else if("function"==typeof h&&"function"==typeof h.resolve){var v=h.resolve();a=function(t){v.then(t)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==r?function(t){r(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(u=document.createElement("div"),s={attributes:!0},c=!1,l=document.createElement("div"),new MutationObserver(function(){u.classList.toggle("foo"),c=!1}).observe(l,s),function(t){var e=new MutationObserver(function(){e.disconnect(),t()});e.observe(u,s),c||(c=!0,l.classList.toggle("foo"))});i.exports=a},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=e.PromiseInspection,o=t("./util");function a(t){this.constructor$(t)}o.inherits(a,n),a.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseFulfilled=function(t,e){var n=new i;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},a.prototype._promiseRejected=function(t,e){var n=new i;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new a(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=t("./errors").RangeError,a=t("./errors").AggregateError,u=i.isArray,s={};function c(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new c(t),i=n.promise();return n.setHowMany(e),n.init(),i}i.inherits(c,n),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=u(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(t){this._howMany=t},c.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(s),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new a,e=this.length();e<this._values.length;++e)this._values[e]!==s&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(t){this._values.push(t)},c.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new o(e)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return l(t,e)},e.prototype.some=function(t){return l(this,t)},e._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},u=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return u.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){var r=t("./util"),i=r.errorObj,o=r.isObject,a={}.hasOwnProperty;return function(t,u){if(o(t)){if(t instanceof e)return t;var s=function(t){try{return function(t){return t.then}(t)}catch(t){return i.e=t,i}}(t);if(s===i){u&&u._pushContext();var c=e.reject(s.e);return u&&u._popContext(),c}if("function"==typeof s){if(function(t){try{return a.call(t,"_promise0")}catch(t){return!1}}(t)){var c=new e(n);return t._then(c._fulfill,c._reject,void 0,c,null),c}return function(t,o,a){var u=new e(n),s=u;a&&a._pushContext(),u._captureStackTrace(),a&&a._popContext();var c=!0,l=r.tryCatch(o).call(t,function(t){u&&(u._resolveCallback(t),u=null)},function(t){u&&(u._rejectCallback(t,c,!0),u=null)});return c=!1,u&&l===i&&(u._rejectCallback(l.e,!0,!0),u=null),s}(t,s,u)}}return t}}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=e.TimeoutError;function a(t){this.handle=t}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var u=function(t){return s(+this).thenReturn(t)},s=e.delay=function(t,i){var o,s;return void 0!==i?(o=e.resolve(i)._then(u,null,null,t,void 0),r.cancellation()&&i instanceof e&&o._setOnCancel(i)):(o=new e(n),s=setTimeout(function(){o._fulfill()},+t),r.cancellation()&&o._setOnCancel(new a(s)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};function c(t){return clearTimeout(this.handle),t}function l(t){throw clearTimeout(this.handle),t}e.prototype.delay=function(t){return s(t,this)},e.prototype.timeout=function(t,e){var n,u;t=+t;var s=new a(setTimeout(function(){n.isPending()&&function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new o("operation timed out"):new o(e),i.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()}(n,e,u)},t));return r.cancellation()?(u=this.then(),(n=u._then(c,l,void 0,s,void 0))._setOnCancel(s)):n=this._then(c,l,void 0,s,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var u=t("./util"),s=t("./errors").TypeError,c=t("./util").inherits,l=u.errorObj,f=u.tryCatch,h={};function p(t){setTimeout(function(){throw t},0)}function d(t,n){var i=0,a=t.length,u=new e(o);return function o(){if(i>=a)return u._fulfill();var s=function(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[i++]);if(s instanceof e&&s._isDisposable()){try{s=r(s._getDisposer().tryDispose(n),t.promise)}catch(t){return p(t)}if(s instanceof e)return s._then(o,p,null,null,null)}o()}(),u}function v(t,e,n){this._data=t,this._promise=e,this._context=n}function _(t,e,n){this.constructor$(t,e,n)}function y(t){return v.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function g(t){this.length=t,this.promise=null,this[t-1]=null}v.prototype.data=function(){return this._data},v.prototype.promise=function(){return this._promise},v.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():h},v.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==h?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},v.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},c(_,v),_.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},g.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var i,o=arguments[t-1];if("function"!=typeof o)return n("expecting a function but got "+u.classString(o));var s=!0;2===t&&Array.isArray(arguments[0])?(i=arguments[0],t=i.length,s=!1):(i=arguments,t--);for(var c=new g(t),h=0;h<t;++h){var p=i[h];if(v.isDisposer(p)){var _=p;(p=p.promise())._setDisposable(_)}else{var m=r(p);m instanceof e&&(p=m._then(y,null,null,{resources:c,index:h},void 0))}c[h]=p}for(var b=new Array(c.length),h=0;h<b.length;++h)b[h]=e.resolve(c[h]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return l.e=n.error(),l;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}x._pushContext(),o=f(o);var r=s?o.apply(void 0,t):o(t),i=x._popContext();return a.checkForgottenReturns(r,i,"Promise.using",x),r}),x=w.lastly(function(){var t=new e.PromiseInspection(w);return d(c,t)});return c.promise=x,x._setOnCancel(c),x},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new _(t,this,i());throw new s}}},{"./errors":12,"./util":36}],36:[function(t,r,i){"use strict";var o=t("./es5"),a="undefined"==typeof navigator,u={e:{}},s,c="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null;function l(){try{var t=s;return s=null,t.apply(this,arguments)}catch(t){return u.e=t,u}}function f(t){return s=t,l}var h=function(t,e){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=t,this.constructor$=e,e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}return r.prototype=e.prototype,t.prototype=new r,t.prototype};function p(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function d(t){return"function"==typeof t||"object"==typeof t&&null!==t}function v(t){return p(t)?new Error(C(t)):t}function _(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function y(t,e,n){if(!o.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function g(t,e,n){if(p(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(t,e,r),t}function m(t){throw t}var b=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(o.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var a;try{a=n(t)}catch(t){return r}for(var u=0;u<a.length;++u){var s=a[u];if(!i[s]){i[s]=!0;var c=Object.getOwnPropertyDescriptor(t,s);null!=c&&null==c.get&&null==c.set&&r.push(s)}}t=o.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<t.length;++a)if(r.call(t[a],o))continue t;i.push(o)}return i}}(),w=/this\s*\.\s*\S+\s*=/;function x(t){try{if("function"==typeof t){var e=o.names(t.prototype),n=o.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=w.test(t+"")&&o.names(t).length>0;if(n||r||i)return!0}return!1}catch(t){return!1}}function k(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}var S=/^[a-z$_][a-z$_0-9]*$/i;function E(t){return S.test(t)}function j(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function C(t){try{return t+""}catch(t){return"[no string representation]"}}function A(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function O(t){try{g(t,"isOperational",!0)}catch(t){}}function T(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function P(t){return A(t)&&o.propertyIsWritable(t,"stack")}var R="stack"in new Error?function(t){return P(t)?t:new Error(C(t))}:function(t){if(P(t))return t;try{throw new Error(C(t))}catch(t){return t}};function I(t){return{}.toString.call(t)}function B(t,e,n){for(var r=o.names(t),i=0;i<r.length;++i){var a=r[i];if(n(a))try{o.defineProperty(e,a,o.getDescriptor(t,a))}catch(t){}}}var M=function(t){return o.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var F="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};M=function(t){return o.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?F(t):null}}var L=void 0!==e&&"[object process]"===I(e).toLowerCase(),N=void 0!==e&&void 0!==e.env;function U(t){return N?e.env[t]:void 0}function D(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function z(t,e){return t.bind(e)}var W={isClass:x,isIdentifier:E,inheritedDataKeys:b,getDataPropertyOrDefault:y,thrower:m,isArray:o.isArray,asArray:M,notEnumerableProp:g,isPrimitive:p,isObject:d,isError:A,canEvaluate:a,errorObj:u,tryCatch:f,inherits:h,withAppended:_,maybeWrapAsError:v,toFastProperties:k,filledRange:j,toString:C,canAttachTrace:P,ensureErrorObject:R,originatesFromRejection:T,markAsOriginatingFromRejection:O,classString:I,copyDescriptors:B,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:L,hasEnvVariables:N,env:U,global:c,getNativePromise:D,domainBind:z},G;W.isRecentNode=W.isNode&&(G=e.versions.node.split(".").map(Number),0===G[0]&&G[1]>10||G[0]>0),W.isNode&&W.toFastProperties(e);try{throw new Error}catch(t){W.lastLineError=t}r.exports=W},{"./es5":13}]},{},[4])(4)}(),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,n(59),n(35),n(231).setImmediate)},1081:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},u=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s=a(n(338)),c=u(n(110)),l=u(n(599)),f=u(n(598));function h(t){if(!t.version)return l.timingInfoForBmson(t);var e=v(t);return{initialBPM:t.info.init_bpm,actions:i((t.bpm_events||[]).map(function(t){var n=t.y,r=t.bpm;return{type:"bpm",beat:e(n),bpm:r}}),(t.stop_events||[]).map(function(t){var n=t.y,r=t.duration;return{type:"stop",beat:e(n),stopBeats:e(Math.floor(r))}}))}}function p(t){return t.version?t.sound_channels:t.soundChannel}e.songInfoForBmson=function(t){var e=t.info,n={};return e.title&&(n.title=e.title),e.artist&&(n.artist=e.artist),e.genre&&(n.genre=e.genre),e.level&&(n.level=e.level),n.subtitles=function(){if(!t.version)return["Warning: legacy bmson"];var n=[];return e.chart_name&&"string"==typeof e.chart_name&&n.push(e.chart_name),e.subtitle&&"string"==typeof e.subtitle&&n.push.apply(n,i(e.subtitle.split("\n"))),n}(),e.subartists&&(n.subartists=e.subartists),new c.SongInfo(n)},e.barLinesForBmson=function(t){if(!t.version)return l.barLinesForBmson(t);var e=v(t),n=t.lines;return s.default(n).map(function(t){var n=t.y;return e(n)}).sortBy().value()},e.timingInfoForBmson=h,e.musicalScoreForBmson=function(t){var e=function(t){var e=h(t),n=e.initialBPM,r=e.actions;return new c.Timing(n,r)}(t),n=function(t,e){var n,r,i,a,u=1,c=v(t),l=[],h={},d=p(t);if(d)try{for(var y=o(d),g=y.next();!g.done;g=y.next()){var m=g.value,b=m.name,w=m.notes,x=s.default.sortBy(w,"y"),k=u++,S=s.default.padStart(""+k,4,"0"),E=f.slicesForNotesAndTiming(w,e,{beatForPulse:c});h[S]=b;try{for(var j=o(x),C=j.next();!C.done;C=j.next()){var A=C.value,O=A.x,T=A.y,P=A.l,R={column:_(O),beat:c(T),keysound:S,endBeat:void 0};P>0&&(R.endBeat=c(T+P));var I=E.get(T);I&&(Object.assign(R,I),l.push(R))}}catch(t){i={error:t}}finally{try{C&&!C.done&&(a=j.return)&&a.call(j)}finally{if(i)throw i.error}}}}catch(t){n={error:t}}finally{try{g&&!g.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}return{notes:l,keysounds:h}}(t,e),r=n.notes,i=n.keysounds;return{timing:e,notes:new c.Notes(r),keysounds:new c.Keysounds(i)}};var d=n(599);function v(t){if(!t.version)return l.beatForLoc;var e=t.info&&t.info.resolution||240;return function(t){return t/e}}function _(t){switch(t){case 1:return"1";case 2:return"2";case 3:return"3";case 4:return"4";case 5:return"5";case 6:return"6";case 7:return"7";case 8:return"SC"}}e._slicesForNotesAndTiming=d._slicesForNotesAndTiming,e.beatForPulseForBmson=v,e.hasScratch=function(t){var e,n,r,i,a=p(t);if(a)try{for(var u=o(a),s=u.next();!s.done;s=u.next()){var c=s.value.notes;try{for(var l=o(c),f=l.next();!f.done;f=l.next()){var h=f.value.x;if(8===h||18===h)return!0}}catch(t){r={error:t}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return!1},e.keysForBmson=function(t){var e,n,r,i,a=p(t),u=!1,s=!1,c=!1;if(a)try{for(var l=o(a),f=l.next();!f.done;f=l.next()){var h=f.value.notes;try{for(var d=o(h),v=d.next();!v.done;v=d.next()){var _=v.value.x;u=!0,_>=11&&_<=20&&(s=!0),6!==_&&7!==_&&16!==_&&17!==_||(c=!0)}}catch(t){r={error:t}}finally{try{v&&!v.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return u?s?c?"14K":"10K":c?"7K":"5K":"empty"}},1082:function(t,e,n){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1081)),a=r(n(110)),u=i(n(246));e.load=function(t,e){var n=JSON.parse(t),r=o.songInfoForBmson(n),i=o.musicalScoreForBmson(n),s=o.barLinesForBmson(n),c={notes:i.notes.all(),timing:i.timing,keysounds:i.keysounds,songInfo:r,positioning:new a.Positioning([{t:0,x:0,dx:1,inclusive:!0}]),spacing:new a.Spacing([]),barLines:s,images:{eyecatch:n.info.eyecatch_image,background:n.info.back_image},expertJudgmentWindow:function(t){var e=(t.info&&t.info.judge_rank&&+t.info.judge_rank||100)/100;return[18*e,40*e]}(n)};return new u.default(c,e)}},1083:function(t,e,n){"use strict";(function(t){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=o(n(110)),s=o(n(340)),c=o(n(1082)),l=a(n(1080)),f=function(e){return t.isBuffer(e)?e:t.from(new Uint8Array(e))},h=function(){function t(){}return t.prototype.load=function(t,e,n){return e.name.match(/\.bmson$/i)?this.loadBmson(t,e,n):this.loadBMS(t,e,n)},t.prototype.loadBMS=function(t,e,n){return r(this,void 0,void 0,function(){var r,o,a,c,h;return i(this,function(i){switch(i.label){case 0:return r=f(t),o=u.Reader.getReaderOptionsFromFilename(e.name),[4,l.default.promisify(u.Reader.readAsync)(r,o)];case 1:return a=i.sent(),c=u.Compiler.compile(a),h=c.chart,[2,s.fromBMSChart(h,n)]}})})},t.prototype.loadBmson=function(t,e,n){return r(this,void 0,void 0,function(){var e,r;return i(this,function(i){return e=f(t),r=e.toString("utf-8"),[2,c.load(r,n)]})})},t}();e.NotechartLoader=h,e.default=h}).call(this,n(275).Buffer)},110:function(t,e,n){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(258));e.Reader=i;var o=r(n(256));e.Compiler=o;var a=n(37);e.BMSChart=a.BMSChart;var u=n(144);e.BMSHeaders=u.BMSHeaders;var s=n(143);e.BMSObjects=s.BMSObjects;var c=n(73);e.Speedcore=c.Speedcore;var l=n(142);e.TimeSignatures=l.TimeSignatures;var f=n(254);e.Notes=f.Notes;var h=n(251);e.Timing=h.Timing;var p=n(250);e.SongInfo=p.SongInfo;var d=n(249);e.Keysounds=d.Keysounds;var v=n(248);e.Positioning=v.Positioning;var _=n(247);e.Spacing=_.Spacing},1116:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,'@charset "UTF-8";\n.LoadingSceneProgressBar {\n  border: 1px solid rgba(0, 0, 0, 0.6);\n  padding: 1px;\n}\n\n.LoadingSceneProgressBarのbar {\n  height: 8px;\n  background: rgba(0, 0, 0, 0.6);\n  width: 0%;\n}\n',""])},1117:function(t,e,n){var r=n(1116);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},1118:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,'@charset "UTF-8";\n.LoadingSceneProgress {\n  color: #333;\n  font-size: 11px;\n}\n\n.LoadingSceneProgress .LoadingSceneProgressBar {\n  display: inline-block;\n  vertical-align: middle;\n  width: 48px;\n  margin-right: 4px;\n  position: relative;\n  top: -1px;\n}\n\n.LoadingSceneProgressのextra {\n  font-size: 83%;\n  opacity: 0.7;\n}\n',""])},1119:function(t,e,n){var r=n(1118);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},1120:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,'@charset "UTF-8";\n.LoadingSceneSongInfo {\n  background: rgba(255, 255, 255, 0.96);\n  color: #191817;\n  text-align: center;\n  padding: 25px 0px;\n  box-shadow: 0 2px 18px rgba(0, 0, 0, 0.2);\n}\n\n.LoadingSceneSongInfoのgenre {\n  font-size: 1.2rem;\n}\n\n.LoadingSceneSongInfoのtitle {\n  font-size: 3.2rem;\n  font-weight: bold;\n}\n\n.LoadingSceneSongInfoのsubtitle {\n  font-size: 2.4rem;\n}\n\n.LoadingSceneSongInfoのartist {\n  font-size: 1.6rem;\n  margin-top: 0.8ex;\n}\n\n.LoadingSceneSongInfoのsubartist {\n  font-size: 1rem;\n}\n',""])},1121:function(t,e,n){var r=n(1120);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},1122:function(t,e,n){var r=n(113);(t.exports=n(1)(!1)).push([t.i,'@charset "UTF-8";\n.LoadingScene {\n  background: url('+r(n(717))+") center no-repeat;\n  background-size: cover;\n}\n\n.LoadingSceneのinfo {\n  position: absolute;\n  top: 40%;\n  left: 0;\n  right: 0;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n\n.LoadingScene .LoadingSceneSongInfo {\n  -webkit-animation: loading-scene--loading-scene-song-info--animation 1s ease;\n          animation: loading-scene--loading-scene-song-info--animation 1s ease;\n}\n\n.LoadingScene .LoadingSceneProgress {\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n}\n\n.LoadingSceneのimage {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n\n.LoadingSceneのimage img {\n  width: 100%;\n  height: 100%;\n  display: block;\n  object-fit: cover;\n  -webkit-animation: loading-scene--eyecatch-fade 0.8s;\n          animation: loading-scene--eyecatch-fade 0.8s;\n}\n\n.LoadingSceneのflash {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  opacity: 0;\n  pointer-events: none;\n  background: white;\n  -webkit-animation: loading-scene--flash-animation 0.8s ease-out;\n          animation: loading-scene--flash-animation 0.8s ease-out;\n}\n\n.LoadingSceneのcover {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  opacity: 0;\n  pointer-events: none;\n  background: black;\n}\n\n.Scene.is-exiting .LoadingSceneのinfo {\n  -webkit-animation: loading-scene--info-exit 0.3s linear;\n          animation: loading-scene--info-exit 0.3s linear;\n}\n\n.Scene.is-exiting .LoadingSceneのflash {\n  -webkit-animation: loading-scene--flash-exit 0.3s ease;\n          animation: loading-scene--flash-exit 0.3s ease;\n}\n\n.Scene.is-exiting .LoadingSceneのcover {\n  -webkit-animation: loading-scene--cover-exit 0.3s linear;\n          animation: loading-scene--cover-exit 0.3s linear;\n  opacity: 1;\n}\n\n@-webkit-keyframes loading-scene--eyecatch-fade {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@keyframes loading-scene--eyecatch-fade {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@-webkit-keyframes loading-scene--loading-scene-song-info--animation {\n  0% {\n    -webkit-transform: scale(1.5, 0.02);\n            transform: scale(1.5, 0.02);\n  }\n  100% {\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n}\n\n@keyframes loading-scene--loading-scene-song-info--animation {\n  0% {\n    -webkit-transform: scale(1.5, 0.02);\n            transform: scale(1.5, 0.02);\n  }\n  100% {\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n}\n\n@-webkit-keyframes loading-scene--info-exit {\n  0% {\n    -webkit-transform: translateY(-50%) scale(1, 1);\n            transform: translateY(-50%) scale(1, 1);\n  }\n  100% {\n    -webkit-transform: translateY(-50%) scale(2, 2);\n            transform: translateY(-50%) scale(2, 2);\n  }\n}\n\n@keyframes loading-scene--info-exit {\n  0% {\n    -webkit-transform: translateY(-50%) scale(1, 1);\n            transform: translateY(-50%) scale(1, 1);\n  }\n  100% {\n    -webkit-transform: translateY(-50%) scale(2, 2);\n            transform: translateY(-50%) scale(2, 2);\n  }\n}\n\n@-webkit-keyframes loading-scene--cover-exit {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@keyframes loading-scene--cover-exit {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@-webkit-keyframes loading-scene--flash-animation {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n\n@keyframes loading-scene--flash-animation {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n\n@-webkit-keyframes loading-scene--flash-exit {\n  0% {\n    opacity: 0.5;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n\n@keyframes loading-scene--flash-exit {\n  0% {\n    opacity: 0.5;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n",""])},1123:function(t,e,n){var r=n(1122);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},1124:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(70),i=n.n(r);function o(t){return function(e){var n=function(){return!1};return i()(window).on("touchstart",n),function(t,e){var n=t.view,r=t.wrapper,o=n.width,a=n.height;function u(){var t=Math.min(window.innerWidth/o,window.innerHeight/a);n.style.width=Math.round(o*t)+"px",n.style.height=Math.round(a*t)+"px",r.style.width=Math.round(o*t)+"px",r.style.height=Math.round(a*t)+"px";var e=(window.innerHeight-a*t)/2;r.style.marginTop=Math.round(e)+"px"}e.appendChild(r),u(),i()(window).on("resize",u)}(t,e),{teardown:function(){i()(window).off("touchstart",n)}}}}},113:function(t,e){t.exports=function(t){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},118:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"e",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"d",function(){return s});var r=n(79);function i(t,e){if(!e)return function(){};var n=0;return e.report(0,t),function(r){return e.report(++n,t,r)}}function o(t,e){return t?Promise.resolve(e).tap(function(e){e&&e.byteLength?(t.formatter=r.a,t.report(e.byteLength,e.byteLength)):t.report(1,1)}):e}function a(t,e){var n=0,r=0;return function(){return t.report(n,++r),Promise.resolve(e.apply(this,arguments)).tap(function(){return t.report(++n,r)})}}function u(t,e){return t.watch(function(){return e.report(t.current,t.total,t.extra)})}function s(t){var e=[],n=void 0,r=void 0;function i(){n&&t.report(n.current,n.total,n.extra),e.length>0&&(!n||n.progress>=1)&&function(t){if(n===t)return;r&&(r(),r=null);(n=t)&&(r=n.watch(i))}(e.shift())}return{add:function(t){e.push(t),i()}}}},140:function(t,e,n){"use strict";n.d(e,"f",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return a}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return s}),n.d(e,"a",function(){return c});var r=n(2);function i(){return"1"===r.a.BEMUSE_SHOW_OPTIONS}function o(){return"1"===r.a.BEMUSE_BENCHMARK}function a(){return"1"===r.a.BEMUSE_NO_FULLSCREEN}function u(){return"1"===r.a.BEMUSE_SHOW_ABOUT}function s(){return"1"===r.a.BEMUSE_SHOW_MODE_SELECT}function c(){return"1"===r.a.BEMUSE_TITLE_DISPLAY}},142:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this._values={}}return t.prototype.set=function(t,e){this._values[t]=e},t.prototype.get=function(t){return this._values[t]||1},t.prototype.getBeats=function(t){return 4*this.get(t)},t.prototype.measureToBeat=function(t,e){for(var n=0,r=0;r<t;r++)n+=this.getBeats(r);return n+this.getBeats(t)*e},t}();e.TimeSignatures=r},143:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this._objects=[]}return t.prototype.add=function(t){if("01"!==t.channel)for(var e=0;e<this._objects.length;e++){var n=this._objects[e];if(n.channel===t.channel&&n.measure===t.measure&&n.fraction===t.fraction)return void(this._objects[e]=t)}this._objects.push(t)},t.prototype.all=function(){return this._objects.slice()},t.prototype.allSorted=function(){var t=this.all();return t.sort(function(t,e){return t.measure+t.fraction-(e.measure+e.fraction)}),t},t}();e.BMSObjects=r},144:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this._data={},this._dataAll={}}return t.prototype.each=function(t){for(var e in this._data)t(e,this._data[e])},t.prototype.get=function(t){return this._data[t.toLowerCase()]},t.prototype.getAll=function(t){return this._dataAll[t.toLowerCase()]},t.prototype.set=function(t,e){var n=t.toLowerCase();this._data[n]=e,(this._dataAll[n]||(this._dataAll[n]=[])).push(e)},t}();e.BMSHeaders=r},145:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.match=function(t){var e=!1;return{when:function(n,r){if(e)return this;var i=t.match(n);return i&&(e=!0,r(i)),this},else:function(t){if(e)return this;t()}}}},146:function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return c}),n.d(e,"d",function(){return d});var r=n(165),i=n(105),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=.001,s=document.createElement("audio");function c(t){return"probably"===s.canPlayType(t)}var l=function(){function t(e){a(this,t),this._audioContext=e||r.a,this._samples=[],this._groups=[],this._instances=new Set,this._destination=this._audioContext.destination}return o(t,[{key:"unmute",value:function(){d(this._audioContext)}},{key:"destroy",value:function(){if(!this._destroyed){this._destroyed=!0;var t=!0,e=!1,n=void 0;try{for(var r,i=this._samples[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.destroy()}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}var o=!0,a=!1,u=void 0;try{for(var s,c=this._instances[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){s.value.destroy()}}catch(t){a=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw u}}this._samples=null,this._instances=null}}},{key:"decode",value:function(t){var e=this;return this._coerceToArrayBuffer(t).then(function(t){return e._decodeAudio(t)})}},{key:"sample",value:function(t){var e=this;return(t.numberOfChannels?Promise.resolve(t):e.decode(t)).then(function(t){if(e._destroyed)throw new Error("SamplingMaster already destroyed!");var n=new h(e,t);return e._samples.push(n),n})}},{key:"group",value:function(t){var e=new f(this,t);return this._groups.push(e),e}},{key:"_coerceToArrayBuffer",value:function(t){return t instanceof ArrayBuffer?Promise.resolve(t):Object(i.a)(t).as("arraybuffer")}},{key:"_decodeAudio",value:function(t){var e=this;return new Promise(function(n,r){e.audioContext.decodeAudioData(t,function(t){n(t)},function(t){r(new Error("Unable to decode audio: "+t))})})}},{key:"_startPlaying",value:function(t){this._instances.add(t)}},{key:"_stoppedPlaying",value:function(t){this._instances.delete(t)}},{key:"audioContext",get:function(){return this._audioContext}},{key:"destination",get:function(){return this._destination}}]),t}(),f=function(){function t(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).volume;a(this,t),this._master=e,this._gain=this._master.audioContext.createGain(),null!=n&&(this._gain.gain.value=n),this._gain.connect(this._master.destination)}return o(t,[{key:"destroy",value:function(){this._gain.disconnect(),this._gain=null}},{key:"destination",get:function(){return this._gain}}]),t}(),h=function(){function t(e,n){a(this,t),this._master=e,this._buffer=n}return o(t,[{key:"play",value:function(t,e){return new p(this._master,this._buffer,t,e)}},{key:"destroy",value:function(){this._master=null,this._buffer=null}}]),t}(),p=function(){function t(e,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a(this,t),r=r||0,this._master=e;var s=e.audioContext,c=s.createBufferSource();c.buffer=n,c.onended=function(){return i.stop()};var l=s.createGain();c.connect(l);var f=o.node||o.group&&o.group.destination||e.destination;l.connect(f),this._source=c,this._gain=this.TEST_node=l;var h=r?Math.max(0,s.currentTime+r):0,p=o.start||0,d=p>0,v=!1;if(d&&l.gain.setValueAtTime(0,0),void 0!==o.end){var _=Math.max(o.end-p,0);c.start(h,p,_+u),v=s.currentTime+r+_}else c.start(h,p);d&&(l.gain.setValueAtTime(0,s.currentTime+r),l.gain.linearRampToValueAtTime(1,s.currentTime+r+u)),!1!==v&&(l.gain.setValueAtTime(1,v),l.gain.linearRampToValueAtTime(0,v+u)),this._master._startPlaying(this)}return o(t,[{key:"stop",value:function(){this._source&&(this._source.stop(0),this._source.disconnect(),this._gain.disconnect(),this._source=null,this._gain=null,this._master._stoppedPlaying(this),this.onstop&&this.onstop())}},{key:"bad",value:function(){this._source&&(this._source.playbackRate.value=Math.random()<.5?Math.pow(2,1/24):Math.pow(2,-1/24))}},{key:"destroy",value:function(){this.stop()}}]),t}();function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a,e=t.createGain(),n=t.createOscillator();n.frequency.value=440,n.start(t.currentTime+.1),n.stop(t.currentTime+.1),e.connect(t.destination),e.disconnect();try{t.resume()}catch(t){console.error("[sampling-master] Cannot resume AudioContext",t)}}e.c=l},147:function(t,e,n){"use strict";(function(t){var r=n(482),i=n.n(r),o=t.forModule("timesynchro"),a=void 0,u=0;(a=window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()}).synchronize=function(t){function e(t){u=t+Date.now()-a()}i()(t,function(t,n){t?o.error("Cannot synchronize time: "+t):(e(n),o.info("Synchronized time with global server! Offset = "+u))},e)},a.synchronized=function(){var t=u;return function(){return a()+t}},e.a=a}).call(this,n(299))},148:function(t,e,n){"use strict";e.a=document.querySelector("#scene-root")},1513:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,".GameShellScene {\n  margin: 20px auto;\n  background: #353433;\n  border: 1px solid #555453;\n  padding: 15px;\n  max-width: 720px;\n}\n\n.GameShellScene .drop-zone {\n  border: 2px dashed #555453;\n  padding: 5px;\n}\n\n.GameShellScene .drop-zone a.is-active {\n  font-weight: bold;\n}\n\n.GameShellScene .drop-zone-hint {\n  padding: 10px;\n  text-align: center;\n  color: #8b8685;\n}\n\n.GameShellScene form > div {\n  margin-bottom: 1em;\n}\n\n.GameShellScene form > div.text .label {\n  display: block;\n  color: #8b8685;\n  font-weight: bold;\n  font-size: 0.8em;\n  margin: 0;\n  margin-bottom: 0.5ex;\n}\n\n.GameShellScene form > div.text input {\n  font: inherit;\n  display: block;\n  width: 100%;\n  box-sizing: border-box;\n  border: 1px inset #555453;\n  background: #252423;\n  color: #bfb;\n}\n\n.GameShellScene form > div.text input:disabled {\n  opacity: 0.2;\n}\n\n.GameShellScene form > div.checkbox input {\n  margin-right: 1ex;\n}\n\n.GameShellScene form > div.radio > h3 {\n  display: block;\n  color: #8b8685;\n  font-weight: bold;\n  font-size: 0.8em;\n  margin: 0;\n  margin-bottom: 0.5ex;\n}\n\n.GameShellScene form > div.radio > label {\n  display: block;\n}\n\n.GameShellScene form > div.radio input {\n  margin-right: 1ex;\n}\n\n.GameShellScene button {\n  background: #8b8685;\n  border: 1px outset #aba6a5;\n  font: inherit;\n  font-size: 1.5em;\n  color: #e9e8e7;\n  display: block;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.GameShellScene a {\n  color: #fed;\n}\n",""])},1514:function(t,e,n){var r=n(1513);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},154:function(t,e,n){"use strict";var r=n(79);e.a=function(t){return{as:function(e,n){return new Promise(function(i,o){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType=e,a.onload=function(){200==+a.status?i(a.response):o(new Error("Unable to download "+t+": HTTP "+a.status))},a.onerror=function(){return o(new Error("Unable to download "+t))},n&&(n.formatter=r.a,a.onprogress=function(t){return n.report(t.loaded,t.total)}),a.send(null)})}}}},157:function(t,e,n){"use strict";var r=n(147),i=n(140),o=n(28),a=n.n(o),u=n(67),s=n.n(u),c=(n(335),n(30)),l=n.n(c),f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var h=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.renderTable=function(){var t=n.props.bench.stats;return a.a.createElement("table",null,a.a.createElement("tbody",null,Object.keys(t).map(function(e){var n=t[e];return a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("strong",null,e)),a.a.createElement("td",{align:"right"},""+n))})))},n.handleInteraction=function(t){t.preventDefault(),t.stopPropagation(),n.setState({show:!n.state.show})},n.state={show:!1,text:"wow"},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.a.Component),f(e,[{key:"render",value:function(){return a.a.createElement("div",{className:"BenchmarkPanel",onClick:this.handleInteraction,onTouchStart:this.handleInteraction},this.state.show?a.a.createElement("article",null,a.a.createElement("b",null,"Benchmark Stats"),a.a.createElement("br",null),this.renderTable()):"Show Benchmark Stats")}},{key:"componentDidMount",value:function(){var t=this;setInterval(function(){return t.forceUpdate()},1e3)}}]),e}();h.propTypes={bench:l.a.object};var p=h;function d(t){return t.toFixed(2)+"ms"}e.a=window.BEMUSE_BENCHMARK=Object(i.c)()?new function(){var t={},e={enabled:!0,stats:t,wrap:function(e,n){return function(){try{var i=Object(r.a)();return n.apply(this,arguments)}finally{var o=Object(r.a)();(t[e]||(t[e]=new function(){var t=0,e=0,n=0,i=[],o=0,a=0;return{push:function(u){var s=Object(r.a)();for(n=(t+=u)/(e+=1),o+=u,i.push({delta:u,time:s});i[0]&&i[0].time<s-1e3;)o-=i.shift().delta;a=o/i.length},toString:function(){return d(n)+" / "+d(a)}}}(e))).push(o-i)}}},benchmark:function(t,e,n){e[n]=this.wrap(t,e[n])},toString:function(){var e=[];return Object.keys(t).forEach(function(n){e.push("- "+n+": "+t[n])}),e.join("\n")}},n=document.createElement("div");return n.setAttribute("style","position:fixed;top:10px;right:10px;z-index:99999"),document.body.appendChild(n),s.a.render(a.a.createElement(p,{bench:e}),n),e}:new function(){return{enabled:!1,wrap:function(t,e){return e}}}},164:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return a});var r={cx:1024,cy:-975,r:1024,t0:3.922,t1:4.555,p:960,w:60};function i(t){var e=Math.max(0,t-1);t<0&&(t=0),t>1&&(t=1);var n=r.t0+(r.t1-r.t0)*t,i=r.cx+Math.cos(n)*r.r,o=r.cy-Math.sin(n)*r.r,a=r.p/(r.p-i);return{y:o*a+360+2048*e,projection:a}}var o=r.w;function a(t,e){for(var n=.75,o=1,a=void 0,u=void 0,s=0;s<8;s++)(u=i(a=(n+o)/2)).y>e?o=a:n=a;if(a<.8)return null;var c=640+u.projection*-r.w,l=640+u.projection*r.w,f=Math.floor((t-c)/(l-c)*7);return f>=-1&&f<=7?(f<0&&(f=0),f>6&&(f=6),String(f+1)):null}},165:function(t,e,n){"use strict";var r=n(260),i=n.n(r);e.a=i()({latencyHint:"interaction"})},180:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(104));e.GameEvent=new i.default({beat:Number,time:Number,position:Number}),e.default=e.GameEvent},181:function(t,e,n){(function(t,r){var i;(function(){var o,a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",c="__lodash_hash_undefined__",l=500,f="__lodash_placeholder__",h=1,p=2,d=4,v=1,_=2,y=1,g=2,m=4,b=8,w=16,x=32,k=64,S=128,E=256,j=512,C=30,A="...",O=800,T=16,P=1,R=2,I=1/0,B=9007199254740991,M=1.7976931348623157e308,F=NaN,L=4294967295,N=L-1,U=L>>>1,D=[["ary",S],["bind",y],["bindKey",g],["curry",b],["curryRight",w],["flip",j],["partial",x],["partialRight",k],["rearg",E]],z="[object Arguments]",W="[object Array]",G="[object AsyncFunction]",V="[object Boolean]",H="[object Date]",q="[object DOMException]",Y="[object Error]",$="[object Function]",J="[object GeneratorFunction]",K="[object Map]",Q="[object Number]",X="[object Null]",Z="[object Object]",tt="[object Proxy]",et="[object RegExp]",nt="[object Set]",rt="[object String]",it="[object Symbol]",ot="[object Undefined]",at="[object WeakMap]",ut="[object WeakSet]",st="[object ArrayBuffer]",ct="[object DataView]",lt="[object Float32Array]",ft="[object Float64Array]",ht="[object Int8Array]",pt="[object Int16Array]",dt="[object Int32Array]",vt="[object Uint8Array]",_t="[object Uint8ClampedArray]",yt="[object Uint16Array]",gt="[object Uint32Array]",mt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xt=/&(?:amp|lt|gt|quot|#39);/g,kt=/[&<>"']/g,St=RegExp(xt.source),Et=RegExp(kt.source),jt=/<%-([\s\S]+?)%>/g,Ct=/<%([\s\S]+?)%>/g,At=/<%=([\s\S]+?)%>/g,Ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tt=/^\w*$/,Pt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rt=/[\\^$.*+?()[\]{}|]/g,It=RegExp(Rt.source),Bt=/^\s+|\s+$/g,Mt=/^\s+/,Ft=/\s+$/,Lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Nt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ut=/,? & /,Dt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zt=/\\(\\)?/g,Wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gt=/\w*$/,Vt=/^[-+]0x[0-9a-f]+$/i,Ht=/^0b[01]+$/i,qt=/^\[object .+?Constructor\]$/,Yt=/^0o[0-7]+$/i,$t=/^(?:0|[1-9]\d*)$/,Jt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kt=/($^)/,Qt=/['\n\r\u2028\u2029\\]/g,Xt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Zt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="[\\ud800-\\udfff]",ee="["+Zt+"]",ne="["+Xt+"]",re="\\d+",ie="[\\u2700-\\u27bf]",oe="[a-z\\xdf-\\xf6\\xf8-\\xff]",ae="[^\\ud800-\\udfff"+Zt+re+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ue="\\ud83c[\\udffb-\\udfff]",se="[^\\ud800-\\udfff]",ce="(?:\\ud83c[\\udde6-\\uddff]){2}",le="[\\ud800-\\udbff][\\udc00-\\udfff]",fe="[A-Z\\xc0-\\xd6\\xd8-\\xde]",he="(?:"+oe+"|"+ae+")",pe="(?:"+fe+"|"+ae+")",de="(?:"+ne+"|"+ue+")"+"?",ve="[\\ufe0e\\ufe0f]?"+de+("(?:\\u200d(?:"+[se,ce,le].join("|")+")[\\ufe0e\\ufe0f]?"+de+")*"),_e="(?:"+[ie,ce,le].join("|")+")"+ve,ye="(?:"+[se+ne+"?",ne,ce,le,te].join("|")+")",ge=RegExp("['’]","g"),me=RegExp(ne,"g"),be=RegExp(ue+"(?="+ue+")|"+ye+ve,"g"),we=RegExp([fe+"?"+oe+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ee,fe,"$"].join("|")+")",pe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ee,fe+he,"$"].join("|")+")",fe+"?"+he+"+(?:['’](?:d|ll|m|re|s|t|ve))?",fe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",re,_e].join("|"),"g"),xe=RegExp("[\\u200d\\ud800-\\udfff"+Xt+"\\ufe0e\\ufe0f]"),ke=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Se=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ee=-1,je={};je[lt]=je[ft]=je[ht]=je[pt]=je[dt]=je[vt]=je[_t]=je[yt]=je[gt]=!0,je[z]=je[W]=je[st]=je[V]=je[ct]=je[H]=je[Y]=je[$]=je[K]=je[Q]=je[Z]=je[et]=je[nt]=je[rt]=je[at]=!1;var Ce={};Ce[z]=Ce[W]=Ce[st]=Ce[ct]=Ce[V]=Ce[H]=Ce[lt]=Ce[ft]=Ce[ht]=Ce[pt]=Ce[dt]=Ce[K]=Ce[Q]=Ce[Z]=Ce[et]=Ce[nt]=Ce[rt]=Ce[it]=Ce[vt]=Ce[_t]=Ce[yt]=Ce[gt]=!0,Ce[Y]=Ce[$]=Ce[at]=!1;var Ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Oe=parseFloat,Te=parseInt,Pe="object"==typeof t&&t&&t.Object===Object&&t,Re="object"==typeof self&&self&&self.Object===Object&&self,Ie=Pe||Re||Function("return this")(),Be="object"==typeof e&&e&&!e.nodeType&&e,Me=Be&&"object"==typeof r&&r&&!r.nodeType&&r,Fe=Me&&Me.exports===Be,Le=Fe&&Pe.process,Ne=function(){try{var t=Me&&Me.require&&Me.require("util").types;return t||Le&&Le.binding&&Le.binding("util")}catch(t){}}(),Ue=Ne&&Ne.isArrayBuffer,De=Ne&&Ne.isDate,ze=Ne&&Ne.isMap,We=Ne&&Ne.isRegExp,Ge=Ne&&Ne.isSet,Ve=Ne&&Ne.isTypedArray;function He(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function qe(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Ye(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function $e(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Je(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ke(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Qe(t,e){return!!(null==t?0:t.length)&&sn(t,e,0)>-1}function Xe(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Ze(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function tn(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function en(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function nn(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function rn(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var on=hn("length");function an(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function un(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function sn(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):un(t,ln,n)}function cn(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function ln(t){return t!=t}function fn(t,e){var n=null==t?0:t.length;return n?vn(t,e)/n:F}function hn(t){return function(e){return null==e?o:e[t]}}function pn(t){return function(e){return null==t?o:t[e]}}function dn(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function vn(t,e){for(var n,r=-1,i=t.length;++r<i;){var a=e(t[r]);a!==o&&(n=n===o?a:n+a)}return n}function _n(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function yn(t){return function(e){return t(e)}}function gn(t,e){return Ze(e,function(e){return t[e]})}function mn(t,e){return t.has(e)}function bn(t,e){for(var n=-1,r=t.length;++n<r&&sn(e,t[n],0)>-1;);return n}function wn(t,e){for(var n=t.length;n--&&sn(e,t[n],0)>-1;);return n}var xn=pn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),kn=pn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Sn(t){return"\\"+Ae[t]}function En(t){return xe.test(t)}function jn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function Cn(t,e){return function(n){return t(e(n))}}function An(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==f||(t[n]=f,o[i++]=n)}return o}function On(t,e){return"__proto__"==e?o:t[e]}function Tn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Pn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Rn(t){return En(t)?function(t){var e=be.lastIndex=0;for(;be.test(t);)++e;return e}(t):on(t)}function In(t){return En(t)?function(t){return t.match(be)||[]}(t):function(t){return t.split("")}(t)}var Bn=pn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Mn=function t(e){var n,r=(e=null==e?Ie:Mn.defaults(Ie.Object(),e,Mn.pick(Ie,Se))).Array,i=e.Date,Xt=e.Error,Zt=e.Function,te=e.Math,ee=e.Object,ne=e.RegExp,re=e.String,ie=e.TypeError,oe=r.prototype,ae=Zt.prototype,ue=ee.prototype,se=e["__core-js_shared__"],ce=ae.toString,le=ue.hasOwnProperty,fe=0,he=(n=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",pe=ue.toString,de=ce.call(ee),ve=Ie._,_e=ne("^"+ce.call(le).replace(Rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ye=Fe?e.Buffer:o,be=e.Symbol,xe=e.Uint8Array,Ae=ye?ye.allocUnsafe:o,Pe=Cn(ee.getPrototypeOf,ee),Re=ee.create,Be=ue.propertyIsEnumerable,Me=oe.splice,Le=be?be.isConcatSpreadable:o,Ne=be?be.iterator:o,on=be?be.toStringTag:o,pn=function(){try{var t=Do(ee,"defineProperty");return t({},"",{}),t}catch(t){}}(),Fn=e.clearTimeout!==Ie.clearTimeout&&e.clearTimeout,Ln=i&&i.now!==Ie.Date.now&&i.now,Nn=e.setTimeout!==Ie.setTimeout&&e.setTimeout,Un=te.ceil,Dn=te.floor,zn=ee.getOwnPropertySymbols,Wn=ye?ye.isBuffer:o,Gn=e.isFinite,Vn=oe.join,Hn=Cn(ee.keys,ee),qn=te.max,Yn=te.min,$n=i.now,Jn=e.parseInt,Kn=te.random,Qn=oe.reverse,Xn=Do(e,"DataView"),Zn=Do(e,"Map"),tr=Do(e,"Promise"),er=Do(e,"Set"),nr=Do(e,"WeakMap"),rr=Do(ee,"create"),ir=nr&&new nr,or={},ar=fa(Xn),ur=fa(Zn),sr=fa(tr),cr=fa(er),lr=fa(nr),fr=be?be.prototype:o,hr=fr?fr.valueOf:o,pr=fr?fr.toString:o;function dr(t){if(Au(t)&&!yu(t)&&!(t instanceof gr)){if(t instanceof yr)return t;if(le.call(t,"__wrapped__"))return ha(t)}return new yr(t)}var vr=function(){function t(){}return function(e){if(!Cu(e))return{};if(Re)return Re(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function _r(){}function yr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function gr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=L,this.__views__=[]}function mr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function br(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function xr(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new wr;++e<n;)this.add(t[e])}function kr(t){var e=this.__data__=new br(t);this.size=e.size}function Sr(t,e){var n=yu(t),r=!n&&_u(t),i=!n&&!r&&wu(t),o=!n&&!r&&!i&&Fu(t),a=n||r||i||o,u=a?_n(t.length,re):[],s=u.length;for(var c in t)!e&&!le.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Yo(c,s))||u.push(c);return u}function Er(t){var e=t.length;return e?t[xi(0,e-1)]:o}function jr(t,e){return sa(ro(t),Mr(e,0,t.length))}function Cr(t){return sa(ro(t))}function Ar(t,e,n){(n===o||pu(t[e],n))&&(n!==o||e in t)||Ir(t,e,n)}function Or(t,e,n){var r=t[e];le.call(t,e)&&pu(r,n)&&(n!==o||e in t)||Ir(t,e,n)}function Tr(t,e){for(var n=t.length;n--;)if(pu(t[n][0],e))return n;return-1}function Pr(t,e,n,r){return Dr(t,function(t,i,o){e(r,t,n(t),o)}),r}function Rr(t,e){return t&&io(e,is(e),t)}function Ir(t,e,n){"__proto__"==e&&pn?pn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Br(t,e){for(var n=-1,i=e.length,a=r(i),u=null==t;++n<i;)a[n]=u?o:Zu(t,e[n]);return a}function Mr(t,e,n){return t==t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function Fr(t,e,n,r,i,a){var u,s=e&h,c=e&p,l=e&d;if(n&&(u=i?n(t,r,i,a):n(t)),u!==o)return u;if(!Cu(t))return t;var f=yu(t);if(f){if(u=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&le.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!s)return ro(t,u)}else{var v=Go(t),_=v==$||v==J;if(wu(t))return Qi(t,s);if(v==Z||v==z||_&&!i){if(u=c||_?{}:Ho(t),!s)return c?function(t,e){return io(t,Wo(t),e)}(t,function(t,e){return t&&io(e,os(e),t)}(u,t)):function(t,e){return io(t,zo(t),e)}(t,Rr(u,t))}else{if(!Ce[v])return i?t:{};u=function(t,e,n){var r,i,o,a=t.constructor;switch(e){case st:return Xi(t);case V:case H:return new a(+t);case ct:return function(t,e){var n=e?Xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case lt:case ft:case ht:case pt:case dt:case vt:case _t:case yt:case gt:return Zi(t,n);case K:return new a;case Q:case rt:return new a(t);case et:return(o=new(i=t).constructor(i.source,Gt.exec(i))).lastIndex=i.lastIndex,o;case nt:return new a;case it:return r=t,hr?ee(hr.call(r)):{}}}(t,v,s)}}a||(a=new kr);var y=a.get(t);if(y)return y;if(a.set(t,u),Iu(t))return t.forEach(function(r){u.add(Fr(r,e,n,r,t,a))}),u;if(Ou(t))return t.forEach(function(r,i){u.set(i,Fr(r,e,n,i,t,a))}),u;var g=f?o:(l?c?Io:Ro:c?os:is)(t);return Ye(g||t,function(r,i){g&&(r=t[i=r]),Or(u,i,Fr(r,e,n,i,t,a))}),u}function Lr(t,e,n){var r=n.length;if(null==t)return!r;for(t=ee(t);r--;){var i=n[r],a=e[i],u=t[i];if(u===o&&!(i in t)||!a(u))return!1}return!0}function Nr(t,e,n){if("function"!=typeof t)throw new ie(s);return ia(function(){t.apply(o,n)},e)}function Ur(t,e,n,r){var i=-1,o=Qe,u=!0,s=t.length,c=[],l=e.length;if(!s)return c;n&&(e=Ze(e,yn(n))),r?(o=Xe,u=!1):e.length>=a&&(o=mn,u=!1,e=new xr(e));t:for(;++i<s;){var f=t[i],h=null==n?f:n(f);if(f=r||0!==f?f:0,u&&h==h){for(var p=l;p--;)if(e[p]===h)continue t;c.push(f)}else o(e,h,r)||c.push(f)}return c}dr.templateSettings={escape:jt,evaluate:Ct,interpolate:At,variable:"",imports:{_:dr}},dr.prototype=_r.prototype,dr.prototype.constructor=dr,yr.prototype=vr(_r.prototype),yr.prototype.constructor=yr,gr.prototype=vr(_r.prototype),gr.prototype.constructor=gr,mr.prototype.clear=function(){this.__data__=rr?rr(null):{},this.size=0},mr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},mr.prototype.get=function(t){var e=this.__data__;if(rr){var n=e[t];return n===c?o:n}return le.call(e,t)?e[t]:o},mr.prototype.has=function(t){var e=this.__data__;return rr?e[t]!==o:le.call(e,t)},mr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=rr&&e===o?c:e,this},br.prototype.clear=function(){this.__data__=[],this.size=0},br.prototype.delete=function(t){var e=this.__data__,n=Tr(e,t);return!(n<0||(n==e.length-1?e.pop():Me.call(e,n,1),--this.size,0))},br.prototype.get=function(t){var e=this.__data__,n=Tr(e,t);return n<0?o:e[n][1]},br.prototype.has=function(t){return Tr(this.__data__,t)>-1},br.prototype.set=function(t,e){var n=this.__data__,r=Tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},wr.prototype.clear=function(){this.size=0,this.__data__={hash:new mr,map:new(Zn||br),string:new mr}},wr.prototype.delete=function(t){var e=No(this,t).delete(t);return this.size-=e?1:0,e},wr.prototype.get=function(t){return No(this,t).get(t)},wr.prototype.has=function(t){return No(this,t).has(t)},wr.prototype.set=function(t,e){var n=No(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},xr.prototype.add=xr.prototype.push=function(t){return this.__data__.set(t,c),this},xr.prototype.has=function(t){return this.__data__.has(t)},kr.prototype.clear=function(){this.__data__=new br,this.size=0},kr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},kr.prototype.get=function(t){return this.__data__.get(t)},kr.prototype.has=function(t){return this.__data__.has(t)},kr.prototype.set=function(t,e){var n=this.__data__;if(n instanceof br){var r=n.__data__;if(!Zn||r.length<a-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new wr(r)}return n.set(t,e),this.size=n.size,this};var Dr=uo($r),zr=uo(Jr,!0);function Wr(t,e){var n=!0;return Dr(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Gr(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],u=e(a);if(null!=u&&(s===o?u==u&&!Mu(u):n(u,s)))var s=u,c=a}return c}function Vr(t,e){var n=[];return Dr(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Hr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=qo),i||(i=[]);++o<a;){var u=t[o];e>0&&n(u)?e>1?Hr(u,e-1,n,r,i):tn(i,u):r||(i[i.length]=u)}return i}var qr=so(),Yr=so(!0);function $r(t,e){return t&&qr(t,e,is)}function Jr(t,e){return t&&Yr(t,e,is)}function Kr(t,e){return Ke(e,function(e){return Su(t[e])})}function Qr(t,e){for(var n=0,r=(e=Yi(e,t)).length;null!=t&&n<r;)t=t[la(e[n++])];return n&&n==r?t:o}function Xr(t,e,n){var r=e(t);return yu(t)?r:tn(r,n(t))}function Zr(t){return null==t?t===o?ot:X:on&&on in ee(t)?function(t){var e=le.call(t,on),n=t[on];try{t[on]=o;var r=!0}catch(t){}var i=pe.call(t);return r&&(e?t[on]=n:delete t[on]),i}(t):function(t){return pe.call(t)}(t)}function ti(t,e){return t>e}function ei(t,e){return null!=t&&le.call(t,e)}function ni(t,e){return null!=t&&e in ee(t)}function ri(t,e,n){for(var i=n?Xe:Qe,a=t[0].length,u=t.length,s=u,c=r(u),l=1/0,f=[];s--;){var h=t[s];s&&e&&(h=Ze(h,yn(e))),l=Yn(h.length,l),c[s]=!n&&(e||a>=120&&h.length>=120)?new xr(s&&h):o}h=t[0];var p=-1,d=c[0];t:for(;++p<a&&f.length<l;){var v=h[p],_=e?e(v):v;if(v=n||0!==v?v:0,!(d?mn(d,_):i(f,_,n))){for(s=u;--s;){var y=c[s];if(!(y?mn(y,_):i(t[s],_,n)))continue t}d&&d.push(_),f.push(v)}}return f}function ii(t,e,n){var r=null==(t=na(t,e=Yi(e,t)))?t:t[la(ka(e))];return null==r?o:He(r,t,n)}function oi(t){return Au(t)&&Zr(t)==z}function ai(t,e,n,r,i){return t===e||(null==t||null==e||!Au(t)&&!Au(e)?t!=t&&e!=e:function(t,e,n,r,i,a){var u=yu(t),s=yu(e),c=u?W:Go(t),l=s?W:Go(e),f=(c=c==z?Z:c)==Z,h=(l=l==z?Z:l)==Z,p=c==l;if(p&&wu(t)){if(!wu(e))return!1;u=!0,f=!1}if(p&&!f)return a||(a=new kr),u||Fu(t)?To(t,e,n,r,i,a):function(t,e,n,r,i,o,a){switch(n){case ct:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case st:return!(t.byteLength!=e.byteLength||!o(new xe(t),new xe(e)));case V:case H:case Q:return pu(+t,+e);case Y:return t.name==e.name&&t.message==e.message;case et:case rt:return t==e+"";case K:var u=jn;case nt:var s=r&v;if(u||(u=Tn),t.size!=e.size&&!s)return!1;var c=a.get(t);if(c)return c==e;r|=_,a.set(t,e);var l=To(u(t),u(e),r,i,o,a);return a.delete(t),l;case it:if(hr)return hr.call(t)==hr.call(e)}return!1}(t,e,c,n,r,i,a);if(!(n&v)){var d=f&&le.call(t,"__wrapped__"),y=h&&le.call(e,"__wrapped__");if(d||y){var g=d?t.value():t,m=y?e.value():e;return a||(a=new kr),i(g,m,n,r,a)}}return!!p&&(a||(a=new kr),function(t,e,n,r,i,a){var u=n&v,s=Ro(t),c=s.length,l=Ro(e).length;if(c!=l&&!u)return!1;for(var f=c;f--;){var h=s[f];if(!(u?h in e:le.call(e,h)))return!1}var p=a.get(t);if(p&&a.get(e))return p==e;var d=!0;a.set(t,e),a.set(e,t);for(var _=u;++f<c;){h=s[f];var y=t[h],g=e[h];if(r)var m=u?r(g,y,h,e,t,a):r(y,g,h,t,e,a);if(!(m===o?y===g||i(y,g,n,r,a):m)){d=!1;break}_||(_="constructor"==h)}if(d&&!_){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(d=!1)}return a.delete(t),a.delete(e),d}(t,e,n,r,i,a))}(t,e,n,r,ai,i))}function ui(t,e,n,r){var i=n.length,a=i,u=!r;if(null==t)return!a;for(t=ee(t);i--;){var s=n[i];if(u&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){var c=(s=n[i])[0],l=t[c],f=s[1];if(u&&s[2]){if(l===o&&!(c in t))return!1}else{var h=new kr;if(r)var p=r(l,f,c,t,e,h);if(!(p===o?ai(f,l,v|_,r,h):p))return!1}}return!0}function si(t){return!(!Cu(t)||he&&he in t)&&(Su(t)?_e:qt).test(fa(t))}function ci(t){return"function"==typeof t?t:null==t?Ts:"object"==typeof t?yu(t)?vi(t[0],t[1]):di(t):Us(t)}function li(t){if(!Xo(t))return Hn(t);var e=[];for(var n in ee(t))le.call(t,n)&&"constructor"!=n&&e.push(n);return e}function fi(t){if(!Cu(t))return function(t){var e=[];if(null!=t)for(var n in ee(t))e.push(n);return e}(t);var e=Xo(t),n=[];for(var r in t)("constructor"!=r||!e&&le.call(t,r))&&n.push(r);return n}function hi(t,e){return t<e}function pi(t,e){var n=-1,i=mu(t)?r(t.length):[];return Dr(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function di(t){var e=Uo(t);return 1==e.length&&e[0][2]?ta(e[0][0],e[0][1]):function(n){return n===t||ui(n,t,e)}}function vi(t,e){return Jo(t)&&Zo(e)?ta(la(t),e):function(n){var r=Zu(n,t);return r===o&&r===e?ts(n,t):ai(e,r,v|_)}}function _i(t,e,n,r,i){t!==e&&qr(e,function(a,u){if(Cu(a))i||(i=new kr),function(t,e,n,r,i,a,u){var s=On(t,n),c=On(e,n),l=u.get(c);if(l)Ar(t,n,l);else{var f=a?a(s,c,n+"",t,e,u):o,h=f===o;if(h){var p=yu(c),d=!p&&wu(c),v=!p&&!d&&Fu(c);f=c,p||d||v?yu(s)?f=s:bu(s)?f=ro(s):d?(h=!1,f=Qi(c,!0)):v?(h=!1,f=Zi(c,!0)):f=[]:Pu(c)||_u(c)?(f=s,_u(s)?f=Vu(s):(!Cu(s)||r&&Su(s))&&(f=Ho(c))):h=!1}h&&(u.set(c,f),i(f,c,r,a,u),u.delete(c)),Ar(t,n,f)}}(t,e,u,n,_i,r,i);else{var s=r?r(On(t,u),a,u+"",t,e,i):o;s===o&&(s=a),Ar(t,u,s)}},os)}function yi(t,e){var n=t.length;if(n)return Yo(e+=e<0?n:0,n)?t[e]:o}function gi(t,e,n){var r=-1;return e=Ze(e.length?e:[Ts],yn(Lo())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(pi(t,function(t,n,i){return{criteria:Ze(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,u=n.length;++r<a;){var s=to(i[r],o[r]);if(s){if(r>=u)return s;var c=n[r];return s*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)})}function mi(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],u=Qr(t,a);n(u,a)&&Ci(o,Yi(a,t),u)}return o}function bi(t,e,n,r){var i=r?cn:sn,o=-1,a=e.length,u=t;for(t===e&&(e=ro(e)),n&&(u=Ze(t,yn(n)));++o<a;)for(var s=0,c=e[o],l=n?n(c):c;(s=i(u,l,s,r))>-1;)u!==t&&Me.call(u,s,1),Me.call(t,s,1);return t}function wi(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Yo(i)?Me.call(t,i,1):Ui(t,i)}}return t}function xi(t,e){return t+Dn(Kn()*(e-t+1))}function ki(t,e){var n="";if(!t||e<1||e>B)return n;do{e%2&&(n+=t),(e=Dn(e/2))&&(t+=t)}while(e);return n}function Si(t,e){return oa(ea(t,e,Ts),t+"")}function Ei(t){return Er(ps(t))}function ji(t,e){var n=ps(t);return sa(n,Mr(e,0,n.length))}function Ci(t,e,n,r){if(!Cu(t))return t;for(var i=-1,a=(e=Yi(e,t)).length,u=a-1,s=t;null!=s&&++i<a;){var c=la(e[i]),l=n;if(i!=u){var f=s[c];(l=r?r(f,c,s):o)===o&&(l=Cu(f)?f:Yo(e[i+1])?[]:{})}Or(s,c,l),s=s[c]}return t}var Ai=ir?function(t,e){return ir.set(t,e),t}:Ts,Oi=pn?function(t,e){return pn(t,"toString",{configurable:!0,enumerable:!1,value:Cs(e),writable:!0})}:Ts;function Ti(t){return sa(ps(t))}function Pi(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=r(o);++i<o;)a[i]=t[i+e];return a}function Ri(t,e){var n;return Dr(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function Ii(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=U){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!Mu(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Bi(t,e,Ts,n)}function Bi(t,e,n,r){e=n(e);for(var i=0,a=null==t?0:t.length,u=e!=e,s=null===e,c=Mu(e),l=e===o;i<a;){var f=Dn((i+a)/2),h=n(t[f]),p=h!==o,d=null===h,v=h==h,_=Mu(h);if(u)var y=r||v;else y=l?v&&(r||p):s?v&&p&&(r||!d):c?v&&p&&!d&&(r||!_):!d&&!_&&(r?h<=e:h<e);y?i=f+1:a=f}return Yn(a,N)}function Mi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],u=e?e(a):a;if(!n||!pu(u,s)){var s=u;o[i++]=0===a?0:a}}return o}function Fi(t){return"number"==typeof t?t:Mu(t)?F:+t}function Li(t){if("string"==typeof t)return t;if(yu(t))return Ze(t,Li)+"";if(Mu(t))return pr?pr.call(t):"";var e=t+"";return"0"==e&&1/t==-I?"-0":e}function Ni(t,e,n){var r=-1,i=Qe,o=t.length,u=!0,s=[],c=s;if(n)u=!1,i=Xe;else if(o>=a){var l=e?null:So(t);if(l)return Tn(l);u=!1,i=mn,c=new xr}else c=e?[]:s;t:for(;++r<o;){var f=t[r],h=e?e(f):f;if(f=n||0!==f?f:0,u&&h==h){for(var p=c.length;p--;)if(c[p]===h)continue t;e&&c.push(h),s.push(f)}else i(c,h,n)||(c!==s&&c.push(h),s.push(f))}return s}function Ui(t,e){return null==(t=na(t,e=Yi(e,t)))||delete t[la(ka(e))]}function Di(t,e,n,r){return Ci(t,e,n(Qr(t,e)),r)}function zi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Pi(t,r?0:o,r?o+1:i):Pi(t,r?o+1:0,r?i:o)}function Wi(t,e){var n=t;return n instanceof gr&&(n=n.value()),en(e,function(t,e){return e.func.apply(e.thisArg,tn([t],e.args))},n)}function Gi(t,e,n){var i=t.length;if(i<2)return i?Ni(t[0]):[];for(var o=-1,a=r(i);++o<i;)for(var u=t[o],s=-1;++s<i;)s!=o&&(a[o]=Ur(a[o]||u,t[s],e,n));return Ni(Hr(a,1),e,n)}function Vi(t,e,n){for(var r=-1,i=t.length,a=e.length,u={};++r<i;){var s=r<a?e[r]:o;n(u,t[r],s)}return u}function Hi(t){return bu(t)?t:[]}function qi(t){return"function"==typeof t?t:Ts}function Yi(t,e){return yu(t)?t:Jo(t,e)?[t]:ca(Hu(t))}var $i=Si;function Ji(t,e,n){var r=t.length;return n=n===o?r:n,!e&&n>=r?t:Pi(t,e,n)}var Ki=Fn||function(t){return Ie.clearTimeout(t)};function Qi(t,e){if(e)return t.slice();var n=t.length,r=Ae?Ae(n):new t.constructor(n);return t.copy(r),r}function Xi(t){var e=new t.constructor(t.byteLength);return new xe(e).set(new xe(t)),e}function Zi(t,e){var n=e?Xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function to(t,e){if(t!==e){var n=t!==o,r=null===t,i=t==t,a=Mu(t),u=e!==o,s=null===e,c=e==e,l=Mu(e);if(!s&&!l&&!a&&t>e||a&&u&&c&&!s&&!l||r&&u&&c||!n&&c||!i)return 1;if(!r&&!a&&!l&&t<e||l&&n&&i&&!r&&!a||s&&n&&i||!u&&i||!c)return-1}return 0}function eo(t,e,n,i){for(var o=-1,a=t.length,u=n.length,s=-1,c=e.length,l=qn(a-u,0),f=r(c+l),h=!i;++s<c;)f[s]=e[s];for(;++o<u;)(h||o<a)&&(f[n[o]]=t[o]);for(;l--;)f[s++]=t[o++];return f}function no(t,e,n,i){for(var o=-1,a=t.length,u=-1,s=n.length,c=-1,l=e.length,f=qn(a-s,0),h=r(f+l),p=!i;++o<f;)h[o]=t[o];for(var d=o;++c<l;)h[d+c]=e[c];for(;++u<s;)(p||o<a)&&(h[d+n[u]]=t[o++]);return h}function ro(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function io(t,e,n,r){var i=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var s=e[a],c=r?r(n[s],t[s],s,n,t):o;c===o&&(c=t[s]),i?Ir(n,s,c):Or(n,s,c)}return n}function oo(t,e){return function(n,r){var i=yu(n)?qe:Pr,o=e?e():{};return i(n,t,Lo(r,2),o)}}function ao(t){return Si(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,u=i>2?n[2]:o;for(a=t.length>3&&"function"==typeof a?(i--,a):o,u&&$o(n[0],n[1],u)&&(a=i<3?o:a,i=1),e=ee(e);++r<i;){var s=n[r];s&&t(e,s,r,a)}return e})}function uo(t,e){return function(n,r){if(null==n)return n;if(!mu(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=ee(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function so(t){return function(e,n,r){for(var i=-1,o=ee(e),a=r(e),u=a.length;u--;){var s=a[t?u:++i];if(!1===n(o[s],s,o))break}return e}}function co(t){return function(e){var n=En(e=Hu(e))?In(e):o,r=n?n[0]:e.charAt(0),i=n?Ji(n,1).join(""):e.slice(1);return r[t]()+i}}function lo(t){return function(e){return en(Ss(_s(e).replace(ge,"")),t,"")}}function fo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=vr(t.prototype),r=t.apply(n,e);return Cu(r)?r:n}}function ho(t){return function(e,n,r){var i=ee(e);if(!mu(e)){var a=Lo(n,3);e=is(e),n=function(t){return a(i[t],t,i)}}var u=t(e,n,r);return u>-1?i[a?e[u]:u]:o}}function po(t){return Po(function(e){var n=e.length,r=n,i=yr.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new ie(s);if(i&&!u&&"wrapper"==Mo(a))var u=new yr([],!0)}for(r=u?r:n;++r<n;){var c=Mo(a=e[r]),l="wrapper"==c?Bo(a):o;u=l&&Ko(l[0])&&l[1]==(S|b|x|E)&&!l[4].length&&1==l[9]?u[Mo(l[0])].apply(u,l[3]):1==a.length&&Ko(a)?u[c]():u.thru(a)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&yu(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function vo(t,e,n,i,a,u,s,c,l,f){var h=e&S,p=e&y,d=e&g,v=e&(b|w),_=e&j,m=d?o:fo(t);return function y(){for(var g=arguments.length,b=r(g),w=g;w--;)b[w]=arguments[w];if(v)var x=Fo(y),k=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(b,x);if(i&&(b=eo(b,i,a,v)),u&&(b=no(b,u,s,v)),g-=k,v&&g<f){var S=An(b,x);return xo(t,e,vo,y.placeholder,n,b,S,c,l,f-g)}var E=p?n:this,j=d?E[t]:t;return g=b.length,c?b=function(t,e){for(var n=t.length,r=Yn(e.length,n),i=ro(t);r--;){var a=e[r];t[r]=Yo(a,n)?i[a]:o}return t}(b,c):_&&g>1&&b.reverse(),h&&l<g&&(b.length=l),this&&this!==Ie&&this instanceof y&&(j=m||fo(j)),j.apply(E,b)}}function _o(t,e){return function(n,r){return function(t,e,n,r){return $r(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}}function yo(t,e){return function(n,r){var i;if(n===o&&r===o)return e;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=Li(n),r=Li(r)):(n=Fi(n),r=Fi(r)),i=t(n,r)}return i}}function go(t){return Po(function(e){return e=Ze(e,yn(Lo())),Si(function(n){var r=this;return t(e,function(t){return He(t,r,n)})})})}function mo(t,e){var n=(e=e===o?" ":Li(e)).length;if(n<2)return n?ki(e,t):e;var r=ki(e,Un(t/Rn(e)));return En(e)?Ji(In(r),0,t).join(""):r.slice(0,t)}function bo(t){return function(e,n,i){return i&&"number"!=typeof i&&$o(e,n,i)&&(n=i=o),e=Du(e),n===o?(n=e,e=0):n=Du(n),function(t,e,n,i){for(var o=-1,a=qn(Un((e-t)/(n||1)),0),u=r(a);a--;)u[i?a:++o]=t,t+=n;return u}(e,n,i=i===o?e<n?1:-1:Du(i),t)}}function wo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Gu(e),n=Gu(n)),t(e,n)}}function xo(t,e,n,r,i,a,u,s,c,l){var f=e&b;e|=f?x:k,(e&=~(f?k:x))&m||(e&=~(y|g));var h=[t,e,i,f?a:o,f?u:o,f?o:a,f?o:u,s,c,l],p=n.apply(o,h);return Ko(t)&&ra(p,h),p.placeholder=r,aa(p,t,e)}function ko(t){var e=te[t];return function(t,n){if(t=Gu(t),n=null==n?0:Yn(zu(n),292)){var r=(Hu(t)+"e").split("e");return+((r=(Hu(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var So=er&&1/Tn(new er([,-0]))[1]==I?function(t){return new er(t)}:Ms;function Eo(t){return function(e){var n=Go(e);return n==K?jn(e):n==nt?Pn(e):function(t,e){return Ze(e,function(e){return[e,t[e]]})}(e,t(e))}}function jo(t,e,n,i,a,u,c,l){var h=e&g;if(!h&&"function"!=typeof t)throw new ie(s);var p=i?i.length:0;if(p||(e&=~(x|k),i=a=o),c=c===o?c:qn(zu(c),0),l=l===o?l:zu(l),p-=a?a.length:0,e&k){var d=i,v=a;i=a=o}var _=h?o:Bo(t),j=[t,e,n,i,a,d,v,u,c,l];if(_&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<(y|g|S),a=r==S&&n==b||r==S&&n==E&&t[7].length<=e[8]||r==(S|E)&&e[7].length<=e[8]&&n==b;if(!o&&!a)return t;r&y&&(t[2]=e[2],i|=n&y?0:m);var u=e[3];if(u){var s=t[3];t[3]=s?eo(s,u,e[4]):u,t[4]=s?An(t[3],f):e[4]}(u=e[5])&&(s=t[5],t[5]=s?no(s,u,e[6]):u,t[6]=s?An(t[5],f):e[6]),(u=e[7])&&(t[7]=u),r&S&&(t[8]=null==t[8]?e[8]:Yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(j,_),t=j[0],e=j[1],n=j[2],i=j[3],a=j[4],!(l=j[9]=j[9]===o?h?0:t.length:qn(j[9]-p,0))&&e&(b|w)&&(e&=~(b|w)),e&&e!=y)C=e==b||e==w?function(t,e,n){var i=fo(t);return function a(){for(var u=arguments.length,s=r(u),c=u,l=Fo(a);c--;)s[c]=arguments[c];var f=u<3&&s[0]!==l&&s[u-1]!==l?[]:An(s,l);return(u-=f.length)<n?xo(t,e,vo,a.placeholder,o,s,f,o,o,n-u):He(this&&this!==Ie&&this instanceof a?i:t,this,s)}}(t,e,l):e!=x&&e!=(y|x)||a.length?vo.apply(o,j):function(t,e,n,i){var o=e&y,a=fo(t);return function e(){for(var u=-1,s=arguments.length,c=-1,l=i.length,f=r(l+s),h=this&&this!==Ie&&this instanceof e?a:t;++c<l;)f[c]=i[c];for(;s--;)f[c++]=arguments[++u];return He(h,o?n:this,f)}}(t,e,n,i);else var C=function(t,e,n){var r=e&y,i=fo(t);return function e(){return(this&&this!==Ie&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return aa((_?Ai:ra)(C,j),t,e)}function Co(t,e,n,r){return t===o||pu(t,ue[n])&&!le.call(r,n)?e:t}function Ao(t,e,n,r,i,a){return Cu(t)&&Cu(e)&&(a.set(e,t),_i(t,e,o,Ao,a),a.delete(e)),t}function Oo(t){return Pu(t)?o:t}function To(t,e,n,r,i,a){var u=n&v,s=t.length,c=e.length;if(s!=c&&!(u&&c>s))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var f=-1,h=!0,p=n&_?new xr:o;for(a.set(t,e),a.set(e,t);++f<s;){var d=t[f],y=e[f];if(r)var g=u?r(y,d,f,e,t,a):r(d,y,f,t,e,a);if(g!==o){if(g)continue;h=!1;break}if(p){if(!rn(e,function(t,e){if(!mn(p,e)&&(d===t||i(d,t,n,r,a)))return p.push(e)})){h=!1;break}}else if(d!==y&&!i(d,y,n,r,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function Po(t){return oa(ea(t,o,ga),t+"")}function Ro(t){return Xr(t,is,zo)}function Io(t){return Xr(t,os,Wo)}var Bo=ir?function(t){return ir.get(t)}:Ms;function Mo(t){for(var e=t.name+"",n=or[e],r=le.call(or,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Fo(t){return(le.call(dr,"placeholder")?dr:t).placeholder}function Lo(){var t=dr.iteratee||Ps;return t=t===Ps?ci:t,arguments.length?t(arguments[0],arguments[1]):t}function No(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Uo(t){for(var e=is(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Zo(i)]}return e}function Do(t,e){var n=function(t,e){return null==t?o:t[e]}(t,e);return si(n)?n:o}var zo=zn?function(t){return null==t?[]:(t=ee(t),Ke(zn(t),function(e){return Be.call(t,e)}))}:Ws,Wo=zn?function(t){for(var e=[];t;)tn(e,zo(t)),t=Pe(t);return e}:Ws,Go=Zr;function Vo(t,e,n){for(var r=-1,i=(e=Yi(e,t)).length,o=!1;++r<i;){var a=la(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ju(i)&&Yo(a,i)&&(yu(t)||_u(t))}function Ho(t){return"function"!=typeof t.constructor||Xo(t)?{}:vr(Pe(t))}function qo(t){return yu(t)||_u(t)||!!(Le&&t&&t[Le])}function Yo(t,e){var n=typeof t;return!!(e=null==e?B:e)&&("number"==n||"symbol"!=n&&$t.test(t))&&t>-1&&t%1==0&&t<e}function $o(t,e,n){if(!Cu(n))return!1;var r=typeof e;return!!("number"==r?mu(n)&&Yo(e,n.length):"string"==r&&e in n)&&pu(n[e],t)}function Jo(t,e){if(yu(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Mu(t))||Tt.test(t)||!Ot.test(t)||null!=e&&t in ee(e)}function Ko(t){var e=Mo(t),n=dr[e];if("function"!=typeof n||!(e in gr.prototype))return!1;if(t===n)return!0;var r=Bo(n);return!!r&&t===r[0]}(Xn&&Go(new Xn(new ArrayBuffer(1)))!=ct||Zn&&Go(new Zn)!=K||tr&&"[object Promise]"!=Go(tr.resolve())||er&&Go(new er)!=nt||nr&&Go(new nr)!=at)&&(Go=function(t){var e=Zr(t),n=e==Z?t.constructor:o,r=n?fa(n):"";if(r)switch(r){case ar:return ct;case ur:return K;case sr:return"[object Promise]";case cr:return nt;case lr:return at}return e});var Qo=se?Su:Gs;function Xo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ue)}function Zo(t){return t==t&&!Cu(t)}function ta(t,e){return function(n){return null!=n&&n[t]===e&&(e!==o||t in ee(n))}}function ea(t,e,n){return e=qn(e===o?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=qn(i.length-e,0),u=r(a);++o<a;)u[o]=i[e+o];o=-1;for(var s=r(e+1);++o<e;)s[o]=i[o];return s[e]=n(u),He(t,this,s)}}function na(t,e){return e.length<2?t:Qr(t,Pi(e,0,-1))}var ra=ua(Ai),ia=Nn||function(t,e){return Ie.setTimeout(t,e)},oa=ua(Oi);function aa(t,e,n){var r=e+"";return oa(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Lt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ye(D,function(n){var r="_."+n[0];e&n[1]&&!Qe(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(Nt);return e?e[1].split(Ut):[]}(r),n)))}function ua(t){var e=0,n=0;return function(){var r=$n(),i=T-(r-n);if(n=r,i>0){if(++e>=O)return arguments[0]}else e=0;return t.apply(o,arguments)}}function sa(t,e){var n=-1,r=t.length,i=r-1;for(e=e===o?r:e;++n<e;){var a=xi(n,i),u=t[a];t[a]=t[n],t[n]=u}return t.length=e,t}var ca=function(t){var e=uu(t,function(t){return n.size===l&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Pt,function(t,n,r,i){e.push(r?i.replace(zt,"$1"):n||t)}),e});function la(t){if("string"==typeof t||Mu(t))return t;var e=t+"";return"0"==e&&1/t==-I?"-0":e}function fa(t){if(null!=t){try{return ce.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ha(t){if(t instanceof gr)return t.clone();var e=new yr(t.__wrapped__,t.__chain__);return e.__actions__=ro(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var pa=Si(function(t,e){return bu(t)?Ur(t,Hr(e,1,bu,!0)):[]}),da=Si(function(t,e){var n=ka(e);return bu(n)&&(n=o),bu(t)?Ur(t,Hr(e,1,bu,!0),Lo(n,2)):[]}),va=Si(function(t,e){var n=ka(e);return bu(n)&&(n=o),bu(t)?Ur(t,Hr(e,1,bu,!0),o,n):[]});function _a(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:zu(n);return i<0&&(i=qn(r+i,0)),un(t,Lo(e,3),i)}function ya(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==o&&(i=zu(n),i=n<0?qn(r+i,0):Yn(i,r-1)),un(t,Lo(e,3),i,!0)}function ga(t){return null!=t&&t.length?Hr(t,1):[]}function ma(t){return t&&t.length?t[0]:o}var ba=Si(function(t){var e=Ze(t,Hi);return e.length&&e[0]===t[0]?ri(e):[]}),wa=Si(function(t){var e=ka(t),n=Ze(t,Hi);return e===ka(n)?e=o:n.pop(),n.length&&n[0]===t[0]?ri(n,Lo(e,2)):[]}),xa=Si(function(t){var e=ka(t),n=Ze(t,Hi);return(e="function"==typeof e?e:o)&&n.pop(),n.length&&n[0]===t[0]?ri(n,o,e):[]});function ka(t){var e=null==t?0:t.length;return e?t[e-1]:o}var Sa=Si(Ea);function Ea(t,e){return t&&t.length&&e&&e.length?bi(t,e):t}var ja=Po(function(t,e){var n=null==t?0:t.length,r=Br(t,e);return wi(t,Ze(e,function(t){return Yo(t,n)?+t:t}).sort(to)),r});function Ca(t){return null==t?t:Qn.call(t)}var Aa=Si(function(t){return Ni(Hr(t,1,bu,!0))}),Oa=Si(function(t){var e=ka(t);return bu(e)&&(e=o),Ni(Hr(t,1,bu,!0),Lo(e,2))}),Ta=Si(function(t){var e=ka(t);return e="function"==typeof e?e:o,Ni(Hr(t,1,bu,!0),o,e)});function Pa(t){if(!t||!t.length)return[];var e=0;return t=Ke(t,function(t){if(bu(t))return e=qn(t.length,e),!0}),_n(e,function(e){return Ze(t,hn(e))})}function Ra(t,e){if(!t||!t.length)return[];var n=Pa(t);return null==e?n:Ze(n,function(t){return He(e,o,t)})}var Ia=Si(function(t,e){return bu(t)?Ur(t,e):[]}),Ba=Si(function(t){return Gi(Ke(t,bu))}),Ma=Si(function(t){var e=ka(t);return bu(e)&&(e=o),Gi(Ke(t,bu),Lo(e,2))}),Fa=Si(function(t){var e=ka(t);return e="function"==typeof e?e:o,Gi(Ke(t,bu),o,e)}),La=Si(Pa);var Na=Si(function(t){var e=t.length,n=e>1?t[e-1]:o;return Ra(t,n="function"==typeof n?(t.pop(),n):o)});function Ua(t){var e=dr(t);return e.__chain__=!0,e}function Da(t,e){return e(t)}var za=Po(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Br(e,t)};return!(e>1||this.__actions__.length)&&r instanceof gr&&Yo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Da,args:[i],thisArg:o}),new yr(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(o),t})):this.thru(i)});var Wa=oo(function(t,e,n){le.call(t,n)?++t[n]:Ir(t,n,1)});var Ga=ho(_a),Va=ho(ya);function Ha(t,e){return(yu(t)?Ye:Dr)(t,Lo(e,3))}function qa(t,e){return(yu(t)?$e:zr)(t,Lo(e,3))}var Ya=oo(function(t,e,n){le.call(t,n)?t[n].push(e):Ir(t,n,[e])});var $a=Si(function(t,e,n){var i=-1,o="function"==typeof e,a=mu(t)?r(t.length):[];return Dr(t,function(t){a[++i]=o?He(e,t,n):ii(t,e,n)}),a}),Ja=oo(function(t,e,n){Ir(t,n,e)});function Ka(t,e){return(yu(t)?Ze:pi)(t,Lo(e,3))}var Qa=oo(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Xa=Si(function(t,e){if(null==t)return[];var n=e.length;return n>1&&$o(t,e[0],e[1])?e=[]:n>2&&$o(e[0],e[1],e[2])&&(e=[e[0]]),gi(t,Hr(e,1),[])}),Za=Ln||function(){return Ie.Date.now()};function tu(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,jo(t,S,o,o,o,o,e)}function eu(t,e){var n;if("function"!=typeof e)throw new ie(s);return t=zu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var nu=Si(function(t,e,n){var r=y;if(n.length){var i=An(n,Fo(nu));r|=x}return jo(t,r,e,n,i)}),ru=Si(function(t,e,n){var r=y|g;if(n.length){var i=An(n,Fo(ru));r|=x}return jo(e,r,t,n,i)});function iu(t,e,n){var r,i,a,u,c,l,f=0,h=!1,p=!1,d=!0;if("function"!=typeof t)throw new ie(s);function v(e){var n=r,a=i;return r=i=o,f=e,u=t.apply(a,n)}function _(t){var n=t-l;return l===o||n>=e||n<0||p&&t-f>=a}function y(){var t=Za();if(_(t))return g(t);c=ia(y,function(t){var n=e-(t-l);return p?Yn(n,a-(t-f)):n}(t))}function g(t){return c=o,d&&r?v(t):(r=i=o,u)}function m(){var t=Za(),n=_(t);if(r=arguments,i=this,l=t,n){if(c===o)return function(t){return f=t,c=ia(y,e),h?v(t):u}(l);if(p)return c=ia(y,e),v(l)}return c===o&&(c=ia(y,e)),u}return e=Gu(e)||0,Cu(n)&&(h=!!n.leading,a=(p="maxWait"in n)?qn(Gu(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),m.cancel=function(){c!==o&&Ki(c),f=0,r=l=i=c=o},m.flush=function(){return c===o?u:g(Za())},m}var ou=Si(function(t,e){return Nr(t,1,e)}),au=Si(function(t,e,n){return Nr(t,Gu(e)||0,n)});function uu(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ie(s);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(uu.Cache||wr),n}function su(t){if("function"!=typeof t)throw new ie(s);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}uu.Cache=wr;var cu=$i(function(t,e){var n=(e=1==e.length&&yu(e[0])?Ze(e[0],yn(Lo())):Ze(Hr(e,1),yn(Lo()))).length;return Si(function(r){for(var i=-1,o=Yn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return He(t,this,r)})}),lu=Si(function(t,e){var n=An(e,Fo(lu));return jo(t,x,o,e,n)}),fu=Si(function(t,e){var n=An(e,Fo(fu));return jo(t,k,o,e,n)}),hu=Po(function(t,e){return jo(t,E,o,o,o,e)});function pu(t,e){return t===e||t!=t&&e!=e}var du=wo(ti),vu=wo(function(t,e){return t>=e}),_u=oi(function(){return arguments}())?oi:function(t){return Au(t)&&le.call(t,"callee")&&!Be.call(t,"callee")},yu=r.isArray,gu=Ue?yn(Ue):function(t){return Au(t)&&Zr(t)==st};function mu(t){return null!=t&&ju(t.length)&&!Su(t)}function bu(t){return Au(t)&&mu(t)}var wu=Wn||Gs,xu=De?yn(De):function(t){return Au(t)&&Zr(t)==H};function ku(t){if(!Au(t))return!1;var e=Zr(t);return e==Y||e==q||"string"==typeof t.message&&"string"==typeof t.name&&!Pu(t)}function Su(t){if(!Cu(t))return!1;var e=Zr(t);return e==$||e==J||e==G||e==tt}function Eu(t){return"number"==typeof t&&t==zu(t)}function ju(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=B}function Cu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Au(t){return null!=t&&"object"==typeof t}var Ou=ze?yn(ze):function(t){return Au(t)&&Go(t)==K};function Tu(t){return"number"==typeof t||Au(t)&&Zr(t)==Q}function Pu(t){if(!Au(t)||Zr(t)!=Z)return!1;var e=Pe(t);if(null===e)return!0;var n=le.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ce.call(n)==de}var Ru=We?yn(We):function(t){return Au(t)&&Zr(t)==et};var Iu=Ge?yn(Ge):function(t){return Au(t)&&Go(t)==nt};function Bu(t){return"string"==typeof t||!yu(t)&&Au(t)&&Zr(t)==rt}function Mu(t){return"symbol"==typeof t||Au(t)&&Zr(t)==it}var Fu=Ve?yn(Ve):function(t){return Au(t)&&ju(t.length)&&!!je[Zr(t)]};var Lu=wo(hi),Nu=wo(function(t,e){return t<=e});function Uu(t){if(!t)return[];if(mu(t))return Bu(t)?In(t):ro(t);if(Ne&&t[Ne])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Ne]());var e=Go(t);return(e==K?jn:e==nt?Tn:ps)(t)}function Du(t){return t?(t=Gu(t))===I||t===-I?(t<0?-1:1)*M:t==t?t:0:0===t?t:0}function zu(t){var e=Du(t),n=e%1;return e==e?n?e-n:e:0}function Wu(t){return t?Mr(zu(t),0,L):0}function Gu(t){if("number"==typeof t)return t;if(Mu(t))return F;if(Cu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Cu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Bt,"");var n=Ht.test(t);return n||Yt.test(t)?Te(t.slice(2),n?2:8):Vt.test(t)?F:+t}function Vu(t){return io(t,os(t))}function Hu(t){return null==t?"":Li(t)}var qu=ao(function(t,e){if(Xo(e)||mu(e))io(e,is(e),t);else for(var n in e)le.call(e,n)&&Or(t,n,e[n])}),Yu=ao(function(t,e){io(e,os(e),t)}),$u=ao(function(t,e,n,r){io(e,os(e),t,r)}),Ju=ao(function(t,e,n,r){io(e,is(e),t,r)}),Ku=Po(Br);var Qu=Si(function(t,e){t=ee(t);var n=-1,r=e.length,i=r>2?e[2]:o;for(i&&$o(e[0],e[1],i)&&(r=1);++n<r;)for(var a=e[n],u=os(a),s=-1,c=u.length;++s<c;){var l=u[s],f=t[l];(f===o||pu(f,ue[l])&&!le.call(t,l))&&(t[l]=a[l])}return t}),Xu=Si(function(t){return t.push(o,Ao),He(us,o,t)});function Zu(t,e,n){var r=null==t?o:Qr(t,e);return r===o?n:r}function ts(t,e){return null!=t&&Vo(t,e,ni)}var es=_o(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=pe.call(e)),t[e]=n},Cs(Ts)),ns=_o(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=pe.call(e)),le.call(t,e)?t[e].push(n):t[e]=[n]},Lo),rs=Si(ii);function is(t){return mu(t)?Sr(t):li(t)}function os(t){return mu(t)?Sr(t,!0):fi(t)}var as=ao(function(t,e,n){_i(t,e,n)}),us=ao(function(t,e,n,r){_i(t,e,n,r)}),ss=Po(function(t,e){var n={};if(null==t)return n;var r=!1;e=Ze(e,function(e){return e=Yi(e,t),r||(r=e.length>1),e}),io(t,Io(t),n),r&&(n=Fr(n,h|p|d,Oo));for(var i=e.length;i--;)Ui(n,e[i]);return n});var cs=Po(function(t,e){return null==t?{}:function(t,e){return mi(t,e,function(e,n){return ts(t,n)})}(t,e)});function ls(t,e){if(null==t)return{};var n=Ze(Io(t),function(t){return[t]});return e=Lo(e),mi(t,n,function(t,n){return e(t,n[0])})}var fs=Eo(is),hs=Eo(os);function ps(t){return null==t?[]:gn(t,is(t))}var ds=lo(function(t,e,n){return e=e.toLowerCase(),t+(n?vs(e):e)});function vs(t){return ks(Hu(t).toLowerCase())}function _s(t){return(t=Hu(t))&&t.replace(Jt,xn).replace(me,"")}var ys=lo(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),gs=lo(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),ms=co("toLowerCase");var bs=lo(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var ws=lo(function(t,e,n){return t+(n?" ":"")+ks(e)});var xs=lo(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),ks=co("toUpperCase");function Ss(t,e,n){return t=Hu(t),(e=n?o:e)===o?function(t){return ke.test(t)}(t)?function(t){return t.match(we)||[]}(t):function(t){return t.match(Dt)||[]}(t):t.match(e)||[]}var Es=Si(function(t,e){try{return He(t,o,e)}catch(t){return ku(t)?t:new Xt(t)}}),js=Po(function(t,e){return Ye(e,function(e){e=la(e),Ir(t,e,nu(t[e],t))}),t});function Cs(t){return function(){return t}}var As=po(),Os=po(!0);function Ts(t){return t}function Ps(t){return ci("function"==typeof t?t:Fr(t,h))}var Rs=Si(function(t,e){return function(n){return ii(n,t,e)}}),Is=Si(function(t,e){return function(n){return ii(t,n,e)}});function Bs(t,e,n){var r=is(e),i=Kr(e,r);null!=n||Cu(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Kr(e,is(e)));var o=!(Cu(n)&&"chain"in n&&!n.chain),a=Su(t);return Ye(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=ro(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,tn([this.value()],arguments))})}),t}function Ms(){}var Fs=go(Ze),Ls=go(Je),Ns=go(rn);function Us(t){return Jo(t)?hn(la(t)):function(t){return function(e){return Qr(e,t)}}(t)}var Ds=bo(),zs=bo(!0);function Ws(){return[]}function Gs(){return!1}var Vs=yo(function(t,e){return t+e},0),Hs=ko("ceil"),qs=yo(function(t,e){return t/e},1),Ys=ko("floor");var $s,Js=yo(function(t,e){return t*e},1),Ks=ko("round"),Qs=yo(function(t,e){return t-e},0);return dr.after=function(t,e){if("function"!=typeof e)throw new ie(s);return t=zu(t),function(){if(--t<1)return e.apply(this,arguments)}},dr.ary=tu,dr.assign=qu,dr.assignIn=Yu,dr.assignInWith=$u,dr.assignWith=Ju,dr.at=Ku,dr.before=eu,dr.bind=nu,dr.bindAll=js,dr.bindKey=ru,dr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return yu(t)?t:[t]},dr.chain=Ua,dr.chunk=function(t,e,n){e=(n?$o(t,e,n):e===o)?1:qn(zu(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,u=0,s=r(Un(i/e));a<i;)s[u++]=Pi(t,a,a+=e);return s},dr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},dr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return tn(yu(n)?ro(n):[n],Hr(e,1))},dr.cond=function(t){var e=null==t?0:t.length,n=Lo();return t=e?Ze(t,function(t){if("function"!=typeof t[1])throw new ie(s);return[n(t[0]),t[1]]}):[],Si(function(n){for(var r=-1;++r<e;){var i=t[r];if(He(i[0],this,n))return He(i[1],this,n)}})},dr.conforms=function(t){return function(t){var e=is(t);return function(n){return Lr(n,t,e)}}(Fr(t,h))},dr.constant=Cs,dr.countBy=Wa,dr.create=function(t,e){var n=vr(t);return null==e?n:Rr(n,e)},dr.curry=function t(e,n,r){var i=jo(e,b,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},dr.curryRight=function t(e,n,r){var i=jo(e,w,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},dr.debounce=iu,dr.defaults=Qu,dr.defaultsDeep=Xu,dr.defer=ou,dr.delay=au,dr.difference=pa,dr.differenceBy=da,dr.differenceWith=va,dr.drop=function(t,e,n){var r=null==t?0:t.length;return r?Pi(t,(e=n||e===o?1:zu(e))<0?0:e,r):[]},dr.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Pi(t,0,(e=r-(e=n||e===o?1:zu(e)))<0?0:e):[]},dr.dropRightWhile=function(t,e){return t&&t.length?zi(t,Lo(e,3),!0,!0):[]},dr.dropWhile=function(t,e){return t&&t.length?zi(t,Lo(e,3),!0):[]},dr.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&$o(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=zu(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:zu(r))<0&&(r+=i),r=n>r?0:Wu(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},dr.filter=function(t,e){return(yu(t)?Ke:Vr)(t,Lo(e,3))},dr.flatMap=function(t,e){return Hr(Ka(t,e),1)},dr.flatMapDeep=function(t,e){return Hr(Ka(t,e),I)},dr.flatMapDepth=function(t,e,n){return n=n===o?1:zu(n),Hr(Ka(t,e),n)},dr.flatten=ga,dr.flattenDeep=function(t){return null!=t&&t.length?Hr(t,I):[]},dr.flattenDepth=function(t,e){return null!=t&&t.length?Hr(t,e=e===o?1:zu(e)):[]},dr.flip=function(t){return jo(t,j)},dr.flow=As,dr.flowRight=Os,dr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},dr.functions=function(t){return null==t?[]:Kr(t,is(t))},dr.functionsIn=function(t){return null==t?[]:Kr(t,os(t))},dr.groupBy=Ya,dr.initial=function(t){return null!=t&&t.length?Pi(t,0,-1):[]},dr.intersection=ba,dr.intersectionBy=wa,dr.intersectionWith=xa,dr.invert=es,dr.invertBy=ns,dr.invokeMap=$a,dr.iteratee=Ps,dr.keyBy=Ja,dr.keys=is,dr.keysIn=os,dr.map=Ka,dr.mapKeys=function(t,e){var n={};return e=Lo(e,3),$r(t,function(t,r,i){Ir(n,e(t,r,i),t)}),n},dr.mapValues=function(t,e){var n={};return e=Lo(e,3),$r(t,function(t,r,i){Ir(n,r,e(t,r,i))}),n},dr.matches=function(t){return di(Fr(t,h))},dr.matchesProperty=function(t,e){return vi(t,Fr(e,h))},dr.memoize=uu,dr.merge=as,dr.mergeWith=us,dr.method=Rs,dr.methodOf=Is,dr.mixin=Bs,dr.negate=su,dr.nthArg=function(t){return t=zu(t),Si(function(e){return yi(e,t)})},dr.omit=ss,dr.omitBy=function(t,e){return ls(t,su(Lo(e)))},dr.once=function(t){return eu(2,t)},dr.orderBy=function(t,e,n,r){return null==t?[]:(yu(e)||(e=null==e?[]:[e]),yu(n=r?o:n)||(n=null==n?[]:[n]),gi(t,e,n))},dr.over=Fs,dr.overArgs=cu,dr.overEvery=Ls,dr.overSome=Ns,dr.partial=lu,dr.partialRight=fu,dr.partition=Qa,dr.pick=cs,dr.pickBy=ls,dr.property=Us,dr.propertyOf=function(t){return function(e){return null==t?o:Qr(t,e)}},dr.pull=Sa,dr.pullAll=Ea,dr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?bi(t,e,Lo(n,2)):t},dr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?bi(t,e,o,n):t},dr.pullAt=ja,dr.range=Ds,dr.rangeRight=zs,dr.rearg=hu,dr.reject=function(t,e){return(yu(t)?Ke:Vr)(t,su(Lo(e,3)))},dr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Lo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return wi(t,i),n},dr.rest=function(t,e){if("function"!=typeof t)throw new ie(s);return Si(t,e=e===o?e:zu(e))},dr.reverse=Ca,dr.sampleSize=function(t,e,n){return e=(n?$o(t,e,n):e===o)?1:zu(e),(yu(t)?jr:ji)(t,e)},dr.set=function(t,e,n){return null==t?t:Ci(t,e,n)},dr.setWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:Ci(t,e,n,r)},dr.shuffle=function(t){return(yu(t)?Cr:Ti)(t)},dr.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&$o(t,e,n)?(e=0,n=r):(e=null==e?0:zu(e),n=n===o?r:zu(n)),Pi(t,e,n)):[]},dr.sortBy=Xa,dr.sortedUniq=function(t){return t&&t.length?Mi(t):[]},dr.sortedUniqBy=function(t,e){return t&&t.length?Mi(t,Lo(e,2)):[]},dr.split=function(t,e,n){return n&&"number"!=typeof n&&$o(t,e,n)&&(e=n=o),(n=n===o?L:n>>>0)?(t=Hu(t))&&("string"==typeof e||null!=e&&!Ru(e))&&!(e=Li(e))&&En(t)?Ji(In(t),0,n):t.split(e,n):[]},dr.spread=function(t,e){if("function"!=typeof t)throw new ie(s);return e=null==e?0:qn(zu(e),0),Si(function(n){var r=n[e],i=Ji(n,0,e);return r&&tn(i,r),He(t,this,i)})},dr.tail=function(t){var e=null==t?0:t.length;return e?Pi(t,1,e):[]},dr.take=function(t,e,n){return t&&t.length?Pi(t,0,(e=n||e===o?1:zu(e))<0?0:e):[]},dr.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Pi(t,(e=r-(e=n||e===o?1:zu(e)))<0?0:e,r):[]},dr.takeRightWhile=function(t,e){return t&&t.length?zi(t,Lo(e,3),!1,!0):[]},dr.takeWhile=function(t,e){return t&&t.length?zi(t,Lo(e,3)):[]},dr.tap=function(t,e){return e(t),t},dr.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new ie(s);return Cu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),iu(t,e,{leading:r,maxWait:e,trailing:i})},dr.thru=Da,dr.toArray=Uu,dr.toPairs=fs,dr.toPairsIn=hs,dr.toPath=function(t){return yu(t)?Ze(t,la):Mu(t)?[t]:ro(ca(Hu(t)))},dr.toPlainObject=Vu,dr.transform=function(t,e,n){var r=yu(t),i=r||wu(t)||Fu(t);if(e=Lo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Cu(t)&&Su(o)?vr(Pe(t)):{}}return(i?Ye:$r)(t,function(t,r,i){return e(n,t,r,i)}),n},dr.unary=function(t){return tu(t,1)},dr.union=Aa,dr.unionBy=Oa,dr.unionWith=Ta,dr.uniq=function(t){return t&&t.length?Ni(t):[]},dr.uniqBy=function(t,e){return t&&t.length?Ni(t,Lo(e,2)):[]},dr.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?Ni(t,o,e):[]},dr.unset=function(t,e){return null==t||Ui(t,e)},dr.unzip=Pa,dr.unzipWith=Ra,dr.update=function(t,e,n){return null==t?t:Di(t,e,qi(n))},dr.updateWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:Di(t,e,qi(n),r)},dr.values=ps,dr.valuesIn=function(t){return null==t?[]:gn(t,os(t))},dr.without=Ia,dr.words=Ss,dr.wrap=function(t,e){return lu(qi(e),t)},dr.xor=Ba,dr.xorBy=Ma,dr.xorWith=Fa,dr.zip=La,dr.zipObject=function(t,e){return Vi(t||[],e||[],Or)},dr.zipObjectDeep=function(t,e){return Vi(t||[],e||[],Ci)},dr.zipWith=Na,dr.entries=fs,dr.entriesIn=hs,dr.extend=Yu,dr.extendWith=$u,Bs(dr,dr),dr.add=Vs,dr.attempt=Es,dr.camelCase=ds,dr.capitalize=vs,dr.ceil=Hs,dr.clamp=function(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=(n=Gu(n))==n?n:0),e!==o&&(e=(e=Gu(e))==e?e:0),Mr(Gu(t),e,n)},dr.clone=function(t){return Fr(t,d)},dr.cloneDeep=function(t){return Fr(t,h|d)},dr.cloneDeepWith=function(t,e){return Fr(t,h|d,e="function"==typeof e?e:o)},dr.cloneWith=function(t,e){return Fr(t,d,e="function"==typeof e?e:o)},dr.conformsTo=function(t,e){return null==e||Lr(t,e,is(e))},dr.deburr=_s,dr.defaultTo=function(t,e){return null==t||t!=t?e:t},dr.divide=qs,dr.endsWith=function(t,e,n){t=Hu(t),e=Li(e);var r=t.length,i=n=n===o?r:Mr(zu(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},dr.eq=pu,dr.escape=function(t){return(t=Hu(t))&&Et.test(t)?t.replace(kt,kn):t},dr.escapeRegExp=function(t){return(t=Hu(t))&&It.test(t)?t.replace(Rt,"\\$&"):t},dr.every=function(t,e,n){var r=yu(t)?Je:Wr;return n&&$o(t,e,n)&&(e=o),r(t,Lo(e,3))},dr.find=Ga,dr.findIndex=_a,dr.findKey=function(t,e){return an(t,Lo(e,3),$r)},dr.findLast=Va,dr.findLastIndex=ya,dr.findLastKey=function(t,e){return an(t,Lo(e,3),Jr)},dr.floor=Ys,dr.forEach=Ha,dr.forEachRight=qa,dr.forIn=function(t,e){return null==t?t:qr(t,Lo(e,3),os)},dr.forInRight=function(t,e){return null==t?t:Yr(t,Lo(e,3),os)},dr.forOwn=function(t,e){return t&&$r(t,Lo(e,3))},dr.forOwnRight=function(t,e){return t&&Jr(t,Lo(e,3))},dr.get=Zu,dr.gt=du,dr.gte=vu,dr.has=function(t,e){return null!=t&&Vo(t,e,ei)},dr.hasIn=ts,dr.head=ma,dr.identity=Ts,dr.includes=function(t,e,n,r){t=mu(t)?t:ps(t),n=n&&!r?zu(n):0;var i=t.length;return n<0&&(n=qn(i+n,0)),Bu(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&sn(t,e,n)>-1},dr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:zu(n);return i<0&&(i=qn(r+i,0)),sn(t,e,i)},dr.inRange=function(t,e,n){return e=Du(e),n===o?(n=e,e=0):n=Du(n),function(t,e,n){return t>=Yn(e,n)&&t<qn(e,n)}(t=Gu(t),e,n)},dr.invoke=rs,dr.isArguments=_u,dr.isArray=yu,dr.isArrayBuffer=gu,dr.isArrayLike=mu,dr.isArrayLikeObject=bu,dr.isBoolean=function(t){return!0===t||!1===t||Au(t)&&Zr(t)==V},dr.isBuffer=wu,dr.isDate=xu,dr.isElement=function(t){return Au(t)&&1===t.nodeType&&!Pu(t)},dr.isEmpty=function(t){if(null==t)return!0;if(mu(t)&&(yu(t)||"string"==typeof t||"function"==typeof t.splice||wu(t)||Fu(t)||_u(t)))return!t.length;var e=Go(t);if(e==K||e==nt)return!t.size;if(Xo(t))return!li(t).length;for(var n in t)if(le.call(t,n))return!1;return!0},dr.isEqual=function(t,e){return ai(t,e)},dr.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:o)?n(t,e):o;return r===o?ai(t,e,o,n):!!r},dr.isError=ku,dr.isFinite=function(t){return"number"==typeof t&&Gn(t)},dr.isFunction=Su,dr.isInteger=Eu,dr.isLength=ju,dr.isMap=Ou,dr.isMatch=function(t,e){return t===e||ui(t,e,Uo(e))},dr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:o,ui(t,e,Uo(e),n)},dr.isNaN=function(t){return Tu(t)&&t!=+t},dr.isNative=function(t){if(Qo(t))throw new Xt(u);return si(t)},dr.isNil=function(t){return null==t},dr.isNull=function(t){return null===t},dr.isNumber=Tu,dr.isObject=Cu,dr.isObjectLike=Au,dr.isPlainObject=Pu,dr.isRegExp=Ru,dr.isSafeInteger=function(t){return Eu(t)&&t>=-B&&t<=B},dr.isSet=Iu,dr.isString=Bu,dr.isSymbol=Mu,dr.isTypedArray=Fu,dr.isUndefined=function(t){return t===o},dr.isWeakMap=function(t){return Au(t)&&Go(t)==at},dr.isWeakSet=function(t){return Au(t)&&Zr(t)==ut},dr.join=function(t,e){return null==t?"":Vn.call(t,e)},dr.kebabCase=ys,dr.last=ka,dr.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=zu(n))<0?qn(r+i,0):Yn(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):un(t,ln,i,!0)},dr.lowerCase=gs,dr.lowerFirst=ms,dr.lt=Lu,dr.lte=Nu,dr.max=function(t){return t&&t.length?Gr(t,Ts,ti):o},dr.maxBy=function(t,e){return t&&t.length?Gr(t,Lo(e,2),ti):o},dr.mean=function(t){return fn(t,Ts)},dr.meanBy=function(t,e){return fn(t,Lo(e,2))},dr.min=function(t){return t&&t.length?Gr(t,Ts,hi):o},dr.minBy=function(t,e){return t&&t.length?Gr(t,Lo(e,2),hi):o},dr.stubArray=Ws,dr.stubFalse=Gs,dr.stubObject=function(){return{}},dr.stubString=function(){return""},dr.stubTrue=function(){return!0},dr.multiply=Js,dr.nth=function(t,e){return t&&t.length?yi(t,zu(e)):o},dr.noConflict=function(){return Ie._===this&&(Ie._=ve),this},dr.noop=Ms,dr.now=Za,dr.pad=function(t,e,n){t=Hu(t);var r=(e=zu(e))?Rn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return mo(Dn(i),n)+t+mo(Un(i),n)},dr.padEnd=function(t,e,n){t=Hu(t);var r=(e=zu(e))?Rn(t):0;return e&&r<e?t+mo(e-r,n):t},dr.padStart=function(t,e,n){t=Hu(t);var r=(e=zu(e))?Rn(t):0;return e&&r<e?mo(e-r,n)+t:t},dr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Jn(Hu(t).replace(Mt,""),e||0)},dr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&$o(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=Du(t),e===o?(e=t,t=0):e=Du(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Kn();return Yn(t+i*(e-t+Oe("1e-"+((i+"").length-1))),e)}return xi(t,e)},dr.reduce=function(t,e,n){var r=yu(t)?en:dn,i=arguments.length<3;return r(t,Lo(e,4),n,i,Dr)},dr.reduceRight=function(t,e,n){var r=yu(t)?nn:dn,i=arguments.length<3;return r(t,Lo(e,4),n,i,zr)},dr.repeat=function(t,e,n){return e=(n?$o(t,e,n):e===o)?1:zu(e),ki(Hu(t),e)},dr.replace=function(){var t=arguments,e=Hu(t[0]);return t.length<3?e:e.replace(t[1],t[2])},dr.result=function(t,e,n){var r=-1,i=(e=Yi(e,t)).length;for(i||(i=1,t=o);++r<i;){var a=null==t?o:t[la(e[r])];a===o&&(r=i,a=n),t=Su(a)?a.call(t):a}return t},dr.round=Ks,dr.runInContext=t,dr.sample=function(t){return(yu(t)?Er:Ei)(t)},dr.size=function(t){if(null==t)return 0;if(mu(t))return Bu(t)?Rn(t):t.length;var e=Go(t);return e==K||e==nt?t.size:li(t).length},dr.snakeCase=bs,dr.some=function(t,e,n){var r=yu(t)?rn:Ri;return n&&$o(t,e,n)&&(e=o),r(t,Lo(e,3))},dr.sortedIndex=function(t,e){return Ii(t,e)},dr.sortedIndexBy=function(t,e,n){return Bi(t,e,Lo(n,2))},dr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Ii(t,e);if(r<n&&pu(t[r],e))return r}return-1},dr.sortedLastIndex=function(t,e){return Ii(t,e,!0)},dr.sortedLastIndexBy=function(t,e,n){return Bi(t,e,Lo(n,2),!0)},dr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Ii(t,e,!0)-1;if(pu(t[n],e))return n}return-1},dr.startCase=ws,dr.startsWith=function(t,e,n){return t=Hu(t),n=null==n?0:Mr(zu(n),0,t.length),e=Li(e),t.slice(n,n+e.length)==e},dr.subtract=Qs,dr.sum=function(t){return t&&t.length?vn(t,Ts):0},dr.sumBy=function(t,e){return t&&t.length?vn(t,Lo(e,2)):0},dr.template=function(t,e,n){var r=dr.templateSettings;n&&$o(t,e,n)&&(e=o),t=Hu(t),e=$u({},e,r,Co);var i,a,u=$u({},e.imports,r.imports,Co),s=is(u),c=gn(u,s),l=0,f=e.interpolate||Kt,h="__p += '",p=ne((e.escape||Kt).source+"|"+f.source+"|"+(f===At?Wt:Kt).source+"|"+(e.evaluate||Kt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Ee+"]")+"\n";t.replace(p,function(e,n,r,o,u,s){return r||(r=o),h+=t.slice(l,s).replace(Qt,Sn),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),u&&(a=!0,h+="';\n"+u+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+e.length,e}),h+="';\n";var v=e.variable;v||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(mt,""):h).replace(bt,"$1").replace(wt,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var _=Es(function(){return Zt(s,d+"return "+h).apply(o,c)});if(_.source=h,ku(_))throw _;return _},dr.times=function(t,e){if((t=zu(t))<1||t>B)return[];var n=L,r=Yn(t,L);e=Lo(e),t-=L;for(var i=_n(r,e);++n<t;)e(n);return i},dr.toFinite=Du,dr.toInteger=zu,dr.toLength=Wu,dr.toLower=function(t){return Hu(t).toLowerCase()},dr.toNumber=Gu,dr.toSafeInteger=function(t){return t?Mr(zu(t),-B,B):0===t?t:0},dr.toString=Hu,dr.toUpper=function(t){return Hu(t).toUpperCase()},dr.trim=function(t,e,n){if((t=Hu(t))&&(n||e===o))return t.replace(Bt,"");if(!t||!(e=Li(e)))return t;var r=In(t),i=In(e);return Ji(r,bn(r,i),wn(r,i)+1).join("")},dr.trimEnd=function(t,e,n){if((t=Hu(t))&&(n||e===o))return t.replace(Ft,"");if(!t||!(e=Li(e)))return t;var r=In(t);return Ji(r,0,wn(r,In(e))+1).join("")},dr.trimStart=function(t,e,n){if((t=Hu(t))&&(n||e===o))return t.replace(Mt,"");if(!t||!(e=Li(e)))return t;var r=In(t);return Ji(r,bn(r,In(e))).join("")},dr.truncate=function(t,e){var n=C,r=A;if(Cu(e)){var i="separator"in e?e.separator:i;n="length"in e?zu(e.length):n,r="omission"in e?Li(e.omission):r}var a=(t=Hu(t)).length;if(En(t)){var u=In(t);a=u.length}if(n>=a)return t;var s=n-Rn(r);if(s<1)return r;var c=u?Ji(u,0,s).join(""):t.slice(0,s);if(i===o)return c+r;if(u&&(s+=c.length-s),Ru(i)){if(t.slice(s).search(i)){var l,f=c;for(i.global||(i=ne(i.source,Hu(Gt.exec(i))+"g")),i.lastIndex=0;l=i.exec(f);)var h=l.index;c=c.slice(0,h===o?s:h)}}else if(t.indexOf(Li(i),s)!=s){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+r},dr.unescape=function(t){return(t=Hu(t))&&St.test(t)?t.replace(xt,Bn):t},dr.uniqueId=function(t){var e=++fe;return Hu(t)+e},dr.upperCase=xs,dr.upperFirst=ks,dr.each=Ha,dr.eachRight=qa,dr.first=ma,Bs(dr,($s={},$r(dr,function(t,e){le.call(dr.prototype,e)||($s[e]=t)}),$s),{chain:!1}),dr.VERSION="4.17.10",Ye(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){dr[t].placeholder=dr}),Ye(["drop","take"],function(t,e){gr.prototype[t]=function(n){n=n===o?1:qn(zu(n),0);var r=this.__filtered__&&!e?new gr(this):this.clone();return r.__filtered__?r.__takeCount__=Yn(n,r.__takeCount__):r.__views__.push({size:Yn(n,L),type:t+(r.__dir__<0?"Right":"")}),r},gr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Ye(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==P||3==n;gr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Lo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),Ye(["head","last"],function(t,e){var n="take"+(e?"Right":"");gr.prototype[t]=function(){return this[n](1).value()[0]}}),Ye(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");gr.prototype[t]=function(){return this.__filtered__?new gr(this):this[n](1)}}),gr.prototype.compact=function(){return this.filter(Ts)},gr.prototype.find=function(t){return this.filter(t).head()},gr.prototype.findLast=function(t){return this.reverse().find(t)},gr.prototype.invokeMap=Si(function(t,e){return"function"==typeof t?new gr(this):this.map(function(n){return ii(n,t,e)})}),gr.prototype.reject=function(t){return this.filter(su(Lo(t)))},gr.prototype.slice=function(t,e){t=zu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new gr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(n=(e=zu(e))<0?n.dropRight(-e):n.take(e-t)),n)},gr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},gr.prototype.toArray=function(){return this.take(L)},$r(gr.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=dr[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);i&&(dr.prototype[e]=function(){var e=this.__wrapped__,u=r?[1]:arguments,s=e instanceof gr,c=u[0],l=s||yu(e),f=function(t){var e=i.apply(dr,tn([t],u));return r&&h?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(s=l=!1);var h=this.__chain__,p=!!this.__actions__.length,d=a&&!h,v=s&&!p;if(!a&&l){e=v?e:new gr(this);var _=t.apply(e,u);return _.__actions__.push({func:Da,args:[f],thisArg:o}),new yr(_,h)}return d&&v?t.apply(this,u):(_=this.thru(f),d?r?_.value()[0]:_.value():_)})}),Ye(["pop","push","shift","sort","splice","unshift"],function(t){var e=oe[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);dr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(yu(i)?i:[],t)}return this[n](function(n){return e.apply(yu(n)?n:[],t)})}}),$r(gr.prototype,function(t,e){var n=dr[e];if(n){var r=n.name+"";(or[r]||(or[r]=[])).push({name:e,func:n})}}),or[vo(o,g).name]=[{name:"wrapper",func:o}],gr.prototype.clone=function(){var t=new gr(this.__wrapped__);return t.__actions__=ro(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ro(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ro(this.__views__),t},gr.prototype.reverse=function(){if(this.__filtered__){var t=new gr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},gr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=yu(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Yn(e,t+a);break;case"takeRight":t=qn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,u=o.end,s=u-a,c=r?u:a-1,l=this.__iteratees__,f=l.length,h=0,p=Yn(s,this.__takeCount__);if(!n||!r&&i==s&&p==s)return Wi(t,this.__actions__);var d=[];t:for(;s--&&h<p;){for(var v=-1,_=t[c+=e];++v<f;){var y=l[v],g=y.iteratee,m=y.type,b=g(_);if(m==R)_=b;else if(!b){if(m==P)continue t;break t}}d[h++]=_}return d},dr.prototype.at=za,dr.prototype.chain=function(){return Ua(this)},dr.prototype.commit=function(){return new yr(this.value(),this.__chain__)},dr.prototype.next=function(){this.__values__===o&&(this.__values__=Uu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},dr.prototype.plant=function(t){for(var e,n=this;n instanceof _r;){var r=ha(n);r.__index__=0,r.__values__=o,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},dr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof gr){var e=t;return this.__actions__.length&&(e=new gr(this)),(e=e.reverse()).__actions__.push({func:Da,args:[Ca],thisArg:o}),new yr(e,this.__chain__)}return this.thru(Ca)},dr.prototype.toJSON=dr.prototype.valueOf=dr.prototype.value=function(){return Wi(this.__wrapped__,this.__actions__)},dr.prototype.first=dr.prototype.head,Ne&&(dr.prototype[Ne]=function(){return this}),dr}();Ie._=Mn,(i=function(){return Mn}.call(e,n,e,r))===o||(r.exports=i)}).call(this)}).call(this,n(35),n(58)(t))},182:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(154),i=n(343),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e}return o(t,[{key:"read",value:function(t){return Object(r.a)(this._url).as("arraybuffer",t)}},{key:"resolveUrl",value:function(){return Promise.resolve(this._url)}},{key:"name",get:function(){return Object(i.basename)(this._url)}}]),t}();e.b=a},183:function(t,e,n){"use strict";var r=n(276),i=n(344);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=m,e.resolve=function(t,e){return m(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?m(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=m(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var a=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),f=["%","/","?",";","#"].concat(l),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=n(4);function m(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),u=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(u);c[0]=c[0].replace(/\\/g,"/");var m=t=c.join(u);if(m=m.trim(),!n&&1===t.split("#").length){var b=s.exec(m);if(b)return this.path=m,this.href=m,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?g.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=a.exec(m);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,m=m.substr(w.length)}if(n||w||m.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===m.substr(0,2);!k||w&&_[w]||(m=m.substr(2),this.slashes=!0)}if(!_[w]&&(k||w&&!y[w])){for(var S,E,j=-1,C=0;C<h.length;C++){-1!==(A=m.indexOf(h[C]))&&(-1===j||A<j)&&(j=A)}-1!==(E=-1===j?m.lastIndexOf("@"):m.lastIndexOf("@",j))&&(S=m.slice(0,E),m=m.slice(E+1),this.auth=decodeURIComponent(S)),j=-1;for(C=0;C<f.length;C++){var A;-1!==(A=m.indexOf(f[C]))&&(-1===j||A<j)&&(j=A)}-1===j&&(j=m.length),this.host=m.slice(0,j),m=m.slice(j),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var T=this.hostname.split(/\./),P=(C=0,T.length);C<P;C++){var R=T[C];if(R&&!R.match(p)){for(var I="",B=0,M=R.length;B<M;B++)R.charCodeAt(B)>127?I+="x":I+=R[B];if(!I.match(p)){var F=T.slice(0,C),L=T.slice(C+1),N=R.match(d);N&&(F.push(N[1]),L.unshift(N[2])),L.length&&(m="/"+L.join(".")+m),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=r.toASCII(this.hostname));var U=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+U,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==m[0]&&(m="/"+m))}if(!v[x])for(C=0,P=l.length;C<P;C++){var z=l[C];if(-1!==m.indexOf(z)){var W=encodeURIComponent(z);W===z&&(W=escape(z)),m=m.split(z).join(W)}}var G=m.indexOf("#");-1!==G&&(this.hash=m.substr(G),m=m.slice(0,G));var V=m.indexOf("?");if(-1!==V?(this.search=m.substr(V),this.query=m.substr(V+1),e&&(this.query=g.parse(this.query)),m=m.slice(0,V)):e&&(this.search="",this.query={}),m&&(this.pathname=m),y[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var H=this.search||"";this.path=U+H}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=g.stringify(this.query));var u=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),u&&"?"!==u.charAt(0)&&(u="?"+u),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(u=u.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(m(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var u=r[a];n[u]=this[u]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),c=0;c<s.length;c++){var l=s[c];"protocol"!==l&&(n[l]=t[l])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!y[t.protocol]){for(var f=Object.keys(t),h=0;h<f.length;h++){var p=f[h];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||_[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var v=n.pathname||"",g=n.search||"";n.path=v+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||m||n.host&&t.pathname,x=w,k=n.pathname&&n.pathname.split("/")||[],S=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===k[0]?k[0]=n.host:k.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),w=w&&(""===d[0]||""===k[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,k=d;else if(d.length)k||(k=[]),k.pop(),k=k.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(S)n.hostname=n.host=k.shift(),(O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift());return n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!k.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=k.slice(-1)[0],j=(n.host||t.host||k.length>1)&&("."===E||".."===E)||""===E,C=0,A=k.length;A>=0;A--)"."===(E=k[A])?k.splice(A,1):".."===E?(k.splice(A,1),C++):C&&(k.splice(A,1),C--);if(!w&&!x)for(;C--;C)k.unshift("..");!w||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),j&&"/"!==k.join("/").substr(-1)&&k.push("");var O,T=""===k[0]||k[0]&&"/"===k[0].charAt(0);S&&(n.hostname=n.host=T?"":k.length?k.shift():"",(O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift()));return(w=w||n.host&&k.length)&&!T&&k.unshift(""),k.length?n.pathname=k.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=u.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},1839:function(t,e,n){"use strict";n.r(e);var r=n(608),i=n(28),o=n.n(i),a=n(223),u=n(182),s=n(165),c=n(78),l=n.n(c),f=n(2),h=n(183),p=n(146),d=n(725),v=n(1124),_=(n(1514),n(30)),y=n.n(_),g=n(328),m=n(48),b=n.n(m),w=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function S(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var E=function(t){function e(t){x(this,e);var n=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.handleDrop=function(t){t.preventDefault();var e=t.nativeEvent,r=new g.a(e);r.fileList.then(function(t){return t.filter(function(t){return/\.(bms|bme|bml)$/i.test(t)})}).map(function(t){return r.file(t).then(function(e){return{name:t,resource:e}})}).then(function(t){n.setState({files:t,resources:r})}).catch(function(e){throw"FileError"===e.constructor.name?new Error("File Error code "+t.code):e}).done()},n.handleItemClick=function(t){return function(){n.props.onSelect(n.state.resources,t.resource)}},n.handleClear=function(){n.props.onSelect(null,null)},n.state={files:[]},n}return S(e,o.a.Component),w(e,[{key:"render",value:function(){var t=this,e=this.state.files;return o.a.createElement("div",{className:"drop-zone"},e.length?o.a.createElement("ul",null,e.map(function(e){return o.a.createElement("li",null,o.a.createElement("a",{href:"javascript://",onClick:t.handleItemClick,className:b()({"is-active":e.resource===t.props.selectedResource})},e.name))}),this.props.selectedResource?o.a.createElement("li",null,o.a.createElement("a",{href:"javascript://",onClick:this.handleClear},"Clear")):null):o.a.createElement("div",{className:"drop-zone-hint"},"Drop BMS folder here",o.a.createElement("br",null),"(only works on Google Chrome)"))}}]),e}();E.propTypes={selectedResource:y.a.any,onSelect:y.a.func};var j=function(t){function e(t){x(this,e);var n=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.submit=function(t){t.preventDefault(),n.props.play(n.state.options)},n.bindOption=function(t){return function(e){t(n.state.options,e.target.value),n.forceUpdate()}},n.handleDragOver=function(t){t.preventDefault()},n.handleDrop=function(t){t.preventDefault(),n.refs.dropzone.handleDrop(t)},n.handleSelectFile=function(t,e){n.setState({options:Object.assign(n.state.options,{resources:t,resource:e})}),n.forceUpdate()},n.state={options:n.props.options},n}return S(e,o.a.Component),w(e,[{key:"render",value:function(){var t=this,e=this.state.options;return o.a.createElement("div",{className:"GameShellScene",onDragOver:this.handleDragOver,onDrop:this.handleDrop},o.a.createElement("h1",null,"Bemuse Game Shell"),o.a.createElement("p",null,"This tool is intended for developers testing the game."),o.a.createElement("form",{onSubmit:this.submit},o.a.createElement("div",{className:"text"},o.a.createElement("label",null,o.a.createElement("span",{className:"label"},"BMS URL:"),o.a.createElement("input",{type:"text",disabled:e.resource,onChange:this.bindOption(function(t,e){return t.url=e}),value:e.url}))),o.a.createElement("div",{className:"text"},o.a.createElement("label",null,o.a.createElement("span",{className:"label"},"-or- Drop BMS folder here"),o.a.createElement(E,{ref:"dropzone",selectedResource:e.resource,onSelect:this.handleSelectFile}))),o.a.createElement("div",{className:"text"},o.a.createElement("label",null,o.a.createElement("span",{className:"label"},"Audio-Input Latency"),o.a.createElement("input",{type:"text",onChange:this.bindOption(function(t,e){return t.game.audioInputLatency=e}),value:e.game.audioInputLatency}))),o.a.createElement("div",{className:"text"},o.a.createElement("label",null,o.a.createElement("span",{className:"label"},"HI-SPEED:"),o.a.createElement("input",{type:"text",onChange:this.bindOption(function(t,e){return t.players[0].speed=e}),value:e.players[0].speed}))),o.a.createElement("div",{className:"radio"},o.a.createElement("h3",null,"Placement"),["left","center","right"].map(function(n){return o.a.createElement("label",null,o.a.createElement("input",{type:"radio",value:n,onChange:t.bindOption(function(t,e){return t.players[0].placement=e}),checked:e.players[0].placement===n}),o.a.createElement("span",{className:"label"},n))})),o.a.createElement("button",{type:"submit"},"Play")))}}]),e}();j.propTypes={options:y.a.object,play:y.a.func};var C=j,A=n(723);function O(){window.addEventListener("touchstart",function t(){Object(p.d)(s.a),window.removeEventListener("touchstart",t)});var t=function(t){return new Promise(function(e){var n=o.a.createElement(C,{options:t,play:function(t){e(t)}});a.a.display(n).done()})},e=l.a.wrap(regeneratorRuntime.mark(function e(){var n,i,o,a,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(f.a.keyboard||"").split(",").map(function(t){return+t}),i={url:f.a.bms||"/music/[snack]dddd/dddd_sph.bme",game:{audioInputLatency:+f.a.latency||0},players:[{speed:+f.a.speed||3,autoplay:!!f.a.autoplay,placement:"center",scratch:f.a.scratch||"left",input:{keyboard:{1:n[0]||83,2:n[1]||68,3:n[2]||70,4:n[3]||32,5:n[4]||74,6:n[5]||75,7:n[6]||76,SC:n[7]||65,SC2:n[8]||16}}}]},e.next=4,t(i);case 4:return i=e.sent,o=i.url,a=Object(h.resolveUrl)(o,"assets/"),s={title:"Loading",subtitles:[],artist:"",genre:"",subartists:[]},c={bms:i.resource||new u.b(o),assets:i.resources||new r.a(a),metadata:s,options:Object.assign({},i.game,{players:i.players})},e.abrupt("return",c);case 10:case"end":return e.stop()}},e,this)}));l()(regeneratorRuntime.mark(function t(){var n,r,i,u,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return n=t.sent,r=d.load(n),i=r.tasks,u=r.promise,t.next=6,a.a.display(o.a.createElement(A.a,{tasks:i,song:n.metadata}));case 6:return t.next=8,u;case 8:return s=t.sent,t.next=11,a.a.display(new v.a(s.display));case 11:s.start();case 12:case"end":return t.stop()}},t,this)})).done()}n.d(e,"main",function(){return O})},190:function(t,e,n){"use strict";n(667);var r=n(48),i=n.n(r),o=n(28),a=n.n(o),u=n(30),s=n.n(u),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.a.Component),c(e,[{key:"render",value:function(){return a.a.createElement("div",{className:i()("Scene",this.props.className),onDragEnter:this.props.onDragEnter},this.props.children)}}]),e}();l.propTypes={className:s.a.string,children:s.a.node,onDragEnter:s.a.func},e.a=l},223:function(t,e,n){"use strict";var r=n(78),i=n.n(r),o=n(28),a=n.n(o),u=n(67),s=n.n(u),c=n(148),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function f(t){t&&t.parentNode===c.a&&c.a.removeChild(t)}var h=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._transitioning=!1,this._stack=[]}return l(t,[{key:"display",value:function(t){return this._transitionTo(function(){return t})}},{key:"push",value:function(t){var e=this,n=this.currentScene;return this._transitionTo(function(){return e._stack.push(n),t})}},{key:"pop",value:function(){var t=this;return this._transitionTo(function(){return t._stack.pop()})}},{key:"_transitionTo",value:function(t){return i()(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._transitioning){e.next=2;break}throw new Error("Scene is transitioning!");case 2:if(e.prev=2,this._transitioning=!0,!this.currentSceneInstance){e.next=8;break}return e.next=7,Promise.resolve(this.currentSceneInstance.teardown());case 7:f(this.currentElement);case 8:"function"!=typeof(n=t())&&(n=new p(n,this.ReactSceneContainer)),(r=document.createElement("div")).className="scene-manager--scene",c.a.appendChild(r),this.currentElement=r,this.currentScene=n,this.currentSceneInstance=n(r);case 16:return e.prev=16,this._transitioning=!1,e.finish(16);case 19:case"end":return e.stop()}},e,this,[[2,,16,19]])}).bind(this))}}]),t}());function p(t,e){return function(n){var r=function(){},i=a.a.cloneElement(t,{scene:t,registerTeardownCallback:function(t){r=t}}),o=e?a.a.createElement(e,null,i):i;return s.a.render(o,n),{teardown:function(){return Promise.try(function(){return r()}).finally(function(){s.a.unmountComponentAtNode(n)})}}}}e.a=h},231:function(t,e,n){var r=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(337),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},246:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(181)),a=i(n(85)),u=i(n(180)),s=i(n(339)),c=function(){function t(t,e){void 0===e&&(e={});var n=this,r=t.notes,i=t.timing,o=t.keysounds,u=t.songInfo,s=t.positioning,c=t.spacing,l=t.barLines,f=t.images,h=t.expertJudgmentWindow;a.default(r,'Expected "data.notes"'),a.default(i,'Expected "data.timing"'),a.default(o,'Expected "data.keysounds"'),a.default(u,'Expected "data.songInfo"'),a.default(s,'Expected "data.positioning"'),a.default(c,'Expected "data.spacing"'),a.default(l,'Expected "data.barLines"'),this.expertJudgmentWindow=h,r=this._preTransform(r,e),this._timing=i,this._positioning=s,this._spacing=c,this._keysounds=o,this._duration=0,this._notes=this._generatePlayableNotesFromBMS(r),this._autos=this._generateAutoKeysoundEventsFromBMS(r),this._barLines=this._generateBarLineEvents(l),this._samples=this._generateKeysoundFiles(o),this._infos=new Map(this._notes.map(function(t){return[t,n._getNoteInfo(t)]})),this._songInfo=u,this._images=f}return Object.defineProperty(t.prototype,"notes",{get:function(){return this._notes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autos",{get:function(){return this._autos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"samples",{get:function(){return this._samples},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keysounds",{get:function(){return this._keysounds.all()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"barLines",{get:function(){return this._barLines},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return["SC","1","2","3","4","5","6","7"]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"songInfo",{get:function(){return this._songInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eyecatchImage",{get:function(){return this._images&&this._images.eyecatch||"eyecatch_image.png"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundImage",{get:function(){return this._images&&this._images.background||"back_image.png"},enumerable:!0,configurable:!0}),t.prototype.info=function(t){return this._infos.get(t)},t.prototype.beatToSeconds=function(t){return this._timing.beatToSeconds(t)},t.prototype.beatToPosition=function(t){return this._positioning.position(t)},t.prototype.secondsToBeat=function(t){return this._timing.secondsToBeat(t)},t.prototype.secondsToPosition=function(t){return this.beatToPosition(this.secondsToBeat(t))},t.prototype.bpmAtBeat=function(t){return this._timing.bpmAtBeat(t)},t.prototype.scrollSpeedAtBeat=function(t){return this._positioning.speed(t)},t.prototype.spacingAtBeat=function(t){return this._spacing.factor(t)},t.prototype._preTransform=function(t,e){var n=o.default.chain(t),i=function(t){try{for(var e=r(t),n=e.next();!n.done;n=e.next()){var i=n.value;if("6"===i.column||"7"===i.column)return"7K"}}catch(t){o={error:t}}finally{try{n&&!n.done&&(a=e.return)&&a.call(e)}finally{if(o)throw o.error}}return"5K";var o,a}(t);if("off"===e.scratch&&(n=n.map(function(t){return t.column&&"SC"===t.column?Object.assign({},t,{column:null}):t})),"5K"===i){var u=["1","2","3","4","5","6","7"],s=function(t){return function(e){if(e.column){var n=u.indexOf(e.column);if(n>-1){var r=n+t;a.default(r<u.length,"Weird. Columns must not shift beyond available column");var i=u[r];return Object.assign({},e,{column:i})}}return e}};"off"===e.scratch?n=n.map(s(1)):"right"===e.scratch&&(n=n.map(s(2)))}return n.value()},t.prototype._generatePlayableNotesFromBMS=function(t){var e=this,n=1;return t.filter(function(t){return t.column}).map(function(t){var r=e._generateEvent(t.beat);return r.id=n++,r.column=t.column,r.keysound=t.keysound,r.keysoundStart=t.keysoundStart,r.keysoundEnd=t.keysoundEnd,e._updateDuration(r),void 0!==t.endBeat?(r.end=e._generateEvent(t.endBeat),e._updateDuration(r.end)):r.end=void 0,new s.default(r)})},t.prototype._updateDuration=function(t){t.time>this._duration&&(this._duration=t.time)},t.prototype._generateAutoKeysoundEventsFromBMS=function(t){var e=this;return t.filter(function(t){return!t.column}).map(function(t){var n=e._generateEvent(t.beat);return n.keysound=t.keysound,n.keysoundStart=t.keysoundStart,n.keysoundEnd=t.keysoundEnd,new u.default(n)})},t.prototype._generateKeysoundFiles=function(t){var e,n,i,o,a=new Set;try{for(var u=r([this.notes,this.autos]),s=u.next();!s.done;s=u.next()){var c=s.value;try{for(var l=r(c),f=l.next();!f.done;f=l.next()){var h=f.value,p=t.get(h.keysound);p&&a.add(p)}}catch(t){i={error:t}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return Array.from(a)},t.prototype._generateBarLineEvents=function(t){var e=this;return t.map(function(t){return e._generateEvent(t)})},t.prototype._generateEvent=function(t){return{beat:t,time:this.beatToSeconds(t),position:this.beatToPosition(t)}},t.prototype._getNoteInfo=function(t){return{combos:t.end?2:1}},t}();e.Notechart=c,e.default=c},247:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(73),i=n(37),o=function(){function t(t){t.length>0&&(this._speedcore=new r.Speedcore(t))}return t.prototype.factor=function(t){return this._speedcore?this._speedcore.x(t):1},t.fromBMSChart=function(e){i.BMSChart;var n=[];return e.objects.allSorted().forEach(function(t){if("SP"===t.channel){var r=e.measureToBeat(t.measure,t.fraction),i=+e.headers.get("speed"+t.value);if(isNaN(i))return;if(n.length>0){var o=n[n.length-1];o.dx=(i-o.x)/(r-o.t)}n.push({t:r,x:i,dx:0,inclusive:!0})}}),n.length>0&&n.unshift({t:0,x:n[0].x,dx:0,inclusive:!0}),new t(n)},t}();e.Spacing=o},248:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(73),i=n(37),o=function(){function t(t){this._speedcore=new r.Speedcore(t)}return t.prototype.speed=function(t){return this._speedcore.dx(t)},t.prototype.position=function(t){return this._speedcore.x(t)},t.fromBMSChart=function(e){i.BMSChart;var n=[],r=0;return n.push({t:0,x:r,dx:1,inclusive:!0}),e.objects.allSorted().forEach(function(t){if("SC"===t.channel){var i=e.measureToBeat(t.measure,t.fraction),o=+e.headers.get("scroll"+t.value);if(isNaN(o))return;var a=n[n.length-1];r+=(i-a.t)*a.dx,0===i&&1===n.length?n[0].dx=o:n.push({t:i,x:r,dx:o,inclusive:!0})}}),new t(n)},t}();e.Positioning=o},249:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(94),i=n(37),o=function(){function t(t){this._map=t}return t.prototype.get=function(t){return this._map[t.toLowerCase()]},t.prototype.files=function(){return r.uniq(r.values(this._map))},t.prototype.all=function(){return this._map},t.fromBMSChart=function(e){i.BMSChart;var n={};return e.headers.each(function(t,e){var r=t.match(/^wav(\S\S)$/i);r&&(n[r[1].toLowerCase()]=e)}),new t(n)},t}();e.Keysounds=o},250:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(145),i=n(94),o=n(37),a=function(){function t(t){this.title="NO TITLE",this.artist="NO ARTIST",this.genre="NO GENRE",this.subtitles=[],this.subartists=[],this.difficulty=0,this.level=0,t&&i.assign(this,t)}return t.fromBMSChart=function(e){o.BMSChart;var n={},i=e.headers.get("title"),a=e.headers.get("artist"),u=e.headers.get("genre"),s=+e.headers.get("difficulty"),c=+e.headers.get("playlevel"),l=e.headers.getAll("subtitle"),f=e.headers.getAll("subartist");if("string"==typeof i&&!l){var h=function(t){i=t[1],l=[t[2]]};r.match(i).when(/^(.*\S)\s*-(.+?)-$/,h).when(/^(.*\S)\s*～(.+?)～$/,h).when(/^(.*\S)\s*\((.+?)\)$/,h).when(/^(.*\S)\s*\[(.+?)\]$/,h).when(/^(.*\S)\s*<(.+?)>$/,h)}return i&&(n.title=i),a&&(n.artist=a),u&&(n.genre=u),l&&(n.subtitles=l),f&&(n.subartists=f),s&&(n.difficulty=s),c&&(n.level=c),new t(n)},t}();e.SongInfo=a},251:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(73),i=n(94),o=n(37),a={bpm:1,stop:2},u=function(){function t(t,e){var n={bpm:t,beat:0,seconds:0},o=[];o.push({t:0,x:0,dx:n.bpm/60,bpm:n.bpm,inclusive:!0}),(e=e.slice()).sort(function(t,e){return t.beat-e.beat||a[t.type]-a[e.type]}),e.forEach(function(t){var e=t.beat,r=n.seconds+60*(e-n.beat)/n.bpm;switch(t.type){case"bpm":n.bpm=t.bpm,o.push({t:r,x:e,dx:n.bpm/60,bpm:n.bpm,inclusive:!0});break;case"stop":o.push({t:r,x:e,dx:0,bpm:n.bpm,inclusive:!0}),r+=60*(t.stopBeats||0)/n.bpm,o.push({t:r,x:e,dx:n.bpm/60,bpm:n.bpm,inclusive:!1});break;default:throw new Error("Unrecognized segment object!")}n.beat=e,n.seconds=r}),this._speedcore=new r.Speedcore(o),this._eventBeats=i.uniq(i.map(e,"beat"),!0)}return t.prototype.beatToSeconds=function(t){return this._speedcore.t(t)},t.prototype.secondsToBeat=function(t){return this._speedcore.x(t)},t.prototype.bpmAtBeat=function(t){return this._speedcore.segmentAtX(t).bpm},t.prototype.getEventBeats=function(){return this._eventBeats},t.fromBMSChart=function(e){o.BMSChart;var n=[];return e.objects.all().forEach(function(t){var r,i=e.measureToBeat(t.measure,t.fraction);if("03"===t.channel)r=parseInt(t.value,16),n.push({type:"bpm",beat:i,bpm:r});else if("08"===t.channel)r=+e.headers.get("bpm"+t.value),isNaN(r)||n.push({type:"bpm",beat:i,bpm:r});else if("09"===t.channel){var o=e.headers.get("stop"+t.value)/48;n.push({type:"stop",beat:i,stopBeats:o})}}),new t(+e.headers.get("bpm")||60,n)},t}();e.Timing=u},252:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IIDX_P1={11:"1",12:"2",13:"3",14:"4",15:"5",18:"6",19:"7",16:"SC"}},253:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(104));e.Note=new i.default({beat:"number",endBeat:i.default.maybe("number"),column:i.default.maybe("string"),keysound:"string"})},254:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var o=n(253),a=r(n(85)),u=i(n(252)),s=n(37),c=function(){function t(t){t.forEach(o.Note),this._notes=t}return t.prototype.count=function(){return this._notes.length},t.prototype.all=function(){return this._notes.slice()},t.fromBMSChart=function(e,n){s.BMSChart;var r=(n=n||{}).mapping||t.CHANNEL_MAPPING.IIDX_P1;return new l(e,{mapping:r}).build()},t}();e.Notes=c,c.CHANNEL_MAPPING=u;var l=function(){function t(t,e){this._chart=t,a.default(e.mapping,"Expected options.mapping"),a.default("object"==typeof e.mapping,"options.mapping must be object"),this._mapping=e.mapping}return t.prototype.build=function(){return this._notes=[],this._activeLN={},this._lastNote={},this._lnObj=(this._chart.headers.get("lnobj")||"").toLowerCase(),this._channelMapping=this._mapping,this._objects=this._chart.objects.allSorted(),this._objects.forEach(function(t){this._handle(t)}.bind(this)),new c(this._notes)},t.prototype._handle=function(t){if("01"===t.channel)this._handleNormalNote(t);else switch(t.channel.charAt(0)){case"1":case"2":this._handleNormalNote(t);break;case"5":case"6":this._handleLongNote(t)}},t.prototype._handleNormalNote=function(t){var e=this._normalizeChannel(t.channel),n=this._getBeat(t);if(t.value.toLowerCase()===this._lnObj)this._lastNote[e]&&(this._lastNote[e].endBeat=n);else{var r={beat:n,endBeat:void 0,keysound:t.value,column:this._getColumn(e)};this._lastNote[e]=r,this._notes.push(r)}},t.prototype._handleLongNote=function(t){var e=this._normalizeChannel(t.channel),n=this._getBeat(t);if(this._activeLN[e]){var r=this._activeLN[e];r.endBeat=n,this._notes.push(r),delete this._activeLN[e]}else this._activeLN[e]={beat:n,keysound:t.value,column:this._getColumn(e)}},t.prototype._getBeat=function(t){return this._chart.measureToBeat(t.measure,t.fraction)},t.prototype._getColumn=function(t){return this._channelMapping[t]},t.prototype._normalizeChannel=function(t){return t.replace(/^5/,"1").replace(/^6/,"2")},t}()},255:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(104));e.Segment=new i.default({t:"number",x:"number",dx:"number"})},256:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(145),i=n(37),o={bms:{random:/^#RANDOM\s+(\d+)$/i,if:/^#IF\s+(\d+)$/i,endif:/^#ENDIF$/i,timeSignature:/^#(\d\d\d)02:(\S*)$/,channel:/^#(?:EXT\s+#)?(\d\d\d)(\S\S):(\S*)$/,header:/^#(\w+)(?:\s+(\S.*))?$/},dtx:{random:/^#RANDOM\s+(\d+)$/i,if:/^#IF\s+(\d+)$/i,endif:/^#ENDIF$/i,timeSignature:/^#(\d\d\d)02:\s*(\S*)$/,channel:/^#(?:EXT\s+#)?(\d\d\d)(\S\S):\s*(\S*)$/,header:/^#(\w+):(?:\s+(\S.*))?$/}};e.compile=function(t,e){e=e||{};var n=new i.BMSChart,a=e.rng||function(t){return 1+Math.floor(Math.random()*t)},u=o[e.format]||o.bms,s=[],c=[!1],l={headerSentences:0,channelSentences:0,controlSentences:0,skippedSentences:0,malformedSentences:0,chart:n,warnings:[]};return function(t,e){t.split(/\r\n|\r|\n/).map(function(t){return t.trim()}).forEach(function(t,n){e(t,n+1)})}(t,function(t,e){var i=!0;if("#"===t.charAt(0)&&(r.match(t).when(u.random,function(t){l.controlSentences+=1,s.push(a(+t[1]))}).when(u.if,function(t){l.controlSentences+=1,c.push(s[s.length-1]!==+t[1])}).when(u.endif,function(t){l.controlSentences+=1,c.pop()}).else(function(){i=!1}),!i)){var o=c[c.length-1];r.match(t).when(u.timeSignature,function(t){l.channelSentences+=1,o||n.timeSignatures.set(+t[1],+t[2])}).when(u.channel,function(t){l.channelSentences+=1,o||function(t,e,r,i){var o=Math.floor(r.length/2);if(0!==o)for(var a=0;a<o;a++){var u=r.substr(2*a,2),s=a/o;"00"!==u&&n.objects.add({measure:t,fraction:s,value:u,channel:e,lineNumber:i})}}(+t[1],t[2],t[3],e)}).when(u.header,function(t){l.headerSentences+=1,o||n.headers.set(t[1],t[2])}).else(function(){!function(t,e){l.warnings.push({lineNumber:t,message:e})}(e,"Invalid command")})}}),l}},257:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getReaderOptionsFromFilename=function(t){var e;return t.match(/\.sjis\.\w+$/i)&&(e="Shift-JIS"),t.match(/\.euc_kr\.\w+$/i)&&(e="EUC-KR"),t.match(/\.utf8\.\w+$/i)&&(e="UTF-8"),{forceEncoding:e}}},258:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(605);e.read=function(t){throw new Error("Synchronous read unsupported in browser!")},e.readAsync=function(t,e,n){n||(n=e,e=null);var i=e&&e.forceEncoding||r.detect(t),o=new FileReader;o.onload=function(){n(null,o.result)},o.onerror=function(){n(new Error("cannot read it"))},o.readAsText(new Blob([t]),i)};var i=n(257);e.getReaderOptionsFromFilename=i.getReaderOptionsFromFilename},259:function(t,e,n){(function(e){var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(this,n(35))},260:function(t,e,n){"use strict";var r=n(259),i=r.OfflineAudioContext||r.webkitOfflineAudioContext,o=r.AudioContext||r.webkitAudioContext,a={};t.exports=function(t){if(!o)return null;"number"==typeof t&&(t={sampleRate:t});var e=t&&t.sampleRate;if(t&&t.offline)return i?new i(t.channels||2,t.length,e||44100):null;var n=a[e];if(n)return n;try{n=new o(t)}catch(t){n=new o}return a[n.sampleRate]=a[e]=n,n}},263:function(t,e,n){"use strict";var r=n(332),i=n.n(r),o=n(32),a=n.n(o),u=n(89),s=n.n(u);function c(t){return s.a.fromBinder(function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=t.inputs.values()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;e(new s.a.Next(u))}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}var c=!0,l=!1,f=void 0;try{for(var h,p=t.outputs.values()[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var d=h.value;e(new s.a.Next(d))}}catch(t){l=!0,f=t}finally{try{!c&&p.return&&p.return()}finally{if(l)throw f}}t.onstatechange=function(t){e(new s.a.Next(t.port))}})}function l(t){return"input"!==t.type?s.a.never():s.a.fromEvent(t,"midimessage")}var f=function(){return s.a.fromPromise(navigator.requestMIDIAccess?navigator.requestMIDIAccess():Promise.reject(new Error("MIDI is not supported"))).flatMap(c).flatMapError(function(t){return console.warn("MIDI Error:",t.stack),s.a.never()}).flatMap(l).doLog("messageforport")};n.d(e,"a",function(){return p}),n.d(e,"d",function(){return d}),n.d(e,"b",function(){return v}),n.d(e,"c",function(){return y});var h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var p=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=(r.getMidi川||f)();this._window=n,this._exclusive=!!r.exclusive,this._disposables=[g(n,"keydown",function(t){return e._handleKeyDown(t)}),g(n,"keyup",function(t){return e._handleKeyUp(t)}),i.onValue(function(t){return e._handleMIDIMessage(t)})],this._status={}}return h(t,[{key:"_handleKeyDown",value:function(t){this._status[""+t.which]=!0,this._exclusive&&t.preventDefault()}},{key:"_handleKeyUp",value:function(t){this._status[""+t.which]=!1}},{key:"_handleMIDIMessage",value:function(t){var e=this;if(t&&t.data){var n=t.data,r="midi."+t.target.id+"."+(15&t.data[0]),i=function(t){e._status[r+".note."+n[1]]=t};if(128==(240&n[0]))i(!1);else if(144==(240&n[0]))n[2]>0?i(!0):i(!1);else if(176==(240&n[0]))64===n[1]?this._status[r+".sustain"]=n[2]>=64:1===n[1]&&(this._status[r+".mod"]=n[2]>=16);else if(224==(240&n[0])){var o=n[1]|n[2]<<7;this._status[r+".pitch.up"]=o>=8448,this._status[r+".pitch.down"]=o<7936}}}},{key:"_updateGamepads",value:function(){var t=this._window.navigator,e=t.getGamepads?t.getGamepads():t.webkitGetGamepads?t.webkitGetGamepads():[];if(e)for(var n=0;n<e.length;n++){var r=e[n];r&&this._updateGamepad(r)}}},{key:"_updateGamepad",value:function(t){for(var e="gamepad."+t.index,n=0;n<t.buttons.length;n++){var r=t.buttons[n];this._status[e+".button."+n]=r&&r.value>=.5}for(var i=0;i<t.axes.length;i++){var o=t.axes[i];this._status[e+".axis."+i+".positive"]=o>=.01,this._status[e+".axis."+i+".negative"]=o<=-.01}}},{key:"update",value:function(){return this._updateGamepads(),this._status}},{key:"dispose",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._disposables[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o()}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}}}]),t}();function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new p,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return v(s.a.fromBinder(function(n){var r=e.setInterval(function(){n(new s.a.Next(t.update()))},16);return function(){return e.clearInterval(r)}}))}function v(t){return t.map(function(t){return Object.keys(t).filter(function(e){return t[e]})}).diff([],function(t,e){return a.a.difference(e,t)}).flatMap(function(t){return s.a.fromArray(t)})}var _={};function y(t){if(+t)return a.a.capitalize(i()(+t));var e=t.match(/^gamepad\.(\d+)\.axis\.(\d+)\.(\w+)/);if(e)return"Joy"+e[1]+" Axis"+e[2]+" ("+("positive"===e[3]?"+":"-")+")";var n=t.match(/^gamepad\.(\d+)\.button\.(\d+)/);if(n)return"Joy"+n[1]+" Btn"+n[2];var r=t.match(/^midi\.(.+)\.(\d+)\.(.+)$/);if(r){var o=r[3].split("."),u=r[1],s="MIDI"+(_[u]||(_[u]=Object.keys(_).length+1))+" Ch"+(+r[2]+1);if("note"===o[0]){var c=+o[1];return s+" "+["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][c%12]+(Math.floor(c/12)-1)}if("pitch"===o[0])return s+" Pitch"+("up"===o[1]?"+":"-");if("sustain"===o[0])return"Sustain";if("mod"===o[0])return"Mod"}return String(t).replace(/\./g," ")+"?"}function g(t,e,n){return t.addEventListener(e,n),function(){t.removeEventListener(e,n)}}},264:function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=0,this.changed=!1}return r(t,[{key:"justPressed",get:function(){return this.changed&&this.value}}]),t}(),o=n(32),a=n.n(o),u=n(157),s=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._controls=new Map,this._plugins=[]}return c(t,[{key:"update",value:function(){var t=new Map,e=!0,n=!1,r=void 0;try{for(var i,o=this._controls[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,u=s(a,2);u[0];u[1].changed=!1}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}var c=!0,l=!1,f=void 0;try{for(var h,p=this._plugins[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var d=h.value,v=!0,_=!1,y=void 0;try{for(var g,m=d.get()[Symbol.iterator]();!(v=(g=m.next()).done);v=!0){var b=g.value,w=s(b,2),x=w[0],k=w[1];t.set(x,k)}}catch(t){_=!0,y=t}finally{try{!v&&m.return&&m.return()}finally{if(_)throw y}}}}catch(t){l=!0,f=t}finally{try{!c&&p.return&&p.return()}finally{if(l)throw f}}var S=!0,E=!1,j=void 0;try{for(var C,A=t[Symbol.iterator]();!(S=(C=A.next()).done);S=!0){var O=C.value,T=s(O,2),P=T[0],R=T[1],I=this.get(P);I.value!==R&&(I.changed=!0,I.value=R)}}catch(t){E=!0,j=t}finally{try{!S&&A.return&&A.return()}finally{if(E)throw j}}}},{key:"destroy",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._plugins[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.destroy()}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}}},{key:"get",value:function(t){return this._controls.has(t)||this._controls.set(t,new i),this._controls.get(t)}},{key:"use",value:function(t){var e={},n="input:"+t.name;this._plugins.push({get:u.a.wrap(n,function(){var n=t.get(),r=[],i=!0,o=!1,u=void 0;try{for(var s,c=a.a.union(a.a.keys(n),a.a.keys(e))[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=s.value,f=+e[l]||0,h=+n[l]||0;f!==h&&r.push([l,h]),e[l]=h}}catch(t){o=!0,u=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw u}}return r}),destroy:function(){return"function"!=typeof t.destroy||t.destroy()}})}}]),t}();e.a=l},270:function(t,e,n){"use strict";e.a=function(t){var e=Math.floor(t%60);return Math.floor(t/60)+":"+(e<10?"0":"")+e}},271:function(t,e,n){"use strict";function r(t){return"hope"===t?(e=void 0,n=void 0,r=void 0,{update:function(t){var i=t.stats,o=i.numJudgments/i.totalCombo,a=function(t,e,n){var r=e+(n-e)*o,a=i.maxPossibleScore;return Math.max(0,(a-t)/(r-t))},u=.5*a(5e5,555555,51e4);if(e=Math.min(1,u),r=Math.max(0,Math.min(1,u-1)),u>0)n=0;else{var s=a(45e4,5e5,5e5);n=s}},shouldDisplay:function(){return e>0||n>0},getPrimary:function(){return e},getSecondary:function(){return n},getExtra:function(){return r}}):{update:function(){},shouldDisplay:function(){return!1},getPrimary:function(){return 0},getSecondary:function(){return 0},getExtra:function(){return 0}};var e,n,r}n.d(e,"a",function(){return r})},272:function(t,e,n){"use strict";var r=n(32),i=n.n(r),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._notes=i.a.sortBy(e,s),this._barLines=i()(n).map("position").sortBy().value()}return o(t,[{key:"getVisibleNotes",value:function(t,e,n){var r=[],i=this._notes;n||(n=0);for(var o=0;o<i.length;o++){var a=i[o];if(a.end?!(a.position>e||a.end.position<t-n):!(a.position>e||a.position<t-n)){var s={note:a};if(a.end){var c=u(t,e,a.position),l=u(t,e,a.end.position);s.y=Math.min(c,l),s.height=Math.abs(c-l)}else s.y=u(t,e,a.position);r.push(s)}}return r}},{key:"getVisibleBarLines",value:function(t,e,n){return n||(n=0),this._barLines.filter(function(r){return t-n<=r&&r<=e}).map(function(n){return{id:n,y:u(t,e,n)}})}}]),t}();function u(t,e,n){return 1-(n-t)/(e-t)}function s(t){return t.position}e.a=a},273:function(t,e,n){"use strict";var r=n(71),i=n(32),o=n.n(i),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=function(t){return Math.floor(5e5*t)},c=function(t,e){return Math.floor(55555*t/e)},l=function(){function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.totalCombo=o()(e.notes).map(function(t){return e.info(t).combos}).sum(),this.totalNotes=e.notes.length,this.combo=0,this.maxCombo=0,this.rawSumJudgmentWeight=0,this.rawTotalComboScore=this._calculateRawTotalComboScore(this.totalCombo),this._remainingMaxPossibleRawComboScore=this.rawTotalComboScore,this.rawSumComboScore=0,this.counts=(u(n={},r.a,0),u(n,"1",0),u(n,"2",0),u(n,"3",0),u(n,"4",0),n),this.numJudgments=0,this.poor=!1,this._log=[],this.deltas=[]}return a(t,[{key:"handleJudgment",value:function(t){if(this.counts[t]+=1,this.numJudgments+=1,r.b(t)){var e=this.totalCombo-this.numJudgments;this.combo=0,this.poor=!0,this._remainingMaxPossibleRawComboScore=this._calculateRawTotalComboScore(e)}else{this.combo+=1;var n=this._calculateRawComboScore(this.combo);this.rawSumComboScore+=n,this._remainingMaxPossibleRawComboScore-=n,this.poor=!1}this.rawSumJudgmentWeight+=r.h(t),this.combo>this.maxCombo&&(this.maxCombo=this.combo),this._recordLog(t)}},{key:"handleDelta",value:function(t){this.deltas.push(t)}},{key:"_calculateRawTotalComboScore",value:function(t){for(var e=0,n=1;n<=t;n++)e+=this._calculateRawComboScore(n);return e}},{key:"_calculateRawComboScore",value:function(t){return 0===t?0:t<23?1:t<51?2:t<92?3:t<161?4:5}},{key:"_recordLog",value:function(t){var e=this._getLogCharacter(t);e&&(0===this._log.length||this._log[this._log.length-1].character!==e?this._log.push({character:e,count:1}):this._log[this._log.length-1].count+=1)}},{key:"_getLogCharacter",value:function(t){switch(t){case 1:return"A";case 2:return"B";case 3:return"C";case 4:return"D";case r.a:return"M"}}},{key:"score",get:function(){return this.accuracyScore+this.comboScore}},{key:"accuracyScore",get:function(){return s(this.accuracy)}},{key:"comboScore",get:function(){return c(this.rawSumComboScore,this.rawTotalComboScore)}},{key:"maxPossibleScore",get:function(){return this.maxPossibleAccuracyScore+this.maxPossibleComboScore}},{key:"maxPossibleAccuracyScore",get:function(){var t=this.totalCombo-this.numJudgments,e=(this.rawSumJudgmentWeight+r.h(1)*t)/(r.h(1)*this.totalCombo);return s(e)}},{key:"maxPossibleComboScore",get:function(){var t=this.rawSumComboScore+this._remainingMaxPossibleRawComboScore;return c(t,this.rawTotalComboScore)}},{key:"accuracy",get:function(){return this.rawSumJudgmentWeight/(r.h(1)*this.totalCombo)}},{key:"currentAccuracy",get:function(){return this.rawSumJudgmentWeight/(r.h(1)*this.numJudgments||1)}},{key:"log",get:function(){return this._log.map(function(t){var e=t.character,n=t.count;return""+(n>1?n:"")+e}).join("")}}]),t}();e.a=l},274:function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._notechart=e,this._number=n,this._options={autosound:!!r.autosound,speed:+r.speed,placement:r.placement||"center",scratch:r.scratch||"left",input:r.input,laneCover:+r.laneCover||0,gauge:r.gauge,tutorial:!!r.tutorial}}return r(t,[{key:"notechart",get:function(){return this._notechart}},{key:"columns",get:function(){return this._notechart.columns}},{key:"number",get:function(){return this._number}},{key:"options",get:function(){return this._options}}]),t}();e.a=i},275:function(t,e,n){"use strict";(function(t){var r=n(232),i=n(342),o=n(341);function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=s.prototype:(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);s.TYPED_ARRAY_SUPPORT?(t=e).__proto__=s.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=u(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(s.isBuffer(e)){var n=0|p(e.length);return 0===(t=u(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?u(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=u(t,e<0?0:0|p(e)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return D(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return D(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function _(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return e&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var o,a=1,u=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,u/=2,s/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<u;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===s)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+s>u&&(n=u-s),o=n;o>=0;o--){for(var f=!0,h=0;h<s;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return-1}function g(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))return a;t[n+a]=u}return a}function m(t,e,n,r){return W(D(e,t.length-n),t,n,r)}function b(t,e,n,r){return W(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return b(t,e,n,r)}function x(t,e,n,r){return W(z(e),t,n,r)}function k(t,e,n,r){return W(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,u,s,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&c)<<6|63&o)>127&&(l=s);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(s=(15&c)<<12|(63&o)<<6|63&a)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:o=t[i+1],a=t[i+2],u=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&u)&&(s=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(l=s)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=j)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=j));return n}(r)}e.Buffer=s,e.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},e.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,n){return c(null,t,e,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?u(t,e):void 0!==n?"string"==typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}(null,t,e,n)},s.allocUnsafe=function(t){return f(null,t)},s.allocUnsafeSlow=function(t){return f(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},s.byteLength=d,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,r,i){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),u=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],a=l[f];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return _(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return _(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return g(this,t,e,n);case"utf8":case"utf-8":return m(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var j=4096;function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function O(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=U(t[o]);return i}function T(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function I(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function B(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function M(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,r,o){return o||M(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function L(t,e,n,r,o){return o||M(t,0,n,8),i.write(t,e,n,r,52,8),n+8}s.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=s.prototype;else{var i=e-t;n=new s(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},s.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},s.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},s.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):B(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,a=1,u=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,a=1,u=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):B(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=s.isBuffer(t)?t:D(new s(t,r).toString()),u=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%u]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function D(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function W(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(35))},276:function(t,e,n){(function(t,r){var i;!function(o){"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var u,s=2147483647,c=36,l=1,f=26,h=38,p=700,d=72,v=128,_="-",y=/^xn--/,g=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=c-l,x=Math.floor,k=String.fromCharCode;function S(t){throw new RangeError(b[t])}function E(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function j(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+E((t=t.replace(m,".")).split("."),e).join(".")}function C(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function A(t){return E(t,function(t){var e="";return t>65535&&(e+=k((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=k(t)}).join("")}function O(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function T(t,e,n){var r=0;for(t=n?x(t/p):t>>1,t+=x(t/e);t>w*f>>1;r+=c)t=x(t/w);return x(r+(w+1)*t/(t+h))}function P(t){var e,n,r,i,o,a,u,h,p,y,g,m=[],b=t.length,w=0,k=v,E=d;for((n=t.lastIndexOf(_))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&S("not-basic"),m.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<b;){for(o=w,a=1,u=c;i>=b&&S("invalid-input"),((h=(g=t.charCodeAt(i++))-48<10?g-22:g-65<26?g-65:g-97<26?g-97:c)>=c||h>x((s-w)/a))&&S("overflow"),w+=h*a,!(h<(p=u<=E?l:u>=E+f?f:u-E));u+=c)a>x(s/(y=c-p))&&S("overflow"),a*=y;E=T(w-o,e=m.length+1,0==o),x(w/e)>s-k&&S("overflow"),k+=x(w/e),w%=e,m.splice(w++,0,k)}return A(m)}function R(t){var e,n,r,i,o,a,u,h,p,y,g,m,b,w,E,j=[];for(m=(t=C(t)).length,e=v,n=0,o=d,a=0;a<m;++a)(g=t[a])<128&&j.push(k(g));for(r=i=j.length,i&&j.push(_);r<m;){for(u=s,a=0;a<m;++a)(g=t[a])>=e&&g<u&&(u=g);for(u-e>x((s-n)/(b=r+1))&&S("overflow"),n+=(u-e)*b,e=u,a=0;a<m;++a)if((g=t[a])<e&&++n>s&&S("overflow"),g==e){for(h=n,p=c;!(h<(y=p<=o?l:p>=o+f?f:p-o));p+=c)E=h-y,w=c-y,j.push(k(O(y+E%w,0))),h=x(E/w);j.push(k(O(h,0))),o=T(n,b,r==i),n=0,++r}++n,++e}return j.join("")}u={version:"1.4.1",ucs2:{decode:C,encode:A},decode:P,encode:R,toASCII:function(t){return j(t,function(t){return g.test(t)?"xn--"+R(t):t})},toUnicode:function(t){return j(t,function(t){return y.test(t)?P(t.slice(4).toLowerCase()):t})}},void 0===(i=function(){return u}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(58)(t),n(35))},277:function(t,e,n){"use strict";t.exports=function(e){var n;function r(t,e){var r=[];function i(e,i,a){if(t){t--;var u=new n(function(t){t(e.apply(i,a))});return u.then(o,o),u}return new n(function(t){r.push(new function(t,e,n,r){this.resolve=t,this.fn=e,this.self=n||null,this.args=r}(t,e,i,a))})}function o(){if(t++,r.length){var e=r.shift();e.resolve(i(e.fn,e.self,e.args))}}if("function"==typeof t&&"number"==typeof e){var a=e;e=t,t=a}return"function"==typeof e?function(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);return i(e,this,t)}:function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);return i(t,this,e)}}if("number"==typeof arguments[0]||"number"==typeof arguments[1]){if("function"!=typeof(n=t.exports.Promise))throw new Error("You must provide a Promise polyfill for this library to work in older environments");return r(arguments[0],arguments[1])}return n=e,r},"function"==typeof Promise&&(t.exports.Promise=Promise)},299:function(t,e,n){"use strict";function r(t){return{info:i(t,"info"),warn:i(t,"warn"),error:i(t,"error")}}function i(t,e){return function(){var r;console.log("["+(new Date).toJSON()+"] ["+t+"] ["+e+"] "+(r=n(114)).format.apply(r,arguments))}}n.r(e),n.d(e,"forModule",function(){return r})},328:function(t,e,n){"use strict";var r=n(118),i=n(78),o=n.n(i),a=n(105),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(e){c(this,t),this._files=function(t){var e=[];return o()(regeneratorRuntime.mark(function r(){var o,a,u,s,c,l,f,h,p,d,v;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.dataTransfer.items){r.next=29;break}o=!0,a=!1,u=void 0,r.prev=4,s=Array.from(t.dataTransfer.items)[Symbol.iterator]();case 6:if(o=(c=s.next()).done){r.next=13;break}return l=c.value,r.next=10,n(l);case 10:o=!0,r.next=6;break;case 13:r.next=19;break;case 15:r.prev=15,r.t0=r.catch(4),a=!0,u=r.t0;case 19:r.prev=19,r.prev=20,!o&&s.return&&s.return();case 22:if(r.prev=22,!a){r.next=25;break}throw u;case 25:return r.finish(22);case 26:return r.finish(19);case 27:r.next=49;break;case 29:if(!t.dataTransfer.files){r.next=49;break}for(f=!0,h=!1,p=void 0,r.prev=33,d=Array.from(t.dataTransfer.files)[Symbol.iterator]();!(f=(v=d.next()).done);f=!0)i(v.value);r.next=41;break;case 37:r.prev=37,r.t1=r.catch(33),h=!0,p=r.t1;case 41:r.prev=41,r.prev=42,!f&&d.return&&d.return();case 44:if(r.prev=44,!h){r.next=47;break}throw p;case 47:return r.finish(44);case 48:return r.finish(41);case 49:return r.abrupt("return",e);case 50:case"end":return r.stop()}},r,this,[[4,15,19,27],[20,,22,26],[33,37,41,49],[42,,44,48]])}));function n(t){return o()(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.webkitGetAsEntry&&t.webkitGetAsEntry())){e.next=6;break}return e.next=4,r(n);case 4:e.next=8;break;case 6:i(t.getAsFile&&t.getAsFile());case 8:case"end":return e.stop()}},e,this)}))}function r(t){return t.isFile?function(t){return new Promise(function(e,n){t.file(e,n)}).tap(function(t){i(t)})}(t):t.isDirectory?(e=t,o()(regeneratorRuntime.mark(function t(){var n,i,o,a,u,c,l,f,h,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=[],i=e.createReader(),o=function(){return new Promise(function(t,e){i.readEntries(t,e)})};case 3:return t.next=5,o();case 5:if((a=t.sent)&&0!==a.length){t.next=8;break}return t.abrupt("break",11);case 8:n.push.apply(n,s(Array.from(a)));case 9:t.next=3;break;case 11:u=!0,c=!1,l=void 0,t.prev=14,f=n[Symbol.iterator]();case 16:if(u=(h=f.next()).done){t.next=23;break}return p=h.value,t.next=20,r(p);case 20:u=!0,t.next=16;break;case 23:t.next=29;break;case 25:t.prev=25,t.t0=t.catch(14),c=!0,l=t.t0;case 29:t.prev=29,t.prev=30,!u&&f.return&&f.return();case 32:if(t.prev=32,!c){t.next=35;break}throw l;case 35:return t.finish(32);case 36:return t.finish(29);case 37:case"end":return t.stop()}},t,this,[[14,25,29,37],[30,,32,36]])}))):void 0;var e}function i(t){t&&e.push({name:t.name,file:t})}}(e)}return u(t,[{key:"file",value:function(t){return this._files.then(function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(u.name.toLowerCase()===t.toLowerCase())return new f(u.file)}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}throw new Error("unable to find "+t)})}},{key:"fileList",get:function(){return Promise.resolve(this._files.map(function(t){return t.name}))}}]),t}(),f=function(){function t(e){c(this,t),this._file=e}return u(t,[{key:"read",value:function(t){return r.a(t,Object(a.a)(this._file).as("arraybuffer"))}},{key:"resolveUrl",value:function(){return Promise.resolve(URL.createObjectURL(this._file))}},{key:"name",get:function(){return this._file.name}}]),t}();e.a=l},331:function(t,e,n){"use strict";var r=n(164),i=n(272),o=n(71),a=n(271),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=e.notechart;this._currentSpeed=1,this._player=e,this._noteArea=new i.a(r.notes,r.barLines),this._stateful={},this._defaultData={placement:e.options.placement,scratch:e.options.scratch,key_mode:function(t,e){var n={},r=!0,i=!1,o=void 0;try{for(var a,u=t.notes[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;n[s.column]=!0}}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return("off"!==e||n[1]||n[7])&&("left"!==e||n[6]||n[7])&&("right"!==e||n[1]||n[2])?"7K":"5K"}(r,e.options.scratch),lane_lift:Math.max(0,-e.options.laneCover),lane_press:Math.max(0,e.options.laneCover)},this._gauge=Object(a.a)(e.options.gauge),this._touch3dMode="touch3d"===n.displayMode}return u(t,[{key:"update",value:function(t,e,n){var i=this._touch3dMode,a=this._player,u=this._noteArea,s=this._stateful,c=a.notechart.secondsToBeat(e),l=a.notechart.beatToPosition(c),f=a.notechart.spacingAtBeat(c),h=Object.assign({},this._defaultData),p=function(t,e){return(h[t]||(h[t]=[])).push(e)},d=this._gauge;this._currentSpeed+=(n.speed-this._currentSpeed)/3;var v=this._currentSpeed*f;h.beat=c,function(){var t=u.getVisibleNotes(l,g(),1);if(i){var e=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=r.b(e-.01),a=+n||-1,u=r.a,s=o.projection*u*(2*(a-.5)/7-1),c=o.projection*i*u*2/7;p("note3d_"+n,{key:t,y:o.y,x:s+640,width:c})},a=!0,s=!1,c=void 0;try{for(var f,h=t[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var d=f.value,v=d.note,_=v.column;if(d.height){for(var y=0,m=d.y+d.height,b=m-Math.max(0,Math.floor((m-1)/(3/128))*(3/128));b>=0&&b>=d.y;b-=3/128)e(v.id+"x"+y++,b,_,.8);e(v.id,d.y+d.height,_)}else"judged"!==n.getNoteStatus(v)&&e(v.id,d.y,_)}}catch(t){s=!0,c=t}finally{try{!a&&h.return&&h.return()}finally{if(s)throw c}}}else{var w=!0,x=!1,k=void 0;try{for(var S,E=t[Symbol.iterator]();!(w=(S=E.next()).done);w=!0){var j=S.value,C=j.note,A=C.column;if(j.height){var O=n.getNoteJudgment(C),T=n.getNoteStatus(C);p("longnote_"+A,{key:C.id,y:j.y,height:j.height,active:0!==O&&O!==o.a,missed:"judged"===T&&O===o.a})}else"judged"!==n.getNoteStatus(C)&&p("note_"+A,{key:C.id,y:j.y})}}catch(t){x=!0,k=t}finally{try{!w&&E.return&&E.return()}finally{if(x)throw k}}}}(),function(){var t=u.getVisibleBarLines(l,g(),1),e=!0,n=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var c=a.value;if(i){var f=r.b(c.y-.01);p("barlines3d",{key:c.id,y:f.y,x:f.projection*-r.a+640,width:f.projection*r.a*2})}else p("barlines",{key:c.id,y:c.y})}}catch(t){n=!0,o=t}finally{try{!e&&s.return&&s.return()}finally{if(n)throw o}}}(),function(){var e=n.input,r=!0,i=!1,o=void 0;try{for(var u,c=a.columns[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var l=u.value,f=e.get(l);h[l+"_active"]=0!==f.value?1:0,f.changed&&(0!==f.value?s[l+"_down"]=t:s[l+"_up"]=t)}}catch(t){i=!0,o=t}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}}(),function(){var e=n.notifications.judgments,r=e[e.length-1];if(r){var i=-1===r.judgment?"missed":""+r.judgment;s["judge_"+i]=t;var o=-1===r.judgment||1===r.judgment?"none":r.delta>0?"late":r.delta<0?"early":"none";s["judge_deviation_"+o]=t,s.combo=r.combo}h.score=n.stats.score}(),function(){d.update(n),d.shouldDisplay()?s.gauge_enter||(s.gauge_enter=t):s.gauge_enter&&(s.gauge_exit||(s.gauge_exit=t));h.gauge_primary=d.getPrimary(),h.gauge_secondary=d.getSecondary(),h.gauge_extra=d.getExtra()}(),function(){for(var e=n.notifications.judgments,r=0;r<e.length;r++){var i=e[r];Object(o.b)(i.judgment)||(s[i.column+"_explode"]=t)}}(),h.speed=n.speed.toFixed(1)+"x",h.stat_1=y(1),h.stat_2=y(2),h.stat_3=y(3),h.stat_4=y(4),h.stat_missed=y(o.a),h.stat_acc=(100*(n.stats.currentAccuracy||0)).toFixed(2)+"%";var _=a.notechart.bpmAtBeat(c);return h.bpm=_<1?"":Math.round(_)%1e4||"",Object.assign(h,s),h;function y(t){return n.stats.counts&&n.stats.counts[t]}function g(){return l+5/v}}}]),t}();e.a=s},332:function(t,e){var n=(e=t.exports=function(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return o[t];var i,a=String(t);return(i=n[a.toLowerCase()])?i:(i=r[a.toLowerCase()])||(1===a.length?a.charCodeAt(0):void 0)}).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(i=97;i<123;i++)n[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)n[i-48]=i;for(i=1;i<13;i++)n["f"+i]=i+111;for(i=0;i<10;i++)n["numpad "+i]=i+96;var o=e.names=e.title={};for(i in n)o[n[i]]=i;for(var a in r)n[a]=r[a]},333:function(t,e,n){"use strict";var r=n(32),i=n.n(r),o=n(273),a=n(71),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var s=function(){function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._player=e,this._columns=e.columns,this._noteBufferByColumn=i()(e.notechart.notes).sortBy("time").groupBy("column").mapValues((n=this,function(t){var e=0;return{notes:t,get startIndex(){return e},update:function(){for(;e<t.length&&"judged"===n.getNoteStatus(t[e]);)e+=1}}})).value(),this._noteResult=new Map,this._duration=e.notechart.duration,this._judge=Object(a.c)(e.notechart,{tutorial:e.options.tutorial}),console.log("GET JDG",this._judge),this.stats=new o.a(e.notechart),this.notifications={},this.speed=e.options.speed,this.finished=!1,this.tainted=!1}return u(t,[{key:"update",value:function(t,e){this._gameTime=t,this._rawInput=e,this.notifications={},this.notifications.sounds=[],this.notifications.judgments=[],this._updateInputColumnMap(),this._judgeNotes(),this._updateSpeed(),t>this._duration+1&&(this.finished=!0)}},{key:"getNoteStatus",value:function(t){var e=this._noteResult.get(t);return e?e.status:"unjudged"}},{key:"getNoteJudgment",value:function(t){var e=this._noteResult.get(t);return e?e.judgment:0}},{key:"getPlayerInput",value:function(t){return this._rawInput.get("p"+this._player.number+"_"+t)}},{key:"_updateInputColumnMap",value:function(){var t=this;this.input=new Map(this._columns.map(function(e){return[e,t.getPlayerInput(e)]}))}},{key:"_judgeNotes",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._columns[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value,a=this._noteBufferByColumn[o];if(a){var u=this.input.get(o);this._judgeColumn(a,u),a.update()}}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}}},{key:"_updateSpeed",value:function(){this.getPlayerInput("speedup").justPressed&&this._modifySpeed(1),this.getPlayerInput("speeddown").justPressed&&this._modifySpeed(-1);var t=this.getPlayerInput("pinch").value;if(t&&!this._pinching?this._pinching={start:t,speed:this.speed}:t||(this._pinching=null),t){var e=this._pinching,n=e.speed*t/e.start;this.speed=Math.max(.2,Math.round(10*n)/10)}}},{key:"_modifySpeed",value:function(t){var e=this._rawInput.get("select").value?.1:this.speed<.5?.3:.5;this.speed+=t*e,this.speed<.2&&(this.speed=.2)}},{key:"_judgeColumn",value:function(t,e){for(var n=void 0,r=void 0,i=t.notes,o=!1,a=t.startIndex;a<i.length;a++){var u=i[a];if(this._shouldJudge(u,e,t)){var s="active"!==this.getNoteStatus(u);if(n=u,r=this._judgeNote(u),window.BEMUSE_AUTOPLAY&&(o=!0),s)break}}if(e.justPressed||o)if(n)this.notifications.sounds.push({note:n,type:"hit",judgment:r});else{var c=this._getFreestyleNote(i);c&&this.notifications.sounds.push({note:c,type:"free"})}}},{key:"_getClosestNote",value:function(t){var e=this;return i.a.minBy(t,function(t){return Math.abs(e._gameTime-t.time)})}},{key:"_getFreestyleNote",value:function(t){var e=this;return i.a.minBy(t,function(t){return Math.abs(e._gameTime-t.time)+(e._gameTime<t.time-1?1e6:0)})}},{key:"_shouldJudge",value:function(t,e,n){var r=this.getNoteStatus(t);if("unjudged"===r){if(window.BEMUSE_AUTOPLAY&&this._gameTime>=t.time)return this.tainted=!0,!0;var i=Object(a.f)(this._gameTime,t.time,this._judge),o=i===a.a,u=i>0&&e.changed&&e.value;return Object(a.d)(i)&&this._getClosestNote(n.notes)!==t&&(u=!1),o||u}if("active"===r){if(window.BEMUSE_AUTOPLAY&&this._gameTime>=t.end.time)return this.tainted=!0,!0;var s=Object(a.e)(this._gameTime,t.end.time,this._judge)===a.a,c=e.changed,l="SC"===t.column,f=this._gameTime>=t.end.time;return s||c||l&&f}return!1}},{key:"_judgeNote",value:function(t){var e=this._gameTime-t.time,n=Object(a.f)(this._gameTime,t.time,this._judge),r=this._noteResult.get(t),i=!r||"unjudged"===r.status,o=r&&"active"===r.status;if(window.BEMUSE_AUTOPLAY&&n>=1&&(n=1),t.end){if(i){var u=n===a.a?"judged":"active";n===a.a&&this._setJudgment(n,e,t.column),r={status:u,judgment:n,delta:e}}else if(o){var s="SC"===t.column;e=this._gameTime-t.end.time,n=Object(a.e)(this._gameTime,t.end.time,this._judge)||a.a,s&&e>0&&(n=1),r={status:"judged",judgment:n,delta:e}}}else r={status:"judged",judgment:n,delta:e};return n===a.a&&this.notifications.sounds.push({note:t,type:"break"}),i&&n!==a.a&&this.stats.handleDelta(e),this._noteResult.set(t,r),this._setJudgment(n,e,t.column),n}},{key:"_setJudgment",value:function(t,e,n){this.stats.handleJudgment(t);var r={judgment:t,combo:this.stats.combo,delta:e,column:n};this.notifications.judgments.push(r)}},{key:"player",get:function(){return this._player}}]),t}();e.a=s},334:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,".BenchmarkPanel {\n  background: #449;\n  border: 2px solid #66e;\n  padding: 4px;\n}\n\n.BenchmarkPanel table {\n  font-size: 10px;\n}\n",""])},335:function(t,e,n){var r=n(334);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},336:function(t,e,n){"use strict";var r=n(498);e.a=Object(r.a)()},337:function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,u,s=1,c={},l=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){d(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",u=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",u,!1):t.attachEvent("onmessage",u),r=function(e){t.postMessage(a+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[s]=i,r(s),s++},h.clearImmediate=p}function p(t){delete c[t]}function d(t){if(l)setTimeout(d,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{p(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(35),n(59))},338:function(t,e,n){(function(t,r){var i;(function(){var o,a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",c="__lodash_hash_undefined__",l=500,f="__lodash_placeholder__",h=1,p=2,d=4,v=1,_=2,y=1,g=2,m=4,b=8,w=16,x=32,k=64,S=128,E=256,j=512,C=30,A="...",O=800,T=16,P=1,R=2,I=1/0,B=9007199254740991,M=1.7976931348623157e308,F=NaN,L=4294967295,N=L-1,U=L>>>1,D=[["ary",S],["bind",y],["bindKey",g],["curry",b],["curryRight",w],["flip",j],["partial",x],["partialRight",k],["rearg",E]],z="[object Arguments]",W="[object Array]",G="[object AsyncFunction]",V="[object Boolean]",H="[object Date]",q="[object DOMException]",Y="[object Error]",$="[object Function]",J="[object GeneratorFunction]",K="[object Map]",Q="[object Number]",X="[object Null]",Z="[object Object]",tt="[object Proxy]",et="[object RegExp]",nt="[object Set]",rt="[object String]",it="[object Symbol]",ot="[object Undefined]",at="[object WeakMap]",ut="[object WeakSet]",st="[object ArrayBuffer]",ct="[object DataView]",lt="[object Float32Array]",ft="[object Float64Array]",ht="[object Int8Array]",pt="[object Int16Array]",dt="[object Int32Array]",vt="[object Uint8Array]",_t="[object Uint8ClampedArray]",yt="[object Uint16Array]",gt="[object Uint32Array]",mt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xt=/&(?:amp|lt|gt|quot|#39);/g,kt=/[&<>"']/g,St=RegExp(xt.source),Et=RegExp(kt.source),jt=/<%-([\s\S]+?)%>/g,Ct=/<%([\s\S]+?)%>/g,At=/<%=([\s\S]+?)%>/g,Ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tt=/^\w*$/,Pt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rt=/[\\^$.*+?()[\]{}|]/g,It=RegExp(Rt.source),Bt=/^\s+|\s+$/g,Mt=/^\s+/,Ft=/\s+$/,Lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Nt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ut=/,? & /,Dt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zt=/\\(\\)?/g,Wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gt=/\w*$/,Vt=/^[-+]0x[0-9a-f]+$/i,Ht=/^0b[01]+$/i,qt=/^\[object .+?Constructor\]$/,Yt=/^0o[0-7]+$/i,$t=/^(?:0|[1-9]\d*)$/,Jt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kt=/($^)/,Qt=/['\n\r\u2028\u2029\\]/g,Xt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Zt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="[\\ud800-\\udfff]",ee="["+Zt+"]",ne="["+Xt+"]",re="\\d+",ie="[\\u2700-\\u27bf]",oe="[a-z\\xdf-\\xf6\\xf8-\\xff]",ae="[^\\ud800-\\udfff"+Zt+re+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ue="\\ud83c[\\udffb-\\udfff]",se="[^\\ud800-\\udfff]",ce="(?:\\ud83c[\\udde6-\\uddff]){2}",le="[\\ud800-\\udbff][\\udc00-\\udfff]",fe="[A-Z\\xc0-\\xd6\\xd8-\\xde]",he="(?:"+oe+"|"+ae+")",pe="(?:"+fe+"|"+ae+")",de="(?:"+ne+"|"+ue+")"+"?",ve="[\\ufe0e\\ufe0f]?"+de+("(?:\\u200d(?:"+[se,ce,le].join("|")+")[\\ufe0e\\ufe0f]?"+de+")*"),_e="(?:"+[ie,ce,le].join("|")+")"+ve,ye="(?:"+[se+ne+"?",ne,ce,le,te].join("|")+")",ge=RegExp("['’]","g"),me=RegExp(ne,"g"),be=RegExp(ue+"(?="+ue+")|"+ye+ve,"g"),we=RegExp([fe+"?"+oe+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ee,fe,"$"].join("|")+")",pe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ee,fe+he,"$"].join("|")+")",fe+"?"+he+"+(?:['’](?:d|ll|m|re|s|t|ve))?",fe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",re,_e].join("|"),"g"),xe=RegExp("[\\u200d\\ud800-\\udfff"+Xt+"\\ufe0e\\ufe0f]"),ke=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Se=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ee=-1,je={};je[lt]=je[ft]=je[ht]=je[pt]=je[dt]=je[vt]=je[_t]=je[yt]=je[gt]=!0,je[z]=je[W]=je[st]=je[V]=je[ct]=je[H]=je[Y]=je[$]=je[K]=je[Q]=je[Z]=je[et]=je[nt]=je[rt]=je[at]=!1;var Ce={};Ce[z]=Ce[W]=Ce[st]=Ce[ct]=Ce[V]=Ce[H]=Ce[lt]=Ce[ft]=Ce[ht]=Ce[pt]=Ce[dt]=Ce[K]=Ce[Q]=Ce[Z]=Ce[et]=Ce[nt]=Ce[rt]=Ce[it]=Ce[vt]=Ce[_t]=Ce[yt]=Ce[gt]=!0,Ce[Y]=Ce[$]=Ce[at]=!1;var Ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Oe=parseFloat,Te=parseInt,Pe="object"==typeof t&&t&&t.Object===Object&&t,Re="object"==typeof self&&self&&self.Object===Object&&self,Ie=Pe||Re||Function("return this")(),Be="object"==typeof e&&e&&!e.nodeType&&e,Me=Be&&"object"==typeof r&&r&&!r.nodeType&&r,Fe=Me&&Me.exports===Be,Le=Fe&&Pe.process,Ne=function(){try{var t=Me&&Me.require&&Me.require("util").types;return t||Le&&Le.binding&&Le.binding("util")}catch(t){}}(),Ue=Ne&&Ne.isArrayBuffer,De=Ne&&Ne.isDate,ze=Ne&&Ne.isMap,We=Ne&&Ne.isRegExp,Ge=Ne&&Ne.isSet,Ve=Ne&&Ne.isTypedArray;function He(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function qe(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Ye(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function $e(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Je(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ke(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Qe(t,e){return!!(null==t?0:t.length)&&sn(t,e,0)>-1}function Xe(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Ze(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function tn(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function en(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function nn(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function rn(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var on=hn("length");function an(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function un(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function sn(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):un(t,ln,n)}function cn(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function ln(t){return t!=t}function fn(t,e){var n=null==t?0:t.length;return n?vn(t,e)/n:F}function hn(t){return function(e){return null==e?o:e[t]}}function pn(t){return function(e){return null==t?o:t[e]}}function dn(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function vn(t,e){for(var n,r=-1,i=t.length;++r<i;){var a=e(t[r]);a!==o&&(n=n===o?a:n+a)}return n}function _n(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function yn(t){return function(e){return t(e)}}function gn(t,e){return Ze(e,function(e){return t[e]})}function mn(t,e){return t.has(e)}function bn(t,e){for(var n=-1,r=t.length;++n<r&&sn(e,t[n],0)>-1;);return n}function wn(t,e){for(var n=t.length;n--&&sn(e,t[n],0)>-1;);return n}var xn=pn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),kn=pn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Sn(t){return"\\"+Ae[t]}function En(t){return xe.test(t)}function jn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function Cn(t,e){return function(n){return t(e(n))}}function An(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==f||(t[n]=f,o[i++]=n)}return o}function On(t,e){return"__proto__"==e?o:t[e]}function Tn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Pn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Rn(t){return En(t)?function(t){var e=be.lastIndex=0;for(;be.test(t);)++e;return e}(t):on(t)}function In(t){return En(t)?function(t){return t.match(be)||[]}(t):function(t){return t.split("")}(t)}var Bn=pn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Mn=function t(e){var n,r=(e=null==e?Ie:Mn.defaults(Ie.Object(),e,Mn.pick(Ie,Se))).Array,i=e.Date,Xt=e.Error,Zt=e.Function,te=e.Math,ee=e.Object,ne=e.RegExp,re=e.String,ie=e.TypeError,oe=r.prototype,ae=Zt.prototype,ue=ee.prototype,se=e["__core-js_shared__"],ce=ae.toString,le=ue.hasOwnProperty,fe=0,he=(n=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",pe=ue.toString,de=ce.call(ee),ve=Ie._,_e=ne("^"+ce.call(le).replace(Rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ye=Fe?e.Buffer:o,be=e.Symbol,xe=e.Uint8Array,Ae=ye?ye.allocUnsafe:o,Pe=Cn(ee.getPrototypeOf,ee),Re=ee.create,Be=ue.propertyIsEnumerable,Me=oe.splice,Le=be?be.isConcatSpreadable:o,Ne=be?be.iterator:o,on=be?be.toStringTag:o,pn=function(){try{var t=Do(ee,"defineProperty");return t({},"",{}),t}catch(t){}}(),Fn=e.clearTimeout!==Ie.clearTimeout&&e.clearTimeout,Ln=i&&i.now!==Ie.Date.now&&i.now,Nn=e.setTimeout!==Ie.setTimeout&&e.setTimeout,Un=te.ceil,Dn=te.floor,zn=ee.getOwnPropertySymbols,Wn=ye?ye.isBuffer:o,Gn=e.isFinite,Vn=oe.join,Hn=Cn(ee.keys,ee),qn=te.max,Yn=te.min,$n=i.now,Jn=e.parseInt,Kn=te.random,Qn=oe.reverse,Xn=Do(e,"DataView"),Zn=Do(e,"Map"),tr=Do(e,"Promise"),er=Do(e,"Set"),nr=Do(e,"WeakMap"),rr=Do(ee,"create"),ir=nr&&new nr,or={},ar=fa(Xn),ur=fa(Zn),sr=fa(tr),cr=fa(er),lr=fa(nr),fr=be?be.prototype:o,hr=fr?fr.valueOf:o,pr=fr?fr.toString:o;function dr(t){if(Au(t)&&!yu(t)&&!(t instanceof gr)){if(t instanceof yr)return t;if(le.call(t,"__wrapped__"))return ha(t)}return new yr(t)}var vr=function(){function t(){}return function(e){if(!Cu(e))return{};if(Re)return Re(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function _r(){}function yr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function gr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=L,this.__views__=[]}function mr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function br(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function xr(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new wr;++e<n;)this.add(t[e])}function kr(t){var e=this.__data__=new br(t);this.size=e.size}function Sr(t,e){var n=yu(t),r=!n&&_u(t),i=!n&&!r&&wu(t),o=!n&&!r&&!i&&Fu(t),a=n||r||i||o,u=a?_n(t.length,re):[],s=u.length;for(var c in t)!e&&!le.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Yo(c,s))||u.push(c);return u}function Er(t){var e=t.length;return e?t[xi(0,e-1)]:o}function jr(t,e){return sa(ro(t),Mr(e,0,t.length))}function Cr(t){return sa(ro(t))}function Ar(t,e,n){(n===o||pu(t[e],n))&&(n!==o||e in t)||Ir(t,e,n)}function Or(t,e,n){var r=t[e];le.call(t,e)&&pu(r,n)&&(n!==o||e in t)||Ir(t,e,n)}function Tr(t,e){for(var n=t.length;n--;)if(pu(t[n][0],e))return n;return-1}function Pr(t,e,n,r){return Dr(t,function(t,i,o){e(r,t,n(t),o)}),r}function Rr(t,e){return t&&io(e,is(e),t)}function Ir(t,e,n){"__proto__"==e&&pn?pn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Br(t,e){for(var n=-1,i=e.length,a=r(i),u=null==t;++n<i;)a[n]=u?o:Zu(t,e[n]);return a}function Mr(t,e,n){return t==t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function Fr(t,e,n,r,i,a){var u,s=e&h,c=e&p,l=e&d;if(n&&(u=i?n(t,r,i,a):n(t)),u!==o)return u;if(!Cu(t))return t;var f=yu(t);if(f){if(u=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&le.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!s)return ro(t,u)}else{var v=Go(t),_=v==$||v==J;if(wu(t))return Qi(t,s);if(v==Z||v==z||_&&!i){if(u=c||_?{}:Ho(t),!s)return c?function(t,e){return io(t,Wo(t),e)}(t,function(t,e){return t&&io(e,os(e),t)}(u,t)):function(t,e){return io(t,zo(t),e)}(t,Rr(u,t))}else{if(!Ce[v])return i?t:{};u=function(t,e,n){var r,i,o,a=t.constructor;switch(e){case st:return Xi(t);case V:case H:return new a(+t);case ct:return function(t,e){var n=e?Xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case lt:case ft:case ht:case pt:case dt:case vt:case _t:case yt:case gt:return Zi(t,n);case K:return new a;case Q:case rt:return new a(t);case et:return(o=new(i=t).constructor(i.source,Gt.exec(i))).lastIndex=i.lastIndex,o;case nt:return new a;case it:return r=t,hr?ee(hr.call(r)):{}}}(t,v,s)}}a||(a=new kr);var y=a.get(t);if(y)return y;if(a.set(t,u),Iu(t))return t.forEach(function(r){u.add(Fr(r,e,n,r,t,a))}),u;if(Ou(t))return t.forEach(function(r,i){u.set(i,Fr(r,e,n,i,t,a))}),u;var g=f?o:(l?c?Io:Ro:c?os:is)(t);return Ye(g||t,function(r,i){g&&(r=t[i=r]),Or(u,i,Fr(r,e,n,i,t,a))}),u}function Lr(t,e,n){var r=n.length;if(null==t)return!r;for(t=ee(t);r--;){var i=n[r],a=e[i],u=t[i];if(u===o&&!(i in t)||!a(u))return!1}return!0}function Nr(t,e,n){if("function"!=typeof t)throw new ie(s);return ia(function(){t.apply(o,n)},e)}function Ur(t,e,n,r){var i=-1,o=Qe,u=!0,s=t.length,c=[],l=e.length;if(!s)return c;n&&(e=Ze(e,yn(n))),r?(o=Xe,u=!1):e.length>=a&&(o=mn,u=!1,e=new xr(e));t:for(;++i<s;){var f=t[i],h=null==n?f:n(f);if(f=r||0!==f?f:0,u&&h==h){for(var p=l;p--;)if(e[p]===h)continue t;c.push(f)}else o(e,h,r)||c.push(f)}return c}dr.templateSettings={escape:jt,evaluate:Ct,interpolate:At,variable:"",imports:{_:dr}},dr.prototype=_r.prototype,dr.prototype.constructor=dr,yr.prototype=vr(_r.prototype),yr.prototype.constructor=yr,gr.prototype=vr(_r.prototype),gr.prototype.constructor=gr,mr.prototype.clear=function(){this.__data__=rr?rr(null):{},this.size=0},mr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},mr.prototype.get=function(t){var e=this.__data__;if(rr){var n=e[t];return n===c?o:n}return le.call(e,t)?e[t]:o},mr.prototype.has=function(t){var e=this.__data__;return rr?e[t]!==o:le.call(e,t)},mr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=rr&&e===o?c:e,this},br.prototype.clear=function(){this.__data__=[],this.size=0},br.prototype.delete=function(t){var e=this.__data__,n=Tr(e,t);return!(n<0||(n==e.length-1?e.pop():Me.call(e,n,1),--this.size,0))},br.prototype.get=function(t){var e=this.__data__,n=Tr(e,t);return n<0?o:e[n][1]},br.prototype.has=function(t){return Tr(this.__data__,t)>-1},br.prototype.set=function(t,e){var n=this.__data__,r=Tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},wr.prototype.clear=function(){this.size=0,this.__data__={hash:new mr,map:new(Zn||br),string:new mr}},wr.prototype.delete=function(t){var e=No(this,t).delete(t);return this.size-=e?1:0,e},wr.prototype.get=function(t){return No(this,t).get(t)},wr.prototype.has=function(t){return No(this,t).has(t)},wr.prototype.set=function(t,e){var n=No(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},xr.prototype.add=xr.prototype.push=function(t){return this.__data__.set(t,c),this},xr.prototype.has=function(t){return this.__data__.has(t)},kr.prototype.clear=function(){this.__data__=new br,this.size=0},kr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},kr.prototype.get=function(t){return this.__data__.get(t)},kr.prototype.has=function(t){return this.__data__.has(t)},kr.prototype.set=function(t,e){var n=this.__data__;if(n instanceof br){var r=n.__data__;if(!Zn||r.length<a-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new wr(r)}return n.set(t,e),this.size=n.size,this};var Dr=uo($r),zr=uo(Jr,!0);function Wr(t,e){var n=!0;return Dr(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Gr(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],u=e(a);if(null!=u&&(s===o?u==u&&!Mu(u):n(u,s)))var s=u,c=a}return c}function Vr(t,e){var n=[];return Dr(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Hr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=qo),i||(i=[]);++o<a;){var u=t[o];e>0&&n(u)?e>1?Hr(u,e-1,n,r,i):tn(i,u):r||(i[i.length]=u)}return i}var qr=so(),Yr=so(!0);function $r(t,e){return t&&qr(t,e,is)}function Jr(t,e){return t&&Yr(t,e,is)}function Kr(t,e){return Ke(e,function(e){return Su(t[e])})}function Qr(t,e){for(var n=0,r=(e=Yi(e,t)).length;null!=t&&n<r;)t=t[la(e[n++])];return n&&n==r?t:o}function Xr(t,e,n){var r=e(t);return yu(t)?r:tn(r,n(t))}function Zr(t){return null==t?t===o?ot:X:on&&on in ee(t)?function(t){var e=le.call(t,on),n=t[on];try{t[on]=o;var r=!0}catch(t){}var i=pe.call(t);return r&&(e?t[on]=n:delete t[on]),i}(t):function(t){return pe.call(t)}(t)}function ti(t,e){return t>e}function ei(t,e){return null!=t&&le.call(t,e)}function ni(t,e){return null!=t&&e in ee(t)}function ri(t,e,n){for(var i=n?Xe:Qe,a=t[0].length,u=t.length,s=u,c=r(u),l=1/0,f=[];s--;){var h=t[s];s&&e&&(h=Ze(h,yn(e))),l=Yn(h.length,l),c[s]=!n&&(e||a>=120&&h.length>=120)?new xr(s&&h):o}h=t[0];var p=-1,d=c[0];t:for(;++p<a&&f.length<l;){var v=h[p],_=e?e(v):v;if(v=n||0!==v?v:0,!(d?mn(d,_):i(f,_,n))){for(s=u;--s;){var y=c[s];if(!(y?mn(y,_):i(t[s],_,n)))continue t}d&&d.push(_),f.push(v)}}return f}function ii(t,e,n){var r=null==(t=na(t,e=Yi(e,t)))?t:t[la(ka(e))];return null==r?o:He(r,t,n)}function oi(t){return Au(t)&&Zr(t)==z}function ai(t,e,n,r,i){return t===e||(null==t||null==e||!Au(t)&&!Au(e)?t!=t&&e!=e:function(t,e,n,r,i,a){var u=yu(t),s=yu(e),c=u?W:Go(t),l=s?W:Go(e),f=(c=c==z?Z:c)==Z,h=(l=l==z?Z:l)==Z,p=c==l;if(p&&wu(t)){if(!wu(e))return!1;u=!0,f=!1}if(p&&!f)return a||(a=new kr),u||Fu(t)?To(t,e,n,r,i,a):function(t,e,n,r,i,o,a){switch(n){case ct:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case st:return!(t.byteLength!=e.byteLength||!o(new xe(t),new xe(e)));case V:case H:case Q:return pu(+t,+e);case Y:return t.name==e.name&&t.message==e.message;case et:case rt:return t==e+"";case K:var u=jn;case nt:var s=r&v;if(u||(u=Tn),t.size!=e.size&&!s)return!1;var c=a.get(t);if(c)return c==e;r|=_,a.set(t,e);var l=To(u(t),u(e),r,i,o,a);return a.delete(t),l;case it:if(hr)return hr.call(t)==hr.call(e)}return!1}(t,e,c,n,r,i,a);if(!(n&v)){var d=f&&le.call(t,"__wrapped__"),y=h&&le.call(e,"__wrapped__");if(d||y){var g=d?t.value():t,m=y?e.value():e;return a||(a=new kr),i(g,m,n,r,a)}}return!!p&&(a||(a=new kr),function(t,e,n,r,i,a){var u=n&v,s=Ro(t),c=s.length,l=Ro(e).length;if(c!=l&&!u)return!1;for(var f=c;f--;){var h=s[f];if(!(u?h in e:le.call(e,h)))return!1}var p=a.get(t);if(p&&a.get(e))return p==e;var d=!0;a.set(t,e),a.set(e,t);for(var _=u;++f<c;){h=s[f];var y=t[h],g=e[h];if(r)var m=u?r(g,y,h,e,t,a):r(y,g,h,t,e,a);if(!(m===o?y===g||i(y,g,n,r,a):m)){d=!1;break}_||(_="constructor"==h)}if(d&&!_){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(d=!1)}return a.delete(t),a.delete(e),d}(t,e,n,r,i,a))}(t,e,n,r,ai,i))}function ui(t,e,n,r){var i=n.length,a=i,u=!r;if(null==t)return!a;for(t=ee(t);i--;){var s=n[i];if(u&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){var c=(s=n[i])[0],l=t[c],f=s[1];if(u&&s[2]){if(l===o&&!(c in t))return!1}else{var h=new kr;if(r)var p=r(l,f,c,t,e,h);if(!(p===o?ai(f,l,v|_,r,h):p))return!1}}return!0}function si(t){return!(!Cu(t)||he&&he in t)&&(Su(t)?_e:qt).test(fa(t))}function ci(t){return"function"==typeof t?t:null==t?Ts:"object"==typeof t?yu(t)?vi(t[0],t[1]):di(t):Us(t)}function li(t){if(!Xo(t))return Hn(t);var e=[];for(var n in ee(t))le.call(t,n)&&"constructor"!=n&&e.push(n);return e}function fi(t){if(!Cu(t))return function(t){var e=[];if(null!=t)for(var n in ee(t))e.push(n);return e}(t);var e=Xo(t),n=[];for(var r in t)("constructor"!=r||!e&&le.call(t,r))&&n.push(r);return n}function hi(t,e){return t<e}function pi(t,e){var n=-1,i=mu(t)?r(t.length):[];return Dr(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function di(t){var e=Uo(t);return 1==e.length&&e[0][2]?ta(e[0][0],e[0][1]):function(n){return n===t||ui(n,t,e)}}function vi(t,e){return Jo(t)&&Zo(e)?ta(la(t),e):function(n){var r=Zu(n,t);return r===o&&r===e?ts(n,t):ai(e,r,v|_)}}function _i(t,e,n,r,i){t!==e&&qr(e,function(a,u){if(Cu(a))i||(i=new kr),function(t,e,n,r,i,a,u){var s=On(t,n),c=On(e,n),l=u.get(c);if(l)Ar(t,n,l);else{var f=a?a(s,c,n+"",t,e,u):o,h=f===o;if(h){var p=yu(c),d=!p&&wu(c),v=!p&&!d&&Fu(c);f=c,p||d||v?yu(s)?f=s:bu(s)?f=ro(s):d?(h=!1,f=Qi(c,!0)):v?(h=!1,f=Zi(c,!0)):f=[]:Pu(c)||_u(c)?(f=s,_u(s)?f=Vu(s):(!Cu(s)||r&&Su(s))&&(f=Ho(c))):h=!1}h&&(u.set(c,f),i(f,c,r,a,u),u.delete(c)),Ar(t,n,f)}}(t,e,u,n,_i,r,i);else{var s=r?r(On(t,u),a,u+"",t,e,i):o;s===o&&(s=a),Ar(t,u,s)}},os)}function yi(t,e){var n=t.length;if(n)return Yo(e+=e<0?n:0,n)?t[e]:o}function gi(t,e,n){var r=-1;return e=Ze(e.length?e:[Ts],yn(Lo())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(pi(t,function(t,n,i){return{criteria:Ze(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,u=n.length;++r<a;){var s=to(i[r],o[r]);if(s){if(r>=u)return s;var c=n[r];return s*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)})}function mi(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],u=Qr(t,a);n(u,a)&&Ci(o,Yi(a,t),u)}return o}function bi(t,e,n,r){var i=r?cn:sn,o=-1,a=e.length,u=t;for(t===e&&(e=ro(e)),n&&(u=Ze(t,yn(n)));++o<a;)for(var s=0,c=e[o],l=n?n(c):c;(s=i(u,l,s,r))>-1;)u!==t&&Me.call(u,s,1),Me.call(t,s,1);return t}function wi(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Yo(i)?Me.call(t,i,1):Ui(t,i)}}return t}function xi(t,e){return t+Dn(Kn()*(e-t+1))}function ki(t,e){var n="";if(!t||e<1||e>B)return n;do{e%2&&(n+=t),(e=Dn(e/2))&&(t+=t)}while(e);return n}function Si(t,e){return oa(ea(t,e,Ts),t+"")}function Ei(t){return Er(ps(t))}function ji(t,e){var n=ps(t);return sa(n,Mr(e,0,n.length))}function Ci(t,e,n,r){if(!Cu(t))return t;for(var i=-1,a=(e=Yi(e,t)).length,u=a-1,s=t;null!=s&&++i<a;){var c=la(e[i]),l=n;if(i!=u){var f=s[c];(l=r?r(f,c,s):o)===o&&(l=Cu(f)?f:Yo(e[i+1])?[]:{})}Or(s,c,l),s=s[c]}return t}var Ai=ir?function(t,e){return ir.set(t,e),t}:Ts,Oi=pn?function(t,e){return pn(t,"toString",{configurable:!0,enumerable:!1,value:Cs(e),writable:!0})}:Ts;function Ti(t){return sa(ps(t))}function Pi(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=r(o);++i<o;)a[i]=t[i+e];return a}function Ri(t,e){var n;return Dr(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function Ii(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=U){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!Mu(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Bi(t,e,Ts,n)}function Bi(t,e,n,r){e=n(e);for(var i=0,a=null==t?0:t.length,u=e!=e,s=null===e,c=Mu(e),l=e===o;i<a;){var f=Dn((i+a)/2),h=n(t[f]),p=h!==o,d=null===h,v=h==h,_=Mu(h);if(u)var y=r||v;else y=l?v&&(r||p):s?v&&p&&(r||!d):c?v&&p&&!d&&(r||!_):!d&&!_&&(r?h<=e:h<e);y?i=f+1:a=f}return Yn(a,N)}function Mi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],u=e?e(a):a;if(!n||!pu(u,s)){var s=u;o[i++]=0===a?0:a}}return o}function Fi(t){return"number"==typeof t?t:Mu(t)?F:+t}function Li(t){if("string"==typeof t)return t;if(yu(t))return Ze(t,Li)+"";if(Mu(t))return pr?pr.call(t):"";var e=t+"";return"0"==e&&1/t==-I?"-0":e}function Ni(t,e,n){var r=-1,i=Qe,o=t.length,u=!0,s=[],c=s;if(n)u=!1,i=Xe;else if(o>=a){var l=e?null:So(t);if(l)return Tn(l);u=!1,i=mn,c=new xr}else c=e?[]:s;t:for(;++r<o;){var f=t[r],h=e?e(f):f;if(f=n||0!==f?f:0,u&&h==h){for(var p=c.length;p--;)if(c[p]===h)continue t;e&&c.push(h),s.push(f)}else i(c,h,n)||(c!==s&&c.push(h),s.push(f))}return s}function Ui(t,e){return null==(t=na(t,e=Yi(e,t)))||delete t[la(ka(e))]}function Di(t,e,n,r){return Ci(t,e,n(Qr(t,e)),r)}function zi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Pi(t,r?0:o,r?o+1:i):Pi(t,r?o+1:0,r?i:o)}function Wi(t,e){var n=t;return n instanceof gr&&(n=n.value()),en(e,function(t,e){return e.func.apply(e.thisArg,tn([t],e.args))},n)}function Gi(t,e,n){var i=t.length;if(i<2)return i?Ni(t[0]):[];for(var o=-1,a=r(i);++o<i;)for(var u=t[o],s=-1;++s<i;)s!=o&&(a[o]=Ur(a[o]||u,t[s],e,n));return Ni(Hr(a,1),e,n)}function Vi(t,e,n){for(var r=-1,i=t.length,a=e.length,u={};++r<i;){var s=r<a?e[r]:o;n(u,t[r],s)}return u}function Hi(t){return bu(t)?t:[]}function qi(t){return"function"==typeof t?t:Ts}function Yi(t,e){return yu(t)?t:Jo(t,e)?[t]:ca(Hu(t))}var $i=Si;function Ji(t,e,n){var r=t.length;return n=n===o?r:n,!e&&n>=r?t:Pi(t,e,n)}var Ki=Fn||function(t){return Ie.clearTimeout(t)};function Qi(t,e){if(e)return t.slice();var n=t.length,r=Ae?Ae(n):new t.constructor(n);return t.copy(r),r}function Xi(t){var e=new t.constructor(t.byteLength);return new xe(e).set(new xe(t)),e}function Zi(t,e){var n=e?Xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function to(t,e){if(t!==e){var n=t!==o,r=null===t,i=t==t,a=Mu(t),u=e!==o,s=null===e,c=e==e,l=Mu(e);if(!s&&!l&&!a&&t>e||a&&u&&c&&!s&&!l||r&&u&&c||!n&&c||!i)return 1;if(!r&&!a&&!l&&t<e||l&&n&&i&&!r&&!a||s&&n&&i||!u&&i||!c)return-1}return 0}function eo(t,e,n,i){for(var o=-1,a=t.length,u=n.length,s=-1,c=e.length,l=qn(a-u,0),f=r(c+l),h=!i;++s<c;)f[s]=e[s];for(;++o<u;)(h||o<a)&&(f[n[o]]=t[o]);for(;l--;)f[s++]=t[o++];return f}function no(t,e,n,i){for(var o=-1,a=t.length,u=-1,s=n.length,c=-1,l=e.length,f=qn(a-s,0),h=r(f+l),p=!i;++o<f;)h[o]=t[o];for(var d=o;++c<l;)h[d+c]=e[c];for(;++u<s;)(p||o<a)&&(h[d+n[u]]=t[o++]);return h}function ro(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function io(t,e,n,r){var i=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var s=e[a],c=r?r(n[s],t[s],s,n,t):o;c===o&&(c=t[s]),i?Ir(n,s,c):Or(n,s,c)}return n}function oo(t,e){return function(n,r){var i=yu(n)?qe:Pr,o=e?e():{};return i(n,t,Lo(r,2),o)}}function ao(t){return Si(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,u=i>2?n[2]:o;for(a=t.length>3&&"function"==typeof a?(i--,a):o,u&&$o(n[0],n[1],u)&&(a=i<3?o:a,i=1),e=ee(e);++r<i;){var s=n[r];s&&t(e,s,r,a)}return e})}function uo(t,e){return function(n,r){if(null==n)return n;if(!mu(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=ee(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function so(t){return function(e,n,r){for(var i=-1,o=ee(e),a=r(e),u=a.length;u--;){var s=a[t?u:++i];if(!1===n(o[s],s,o))break}return e}}function co(t){return function(e){var n=En(e=Hu(e))?In(e):o,r=n?n[0]:e.charAt(0),i=n?Ji(n,1).join(""):e.slice(1);return r[t]()+i}}function lo(t){return function(e){return en(Ss(_s(e).replace(ge,"")),t,"")}}function fo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=vr(t.prototype),r=t.apply(n,e);return Cu(r)?r:n}}function ho(t){return function(e,n,r){var i=ee(e);if(!mu(e)){var a=Lo(n,3);e=is(e),n=function(t){return a(i[t],t,i)}}var u=t(e,n,r);return u>-1?i[a?e[u]:u]:o}}function po(t){return Po(function(e){var n=e.length,r=n,i=yr.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new ie(s);if(i&&!u&&"wrapper"==Mo(a))var u=new yr([],!0)}for(r=u?r:n;++r<n;){var c=Mo(a=e[r]),l="wrapper"==c?Bo(a):o;u=l&&Ko(l[0])&&l[1]==(S|b|x|E)&&!l[4].length&&1==l[9]?u[Mo(l[0])].apply(u,l[3]):1==a.length&&Ko(a)?u[c]():u.thru(a)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&yu(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function vo(t,e,n,i,a,u,s,c,l,f){var h=e&S,p=e&y,d=e&g,v=e&(b|w),_=e&j,m=d?o:fo(t);return function y(){for(var g=arguments.length,b=r(g),w=g;w--;)b[w]=arguments[w];if(v)var x=Fo(y),k=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(b,x);if(i&&(b=eo(b,i,a,v)),u&&(b=no(b,u,s,v)),g-=k,v&&g<f){var S=An(b,x);return xo(t,e,vo,y.placeholder,n,b,S,c,l,f-g)}var E=p?n:this,j=d?E[t]:t;return g=b.length,c?b=function(t,e){for(var n=t.length,r=Yn(e.length,n),i=ro(t);r--;){var a=e[r];t[r]=Yo(a,n)?i[a]:o}return t}(b,c):_&&g>1&&b.reverse(),h&&l<g&&(b.length=l),this&&this!==Ie&&this instanceof y&&(j=m||fo(j)),j.apply(E,b)}}function _o(t,e){return function(n,r){return function(t,e,n,r){return $r(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}}function yo(t,e){return function(n,r){var i;if(n===o&&r===o)return e;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=Li(n),r=Li(r)):(n=Fi(n),r=Fi(r)),i=t(n,r)}return i}}function go(t){return Po(function(e){return e=Ze(e,yn(Lo())),Si(function(n){var r=this;return t(e,function(t){return He(t,r,n)})})})}function mo(t,e){var n=(e=e===o?" ":Li(e)).length;if(n<2)return n?ki(e,t):e;var r=ki(e,Un(t/Rn(e)));return En(e)?Ji(In(r),0,t).join(""):r.slice(0,t)}function bo(t){return function(e,n,i){return i&&"number"!=typeof i&&$o(e,n,i)&&(n=i=o),e=Du(e),n===o?(n=e,e=0):n=Du(n),function(t,e,n,i){for(var o=-1,a=qn(Un((e-t)/(n||1)),0),u=r(a);a--;)u[i?a:++o]=t,t+=n;return u}(e,n,i=i===o?e<n?1:-1:Du(i),t)}}function wo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Gu(e),n=Gu(n)),t(e,n)}}function xo(t,e,n,r,i,a,u,s,c,l){var f=e&b;e|=f?x:k,(e&=~(f?k:x))&m||(e&=~(y|g));var h=[t,e,i,f?a:o,f?u:o,f?o:a,f?o:u,s,c,l],p=n.apply(o,h);return Ko(t)&&ra(p,h),p.placeholder=r,aa(p,t,e)}function ko(t){var e=te[t];return function(t,n){if(t=Gu(t),n=null==n?0:Yn(zu(n),292)){var r=(Hu(t)+"e").split("e");return+((r=(Hu(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var So=er&&1/Tn(new er([,-0]))[1]==I?function(t){return new er(t)}:Ms;function Eo(t){return function(e){var n=Go(e);return n==K?jn(e):n==nt?Pn(e):function(t,e){return Ze(e,function(e){return[e,t[e]]})}(e,t(e))}}function jo(t,e,n,i,a,u,c,l){var h=e&g;if(!h&&"function"!=typeof t)throw new ie(s);var p=i?i.length:0;if(p||(e&=~(x|k),i=a=o),c=c===o?c:qn(zu(c),0),l=l===o?l:zu(l),p-=a?a.length:0,e&k){var d=i,v=a;i=a=o}var _=h?o:Bo(t),j=[t,e,n,i,a,d,v,u,c,l];if(_&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<(y|g|S),a=r==S&&n==b||r==S&&n==E&&t[7].length<=e[8]||r==(S|E)&&e[7].length<=e[8]&&n==b;if(!o&&!a)return t;r&y&&(t[2]=e[2],i|=n&y?0:m);var u=e[3];if(u){var s=t[3];t[3]=s?eo(s,u,e[4]):u,t[4]=s?An(t[3],f):e[4]}(u=e[5])&&(s=t[5],t[5]=s?no(s,u,e[6]):u,t[6]=s?An(t[5],f):e[6]),(u=e[7])&&(t[7]=u),r&S&&(t[8]=null==t[8]?e[8]:Yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(j,_),t=j[0],e=j[1],n=j[2],i=j[3],a=j[4],!(l=j[9]=j[9]===o?h?0:t.length:qn(j[9]-p,0))&&e&(b|w)&&(e&=~(b|w)),e&&e!=y)C=e==b||e==w?function(t,e,n){var i=fo(t);return function a(){for(var u=arguments.length,s=r(u),c=u,l=Fo(a);c--;)s[c]=arguments[c];var f=u<3&&s[0]!==l&&s[u-1]!==l?[]:An(s,l);return(u-=f.length)<n?xo(t,e,vo,a.placeholder,o,s,f,o,o,n-u):He(this&&this!==Ie&&this instanceof a?i:t,this,s)}}(t,e,l):e!=x&&e!=(y|x)||a.length?vo.apply(o,j):function(t,e,n,i){var o=e&y,a=fo(t);return function e(){for(var u=-1,s=arguments.length,c=-1,l=i.length,f=r(l+s),h=this&&this!==Ie&&this instanceof e?a:t;++c<l;)f[c]=i[c];for(;s--;)f[c++]=arguments[++u];return He(h,o?n:this,f)}}(t,e,n,i);else var C=function(t,e,n){var r=e&y,i=fo(t);return function e(){return(this&&this!==Ie&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return aa((_?Ai:ra)(C,j),t,e)}function Co(t,e,n,r){return t===o||pu(t,ue[n])&&!le.call(r,n)?e:t}function Ao(t,e,n,r,i,a){return Cu(t)&&Cu(e)&&(a.set(e,t),_i(t,e,o,Ao,a),a.delete(e)),t}function Oo(t){return Pu(t)?o:t}function To(t,e,n,r,i,a){var u=n&v,s=t.length,c=e.length;if(s!=c&&!(u&&c>s))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var f=-1,h=!0,p=n&_?new xr:o;for(a.set(t,e),a.set(e,t);++f<s;){var d=t[f],y=e[f];if(r)var g=u?r(y,d,f,e,t,a):r(d,y,f,t,e,a);if(g!==o){if(g)continue;h=!1;break}if(p){if(!rn(e,function(t,e){if(!mn(p,e)&&(d===t||i(d,t,n,r,a)))return p.push(e)})){h=!1;break}}else if(d!==y&&!i(d,y,n,r,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function Po(t){return oa(ea(t,o,ga),t+"")}function Ro(t){return Xr(t,is,zo)}function Io(t){return Xr(t,os,Wo)}var Bo=ir?function(t){return ir.get(t)}:Ms;function Mo(t){for(var e=t.name+"",n=or[e],r=le.call(or,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Fo(t){return(le.call(dr,"placeholder")?dr:t).placeholder}function Lo(){var t=dr.iteratee||Ps;return t=t===Ps?ci:t,arguments.length?t(arguments[0],arguments[1]):t}function No(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Uo(t){for(var e=is(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Zo(i)]}return e}function Do(t,e){var n=function(t,e){return null==t?o:t[e]}(t,e);return si(n)?n:o}var zo=zn?function(t){return null==t?[]:(t=ee(t),Ke(zn(t),function(e){return Be.call(t,e)}))}:Ws,Wo=zn?function(t){for(var e=[];t;)tn(e,zo(t)),t=Pe(t);return e}:Ws,Go=Zr;function Vo(t,e,n){for(var r=-1,i=(e=Yi(e,t)).length,o=!1;++r<i;){var a=la(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ju(i)&&Yo(a,i)&&(yu(t)||_u(t))}function Ho(t){return"function"!=typeof t.constructor||Xo(t)?{}:vr(Pe(t))}function qo(t){return yu(t)||_u(t)||!!(Le&&t&&t[Le])}function Yo(t,e){var n=typeof t;return!!(e=null==e?B:e)&&("number"==n||"symbol"!=n&&$t.test(t))&&t>-1&&t%1==0&&t<e}function $o(t,e,n){if(!Cu(n))return!1;var r=typeof e;return!!("number"==r?mu(n)&&Yo(e,n.length):"string"==r&&e in n)&&pu(n[e],t)}function Jo(t,e){if(yu(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Mu(t))||Tt.test(t)||!Ot.test(t)||null!=e&&t in ee(e)}function Ko(t){var e=Mo(t),n=dr[e];if("function"!=typeof n||!(e in gr.prototype))return!1;if(t===n)return!0;var r=Bo(n);return!!r&&t===r[0]}(Xn&&Go(new Xn(new ArrayBuffer(1)))!=ct||Zn&&Go(new Zn)!=K||tr&&"[object Promise]"!=Go(tr.resolve())||er&&Go(new er)!=nt||nr&&Go(new nr)!=at)&&(Go=function(t){var e=Zr(t),n=e==Z?t.constructor:o,r=n?fa(n):"";if(r)switch(r){case ar:return ct;case ur:return K;case sr:return"[object Promise]";case cr:return nt;case lr:return at}return e});var Qo=se?Su:Gs;function Xo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ue)}function Zo(t){return t==t&&!Cu(t)}function ta(t,e){return function(n){return null!=n&&n[t]===e&&(e!==o||t in ee(n))}}function ea(t,e,n){return e=qn(e===o?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=qn(i.length-e,0),u=r(a);++o<a;)u[o]=i[e+o];o=-1;for(var s=r(e+1);++o<e;)s[o]=i[o];return s[e]=n(u),He(t,this,s)}}function na(t,e){return e.length<2?t:Qr(t,Pi(e,0,-1))}var ra=ua(Ai),ia=Nn||function(t,e){return Ie.setTimeout(t,e)},oa=ua(Oi);function aa(t,e,n){var r=e+"";return oa(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Lt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ye(D,function(n){var r="_."+n[0];e&n[1]&&!Qe(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(Nt);return e?e[1].split(Ut):[]}(r),n)))}function ua(t){var e=0,n=0;return function(){var r=$n(),i=T-(r-n);if(n=r,i>0){if(++e>=O)return arguments[0]}else e=0;return t.apply(o,arguments)}}function sa(t,e){var n=-1,r=t.length,i=r-1;for(e=e===o?r:e;++n<e;){var a=xi(n,i),u=t[a];t[a]=t[n],t[n]=u}return t.length=e,t}var ca=function(t){var e=uu(t,function(t){return n.size===l&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Pt,function(t,n,r,i){e.push(r?i.replace(zt,"$1"):n||t)}),e});function la(t){if("string"==typeof t||Mu(t))return t;var e=t+"";return"0"==e&&1/t==-I?"-0":e}function fa(t){if(null!=t){try{return ce.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ha(t){if(t instanceof gr)return t.clone();var e=new yr(t.__wrapped__,t.__chain__);return e.__actions__=ro(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var pa=Si(function(t,e){return bu(t)?Ur(t,Hr(e,1,bu,!0)):[]}),da=Si(function(t,e){var n=ka(e);return bu(n)&&(n=o),bu(t)?Ur(t,Hr(e,1,bu,!0),Lo(n,2)):[]}),va=Si(function(t,e){var n=ka(e);return bu(n)&&(n=o),bu(t)?Ur(t,Hr(e,1,bu,!0),o,n):[]});function _a(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:zu(n);return i<0&&(i=qn(r+i,0)),un(t,Lo(e,3),i)}function ya(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==o&&(i=zu(n),i=n<0?qn(r+i,0):Yn(i,r-1)),un(t,Lo(e,3),i,!0)}function ga(t){return null!=t&&t.length?Hr(t,1):[]}function ma(t){return t&&t.length?t[0]:o}var ba=Si(function(t){var e=Ze(t,Hi);return e.length&&e[0]===t[0]?ri(e):[]}),wa=Si(function(t){var e=ka(t),n=Ze(t,Hi);return e===ka(n)?e=o:n.pop(),n.length&&n[0]===t[0]?ri(n,Lo(e,2)):[]}),xa=Si(function(t){var e=ka(t),n=Ze(t,Hi);return(e="function"==typeof e?e:o)&&n.pop(),n.length&&n[0]===t[0]?ri(n,o,e):[]});function ka(t){var e=null==t?0:t.length;return e?t[e-1]:o}var Sa=Si(Ea);function Ea(t,e){return t&&t.length&&e&&e.length?bi(t,e):t}var ja=Po(function(t,e){var n=null==t?0:t.length,r=Br(t,e);return wi(t,Ze(e,function(t){return Yo(t,n)?+t:t}).sort(to)),r});function Ca(t){return null==t?t:Qn.call(t)}var Aa=Si(function(t){return Ni(Hr(t,1,bu,!0))}),Oa=Si(function(t){var e=ka(t);return bu(e)&&(e=o),Ni(Hr(t,1,bu,!0),Lo(e,2))}),Ta=Si(function(t){var e=ka(t);return e="function"==typeof e?e:o,Ni(Hr(t,1,bu,!0),o,e)});function Pa(t){if(!t||!t.length)return[];var e=0;return t=Ke(t,function(t){if(bu(t))return e=qn(t.length,e),!0}),_n(e,function(e){return Ze(t,hn(e))})}function Ra(t,e){if(!t||!t.length)return[];var n=Pa(t);return null==e?n:Ze(n,function(t){return He(e,o,t)})}var Ia=Si(function(t,e){return bu(t)?Ur(t,e):[]}),Ba=Si(function(t){return Gi(Ke(t,bu))}),Ma=Si(function(t){var e=ka(t);return bu(e)&&(e=o),Gi(Ke(t,bu),Lo(e,2))}),Fa=Si(function(t){var e=ka(t);return e="function"==typeof e?e:o,Gi(Ke(t,bu),o,e)}),La=Si(Pa);var Na=Si(function(t){var e=t.length,n=e>1?t[e-1]:o;return Ra(t,n="function"==typeof n?(t.pop(),n):o)});function Ua(t){var e=dr(t);return e.__chain__=!0,e}function Da(t,e){return e(t)}var za=Po(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Br(e,t)};return!(e>1||this.__actions__.length)&&r instanceof gr&&Yo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Da,args:[i],thisArg:o}),new yr(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(o),t})):this.thru(i)});var Wa=oo(function(t,e,n){le.call(t,n)?++t[n]:Ir(t,n,1)});var Ga=ho(_a),Va=ho(ya);function Ha(t,e){return(yu(t)?Ye:Dr)(t,Lo(e,3))}function qa(t,e){return(yu(t)?$e:zr)(t,Lo(e,3))}var Ya=oo(function(t,e,n){le.call(t,n)?t[n].push(e):Ir(t,n,[e])});var $a=Si(function(t,e,n){var i=-1,o="function"==typeof e,a=mu(t)?r(t.length):[];return Dr(t,function(t){a[++i]=o?He(e,t,n):ii(t,e,n)}),a}),Ja=oo(function(t,e,n){Ir(t,n,e)});function Ka(t,e){return(yu(t)?Ze:pi)(t,Lo(e,3))}var Qa=oo(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Xa=Si(function(t,e){if(null==t)return[];var n=e.length;return n>1&&$o(t,e[0],e[1])?e=[]:n>2&&$o(e[0],e[1],e[2])&&(e=[e[0]]),gi(t,Hr(e,1),[])}),Za=Ln||function(){return Ie.Date.now()};function tu(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,jo(t,S,o,o,o,o,e)}function eu(t,e){var n;if("function"!=typeof e)throw new ie(s);return t=zu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var nu=Si(function(t,e,n){var r=y;if(n.length){var i=An(n,Fo(nu));r|=x}return jo(t,r,e,n,i)}),ru=Si(function(t,e,n){var r=y|g;if(n.length){var i=An(n,Fo(ru));r|=x}return jo(e,r,t,n,i)});function iu(t,e,n){var r,i,a,u,c,l,f=0,h=!1,p=!1,d=!0;if("function"!=typeof t)throw new ie(s);function v(e){var n=r,a=i;return r=i=o,f=e,u=t.apply(a,n)}function _(t){var n=t-l;return l===o||n>=e||n<0||p&&t-f>=a}function y(){var t=Za();if(_(t))return g(t);c=ia(y,function(t){var n=e-(t-l);return p?Yn(n,a-(t-f)):n}(t))}function g(t){return c=o,d&&r?v(t):(r=i=o,u)}function m(){var t=Za(),n=_(t);if(r=arguments,i=this,l=t,n){if(c===o)return function(t){return f=t,c=ia(y,e),h?v(t):u}(l);if(p)return c=ia(y,e),v(l)}return c===o&&(c=ia(y,e)),u}return e=Gu(e)||0,Cu(n)&&(h=!!n.leading,a=(p="maxWait"in n)?qn(Gu(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),m.cancel=function(){c!==o&&Ki(c),f=0,r=l=i=c=o},m.flush=function(){return c===o?u:g(Za())},m}var ou=Si(function(t,e){return Nr(t,1,e)}),au=Si(function(t,e,n){return Nr(t,Gu(e)||0,n)});function uu(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ie(s);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(uu.Cache||wr),n}function su(t){if("function"!=typeof t)throw new ie(s);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}uu.Cache=wr;var cu=$i(function(t,e){var n=(e=1==e.length&&yu(e[0])?Ze(e[0],yn(Lo())):Ze(Hr(e,1),yn(Lo()))).length;return Si(function(r){for(var i=-1,o=Yn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return He(t,this,r)})}),lu=Si(function(t,e){var n=An(e,Fo(lu));return jo(t,x,o,e,n)}),fu=Si(function(t,e){var n=An(e,Fo(fu));return jo(t,k,o,e,n)}),hu=Po(function(t,e){return jo(t,E,o,o,o,e)});function pu(t,e){return t===e||t!=t&&e!=e}var du=wo(ti),vu=wo(function(t,e){return t>=e}),_u=oi(function(){return arguments}())?oi:function(t){return Au(t)&&le.call(t,"callee")&&!Be.call(t,"callee")},yu=r.isArray,gu=Ue?yn(Ue):function(t){return Au(t)&&Zr(t)==st};function mu(t){return null!=t&&ju(t.length)&&!Su(t)}function bu(t){return Au(t)&&mu(t)}var wu=Wn||Gs,xu=De?yn(De):function(t){return Au(t)&&Zr(t)==H};function ku(t){if(!Au(t))return!1;var e=Zr(t);return e==Y||e==q||"string"==typeof t.message&&"string"==typeof t.name&&!Pu(t)}function Su(t){if(!Cu(t))return!1;var e=Zr(t);return e==$||e==J||e==G||e==tt}function Eu(t){return"number"==typeof t&&t==zu(t)}function ju(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=B}function Cu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Au(t){return null!=t&&"object"==typeof t}var Ou=ze?yn(ze):function(t){return Au(t)&&Go(t)==K};function Tu(t){return"number"==typeof t||Au(t)&&Zr(t)==Q}function Pu(t){if(!Au(t)||Zr(t)!=Z)return!1;var e=Pe(t);if(null===e)return!0;var n=le.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ce.call(n)==de}var Ru=We?yn(We):function(t){return Au(t)&&Zr(t)==et};var Iu=Ge?yn(Ge):function(t){return Au(t)&&Go(t)==nt};function Bu(t){return"string"==typeof t||!yu(t)&&Au(t)&&Zr(t)==rt}function Mu(t){return"symbol"==typeof t||Au(t)&&Zr(t)==it}var Fu=Ve?yn(Ve):function(t){return Au(t)&&ju(t.length)&&!!je[Zr(t)]};var Lu=wo(hi),Nu=wo(function(t,e){return t<=e});function Uu(t){if(!t)return[];if(mu(t))return Bu(t)?In(t):ro(t);if(Ne&&t[Ne])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Ne]());var e=Go(t);return(e==K?jn:e==nt?Tn:ps)(t)}function Du(t){return t?(t=Gu(t))===I||t===-I?(t<0?-1:1)*M:t==t?t:0:0===t?t:0}function zu(t){var e=Du(t),n=e%1;return e==e?n?e-n:e:0}function Wu(t){return t?Mr(zu(t),0,L):0}function Gu(t){if("number"==typeof t)return t;if(Mu(t))return F;if(Cu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Cu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Bt,"");var n=Ht.test(t);return n||Yt.test(t)?Te(t.slice(2),n?2:8):Vt.test(t)?F:+t}function Vu(t){return io(t,os(t))}function Hu(t){return null==t?"":Li(t)}var qu=ao(function(t,e){if(Xo(e)||mu(e))io(e,is(e),t);else for(var n in e)le.call(e,n)&&Or(t,n,e[n])}),Yu=ao(function(t,e){io(e,os(e),t)}),$u=ao(function(t,e,n,r){io(e,os(e),t,r)}),Ju=ao(function(t,e,n,r){io(e,is(e),t,r)}),Ku=Po(Br);var Qu=Si(function(t,e){t=ee(t);var n=-1,r=e.length,i=r>2?e[2]:o;for(i&&$o(e[0],e[1],i)&&(r=1);++n<r;)for(var a=e[n],u=os(a),s=-1,c=u.length;++s<c;){var l=u[s],f=t[l];(f===o||pu(f,ue[l])&&!le.call(t,l))&&(t[l]=a[l])}return t}),Xu=Si(function(t){return t.push(o,Ao),He(us,o,t)});function Zu(t,e,n){var r=null==t?o:Qr(t,e);return r===o?n:r}function ts(t,e){return null!=t&&Vo(t,e,ni)}var es=_o(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=pe.call(e)),t[e]=n},Cs(Ts)),ns=_o(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=pe.call(e)),le.call(t,e)?t[e].push(n):t[e]=[n]},Lo),rs=Si(ii);function is(t){return mu(t)?Sr(t):li(t)}function os(t){return mu(t)?Sr(t,!0):fi(t)}var as=ao(function(t,e,n){_i(t,e,n)}),us=ao(function(t,e,n,r){_i(t,e,n,r)}),ss=Po(function(t,e){var n={};if(null==t)return n;var r=!1;e=Ze(e,function(e){return e=Yi(e,t),r||(r=e.length>1),e}),io(t,Io(t),n),r&&(n=Fr(n,h|p|d,Oo));for(var i=e.length;i--;)Ui(n,e[i]);return n});var cs=Po(function(t,e){return null==t?{}:function(t,e){return mi(t,e,function(e,n){return ts(t,n)})}(t,e)});function ls(t,e){if(null==t)return{};var n=Ze(Io(t),function(t){return[t]});return e=Lo(e),mi(t,n,function(t,n){return e(t,n[0])})}var fs=Eo(is),hs=Eo(os);function ps(t){return null==t?[]:gn(t,is(t))}var ds=lo(function(t,e,n){return e=e.toLowerCase(),t+(n?vs(e):e)});function vs(t){return ks(Hu(t).toLowerCase())}function _s(t){return(t=Hu(t))&&t.replace(Jt,xn).replace(me,"")}var ys=lo(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),gs=lo(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),ms=co("toLowerCase");var bs=lo(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var ws=lo(function(t,e,n){return t+(n?" ":"")+ks(e)});var xs=lo(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),ks=co("toUpperCase");function Ss(t,e,n){return t=Hu(t),(e=n?o:e)===o?function(t){return ke.test(t)}(t)?function(t){return t.match(we)||[]}(t):function(t){return t.match(Dt)||[]}(t):t.match(e)||[]}var Es=Si(function(t,e){try{return He(t,o,e)}catch(t){return ku(t)?t:new Xt(t)}}),js=Po(function(t,e){return Ye(e,function(e){e=la(e),Ir(t,e,nu(t[e],t))}),t});function Cs(t){return function(){return t}}var As=po(),Os=po(!0);function Ts(t){return t}function Ps(t){return ci("function"==typeof t?t:Fr(t,h))}var Rs=Si(function(t,e){return function(n){return ii(n,t,e)}}),Is=Si(function(t,e){return function(n){return ii(t,n,e)}});function Bs(t,e,n){var r=is(e),i=Kr(e,r);null!=n||Cu(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Kr(e,is(e)));var o=!(Cu(n)&&"chain"in n&&!n.chain),a=Su(t);return Ye(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=ro(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,tn([this.value()],arguments))})}),t}function Ms(){}var Fs=go(Ze),Ls=go(Je),Ns=go(rn);function Us(t){return Jo(t)?hn(la(t)):function(t){return function(e){return Qr(e,t)}}(t)}var Ds=bo(),zs=bo(!0);function Ws(){return[]}function Gs(){return!1}var Vs=yo(function(t,e){return t+e},0),Hs=ko("ceil"),qs=yo(function(t,e){return t/e},1),Ys=ko("floor");var $s,Js=yo(function(t,e){return t*e},1),Ks=ko("round"),Qs=yo(function(t,e){return t-e},0);return dr.after=function(t,e){if("function"!=typeof e)throw new ie(s);return t=zu(t),function(){if(--t<1)return e.apply(this,arguments)}},dr.ary=tu,dr.assign=qu,dr.assignIn=Yu,dr.assignInWith=$u,dr.assignWith=Ju,dr.at=Ku,dr.before=eu,dr.bind=nu,dr.bindAll=js,dr.bindKey=ru,dr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return yu(t)?t:[t]},dr.chain=Ua,dr.chunk=function(t,e,n){e=(n?$o(t,e,n):e===o)?1:qn(zu(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,u=0,s=r(Un(i/e));a<i;)s[u++]=Pi(t,a,a+=e);return s},dr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},dr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return tn(yu(n)?ro(n):[n],Hr(e,1))},dr.cond=function(t){var e=null==t?0:t.length,n=Lo();return t=e?Ze(t,function(t){if("function"!=typeof t[1])throw new ie(s);return[n(t[0]),t[1]]}):[],Si(function(n){for(var r=-1;++r<e;){var i=t[r];if(He(i[0],this,n))return He(i[1],this,n)}})},dr.conforms=function(t){return function(t){var e=is(t);return function(n){return Lr(n,t,e)}}(Fr(t,h))},dr.constant=Cs,dr.countBy=Wa,dr.create=function(t,e){var n=vr(t);return null==e?n:Rr(n,e)},dr.curry=function t(e,n,r){var i=jo(e,b,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},dr.curryRight=function t(e,n,r){var i=jo(e,w,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},dr.debounce=iu,dr.defaults=Qu,dr.defaultsDeep=Xu,dr.defer=ou,dr.delay=au,dr.difference=pa,dr.differenceBy=da,dr.differenceWith=va,dr.drop=function(t,e,n){var r=null==t?0:t.length;return r?Pi(t,(e=n||e===o?1:zu(e))<0?0:e,r):[]},dr.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Pi(t,0,(e=r-(e=n||e===o?1:zu(e)))<0?0:e):[]},dr.dropRightWhile=function(t,e){return t&&t.length?zi(t,Lo(e,3),!0,!0):[]},dr.dropWhile=function(t,e){return t&&t.length?zi(t,Lo(e,3),!0):[]},dr.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&$o(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=zu(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:zu(r))<0&&(r+=i),r=n>r?0:Wu(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},dr.filter=function(t,e){return(yu(t)?Ke:Vr)(t,Lo(e,3))},dr.flatMap=function(t,e){return Hr(Ka(t,e),1)},dr.flatMapDeep=function(t,e){return Hr(Ka(t,e),I)},dr.flatMapDepth=function(t,e,n){return n=n===o?1:zu(n),Hr(Ka(t,e),n)},dr.flatten=ga,dr.flattenDeep=function(t){return null!=t&&t.length?Hr(t,I):[]},dr.flattenDepth=function(t,e){return null!=t&&t.length?Hr(t,e=e===o?1:zu(e)):[]},dr.flip=function(t){return jo(t,j)},dr.flow=As,dr.flowRight=Os,dr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},dr.functions=function(t){return null==t?[]:Kr(t,is(t))},dr.functionsIn=function(t){return null==t?[]:Kr(t,os(t))},dr.groupBy=Ya,dr.initial=function(t){return null!=t&&t.length?Pi(t,0,-1):[]},dr.intersection=ba,dr.intersectionBy=wa,dr.intersectionWith=xa,dr.invert=es,dr.invertBy=ns,dr.invokeMap=$a,dr.iteratee=Ps,dr.keyBy=Ja,dr.keys=is,dr.keysIn=os,dr.map=Ka,dr.mapKeys=function(t,e){var n={};return e=Lo(e,3),$r(t,function(t,r,i){Ir(n,e(t,r,i),t)}),n},dr.mapValues=function(t,e){var n={};return e=Lo(e,3),$r(t,function(t,r,i){Ir(n,r,e(t,r,i))}),n},dr.matches=function(t){return di(Fr(t,h))},dr.matchesProperty=function(t,e){return vi(t,Fr(e,h))},dr.memoize=uu,dr.merge=as,dr.mergeWith=us,dr.method=Rs,dr.methodOf=Is,dr.mixin=Bs,dr.negate=su,dr.nthArg=function(t){return t=zu(t),Si(function(e){return yi(e,t)})},dr.omit=ss,dr.omitBy=function(t,e){return ls(t,su(Lo(e)))},dr.once=function(t){return eu(2,t)},dr.orderBy=function(t,e,n,r){return null==t?[]:(yu(e)||(e=null==e?[]:[e]),yu(n=r?o:n)||(n=null==n?[]:[n]),gi(t,e,n))},dr.over=Fs,dr.overArgs=cu,dr.overEvery=Ls,dr.overSome=Ns,dr.partial=lu,dr.partialRight=fu,dr.partition=Qa,dr.pick=cs,dr.pickBy=ls,dr.property=Us,dr.propertyOf=function(t){return function(e){return null==t?o:Qr(t,e)}},dr.pull=Sa,dr.pullAll=Ea,dr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?bi(t,e,Lo(n,2)):t},dr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?bi(t,e,o,n):t},dr.pullAt=ja,dr.range=Ds,dr.rangeRight=zs,dr.rearg=hu,dr.reject=function(t,e){return(yu(t)?Ke:Vr)(t,su(Lo(e,3)))},dr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Lo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return wi(t,i),n},dr.rest=function(t,e){if("function"!=typeof t)throw new ie(s);return Si(t,e=e===o?e:zu(e))},dr.reverse=Ca,dr.sampleSize=function(t,e,n){return e=(n?$o(t,e,n):e===o)?1:zu(e),(yu(t)?jr:ji)(t,e)},dr.set=function(t,e,n){return null==t?t:Ci(t,e,n)},dr.setWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:Ci(t,e,n,r)},dr.shuffle=function(t){return(yu(t)?Cr:Ti)(t)},dr.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&$o(t,e,n)?(e=0,n=r):(e=null==e?0:zu(e),n=n===o?r:zu(n)),Pi(t,e,n)):[]},dr.sortBy=Xa,dr.sortedUniq=function(t){return t&&t.length?Mi(t):[]},dr.sortedUniqBy=function(t,e){return t&&t.length?Mi(t,Lo(e,2)):[]},dr.split=function(t,e,n){return n&&"number"!=typeof n&&$o(t,e,n)&&(e=n=o),(n=n===o?L:n>>>0)?(t=Hu(t))&&("string"==typeof e||null!=e&&!Ru(e))&&!(e=Li(e))&&En(t)?Ji(In(t),0,n):t.split(e,n):[]},dr.spread=function(t,e){if("function"!=typeof t)throw new ie(s);return e=null==e?0:qn(zu(e),0),Si(function(n){var r=n[e],i=Ji(n,0,e);return r&&tn(i,r),He(t,this,i)})},dr.tail=function(t){var e=null==t?0:t.length;return e?Pi(t,1,e):[]},dr.take=function(t,e,n){return t&&t.length?Pi(t,0,(e=n||e===o?1:zu(e))<0?0:e):[]},dr.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Pi(t,(e=r-(e=n||e===o?1:zu(e)))<0?0:e,r):[]},dr.takeRightWhile=function(t,e){return t&&t.length?zi(t,Lo(e,3),!1,!0):[]},dr.takeWhile=function(t,e){return t&&t.length?zi(t,Lo(e,3)):[]},dr.tap=function(t,e){return e(t),t},dr.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new ie(s);return Cu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),iu(t,e,{leading:r,maxWait:e,trailing:i})},dr.thru=Da,dr.toArray=Uu,dr.toPairs=fs,dr.toPairsIn=hs,dr.toPath=function(t){return yu(t)?Ze(t,la):Mu(t)?[t]:ro(ca(Hu(t)))},dr.toPlainObject=Vu,dr.transform=function(t,e,n){var r=yu(t),i=r||wu(t)||Fu(t);if(e=Lo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Cu(t)&&Su(o)?vr(Pe(t)):{}}return(i?Ye:$r)(t,function(t,r,i){return e(n,t,r,i)}),n},dr.unary=function(t){return tu(t,1)},dr.union=Aa,dr.unionBy=Oa,dr.unionWith=Ta,dr.uniq=function(t){return t&&t.length?Ni(t):[]},dr.uniqBy=function(t,e){return t&&t.length?Ni(t,Lo(e,2)):[]},dr.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?Ni(t,o,e):[]},dr.unset=function(t,e){return null==t||Ui(t,e)},dr.unzip=Pa,dr.unzipWith=Ra,dr.update=function(t,e,n){return null==t?t:Di(t,e,qi(n))},dr.updateWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:Di(t,e,qi(n),r)},dr.values=ps,dr.valuesIn=function(t){return null==t?[]:gn(t,os(t))},dr.without=Ia,dr.words=Ss,dr.wrap=function(t,e){return lu(qi(e),t)},dr.xor=Ba,dr.xorBy=Ma,dr.xorWith=Fa,dr.zip=La,dr.zipObject=function(t,e){return Vi(t||[],e||[],Or)},dr.zipObjectDeep=function(t,e){return Vi(t||[],e||[],Ci)},dr.zipWith=Na,dr.entries=fs,dr.entriesIn=hs,dr.extend=Yu,dr.extendWith=$u,Bs(dr,dr),dr.add=Vs,dr.attempt=Es,dr.camelCase=ds,dr.capitalize=vs,dr.ceil=Hs,dr.clamp=function(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=(n=Gu(n))==n?n:0),e!==o&&(e=(e=Gu(e))==e?e:0),Mr(Gu(t),e,n)},dr.clone=function(t){return Fr(t,d)},dr.cloneDeep=function(t){return Fr(t,h|d)},dr.cloneDeepWith=function(t,e){return Fr(t,h|d,e="function"==typeof e?e:o)},dr.cloneWith=function(t,e){return Fr(t,d,e="function"==typeof e?e:o)},dr.conformsTo=function(t,e){return null==e||Lr(t,e,is(e))},dr.deburr=_s,dr.defaultTo=function(t,e){return null==t||t!=t?e:t},dr.divide=qs,dr.endsWith=function(t,e,n){t=Hu(t),e=Li(e);var r=t.length,i=n=n===o?r:Mr(zu(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},dr.eq=pu,dr.escape=function(t){return(t=Hu(t))&&Et.test(t)?t.replace(kt,kn):t},dr.escapeRegExp=function(t){return(t=Hu(t))&&It.test(t)?t.replace(Rt,"\\$&"):t},dr.every=function(t,e,n){var r=yu(t)?Je:Wr;return n&&$o(t,e,n)&&(e=o),r(t,Lo(e,3))},dr.find=Ga,dr.findIndex=_a,dr.findKey=function(t,e){return an(t,Lo(e,3),$r)},dr.findLast=Va,dr.findLastIndex=ya,dr.findLastKey=function(t,e){return an(t,Lo(e,3),Jr)},dr.floor=Ys,dr.forEach=Ha,dr.forEachRight=qa,dr.forIn=function(t,e){return null==t?t:qr(t,Lo(e,3),os)},dr.forInRight=function(t,e){return null==t?t:Yr(t,Lo(e,3),os)},dr.forOwn=function(t,e){return t&&$r(t,Lo(e,3))},dr.forOwnRight=function(t,e){return t&&Jr(t,Lo(e,3))},dr.get=Zu,dr.gt=du,dr.gte=vu,dr.has=function(t,e){return null!=t&&Vo(t,e,ei)},dr.hasIn=ts,dr.head=ma,dr.identity=Ts,dr.includes=function(t,e,n,r){t=mu(t)?t:ps(t),n=n&&!r?zu(n):0;var i=t.length;return n<0&&(n=qn(i+n,0)),Bu(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&sn(t,e,n)>-1},dr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:zu(n);return i<0&&(i=qn(r+i,0)),sn(t,e,i)},dr.inRange=function(t,e,n){return e=Du(e),n===o?(n=e,e=0):n=Du(n),function(t,e,n){return t>=Yn(e,n)&&t<qn(e,n)}(t=Gu(t),e,n)},dr.invoke=rs,dr.isArguments=_u,dr.isArray=yu,dr.isArrayBuffer=gu,dr.isArrayLike=mu,dr.isArrayLikeObject=bu,dr.isBoolean=function(t){return!0===t||!1===t||Au(t)&&Zr(t)==V},dr.isBuffer=wu,dr.isDate=xu,dr.isElement=function(t){return Au(t)&&1===t.nodeType&&!Pu(t)},dr.isEmpty=function(t){if(null==t)return!0;if(mu(t)&&(yu(t)||"string"==typeof t||"function"==typeof t.splice||wu(t)||Fu(t)||_u(t)))return!t.length;var e=Go(t);if(e==K||e==nt)return!t.size;if(Xo(t))return!li(t).length;for(var n in t)if(le.call(t,n))return!1;return!0},dr.isEqual=function(t,e){return ai(t,e)},dr.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:o)?n(t,e):o;return r===o?ai(t,e,o,n):!!r},dr.isError=ku,dr.isFinite=function(t){return"number"==typeof t&&Gn(t)},dr.isFunction=Su,dr.isInteger=Eu,dr.isLength=ju,dr.isMap=Ou,dr.isMatch=function(t,e){return t===e||ui(t,e,Uo(e))},dr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:o,ui(t,e,Uo(e),n)},dr.isNaN=function(t){return Tu(t)&&t!=+t},dr.isNative=function(t){if(Qo(t))throw new Xt(u);return si(t)},dr.isNil=function(t){return null==t},dr.isNull=function(t){return null===t},dr.isNumber=Tu,dr.isObject=Cu,dr.isObjectLike=Au,dr.isPlainObject=Pu,dr.isRegExp=Ru,dr.isSafeInteger=function(t){return Eu(t)&&t>=-B&&t<=B},dr.isSet=Iu,dr.isString=Bu,dr.isSymbol=Mu,dr.isTypedArray=Fu,dr.isUndefined=function(t){return t===o},dr.isWeakMap=function(t){return Au(t)&&Go(t)==at},dr.isWeakSet=function(t){return Au(t)&&Zr(t)==ut},dr.join=function(t,e){return null==t?"":Vn.call(t,e)},dr.kebabCase=ys,dr.last=ka,dr.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=zu(n))<0?qn(r+i,0):Yn(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):un(t,ln,i,!0)},dr.lowerCase=gs,dr.lowerFirst=ms,dr.lt=Lu,dr.lte=Nu,dr.max=function(t){return t&&t.length?Gr(t,Ts,ti):o},dr.maxBy=function(t,e){return t&&t.length?Gr(t,Lo(e,2),ti):o},dr.mean=function(t){return fn(t,Ts)},dr.meanBy=function(t,e){return fn(t,Lo(e,2))},dr.min=function(t){return t&&t.length?Gr(t,Ts,hi):o},dr.minBy=function(t,e){return t&&t.length?Gr(t,Lo(e,2),hi):o},dr.stubArray=Ws,dr.stubFalse=Gs,dr.stubObject=function(){return{}},dr.stubString=function(){return""},dr.stubTrue=function(){return!0},dr.multiply=Js,dr.nth=function(t,e){return t&&t.length?yi(t,zu(e)):o},dr.noConflict=function(){return Ie._===this&&(Ie._=ve),this},dr.noop=Ms,dr.now=Za,dr.pad=function(t,e,n){t=Hu(t);var r=(e=zu(e))?Rn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return mo(Dn(i),n)+t+mo(Un(i),n)},dr.padEnd=function(t,e,n){t=Hu(t);var r=(e=zu(e))?Rn(t):0;return e&&r<e?t+mo(e-r,n):t},dr.padStart=function(t,e,n){t=Hu(t);var r=(e=zu(e))?Rn(t):0;return e&&r<e?mo(e-r,n)+t:t},dr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Jn(Hu(t).replace(Mt,""),e||0)},dr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&$o(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=Du(t),e===o?(e=t,t=0):e=Du(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Kn();return Yn(t+i*(e-t+Oe("1e-"+((i+"").length-1))),e)}return xi(t,e)},dr.reduce=function(t,e,n){var r=yu(t)?en:dn,i=arguments.length<3;return r(t,Lo(e,4),n,i,Dr)},dr.reduceRight=function(t,e,n){var r=yu(t)?nn:dn,i=arguments.length<3;return r(t,Lo(e,4),n,i,zr)},dr.repeat=function(t,e,n){return e=(n?$o(t,e,n):e===o)?1:zu(e),ki(Hu(t),e)},dr.replace=function(){var t=arguments,e=Hu(t[0]);return t.length<3?e:e.replace(t[1],t[2])},dr.result=function(t,e,n){var r=-1,i=(e=Yi(e,t)).length;for(i||(i=1,t=o);++r<i;){var a=null==t?o:t[la(e[r])];a===o&&(r=i,a=n),t=Su(a)?a.call(t):a}return t},dr.round=Ks,dr.runInContext=t,dr.sample=function(t){return(yu(t)?Er:Ei)(t)},dr.size=function(t){if(null==t)return 0;if(mu(t))return Bu(t)?Rn(t):t.length;var e=Go(t);return e==K||e==nt?t.size:li(t).length},dr.snakeCase=bs,dr.some=function(t,e,n){var r=yu(t)?rn:Ri;return n&&$o(t,e,n)&&(e=o),r(t,Lo(e,3))},dr.sortedIndex=function(t,e){return Ii(t,e)},dr.sortedIndexBy=function(t,e,n){return Bi(t,e,Lo(n,2))},dr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Ii(t,e);if(r<n&&pu(t[r],e))return r}return-1},dr.sortedLastIndex=function(t,e){return Ii(t,e,!0)},dr.sortedLastIndexBy=function(t,e,n){return Bi(t,e,Lo(n,2),!0)},dr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Ii(t,e,!0)-1;if(pu(t[n],e))return n}return-1},dr.startCase=ws,dr.startsWith=function(t,e,n){return t=Hu(t),n=null==n?0:Mr(zu(n),0,t.length),e=Li(e),t.slice(n,n+e.length)==e},dr.subtract=Qs,dr.sum=function(t){return t&&t.length?vn(t,Ts):0},dr.sumBy=function(t,e){return t&&t.length?vn(t,Lo(e,2)):0},dr.template=function(t,e,n){var r=dr.templateSettings;n&&$o(t,e,n)&&(e=o),t=Hu(t),e=$u({},e,r,Co);var i,a,u=$u({},e.imports,r.imports,Co),s=is(u),c=gn(u,s),l=0,f=e.interpolate||Kt,h="__p += '",p=ne((e.escape||Kt).source+"|"+f.source+"|"+(f===At?Wt:Kt).source+"|"+(e.evaluate||Kt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Ee+"]")+"\n";t.replace(p,function(e,n,r,o,u,s){return r||(r=o),h+=t.slice(l,s).replace(Qt,Sn),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),u&&(a=!0,h+="';\n"+u+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+e.length,e}),h+="';\n";var v=e.variable;v||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(mt,""):h).replace(bt,"$1").replace(wt,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var _=Es(function(){return Zt(s,d+"return "+h).apply(o,c)});if(_.source=h,ku(_))throw _;return _},dr.times=function(t,e){if((t=zu(t))<1||t>B)return[];var n=L,r=Yn(t,L);e=Lo(e),t-=L;for(var i=_n(r,e);++n<t;)e(n);return i},dr.toFinite=Du,dr.toInteger=zu,dr.toLength=Wu,dr.toLower=function(t){return Hu(t).toLowerCase()},dr.toNumber=Gu,dr.toSafeInteger=function(t){return t?Mr(zu(t),-B,B):0===t?t:0},dr.toString=Hu,dr.toUpper=function(t){return Hu(t).toUpperCase()},dr.trim=function(t,e,n){if((t=Hu(t))&&(n||e===o))return t.replace(Bt,"");if(!t||!(e=Li(e)))return t;var r=In(t),i=In(e);return Ji(r,bn(r,i),wn(r,i)+1).join("")},dr.trimEnd=function(t,e,n){if((t=Hu(t))&&(n||e===o))return t.replace(Ft,"");if(!t||!(e=Li(e)))return t;var r=In(t);return Ji(r,0,wn(r,In(e))+1).join("")},dr.trimStart=function(t,e,n){if((t=Hu(t))&&(n||e===o))return t.replace(Mt,"");if(!t||!(e=Li(e)))return t;var r=In(t);return Ji(r,bn(r,In(e))).join("")},dr.truncate=function(t,e){var n=C,r=A;if(Cu(e)){var i="separator"in e?e.separator:i;n="length"in e?zu(e.length):n,r="omission"in e?Li(e.omission):r}var a=(t=Hu(t)).length;if(En(t)){var u=In(t);a=u.length}if(n>=a)return t;var s=n-Rn(r);if(s<1)return r;var c=u?Ji(u,0,s).join(""):t.slice(0,s);if(i===o)return c+r;if(u&&(s+=c.length-s),Ru(i)){if(t.slice(s).search(i)){var l,f=c;for(i.global||(i=ne(i.source,Hu(Gt.exec(i))+"g")),i.lastIndex=0;l=i.exec(f);)var h=l.index;c=c.slice(0,h===o?s:h)}}else if(t.indexOf(Li(i),s)!=s){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+r},dr.unescape=function(t){return(t=Hu(t))&&St.test(t)?t.replace(xt,Bn):t},dr.uniqueId=function(t){var e=++fe;return Hu(t)+e},dr.upperCase=xs,dr.upperFirst=ks,dr.each=Ha,dr.eachRight=qa,dr.first=ma,Bs(dr,($s={},$r(dr,function(t,e){le.call(dr.prototype,e)||($s[e]=t)}),$s),{chain:!1}),dr.VERSION="4.17.10",Ye(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){dr[t].placeholder=dr}),Ye(["drop","take"],function(t,e){gr.prototype[t]=function(n){n=n===o?1:qn(zu(n),0);var r=this.__filtered__&&!e?new gr(this):this.clone();return r.__filtered__?r.__takeCount__=Yn(n,r.__takeCount__):r.__views__.push({size:Yn(n,L),type:t+(r.__dir__<0?"Right":"")}),r},gr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Ye(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==P||3==n;gr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Lo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),Ye(["head","last"],function(t,e){var n="take"+(e?"Right":"");gr.prototype[t]=function(){return this[n](1).value()[0]}}),Ye(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");gr.prototype[t]=function(){return this.__filtered__?new gr(this):this[n](1)}}),gr.prototype.compact=function(){return this.filter(Ts)},gr.prototype.find=function(t){return this.filter(t).head()},gr.prototype.findLast=function(t){return this.reverse().find(t)},gr.prototype.invokeMap=Si(function(t,e){return"function"==typeof t?new gr(this):this.map(function(n){return ii(n,t,e)})}),gr.prototype.reject=function(t){return this.filter(su(Lo(t)))},gr.prototype.slice=function(t,e){t=zu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new gr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(n=(e=zu(e))<0?n.dropRight(-e):n.take(e-t)),n)},gr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},gr.prototype.toArray=function(){return this.take(L)},$r(gr.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=dr[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);i&&(dr.prototype[e]=function(){var e=this.__wrapped__,u=r?[1]:arguments,s=e instanceof gr,c=u[0],l=s||yu(e),f=function(t){var e=i.apply(dr,tn([t],u));return r&&h?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(s=l=!1);var h=this.__chain__,p=!!this.__actions__.length,d=a&&!h,v=s&&!p;if(!a&&l){e=v?e:new gr(this);var _=t.apply(e,u);return _.__actions__.push({func:Da,args:[f],thisArg:o}),new yr(_,h)}return d&&v?t.apply(this,u):(_=this.thru(f),d?r?_.value()[0]:_.value():_)})}),Ye(["pop","push","shift","sort","splice","unshift"],function(t){var e=oe[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);dr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(yu(i)?i:[],t)}return this[n](function(n){return e.apply(yu(n)?n:[],t)})}}),$r(gr.prototype,function(t,e){var n=dr[e];if(n){var r=n.name+"";(or[r]||(or[r]=[])).push({name:e,func:n})}}),or[vo(o,g).name]=[{name:"wrapper",func:o}],gr.prototype.clone=function(){var t=new gr(this.__wrapped__);return t.__actions__=ro(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ro(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ro(this.__views__),t},gr.prototype.reverse=function(){if(this.__filtered__){var t=new gr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},gr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=yu(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Yn(e,t+a);break;case"takeRight":t=qn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,u=o.end,s=u-a,c=r?u:a-1,l=this.__iteratees__,f=l.length,h=0,p=Yn(s,this.__takeCount__);if(!n||!r&&i==s&&p==s)return Wi(t,this.__actions__);var d=[];t:for(;s--&&h<p;){for(var v=-1,_=t[c+=e];++v<f;){var y=l[v],g=y.iteratee,m=y.type,b=g(_);if(m==R)_=b;else if(!b){if(m==P)continue t;break t}}d[h++]=_}return d},dr.prototype.at=za,dr.prototype.chain=function(){return Ua(this)},dr.prototype.commit=function(){return new yr(this.value(),this.__chain__)},dr.prototype.next=function(){this.__values__===o&&(this.__values__=Uu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},dr.prototype.plant=function(t){for(var e,n=this;n instanceof _r;){var r=ha(n);r.__index__=0,r.__values__=o,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},dr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof gr){var e=t;return this.__actions__.length&&(e=new gr(this)),(e=e.reverse()).__actions__.push({func:Da,args:[Ca],thisArg:o}),new yr(e,this.__chain__)}return this.thru(Ca)},dr.prototype.toJSON=dr.prototype.valueOf=dr.prototype.value=function(){return Wi(this.__wrapped__,this.__actions__)},dr.prototype.first=dr.prototype.head,Ne&&(dr.prototype[Ne]=function(){return this}),dr}();Ie._=Mn,(i=function(){return Mn}.call(e,n,e,r))===o||(r.exports=i)}).call(this)}).call(this,n(35),n(58)(t))},339:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(104)),o=r(n(180));e.GameNote=new i.default(o.default,{id:Number,end:i.default.maybe(o.default),column:String}),e.default=e.GameNote},340:function(t,e,n){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(110)),a=i(n(181)),u=i(n(246));e.fromBMSChart=function(t,e){var n=o.Notes.fromBMSChart(t).all(),r={notes:n,timing:o.Timing.fromBMSChart(t),keysounds:o.Keysounds.fromBMSChart(t),songInfo:o.SongInfo.fromBMSChart(t),positioning:o.Positioning.fromBMSChart(t),spacing:o.Spacing.fromBMSChart(t),barLines:function(t,e){var n=a.default.max(t.map(function(t){return t.endBeat||t.beat})),r=[0],i=0,o=0;do{i+=e.timeSignatures.getBeats(o),o+=1,r.push(i)}while(i<=n);return r}(n,t),expertJudgmentWindow:function(t){var e=+t.headers.get("rank")||2;return 0===e?[8,24]:1===e?[15,30]:3===e?[21,60]:[18,40]}(t)};return new u.default(r,e)}},341:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},342:function(t,e){e.read=function(t,e,n,r,i){var o,a,u=8*i-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=u;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,u,s,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(a++,s/=2),a+f>=l?(u=0,a=l):a+f>=1?(u=(e*s-1)*Math.pow(2,i),a+=f):(u=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&u,p+=d,u/=256,i-=8);for(a=a<<i|u,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*v}},343:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return r.exec(t).slice(1)};function o(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var a=i>=0?arguments[i]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,r="/"===a.charAt(0))}return(r?"/":"")+(e=n(o(e.split("/"),function(t){return!!t}),!r).join("/"))||"."},e.normalize=function(t){var r=e.isAbsolute(t),i="/"===a(t,-1);return(t=n(o(t.split("/"),function(t){return!!t}),!r).join("/"))||r||(t="."),t&&i&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),u=a,s=0;s<a;s++)if(i[s]!==o[s]){u=s;break}var c=[];for(s=u;s<i.length;s++)c.push("..");return(c=c.concat(o.slice(u))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=i(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},e.basename=function(t,e){var n=i(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return i(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(59))},344:function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},37:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(144),i=n(143),o=n(142),a=function(){function t(){this.headers=new r.BMSHeaders,this.objects=new i.BMSObjects,this.timeSignatures=new o.TimeSignatures}return t.prototype.measureToBeat=function(t,e){return this.timeSignatures.measureToBeat(t,e)},t}();e.BMSChart=a},48:function(t,e,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r))t.push(i.apply(null,r));else if("object"===o)for(var a in r)n.call(r,a)&&r[a]&&t.push(a)}}return t.join(" ")}void 0!==t&&t.exports?t.exports=i:void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},481:function(t,e){e.convert=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return{offset:(n-e+(r-i))/2,delay:i-e-(r-n)}},e.offset=function(t){(t=t.slice()).sort(function(t,e){return t.offset-e.offset}),(t=t.slice(1,t.length-1)).sort(function(t,e){return t.delay-e.delay});for(var e=0,n=0,r=Math.ceil(t.length/8),i=0;i<t.length&&(t[i].delay>t[0].delay&&r--,0!==r);i++)e+=t[i].offset,n+=1;return e/n}},482:function(t,e,n){var r=n(481);t.exports=function(t,e,n){var i=new WebSocket(t),o=[];function a(){try{i.send(""+(new Date).getTime())}catch(t){}}i.onmessage=function(t){"k"==t.data&&a(),t.data.indexOf(",")>=0&&(!function(t){var e=t.split(","),i=+e[0],a=+e[1],u=(new Date).getTime();i<=u&&o.push(r.convert([i,a,a,u]));o.length>=8&&n&&n(r.offset(o))}(t.data),a())},i.onclose=function(){return o.length<1?e(new Error("no offset received")):e(null,r.offset(o))}}},497:function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e,n,r){var i=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).volume;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._master=e,this._samples=n,this._map=r,this._exclusiveInstances=new Map,this._group=this._master.group({volume:i})}return r(t,[{key:"playAuto",value:function(t,e,n){return this._play({note:t,delay:e,exclusive:!0,slice:n})}},{key:"playNote",value:function(t,e,n){return this._play({note:t,delay:e,exclusive:!0,slice:n})}},{key:"playFree",value:function(t,e,n){return this._play({note:t,delay:0,exclusive:!1,slice:n})}},{key:"_play",value:function(t){var e=t.note,n=t.delay,r=t.exclusive,i=e.keysound;r&&this._stopOldExclusiveSound(i,n);var o=this._map[i.toLowerCase()];if(!o)return null;var a=this._samples[o];if(!a)return null;var u=a.play(n,{start:e.keysoundStart,end:e.keysoundEnd,group:this._group});return r&&this._exclusiveInstances.set(i,u),u}},{key:"_stopOldExclusiveSound",value:function(t,e){var n=this._exclusiveInstances.get(t);n&&(setTimeout(function(){return n.stop()},1e3*e),this._exclusiveInstances.delete(t))}}]),t}();e.a=i},498:function(t,e,n){"use strict";var r=n(85),i=n.n(r);e.a=function(){var t=new Map,e=void 0;return{receiveSongId:function(n){e!==n&&(e=n,t.clear())},isEmpty:function(){return 0===t.size},isCached:function(e){return t.has(e)},cache:function(n,r){i()(e,"Expected current song to be set."),t.set(n,r)},get:function(e){return t.get(e)}}}},586:function(t,e,n){"use strict";var r=n(118),i=n(32),o=n.n(i),a=n(336),u=n(79),s=n(146),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var l=function(){function t(e,n){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).keysoundCache,i=void 0===r?a.a:r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._assets=e,this._master=n,this._keysoundCache=i}return c(t,[{key:"loadFiles",value:function(t,e,n){var i=this,a=r.c(t.length,e),s=r.c(t.length,n);return n&&(n.formatter=u.b),Promise.map(t,function(t){return new Promise(function(e){requestAnimationFrame(function(){e(i._loadSample(t,a,s))})})},{concurrency:64}).then(function(t){return o()(t).filter().fromPairs().value()})}},{key:"_loadSample",value:function(t,e,n){var r=this;return(r._keysoundCache.isCached(t)?Promise.resolve(r._keysoundCache.get(t)).tap(function(){e(t),n(t)}):r._getFile(t).then(function(i){return i.read().tap(function(){e(t)}).then(function(t){return r._decode(t)}).tap(function(e){r._keysoundCache.cache(t,e),n(t)})})).then(function(t){return r._master.sample(t)}).then(function(e){return[t,e]}).catch(function(e){return console.error("Unable to load keysound: "+t,e),null})}},{key:"_decode",value:function(t){return this._master.decode(t)}},{key:"_getFile",value:function(t){var e=this;return Promise.try(function(){if(!Object(s.b)('audio/ogg; codecs="vorbis"'))throw new Error("cannot play OGG");return e._assets.file(t.replace(/\.\w+$/,".ogg"))}).catch(function(){return e._assets.file(t.replace(/\.\w+$/,".m4a"))}).catch(function(){return e._assets.file(t.replace(/\.\w+$/,".mp3"))}).catch(function(){return e._assets.file(t)})}}]),t}();e.a=l},587:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAC30lEQVR4AdyYgacqQRTGt1u0NmqhSyiAFFRAXEUICEHXA563KNiH9tK19cf3vjgexje7e+9p9m4NPxhzzpzzdXbmTJ7rcb1eW2AEFmALIhCDBKRCInORrFmITct7xIHAe2AN9uCiZC++elVPugnm4AAujjjIHs0qJe6DJfgAl5L4kD39n0y8BiYgyQn2DCIp4xkYgBAEoC4EMjeQNWuxOef4PkoMtbKT74DfGYGlYCcHma+srpH4Sm37SSydspLvi/IskE+wAoGDfQPx/ZlRDX3XyU9BainzDWiX8AO0Za+zpfKmLjZ9AWuL8r9A9wfOoK7szWJag5d7Jv9u2eitArfQmyW297uIYPnlT2BYoat4CE6sEtTfPHEag9cKNmKvICbxTjWnfUqSb1W4G20REVLQ/849fyRlz3/56lXCiVyRneIdHm9yhg/0GBtamqVaEeNJVU57B7fDpEjrmZj3fI7N5SuIWSn+SJ9wBH6WwZJ0eN0HFqBLOsal9T1PnrQb9wE797chT+kmWzgnD5v2EwjQJg+oOVt4MBatPAxFwGcwvsNhNs76X6Cgj5VhdzAX9EjzECgF0IlAklcIEJCmrpfV7++KB0mTVovAkmdifMHfzvpOIP/ejhQCjLUiZPlQCDAybPf/+2eykV/YMQlIIUKurUIAn/htMWX+eBgaAb4pQr6NQgCxjcxKv00u+LehECA7oRg0iJ8GiO3J6wUgZ93iNrk1Jmd6Aawi/AVhhq9Q1vBq0QswM+y3rCwGnnZwEWKaPBchBmMHcQyMXCOPlF3o6HXW0K9VxxCan6NHXn+B96TjlpuRa+KRDqn+xALUzY73X/v2UQAgDMBQVA+yKqH+L9zZezRPAnQn//sBlkD6JugYdBFyFe5G0yLoMeQ5nByIiMSEomJxxYhqTDk6PitrQD0OkIDIgKRgckBJqCxYGi5PmKDMkKbOa3N1QyhSDmhz5WVtjjhJnSVPB+jzPZGAyclJbc34AAAAAElFTkSuQmCC"},588:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEEklEQVR4AdSaBY/zPAzHBw8cMzMzCo+ZmZmZmfvh7/1P8kt+kq65dLt00k9QZYbUSWynvkj/Pj8/40Et6AZz4ABcgQfwTjzQswMa003/ifd58QfDc8EwOAGWJickK9d0p3+DNnAKrAhxSjp+m+R4DOgBj8CKEo+kM+Y7HfeDZvAQxtgPcEBh3AqKQAqIA0Eijp4V0Zhh+s9HGNn3ZIM/2s4ng10bw97BMqgFMZrRVUuy3mX6yJbkaDlfCO4lhryCfhAXAb1xJPvVJhoKI+18C3iXhPkUSIrCC0giXR+SyGuJhNIArUtLwBrI/IY9KJN0WxyyNeCm8ysSRZ0GnEKdEttWXJkEyZt/AdUGHcXV4EUUCW6seYtxBbIMTMSyyDaL0aKz279z503Oz6nuuBJsjIVfOefvediL37yRkfAiOCKTFTI8YZJTrWlYLGgEM2AbnIMX4hLsgRkak+BQ5oB0TxAnS34nQps1d3surwZsOUhrRQZX2sgdonG/FE6HZiep5wM/5zX2kD1gaXIMSkTOE9LkS5An3Num5lRh8Qwv8wt5wwiwXGYQBJnzIbLDJEs88nrs6nle0k59oXjZsHHiCHSDEpAOfhF/V4LdYYqsW8Gz4jA2TQlK6d+igW2CwiZJ0fkzieGLIF1xJ59xGBnVDmoHXkC1iQbyTk6/YthvSJKmAs3K85LJVE50Qr7wzpKgh8eSB4WSVrLmtxVkKMlmtDkspXlSl2uX7y8rvSWx80F95/mGJ6TPoaxlaZ0g6N7WKhi5Jwj7uGg4T4w5lFfLu83/zZ/50RejkORYjIJoOU/MK2zS/EiMF83MvoKhW3y3d8H5AWApsK4g++CPSKezV7mGptyez2i6SwXNLzq+skExRVoLaAN9YAzMg3UwqdHb6A49nGMPWx0Ka+RJjgcqxVZm85woLIocCpvls+mBCShiNh/4BA2EFIfCttn/SjwwASn8xPIJqr84h8LO+fr3wATEMZsffDxDcprACLouvzwwAUGe8XpyAsiRjv/QpjMBnlsC0JXG17LGEvDeJghd5Uz3lsYm6L1jkMJe0LhRPwY9mQiFdHGbdRIhY1Jhh3ozBMVbnE4qXMvD4juKIQWdC+4WQwaUw5rNlzqdctjMhoh8yV0wXXvAr9EQMbolxhOYHZ1oE7fEvNEUjQObCq0whaao+W3xfMmd/wb7+kOvLW7gxUgG/ccScMo3ae2LEQOuxtJAMegBhzb/3xQtK42rMU9djsq//NK8HOVv8N6w6/G9cBegGtfjxn4g8UGnSLXLn881m/CJzKzgE5kLejZLY2L/at8OLACAgSAI1nolpH9IC8kJ4U0Xi50H21y1yJikbHJGSausWdouD0wgM9DUBZtbB1mbgs3lP5sDJ9FZeHo6n99ybdMJ2yzi/QAAAABJRU5ErkJggg=="},589:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACxUlEQVR4AdSYgWfrUBTG2xWNhLbQUbQAlUA7oEzKUNSGwqbA84INBs3oJPvj+75wUMe5Sd+yfM3KD+L2nvPdnNz7ndtp+nc6nQIQghjsQALeQQoyIZVniYyJ5T9BI0kRRE/ABryCr5q8ylyTtovugxV4k8Sb4E1i9Nsk3ANr8CFJMviQmN41hXfBAqQVyeYgkTK+AzMwAj7oCb48m8mYjfwnr5j7IDl02eKH4E9JYhl4lo3Mq1ldocyVueJJLkOW+Ck4OBL5BA/AbyCuL3N/llTDtGnxS5A5yvwJDAgvYCCxckflLZsIegM2jpXfg/EV9qCxxP7SSK43Pyn+xRHovgWn0L0jt5cfWQTHmz+CeYuO4jk4WpVQ+5s3Jn0Hty00YreSm853WWe3zwzxQYvdaKAXQTRMv3POH3TZ22++lZVwNI7I4eUOzzY581/UjM0dZql7yZ8X5m5fvmBbEBEFRhKz+5+nw6LSehrefl8h/vHMDEUk8bnEfKxYhL3xKXhlk68NhzcuGb81xkcM8WdsK8ySHr8u6+d1S/t0SUKERfh2rEKD0Ur3rYEro7EZNJIYQbzqHXQDtbIG6pucB0KClLkLLfpmSQ+YGObBJyRKmbPQYpi6SZnffyYkTF3QQpOzTzBub0PCW2NXU6hvm8/9sw7kUb5bgnjlcfS8gbUyf2k7N0G8mj/RlV48jK1vg7cIBPHuvS4uHu7UwzuWgWEbqkKbirGzymLGdHFkNzlTcZKOcYEwIvr4nCVechjpC56O0f35zGaG3Ez5Kl7aMRxSj9HOssVL7J52vP/at28CgIEYiqF4AssQzH/Jmt4z/QfhqptkAzwBn6AwmJ4ISYWH1bUIKobiy2ENES0xTVFtcYMRozHD0Vms7IDxOEACIgOSgskBJaGyYGm4PGGCMkOaeq/N9QVtrh5oc/W7NkecpM6Sp+P1+REepk4aEr9vwAAAAABJRU5ErkJggg=="},590:function(t,e,n){t.exports=n.p+"ea410328703171d8f693d3a404a11a8f.jpg"},591:function(t,e,n){var r=n(113);(t.exports=n(1)(!1)).push([t.i,".game-display {\n  display: block;\n  margin: 0 auto;\n  overflow: hidden;\n  position: relative;\n}\n\n.game-display--bg {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 10;\n  background: url("+r(n(590))+") center no-repeat;\n  background-size: cover;\n  -webkit-animation: 1.5s game-display--bg-default;\n          animation: 1.5s game-display--bg-default;\n  -webkit-animation-fill-mode: both;\n          animation-fill-mode: both;\n}\n\n.game-display[data-info-panel-position='top'] .game-display--bg {\n  -webkit-animation-name: game-display--bg-down;\n          animation-name: game-display--bg-down;\n}\n\n.game-display--video-bg {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: -48px;\n  left: 0px;\n  z-index: 11;\n  opacity: 0;\n  transition: 0.5s opacity;\n  will-change: opacity;\n}\n\n.game-display--video-bg.is-playing {\n  opacity: 1;\n}\n\n.game-display[data-panel-placement='left'] .game-display--video-bg {\n  -webkit-transform: translateX(13.67188%) scale(0.87);\n          transform: translateX(13.67188%) scale(0.87);\n}\n\n.game-display[data-panel-placement='right'] .game-display--video-bg {\n  -webkit-transform: translateX(13.67188%) scale(0.87);\n          transform: translateX(13.67188%) scale(0.87);\n}\n\n.game-display--bg img {\n  width: 100%;\n  height: 100%;\n  display: block;\n  object-fit: cover;\n  -webkit-animation: 1.2s game-display--bg-default;\n          animation: 1.2s game-display--bg-default;\n  -webkit-animation-fill-mode: both;\n          animation-fill-mode: both;\n}\n\n.game-display[data-info-panel-position='top'] .game-display--bg img {\n  -webkit-animation-name: game-display--bg-down;\n          animation-name: game-display--bg-down;\n}\n\n.game-display > canvas {\n  position: relative;\n  z-index: 100;\n}\n\n.game-display--touch-buttons {\n  position: fixed;\n  -webkit-transform: translateZ(0);\n          transform: translateZ(0);\n  top: 0;\n  opacity: 0;\n  z-index: 110;\n}\n\n.game-display--touch-buttons.is-visible {\n  opacity: 1;\n}\n\n.game-display--touch-buttons.is-left {\n  left: 0;\n}\n\n.game-display--touch-buttons.is-right {\n  right: 0;\n}\n\n.game-display--touch-escape-button, .game-display--touch-replay-button, .game-display--touch-fullscreen-button {\n  position: absolute;\n  top: 12px;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  width: 32px;\n  height: 32px;\n  background: transparent center center no-repeat;\n  background-size: 32px 32px;\n  cursor: pointer;\n}\n\n.game-display--touch-escape-button {\n  background-image: url("+r(n(589))+");\n  left: 12px;\n}\n\n.game-display--touch-replay-button {\n  background-image: url("+r(n(588))+");\n  left: 56px;\n}\n\n.game-display--touch-fullscreen-button {\n  background-image: url("+r(n(587))+");\n  right: 12px;\n}\n\n:root:-webkit-full-screen .game-display--touch-fullscreen-button {\n  display: none;\n}\n\n:root:-moz-full-screen .game-display--touch-fullscreen-button {\n  display: none;\n}\n\n:root:fullscreen .game-display--touch-fullscreen-button {\n  display: none;\n}\n\n@-webkit-keyframes game-display--bg-default {\n  from {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n    opacity: 0;\n  }\n  to {\n    -webkit-transform: translate(0, -35px);\n            transform: translate(0, -35px);\n    opacity: 1;\n  }\n}\n\n@keyframes game-display--bg-default {\n  from {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n    opacity: 0;\n  }\n  to {\n    -webkit-transform: translate(0, -35px);\n            transform: translate(0, -35px);\n    opacity: 1;\n  }\n}\n\n@-webkit-keyframes game-display--bg-down {\n  from {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n    opacity: 0;\n  }\n  to {\n    -webkit-transform: translate(0, 35px);\n            transform: translate(0, 35px);\n    opacity: 1;\n  }\n}\n\n@keyframes game-display--bg-down {\n  from {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n    opacity: 0;\n  }\n  to {\n    -webkit-transform: translate(0, 35px);\n            transform: translate(0, 35px);\n    opacity: 1;\n  }\n}\n",""])},592:function(t,e,n){var r=n(591);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},593:function(t,e,n){"use strict";n(592);var r=n(70),i=n.n(r),o=n(331),a=n(270),u=n(140),s=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var l=function(){function t(e){var n=e.game,r=e.context,i=e.backgroundImagePromise,a=e.video;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._game=n,this._context=r;var u=r.skinData;this._players=new Map(n.players.map(function(t){return[t,new o.a(t,u)]})),this._stateful={},this._wrapper=this._createWrapper({backgroundImagePromise:i,video:a,panelPlacement:n.players[0].options.placement,infoPanelPosition:u.infoPanelPosition}),this._createTouchEscapeButton({displayByDefault:"touch"===u.mainInputDevice}),this._createFullScreenButton()}return c(t,[{key:"setEscapeHandler",value:function(t){this._onEscape=t}},{key:"setReplayHandler",value:function(t){this._onReplay=t}},{key:"start",value:function(){this._started=(new Date).getTime();var t=this._game.players[0],e=t.notechart.songInfo;this._stateful.song_title=e.title,this._stateful.song_artist=e.artist,this._duration=t.notechart.duration}},{key:"destroy",value:function(){this._context.destroy()}},{key:"update",value:function(t,e){var n=((new Date).getTime()-this._started)/1e3,r=this._getData(n,t,e);this._updateStatefulData(n,t,e),this._context.render(Object.assign({},this._stateful,r)),this._video&&!this._videoStarted&&t>=this._videoOffset&&(this._video.volume=0,this._video.play(),this._video.classList.add("is-playing"),this._videoStarted=!0)}},{key:"_getData",value:function(t,e,n){var r={};r.tutorial=this._game.options.tutorial?"yes":"no",r.t=t,r.gameTime=e,r.ready=this._getReady(n),r.song_time=this._getSongTime(e);var i=!0,o=!1,a=void 0;try{for(var u,c=this._players[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=u.value,f=s(l,2),h=f[0],p=f[1],d=n.player(h),v=p.update(t,e,d);for(var _ in v)r["p"+h.number+"_"+_]=v[_]}}catch(t){o=!0,a=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}return r}},{key:"_updateStatefulData",value:function(t,e,n){var r=this._stateful;void 0===r.started&&n.started&&(r.started=t),void 0===r.gettingStarted&&n.gettingStarted&&(r.gettingStarted=t)}},{key:"_getSongTime",value:function(t){return Object(a.a)(Math.min(this._duration,Math.max(0,t)))+" / "+Object(a.a)(this._duration)}},{key:"_getReady",value:function(t){var e=t.readyFraction;return e>.5?Math.pow(1-(e-.5)/.5,2):0}},{key:"_createWrapper",value:function(t){var e=t.backgroundImagePromise,n=t.video,r=t.panelPlacement,o=t.infoPanelPosition,a=i()('<div class="game-display"></div>').attr("data-panel-placement",r).attr("data-info-panel-position",o).append('<div class="game-display--bg js-back-image"></div>').append(this.view);return e&&Promise.resolve(e).then(function(t){return a.find(".js-back-image").append(t)}),n&&(this._video=n.element,this._videoOffset=n.offset,i()(n.element).addClass("game-display--video-bg").appendTo(a)),a[0]}},{key:"_createTouchEscapeButton",value:function(t){var e=this,n=t.displayByDefault,r=document.createElement("div");if(r.className="game-display--touch-buttons is-left",this.wrapper.appendChild(r),n)r.classList.add("is-visible");else{var i=!1;this.wrapper.addEventListener("touchstart",function(){i||(i=!0,r.classList.add("is-visible"))},!0)}var o=function(t,e){var n=f(e,t);r.appendChild(n)};o("game-display--touch-escape-button",function(){return e._onEscape()}),o("game-display--touch-replay-button",function(){return e._onReplay()})}},{key:"_createFullScreenButton",value:function(){if(!Object(u.b)()&&document.documentElement.requestFullscreen){var t=document.createElement("div");t.className="game-display--touch-buttons is-visible is-right",this.wrapper.appendChild(t);var e=f(function(){document.documentElement.requestFullscreen()},"game-display--touch-fullscreen-button");t.appendChild(e)}}},{key:"context",get:function(){return this._context}},{key:"view",get:function(){return this._context.view}},{key:"wrapper",get:function(){return this._wrapper}}]),t}();function f(t,e){var n=document.createElement("button");return n.addEventListener("touchstart",function(t){t.stopPropagation()},!0),n.onclick=function(e){e.preventDefault(),t()},n.className=e,n}e.a=l},594:function(t,e,n){"use strict";var r=n(157),i=n(164),o=["p1_1","p1_2","p1_3","p1_4","p1_5","p1_6","p1_7","start"];window.BEMUSE_TOUCH_STATS=[],e.a=function(t){var e=null,n=null,a=r.a.wrap("input:touch:I",function(){return t.input}),u=r.a.wrap("input:touch:SC",function(r){var i=t.refs.p1_SC;if(!i)return 0;n=null;var o=!0,a=!1,u=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value,f=!0,h=!1,d=void 0;try{for(var v,_=i[Symbol.iterator]();!(f=(v=_.next()).done);f=!0){var y=v.value;if(p(y.getBounds(),32).contains(l.x,l.y)){n=l.y;break}}}catch(t){h=!0,d=t}finally{try{!f&&_.return&&_.return()}finally{if(h)throw d}}if(null!==n)break}}catch(t){a=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw u}}return null===n?(e=null,0):(null===e&&(e=n),n>e+24?e=n-24:n<e-24&&(e=n+24),n>e+4?-1:n<e-4?1:0)}),s=r.a.wrap("input:touch:B",function(e,n){var r=t.refs[n];if(r){var i=!0,o=!1,a=void 0;try{for(var u,s=r[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,l=p(c.getBounds()),f=!0,h=!1,d=void 0;try{for(var v,_=e[Symbol.iterator]();!(f=(v=_.next()).done);f=!0){var y=v.value;if(l.contains(y.x,y.y))return 1}}catch(t){h=!0,d=t}finally{try{!f&&_.return&&_.return()}finally{if(h)throw d}}}}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}}return 0}),c=r.a.wrap("input:touch:P",function(t){var e=null,n=null,r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;if(s.y<h)if(null===e)e=s.y;else{if(null!==n)return 0;n=s.y}}}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return null!==e&&null!==n?Math.abs(e-n):0}),l=new function(){var t=[];return window.BEMUSE_TOUCH_STATS.push(t),{record:function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,s=u.x,c=u.y;t.push({x:Math.round(s),y:Math.round(c)})}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}},done:function(){t.length&&(localStorage._stats_touch=JSON.stringify(window.BEMUSE_TOUCH_STATS))}}},f="touch3d"===t.skinData.displayMode,h=f?i.b(.8).y:550;return{name:"TouchPlugin",get:function(){var t=a(),e={};r.a.enabled&&(r.a.stats["input:touch:n"]=""+t.length),l.record(t),e.p1_SC=u(t);var n=!0,h=!1,p=void 0;try{for(var d,v=o[Symbol.iterator]();!(n=(d=v.next()).done);n=!0){var _=d.value;e[_]=s(t,_)}}catch(t){h=!0,p=t}finally{try{!n&&v.return&&v.return()}finally{if(h)throw p}}if(f){var y=!0,g=!1,m=void 0;try{for(var b,w=t[Symbol.iterator]();!(y=(b=w.next()).done);y=!0){var x=b.value,k=i.c(x.x,x.y);k&&(e["p1_"+k]=1)}}catch(t){g=!0,m=t}finally{try{!y&&w.return&&w.return()}finally{if(g)throw m}}}return e.p1_pinch=c(t),e},destroy:function(){l.done()}};function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=t.clone();return n.x-=e,n.y-=e,n.width+=2*e,n.height+=2*e,n}}},595:function(t,e,n){"use strict";var r=n(333),i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._game=e,this._players=new Map(e.players.map(function(t){return[t,new r.a(t)]}))}return o(t,[{key:"update",value:function(t,e,n){var r=!0,o=!0,a=!1,u=void 0;try{for(var s,c=this._players[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value,f=i(l,2),h=(f[0],f[1]);h.update(t,e),h.finished||(r=!1)}}catch(t){a=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw u}}this.readyFraction=n.readyFraction,this.gettingStarted=n.gettingStarted,this.started=n.started,this.finished=r}},{key:"player",value:function(t){return this._players.get(t)}},{key:"game",get:function(){return this._game}}]),t}();e.a=a},596:function(t,e,n){"use strict";var r=n(32),i=n.n(r),o=n(497),a=n(71),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function s(t){t=i.a.sortBy(t,"time");var e=0;return{next:function(n){for(var r=[];e<t.length&&n>=t[e].time;e++)r.push(t[e]);return r}}}var c=function(){function t(e){var n=e.player,r=e.samples,i=e.master,a=e.waveFactory,u=e.volume;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var c=n.notechart;this._waveFactory=a||new o.a(i,r,c.keysounds,{volume:u}),this._autos=s(c.autos),this._notes=s(c.notes),this._played=new Map,this._autosound=!!n.options.autosound}return u(t,[{key:"update",value:function(t,e){this._playAutokeysounds(t),this._playAutosounds(t,e),this._handleSoundNotifications(e&&e.notifications.sounds||[])}},{key:"_playAutokeysounds",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this._autos.next(t+1/30)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this._waveFactory.playAuto(a,a.time-t)}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"_playAutosounds",value:function(t,e){var n=this._notes.next(t+1/30),r=e&&e.stats.poor;if(this._autosound&&!r){var i=!0,o=!1,a=void 0;try{for(var u,s=n[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;this._hitNote(c,c.time-t)}}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}}}},{key:"_handleSoundNotifications",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,u=a.type,s=a.note;"hit"===u?this._hitNote(s,0,a.judgment):"break"===u?this._breakNote(s):"free"===u&&this._waveFactory.playFree(s,0)}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"_hitNote",value:function(t,e,n){var r=this._played.get(t);r||(r=this._waveFactory.playNote(t,e),this._played.set(t,r)),r&&Object(a.d)(n)&&r.bad()}},{key:"_breakNote",value:function(t){var e=this._played.get(t);e&&e.stop()}}]),t}();e.a=c},597:function(t,e,n){"use strict";var r=n(274),i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=n,this.players=n.players.map(function(t,i){return t=Object.assign({},t,{autosound:n.audioInputLatency>=.01,tutorial:n.tutorial}),new r.a(e[i],i+1,t)})}return i(t,[{key:"samples",get:function(){var t=new Set,e=!0,n=!1,r=void 0;try{for(var i,o=this.players[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,u=!0,s=!1,c=void 0;try{for(var l,f=a.notechart.samples[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var h=l.value;t.add(h)}}catch(t){s=!0,c=t}finally{try{!u&&f.return&&f.return()}finally{if(s)throw c}}}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}return Array.from(t)}}]),t}();e.a=o},598:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=a(n(338));e.slicesForNotesAndTiming=function(t,e,n){var i=n.beatForPulse,a=new Set,s=new Set,c=new Set;try{for(var l=r(t),f=l.next();!f.done;f=l.next()){var h=f.value,p=h.x,d=h.y,v=h.c;a.add(d),p&&s.add(d),v||c.add(d)}}catch(t){g={error:t}}finally{try{f&&!f.done&&(m=l.return)&&m.call(l)}finally{if(g)throw g.error}}var _,y,g,m,b,w,x=new Map,k=null,S=!0;try{for(var E=r(u.default.sortBy(o(a))),j=E.next();!j.done;j=E.next()){d=j.value;var C=e.beatToSeconds(i(d));if(null===k||c.has(d)?k=0:k+=C-_,S||s.has(d)||c.has(d)){y&&!c.has(d)&&(y.keysoundEnd=k);var A={keysoundStart:k,keysoundEnd:void 0};x.set(d,A),y=A}S=s.has(d),_=C}}catch(t){b={error:t}}finally{try{j&&!j.done&&(w=E.return)&&w.call(E)}finally{if(b)throw b.error}}return x}},599:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var u=o(n(338)),s=a(n(598));function c(t){return t/240}e.barLinesForBmson=function(t){var e=t.lines;return u.default(e).map(function(t){return c(t.y)}).sortBy().value()},e.timingInfoForBmson=function(t){return{initialBPM:t.info.initBPM,actions:i((t.bpmNotes||[]).map(function(t){var e=t.y,n=t.v;return{type:"bpm",beat:c(e),bpm:n}}),(t.stopNotes||[]).map(function(t){var e=t.y,n=t.v;return{type:"stop",beat:c(e),stopBeats:c(Math.floor(n))}}))}},e.beatForLoc=c,e._slicesForNotesAndTiming=function(t,e){return s.slicesForNotesAndTiming(t,e,{beatForPulse:c})}},607:function(t,e,n){"use strict";t.exports=function(t,e,n,r){Object.defineProperty(t,e,{get:function(){var t=n.call(this);return Object.defineProperty(this,e,{value:t,enumerable:!!r,writable:!0}),t},set:function(t){return Object.defineProperty(this,e,{value:t,enumerable:!!r,writable:!0}),t},enumerable:!!r,configurable:!0})}},608:function(t,e,n){"use strict";var r=n(118),i=n(607),o=n.n(i),a=n(154),u=n(105),s=n(277),c=n.n(s),l=n(3),f=n(183),h=n(182),p=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,t);var u=o.a.bind(null,this);this._url=e,this._fallback=i.fallback,this._fallbackPattern=i.fallbackPattern,u("metadata",function(){return Object(a.a)(Object(f.resolve)(n._url,"metadata.json")).as("text").then(function(t){return JSON.parse(t)})}),u("refs",function(){return n.metadata.then(function(t){return t.refs.map(function(t){return new g(n,t)})})}),u("_fileMap",function(){return n.metadata.then(function(t){var e=new Map,n=!0,r=!1,i=void 0;try{for(var o,a=t.files[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;e.set(u.name.toLowerCase(),u)}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return e})}),this.progress={all:new l.a,current:new l.a};var s=r.d(this.progress.current);this._loadPayload=r.e(this.progress.all,c()(2,function(t){return Object(a.a)(t).as("blob",(e=new l.a,s.add(e),e)).then(m);var e}))}return d(t,[{key:"file",value:function(t){var e=this;return this._fileMap.then(function(n){var r=n.get(t.toLowerCase());if(r)return new y(e,r.ref,r.name);if(e._fallback&&e._fallbackPattern.test(t))return new h.a(Object(f.resolve)(e._fallback,t));throw new Error("Unable to find: "+t)})}},{key:"getBlob",value:function(t){var e=p(t,3),n=e[0],r=e[1],i=e[2];return this.refs.then(function(t){return t[n]}).then(function(t){return t.load()}).then(function(t){return t.slice(r,i)})}},{key:"url",get:function(){return this._url}}]),t}(),y=function(){function t(e,n,r){v(this,t),this._resources=e,this._ref=n,this._name=r}return d(t,[{key:"read",value:function(t){return r.a(t,this._resources.getBlob(this._ref).then(function(t){return Object(u.a)(t).as("arraybuffer")}))}},{key:"resolveUrl",value:function(){return this._resources.getBlob(this._ref).then(function(t){return URL.createObjectURL(t)})}},{key:"name",get:function(){return this._name}}]),t}(),g=function(){function t(e,n){v(this,t),this._resources=e,this._url=Object(f.resolve)(e.url,n.path)}return d(t,[{key:"load",value:function(){return this._promise||(this._promise=this._resources._loadPayload(this._url))}}]),t}();function m(t){return Object(u.a)(t.slice(0,10)).as("text").then(function(e){if("BEMUSEPACK"!==e)throw new Error("Invalid magic number");return Object(u.a)(t.slice(10,14)).as("arraybuffer")}).then(function(t){var e=new Uint8Array(t);return e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)}).then(function(e){return t.slice(14+e)})}e.a=_},666:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,'.Scene {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: hidden;\n  font-family: "Source Sans Pro", "Segoe UI", "Helvetica Neue", sans-serif;\n}\n\n.Scene > .SceneHeading {\n  position: absolute;\n  top: 20px;\n  right: 0;\n  left: 0;\n}\n\n@media (min-width: 720px) {\n  .Scene > .SceneHeading {\n    top: 2rem;\n  }\n}\n\n.Scene > .SceneToolbar {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n',""])},667:function(t,e,n){var r=n(666);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},71:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"c",function(){return y}),n.d(e,"f",function(){return m}),n.d(e,"e",function(){return b}),n.d(e,"g",function(){return w}),n.d(e,"d",function(){return x}),n.d(e,"b",function(){return k}),n.d(e,"h",function(){return S});var r=n(32),i=n.n(r),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=0,s=-1,c=[{value:1,timegate:.02,endTimegate:.04},{value:2,timegate:.05,endTimegate:.1},{value:3,timegate:.1,endTimegate:.2},{value:4,timegate:.2,endTimegate:.2}],l=[{value:1,timegate:.021,endTimegate:.042},{value:2,timegate:.06,endTimegate:.12},{value:3,timegate:.12,endTimegate:.2},{value:4,timegate:.2,endTimegate:.2}],f=[{value:1,timegate:.022,endTimegate:.044},{value:2,timegate:.07,endTimegate:.14},{value:3,timegate:.14,endTimegate:.2},{value:4,timegate:.2,endTimegate:.2}],h=[{value:1,timegate:.023,endTimegate:.046},{value:2,timegate:.08,endTimegate:.16},{value:3,timegate:.16,endTimegate:.2},{value:4,timegate:.2,endTimegate:.2}],p=[{value:1,timegate:.024,endTimegate:.048},{value:2,timegate:.1,endTimegate:.18},{value:3,timegate:.18,endTimegate:.2},{value:4,timegate:.2,endTimegate:.2}],d=function(){function t(e){a(this,t),this._timegates=e}return o(t,[{key:"getTimegates",value:function(t,e){return this._timegates}}]),t}(),v=function(){function t(){a(this,t)}return o(t,[{key:"getTimegates",value:function(t,e){return e<100?p:c}}]),t}(),_=new d(c);function y(t,e){var n=e.tutorial,r=void 0!==n&&n,i=t.songInfo,o=i.difficulty>=5;return r?new v:o?_:1===i.level||2===i.level?new d(p):3===i.level?new d(h):4===i.level?new d(f):5===i.level?new d(l):_}function g(t){return function(e,n){for(var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:_).getTimegates(e,n),i=Math.abs(e-n),o=0;o<r.length;o++)if(i<t(r[o]))return r[o].value;return e<n?u:s}}var m=g(i.a.property("timegate")),b=g(i.a.property("endTimegate"));function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_;return i.a.find(e.getTimegates(null,null),{value:t}).timegate}function x(t){return t>=4}function k(t){return t===s||x(t)}function S(t){return 1===t?100:2===t?80:3===t?50:0}},717:function(t,e,n){t.exports=n.p+"7d6d69a86d70e4e52079c5ce873435c6.jpg"},723:function(t,e,n){"use strict";n(1123);var r=n(28),i=n.n(r),o=n(67),a=n.n(o),u=n(30),s=n.n(u),c=n(190),l=(n(1121),n(140)),f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var h=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.a.Component),f(e,[{key:"render",value:function(){var t=this.props.song;return i.a.createElement("div",{className:"LoadingSceneSongInfo"},i.a.createElement("div",{className:"LoadingSceneSongInfoのgenre"},t.genre),i.a.createElement("div",{className:"LoadingSceneSongInfoのtitle"},t.title),Object(l.a)()?null:t.subtitles.map(function(t){return i.a.createElement("div",{key:t,className:"LoadingSceneSongInfoのsubtitle"},t)}),i.a.createElement("div",{className:"LoadingSceneSongInfoのartist"},t.artist),t.subartists.map(function(t){return i.a.createElement("div",{key:t,className:"LoadingSceneSongInfoのsubartist"},t)}))}}]),e}();h.propTypes={song:s.a.shape({title:s.a.string,artist:s.a.string,genre:s.a.string,subtitles:s.a.arrayOf(s.a.string),subartists:s.a.arrayOf(s.a.string),difficulty:s.a.number,level:s.a.number}).isRequired};var p=h,d=(n(1119),n(1117),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());var v=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.a.Component),d(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"LoadingSceneProgressBar"},i.a.createElement("div",{className:"LoadingSceneProgressBarのbar",style:{width:this.props.width}}))}}]),e}();v.propTypes={width:s.a.oneOfType([s.a.string,s.a.number]).isRequired};var _=v,y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function g(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var m=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=r=g(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),r.renderItem=function(t){var e=t.text,n=t.progressText,r=t.progress,o=Math.round(100*r||0).toString()+"%",a=n?" ("+n+")":"";return i.a.createElement("div",{key:e,className:"LoadingSceneProgressのitem"},i.a.createElement(_,{width:o}),e,i.a.createElement("span",{className:"LoadingSceneProgressのextra"},a))},g(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.a.Component),y(e,[{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"LoadingSceneProgress"},this.props.tasks.value.map(function(e){return t.renderItem(e)}))}},{key:"componentDidMount",value:function(){var t=this;this._unsubscribe=this.props.tasks.watch(function(){return t.forceUpdate()})}},{key:"componentWillUnmount",value:function(){this._unsubscribe()}}]),e}();m.propTypes={tasks:s.a.object};var b=m,w=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var x=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.a.Component),w(e,[{key:"render",value:function(){return i.a.createElement(c.a,{className:"LoadingScene",ref:"scene"},i.a.createElement("div",{className:"LoadingSceneのimage",ref:"eyecatch"}),i.a.createElement("div",{className:"LoadingSceneのinfo"},i.a.createElement(p,{song:this.props.song})),i.a.createElement(b,{tasks:this.props.tasks}),i.a.createElement("div",{className:"LoadingSceneのflash"}),i.a.createElement("div",{className:"LoadingSceneのcover"}))}},{key:"componentDidMount",value:function(){var t=this;this.props.eyecatchImagePromise&&this.props.eyecatchImagePromise.then(function(e){a.a.findDOMNode(t.refs.eyecatch).appendChild(e)}),this.props.registerTeardownCallback(function(){return a.a.findDOMNode(t.refs.scene).classList.add("is-exiting"),Promise.delay(500)})}}]),e}();x.propTypes={song:s.a.shape({title:s.a.string,artist:s.a.string,genre:s.a.string,subtitles:s.a.arrayOf(s.a.string),subartists:s.a.arrayOf(s.a.string),difficulty:s.a.number,level:s.a.number}),tasks:s.a.object,eyecatchImagePromise:s.a.object,registerTeardownCallback:s.a.func};e.a=x},725:function(t,e,n){"use strict";n.r(e);var r=n(8),i=n(1083),o=n.n(i),a=n(3),u=n(146),s=n(78),c=n.n(s),l=n(336),f=n(7),h=n(32);function p(t){var e={},n={},r=[];function i(t,n,i,u){var s=new a.a;n&&r.push({text:n,progress:s}),e[t]=function(){return Promise.all(i.map(o)).then(function(t){return u.apply(void 0,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t.concat([s])))})}}function o(t){return n[t]||(n[t]=e[t]())}function u(){return r.map(function(t){return{text:t.text,progress:t.progress.progress,progressText:t.progress.toString()}})}i.bar=function(t,e){r.push({text:t,progress:e})};var s=t(i,o),c=new f.a(u()),l=Object(h.throttle)(function(){c.value=u()},16),p=!0,d=!1,v=void 0;try{for(var _,y=r[Symbol.iterator]();!(p=(_=y.next()).done);p=!0){_.value.progress.watch(l)}}catch(t){d=!0,v=t}finally{try{!p&&y.return&&y.return()}finally{if(d)throw v}}return{tasks:c,promise:s,get:o}}var d=n(597),v=n(596),_=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var g=function(){function t(e){var n=e.game,r=e.samples,i=e.master;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o=n.options.soundVolume;this._master=i,this._context=i.audioContext,this._players=new Map(n.players.map(function(t){return[t,new v.a({player:t,samples:r,master:i,volume:o})]}))}return y(t,[{key:"destroy",value:function(){this._master.destroy()}},{key:"unmute",value:function(){this._master.unmute()}},{key:"update",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=this._players[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,s=_(u,2),c=s[0];s[1].update(t,e.player(c))}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"context",get:function(){return this._context}}]),t}(),m=n(157),b=n(147),w=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.unmute(),this._context=e.context,this._offset=[],this._sum=0,this.update()}return w(t,[{key:"update",value:function(){var t=Object(b.a)()/1e3,e=t-this._context.currentTime;for(this._offset.push(e),this._sum+=e;this._offset.length>60;)this._sum-=this._offset.shift();this.time=t-this._sum/this._offset.length}}]),t}(),k=n(264),S=n(595),E=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var j=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._clock=e,this._input=n,this._now=b.a.synchronized(),this.startTime=null,this.readyFraction=0}return E(t,[{key:"update",value:function(){this._checkStartGame(),this.time=this._calculateTime()}},{key:"_checkStartGame",value:function(){this.started||(this._input.get("start").value&&(this.gettingStarted=!0),this.gettingStarted&&!this._input.get("start").value&&(this.startTime=this._clock.time+this._getWait()),this.started||(this.readyFraction=1-this._getWait()))}},{key:"_getWait",value:function(){var t=this._now()/1e3;return Math.ceil(t)-t}},{key:"_calculateTime",value:function(){var t=null===this.startTime?0:this._clock.time-this.startTime;return t<0&&(t=0),t<1?(Math.pow(t,6)-1)/6-1/30:t-31/30}},{key:"started",get:function(){return null!==this.startTime}}]),t}(),C=n(263);var A=function(t){var e=new C.a(window,{exclusive:!0}),n=t.players[0].options.input.keyboard;return{name:"GameKBPlugin",get:function(){var t=e.update(),r={p1_1:t[n[1]||"83"],p1_2:t[n[2]||"68"],p1_3:t[n[3]||"70"],p1_4:t[n[4]||"32"],p1_5:t[n[5]||"74"],p1_6:t[n[6]||"75"],p1_7:t[n[7]||"76"],p1_SC:t[n.SC||"65"]||-t[n.SC2||"16"],p1_speedup:t[38],p1_speeddown:t[40],start:t[13]||t["gamepad.0.button.9"],select:t[18]||t["gamepad.0.button.8"]};return(r.start||r.select)&&((r.p1_1||r.p1_3||r.p1_5||r.p1_7)&&(r.p1_speeddown=!0),(r.p1_2||r.p1_4||r.p1_6)&&(r.p1_speedup=!0)),r},destroy:function(){e.dispose()}}},O=n(594),T=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var P=function(){function t(e){var n=this,r=e.game,i=e.display,o=e.audio;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._audioInputLatency=r.options.audioInputLatency,this._game=r,this._display=i,this._audio=o,this._clock=new x(this._audio),this._input=new k.a,this._timer=new j(this._clock,this._input),this._state=new S.a(r),this._promise=new Promise(function(t){return n._resolvePromise=t}),this._display.setEscapeHandler(function(){return n._quitGame()}),this._display.setReplayHandler(function(){return n._replayGame()}),m.a.enabled&&this.enableBenchmark()}return T(t,[{key:"start",value:function(){var t=this;this._handleEscape(),this._display.start(),this._input.use(new A(this._game)),this._input.use(new O.a(this._display.context));var e=!1;requestAnimationFrame(function n(){e||(t._update(),requestAnimationFrame(n))}),this._endGameLoop=function(){return e=!0}}},{key:"_handleEscape",value:function(){var t=this,e=function(e){27===e.keyCode?(e.preventDefault(),e.stopPropagation(),t._quitGame()):112===e.keyCode&&(e.preventDefault(),e.stopPropagation(),t._replayGame())};window.addEventListener("keydown",e,!0),this._promise.finally(function(){window.removeEventListener("keydown",e,!0)}).done()}},{key:"_quitGame",value:function(){this._resolvePromise({finished:!1,replay:!1})}},{key:"_replayGame",value:function(){this._resolvePromise({finished:!1,replay:!0})}},{key:"destroy",value:function(){this._endGameLoop(),this._audio.destroy(),this._input.destroy(),this._display.destroy()}},{key:"_update",value:function(){this._clock.update(),this._input.update(),this._timer.update();var t=this._timer.time,e=this._audioInputLatency;this._latestGameTime=t,this._state.update(t-e,this._input,this._timer),this._audio.update(t,this._state),this._display.update(t-e,this._state),this._state.finished&&this._resolvePromise&&(this._resolvePromise({finished:!0}),this._resolvePromise=null)}},{key:"enableBenchmark",value:function(){m.a.benchmark("update",this,"_update"),m.a.benchmark("input_update",this._input,"update"),m.a.benchmark("state_update",this._state,"update"),m.a.benchmark("audio_update",this._audio,"update"),m.a.benchmark("display_update",this._display,"update"),m.a.benchmark("display_compute",this._display,"_getData"),m.a.benchmark("display_push",this._display._context._instance,"push"),m.a.benchmark("display_render",this._display._context._renderer,"render")}},{key:"game",get:function(){return this._game}},{key:"display",get:function(){return this._display}},{key:"audio",get:function(){return this._audio}},{key:"promise",get:function(){return this._promise}},{key:"state",get:function(){return this._state}},{key:"latestGameTime",get:function(){return this._latestGameTime}}]),t}(),R=n(593),I=n(586);var B=function(t,e){return t.file(e).then(function(t){return t.read()}).then(function(t){return new Blob([t])}).then(function(t){return URL.createObjectURL(t)}).then(function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src=t})})};function M(t){var e=t.assets,i=t.bms,s=t.songId;return p(function(f,h){f("Scintillator","Loading game engine",[],function(t){return new Promise(function(e){new r.a(t).use(function(){Promise.all([n.e(16),n.e(14)]).then(n.bind(null,681)).then(function(t){return e(t)})})})}),f("Skin","Loading skin",["Scintillator"],function(e,n){return e.load(e.getSkinUrl({displayMode:t.displayMode}),n)}),f("SkinContext",null,["Scintillator","Skin"],function(t,e){return new t.Context(e)}),e.progress&&(e.progress.current&&f.bar("Loading package",e.progress.current),e.progress.all&&f.bar("Loading song packages",e.progress.all)),f("Notechart","Loading "+t.bms.name,[],c.a.wrap(regeneratorRuntime.mark(function e(n){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new o.a,e.next=3,i.read(n);case 3:return a=e.sent,e.next=6,r.load(a,t.bms,t.options.players[0]);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))),f("EyecatchImage",null,["Notechart"],function(t){return B(e,t.eyecatchImage)}),f("BackgroundImage",null,["Notechart"],function(t){return B(e,t.backgroundImage)});var p=new a.a,v=new a.a;return f.bar("Loading audio",p),f.bar("Decoding audio",v),f("SamplingMaster",null,[],function(){return new u.c}),f("Video",t.videoUrl?"Loading video":null,["Notechart"],function(e,n){return t.videoUrl?new Promise(function(e,r){var i=document.createElement("video");if(!i.canPlayType("video/webm"))return e(null);function o(t){i.buffered&&i.buffered.length&&i.duration&&n.report(i.buffered.end(0)-i.buffered.start(0),i.duration)}function a(){i.removeEventListener("progress",o,!0),i.removeEventListener("canplaythrough",u,!0),i.removeEventListener("error",s,!0),i.removeEventListener("abort",s,!0)}function u(){a();var r=i.duration||100;n.report(r,r),e({element:i,offset:t.videoOffset})}function s(){a(),console.warn("Cannot load video... Just skip it!"),e(null)}i.src=t.videoUrl,i.preload="auto",i.addEventListener("progress",o,!0),i.addEventListener("canplaythrough",u,!0),i.addEventListener("error",s,!0),i.addEventListener("abort",s,!0),i.load()}):Promise.resolve(null)}),f("Game",null,["Notechart"],function(e){return new d.a([e],t.options)}),f("GameDisplay",null,["Game","Skin","SkinContext","Video"],function(t,e,n,r){return new R.a({game:t,skin:e,context:n,backgroundImagePromise:h("BackgroundImage"),video:r})}),f("Samples",null,["SamplingMaster","Game"],function(t,n){return l.a.receiveSongId(s),new I.a(e,t).loadFiles(n.samples,p,v)}),f("GameAudio",null,["Game","Samples","SamplingMaster"],function(t,e,n){return new g({game:t,samples:e,master:n})}),f("GameController",null,["Game","GameDisplay","GameAudio"],function(t,e,n){return new P({game:t,display:e,audio:n})}),h("GameController")})}n.d(e,"load",function(){return M})},73:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(255),i=function(){function t(t){this._segments=t.map(r.Segment)}return t.prototype._reached=function(t,e,n){if(t>=this._segments.length)return!1;var r=this._segments[t],i=e(r);return r.inclusive?n>=i:n>i},t.prototype._segmentAt=function(t,e){for(var n=0;n<this._segments.length;n++)if(!this._reached(n+1,t,e))return this._segments[n]},t.prototype.segmentAtX=function(t){return this._segmentAt(a,t)},t.prototype.segmentAtT=function(t){return this._segmentAt(o,t)},t.prototype.t=function(t){var e=this.segmentAtX(t);return e.t+(t-e.x)/(e.dx||1)},t.prototype.x=function(t){var e=this.segmentAtT(t);return e.x+(t-e.t)*e.dx},t.prototype.dx=function(t){return this.segmentAtT(t).dx},t}();e.Speedcore=i;var o=function(t){return t.t},a=function(t){return t.x}},79:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"c",function(){return u}),n.d(e,"b",function(){return s});var r=n(345),i=n.n(r),o=function(t){return function(e){return null!==e.progress?t(e):""}},a=o(function(t){return i()(t.current)+" / "+i()(t.total)}),u=o(function(t){return(t.current/t.total*100).toFixed(1)+"%"}),s=o(function(t){return t.extra+""})},94:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(603));e.uniq=i.default;var o=r(n(602));e.map=o.default;var a=r(n(601));e.values=a.default;var u=r(n(600));e.assign=u.default}}]);
//# sourceMappingURL=game-de4028293170329acc85.js.map