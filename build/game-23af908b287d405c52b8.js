(this.webpackJsonp=this.webpackJsonp||[]).push([[9,19],{100:function(t,e,n){"use strict";e.a=function(t){return{as:e=>new Promise((function(n,r){let i=new FileReader;switch(i.onload=function(){n(i.result)},i.onerror=function(){r(new Error("Unable to read from Blob"))},e){case"arraybuffer":i.readAsArrayBuffer(t);break;case"text":i.readAsText(t)}}))}}},1026:function(t,e,n){t.exports=n.p+"build/7d6d69a86d70e4e52079c5ce873435c6.jpg"},1081:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(81),i=n.n(r);function o(t){return function(e){let n=()=>!1;return i()(window).on("touchstart",n),function(t,e){var{view:n,wrapper:r}=t,{width:o,height:u}=n;function a(){var t=Math.min(window.innerWidth/o,window.innerHeight/u);n.style.width=Math.round(o*t)+"px",n.style.height=Math.round(u*t)+"px",r.style.width=Math.round(o*t)+"px",r.style.height=Math.round(u*t)+"px";var e=(window.innerHeight-u*t)/2;r.style.marginTop=Math.round(e)+"px"}e.appendChild(r),a(),i()(window).on("resize",a)}(t,e),{teardown(){i()(window).off("touchstart",n)}}}}},1082:function(t,e,n){var r=n(1083);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},1083:function(t,e,n){var r=n(9);(t.exports=n(1)(!1)).push([t.i,'@charset "UTF-8";\n.LoadingScene {\n  background: url('+r(n(1026))+") center no-repeat;\n  background-size: cover;\n}\n.LoadingSceneのinfo {\n  position: absolute;\n  top: 40%;\n  left: 0;\n  right: 0;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n.LoadingScene .LoadingSceneSongInfo {\n  -webkit-animation: loading-scene--loading-scene-song-info--animation 1s ease;\n          animation: loading-scene--loading-scene-song-info--animation 1s ease;\n}\n.LoadingScene .LoadingSceneProgress {\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n}\n.LoadingSceneのimage {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.LoadingSceneのimage img {\n  width: 100%;\n  height: 100%;\n  display: block;\n  object-fit: cover;\n  -webkit-animation: loading-scene--eyecatch-fade 0.8s;\n          animation: loading-scene--eyecatch-fade 0.8s;\n}\n.LoadingSceneのflash {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  opacity: 0;\n  pointer-events: none;\n  background: white;\n  -webkit-animation: loading-scene--flash-animation 0.8s ease-out;\n          animation: loading-scene--flash-animation 0.8s ease-out;\n}\n.LoadingSceneのcover {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  opacity: 0;\n  pointer-events: none;\n  background: black;\n}\n.Scene.is-exiting .LoadingSceneのinfo {\n  -webkit-animation: loading-scene--info-exit 0.3s linear;\n          animation: loading-scene--info-exit 0.3s linear;\n}\n.Scene.is-exiting .LoadingSceneのflash {\n  -webkit-animation: loading-scene--flash-exit 0.3s ease;\n          animation: loading-scene--flash-exit 0.3s ease;\n}\n.Scene.is-exiting .LoadingSceneのcover {\n  -webkit-animation: loading-scene--cover-exit 0.3s linear;\n          animation: loading-scene--cover-exit 0.3s linear;\n  opacity: 1;\n}\n\n@-webkit-keyframes loading-scene--eyecatch-fade {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@keyframes loading-scene--eyecatch-fade {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@-webkit-keyframes loading-scene--loading-scene-song-info--animation {\n  0% {\n    -webkit-transform: scale(1.5, 0.02);\n            transform: scale(1.5, 0.02);\n  }\n  100% {\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n}\n@keyframes loading-scene--loading-scene-song-info--animation {\n  0% {\n    -webkit-transform: scale(1.5, 0.02);\n            transform: scale(1.5, 0.02);\n  }\n  100% {\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n}\n@-webkit-keyframes loading-scene--info-exit {\n  0% {\n    -webkit-transform: translateY(-50%) scale(1, 1);\n            transform: translateY(-50%) scale(1, 1);\n  }\n  100% {\n    -webkit-transform: translateY(-50%) scale(2, 2);\n            transform: translateY(-50%) scale(2, 2);\n  }\n}\n@keyframes loading-scene--info-exit {\n  0% {\n    -webkit-transform: translateY(-50%) scale(1, 1);\n            transform: translateY(-50%) scale(1, 1);\n  }\n  100% {\n    -webkit-transform: translateY(-50%) scale(2, 2);\n            transform: translateY(-50%) scale(2, 2);\n  }\n}\n@-webkit-keyframes loading-scene--cover-exit {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@keyframes loading-scene--cover-exit {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@-webkit-keyframes loading-scene--flash-animation {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n@keyframes loading-scene--flash-animation {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n@-webkit-keyframes loading-scene--flash-exit {\n  0% {\n    opacity: 0.5;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n@keyframes loading-scene--flash-exit {\n  0% {\n    opacity: 0.5;\n  }\n  100% {\n    opacity: 0;\n  }\n}",""])},1084:function(t,e,n){var r=n(1085);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},1085:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,'@charset "UTF-8";\n.LoadingSceneSongInfo {\n  background: rgba(255, 255, 255, 0.96);\n  color: #191817;\n  text-align: center;\n  padding: 25px 0px;\n  box-shadow: 0 2px 18px rgba(0, 0, 0, 0.2);\n}\n.LoadingSceneSongInfoのgenre {\n  font-size: 1.2rem;\n}\n.LoadingSceneSongInfoのtitle {\n  font-size: 3.2rem;\n  font-weight: bold;\n}\n.LoadingSceneSongInfoのsubtitle {\n  font-size: 2.4rem;\n}\n.LoadingSceneSongInfoのartist {\n  font-size: 1.6rem;\n  margin-top: 0.8ex;\n}\n.LoadingSceneSongInfoのsubartist {\n  font-size: 1rem;\n}',""])},1086:function(t,e,n){var r=n(1087);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},1087:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,'@charset "UTF-8";\n.LoadingSceneProgress {\n  color: #333;\n  font-size: 11px;\n}\n.LoadingSceneProgress .LoadingSceneProgressBar {\n  display: inline-block;\n  vertical-align: middle;\n  width: 48px;\n  margin-right: 4px;\n  position: relative;\n  top: -1px;\n}\n.LoadingSceneProgressのextra {\n  font-size: 83%;\n  opacity: 0.7;\n}',""])},1088:function(t,e,n){var r=n(1089);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},1089:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,'@charset "UTF-8";\n.LoadingSceneProgressBar {\n  border: 1px solid rgba(0, 0, 0, 0.6);\n  padding: 1px;\n}\n.LoadingSceneProgressBarのbar {\n  height: 8px;\n  background: rgba(0, 0, 0, 0.6);\n  width: 0%;\n}',""])},1125:function(t,e,n){"use strict";(function(t){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},u=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.NotechartLoader=void 0;var c=o(n(127)),l=o(n(650)),f=o(n(1126)),h=s(n(707)),p=function(e){return t.isBuffer(e)?e:t.from(new Uint8Array(e))},d=function(){function t(){}return t.prototype.load=function(t,e,n){return e.name.match(/\.bmson$/i)?this.loadBmson(t,e,n):this.loadBMS(t,e,n)},t.prototype.loadBMS=function(t,e,n){return u(this,void 0,void 0,(function(){var r,i,o,u,s;return a(this,(function(a){switch(a.label){case 0:return r=p(t),i=c.Reader.getReaderOptionsFromFilename(e.name),[4,h.default.promisify(c.Reader.readAsync)(r,i)];case 1:return o=a.sent(),u=c.Compiler.compile(o),s=u.chart,[2,l.fromBMSChart(s,n)]}}))}))},t.prototype.loadBmson=function(t,e,n){return u(this,void 0,void 0,(function(){var e,r;return a(this,(function(i){return e=p(t),r=e.toString("utf-8"),[2,f.load(r,n)]}))}))},t}();e.NotechartLoader=d,e.default=d}).call(this,n(37).Buffer)},1126:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.load=void 0;var a=o(n(1127)),s=o(n(127)),c=u(n(338));function l(t){var e=(t.info&&t.info.judge_rank&&+t.info.judge_rank||100)/100;return[18*e,40*e]}e.load=function(t,e){var n=JSON.parse(t),r=a.songInfoForBmson(n),i=a.musicalScoreForBmson(n),o=a.barLinesForBmson(n),u={notes:i.notes.all(),timing:i.timing,keysounds:i.keysounds,songInfo:r,positioning:new s.Positioning([{t:0,x:0,dx:1,inclusive:!0}]),spacing:new s.Spacing([]),barLines:o,images:{eyecatch:n.info.eyecatch_image,background:n.info.back_image},expertJudgmentWindow:l(n)};return new c.default(u,e)}},1127:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},u=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return u},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.keysForBmson=e.hasScratch=e.beatForPulseForBmson=e._slicesForNotesAndTiming=e.musicalScoreForBmson=e.timingInfoForBmson=e.barLinesForBmson=e.songInfoForBmson=void 0;var f=l(n(651)),h=o(n(127)),p=o(n(749)),d=o(n(750));function v(t){if(!t.version)return p.timingInfoForBmson(t);var e=m(t);return{initialBPM:t.info.init_bpm,actions:s(s([],a((t.bpm_events||[]).map((function(t){var n=t.y,r=t.bpm;return{type:"bpm",beat:e(n),bpm:r}}))),!1),a((t.stop_events||[]).map((function(t){var n=t.y,r=t.duration;return{type:"stop",beat:e(n),stopBeats:e(Math.floor(r))}}))),!1)}}function _(t){return t.version?t.sound_channels:t.soundChannel}u(n(1128),e),e.songInfoForBmson=function(t){var e=t.info,n={};return e.title&&(n.title=e.title),e.artist&&(n.artist=e.artist),e.genre&&(n.genre=e.genre),e.level&&(n.level=e.level),n.subtitles=function(){if(!t.version)return["Warning: legacy bmson"];var n=[];e.chart_name&&"string"==typeof e.chart_name&&n.push(e.chart_name);e.subtitle&&"string"==typeof e.subtitle&&n.push.apply(n,s([],a(e.subtitle.split("\n")),!1));return n}(),e.subartists&&(n.subartists=e.subartists),new h.SongInfo(n)},e.barLinesForBmson=function(t){if(!t.version)return p.barLinesForBmson(t);var e=m(t),n=t.lines;return(0,f.default)(n).map((function(t){var n=t.y;return e(n)})).sortBy().value()},e.timingInfoForBmson=v,e.musicalScoreForBmson=function(t){var e=function(t){var e=v(t),n=e.initialBPM,r=e.actions;return new h.Timing(n,r)}(t),n=function(t,e){var n,r,i,o,u=1,a=m(t),s=[],l={},h=_(t);if(h)try{for(var p=c(h),v=p.next();!v.done;v=p.next()){var g=v.value,b=g.name,w=g.notes,x=f.default.sortBy(w,"y"),S=u++,E=f.default.padStart(""+S,4,"0"),k=d.slicesForNotesAndTiming(w,e,{beatForPulse:a});l[E]=b;try{for(var j=(i=void 0,c(x)),A=j.next();!A.done;A=j.next()){var C=A.value,O=C.x,T=C.y,P=C.l,F={column:y(O),beat:a(T),keysound:E,endBeat:void 0};P>0&&(F.endBeat=a(T+P));var M=k.get(T);M&&(Object.assign(F,M),s.push(F))}}catch(t){i={error:t}}finally{try{A&&!A.done&&(o=j.return)&&o.call(j)}finally{if(i)throw i.error}}}}catch(t){n={error:t}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}return{notes:s,keysounds:l}}(t,e),r=n.notes,i=n.keysounds;return{timing:e,notes:new h.Notes(r),keysounds:new h.Keysounds(i)}};var g=n(749);function m(t){if(!t.version)return p.beatForLoc;var e=t.info&&t.info.resolution||240;return function(t){return t/e}}function y(t){switch(t){case 1:return"1";case 2:return"2";case 3:return"3";case 4:return"4";case 5:return"5";case 6:return"6";case 7:return"7";case 8:return"SC"}}Object.defineProperty(e,"_slicesForNotesAndTiming",{enumerable:!0,get:function(){return g._slicesForNotesAndTiming}}),e.beatForPulseForBmson=m,e.hasScratch=function(t){var e,n,r,i,o=_(t);if(o)try{for(var u=c(o),a=u.next();!a.done;a=u.next()){var s=a.value.notes;try{for(var l=(r=void 0,c(s)),f=l.next();!f.done;f=l.next()){var h=f.value.x;if(8===h||18===h)return!0}}catch(t){r={error:t}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return!1},e.keysForBmson=function(t){var e,n,r,i,o=_(t),u=!1,a=!1,s=!1;if(o)try{for(var l=c(o),f=l.next();!f.done;f=l.next()){var h=f.value.notes;try{for(var p=(r=void 0,c(h)),d=p.next();!d.done;d=p.next()){var v=d.value.x;u=!0,v>=11&&v<=20&&(a=!0),6!==v&&7!==v&&16!==v&&17!==v||(s=!0)}}catch(t){r={error:t}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return u?a?s?"14K":"10K":s?"7K":"5K":"empty"}},1128:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},118:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(119),i=n(50),o=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))};class u{constructor(t){this.url=t}read(t){return Object(r.a)(this.url).as("arraybuffer",t)}resolveUrl(){return o(this,void 0,void 0,(function*(){return Promise.resolve(this.url)}))}get name(){return Object(i.basename)(this.url)}}class a{constructor(t){this.base=t}file(t){return o(this,void 0,void 0,(function*(){const e=t.split("/").map(t=>encodeURIComponent(t)).join("/");return new u(new URL(e,this.base).href)}))}}e.b=u},119:function(t,e,n){"use strict";var r=n(78),i=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))};e.a=function(t,{getRetryDelay:e=(()=>1e3+4e3*Math.random())}={}){return{as(n,o){return i(this,void 0,void 0,(function*(){let i=!1;for(let u=1;;u++)try{return yield new Promise((e,u)=>{var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType=n,a.onload=()=>{200==+a.status?e(a.response):(403!=+a.status&&404!=+a.status||(i=!0),u(new Error(`Unable to download ${t}: HTTP ${a.status}`)))},a.onerror=()=>u(new Error("Unable to download "+t)),o&&(o.formatter=r.a,a.onprogress=t=>o.report(t.loaded,t.total)),a.send(null)})}catch(n){if(console.error(`Unable to download ${t} [attempt ${u}]`,n),u>=3||i)throw n;const r=e();yield new Promise(t=>setTimeout(t,r))}}))}}}},120:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.assign=e.values=e.map=e.uniq=void 0;var i=r(n(745));e.uniq=i.default;var o=r(n(746));e.map=o.default;var u=r(n(747));e.values=u.default;var a=r(n(748));e.assign=a.default},125:function(t,e,n){"use strict";var r=n(188);e.a=r.a},127:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},u=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.Compiler=e.Reader=void 0;var a=o(n(325));e.Reader=a;var s=o(n(327));e.Compiler=s,u(n(328),e),u(n(47),e),u(n(192),e),u(n(193),e),u(n(83),e),u(n(194),e),u(n(330),e),u(n(333),e),u(n(334),e),u(n(335),e),u(n(336),e),u(n(337),e)},137:function(t,e,n){"use strict";e.a=document.querySelector("#scene-root")},141:function(t,e,n){"use strict";n.d(e,"f",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return s})),n.d(e,"a",(function(){return c}));var r=n(2);function i(){return"1"===r.a.BEMUSE_SHOW_OPTIONS}function o(){return"1"===r.a.BEMUSE_BENCHMARK}function u(){return"1"===r.a.BEMUSE_NO_FULLSCREEN}function a(){return"1"===r.a.BEMUSE_SHOW_ABOUT}function s(){return"1"===r.a.BEMUSE_SHOW_MODE_SELECT}function c(){return"1"===r.a.BEMUSE_TITLE_DISPLAY}},1479:function(t,e,n){"use strict";n.r(e),n.d(e,"load",(function(){return P}));var r=n(1125),i=n.n(r),o=n(125),u=n(97),a=n(280),s=n(652),c=n(189),l=n(34);var f=n(751),h=n(752);var p=class{constructor({game:t,samples:e,master:n}){const r=t.options.soundVolume;this._master=n,this._context=n.audioContext,this._players=new Map(t.players.map(t=>[t,new h.a({player:t,samples:e,master:n,volume:r})]))}destroy(){this._master.destroy()}unmute(){this._master.unmute()}get context(){return this._context}update(t,e){for(let[n,r]of this._players)r.update(t,e.player(n))}},d=n(213),v=n(183);var _=class{constructor(t){t.unmute(),this._context=t.context,this._offset=[],this._sum=0,this.update()}update(){let t=Object(v.a)()/1e3,e=t-this._context.currentTime;for(this._offset.push(e),this._sum+=e;this._offset.length>60;)this._sum-=this._offset.shift();this.time=t-this._sum/this._offset.length}},g=n(424),m=n(753);var y=class{constructor(t,e){this._clock=t,this._input=e,this._now=v.a.synchronized(),this._lastRecordedTimeSinceStart=0,this.startTime=null,this._pauseAtTimerValue=1/0,this._unpausedTimeSinceStart=0,this._unpausedTimerValue=0,this.readyFraction=0,this.gettingStarted=!1}get started(){return null!==this.startTime}update(){this._checkStartGame(),this.time=this._calculateTime()}_checkStartGame(){this.started||(this._input.get("start").value&&(this.gettingStarted=!0),this.gettingStarted&&!this._input.get("start").value&&(this.startTime=this._clock.time+this._getWait()),this.started||(this.readyFraction=1-this._getWait()))}_getWait(){let t=this._now()/1e3;return Math.ceil(t)-t}_calculateTime(){var t=null===this.startTime?0:this._clock.time-this.startTime;if(t<0&&(t=0),t<1)return(Math.pow(t,6)-1)/6-1/30;{const e=t-31/30;this._lastRecordedTimeSinceStart=e;const n=this._unpausedTimerValue+(e-this._unpausedTimeSinceStart);return Math.min(n,this._pauseAtTimerValue)}}pauseAt(t){this._unpausedTimerValue+(this._lastRecordedTimeSinceStart-this._unpausedTimeSinceStart)>=this._pauseAtTimerValue&&(this._unpausedTimerValue=this._pauseAtTimerValue,this._unpausedTimeSinceStart=this._lastRecordedTimeSinceStart),this._pauseAtTimerValue=t}},b=n(423);class w{constructor(){this.input=[0,0],this.last=0,this.output=0}combine(...t){for(let e=0;e<2;++e)t[e]&&this.input[e]<=0?(this.input[e]=1,this.last=e):!t[e]&&this.input[e]>0?this.input[e]=-1:this.input[e]%2!=0&&(this.input[e]+=1);return 1!==this.input[0]&&1!==this.input[1]||(this.output=0===this.last?1:-1),this.input[this.last]<=0&&(this.output=0),this.output}}var x=function(t){const e=new b.a(window,{exclusive:!0,continuous:t.players[0].options.input.continuous,sensitivity:t.players[0].options.input.sensitivity});let n=t.players[0].options.input.keyboard;const r=new w,i=Object.values(n).indexOf("gamepad.0.button.8")<0,o=Object.values(n).indexOf("gamepad.0.button.9")<0;return{name:"GameKBPlugin",get(){const t=e.update(),u={p1_1:t[n[1]||"83"],p1_2:t[n[2]||"68"],p1_3:t[n[3]||"70"],p1_4:t[n[4]||"32"],p1_5:t[n[5]||"74"],p1_6:t[n[6]||"75"],p1_7:t[n[7]||"76"],p1_SC:r.combine(t[n.SC||"65"],t[n.SC2||"16"]),p1_speedup:t[38],p1_speeddown:t[40],start:t[13]||o&&t["gamepad.0.button.9"],select:t[18]||i&&t["gamepad.0.button.8"]};return(u.start||u.select)&&((u.p1_1||u.p1_3||u.p1_5||u.p1_7)&&(u.p1_speeddown=!0),(u.p1_2||u.p1_4||u.p1_6)&&(u.p1_speedup=!0)),u},destroy(){e.dispose()}}},S=n(754),E=n(321);var k=class{constructor({game:t,display:e,audio:n}){this._audioInputLatency=t.options.audioInputLatency,this._game=t,this._display=e,this._audio=n,this._clock=new _(this._audio),this._input=new g.a,this._timer=new y(this._clock,this._input),this._state=new m.a(t),this._promise=new Promise(t=>this._resolvePromise=t),this._display.setEscapeHandler(()=>this._quitGame()),this._display.setReplayHandler(()=>this._replayGame()),this.initializeBenchmark(),this.initializeTestModeHooks()}get game(){return this._game}get display(){return this._display}get audio(){return this._audio}get promise(){return this._promise}get state(){return this._state}get latestGameTime(){return this._latestGameTime}start(){this._handleEscape(),this._display.start(),this._input.use(new x(this._game)),this._input.use(new S.a(this._display.context));let t=!1,e=()=>{t||(this._update(),requestAnimationFrame(e))};requestAnimationFrame(e),this._endGameLoop=()=>t=!0}_handleEscape(){let t=t=>{27===t.keyCode?(t.preventDefault(),t.stopPropagation(),this._quitGame()):112===t.keyCode&&(t.preventDefault(),t.stopPropagation(),this._replayGame())};window.addEventListener("keydown",t,!0),this._promise.finally((function(){window.removeEventListener("keydown",t,!0)})).done()}_quitGame(){this._resolvePromise({finished:!1,replay:!1})}_replayGame(){this._resolvePromise({finished:!1,replay:!0})}destroy(){this._endGameLoop(),this._audio.destroy(),this._input.destroy(),this._display.destroy()}_update(){this._clock.update(),this._input.update(),this._timer.update();let t=this._timer.time,e=this._audioInputLatency;this._latestGameTime=t,this._state.update(t-e,this._input,this._timer),this._audio.update(t,this._state),this._display.update(t-e,this._state),this._state.finished&&this._resolvePromise&&(this._resolvePromise({finished:!0}),this._resolvePromise=null)}initializeBenchmark(){d.a.enabled&&(d.a.benchmark("update",this,"_update"),d.a.benchmark("input_update",this._input,"update"),d.a.benchmark("state_update",this._state,"update"),d.a.benchmark("audio_update",this._audio,"update"),d.a.benchmark("display_update",this._display,"update"),d.a.benchmark("display_compute",this._display,"_getData"),d.a.benchmark("display_push",this._display._context._instance,"push"),d.a.benchmark("display_render",this._display._context._renderer,"render"))}initializeTestModeHooks(){E.isTestModeEnabled()&&E.setGameLifecycleHandler({pauseAt:t=>(this._timer.pauseAt(t),new Promise(e=>{const n=setInterval(()=>{this._timer.time>=t&&(clearInterval(n),e())})})),unpause:()=>{this._timer.pauseAt(1/0)},getScore:()=>{const t=this._state;return t.player(t.game.players[0]).stats.score}})}},j=n(755),A=n(763);var C=function(t,e){return t.file(e).then(t=>t.read()).then(t=>new Blob([t])).then(t=>URL.createObjectURL(t)).then(t=>new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=n,r.src=t}))},O=n(693),T=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))};function P(t){const e=t.assets,r=t.bms,h=t.songId;return function(t){let e={},n={},r=[];function i(t,n,i,a){let s=new o.a;n&&r.push({text:n,progress:s}),e[t]=function(){return Promise.all(i.map(u)).then(t=>a(...t.concat([s])))}}function u(t){return n[t]||(n[t]=e[t]())}function a(){return r.map(t=>({text:t.text,progress:t.progress.progress,progressText:t.progress.toString()}))}i.bar=function(t,e){r.push({text:t,progress:e})};let s=t(i,u),f=new c.a(a()),h=Object(l.throttle)((function(){f.value=a()}),16);for(let t of r)t.progress.watch(h);return{tasks:f,promise:s,get:u}}((function(c,l){c("Scintillator","Loading game engine",[],(function(t){return Object(u.a)(t,Promise.all([n.e(17),n.e(10)]).then(n.bind(null,1050)))})),c("Skin","Loading skin",["Scintillator"],(function(e,n){return e.load(e.getSkinUrl({displayMode:t.displayMode}),n)})),c("SkinContext",null,["Scintillator","Skin"],(function(t,e){return new t.Context(e,{touchEventTarget:window})})),e.progress&&(e.progress.current&&c.bar("Loading package",e.progress.current),e.progress.all&&c.bar("Loading song packages",e.progress.all)),c("Notechart","Loading "+t.bms.name,[],e=>T(this,void 0,void 0,(function*(){let n=new i.a,o=yield r.read(e);return n.load(o,t.bms,t.options.players[0])}))),c("EyecatchImage",null,["Notechart"],(function(n){if(t.eyecatchImageUrl){const[n,r]=Object(O.a)(e,t.eyecatchImageUrl);return C(n,r)}return C(e,n.eyecatchImage)})),c("BackgroundImage",null,["Notechart"],(function(n){if(t.backImageUrl){const[n,r]=Object(O.a)(e,t.backImageUrl);return C(n,r)}return C(e,n.backgroundImage)}));let d=new o.a,v=new o.a;return c.bar("Loading audio",d),c.bar("Decoding audio",v),c("SamplingMaster",null,[],()=>T(this,void 0,void 0,(function*(){return new a.b}))),c("Video",t.videoUrl?"Loading video":null,["Notechart"],(function(n,r){return T(this,void 0,void 0,(function*(){if(!t.videoUrl)return Promise.resolve(null);let n=t.videoUrl;if(!n.includes("://")){const[t,r]=Object(O.a)(e,n),i=yield t.file(r);n=yield i.resolveUrl()}return new Promise((e,i)=>{const o=document.createElement("video");if(!o.canPlayType("video/webm"))return e(null);function u(){o.buffered&&o.buffered.length&&o.duration&&r.report(o.buffered.end(0)-o.buffered.start(0),o.duration)}function a(){o.removeEventListener("progress",u,!0),o.removeEventListener("canplaythrough",s,!0),o.removeEventListener("error",c,!0),o.removeEventListener("abort",c,!0)}function s(){a();const n=o.duration||100;r.report(n,n),e({element:o,offset:t.videoOffset})}function c(){a(),console.warn("Cannot load video... Just skip it!"),e(null)}o.src=n,o.preload="auto",o.addEventListener("progress",u,!0),o.addEventListener("canplaythrough",s,!0),o.addEventListener("error",c,!0),o.addEventListener("abort",c,!0),o.load()})}))})),c("Game",null,["Notechart"],e=>T(this,void 0,void 0,(function*(){return new f.a([e],t.options)}))),c("GameDisplay",null,["Game","SkinContext","Video"],(t,e,n)=>T(this,void 0,void 0,(function*(){return new j.a({game:t,context:e,backgroundImagePromise:l("BackgroundImage"),video:n})}))),c("Samples",null,["SamplingMaster","Game"],(function(t,n){s.a.receiveSongId(h);return new A.a(e,t).loadFiles(n.samples,d,v)})),c("GameAudio",null,["Game","Samples","SamplingMaster"],(t,e,n)=>T(this,void 0,void 0,(function*(){return new p({game:t,samples:e,master:n})}))),c("GameController",null,["Game","GameDisplay","GameAudio"],(t,e,n)=>T(this,void 0,void 0,(function*(){return new k({game:t,display:e,audio:n})}))),l("GameController")}))}},1482:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));n(1082);var r=n(26),i=n.n(r),o=n(66),u=n.n(o),a=n(29),s=n.n(a),c=n(204),l=(n(1084),n(141));class f extends i.a.Component{render(){const t=this.props.song;return i.a.createElement("div",{className:"LoadingSceneSongInfo"},i.a.createElement("div",{className:"LoadingSceneSongInfoのgenre"},t.genre),i.a.createElement("div",{className:"LoadingSceneSongInfoのtitle"},t.title),Object(l.a)()?null:t.subtitles.map(t=>i.a.createElement("div",{key:t,className:"LoadingSceneSongInfoのsubtitle"},t)),i.a.createElement("div",{className:"LoadingSceneSongInfoのartist"},t.artist),t.subartists.map(t=>i.a.createElement("div",{key:t,className:"LoadingSceneSongInfoのsubartist"},t)))}}f.propTypes={song:s.a.shape({title:s.a.string,artist:s.a.string,genre:s.a.string,subtitles:s.a.arrayOf(s.a.string),subartists:s.a.arrayOf(s.a.string),difficulty:s.a.number,level:s.a.number}).isRequired};n(1086),n(1088);class h extends i.a.Component{render(){return i.a.createElement("div",{className:"LoadingSceneProgressBar"},i.a.createElement("div",{className:"LoadingSceneProgressBarのbar",style:{width:this.props.width}}))}}h.propTypes={width:s.a.oneOfType([s.a.string,s.a.number]).isRequired};class p extends i.a.Component{constructor(){super(...arguments),this.renderItem=({text:t,progressText:e,progress:n})=>{let r=Math.round(100*n||0).toString()+"%",o=e?` (${e})`:"";return i.a.createElement("div",{key:t,className:"LoadingSceneProgressのitem"},i.a.createElement(h,{width:r}),t,i.a.createElement("span",{className:"LoadingSceneProgressのextra"},o))}}render(){return i.a.createElement("div",{className:"LoadingSceneProgress"},this.props.tasks.value.map(t=>this.renderItem(t)))}componentDidMount(){this._unsubscribe=this.props.tasks.watch(()=>this.forceUpdate())}componentWillUnmount(){this._unsubscribe()}}p.propTypes={tasks:s.a.object};class d extends i.a.Component{render(){return i.a.createElement(c.a,{className:"LoadingScene",ref:"scene"},i.a.createElement("div",{className:"LoadingSceneのimage",ref:"eyecatch"}),i.a.createElement("div",{className:"LoadingSceneのinfo"},i.a.createElement(f,{song:this.props.song})),i.a.createElement(p,{tasks:this.props.tasks}),i.a.createElement("div",{className:"LoadingSceneのflash"}),i.a.createElement("div",{className:"LoadingSceneのcover"}))}componentDidMount(){this.props.eyecatchImagePromise&&this.props.eyecatchImagePromise.then(t=>{u.a.findDOMNode(this.refs.eyecatch).appendChild(t)}),this.props.registerTeardownCallback(()=>(u.a.findDOMNode(this.refs.scene).classList.add("is-exiting"),Promise.delay(500)))}}d.propTypes={song:s.a.shape({title:s.a.string,artist:s.a.string,genre:s.a.string,subtitles:s.a.arrayOf(s.a.string),subartists:s.a.arrayOf(s.a.string),difficulty:s.a.number,level:s.a.number}),tasks:s.a.object,eyecatchImagePromise:s.a.object,registerTeardownCallback:s.a.func}},182:function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(214),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(30))},183:function(t,e,n){"use strict";(function(t){var r=n(428),i=n.n(r);const o=t.forModule("timesynchro");let u,a=0;u=window.performance&&"function"==typeof window.performance.now?()=>window.performance.now():()=>Date.now(),u.synchronize=function(t){function e(t){a=t+Date.now()-u()}i()(t,(function(t,n){t?o.error("Cannot synchronize time: "+t):(e(n),o.info("Synchronized time with global server! Offset = "+a))}),e)},u.synchronized=function(){let t=a;return()=>u()+t},e.a=u}).call(this,n(355))},188:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(189);class i{constructor(){this.current=void 0,this.total=void 0,this._observable=new r.a}report(t,e,n){this.current=t,this.total=e,this.extra=n,this._observable.notify()}watch(t){return t(this),this._observable.watch(()=>t(this))}get progress(){return this.total&&void 0!==this.current&&null!==this.current?this.current/this.total:null}toString(){return void 0!==this.formatter?this.formatter(this):null!==this.progress?this.current+" / "+this.total:""}}},189:function(t,e,n){"use strict";var r=n(190);e.a=class{constructor(t){this._callbacks=new r.a,this._value=t}get value(){return this._value}set value(t){this._value=t,this.notify(t)}notify(t){this._callbacks.call(t)}watch(t){return void 0!==this._value&&t(this._value),this._callbacks.add(t)}}},190:function(t,e,n){"use strict";e.a=class{constructor(t){if(this._callbacks={},this._nextId=1,"function"==typeof t)this.add(t);else if("object"==typeof t&&t&&t.length)for(var e=0;e<t.length;e++)this.add(t[e])}call(...t){var e=this._callbacks;for(var n in e)e[n](...t)}add(t){var e=this._nextId++;return this._callbacks[e]=t,()=>delete this._callbacks[e]}}},191:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.match=void 0,e.match=function(t){var e=!1;return{when:function(n,r){if(e)return this;var i=t.match(n);return i&&(e=!0,r(i)),this},else:function(t){if(e)return this;t()}}}},1918:function(t,e,n){var r=n(1919);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},1919:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,".GameShellScene {\n  margin: 20px auto;\n  background: #353433;\n  border: 1px solid #555453;\n  padding: 15px;\n  max-width: 720px;\n}\n.GameShellScene .drop-zone {\n  border: 2px dashed #555453;\n  padding: 5px;\n}\n.GameShellScene .drop-zone a.is-active {\n  font-weight: bold;\n}\n.GameShellScene .drop-zone-hint {\n  padding: 10px;\n  text-align: center;\n  color: #8b8685;\n}\n.GameShellScene form > div {\n  margin-bottom: 1em;\n}\n.GameShellScene form > div.text .label {\n  display: block;\n  color: #8b8685;\n  font-weight: bold;\n  font-size: 0.8em;\n  margin: 0;\n  margin-bottom: 0.5ex;\n}\n.GameShellScene form > div.text input {\n  font: inherit;\n  display: block;\n  width: 100%;\n  box-sizing: border-box;\n  border: 1px inset #555453;\n  background: #252423;\n  color: #bfb;\n}\n.GameShellScene form > div.text input:disabled {\n  opacity: 0.2;\n}\n.GameShellScene form > div.checkbox input {\n  margin-right: 1ex;\n}\n.GameShellScene form > div.radio > h3 {\n  display: block;\n  color: #8b8685;\n  font-weight: bold;\n  font-size: 0.8em;\n  margin: 0;\n  margin-bottom: 0.5ex;\n}\n.GameShellScene form > div.radio > label {\n  display: block;\n}\n.GameShellScene form > div.radio input {\n  margin-right: 1ex;\n}\n.GameShellScene button {\n  background: #8b8685;\n  border: 1px outset #aba6a5;\n  font: inherit;\n  font-size: 1.5em;\n  color: #e9e8e7;\n  display: block;\n  width: 100%;\n  box-sizing: border-box;\n}\n.GameShellScene a {\n  color: #fed;\n}",""])},192:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BMSHeaders=void 0;var r=function(){function t(){this._data={},this._dataAll={}}return t.prototype.each=function(t){for(var e in this._data)t(e,this._data[e])},t.prototype.get=function(t){return this._data[t.toLowerCase()]},t.prototype.getAll=function(t){return this._dataAll[t.toLowerCase()]},t.prototype.set=function(t,e){var n=t.toLowerCase();this._data[n]=e,(this._dataAll[n]||(this._dataAll[n]=[])).push(e)},t}();e.BMSHeaders=r},193:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BMSObjects=void 0;var r=function(){function t(){this._objects=[]}return t.prototype.add=function(t){if("01"!==t.channel)for(var e=0;e<this._objects.length;e++){var n=this._objects[e];if(n.channel===t.channel&&n.measure===t.measure&&n.fraction===t.fraction)return void(this._objects[e]=t)}this._objects.push(t)},t.prototype.all=function(){return this._objects.slice()},t.prototype.allSorted=function(){var t=this.all();return t.sort((function(t,e){return t.measure+t.fraction-(e.measure+e.fraction)})),t},t}();e.BMSObjects=r},194:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeSignatures=void 0;var r=function(){function t(){this._values={}}return t.prototype.set=function(t,e){this._values[t]=e},t.prototype.get=function(t){return this._values[t]||1},t.prototype.getBeats=function(t){return 4*this.get(t)},t.prototype.measureToBeat=function(t,e){for(var n=0,r=0;r<t;r++)n+=this.getBeats(r);return n+this.getBeats(t)*e},t}();e.TimeSignatures=r},1952:function(t,e,n){"use strict";n.r(e),n.d(e,"main",(function(){return S}));var r=n(648),i=n(26),o=n.n(i),u=n(215),a=n(118),s=n(210),c=n(2),l=n(206),f=n(280),h=n(1479),p=n(1081),d=(n(1918),n(29)),v=n.n(d),_=n(658),g=n(59),m=n.n(g);class y extends o.a.Component{constructor(t){super(t),this.handleDrop=t=>{t.preventDefault();let e=t.nativeEvent,n=new _.a(e);n.fileList.then(t=>t.filter(t=>/\.(bms|bme|bml)$/i.test(t))).map(t=>n.file(t).then(e=>({name:t,resource:e}))).then(t=>{this.setState({files:t,resources:n})}).catch(e=>{throw"FileError"===e.constructor.name?new Error("File Error code "+t.code):e}).done()},this.handleItemClick=t=>()=>{this.props.onSelect(this.state.resources,t.resource)},this.handleClear=()=>{this.props.onSelect(null,null)},this.state={files:[]}}render(){let t=this.state.files;return o.a.createElement("div",{className:"drop-zone"},t.length?o.a.createElement("ul",null,t.map(t=>o.a.createElement("li",null,o.a.createElement("a",{href:"javascript://",onClick:this.handleItemClick,className:m()({"is-active":t.resource===this.props.selectedResource})},t.name))),this.props.selectedResource?o.a.createElement("li",null,o.a.createElement("a",{href:"javascript://",onClick:this.handleClear},"Clear")):null):o.a.createElement("div",{className:"drop-zone-hint"},"Drop BMS folder here",o.a.createElement("br",null),"(only works on Google Chrome)"))}}y.propTypes={selectedResource:v.a.any,onSelect:v.a.func};class b extends o.a.Component{constructor(t){super(t),this.submit=t=>{t.preventDefault(),this.props.play(this.state.options)},this.bindOption=t=>e=>{t(this.state.options,e.target.value),this.forceUpdate()},this.handleDragOver=t=>{t.preventDefault()},this.handleDrop=t=>{t.preventDefault(),this.refs.dropzone.handleDrop(t)},this.handleSelectFile=(t,e)=>{this.setState({options:Object.assign(this.state.options,{resources:t,resource:e})}),this.forceUpdate()},this.state={options:this.props.options}}render(){let t=this.state.options;return o.a.createElement("div",{className:"GameShellScene",onDragOver:this.handleDragOver,onDrop:this.handleDrop},o.a.createElement("h1",null,"Bemuse Game Shell"),o.a.createElement("p",null,"This tool is intended for developers testing the game."),o.a.createElement("form",{onSubmit:this.submit},o.a.createElement("div",{className:"text"},o.a.createElement("label",null,o.a.createElement("span",{className:"label"},"BMS URL:"),o.a.createElement("input",{type:"text",disabled:t.resource,onChange:this.bindOption((t,e)=>t.url=e),value:t.url}))),o.a.createElement("div",{className:"text"},o.a.createElement("label",null,o.a.createElement("span",{className:"label"},"-or- Drop BMS folder here"),o.a.createElement(y,{ref:"dropzone",selectedResource:t.resource,onSelect:this.handleSelectFile}))),o.a.createElement("div",{className:"text"},o.a.createElement("label",null,o.a.createElement("span",{className:"label"},"Audio-Input Latency"),o.a.createElement("input",{type:"text",onChange:this.bindOption((t,e)=>t.game.audioInputLatency=e),value:t.game.audioInputLatency}))),o.a.createElement("div",{className:"text"},o.a.createElement("label",null,o.a.createElement("span",{className:"label"},"HI-SPEED:"),o.a.createElement("input",{type:"text",onChange:this.bindOption((t,e)=>t.players[0].speed=e),value:t.players[0].speed}))),o.a.createElement("div",{className:"radio"},o.a.createElement("h3",null,"Placement"),["left","center","right"].map(e=>o.a.createElement("label",null,o.a.createElement("input",{type:"radio",value:e,onChange:this.bindOption((t,e)=>t.players[0].placement=e),checked:t.players[0].placement===e}),o.a.createElement("span",{className:"label"},e)))),o.a.createElement("button",{type:"submit"},"Play")))}}b.propTypes={options:v.a.object,play:v.a.func};var w=n(1482),x=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))};function S(){return x(this,void 0,void 0,(function*(){window.addEventListener("touchstart",(function t(){Object(f.c)(s.a),window.removeEventListener("touchstart",t)}));let t=yield function(){return x(this,void 0,void 0,(function*(){let t=(c.a.keyboard||"").split(",").map(t=>+t),e={url:c.a.bms||"/music/[snack]dddd/dddd_sph.bme",game:{audioInputLatency:+c.a.latency||0},players:[{speed:+c.a.speed||3,autoplay:!!c.a.autoplay,placement:"center",scratch:c.a.scratch||"left",input:{keyboard:{1:t[0]||83,2:t[1]||68,3:t[2]||70,4:t[3]||32,5:t[4]||74,6:t[5]||75,7:t[6]||76,SC:t[7]||65,SC2:t[8]||16}}}]};e=yield function(t){return new Promise((function(e){let n=o.a.createElement(b,{options:t,play:function(t){e(t)}});u.a.display(n).done()}))}(e);let n=e.url,i=Object(l.resolveUrl)(n,"assets/");return{bms:e.resource||new a.b(n),assets:e.resources||new r.a(i),metadata:{title:"Loading",subtitles:[],artist:"",genre:"",subartists:[]},options:Object.assign({},e.game,{players:e.players})}}))}(),{tasks:e,promise:n}=h.load(t);yield u.a.display(o.a.createElement(w.a,{tasks:e,song:t.metadata}));let i=yield n;yield u.a.display(new p.a(i.display)),i.start()}))}},204:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(719);var r=n(59),i=n.n(r),o=n(26),u=n.n(o),a=n(29),s=n.n(a);class c extends u.a.Component{render(){return u.a.createElement("div",{className:i()("Scene",this.props.className),onDragEnter:this.props.onDragEnter},this.props.children)}}c.propTypes={className:s.a.string,children:s.a.node,onDragEnter:s.a.func}},205:function(t,e,n){"use strict";function r(t,e,n){if(e.match(/\.(?:bms|bme|bml|bmson)/i))return void n(e);const r=(t+e).split("/");for(let t=0;t<r.length;t++)n(r.slice(t).join("/"))}n.d(e,"a",(function(){return r}))},206:function(t,e,n){"use strict";var r=n(369),i=n(679);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=y,e.resolve=function(t,e){return y(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?y(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=y(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var u=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),f=["%","/","?",";","#"].concat(l),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=n(3);function y(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(a);c[0]=c[0].replace(/\\/g,"/");var y=t=c.join(a);if(y=y.trim(),!n&&1===t.split("#").length){var b=s.exec(y);if(b)return this.path=y,this.href=y,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?m.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=u.exec(y);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,y=y.substr(w.length)}if(n||w||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===y.substr(0,2);!S||w&&_[w]||(y=y.substr(2),this.slashes=!0)}if(!_[w]&&(S||w&&!g[w])){for(var E,k,j=-1,A=0;A<h.length;A++){-1!==(C=y.indexOf(h[A]))&&(-1===j||C<j)&&(j=C)}-1!==(k=-1===j?y.lastIndexOf("@"):y.lastIndexOf("@",j))&&(E=y.slice(0,k),y=y.slice(k+1),this.auth=decodeURIComponent(E)),j=-1;for(A=0;A<f.length;A++){var C;-1!==(C=y.indexOf(f[A]))&&(-1===j||C<j)&&(j=C)}-1===j&&(j=y.length),this.host=y.slice(0,j),y=y.slice(j),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var T=this.hostname.split(/\./),P=(A=0,T.length);A<P;A++){var F=T[A];if(F&&!F.match(p)){for(var M="",I=0,B=F.length;I<B;I++)F.charCodeAt(I)>127?M+="x":M+=F[I];if(!M.match(p)){var R=T.slice(0,A),L=T.slice(A+1),D=F.match(d);D&&(R.push(D[1]),L.unshift(D[2])),L.length&&(y="/"+L.join(".")+y),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=r.toASCII(this.hostname));var N=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+N,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!v[x])for(A=0,P=l.length;A<P;A++){var z=l[A];if(-1!==y.indexOf(z)){var W=encodeURIComponent(z);W===z&&(W=escape(z)),y=y.split(z).join(W)}}var V=y.indexOf("#");-1!==V&&(this.hash=y.substr(V),y=y.slice(0,V));var H=y.indexOf("?");if(-1!==H?(this.search=y.substr(H),this.query=y.substr(H+1),e&&(this.query=m.parse(this.query)),y=y.slice(0,H)):e&&(this.search="",this.query={}),y&&(this.pathname=y),g[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){N=this.pathname||"";var q=this.search||"";this.path=N+q}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,u="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(u=m.stringify(this.query));var a=this.search||u&&"?"+u||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),u=0;u<r.length;u++){var a=r[u];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),c=0;c<s.length;c++){var l=s[c];"protocol"!==l&&(n[l]=t[l])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!g[t.protocol]){for(var f=Object.keys(t),h=0;h<f.length;h++){var p=f[h];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||_[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var v=n.pathname||"",m=n.search||"";n.path=v+m}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||y||n.host&&t.pathname,x=w,S=n.pathname&&n.pathname.split("/")||[],E=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),w=w&&(""===d[0]||""===S[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,S=d;else if(d.length)S||(S=[]),S.pop(),S=S.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(E)n.hostname=n.host=S.shift(),(O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift());return n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var k=S.slice(-1)[0],j=(n.host||t.host||S.length>1)&&("."===k||".."===k)||""===k,A=0,C=S.length;C>=0;C--)"."===(k=S[C])?S.splice(C,1):".."===k?(S.splice(C,1),A++):A&&(S.splice(C,1),A--);if(!w&&!x)for(;A--;A)S.unshift("..");!w||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),j&&"/"!==S.join("/").substr(-1)&&S.push("");var O,T=""===S[0]||S[0]&&"/"===S[0].charAt(0);E&&(n.hostname=n.host=T?"":S.length?S.shift():"",(O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift()));return(w=w||n.host&&S.length)&&!T&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},207:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return _}));var r=n(97);class i{constructor(){this.buffer=[],this.loggingFunction=t=>{this.buffer&&this.buffer.push(t)},this.log=t=>{this.loggingFunction(t)},this.setLoggingFunction=t=>{this.loggingFunction=t,this.buffer&&(this.buffer.forEach(e=>t(e)),this.buffer=null)}}}var o=n(1020),u=n(205),a=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))};o.a.init({workerUrl:"/vendor/libarchive.js-1.3.0/dist/worker-bundle.js"});var s=n(100),c=n(125),l=n(119),f=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))};const h=/\.(?:zip|rar|7z|tar(?:\.(?:gz|bz2))?)/i,p=/https?:\/\/(?:(?:www|dl)\.dropbox\.com|dl\.dropboxusercontent\.com)\/(sh?)\/([^?]*)(.*)?$/;class d{constructor(t){this._logging=new i,this.setLoggingFunction=this._logging.setLoggingFunction,this._files=Promise.resolve(t.getFiles(this._logging.log)).then(t=>function(t,e){return f(this,void 0,void 0,(function*(){if(1!==t.length)return t;const n=t[0];return n.name.match(h)?(e("Archive file detected! Now unarchiving…"),function(t){return a(this,void 0,void 0,(function*(){const e=[],n=yield o.a.open(t),r=yield n.extractFiles(),i=(t,n="")=>{for(const r of Object.keys(t))t[r]instanceof File?Object(u.a)(n,r,n=>{e.push({name:n,file:t[r]})}):t[r]&&"object"==typeof t[r]&&i(t[r],n+r+"/")};return i(r),e}))}(n.file)):t}))}(t,this._logging.log))}file(t){return this._files.then((function(e){for(let n of e)if(n.name.toLowerCase()===t.toLowerCase())return new v(n.file);throw new Error("unable to find "+t)}))}get fileList(){return Promise.resolve(this._files).map(t=>t.name)}}class v{constructor(t){this._file=t}read(t){return r.a(t,Object(s.a)(this._file).as("arraybuffer"))}resolveUrl(){return Promise.resolve(URL.createObjectURL(this._file))}get name(){return this._file.name}}function _(t,e){return f(this,void 0,void 0,(function*(){const n=t.replace(/[?#].*/,"").split("/").pop(),r=t.match(p);r&&(t=`https://dl.dropboxusercontent.com/${r[1]}/${r[2]}`);const i=new c.a;let o=0;i.watch(()=>{Date.now()<o+5e3||(e("Downloading: "+i),o=Date.now())});return{name:n,file:yield Object(l.a)(t).as("blob",i)}}))}},210:function(t,e,n){"use strict";var r=n(324),i=n.n(r);e.a=i()({latencyHint:"interaction"})},211:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return h}));const r=1024,i=-975,o=1024,u=3.922,a=4.555,s=960,c=60;function l(t){let e=Math.max(0,t-1);t<0&&(t=0),t>1&&(t=1);let n=u+(a-u)*t,c=r+Math.cos(n)*o,l=i-Math.sin(n)*o,f=s/(s-c);return{y:l*f+360+2048*e,projection:f}}const f=c;function h(t,e){let n,r,i=.75,o=1;for(let t=0;t<8;t++)n=(i+o)/2,r=l(n),r.y>e?o=n:i=n;if(n<.8)return null;let u=640+r.projection*-c,a=640+r.projection*c,s=Math.floor((t-u)/(a-u)*7);return s>=-1&&s<=7?(s<0&&(s=0),s>6&&(s=6),String(s+1)):null}},213:function(t,e,n){"use strict";var r=n(183),i=n(141),o=n(26),u=n.n(o),a=n(66),s=n.n(a),c=(n(653),n(29)),l=n.n(c);class f extends u.a.Component{constructor(t){super(t),this.renderTable=()=>{let t=this.props.bench.stats;return u.a.createElement("table",null,u.a.createElement("tbody",null,Object.keys(t).map(e=>{let n=t[e];return u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement("strong",null,e)),u.a.createElement("td",{align:"right"},""+n))})))},this.handleInteraction=t=>{t.preventDefault(),t.stopPropagation(),this.setState({show:!this.state.show})},this.state={show:!1,text:"wow"}}render(){return u.a.createElement("div",{className:"BenchmarkPanel",onClick:this.handleInteraction,onTouchStart:this.handleInteraction},this.state.show?u.a.createElement("article",null,u.a.createElement("b",null,"Benchmark Stats"),u.a.createElement("br",null),this.renderTable()):"Show Benchmark Stats")}componentDidMount(){setInterval(()=>this.forceUpdate(),1e3)}}function h(){let t=0,e=0,n=0,i=[],o=0,u=0;return{push:function(a){let s=Object(r.a)();for(t+=a,e+=1,n=t/e,o+=a,i.push({delta:a,time:s});i[0]&&i[0].time<s-1e3;)o-=i.shift().delta;u=o/i.length},toString:()=>p(n)+" / "+p(u)}}function p(t){return t.toFixed(2)+"ms"}f.propTypes={bench:l.a.object};e.a=window.BEMUSE_BENCHMARK=Object(i.c)()?new function(){var t={};let e={enabled:!0,stats:t,wrap:(e,n)=>function(){try{var i=Object(r.a)();return n.apply(this,arguments)}finally{var o=Object(r.a)(),u=t[e]||(t[e]=new h(e));u.push(o-i)}},benchmark(t,e,n){e[n]=this.wrap(t,e[n])},toString(){var e=[];return Object.keys(t).forEach((function(n){e.push("- "+n+": "+t[n])})),e.join("\n")}},n=document.createElement("div");return n.setAttribute("style","position:fixed;top:10px;right:10px;z-index:99999"),document.body.appendChild(n),s.a.render(u.a.createElement(f,{bench:e}),n),e}:new function(){return{enabled:!1,wrap:(t,e)=>e}}},214:function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,u,a,s=1,c={},l=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(u="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(u)&&d(+e.data.slice(u.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(e){t.postMessage(u+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[s]=i,r(s),s++},h.clearImmediate=p}function p(t){delete c[t]}function d(t){if(l)setTimeout(d,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{p(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(30),n(40))},215:function(t,e,n){"use strict";var r=n(26),i=n.n(r),o=n(66),u=n.n(o),a=n(137),s=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))};let c=new class{constructor(){this._transitioning=!1,this._stack=[]}display(t){return this._transitionTo(()=>t)}push(t){let e=this.currentScene;return this._transitionTo(()=>(this._stack.push(e),t))}pop(){return this._transitionTo(()=>this._stack.pop())}_transitionTo(t){return s(this,void 0,void 0,(function*(){if(this._transitioning)throw new Error("Scene is transitioning!");try{this._transitioning=!0,this.currentSceneInstance&&(yield Promise.resolve(this.currentSceneInstance.teardown()),function(t){t&&t.parentNode===a.a&&a.a.removeChild(t)}(this.currentElement));let n=t();"function"!=typeof n&&(n=new l(n,this.ReactSceneContainer));var e=document.createElement("div");e.className="scene-manager--scene",a.a.appendChild(e),this.currentElement=e,this.currentScene=n,this.currentSceneInstance=n(e)}finally{this._transitioning=!1}}))}};function l(t,e){return function(n){let r=()=>{};const o=i.a.cloneElement(t,{scene:t,registerTeardownCallback:t=>{r=t}}),a=e?i.a.createElement(e,null,o):o;return u.a.render(a,n),{teardown:()=>Promise.try(()=>r()).finally(()=>{u.a.unmountComponentAtNode(n)})}}}e.a=c},280:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return h}));var r=n(210),i=n(100),o=n(313);const u=.001;let a=document.createElement("audio");const s=!a.canPlayType('audio/ogg; codecs="vorbis"');class c{constructor(t,{volume:e}={}){this._master=t,this._gain=this._master.audioContext.createGain(),null!=e&&(this._gain.gain.value=e),this._gain.connect(this._master.destination)}get destination(){return this._gain}destroy(){this._gain.disconnect(),this._gain=null}}class l{constructor(t,e){this._master=t,this._buffer=e}play(t,e){return new f(this._master,this._buffer,t,e)}destroy(){this._master=null,this._buffer=null}}class f{constructor(t,e,n,r={}){n=n||0,this._master=t;let i=t.audioContext,o=i.createBufferSource();o.buffer=e,o.onended=()=>this.stop();let a=i.createGain();o.connect(a);let s=r.node||r.group&&r.group.destination||t.destination;a.connect(s),this._source=o,this._gain=this.TEST_node=a;let c=n?Math.max(0,i.currentTime+n):0,l=r.start||0,f=l>0,h=!1;if(f&&a.gain.setValueAtTime(0,0),void 0!==r.end){let t=Math.max(r.end-l,0);o.start(c,l,t+u),h=i.currentTime+n+t}else o.start(c,l);f&&(a.gain.setValueAtTime(0,i.currentTime+n),a.gain.linearRampToValueAtTime(1,i.currentTime+n+u)),!1!==h&&(a.gain.setValueAtTime(1,h),a.gain.linearRampToValueAtTime(0,h+u)),this._master._startPlaying(this)}stop(){this._source&&(this._source.stop(0),this._source.disconnect(),this._gain.disconnect(),this._source=null,this._gain=null,this._master._stoppedPlaying(this),this.onstop&&this.onstop())}bad(){this._source&&(this._source.playbackRate.value=Math.random()<.5?Math.pow(2,1/24):Math.pow(2,-1/24))}destroy(){this.stop()}}function h(t=r.a){let e=t.createGain(),n=t.createOscillator();n.frequency.value=440,n.start(t.currentTime+.1),n.stop(t.currentTime+.1),e.connect(t.destination),e.disconnect();try{t.resume()}catch(t){console.error("[sampling-master] Cannot resume AudioContext",t)}}e.b=class{constructor(t){this._audioContext=t||r.a,this._samples=[],this._groups=[],this._instances=new Set,this._destination=this._audioContext.destination}unmute(){h(this._audioContext)}get audioContext(){return this._audioContext}get destination(){return this._destination}destroy(){if(!this._destroyed){this._destroyed=!0;for(let t of this._samples)t.destroy();for(let t of this._instances)t.destroy();this._samples=null,this._instances=null}}decode(t){return this._coerceToArrayBuffer(t).then(t=>this._decodeAudio(t))}sample(t){return(()=>t.numberOfChannels?Promise.resolve(t):this.decode(t))().then(t=>{if(this._destroyed)throw new Error("SamplingMaster already destroyed!");var e=new l(this,t);return this._samples.push(e),e})}group(t){const e=new c(this,t);return this._groups.push(e),e}_coerceToArrayBuffer(t){return t instanceof ArrayBuffer?Promise.resolve(t):Object(i.a)(t).as("arraybuffer")}_decodeAudio(t){return new Promise((e,n)=>{if(s&&t.byteLength>4){const n=new Uint8Array(t,0,4);if(79===n[0]&&103===n[1]&&103===n[2]&&83===n[3])return e(Object(o.a)(this.audioContext,t))}this.audioContext.decodeAudioData(t,(function(t){e(t)}),(function(t){n(new Error("Unable to decode audio: "+t))}))})}_startPlaying(t){this._instances.add(t)}_stoppedPlaying(t){this._instances.delete(t)}}},281:function(t,e,n){(function(t,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o="Expected a function",u="__lodash_placeholder__",a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],s="[object Arguments]",c="[object Array]",l="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Function]",d="[object GeneratorFunction]",v="[object Map]",_="[object Number]",g="[object Object]",m="[object RegExp]",y="[object Set]",b="[object String]",w="[object Symbol]",x="[object WeakMap]",S="[object ArrayBuffer]",E="[object DataView]",k="[object Float32Array]",j="[object Float64Array]",A="[object Int8Array]",C="[object Int16Array]",O="[object Int32Array]",T="[object Uint8Array]",P="[object Uint16Array]",F="[object Uint32Array]",M=/\b__p \+= '';/g,I=/\b(__p \+=) '' \+/g,B=/(__e\(.*?\)|\b__t\)) \+\n'';/g,R=/&(?:amp|lt|gt|quot|#39);/g,L=/[&<>"']/g,D=RegExp(R.source),N=RegExp(L.source),U=/<%-([\s\S]+?)%>/g,z=/<%([\s\S]+?)%>/g,W=/<%=([\s\S]+?)%>/g,V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/,q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$=/[\\^$.*+?()[\]{}|]/g,G=RegExp($.source),K=/^\s+|\s+$/g,J=/^\s+/,Q=/\s+$/,X=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Y=/\{\n\/\* \[wrapped with (.+)\] \*/,Z=/,? & /,tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,et=/\\(\\)?/g,nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rt=/\w*$/,it=/^[-+]0x[0-9a-f]+$/i,ot=/^0b[01]+$/i,ut=/^\[object .+?Constructor\]$/,at=/^0o[0-7]+$/i,st=/^(?:0|[1-9]\d*)$/,ct=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lt=/($^)/,ft=/['\n\r\u2028\u2029\\]/g,ht="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",pt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dt="[\\ud800-\\udfff]",vt="["+pt+"]",_t="["+ht+"]",gt="\\d+",mt="[\\u2700-\\u27bf]",yt="[a-z\\xdf-\\xf6\\xf8-\\xff]",bt="[^\\ud800-\\udfff"+pt+gt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",wt="\\ud83c[\\udffb-\\udfff]",xt="[^\\ud800-\\udfff]",St="(?:\\ud83c[\\udde6-\\uddff]){2}",Et="[\\ud800-\\udbff][\\udc00-\\udfff]",kt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",jt="(?:"+yt+"|"+bt+")",At="(?:"+kt+"|"+bt+")",Ct="(?:"+_t+"|"+wt+")"+"?",Ot="[\\ufe0e\\ufe0f]?"+Ct+("(?:\\u200d(?:"+[xt,St,Et].join("|")+")[\\ufe0e\\ufe0f]?"+Ct+")*"),Tt="(?:"+[mt,St,Et].join("|")+")"+Ot,Pt="(?:"+[xt+_t+"?",_t,St,Et,dt].join("|")+")",Ft=RegExp("['’]","g"),Mt=RegExp(_t,"g"),It=RegExp(wt+"(?="+wt+")|"+Pt+Ot,"g"),Bt=RegExp([kt+"?"+yt+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[vt,kt,"$"].join("|")+")",At+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[vt,kt+jt,"$"].join("|")+")",kt+"?"+jt+"+(?:['’](?:d|ll|m|re|s|t|ve))?",kt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gt,Tt].join("|"),"g"),Rt=RegExp("[\\u200d\\ud800-\\udfff"+ht+"\\ufe0e\\ufe0f]"),Lt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Nt=-1,Ut={};Ut[k]=Ut[j]=Ut[A]=Ut[C]=Ut[O]=Ut[T]=Ut["[object Uint8ClampedArray]"]=Ut[P]=Ut[F]=!0,Ut[s]=Ut[c]=Ut[S]=Ut[l]=Ut[E]=Ut[f]=Ut[h]=Ut[p]=Ut[v]=Ut[_]=Ut[g]=Ut[m]=Ut[y]=Ut[b]=Ut[x]=!1;var zt={};zt[s]=zt[c]=zt[S]=zt[E]=zt[l]=zt[f]=zt[k]=zt[j]=zt[A]=zt[C]=zt[O]=zt[v]=zt[_]=zt[g]=zt[m]=zt[y]=zt[b]=zt[w]=zt[T]=zt["[object Uint8ClampedArray]"]=zt[P]=zt[F]=!0,zt[h]=zt[p]=zt[x]=!1;var Wt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vt=parseFloat,Ht=parseInt,qt="object"==typeof t&&t&&t.Object===Object&&t,$t="object"==typeof self&&self&&self.Object===Object&&self,Gt=qt||$t||Function("return this")(),Kt=e&&!e.nodeType&&e,Jt=Kt&&"object"==typeof r&&r&&!r.nodeType&&r,Qt=Jt&&Jt.exports===Kt,Xt=Qt&&qt.process,Yt=function(){try{var t=Jt&&Jt.require&&Jt.require("util").types;return t||Xt&&Xt.binding&&Xt.binding("util")}catch(t){}}(),Zt=Yt&&Yt.isArrayBuffer,te=Yt&&Yt.isDate,ee=Yt&&Yt.isMap,ne=Yt&&Yt.isRegExp,re=Yt&&Yt.isSet,ie=Yt&&Yt.isTypedArray;function oe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ue(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var u=t[i];e(r,u,n(u),t)}return r}function ae(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function se(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function ce(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function le(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var u=t[n];e(u,n,t)&&(o[i++]=u)}return o}function fe(t,e){return!!(null==t?0:t.length)&&we(t,e,0)>-1}function he(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function pe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function de(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function ve(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function _e(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ge(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var me=ke("length");function ye(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function be(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function we(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):be(t,Se,n)}function xe(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Se(t){return t!=t}function Ee(t,e){var n=null==t?0:t.length;return n?Ce(t,e)/n:NaN}function ke(t){return function(e){return null==e?void 0:e[t]}}function je(t){return function(e){return null==t?void 0:t[e]}}function Ae(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ce(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Oe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Te(t){return function(e){return t(e)}}function Pe(t,e){return pe(e,(function(e){return t[e]}))}function Fe(t,e){return t.has(e)}function Me(t,e){for(var n=-1,r=t.length;++n<r&&we(e,t[n],0)>-1;);return n}function Ie(t,e){for(var n=t.length;n--&&we(e,t[n],0)>-1;);return n}function Be(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Re=je({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Le=je({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function De(t){return"\\"+Wt[t]}function Ne(t){return Rt.test(t)}function Ue(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function ze(t,e){return function(n){return t(e(n))}}function We(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==u||(t[n]=u,o[i++]=n)}return o}function Ve(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function He(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function qe(t){return Ne(t)?function(t){var e=It.lastIndex=0;for(;It.test(t);)++e;return e}(t):me(t)}function $e(t){return Ne(t)?function(t){return t.match(It)||[]}(t):function(t){return t.split("")}(t)}var Ge=je({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Ke=function t(e){var n,r=(e=null==e?Gt:Ke.defaults(Gt.Object(),e,Ke.pick(Gt,Dt))).Array,i=e.Date,ht=e.Error,pt=e.Function,dt=e.Math,vt=e.Object,_t=e.RegExp,gt=e.String,mt=e.TypeError,yt=r.prototype,bt=pt.prototype,wt=vt.prototype,xt=e["__core-js_shared__"],St=bt.toString,Et=wt.hasOwnProperty,kt=0,jt=(n=/[^.]+$/.exec(xt&&xt.keys&&xt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",At=wt.toString,Ct=St.call(vt),Ot=Gt._,Tt=_t("^"+St.call(Et).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pt=Qt?e.Buffer:void 0,It=e.Symbol,Rt=e.Uint8Array,Wt=Pt?Pt.allocUnsafe:void 0,qt=ze(vt.getPrototypeOf,vt),$t=vt.create,Kt=wt.propertyIsEnumerable,Jt=yt.splice,Xt=It?It.isConcatSpreadable:void 0,Yt=It?It.iterator:void 0,me=It?It.toStringTag:void 0,je=function(){try{var t=Zi(vt,"defineProperty");return t({},"",{}),t}catch(t){}}(),Je=e.clearTimeout!==Gt.clearTimeout&&e.clearTimeout,Qe=i&&i.now!==Gt.Date.now&&i.now,Xe=e.setTimeout!==Gt.setTimeout&&e.setTimeout,Ye=dt.ceil,Ze=dt.floor,tn=vt.getOwnPropertySymbols,en=Pt?Pt.isBuffer:void 0,nn=e.isFinite,rn=yt.join,on=ze(vt.keys,vt),un=dt.max,an=dt.min,sn=i.now,cn=e.parseInt,ln=dt.random,fn=yt.reverse,hn=Zi(e,"DataView"),pn=Zi(e,"Map"),dn=Zi(e,"Promise"),vn=Zi(e,"Set"),_n=Zi(e,"WeakMap"),gn=Zi(vt,"create"),mn=_n&&new _n,yn={},bn=Ao(hn),wn=Ao(pn),xn=Ao(dn),Sn=Ao(vn),En=Ao(_n),kn=It?It.prototype:void 0,jn=kn?kn.valueOf:void 0,An=kn?kn.toString:void 0;function Cn(t){if(Hu(t)&&!Mu(t)&&!(t instanceof Fn)){if(t instanceof Pn)return t;if(Et.call(t,"__wrapped__"))return Co(t)}return new Pn(t)}var On=function(){function t(){}return function(e){if(!Vu(e))return{};if($t)return $t(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Tn(){}function Pn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Fn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Mn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function In(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Bn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Rn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Bn;++e<n;)this.add(t[e])}function Ln(t){var e=this.__data__=new In(t);this.size=e.size}function Dn(t,e){var n=Mu(t),r=!n&&Fu(t),i=!n&&!r&&Lu(t),o=!n&&!r&&!i&&Yu(t),u=n||r||i||o,a=u?Oe(t.length,gt):[],s=a.length;for(var c in t)!e&&!Et.call(t,c)||u&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||uo(c,s))||a.push(c);return a}function Nn(t){var e=t.length;return e?t[Rr(0,e-1)]:void 0}function Un(t,e){return Eo(gi(t),Jn(e,0,t.length))}function zn(t){return Eo(gi(t))}function Wn(t,e,n){(void 0!==n&&!Ou(t[e],n)||void 0===n&&!(e in t))&&Gn(t,e,n)}function Vn(t,e,n){var r=t[e];Et.call(t,e)&&Ou(r,n)&&(void 0!==n||e in t)||Gn(t,e,n)}function Hn(t,e){for(var n=t.length;n--;)if(Ou(t[n][0],e))return n;return-1}function qn(t,e,n,r){return tr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function $n(t,e){return t&&mi(e,ba(e),t)}function Gn(t,e,n){"__proto__"==e&&je?je(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Kn(t,e){for(var n=-1,i=e.length,o=r(i),u=null==t;++n<i;)o[n]=u?void 0:va(t,e[n]);return o}function Jn(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Qn(t,e,n,r,i,o){var u,a=1&e,c=2&e,h=4&e;if(n&&(u=i?n(t,r,i,o):n(t)),void 0!==u)return u;if(!Vu(t))return t;var x=Mu(t);if(x){if(u=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Et.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!a)return gi(t,u)}else{var M=no(t),I=M==p||M==d;if(Lu(t))return fi(t,a);if(M==g||M==s||I&&!i){if(u=c||I?{}:io(t),!a)return c?function(t,e){return mi(t,eo(t),e)}(t,function(t,e){return t&&mi(e,wa(e),t)}(u,t)):function(t,e){return mi(t,to(t),e)}(t,$n(u,t))}else{if(!zt[M])return i?t:{};u=function(t,e,n){var r=t.constructor;switch(e){case S:return hi(t);case l:case f:return new r(+t);case E:return function(t,e){var n=e?hi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case k:case j:case A:case C:case O:case T:case"[object Uint8ClampedArray]":case P:case F:return pi(t,n);case v:return new r;case _:case b:return new r(t);case m:return function(t){var e=new t.constructor(t.source,rt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case y:return new r;case w:return i=t,jn?vt(jn.call(i)):{}}var i}(t,M,a)}}o||(o=new Ln);var B=o.get(t);if(B)return B;o.set(t,u),Ju(t)?t.forEach((function(r){u.add(Qn(r,e,n,r,t,o))})):qu(t)&&t.forEach((function(r,i){u.set(i,Qn(r,e,n,i,t,o))}));var R=x?void 0:(h?c?$i:qi:c?wa:ba)(t);return ae(R||t,(function(r,i){R&&(r=t[i=r]),Vn(u,i,Qn(r,e,n,i,t,o))})),u}function Xn(t,e,n){var r=n.length;if(null==t)return!r;for(t=vt(t);r--;){var i=n[r],o=e[i],u=t[i];if(void 0===u&&!(i in t)||!o(u))return!1}return!0}function Yn(t,e,n){if("function"!=typeof t)throw new mt(o);return bo((function(){t.apply(void 0,n)}),e)}function Zn(t,e,n,r){var i=-1,o=fe,u=!0,a=t.length,s=[],c=e.length;if(!a)return s;n&&(e=pe(e,Te(n))),r?(o=he,u=!1):e.length>=200&&(o=Fe,u=!1,e=new Rn(e));t:for(;++i<a;){var l=t[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,u&&f==f){for(var h=c;h--;)if(e[h]===f)continue t;s.push(l)}else o(e,f,r)||s.push(l)}return s}Cn.templateSettings={escape:U,evaluate:z,interpolate:W,variable:"",imports:{_:Cn}},Cn.prototype=Tn.prototype,Cn.prototype.constructor=Cn,Pn.prototype=On(Tn.prototype),Pn.prototype.constructor=Pn,Fn.prototype=On(Tn.prototype),Fn.prototype.constructor=Fn,Mn.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},Mn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Mn.prototype.get=function(t){var e=this.__data__;if(gn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Et.call(e,t)?e[t]:void 0},Mn.prototype.has=function(t){var e=this.__data__;return gn?void 0!==e[t]:Et.call(e,t)},Mn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=gn&&void 0===e?"__lodash_hash_undefined__":e,this},In.prototype.clear=function(){this.__data__=[],this.size=0},In.prototype.delete=function(t){var e=this.__data__,n=Hn(e,t);return!(n<0)&&(n==e.length-1?e.pop():Jt.call(e,n,1),--this.size,!0)},In.prototype.get=function(t){var e=this.__data__,n=Hn(e,t);return n<0?void 0:e[n][1]},In.prototype.has=function(t){return Hn(this.__data__,t)>-1},In.prototype.set=function(t,e){var n=this.__data__,r=Hn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Bn.prototype.clear=function(){this.size=0,this.__data__={hash:new Mn,map:new(pn||In),string:new Mn}},Bn.prototype.delete=function(t){var e=Xi(this,t).delete(t);return this.size-=e?1:0,e},Bn.prototype.get=function(t){return Xi(this,t).get(t)},Bn.prototype.has=function(t){return Xi(this,t).has(t)},Bn.prototype.set=function(t,e){var n=Xi(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Rn.prototype.add=Rn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Rn.prototype.has=function(t){return this.__data__.has(t)},Ln.prototype.clear=function(){this.__data__=new In,this.size=0},Ln.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ln.prototype.get=function(t){return this.__data__.get(t)},Ln.prototype.has=function(t){return this.__data__.has(t)},Ln.prototype.set=function(t,e){var n=this.__data__;if(n instanceof In){var r=n.__data__;if(!pn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Bn(r)}return n.set(t,e),this.size=n.size,this};var tr=wi(sr),er=wi(cr,!0);function nr(t,e){var n=!0;return tr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function rr(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],u=e(o);if(null!=u&&(void 0===a?u==u&&!Xu(u):n(u,a)))var a=u,s=o}return s}function ir(t,e){var n=[];return tr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function or(t,e,n,r,i){var o=-1,u=t.length;for(n||(n=oo),i||(i=[]);++o<u;){var a=t[o];e>0&&n(a)?e>1?or(a,e-1,n,r,i):de(i,a):r||(i[i.length]=a)}return i}var ur=xi(),ar=xi(!0);function sr(t,e){return t&&ur(t,e,ba)}function cr(t,e){return t&&ar(t,e,ba)}function lr(t,e){return le(e,(function(e){return Uu(t[e])}))}function fr(t,e){for(var n=0,r=(e=ai(e,t)).length;null!=t&&n<r;)t=t[jo(e[n++])];return n&&n==r?t:void 0}function hr(t,e,n){var r=e(t);return Mu(t)?r:de(r,n(t))}function pr(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":me&&me in vt(t)?function(t){var e=Et.call(t,me),n=t[me];try{t[me]=void 0;var r=!0}catch(t){}var i=At.call(t);r&&(e?t[me]=n:delete t[me]);return i}(t):function(t){return At.call(t)}(t)}function dr(t,e){return t>e}function vr(t,e){return null!=t&&Et.call(t,e)}function _r(t,e){return null!=t&&e in vt(t)}function gr(t,e,n){for(var i=n?he:fe,o=t[0].length,u=t.length,a=u,s=r(u),c=1/0,l=[];a--;){var f=t[a];a&&e&&(f=pe(f,Te(e))),c=an(f.length,c),s[a]=!n&&(e||o>=120&&f.length>=120)?new Rn(a&&f):void 0}f=t[0];var h=-1,p=s[0];t:for(;++h<o&&l.length<c;){var d=f[h],v=e?e(d):d;if(d=n||0!==d?d:0,!(p?Fe(p,v):i(l,v,n))){for(a=u;--a;){var _=s[a];if(!(_?Fe(_,v):i(t[a],v,n)))continue t}p&&p.push(v),l.push(d)}}return l}function mr(t,e,n){var r=null==(t=_o(t,e=ai(e,t)))?t:t[jo(No(e))];return null==r?void 0:oe(r,t,n)}function yr(t){return Hu(t)&&pr(t)==s}function br(t,e,n,r,i){return t===e||(null==t||null==e||!Hu(t)&&!Hu(e)?t!=t&&e!=e:function(t,e,n,r,i,o){var u=Mu(t),a=Mu(e),p=u?c:no(t),d=a?c:no(e),x=(p=p==s?g:p)==g,k=(d=d==s?g:d)==g,j=p==d;if(j&&Lu(t)){if(!Lu(e))return!1;u=!0,x=!1}if(j&&!x)return o||(o=new Ln),u||Yu(t)?Vi(t,e,n,r,i,o):function(t,e,n,r,i,o,u){switch(n){case E:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case S:return!(t.byteLength!=e.byteLength||!o(new Rt(t),new Rt(e)));case l:case f:case _:return Ou(+t,+e);case h:return t.name==e.name&&t.message==e.message;case m:case b:return t==e+"";case v:var a=Ue;case y:var s=1&r;if(a||(a=Ve),t.size!=e.size&&!s)return!1;var c=u.get(t);if(c)return c==e;r|=2,u.set(t,e);var p=Vi(a(t),a(e),r,i,o,u);return u.delete(t),p;case w:if(jn)return jn.call(t)==jn.call(e)}return!1}(t,e,p,n,r,i,o);if(!(1&n)){var A=x&&Et.call(t,"__wrapped__"),C=k&&Et.call(e,"__wrapped__");if(A||C){var O=A?t.value():t,T=C?e.value():e;return o||(o=new Ln),i(O,T,n,r,o)}}if(!j)return!1;return o||(o=new Ln),function(t,e,n,r,i,o){var u=1&n,a=qi(t),s=a.length,c=qi(e).length;if(s!=c&&!u)return!1;var l=s;for(;l--;){var f=a[l];if(!(u?f in e:Et.call(e,f)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var p=!0;o.set(t,e),o.set(e,t);var d=u;for(;++l<s;){f=a[l];var v=t[f],_=e[f];if(r)var g=u?r(_,v,f,e,t,o):r(v,_,f,t,e,o);if(!(void 0===g?v===_||i(v,_,n,r,o):g)){p=!1;break}d||(d="constructor"==f)}if(p&&!d){var m=t.constructor,y=e.constructor;m==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,i,o)}(t,e,n,r,br,i))}function wr(t,e,n,r){var i=n.length,o=i,u=!r;if(null==t)return!o;for(t=vt(t);i--;){var a=n[i];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var s=(a=n[i])[0],c=t[s],l=a[1];if(u&&a[2]){if(void 0===c&&!(s in t))return!1}else{var f=new Ln;if(r)var h=r(c,l,s,t,e,f);if(!(void 0===h?br(l,c,3,r,f):h))return!1}}return!0}function xr(t){return!(!Vu(t)||(e=t,jt&&jt in e))&&(Uu(t)?Tt:ut).test(Ao(t));var e}function Sr(t){return"function"==typeof t?t:null==t?$a:"object"==typeof t?Mu(t)?Or(t[0],t[1]):Cr(t):es(t)}function Er(t){if(!fo(t))return on(t);var e=[];for(var n in vt(t))Et.call(t,n)&&"constructor"!=n&&e.push(n);return e}function kr(t){if(!Vu(t))return function(t){var e=[];if(null!=t)for(var n in vt(t))e.push(n);return e}(t);var e=fo(t),n=[];for(var r in t)("constructor"!=r||!e&&Et.call(t,r))&&n.push(r);return n}function jr(t,e){return t<e}function Ar(t,e){var n=-1,i=Bu(t)?r(t.length):[];return tr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Cr(t){var e=Yi(t);return 1==e.length&&e[0][2]?po(e[0][0],e[0][1]):function(n){return n===t||wr(n,t,e)}}function Or(t,e){return so(t)&&ho(e)?po(jo(t),e):function(n){var r=va(n,t);return void 0===r&&r===e?_a(n,t):br(e,r,3)}}function Tr(t,e,n,r,i){t!==e&&ur(e,(function(o,u){if(i||(i=new Ln),Vu(o))!function(t,e,n,r,i,o,u){var a=mo(t,n),s=mo(e,n),c=u.get(s);if(c)return void Wn(t,n,c);var l=o?o(a,s,n+"",t,e,u):void 0,f=void 0===l;if(f){var h=Mu(s),p=!h&&Lu(s),d=!h&&!p&&Yu(s);l=s,h||p||d?Mu(a)?l=a:Ru(a)?l=gi(a):p?(f=!1,l=fi(s,!0)):d?(f=!1,l=pi(s,!0)):l=[]:Gu(s)||Fu(s)?(l=a,Fu(a)?l=ua(a):Vu(a)&&!Uu(a)||(l=io(s))):f=!1}f&&(u.set(s,l),i(l,s,r,o,u),u.delete(s));Wn(t,n,l)}(t,e,u,n,Tr,r,i);else{var a=r?r(mo(t,u),o,u+"",t,e,i):void 0;void 0===a&&(a=o),Wn(t,u,a)}}),wa)}function Pr(t,e){var n=t.length;if(n)return uo(e+=e<0?n:0,n)?t[e]:void 0}function Fr(t,e,n){var r=-1;return e=pe(e.length?e:[$a],Te(Qi())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Ar(t,(function(t,n,i){return{criteria:pe(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,u=i.length,a=n.length;for(;++r<u;){var s=di(i[r],o[r]);if(s){if(r>=a)return s;var c=n[r];return s*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)}))}function Mr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var u=e[r],a=fr(t,u);n(a,u)&&zr(o,ai(u,t),a)}return o}function Ir(t,e,n,r){var i=r?xe:we,o=-1,u=e.length,a=t;for(t===e&&(e=gi(e)),n&&(a=pe(t,Te(n)));++o<u;)for(var s=0,c=e[o],l=n?n(c):c;(s=i(a,l,s,r))>-1;)a!==t&&Jt.call(a,s,1),Jt.call(t,s,1);return t}function Br(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;uo(i)?Jt.call(t,i,1):Zr(t,i)}}return t}function Rr(t,e){return t+Ze(ln()*(e-t+1))}function Lr(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=Ze(e/2))&&(t+=t)}while(e);return n}function Dr(t,e){return wo(vo(t,e,$a),t+"")}function Nr(t){return Nn(Oa(t))}function Ur(t,e){var n=Oa(t);return Eo(n,Jn(e,0,n.length))}function zr(t,e,n,r){if(!Vu(t))return t;for(var i=-1,o=(e=ai(e,t)).length,u=o-1,a=t;null!=a&&++i<o;){var s=jo(e[i]),c=n;if(i!=u){var l=a[s];void 0===(c=r?r(l,s,a):void 0)&&(c=Vu(l)?l:uo(e[i+1])?[]:{})}Vn(a,s,c),a=a[s]}return t}var Wr=mn?function(t,e){return mn.set(t,e),t}:$a,Vr=je?function(t,e){return je(t,"toString",{configurable:!0,enumerable:!1,value:Va(e),writable:!0})}:$a;function Hr(t){return Eo(Oa(t))}function qr(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var u=r(o);++i<o;)u[i]=t[i+e];return u}function $r(t,e){var n;return tr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function Gr(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,u=t[o];null!==u&&!Xu(u)&&(n?u<=e:u<e)?r=o+1:i=o}return i}return Kr(t,e,$a,n)}function Kr(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,u=e!=e,a=null===e,s=Xu(e),c=void 0===e;i<o;){var l=Ze((i+o)/2),f=n(t[l]),h=void 0!==f,p=null===f,d=f==f,v=Xu(f);if(u)var _=r||d;else _=c?d&&(r||h):a?d&&h&&(r||!p):s?d&&h&&!p&&(r||!v):!p&&!v&&(r?f<=e:f<e);_?i=l+1:o=l}return an(o,4294967294)}function Jr(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var u=t[n],a=e?e(u):u;if(!n||!Ou(a,s)){var s=a;o[i++]=0===u?0:u}}return o}function Qr(t){return"number"==typeof t?t:Xu(t)?NaN:+t}function Xr(t){if("string"==typeof t)return t;if(Mu(t))return pe(t,Xr)+"";if(Xu(t))return An?An.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Yr(t,e,n){var r=-1,i=fe,o=t.length,u=!0,a=[],s=a;if(n)u=!1,i=he;else if(o>=200){var c=e?null:Li(t);if(c)return Ve(c);u=!1,i=Fe,s=new Rn}else s=e?[]:a;t:for(;++r<o;){var l=t[r],f=e?e(l):l;if(l=n||0!==l?l:0,u&&f==f){for(var h=s.length;h--;)if(s[h]===f)continue t;e&&s.push(f),a.push(l)}else i(s,f,n)||(s!==a&&s.push(f),a.push(l))}return a}function Zr(t,e){return null==(t=_o(t,e=ai(e,t)))||delete t[jo(No(e))]}function ti(t,e,n,r){return zr(t,e,n(fr(t,e)),r)}function ei(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?qr(t,r?0:o,r?o+1:i):qr(t,r?o+1:0,r?i:o)}function ni(t,e){var n=t;return n instanceof Fn&&(n=n.value()),ve(e,(function(t,e){return e.func.apply(e.thisArg,de([t],e.args))}),n)}function ri(t,e,n){var i=t.length;if(i<2)return i?Yr(t[0]):[];for(var o=-1,u=r(i);++o<i;)for(var a=t[o],s=-1;++s<i;)s!=o&&(u[o]=Zn(u[o]||a,t[s],e,n));return Yr(or(u,1),e,n)}function ii(t,e,n){for(var r=-1,i=t.length,o=e.length,u={};++r<i;){var a=r<o?e[r]:void 0;n(u,t[r],a)}return u}function oi(t){return Ru(t)?t:[]}function ui(t){return"function"==typeof t?t:$a}function ai(t,e){return Mu(t)?t:so(t,e)?[t]:ko(aa(t))}var si=Dr;function ci(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:qr(t,e,n)}var li=Je||function(t){return Gt.clearTimeout(t)};function fi(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}function hi(t){var e=new t.constructor(t.byteLength);return new Rt(e).set(new Rt(t)),e}function pi(t,e){var n=e?hi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function di(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Xu(t),u=void 0!==e,a=null===e,s=e==e,c=Xu(e);if(!a&&!c&&!o&&t>e||o&&u&&s&&!a&&!c||r&&u&&s||!n&&s||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||a&&n&&i||!u&&i||!s)return-1}return 0}function vi(t,e,n,i){for(var o=-1,u=t.length,a=n.length,s=-1,c=e.length,l=un(u-a,0),f=r(c+l),h=!i;++s<c;)f[s]=e[s];for(;++o<a;)(h||o<u)&&(f[n[o]]=t[o]);for(;l--;)f[s++]=t[o++];return f}function _i(t,e,n,i){for(var o=-1,u=t.length,a=-1,s=n.length,c=-1,l=e.length,f=un(u-s,0),h=r(f+l),p=!i;++o<f;)h[o]=t[o];for(var d=o;++c<l;)h[d+c]=e[c];for(;++a<s;)(p||o<u)&&(h[d+n[a]]=t[o++]);return h}function gi(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function mi(t,e,n,r){var i=!n;n||(n={});for(var o=-1,u=e.length;++o<u;){var a=e[o],s=r?r(n[a],t[a],a,n,t):void 0;void 0===s&&(s=t[a]),i?Gn(n,a,s):Vn(n,a,s)}return n}function yi(t,e){return function(n,r){var i=Mu(n)?ue:qn,o=e?e():{};return i(n,t,Qi(r,2),o)}}function bi(t){return Dr((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,u=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,u&&ao(n[0],n[1],u)&&(o=i<3?void 0:o,i=1),e=vt(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e}))}function wi(t,e){return function(n,r){if(null==n)return n;if(!Bu(n))return t(n,r);for(var i=n.length,o=e?i:-1,u=vt(n);(e?o--:++o<i)&&!1!==r(u[o],o,u););return n}}function xi(t){return function(e,n,r){for(var i=-1,o=vt(e),u=r(e),a=u.length;a--;){var s=u[t?a:++i];if(!1===n(o[s],s,o))break}return e}}function Si(t){return function(e){var n=Ne(e=aa(e))?$e(e):void 0,r=n?n[0]:e.charAt(0),i=n?ci(n,1).join(""):e.slice(1);return r[t]()+i}}function Ei(t){return function(e){return ve(Ua(Fa(e).replace(Ft,"")),t,"")}}function ki(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=On(t.prototype),r=t.apply(n,e);return Vu(r)?r:n}}function ji(t){return function(e,n,r){var i=vt(e);if(!Bu(e)){var o=Qi(n,3);e=ba(e),n=function(t){return o(i[t],t,i)}}var u=t(e,n,r);return u>-1?i[o?e[u]:u]:void 0}}function Ai(t){return Hi((function(e){var n=e.length,r=n,i=Pn.prototype.thru;for(t&&e.reverse();r--;){var u=e[r];if("function"!=typeof u)throw new mt(o);if(i&&!a&&"wrapper"==Ki(u))var a=new Pn([],!0)}for(r=a?r:n;++r<n;){var s=Ki(u=e[r]),c="wrapper"==s?Gi(u):void 0;a=c&&co(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?a[Ki(c[0])].apply(a,c[3]):1==u.length&&co(u)?a[s]():a.thru(u)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&Mu(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Ci(t,e,n,i,o,u,a,s,c,l){var f=128&e,h=1&e,p=2&e,d=24&e,v=512&e,_=p?void 0:ki(t);return function g(){for(var m=arguments.length,y=r(m),b=m;b--;)y[b]=arguments[b];if(d)var w=Ji(g),x=Be(y,w);if(i&&(y=vi(y,i,o,d)),u&&(y=_i(y,u,a,d)),m-=x,d&&m<l){var S=We(y,w);return Bi(t,e,Ci,g.placeholder,n,y,S,s,c,l-m)}var E=h?n:this,k=p?E[t]:t;return m=y.length,s?y=go(y,s):v&&m>1&&y.reverse(),f&&c<m&&(y.length=c),this&&this!==Gt&&this instanceof g&&(k=_||ki(k)),k.apply(E,y)}}function Oi(t,e){return function(n,r){return function(t,e,n,r){return sr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Ti(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Xr(n),r=Xr(r)):(n=Qr(n),r=Qr(r)),i=t(n,r)}return i}}function Pi(t){return Hi((function(e){return e=pe(e,Te(Qi())),Dr((function(n){var r=this;return t(e,(function(t){return oe(t,r,n)}))}))}))}function Fi(t,e){var n=(e=void 0===e?" ":Xr(e)).length;if(n<2)return n?Lr(e,t):e;var r=Lr(e,Ye(t/qe(e)));return Ne(e)?ci($e(r),0,t).join(""):r.slice(0,t)}function Mi(t){return function(e,n,i){return i&&"number"!=typeof i&&ao(e,n,i)&&(n=i=void 0),e=na(e),void 0===n?(n=e,e=0):n=na(n),function(t,e,n,i){for(var o=-1,u=un(Ye((e-t)/(n||1)),0),a=r(u);u--;)a[i?u:++o]=t,t+=n;return a}(e,n,i=void 0===i?e<n?1:-1:na(i),t)}}function Ii(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=oa(e),n=oa(n)),t(e,n)}}function Bi(t,e,n,r,i,o,u,a,s,c){var l=8&e;e|=l?32:64,4&(e&=~(l?64:32))||(e&=-4);var f=[t,e,i,l?o:void 0,l?u:void 0,l?void 0:o,l?void 0:u,a,s,c],h=n.apply(void 0,f);return co(t)&&yo(h,f),h.placeholder=r,xo(h,t,e)}function Ri(t){var e=dt[t];return function(t,n){if(t=oa(t),(n=null==n?0:an(ra(n),292))&&nn(t)){var r=(aa(t)+"e").split("e");return+((r=(aa(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Li=vn&&1/Ve(new vn([,-0]))[1]==1/0?function(t){return new vn(t)}:Xa;function Di(t){return function(e){var n=no(e);return n==v?Ue(e):n==y?He(e):function(t,e){return pe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ni(t,e,n,i,a,s,c,l){var f=2&e;if(!f&&"function"!=typeof t)throw new mt(o);var h=i?i.length:0;if(h||(e&=-97,i=a=void 0),c=void 0===c?c:un(ra(c),0),l=void 0===l?l:ra(l),h-=a?a.length:0,64&e){var p=i,d=a;i=a=void 0}var v=f?void 0:Gi(t),_=[t,e,n,i,a,p,d,s,c,l];if(v&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var s=e[3];if(s){var c=t[3];t[3]=c?vi(c,s,e[4]):s,t[4]=c?We(t[3],u):e[4]}(s=e[5])&&(c=t[5],t[5]=c?_i(c,s,e[6]):s,t[6]=c?We(t[5],u):e[6]);(s=e[7])&&(t[7]=s);128&r&&(t[8]=null==t[8]?e[8]:an(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(_,v),t=_[0],e=_[1],n=_[2],i=_[3],a=_[4],!(l=_[9]=void 0===_[9]?f?0:t.length:un(_[9]-h,0))&&24&e&&(e&=-25),e&&1!=e)g=8==e||16==e?function(t,e,n){var i=ki(t);return function o(){for(var u=arguments.length,a=r(u),s=u,c=Ji(o);s--;)a[s]=arguments[s];var l=u<3&&a[0]!==c&&a[u-1]!==c?[]:We(a,c);if((u-=l.length)<n)return Bi(t,e,Ci,o.placeholder,void 0,a,l,void 0,void 0,n-u);var f=this&&this!==Gt&&this instanceof o?i:t;return oe(f,this,a)}}(t,e,l):32!=e&&33!=e||a.length?Ci.apply(void 0,_):function(t,e,n,i){var o=1&e,u=ki(t);return function e(){for(var a=-1,s=arguments.length,c=-1,l=i.length,f=r(l+s),h=this&&this!==Gt&&this instanceof e?u:t;++c<l;)f[c]=i[c];for(;s--;)f[c++]=arguments[++a];return oe(h,o?n:this,f)}}(t,e,n,i);else var g=function(t,e,n){var r=1&e,i=ki(t);return function e(){var o=this&&this!==Gt&&this instanceof e?i:t;return o.apply(r?n:this,arguments)}}(t,e,n);return xo((v?Wr:yo)(g,_),t,e)}function Ui(t,e,n,r){return void 0===t||Ou(t,wt[n])&&!Et.call(r,n)?e:t}function zi(t,e,n,r,i,o){return Vu(t)&&Vu(e)&&(o.set(e,t),Tr(t,e,void 0,zi,o),o.delete(e)),t}function Wi(t){return Gu(t)?void 0:t}function Vi(t,e,n,r,i,o){var u=1&n,a=t.length,s=e.length;if(a!=s&&!(u&&s>a))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,f=!0,h=2&n?new Rn:void 0;for(o.set(t,e),o.set(e,t);++l<a;){var p=t[l],d=e[l];if(r)var v=u?r(d,p,l,e,t,o):r(p,d,l,t,e,o);if(void 0!==v){if(v)continue;f=!1;break}if(h){if(!ge(e,(function(t,e){if(!Fe(h,e)&&(p===t||i(p,t,n,r,o)))return h.push(e)}))){f=!1;break}}else if(p!==d&&!i(p,d,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function Hi(t){return wo(vo(t,void 0,Io),t+"")}function qi(t){return hr(t,ba,to)}function $i(t){return hr(t,wa,eo)}var Gi=mn?function(t){return mn.get(t)}:Xa;function Ki(t){for(var e=t.name+"",n=yn[e],r=Et.call(yn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Ji(t){return(Et.call(Cn,"placeholder")?Cn:t).placeholder}function Qi(){var t=Cn.iteratee||Ga;return t=t===Ga?Sr:t,arguments.length?t(arguments[0],arguments[1]):t}function Xi(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Yi(t){for(var e=ba(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ho(i)]}return e}function Zi(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return xr(n)?n:void 0}var to=tn?function(t){return null==t?[]:(t=vt(t),le(tn(t),(function(e){return Kt.call(t,e)})))}:is,eo=tn?function(t){for(var e=[];t;)de(e,to(t)),t=qt(t);return e}:is,no=pr;function ro(t,e,n){for(var r=-1,i=(e=ai(e,t)).length,o=!1;++r<i;){var u=jo(e[r]);if(!(o=null!=t&&n(t,u)))break;t=t[u]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Wu(i)&&uo(u,i)&&(Mu(t)||Fu(t))}function io(t){return"function"!=typeof t.constructor||fo(t)?{}:On(qt(t))}function oo(t){return Mu(t)||Fu(t)||!!(Xt&&t&&t[Xt])}function uo(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&st.test(t))&&t>-1&&t%1==0&&t<e}function ao(t,e,n){if(!Vu(n))return!1;var r=typeof e;return!!("number"==r?Bu(n)&&uo(e,n.length):"string"==r&&e in n)&&Ou(n[e],t)}function so(t,e){if(Mu(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Xu(t))||(H.test(t)||!V.test(t)||null!=e&&t in vt(e))}function co(t){var e=Ki(t),n=Cn[e];if("function"!=typeof n||!(e in Fn.prototype))return!1;if(t===n)return!0;var r=Gi(n);return!!r&&t===r[0]}(hn&&no(new hn(new ArrayBuffer(1)))!=E||pn&&no(new pn)!=v||dn&&"[object Promise]"!=no(dn.resolve())||vn&&no(new vn)!=y||_n&&no(new _n)!=x)&&(no=function(t){var e=pr(t),n=e==g?t.constructor:void 0,r=n?Ao(n):"";if(r)switch(r){case bn:return E;case wn:return v;case xn:return"[object Promise]";case Sn:return y;case En:return x}return e});var lo=xt?Uu:os;function fo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||wt)}function ho(t){return t==t&&!Vu(t)}function po(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in vt(n)))}}function vo(t,e,n){return e=un(void 0===e?t.length-1:e,0),function(){for(var i=arguments,o=-1,u=un(i.length-e,0),a=r(u);++o<u;)a[o]=i[e+o];o=-1;for(var s=r(e+1);++o<e;)s[o]=i[o];return s[e]=n(a),oe(t,this,s)}}function _o(t,e){return e.length<2?t:fr(t,qr(e,0,-1))}function go(t,e){for(var n=t.length,r=an(e.length,n),i=gi(t);r--;){var o=e[r];t[r]=uo(o,n)?i[o]:void 0}return t}function mo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var yo=So(Wr),bo=Xe||function(t,e){return Gt.setTimeout(t,e)},wo=So(Vr);function xo(t,e,n){var r=e+"";return wo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(X,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return ae(a,(function(n){var r="_."+n[0];e&n[1]&&!fe(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(Y);return e?e[1].split(Z):[]}(r),n)))}function So(t){var e=0,n=0;return function(){var r=sn(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Eo(t,e){var n=-1,r=t.length,i=r-1;for(e=void 0===e?r:e;++n<e;){var o=Rr(n,i),u=t[o];t[o]=t[n],t[n]=u}return t.length=e,t}var ko=function(t){var e=Su(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(q,(function(t,n,r,i){e.push(r?i.replace(et,"$1"):n||t)})),e}));function jo(t){if("string"==typeof t||Xu(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ao(t){if(null!=t){try{return St.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Co(t){if(t instanceof Fn)return t.clone();var e=new Pn(t.__wrapped__,t.__chain__);return e.__actions__=gi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Oo=Dr((function(t,e){return Ru(t)?Zn(t,or(e,1,Ru,!0)):[]})),To=Dr((function(t,e){var n=No(e);return Ru(n)&&(n=void 0),Ru(t)?Zn(t,or(e,1,Ru,!0),Qi(n,2)):[]})),Po=Dr((function(t,e){var n=No(e);return Ru(n)&&(n=void 0),Ru(t)?Zn(t,or(e,1,Ru,!0),void 0,n):[]}));function Fo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ra(n);return i<0&&(i=un(r+i,0)),be(t,Qi(e,3),i)}function Mo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=ra(n),i=n<0?un(r+i,0):an(i,r-1)),be(t,Qi(e,3),i,!0)}function Io(t){return(null==t?0:t.length)?or(t,1):[]}function Bo(t){return t&&t.length?t[0]:void 0}var Ro=Dr((function(t){var e=pe(t,oi);return e.length&&e[0]===t[0]?gr(e):[]})),Lo=Dr((function(t){var e=No(t),n=pe(t,oi);return e===No(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?gr(n,Qi(e,2)):[]})),Do=Dr((function(t){var e=No(t),n=pe(t,oi);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?gr(n,void 0,e):[]}));function No(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Uo=Dr(zo);function zo(t,e){return t&&t.length&&e&&e.length?Ir(t,e):t}var Wo=Hi((function(t,e){var n=null==t?0:t.length,r=Kn(t,e);return Br(t,pe(e,(function(t){return uo(t,n)?+t:t})).sort(di)),r}));function Vo(t){return null==t?t:fn.call(t)}var Ho=Dr((function(t){return Yr(or(t,1,Ru,!0))})),qo=Dr((function(t){var e=No(t);return Ru(e)&&(e=void 0),Yr(or(t,1,Ru,!0),Qi(e,2))})),$o=Dr((function(t){var e=No(t);return e="function"==typeof e?e:void 0,Yr(or(t,1,Ru,!0),void 0,e)}));function Go(t){if(!t||!t.length)return[];var e=0;return t=le(t,(function(t){if(Ru(t))return e=un(t.length,e),!0})),Oe(e,(function(e){return pe(t,ke(e))}))}function Ko(t,e){if(!t||!t.length)return[];var n=Go(t);return null==e?n:pe(n,(function(t){return oe(e,void 0,t)}))}var Jo=Dr((function(t,e){return Ru(t)?Zn(t,e):[]})),Qo=Dr((function(t){return ri(le(t,Ru))})),Xo=Dr((function(t){var e=No(t);return Ru(e)&&(e=void 0),ri(le(t,Ru),Qi(e,2))})),Yo=Dr((function(t){var e=No(t);return e="function"==typeof e?e:void 0,ri(le(t,Ru),void 0,e)})),Zo=Dr(Go);var tu=Dr((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Ko(t,n)}));function eu(t){var e=Cn(t);return e.__chain__=!0,e}function nu(t,e){return e(t)}var ru=Hi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Kn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Fn&&uo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:nu,args:[i],thisArg:void 0}),new Pn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(i)}));var iu=yi((function(t,e,n){Et.call(t,n)?++t[n]:Gn(t,n,1)}));var ou=ji(Fo),uu=ji(Mo);function au(t,e){return(Mu(t)?ae:tr)(t,Qi(e,3))}function su(t,e){return(Mu(t)?se:er)(t,Qi(e,3))}var cu=yi((function(t,e,n){Et.call(t,n)?t[n].push(e):Gn(t,n,[e])}));var lu=Dr((function(t,e,n){var i=-1,o="function"==typeof e,u=Bu(t)?r(t.length):[];return tr(t,(function(t){u[++i]=o?oe(e,t,n):mr(t,e,n)})),u})),fu=yi((function(t,e,n){Gn(t,n,e)}));function hu(t,e){return(Mu(t)?pe:Ar)(t,Qi(e,3))}var pu=yi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var du=Dr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ao(t,e[0],e[1])?e=[]:n>2&&ao(e[0],e[1],e[2])&&(e=[e[0]]),Fr(t,or(e,1),[])})),vu=Qe||function(){return Gt.Date.now()};function _u(t,e,n){return e=n?void 0:e,Ni(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function gu(t,e){var n;if("function"!=typeof e)throw new mt(o);return t=ra(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var mu=Dr((function(t,e,n){var r=1;if(n.length){var i=We(n,Ji(mu));r|=32}return Ni(t,r,e,n,i)})),yu=Dr((function(t,e,n){var r=3;if(n.length){var i=We(n,Ji(yu));r|=32}return Ni(e,r,t,n,i)}));function bu(t,e,n){var r,i,u,a,s,c,l=0,f=!1,h=!1,p=!0;if("function"!=typeof t)throw new mt(o);function d(e){var n=r,o=i;return r=i=void 0,l=e,a=t.apply(o,n)}function v(t){return l=t,s=bo(g,e),f?d(t):a}function _(t){var n=t-c;return void 0===c||n>=e||n<0||h&&t-l>=u}function g(){var t=vu();if(_(t))return m(t);s=bo(g,function(t){var n=e-(t-c);return h?an(n,u-(t-l)):n}(t))}function m(t){return s=void 0,p&&r?d(t):(r=i=void 0,a)}function y(){var t=vu(),n=_(t);if(r=arguments,i=this,c=t,n){if(void 0===s)return v(c);if(h)return li(s),s=bo(g,e),d(c)}return void 0===s&&(s=bo(g,e)),a}return e=oa(e)||0,Vu(n)&&(f=!!n.leading,u=(h="maxWait"in n)?un(oa(n.maxWait)||0,e):u,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==s&&li(s),l=0,r=c=i=s=void 0},y.flush=function(){return void 0===s?a:m(vu())},y}var wu=Dr((function(t,e){return Yn(t,1,e)})),xu=Dr((function(t,e,n){return Yn(t,oa(e)||0,n)}));function Su(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new mt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var u=t.apply(this,r);return n.cache=o.set(i,u)||o,u};return n.cache=new(Su.Cache||Bn),n}function Eu(t){if("function"!=typeof t)throw new mt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Su.Cache=Bn;var ku=si((function(t,e){var n=(e=1==e.length&&Mu(e[0])?pe(e[0],Te(Qi())):pe(or(e,1),Te(Qi()))).length;return Dr((function(r){for(var i=-1,o=an(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return oe(t,this,r)}))})),ju=Dr((function(t,e){return Ni(t,32,void 0,e,We(e,Ji(ju)))})),Au=Dr((function(t,e){return Ni(t,64,void 0,e,We(e,Ji(Au)))})),Cu=Hi((function(t,e){return Ni(t,256,void 0,void 0,void 0,e)}));function Ou(t,e){return t===e||t!=t&&e!=e}var Tu=Ii(dr),Pu=Ii((function(t,e){return t>=e})),Fu=yr(function(){return arguments}())?yr:function(t){return Hu(t)&&Et.call(t,"callee")&&!Kt.call(t,"callee")},Mu=r.isArray,Iu=Zt?Te(Zt):function(t){return Hu(t)&&pr(t)==S};function Bu(t){return null!=t&&Wu(t.length)&&!Uu(t)}function Ru(t){return Hu(t)&&Bu(t)}var Lu=en||os,Du=te?Te(te):function(t){return Hu(t)&&pr(t)==f};function Nu(t){if(!Hu(t))return!1;var e=pr(t);return e==h||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Gu(t)}function Uu(t){if(!Vu(t))return!1;var e=pr(t);return e==p||e==d||"[object AsyncFunction]"==e||"[object Proxy]"==e}function zu(t){return"number"==typeof t&&t==ra(t)}function Wu(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Vu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Hu(t){return null!=t&&"object"==typeof t}var qu=ee?Te(ee):function(t){return Hu(t)&&no(t)==v};function $u(t){return"number"==typeof t||Hu(t)&&pr(t)==_}function Gu(t){if(!Hu(t)||pr(t)!=g)return!1;var e=qt(t);if(null===e)return!0;var n=Et.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&St.call(n)==Ct}var Ku=ne?Te(ne):function(t){return Hu(t)&&pr(t)==m};var Ju=re?Te(re):function(t){return Hu(t)&&no(t)==y};function Qu(t){return"string"==typeof t||!Mu(t)&&Hu(t)&&pr(t)==b}function Xu(t){return"symbol"==typeof t||Hu(t)&&pr(t)==w}var Yu=ie?Te(ie):function(t){return Hu(t)&&Wu(t.length)&&!!Ut[pr(t)]};var Zu=Ii(jr),ta=Ii((function(t,e){return t<=e}));function ea(t){if(!t)return[];if(Bu(t))return Qu(t)?$e(t):gi(t);if(Yt&&t[Yt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Yt]());var e=no(t);return(e==v?Ue:e==y?Ve:Oa)(t)}function na(t){return t?(t=oa(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ra(t){var e=na(t),n=e%1;return e==e?n?e-n:e:0}function ia(t){return t?Jn(ra(t),0,4294967295):0}function oa(t){if("number"==typeof t)return t;if(Xu(t))return NaN;if(Vu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Vu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(K,"");var n=ot.test(t);return n||at.test(t)?Ht(t.slice(2),n?2:8):it.test(t)?NaN:+t}function ua(t){return mi(t,wa(t))}function aa(t){return null==t?"":Xr(t)}var sa=bi((function(t,e){if(fo(e)||Bu(e))mi(e,ba(e),t);else for(var n in e)Et.call(e,n)&&Vn(t,n,e[n])})),ca=bi((function(t,e){mi(e,wa(e),t)})),la=bi((function(t,e,n,r){mi(e,wa(e),t,r)})),fa=bi((function(t,e,n,r){mi(e,ba(e),t,r)})),ha=Hi(Kn);var pa=Dr((function(t,e){t=vt(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&ao(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],u=wa(o),a=-1,s=u.length;++a<s;){var c=u[a],l=t[c];(void 0===l||Ou(l,wt[c])&&!Et.call(t,c))&&(t[c]=o[c])}return t})),da=Dr((function(t){return t.push(void 0,zi),oe(Sa,void 0,t)}));function va(t,e,n){var r=null==t?void 0:fr(t,e);return void 0===r?n:r}function _a(t,e){return null!=t&&ro(t,e,_r)}var ga=Oi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=At.call(e)),t[e]=n}),Va($a)),ma=Oi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=At.call(e)),Et.call(t,e)?t[e].push(n):t[e]=[n]}),Qi),ya=Dr(mr);function ba(t){return Bu(t)?Dn(t):Er(t)}function wa(t){return Bu(t)?Dn(t,!0):kr(t)}var xa=bi((function(t,e,n){Tr(t,e,n)})),Sa=bi((function(t,e,n,r){Tr(t,e,n,r)})),Ea=Hi((function(t,e){var n={};if(null==t)return n;var r=!1;e=pe(e,(function(e){return e=ai(e,t),r||(r=e.length>1),e})),mi(t,$i(t),n),r&&(n=Qn(n,7,Wi));for(var i=e.length;i--;)Zr(n,e[i]);return n}));var ka=Hi((function(t,e){return null==t?{}:function(t,e){return Mr(t,e,(function(e,n){return _a(t,n)}))}(t,e)}));function ja(t,e){if(null==t)return{};var n=pe($i(t),(function(t){return[t]}));return e=Qi(e),Mr(t,n,(function(t,n){return e(t,n[0])}))}var Aa=Di(ba),Ca=Di(wa);function Oa(t){return null==t?[]:Pe(t,ba(t))}var Ta=Ei((function(t,e,n){return e=e.toLowerCase(),t+(n?Pa(e):e)}));function Pa(t){return Na(aa(t).toLowerCase())}function Fa(t){return(t=aa(t))&&t.replace(ct,Re).replace(Mt,"")}var Ma=Ei((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ia=Ei((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ba=Si("toLowerCase");var Ra=Ei((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var La=Ei((function(t,e,n){return t+(n?" ":"")+Na(e)}));var Da=Ei((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Na=Si("toUpperCase");function Ua(t,e,n){return t=aa(t),void 0===(e=n?void 0:e)?function(t){return Lt.test(t)}(t)?function(t){return t.match(Bt)||[]}(t):function(t){return t.match(tt)||[]}(t):t.match(e)||[]}var za=Dr((function(t,e){try{return oe(t,void 0,e)}catch(t){return Nu(t)?t:new ht(t)}})),Wa=Hi((function(t,e){return ae(e,(function(e){e=jo(e),Gn(t,e,mu(t[e],t))})),t}));function Va(t){return function(){return t}}var Ha=Ai(),qa=Ai(!0);function $a(t){return t}function Ga(t){return Sr("function"==typeof t?t:Qn(t,1))}var Ka=Dr((function(t,e){return function(n){return mr(n,t,e)}})),Ja=Dr((function(t,e){return function(n){return mr(t,n,e)}}));function Qa(t,e,n){var r=ba(e),i=lr(e,r);null!=n||Vu(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=lr(e,ba(e)));var o=!(Vu(n)&&"chain"in n&&!n.chain),u=Uu(t);return ae(i,(function(n){var r=e[n];t[n]=r,u&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=gi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,de([this.value()],arguments))})})),t}function Xa(){}var Ya=Pi(pe),Za=Pi(ce),ts=Pi(ge);function es(t){return so(t)?ke(jo(t)):function(t){return function(e){return fr(e,t)}}(t)}var ns=Mi(),rs=Mi(!0);function is(){return[]}function os(){return!1}var us=Ti((function(t,e){return t+e}),0),as=Ri("ceil"),ss=Ti((function(t,e){return t/e}),1),cs=Ri("floor");var ls,fs=Ti((function(t,e){return t*e}),1),hs=Ri("round"),ps=Ti((function(t,e){return t-e}),0);return Cn.after=function(t,e){if("function"!=typeof e)throw new mt(o);return t=ra(t),function(){if(--t<1)return e.apply(this,arguments)}},Cn.ary=_u,Cn.assign=sa,Cn.assignIn=ca,Cn.assignInWith=la,Cn.assignWith=fa,Cn.at=ha,Cn.before=gu,Cn.bind=mu,Cn.bindAll=Wa,Cn.bindKey=yu,Cn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Mu(t)?t:[t]},Cn.chain=eu,Cn.chunk=function(t,e,n){e=(n?ao(t,e,n):void 0===e)?1:un(ra(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,u=0,a=r(Ye(i/e));o<i;)a[u++]=qr(t,o,o+=e);return a},Cn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Cn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return de(Mu(n)?gi(n):[n],or(e,1))},Cn.cond=function(t){var e=null==t?0:t.length,n=Qi();return t=e?pe(t,(function(t){if("function"!=typeof t[1])throw new mt(o);return[n(t[0]),t[1]]})):[],Dr((function(n){for(var r=-1;++r<e;){var i=t[r];if(oe(i[0],this,n))return oe(i[1],this,n)}}))},Cn.conforms=function(t){return function(t){var e=ba(t);return function(n){return Xn(n,t,e)}}(Qn(t,1))},Cn.constant=Va,Cn.countBy=iu,Cn.create=function(t,e){var n=On(t);return null==e?n:$n(n,e)},Cn.curry=function t(e,n,r){var i=Ni(e,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},Cn.curryRight=function t(e,n,r){var i=Ni(e,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},Cn.debounce=bu,Cn.defaults=pa,Cn.defaultsDeep=da,Cn.defer=wu,Cn.delay=xu,Cn.difference=Oo,Cn.differenceBy=To,Cn.differenceWith=Po,Cn.drop=function(t,e,n){var r=null==t?0:t.length;return r?qr(t,(e=n||void 0===e?1:ra(e))<0?0:e,r):[]},Cn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?qr(t,0,(e=r-(e=n||void 0===e?1:ra(e)))<0?0:e):[]},Cn.dropRightWhile=function(t,e){return t&&t.length?ei(t,Qi(e,3),!0,!0):[]},Cn.dropWhile=function(t,e){return t&&t.length?ei(t,Qi(e,3),!0):[]},Cn.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ao(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=ra(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:ra(r))<0&&(r+=i),r=n>r?0:ia(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Cn.filter=function(t,e){return(Mu(t)?le:ir)(t,Qi(e,3))},Cn.flatMap=function(t,e){return or(hu(t,e),1)},Cn.flatMapDeep=function(t,e){return or(hu(t,e),1/0)},Cn.flatMapDepth=function(t,e,n){return n=void 0===n?1:ra(n),or(hu(t,e),n)},Cn.flatten=Io,Cn.flattenDeep=function(t){return(null==t?0:t.length)?or(t,1/0):[]},Cn.flattenDepth=function(t,e){return(null==t?0:t.length)?or(t,e=void 0===e?1:ra(e)):[]},Cn.flip=function(t){return Ni(t,512)},Cn.flow=Ha,Cn.flowRight=qa,Cn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Cn.functions=function(t){return null==t?[]:lr(t,ba(t))},Cn.functionsIn=function(t){return null==t?[]:lr(t,wa(t))},Cn.groupBy=cu,Cn.initial=function(t){return(null==t?0:t.length)?qr(t,0,-1):[]},Cn.intersection=Ro,Cn.intersectionBy=Lo,Cn.intersectionWith=Do,Cn.invert=ga,Cn.invertBy=ma,Cn.invokeMap=lu,Cn.iteratee=Ga,Cn.keyBy=fu,Cn.keys=ba,Cn.keysIn=wa,Cn.map=hu,Cn.mapKeys=function(t,e){var n={};return e=Qi(e,3),sr(t,(function(t,r,i){Gn(n,e(t,r,i),t)})),n},Cn.mapValues=function(t,e){var n={};return e=Qi(e,3),sr(t,(function(t,r,i){Gn(n,r,e(t,r,i))})),n},Cn.matches=function(t){return Cr(Qn(t,1))},Cn.matchesProperty=function(t,e){return Or(t,Qn(e,1))},Cn.memoize=Su,Cn.merge=xa,Cn.mergeWith=Sa,Cn.method=Ka,Cn.methodOf=Ja,Cn.mixin=Qa,Cn.negate=Eu,Cn.nthArg=function(t){return t=ra(t),Dr((function(e){return Pr(e,t)}))},Cn.omit=Ea,Cn.omitBy=function(t,e){return ja(t,Eu(Qi(e)))},Cn.once=function(t){return gu(2,t)},Cn.orderBy=function(t,e,n,r){return null==t?[]:(Mu(e)||(e=null==e?[]:[e]),Mu(n=r?void 0:n)||(n=null==n?[]:[n]),Fr(t,e,n))},Cn.over=Ya,Cn.overArgs=ku,Cn.overEvery=Za,Cn.overSome=ts,Cn.partial=ju,Cn.partialRight=Au,Cn.partition=pu,Cn.pick=ka,Cn.pickBy=ja,Cn.property=es,Cn.propertyOf=function(t){return function(e){return null==t?void 0:fr(t,e)}},Cn.pull=Uo,Cn.pullAll=zo,Cn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ir(t,e,Qi(n,2)):t},Cn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Ir(t,e,void 0,n):t},Cn.pullAt=Wo,Cn.range=ns,Cn.rangeRight=rs,Cn.rearg=Cu,Cn.reject=function(t,e){return(Mu(t)?le:ir)(t,Eu(Qi(e,3)))},Cn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Qi(e,3);++r<o;){var u=t[r];e(u,r,t)&&(n.push(u),i.push(r))}return Br(t,i),n},Cn.rest=function(t,e){if("function"!=typeof t)throw new mt(o);return Dr(t,e=void 0===e?e:ra(e))},Cn.reverse=Vo,Cn.sampleSize=function(t,e,n){return e=(n?ao(t,e,n):void 0===e)?1:ra(e),(Mu(t)?Un:Ur)(t,e)},Cn.set=function(t,e,n){return null==t?t:zr(t,e,n)},Cn.setWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:zr(t,e,n,r)},Cn.shuffle=function(t){return(Mu(t)?zn:Hr)(t)},Cn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ao(t,e,n)?(e=0,n=r):(e=null==e?0:ra(e),n=void 0===n?r:ra(n)),qr(t,e,n)):[]},Cn.sortBy=du,Cn.sortedUniq=function(t){return t&&t.length?Jr(t):[]},Cn.sortedUniqBy=function(t,e){return t&&t.length?Jr(t,Qi(e,2)):[]},Cn.split=function(t,e,n){return n&&"number"!=typeof n&&ao(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=aa(t))&&("string"==typeof e||null!=e&&!Ku(e))&&!(e=Xr(e))&&Ne(t)?ci($e(t),0,n):t.split(e,n):[]},Cn.spread=function(t,e){if("function"!=typeof t)throw new mt(o);return e=null==e?0:un(ra(e),0),Dr((function(n){var r=n[e],i=ci(n,0,e);return r&&de(i,r),oe(t,this,i)}))},Cn.tail=function(t){var e=null==t?0:t.length;return e?qr(t,1,e):[]},Cn.take=function(t,e,n){return t&&t.length?qr(t,0,(e=n||void 0===e?1:ra(e))<0?0:e):[]},Cn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?qr(t,(e=r-(e=n||void 0===e?1:ra(e)))<0?0:e,r):[]},Cn.takeRightWhile=function(t,e){return t&&t.length?ei(t,Qi(e,3),!1,!0):[]},Cn.takeWhile=function(t,e){return t&&t.length?ei(t,Qi(e,3)):[]},Cn.tap=function(t,e){return e(t),t},Cn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new mt(o);return Vu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),bu(t,e,{leading:r,maxWait:e,trailing:i})},Cn.thru=nu,Cn.toArray=ea,Cn.toPairs=Aa,Cn.toPairsIn=Ca,Cn.toPath=function(t){return Mu(t)?pe(t,jo):Xu(t)?[t]:gi(ko(aa(t)))},Cn.toPlainObject=ua,Cn.transform=function(t,e,n){var r=Mu(t),i=r||Lu(t)||Yu(t);if(e=Qi(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Vu(t)&&Uu(o)?On(qt(t)):{}}return(i?ae:sr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Cn.unary=function(t){return _u(t,1)},Cn.union=Ho,Cn.unionBy=qo,Cn.unionWith=$o,Cn.uniq=function(t){return t&&t.length?Yr(t):[]},Cn.uniqBy=function(t,e){return t&&t.length?Yr(t,Qi(e,2)):[]},Cn.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Yr(t,void 0,e):[]},Cn.unset=function(t,e){return null==t||Zr(t,e)},Cn.unzip=Go,Cn.unzipWith=Ko,Cn.update=function(t,e,n){return null==t?t:ti(t,e,ui(n))},Cn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:ti(t,e,ui(n),r)},Cn.values=Oa,Cn.valuesIn=function(t){return null==t?[]:Pe(t,wa(t))},Cn.without=Jo,Cn.words=Ua,Cn.wrap=function(t,e){return ju(ui(e),t)},Cn.xor=Qo,Cn.xorBy=Xo,Cn.xorWith=Yo,Cn.zip=Zo,Cn.zipObject=function(t,e){return ii(t||[],e||[],Vn)},Cn.zipObjectDeep=function(t,e){return ii(t||[],e||[],zr)},Cn.zipWith=tu,Cn.entries=Aa,Cn.entriesIn=Ca,Cn.extend=ca,Cn.extendWith=la,Qa(Cn,Cn),Cn.add=us,Cn.attempt=za,Cn.camelCase=Ta,Cn.capitalize=Pa,Cn.ceil=as,Cn.clamp=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=oa(n))==n?n:0),void 0!==e&&(e=(e=oa(e))==e?e:0),Jn(oa(t),e,n)},Cn.clone=function(t){return Qn(t,4)},Cn.cloneDeep=function(t){return Qn(t,5)},Cn.cloneDeepWith=function(t,e){return Qn(t,5,e="function"==typeof e?e:void 0)},Cn.cloneWith=function(t,e){return Qn(t,4,e="function"==typeof e?e:void 0)},Cn.conformsTo=function(t,e){return null==e||Xn(t,e,ba(e))},Cn.deburr=Fa,Cn.defaultTo=function(t,e){return null==t||t!=t?e:t},Cn.divide=ss,Cn.endsWith=function(t,e,n){t=aa(t),e=Xr(e);var r=t.length,i=n=void 0===n?r:Jn(ra(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},Cn.eq=Ou,Cn.escape=function(t){return(t=aa(t))&&N.test(t)?t.replace(L,Le):t},Cn.escapeRegExp=function(t){return(t=aa(t))&&G.test(t)?t.replace($,"\\$&"):t},Cn.every=function(t,e,n){var r=Mu(t)?ce:nr;return n&&ao(t,e,n)&&(e=void 0),r(t,Qi(e,3))},Cn.find=ou,Cn.findIndex=Fo,Cn.findKey=function(t,e){return ye(t,Qi(e,3),sr)},Cn.findLast=uu,Cn.findLastIndex=Mo,Cn.findLastKey=function(t,e){return ye(t,Qi(e,3),cr)},Cn.floor=cs,Cn.forEach=au,Cn.forEachRight=su,Cn.forIn=function(t,e){return null==t?t:ur(t,Qi(e,3),wa)},Cn.forInRight=function(t,e){return null==t?t:ar(t,Qi(e,3),wa)},Cn.forOwn=function(t,e){return t&&sr(t,Qi(e,3))},Cn.forOwnRight=function(t,e){return t&&cr(t,Qi(e,3))},Cn.get=va,Cn.gt=Tu,Cn.gte=Pu,Cn.has=function(t,e){return null!=t&&ro(t,e,vr)},Cn.hasIn=_a,Cn.head=Bo,Cn.identity=$a,Cn.includes=function(t,e,n,r){t=Bu(t)?t:Oa(t),n=n&&!r?ra(n):0;var i=t.length;return n<0&&(n=un(i+n,0)),Qu(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&we(t,e,n)>-1},Cn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ra(n);return i<0&&(i=un(r+i,0)),we(t,e,i)},Cn.inRange=function(t,e,n){return e=na(e),void 0===n?(n=e,e=0):n=na(n),function(t,e,n){return t>=an(e,n)&&t<un(e,n)}(t=oa(t),e,n)},Cn.invoke=ya,Cn.isArguments=Fu,Cn.isArray=Mu,Cn.isArrayBuffer=Iu,Cn.isArrayLike=Bu,Cn.isArrayLikeObject=Ru,Cn.isBoolean=function(t){return!0===t||!1===t||Hu(t)&&pr(t)==l},Cn.isBuffer=Lu,Cn.isDate=Du,Cn.isElement=function(t){return Hu(t)&&1===t.nodeType&&!Gu(t)},Cn.isEmpty=function(t){if(null==t)return!0;if(Bu(t)&&(Mu(t)||"string"==typeof t||"function"==typeof t.splice||Lu(t)||Yu(t)||Fu(t)))return!t.length;var e=no(t);if(e==v||e==y)return!t.size;if(fo(t))return!Er(t).length;for(var n in t)if(Et.call(t,n))return!1;return!0},Cn.isEqual=function(t,e){return br(t,e)},Cn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?br(t,e,void 0,n):!!r},Cn.isError=Nu,Cn.isFinite=function(t){return"number"==typeof t&&nn(t)},Cn.isFunction=Uu,Cn.isInteger=zu,Cn.isLength=Wu,Cn.isMap=qu,Cn.isMatch=function(t,e){return t===e||wr(t,e,Yi(e))},Cn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:void 0,wr(t,e,Yi(e),n)},Cn.isNaN=function(t){return $u(t)&&t!=+t},Cn.isNative=function(t){if(lo(t))throw new ht("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return xr(t)},Cn.isNil=function(t){return null==t},Cn.isNull=function(t){return null===t},Cn.isNumber=$u,Cn.isObject=Vu,Cn.isObjectLike=Hu,Cn.isPlainObject=Gu,Cn.isRegExp=Ku,Cn.isSafeInteger=function(t){return zu(t)&&t>=-9007199254740991&&t<=9007199254740991},Cn.isSet=Ju,Cn.isString=Qu,Cn.isSymbol=Xu,Cn.isTypedArray=Yu,Cn.isUndefined=function(t){return void 0===t},Cn.isWeakMap=function(t){return Hu(t)&&no(t)==x},Cn.isWeakSet=function(t){return Hu(t)&&"[object WeakSet]"==pr(t)},Cn.join=function(t,e){return null==t?"":rn.call(t,e)},Cn.kebabCase=Ma,Cn.last=No,Cn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=ra(n))<0?un(r+i,0):an(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):be(t,Se,i,!0)},Cn.lowerCase=Ia,Cn.lowerFirst=Ba,Cn.lt=Zu,Cn.lte=ta,Cn.max=function(t){return t&&t.length?rr(t,$a,dr):void 0},Cn.maxBy=function(t,e){return t&&t.length?rr(t,Qi(e,2),dr):void 0},Cn.mean=function(t){return Ee(t,$a)},Cn.meanBy=function(t,e){return Ee(t,Qi(e,2))},Cn.min=function(t){return t&&t.length?rr(t,$a,jr):void 0},Cn.minBy=function(t,e){return t&&t.length?rr(t,Qi(e,2),jr):void 0},Cn.stubArray=is,Cn.stubFalse=os,Cn.stubObject=function(){return{}},Cn.stubString=function(){return""},Cn.stubTrue=function(){return!0},Cn.multiply=fs,Cn.nth=function(t,e){return t&&t.length?Pr(t,ra(e)):void 0},Cn.noConflict=function(){return Gt._===this&&(Gt._=Ot),this},Cn.noop=Xa,Cn.now=vu,Cn.pad=function(t,e,n){t=aa(t);var r=(e=ra(e))?qe(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Fi(Ze(i),n)+t+Fi(Ye(i),n)},Cn.padEnd=function(t,e,n){t=aa(t);var r=(e=ra(e))?qe(t):0;return e&&r<e?t+Fi(e-r,n):t},Cn.padStart=function(t,e,n){t=aa(t);var r=(e=ra(e))?qe(t):0;return e&&r<e?Fi(e-r,n)+t:t},Cn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),cn(aa(t).replace(J,""),e||0)},Cn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&ao(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=na(t),void 0===e?(e=t,t=0):e=na(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=ln();return an(t+i*(e-t+Vt("1e-"+((i+"").length-1))),e)}return Rr(t,e)},Cn.reduce=function(t,e,n){var r=Mu(t)?ve:Ae,i=arguments.length<3;return r(t,Qi(e,4),n,i,tr)},Cn.reduceRight=function(t,e,n){var r=Mu(t)?_e:Ae,i=arguments.length<3;return r(t,Qi(e,4),n,i,er)},Cn.repeat=function(t,e,n){return e=(n?ao(t,e,n):void 0===e)?1:ra(e),Lr(aa(t),e)},Cn.replace=function(){var t=arguments,e=aa(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Cn.result=function(t,e,n){var r=-1,i=(e=ai(e,t)).length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[jo(e[r])];void 0===o&&(r=i,o=n),t=Uu(o)?o.call(t):o}return t},Cn.round=hs,Cn.runInContext=t,Cn.sample=function(t){return(Mu(t)?Nn:Nr)(t)},Cn.size=function(t){if(null==t)return 0;if(Bu(t))return Qu(t)?qe(t):t.length;var e=no(t);return e==v||e==y?t.size:Er(t).length},Cn.snakeCase=Ra,Cn.some=function(t,e,n){var r=Mu(t)?ge:$r;return n&&ao(t,e,n)&&(e=void 0),r(t,Qi(e,3))},Cn.sortedIndex=function(t,e){return Gr(t,e)},Cn.sortedIndexBy=function(t,e,n){return Kr(t,e,Qi(n,2))},Cn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Gr(t,e);if(r<n&&Ou(t[r],e))return r}return-1},Cn.sortedLastIndex=function(t,e){return Gr(t,e,!0)},Cn.sortedLastIndexBy=function(t,e,n){return Kr(t,e,Qi(n,2),!0)},Cn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=Gr(t,e,!0)-1;if(Ou(t[n],e))return n}return-1},Cn.startCase=La,Cn.startsWith=function(t,e,n){return t=aa(t),n=null==n?0:Jn(ra(n),0,t.length),e=Xr(e),t.slice(n,n+e.length)==e},Cn.subtract=ps,Cn.sum=function(t){return t&&t.length?Ce(t,$a):0},Cn.sumBy=function(t,e){return t&&t.length?Ce(t,Qi(e,2)):0},Cn.template=function(t,e,n){var r=Cn.templateSettings;n&&ao(t,e,n)&&(e=void 0),t=aa(t),e=la({},e,r,Ui);var i,o,u=la({},e.imports,r.imports,Ui),a=ba(u),s=Pe(u,a),c=0,l=e.interpolate||lt,f="__p += '",h=_t((e.escape||lt).source+"|"+l.source+"|"+(l===W?nt:lt).source+"|"+(e.evaluate||lt).source+"|$","g"),p="//# sourceURL="+(Et.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Nt+"]")+"\n";t.replace(h,(function(e,n,r,u,a,s){return r||(r=u),f+=t.slice(c,s).replace(ft,De),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),a&&(o=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=s+e.length,e})),f+="';\n";var d=Et.call(e,"variable")&&e.variable;d||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(M,""):f).replace(I,"$1").replace(B,"$1;"),f="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=za((function(){return pt(a,p+"return "+f).apply(void 0,s)}));if(v.source=f,Nu(v))throw v;return v},Cn.times=function(t,e){if((t=ra(t))<1||t>9007199254740991)return[];var n=4294967295,r=an(t,4294967295);t-=4294967295;for(var i=Oe(r,e=Qi(e));++n<t;)e(n);return i},Cn.toFinite=na,Cn.toInteger=ra,Cn.toLength=ia,Cn.toLower=function(t){return aa(t).toLowerCase()},Cn.toNumber=oa,Cn.toSafeInteger=function(t){return t?Jn(ra(t),-9007199254740991,9007199254740991):0===t?t:0},Cn.toString=aa,Cn.toUpper=function(t){return aa(t).toUpperCase()},Cn.trim=function(t,e,n){if((t=aa(t))&&(n||void 0===e))return t.replace(K,"");if(!t||!(e=Xr(e)))return t;var r=$e(t),i=$e(e);return ci(r,Me(r,i),Ie(r,i)+1).join("")},Cn.trimEnd=function(t,e,n){if((t=aa(t))&&(n||void 0===e))return t.replace(Q,"");if(!t||!(e=Xr(e)))return t;var r=$e(t);return ci(r,0,Ie(r,$e(e))+1).join("")},Cn.trimStart=function(t,e,n){if((t=aa(t))&&(n||void 0===e))return t.replace(J,"");if(!t||!(e=Xr(e)))return t;var r=$e(t);return ci(r,Me(r,$e(e))).join("")},Cn.truncate=function(t,e){var n=30,r="...";if(Vu(e)){var i="separator"in e?e.separator:i;n="length"in e?ra(e.length):n,r="omission"in e?Xr(e.omission):r}var o=(t=aa(t)).length;if(Ne(t)){var u=$e(t);o=u.length}if(n>=o)return t;var a=n-qe(r);if(a<1)return r;var s=u?ci(u,0,a).join(""):t.slice(0,a);if(void 0===i)return s+r;if(u&&(a+=s.length-a),Ku(i)){if(t.slice(a).search(i)){var c,l=s;for(i.global||(i=_t(i.source,aa(rt.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;s=s.slice(0,void 0===f?a:f)}}else if(t.indexOf(Xr(i),a)!=a){var h=s.lastIndexOf(i);h>-1&&(s=s.slice(0,h))}return s+r},Cn.unescape=function(t){return(t=aa(t))&&D.test(t)?t.replace(R,Ge):t},Cn.uniqueId=function(t){var e=++kt;return aa(t)+e},Cn.upperCase=Da,Cn.upperFirst=Na,Cn.each=au,Cn.eachRight=su,Cn.first=Bo,Qa(Cn,(ls={},sr(Cn,(function(t,e){Et.call(Cn.prototype,e)||(ls[e]=t)})),ls),{chain:!1}),Cn.VERSION="4.17.13",ae(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Cn[t].placeholder=Cn})),ae(["drop","take"],(function(t,e){Fn.prototype[t]=function(n){n=void 0===n?1:un(ra(n),0);var r=this.__filtered__&&!e?new Fn(this):this.clone();return r.__filtered__?r.__takeCount__=an(n,r.__takeCount__):r.__views__.push({size:an(n,4294967295),type:t+(r.__dir__<0?"Right":"")}),r},Fn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ae(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Fn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Qi(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),ae(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Fn.prototype[t]=function(){return this[n](1).value()[0]}})),ae(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Fn.prototype[t]=function(){return this.__filtered__?new Fn(this):this[n](1)}})),Fn.prototype.compact=function(){return this.filter($a)},Fn.prototype.find=function(t){return this.filter(t).head()},Fn.prototype.findLast=function(t){return this.reverse().find(t)},Fn.prototype.invokeMap=Dr((function(t,e){return"function"==typeof t?new Fn(this):this.map((function(n){return mr(n,t,e)}))})),Fn.prototype.reject=function(t){return this.filter(Eu(Qi(t)))},Fn.prototype.slice=function(t,e){t=ra(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Fn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=ra(e))<0?n.dropRight(-e):n.take(e-t)),n)},Fn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Fn.prototype.toArray=function(){return this.take(4294967295)},sr(Fn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=Cn[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(Cn.prototype[e]=function(){var e=this.__wrapped__,u=r?[1]:arguments,a=e instanceof Fn,s=u[0],c=a||Mu(e),l=function(t){var e=i.apply(Cn,de([t],u));return r&&f?e[0]:e};c&&n&&"function"==typeof s&&1!=s.length&&(a=c=!1);var f=this.__chain__,h=!!this.__actions__.length,p=o&&!f,d=a&&!h;if(!o&&c){e=d?e:new Fn(this);var v=t.apply(e,u);return v.__actions__.push({func:nu,args:[l],thisArg:void 0}),new Pn(v,f)}return p&&d?t.apply(this,u):(v=this.thru(l),p?r?v.value()[0]:v.value():v)})})),ae(["pop","push","shift","sort","splice","unshift"],(function(t){var e=yt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Cn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Mu(i)?i:[],t)}return this[n]((function(n){return e.apply(Mu(n)?n:[],t)}))}})),sr(Fn.prototype,(function(t,e){var n=Cn[e];if(n){var r=n.name+"";Et.call(yn,r)||(yn[r]=[]),yn[r].push({name:e,func:n})}})),yn[Ci(void 0,2).name]=[{name:"wrapper",func:void 0}],Fn.prototype.clone=function(){var t=new Fn(this.__wrapped__);return t.__actions__=gi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=gi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=gi(this.__views__),t},Fn.prototype.reverse=function(){if(this.__filtered__){var t=new Fn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Fn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Mu(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],u=o.size;switch(o.type){case"drop":t+=u;break;case"dropRight":e-=u;break;case"take":e=an(e,t+u);break;case"takeRight":t=un(t,e-u)}}return{start:t,end:e}}(0,i,this.__views__),u=o.start,a=o.end,s=a-u,c=r?a:u-1,l=this.__iteratees__,f=l.length,h=0,p=an(s,this.__takeCount__);if(!n||!r&&i==s&&p==s)return ni(t,this.__actions__);var d=[];t:for(;s--&&h<p;){for(var v=-1,_=t[c+=e];++v<f;){var g=l[v],m=g.iteratee,y=g.type,b=m(_);if(2==y)_=b;else if(!b){if(1==y)continue t;break t}}d[h++]=_}return d},Cn.prototype.at=ru,Cn.prototype.chain=function(){return eu(this)},Cn.prototype.commit=function(){return new Pn(this.value(),this.__chain__)},Cn.prototype.next=function(){void 0===this.__values__&&(this.__values__=ea(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},Cn.prototype.plant=function(t){for(var e,n=this;n instanceof Tn;){var r=Co(n);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},Cn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Fn){var e=t;return this.__actions__.length&&(e=new Fn(this)),(e=e.reverse()).__actions__.push({func:nu,args:[Vo],thisArg:void 0}),new Pn(e,this.__chain__)}return this.thru(Vo)},Cn.prototype.toJSON=Cn.prototype.valueOf=Cn.prototype.value=function(){return ni(this.__wrapped__,this.__actions__)},Cn.prototype.first=Cn.prototype.head,Yt&&(Cn.prototype[Yt]=function(){return this}),Cn}();Gt._=Ke,void 0===(i=function(){return Ke}.call(e,n,e,r))||(r.exports=i)}).call(this)}).call(this,n(30),n(58)(t))},313:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(209),i=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))};let o;const u=n.n(r)()(1);function a(t,e){return i(this,void 0,void 0,(function*(){const r=yield(o||(o=n.e(13).then(n.t.bind(null,1016,7)).then(t=>t.default).then(t=>(0,eval)(t+";stbvorbis"))),o);return u(()=>function(t,e,n){return new Promise((r,o)=>{const u=[];let a,c=0;t.decode(n,(function(t){if(t.data&&(a=t.sampleRate,u.push(t.data),c+=t.data[0].length),t.error){const e=t.error instanceof Error?t.error:"stbvorbis.js Error: "+t.error;o(e)}t.eof&&r(function(t,e,n,r){return i(this,void 0,void 0,(function*(){if(!n)throw new Error("stbvorbis.js Error: No length");if(!r)throw new Error("stbvorbis.js Error: No sample rate");const i=e[0].length,o=t.createBuffer(i,n,r),u=Array(o.numberOfChannels).fill(null).map((t,e)=>new s(o.getChannelData(e)));for(const t of e)t.forEach((t,e)=>{u[e].write(t)});return o}))}(e,u,c,a))}))})}(r,t,e))}))}class s{constructor(t){this.data=t,this.offset=0}write(t){const{offset:e,data:n}=this;for(var r=0;r<t.length;r++)n[r+e]=t[r];this.offset+=t.length}}},321:function(t,e,n){"use strict";n.r(e),n.d(e,"enableTestMode",(function(){return o})),n.d(e,"setGameLifecycleHandler",(function(){return u})),n.d(e,"isTestModeEnabled",(function(){return a})),n.d(e,"pauseAt",(function(){return s})),n.d(e,"unpause",(function(){return c})),n.d(e,"getScore",(function(){return l}));let r=!1,i={pauseAt(t){throw new Error("Cannot pause: No lifecycle handler registered!")},unpause(){throw new Error("Cannot unpause: No lifecycle handler registered!")},getScore(){throw new Error("Cannot get score: No lifecycle handler registered!")}};function o(){if(!r){r=!0,console.log("[Bemuse test mode enabled]");const t=document.createElement("div");t.setAttribute("style","\n        position: fixed;\n        top: 20px;\n        left: 20px;\n        font: 20px Comic Sans MS, sans-serif;\n        z-index: 99999;\n        background: rgba(0,0,0,0.5);\n        color: #0f0;\n        border: 2px solid #0f0;\n        padding: 4px;\n        pointer-events: none;\n      "),t.innerHTML="\n      <strong>Test mode:</strong>\n      Bemuse is being controlled by automated test software.\n    ",document.body.appendChild(t)}}function u(t){console.log("[Bemuse test mode] A pause handler has been registered."),i=t}function a(){return!!r}function s(t){return i.pauseAt(t)}function c(){return i.unpause()}function l(){return i.getScore()}},322:function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},323:function(t,e){(function(e){t.exports=e}).call(this,{})},324:function(t,e,n){"use strict";var r={};t.exports=function(t){if("undefined"==typeof window)return null;var e=window.OfflineAudioContext||window.webkitOfflineAudioContext,n=window.AudioContext||window.webkitAudioContext;if(!n)return null;"number"==typeof t&&(t={sampleRate:t});var i=t&&t.sampleRate;if(t&&t.offline)return e?new e(t.channels||2,t.length,i||44100):null;var o=r[i];if(o)return o;try{o=new n(t)}catch(t){o=new n}return r[o.sampleRate]=r[i]=o,o}},325:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getReaderOptionsFromFilename=e.readAsync=e.read=void 0;var r=n(743);e.read=function(t){throw new Error("Synchronous read unsupported in browser!")},e.readAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],i=t[1],o=t[2];o?(i=t[1],o=t[2]):(i=null,o=t[1]);var u=i&&i.forceEncoding||r.detect(n),a=new FileReader;a.onload=function(){o(null,a.result)},a.onerror=function(){o(new Error("cannot read it"))},a.readAsText(new Blob([n]),u)};var i=n(326);Object.defineProperty(e,"getReaderOptionsFromFilename",{enumerable:!0,get:function(){return i.getReaderOptionsFromFilename}})},326:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getReaderOptionsFromFilename=void 0,e.getReaderOptionsFromFilename=function(t){var e;return t.match(/\.sjis\.\w+$/i)&&(e="Shift-JIS"),t.match(/\.euc_kr\.\w+$/i)&&(e="EUC-KR"),t.match(/\.utf8\.\w+$/i)&&(e="UTF-8"),{forceEncoding:e}}},327:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compile=void 0;var r=n(191),i=n(47),o={bms:{random:/^#RANDOM\s+(\d+)$/i,if:/^#IF\s+(\d+)$/i,endif:/^#ENDIF$/i,timeSignature:/^#(\d\d\d)02:(\S*)$/,channel:/^#(?:EXT\s+#)?(\d\d\d)(\S\S):(\S*)$/,header:/^#(\w+)(?:\s+(\S.*))?$/},dtx:{random:/^#RANDOM\s+(\d+)$/i,if:/^#IF\s+(\d+)$/i,endif:/^#ENDIF$/i,timeSignature:/^#(\d\d\d)02:\s*(\S*)$/,channel:/^#(?:EXT\s+#)?(\d\d\d)(\S\S):\s*(\S*)$/,header:/^#(\w+):(?:\s+(\S.*))?$/}};e.compile=function(t,e){e=e||{};var n=new i.BMSChart,u=e.rng||function(t){return 1+Math.floor(Math.random()*t)},a=e.format&&o[e.format]||o.bms,s=[],c=[!1],l={headerSentences:0,channelSentences:0,controlSentences:0,skippedSentences:0,malformedSentences:0,chart:n,warnings:[]};return function(t,e){t.split(/\r\n|\r|\n/).map((function(t){return t.trim()})).forEach((function(t,n){e(t,n+1)}))}(t,(function(t,e){var i=!0;if("#"===t.charAt(0)&&((0,r.match)(t).when(a.random,(function(t){l.controlSentences+=1,s.push(u(+t[1]))})).when(a.if,(function(t){l.controlSentences+=1,c.push(s[s.length-1]!==+t[1])})).when(a.endif,(function(t){l.controlSentences+=1,c.pop()})).else((function(){i=!1})),!i)){var o=c[c.length-1];(0,r.match)(t).when(a.timeSignature,(function(t){l.channelSentences+=1,o||n.timeSignatures.set(+t[1],+t[2])})).when(a.channel,(function(t){l.channelSentences+=1,o||function(t,e,r,i){var o=Math.floor(r.length/2);if(0===o)return;for(var u=0;u<o;u++){var a=r.substr(2*u,2),s=u/o;"00"!==a&&n.objects.add({measure:t,fraction:s,value:a,channel:e,lineNumber:i})}}(+t[1],t[2],t[3],e)})).when(a.header,(function(t){l.headerSentences+=1,o||n.headers.set(t[1],t[2])})).else((function(){!function(t,e){l.warnings.push({lineNumber:t,message:e})}(e,"Invalid command")}))}})),l}},328:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},329:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Segment=void 0;var i=r(n(314));e.Segment=(0,i.default)({t:"number",x:"number",dx:"number"})},330:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Notes=void 0;var a=n(331),s=u(n(67)),c=o(n(332)),l=n(47),f=function(){function t(t){t.forEach(a.Note),this._notes=t}return t.prototype.count=function(){return this._notes.length},t.prototype.all=function(){return this._notes.slice()},t.fromBMSChart=function(e,n){l.BMSChart;var r=(n=n||{}).mapping||t.CHANNEL_MAPPING.IIDX_P1;return new h(e,{mapping:r}).build()},t.CHANNEL_MAPPING=c,t}();e.Notes=f;var h=function(){function t(t,e){this._chart=t,(0,s.default)(e.mapping,"Expected options.mapping"),(0,s.default)("object"==typeof e.mapping,"options.mapping must be object"),this._mapping=e.mapping,this._notes=[],this._activeLN={},this._lastNote={},this._lnObj=(this._chart.headers.get("lnobj")||"").toLowerCase(),this._channelMapping=this._mapping,this._objects=this._chart.objects.allSorted()}return t.prototype.build=function(){var t=this;return this._objects.forEach((function(e){t._handle(e)})),new f(this._notes)},t.prototype._handle=function(t){if("01"===t.channel)this._handleNormalNote(t);else switch(t.channel.charAt(0)){case"1":case"2":this._handleNormalNote(t);break;case"5":case"6":this._handleLongNote(t)}},t.prototype._handleNormalNote=function(t){var e=this._normalizeChannel(t.channel),n=this._getBeat(t);if(t.value.toLowerCase()===this._lnObj)this._lastNote[e]&&(this._lastNote[e].endBeat=n);else{var r={beat:n,endBeat:void 0,keysound:t.value,column:this._getColumn(e)};this._lastNote[e]=r,this._notes.push(r)}},t.prototype._handleLongNote=function(t){var e=this._normalizeChannel(t.channel),n=this._getBeat(t);if(this._activeLN[e]){var r=this._activeLN[e];r.endBeat=n,this._notes.push(r),delete this._activeLN[e]}else this._activeLN[e]={beat:n,keysound:t.value,column:this._getColumn(e)}},t.prototype._getBeat=function(t){return this._chart.measureToBeat(t.measure,t.fraction)},t.prototype._getColumn=function(t){return this._channelMapping[t]},t.prototype._normalizeChannel=function(t){return t.replace(/^5/,"1").replace(/^6/,"2")},t}()},331:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Note=void 0;var i=r(n(314));e.Note=(0,i.default)({beat:"number",endBeat:i.default.maybe("number"),column:i.default.maybe("string"),keysound:"string"})},332:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IIDX_P1=void 0,e.IIDX_P1={11:"1",12:"2",13:"3",14:"4",15:"5",18:"6",19:"7",16:"SC"}},333:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Timing=void 0;var r=n(83),i=n(120),o=n(47),u={bpm:1,stop:2},a=function(){function t(t,e){var n={bpm:t,beat:0,seconds:0},o=[];o.push({t:0,x:0,dx:n.bpm/60,bpm:n.bpm,inclusive:!0}),(e=e.slice()).sort((function(t,e){return t.beat-e.beat||u[t.type]-u[e.type]})),e.forEach((function(t){var e=t.beat,r=n.seconds+60*(e-n.beat)/n.bpm;switch(t.type){case"bpm":n.bpm=t.bpm,o.push({t:r,x:e,dx:n.bpm/60,bpm:n.bpm,inclusive:!0});break;case"stop":o.push({t:r,x:e,dx:0,bpm:n.bpm,inclusive:!0}),r+=60*(t.stopBeats||0)/n.bpm,o.push({t:r,x:e,dx:n.bpm/60,bpm:n.bpm,inclusive:!1});break;default:throw new Error("Unrecognized segment object!")}n.beat=e,n.seconds=r})),this._speedcore=new r.Speedcore(o),this._eventBeats=(0,i.uniq)((0,i.map)(e,(function(t){return t.beat})))}return t.prototype.beatToSeconds=function(t){return this._speedcore.t(t)},t.prototype.secondsToBeat=function(t){return this._speedcore.x(t)},t.prototype.bpmAtBeat=function(t){return this._speedcore.segmentAtX(t).bpm},t.prototype.getEventBeats=function(){return this._eventBeats},t.fromBMSChart=function(e){o.BMSChart;var n=[];return e.objects.all().forEach((function(t){var r,i=e.measureToBeat(t.measure,t.fraction);if("03"===t.channel)r=parseInt(t.value,16),n.push({type:"bpm",beat:i,bpm:r});else if("08"===t.channel)r=+e.headers.get("bpm"+t.value),isNaN(r)||n.push({type:"bpm",beat:i,bpm:r});else if("09"===t.channel){var o=+e.headers.get("stop"+t.value)/48;n.push({type:"stop",beat:i,stopBeats:o})}})),new t(+e.headers.get("bpm")||60,n)},t}();e.Timing=a},334:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SongInfo=void 0;var r=n(191),i=n(120),o=n(47),u=function(){function t(t){this.title="NO TITLE",this.artist="NO ARTIST",this.genre="NO GENRE",this.subtitles=[],this.subartists=[],this.difficulty=0,this.level=0,t&&(0,i.assign)(this,t)}return t.fromBMSChart=function(e){o.BMSChart;var n={},i=e.headers.get("title"),u=e.headers.get("artist"),a=e.headers.get("genre"),s=+e.headers.get("difficulty")||0,c=+e.headers.get("playlevel")||0,l=e.headers.getAll("subtitle"),f=e.headers.getAll("subartist");if("string"==typeof i&&!l){var h=function(t){i=t[1],l=[t[2]]};(0,r.match)(i).when(/^(.*\S)\s*-(.+?)-$/,h).when(/^(.*\S)\s*～(.+?)～$/,h).when(/^(.*\S)\s*\((.+?)\)$/,h).when(/^(.*\S)\s*\[(.+?)\]$/,h).when(/^(.*\S)\s*<(.+?)>$/,h)}return i&&(n.title=i),u&&(n.artist=u),a&&(n.genre=a),l&&(n.subtitles=l),f&&(n.subartists=f),s&&(n.difficulty=s),c&&(n.level=c),new t(n)},t}();e.SongInfo=u},335:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Keysounds=void 0;var r=n(120),i=n(47),o=function(){function t(t){this._map=t}return t.prototype.get=function(t){return this._map[t.toLowerCase()]},t.prototype.files=function(){return(0,r.uniq)((0,r.values)(this._map))},t.prototype.all=function(){return this._map},t.fromBMSChart=function(e){i.BMSChart;var n={};return e.headers.each((function(t,e){var r=t.match(/^wav(\S\S)$/i);r&&(n[r[1].toLowerCase()]=e)})),new t(n)},t}();e.Keysounds=o},336:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Positioning=void 0;var r=n(83),i=n(47),o=function(){function t(t){this._speedcore=new r.Speedcore(t)}return t.prototype.speed=function(t){return this._speedcore.dx(t)},t.prototype.position=function(t){return this._speedcore.x(t)},t.fromBMSChart=function(e){i.BMSChart;var n=[],r=0;return n.push({t:0,x:r,dx:1,inclusive:!0}),e.objects.allSorted().forEach((function(t){if("SC"===t.channel){var i=e.measureToBeat(t.measure,t.fraction),o=+e.headers.get("scroll"+t.value);if(isNaN(o))return;var u=n[n.length-1];r+=(i-u.t)*u.dx,0===i&&1===n.length?n[0].dx=o:n.push({t:i,x:r,dx:o,inclusive:!0})}})),new t(n)},t}();e.Positioning=o},337:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Spacing=void 0;var r=n(83),i=n(47),o=function(){function t(t){t.length>0&&(this._speedcore=new r.Speedcore(t))}return t.prototype.factor=function(t){return this._speedcore?this._speedcore.x(t):1},t.fromBMSChart=function(e){i.BMSChart;var n=[];return e.objects.allSorted().forEach((function(t){if("SP"===t.channel){var r=e.measureToBeat(t.measure,t.fraction),i=+e.headers.get("speed"+t.value);if(isNaN(i))return;if(n.length>0){var o=n[n.length-1];o.dx=(i-o.x)/(r-o.t)}n.push({t:r,x:i,dx:0,inclusive:!0})}})),n.length>0&&n.unshift({t:0,x:n[0].x,dx:0,inclusive:!0}),new t(n)},t}();e.Spacing=o},338:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Notechart=void 0;var o=i(n(281)),u=i(n(67)),a=function(){function t(t,e){var n=this;void 0===e&&(e={});var r=t.notes,i=t.timing,o=t.keysounds,a=t.songInfo,s=t.positioning,c=t.spacing,l=t.barLines,f=t.images,h=t.expertJudgmentWindow;(0,u.default)(r,'Expected "data.notes"'),(0,u.default)(i,'Expected "data.timing"'),(0,u.default)(o,'Expected "data.keysounds"'),(0,u.default)(a,'Expected "data.songInfo"'),(0,u.default)(s,'Expected "data.positioning"'),(0,u.default)(c,'Expected "data.spacing"'),(0,u.default)(l,'Expected "data.barLines"'),this.expertJudgmentWindow=h,r=this._preTransform(r,e),this._timing=i,this._positioning=s,this._spacing=c,this._keysounds=o,this._duration=0,this._notes=this._generatePlayableNotesFromBMS(r),this._autos=this._generateAutoKeysoundEventsFromBMS(r),this._barLines=this._generateBarLineEvents(l),this._samples=this._generateKeysoundFiles(o),this._infos=new Map(this._notes.map((function(t){return[t,n._getNoteInfo(t)]}))),this._songInfo=a,this._images=f}return Object.defineProperty(t.prototype,"notes",{get:function(){return this._notes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autos",{get:function(){return this._autos},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"samples",{get:function(){return this._samples},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keysounds",{get:function(){return this._keysounds.all()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"barLines",{get:function(){return this._barLines},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return["SC","1","2","3","4","5","6","7"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"songInfo",{get:function(){return this._songInfo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"eyecatchImage",{get:function(){return this._images&&this._images.eyecatch||"eyecatch_image.png"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundImage",{get:function(){return this._images&&this._images.background||"back_image.png"},enumerable:!1,configurable:!0}),t.prototype.info=function(t){return this._infos.get(t)},t.prototype.beatToSeconds=function(t){return this._timing.beatToSeconds(t)},t.prototype.beatToPosition=function(t){return this._positioning.position(t)},t.prototype.secondsToBeat=function(t){return this._timing.secondsToBeat(t)},t.prototype.secondsToPosition=function(t){return this.beatToPosition(this.secondsToBeat(t))},t.prototype.bpmAtBeat=function(t){return this._timing.bpmAtBeat(t)},t.prototype.scrollSpeedAtBeat=function(t){return this._positioning.speed(t)},t.prototype.spacingAtBeat=function(t){return this._spacing.factor(t)},t.prototype.getKeyMode=function(t){var e,n,i={};try{for(var o=r(this.notes),u=o.next();!u.done;u=o.next()){i[u.value.column]=!0}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return("off"!==t||i[1]||i[7])&&("left"!==t||i[6]||i[7])&&("right"!==t||i[1]||i[2])?"7K":"5K"},t.prototype._preTransform=function(t,e){var n=o.default.chain(t),i=function(t){var e,n;try{for(var i=r(t),o=i.next();!o.done;o=i.next()){var u=o.value;if("6"===u.column||"7"===u.column)return"7K"}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return"5K"}(t);if("off"===e.scratch&&(n=n.map((function(t){return t.column&&"SC"===t.column?Object.assign({},t,{column:null}):t}))),"5K"===i){var a=["1","2","3","4","5","6","7"],s=function(t){return function(e){if(e.column){var n=a.indexOf(e.column);if(n>-1){var r=n+t;(0,u.default)(r<a.length,"Weird. Columns must not shift beyond available column");var i=a[r];return Object.assign({},e,{column:i})}}return e}};"off"===e.scratch?n=n.map(s(1)):"right"===e.scratch&&(n=n.map(s(2)))}return n.value()},t.prototype._generatePlayableNotesFromBMS=function(t){var e=this,n=1;return t.filter((function(t){return t.column})).map((function(t){var r=e._generateEvent(t.beat);return r.id=n++,r.column=t.column,r.keysound=t.keysound,r.keysoundStart=t.keysoundStart,r.keysoundEnd=t.keysoundEnd,e._updateDuration(r),void 0!==t.endBeat?(r.end=e._generateEvent(t.endBeat),e._updateDuration(r.end)):r.end=void 0,r}))},t.prototype._updateDuration=function(t){t.time>this._duration&&(this._duration=t.time)},t.prototype._generateAutoKeysoundEventsFromBMS=function(t){var e=this;return t.filter((function(t){return!t.column})).map((function(t){var n=e._generateEvent(t.beat);return n.keysound=t.keysound,n.keysoundStart=t.keysoundStart,n.keysoundEnd=t.keysoundEnd,n}))},t.prototype._generateKeysoundFiles=function(t){var e,n,i,o,u=new Set;try{for(var a=r([this.notes,this.autos]),s=a.next();!s.done;s=a.next()){var c=s.value;try{for(var l=(i=void 0,r(c)),f=l.next();!f.done;f=l.next()){var h=f.value,p=t.get(h.keysound);p&&u.add(p)}}catch(t){i={error:t}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return Array.from(u)},t.prototype._generateBarLineEvents=function(t){var e=this;return t.map((function(t){return e._generateEvent(t)}))},t.prototype._generateEvent=function(t){return{beat:t,time:this.beatToSeconds(t),position:this.beatToPosition(t)}},t.prototype._getNoteInfo=function(t){return{combos:t.end?2:1}},t}();e.Notechart=a,e.default=a},355:function(t,e,n){"use strict";function r(t){return{info:i(t,"info"),warn:i(t,"warn"),error:i(t,"error")}}function i(t,e){return(...r)=>{console.log(`[${(new Date).toJSON()}] [${t}] [${e}] ${n(138).format(...r)}`)}}n.r(e),n.d(e,"forModule",(function(){return r}))},364:function(t,e,n){"use strict";e.a=class{constructor(t,e,n){this.notechart=t,this.number=e,this.options={autosound:!!n.autosound,speed:+n.speed,placement:n.placement||"center",scratch:n.scratch||"left",input:n.input,laneCover:+(n.laneCover||0),gauge:n.gauge,tutorial:!!n.tutorial}}get columns(){return this.notechart.columns}}},365:function(t,e,n){"use strict";var r=n(77),i=n(34),o=n.n(i);const u=t=>Math.floor(5e5*t),a=(t,e)=>Math.floor(55555*t/e);e.a=class{constructor(t){this.totalCombo=o()(t.notes).map(e=>t.info(e).combos).sum(),this.totalNotes=t.notes.length,this.combo=0,this.maxCombo=0,this.rawSumJudgmentWeight=0,this.rawTotalComboScore=this._calculateRawTotalComboScore(this.totalCombo),this._remainingMaxPossibleRawComboScore=this.rawTotalComboScore,this.rawSumComboScore=0,this.counts={[r.b]:0,1:0,2:0,3:0,4:0},this.numJudgments=0,this.poor=!1,this._log=[],this.deltas=[]}get score(){return this.accuracyScore+this.comboScore}get accuracyScore(){return u(this.accuracy)}get comboScore(){return a(this.rawSumComboScore,this.rawTotalComboScore)}get maxPossibleScore(){return this.maxPossibleAccuracyScore+this.maxPossibleComboScore}get maxPossibleAccuracyScore(){const t=this.totalCombo-this.numJudgments,e=(this.rawSumJudgmentWeight+r.i(1)*t)/(r.i(1)*this.totalCombo);return u(e)}get maxPossibleComboScore(){const t=this.rawSumComboScore+this._remainingMaxPossibleRawComboScore;return a(t,this.rawTotalComboScore)}get accuracy(){return this.rawSumJudgmentWeight/(r.i(1)*this.totalCombo)}get currentAccuracy(){return this.rawSumJudgmentWeight/(r.i(1)*this.numJudgments||1)}get log(){return this._log.map(({character:t,count:e})=>`${e>1?e:""}${t}`).join("")}handleJudgment(t){if(this.counts[t]+=1,this.numJudgments+=1,r.c(t)){const t=this.totalCombo-this.numJudgments;this.combo=0,this.poor=!0,this._remainingMaxPossibleRawComboScore=this._calculateRawTotalComboScore(t)}else{this.combo+=1;const t=this._calculateRawComboScore(this.combo);this.rawSumComboScore+=t,this._remainingMaxPossibleRawComboScore-=t,this.poor=!1}this.rawSumJudgmentWeight+=r.i(t),this.combo>this.maxCombo&&(this.maxCombo=this.combo),this._recordLog(t)}handleDelta(t){this.deltas.push(t)}_calculateRawTotalComboScore(t){let e=0;for(let n=1;n<=t;n++)e+=this._calculateRawComboScore(n);return e}_calculateRawComboScore(t){return 0===t?0:t<23?1:t<51?2:t<92?3:t<161?4:5}_recordLog(t){let e=this._getLogCharacter(t);e&&(0===this._log.length||this._log[this._log.length-1].character!==e?this._log.push({character:e,count:1}):this._log[this._log.length-1].count+=1)}_getLogCharacter(t){switch(t){case 1:return"A";case 2:return"B";case 3:return"C";case 4:return"D";case r.b:return"M"}}}},366:function(t,e,n){"use strict";var r=n(34),i=n.n(r);function o(t,e,n){return 1-(n-t)/(e-t)}function u(t){return t.position}e.a=class{constructor(t,e){this._notes=i.a.sortBy(t,u),this._barLines=i()(e).map("position").sortBy().value()}getVisibleNotes(t,e,n){let r=[],i=this._notes;n||(n=0);for(let u=0;u<i.length;u++){let a=i[u];if(a.end?!(a.position>e||a.end.position<t-n):!(a.position>e||a.position<t-n)){let n={note:a};if(a.end){let r=o(t,e,a.position),i=o(t,e,a.end.position);n.y=Math.min(r,i),n.height=Math.abs(r-i)}else n.y=o(t,e,a.position);r.push(n)}}return r}getVisibleBarLines(t,e,n){return n||(n=0),this._barLines.filter(r=>t-n<=r&&r<=e).map(n=>({id:n,y:o(t,e,n)}))}}},367:function(t,e,n){"use strict";function r(t){return"hope"===t?function(){let t,e,n;return{update(r){const i=r.stats,o=i.numJudgments/i.totalCombo,u=(t,e,n)=>{const r=e+(n-e)*o,u=i.maxPossibleScore;return Math.max(0,(u-t)/(r-t))},a=.5*u(5e5,555555,51e4);if(t=Math.min(1,a),n=Math.max(0,Math.min(1,a-1)),a>0)e=0;else{const t=u(45e4,5e5,5e5);e=t}},shouldDisplay:()=>t>0||e>0,getPrimary:()=>t,getSecondary:()=>e,getExtra:()=>n}}():{update(){},shouldDisplay:()=>!1,getPrimary:()=>0,getSecondary:()=>0,getExtra:()=>0}}n.d(e,"a",(function(){return r}))},368:function(t,e,n){"use strict";e.a=function(t){let e=Math.floor(t%60);return Math.floor(t/60)+":"+(e<10?"0":"")+e}},369:function(t,e,n){(function(t,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var u="object"==typeof r&&r;u.global!==u&&u.window!==u&&u.self;var a,s=2147483647,c=/^xn--/,l=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,d=String.fromCharCode;function v(t){throw new RangeError(h[t])}function _(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function g(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+_((t=t.replace(f,".")).split("."),e).join(".")}function m(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function y(t){return _(t,(function(t){var e="";return t>65535&&(e+=d((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=d(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,n){var r=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;r+=36)t=p(t/35);return p(r+36*t/(t+38))}function x(t){var e,n,r,i,o,u,a,c,l,f,h,d=[],_=t.length,g=0,m=128,b=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&v("not-basic"),d.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<_;){for(o=g,u=1,a=36;i>=_&&v("invalid-input"),((c=(h=t.charCodeAt(i++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||c>p((s-g)/u))&&v("overflow"),g+=c*u,!(c<(l=a<=b?1:a>=b+26?26:a-b));a+=36)u>p(s/(f=36-l))&&v("overflow"),u*=f;b=w(g-o,e=d.length+1,0==o),p(g/e)>s-m&&v("overflow"),m+=p(g/e),g%=e,d.splice(g++,0,m)}return y(d)}function S(t){var e,n,r,i,o,u,a,c,l,f,h,_,g,y,x,S=[];for(_=(t=m(t)).length,e=128,n=0,o=72,u=0;u<_;++u)(h=t[u])<128&&S.push(d(h));for(r=i=S.length,i&&S.push("-");r<_;){for(a=s,u=0;u<_;++u)(h=t[u])>=e&&h<a&&(a=h);for(a-e>p((s-n)/(g=r+1))&&v("overflow"),n+=(a-e)*g,e=a,u=0;u<_;++u)if((h=t[u])<e&&++n>s&&v("overflow"),h==e){for(c=n,l=36;!(c<(f=l<=o?1:l>=o+26?26:l-o));l+=36)x=c-f,y=36-f,S.push(d(b(f+x%y,0))),c=p(x/y);S.push(d(b(c,0))),o=w(n,g,r==i),n=0,++r}++n,++e}return S.join("")}a={version:"1.4.1",ucs2:{decode:m,encode:y},decode:x,encode:S,toASCII:function(t){return g(t,(function(t){return l.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return g(t,(function(t){return c.test(t)?x(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return a}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(58)(t),n(30))},423:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"e",(function(){return d})),n.d(e,"b",(function(){return v})),n.d(e,"d",(function(){return g}));var r=n(656),i=n.n(r),o=n(34),u=n.n(o),a=n(82),s=n.n(a);function c(t){return s.a.fromBinder(e=>{for(let n of t.inputs.values())e(new s.a.Next(n));for(let n of t.outputs.values())e(new s.a.Next(n));t.onstatechange=t=>{e(new s.a.Next(t.port))}})}function l(t){return"input"!==t.type?s.a.never():s.a.fromEvent(t,"midimessage")}var f=function(){return s.a.fromPromise(navigator.requestMIDIAccess?navigator.requestMIDIAccess():Promise.reject(new Error("MIDI is not supported"))).flatMap(c).flatMapError(t=>(console.warn("MIDI Error:",t.stack),s.a.never())).flatMap(l).doLog("messageforport")};class h{constructor(){this.stop=1,this.charge=0,this.previous=!1,this.active=!1,this.positive=!1}update(t,e=3){if(!1===this.previous)return this.previous=t,0;if(this.previous!==t){let n=t-this.previous;n>1?n-=2.005:n<-1&&(n+=2.005);let r=n>0;this.active&&this.positive!==r?(this.positive=r,this.active=!1,this.charge=0):this.active||((0===this.charge||this.stop<=e)&&(this.charge+=Math.ceil(Math.abs(n)/.01)),this.charge>=2&&(this.active=!0,this.positive=r)),this.stop=0,this.previous=t}return this.stop>2*e&&(this.active=!1,this.charge=0,this.stop=0),this.stop+=1,this.active?this.positive?1:-1:0}}class p{constructor(t=window,e={}){const n=(e.getMidi川||f)();this._window=t,this._exclusive=!!e.exclusive,this._continuousAxis=!!e.continuous,this.setGamepadSensitivity(e.sensitivity||3),this._disposables=[m(t,"keydown",t=>this._handleKeyDown(t)),m(t,"keyup",t=>this._handleKeyUp(t)),n.onValue(t=>this._handleMIDIMessage(t))],this._status={},this._axis={}}_handleKeyDown(t){this._status[""+t.which]=!0,this._exclusive&&t.preventDefault()}_handleKeyUp(t){this._status[""+t.which]=!1}_handleMIDIMessage(t){if(!t||!t.data)return;const e=t.data,n=`midi.${t.target.id}.${15&t.data[0]}`,r=t=>{this._status[`${n}.note.${e[1]}`]=t};if(128==(240&e[0]))r(!1);else if(144==(240&e[0]))e[2]>0?r(!0):r(!1);else if(176==(240&e[0]))64===e[1]?this._status[n+".sustain"]=e[2]>=64:1===e[1]&&(this._status[n+".mod"]=e[2]>=16);else if(224==(240&e[0])){const t=e[1]|e[2]<<7;this._status[n+".pitch.up"]=t>=8448,this._status[n+".pitch.down"]=t<7936}}_updateGamepads(){const t=this._window.navigator,e=t.getGamepads?t.getGamepads():t.webkitGetGamepads?t.webkitGetGamepads():[];if(e)for(let t=0;t<e.length;t++){const n=e[t];n&&this._updateGamepad(n)}}_updateGamepad(t){const e="gamepad."+t.index;for(let n=0;n<t.buttons.length;n++){const r=t.buttons[n];this._status[`${e}.button.${n}`]=r&&r.value>=.5}for(let n=0;n<t.axes.length;n++){const r=`${e}.axis.${n}`;let i=t.axes[n];this._continuousAxis&&(null==this._axis[r]&&(this._axis[r]=new h),i=this._axis[r].update(i)),this._status[r+".positive"]=i>=this._deadzone,this._status[r+".negative"]=i<=-this._deadzone}}update(){return this._updateGamepads(),this._status}setGamepadSensitivity(t){this._sensitivity=t,this._deadzone=.05*(9-this._sensitivity),this._deadzone<.01&&(this._deadzone=.01),this._analogThreshold=18-2*this._sensitivity}setGamepadContinuousAxisEnabled(t){this._continuousAxis=t}dispose(){for(let t of this._disposables)t()}}function d(t=new p,e=window){return v(s.a.fromBinder(n=>{const r=e.setInterval(()=>{n(new s.a.Next(t.update()))},16);return()=>e.clearInterval(r)}))}function v(t){return t.map(t=>Object.keys(t).filter(e=>t[e])).diff([],(t,e)=>u.a.difference(e,t)).flatMap(t=>s.a.fromArray(t))}e.c=p;const _={};function g(t){if(+t)return u.a.capitalize(i()(+t));{const e=t.match(/^gamepad\.(\d+)\.axis\.(\d+)\.(\w+)/);if(e)return`Joy${e[1]} Axis${e[2]} (${"positive"===e[3]?"+":"-"})`}{const e=t.match(/^gamepad\.(\d+)\.button\.(\d+)/);if(e)return`Joy${e[1]} Btn${e[2]}`}{const e=t.match(/^midi\.(.+)\.(\d+)\.(.+)$/);if(e){const t=e[3].split("."),n=e[1],r=`MIDI${_[n]||(_[n]=Object.keys(_).length+1)} Ch${+e[2]+1}`;if("note"===t[0]){const e=+t[1];return`${r} ${["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][e%12]}${Math.floor(e/12)-1}`}if("pitch"===t[0])return`${r} Pitch${"up"===t[1]?"+":"-"}`;if("sustain"===t[0])return"Sustain";if("mod"===t[0])return"Mod"}}return String(t).replace(/\./g," ")+"?"}function m(t,e,n){return t.addEventListener(e,n),function(){t.removeEventListener(e,n)}}},424:function(t,e,n){"use strict";var r=class{constructor(){this.value=0,this.changed=!1}get justPressed(){return this.changed&&this.value}},i=n(34),o=n.n(i),u=n(213);e.a=class{constructor(){this._controls=new Map,this._plugins=[]}update(){let t=new Map;for(let[t,e]of this._controls)e.changed=!1;for(let e of this._plugins)for(let[n,r]of e.get())t.set(n,r);for(let[e,n]of t){let t=this.get(e);t.value!==n&&(t.changed=!0,t.value=n)}}destroy(){for(let t of this._plugins)t.destroy()}get(t){return this._controls.has(t)||this._controls.set(t,new r),this._controls.get(t)}use(t){let e={},n="input:"+t.name;this._plugins.push({get:u.a.wrap(n,(function(){let n=t.get(),r=[];for(let t of o.a.union(o.a.keys(n),o.a.keys(e))){let i=+e[t]||0,o=+n[t]||0;i!==o&&r.push([t,o]),e[t]=o}return r})),destroy:()=>"function"!=typeof t.destroy||t.destroy()})}}},428:function(t,e,n){var r=n(429);t.exports=function(t,e,n){var i=new WebSocket(t),o=[];function u(){try{i.send(""+(new Date).getTime())}catch(t){}}i.onmessage=function(t){var e,i,a,s,c;"k"==t.data&&u(),t.data.indexOf(",")>=0&&(e=t.data,i=e.split(","),a=+i[0],s=+i[1],c=(new Date).getTime(),a<=c&&o.push(r.convert([a,s,s,c])),o.length>=8&&n&&n(r.offset(o)),u())},i.onclose=function(){return o.length<1?e(new Error("no offset received")):e(null,r.offset(o))}}},429:function(t,e){e.convert=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return{offset:(n-e+(r-i))/2,delay:i-e-(r-n)}},e.offset=function(t){(t=t.slice()).sort((function(t,e){return t.offset-e.offset})),(t=t.slice(1,t.length-1)).sort((function(t,e){return t.delay-e.delay}));for(var e=0,n=0,r=Math.ceil(t.length/8),i=0;i<t.length&&(t[i].delay>t[0].delay&&r--,0!==r);i++)e+=t[i].offset,n+=1;return e/n}},47:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BMSChart=void 0;var r=n(192),i=n(193),o=n(194),u=function(){function t(){this.headers=new r.BMSHeaders,this.objects=new i.BMSObjects,this.timeSignatures=new o.TimeSignatures}return t.prototype.measureToBeat=function(t,e){return this.timeSignatures.measureToBeat(t,e)},t}();e.BMSChart=u},50:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var u=o>=0?arguments[o]:t.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(e=u+"/"+e,i="/"===u.charAt(0))}return(i?"/":"")+(e=n(r(e.split("/"),(function(t){return!!t})),!i).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),u="/"===i(t,-1);return(t=n(r(t.split("/"),(function(t){return!!t})),!o).join("/"))||o||(t="."),t&&u&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),u=Math.min(i.length,o.length),a=u,s=0;s<u;s++)if(i[s]!==o[s]){a=s;break}var c=[];for(s=a;s<i.length;s++)c.push("..");return(c=c.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,u=t.length-1;u>=0;--u){var a=t.charCodeAt(u);if(47!==a)-1===r&&(i=!1,r=u+1),46===a?-1===e?e=u:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=u+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var i="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(40))},59:function(t,e,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r)&&r.length){var u=i.apply(null,r);u&&t.push(u)}else if("object"===o)for(var a in r)n.call(r,a)&&r[a]&&t.push(a)}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},648:function(t,e,n){"use strict";var r=n(125),i=n(97),o=n(100),u=n(34),a=n.n(u),s=n(209),c=n.n(s),l=n(118),f=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))};class h{constructor(t,e,n){this.resources=t,this.ref=e,this.name=n}read(t){return i.a(t,this.resources.getBlob(this.ref).then(t=>Object(o.a)(t).as("arraybuffer")))}resolveUrl(){return f(this,void 0,void 0,(function*(){const t=yield this.resources.getBlob(this.ref);return URL.createObjectURL(t)}))}}class p{constructor(t,e){this.resources=t,this._basePromise=t.base.file(e.path)}load(){return this._promise||(this._promise=this.resources.loadPayload(this._basePromise))}}function d(t){return f(this,void 0,void 0,(function*(){if("BEMUSEPACK"!==(yield Object(o.a)(t.slice(0,10)).as("text")))throw new Error("Invalid magic number");const e=yield Object(o.a)(t.slice(10,14)).as("arraybuffer");let n=new Uint8Array(e);const r=n[0]+(n[1]<<8)+(n[2]<<16)+(n[3]<<24);return t.slice(14+r)}))}e.a=class{constructor(t,e={}){this.progress={all:new r.a,current:new r.a},this._getMetadata=a.a.once(()=>f(this,void 0,void 0,(function*(){const t=yield this._base.file(this._metadataFilename),e=yield t.read(),n=yield new Blob([e]).text();return JSON.parse(n)}))),this._getRefs=a.a.once(()=>f(this,void 0,void 0,(function*(){return(yield this._getMetadata()).refs.map(t=>new p(this,t))}))),this._getFileMap=a.a.once(()=>f(this,void 0,void 0,(function*(){const t=yield this._getMetadata();let e=new Map;for(let n of t.files)e.set(n.name.toLowerCase(),n);return e}))),"string"==typeof t&&(t=new l.a(new URL(t,location.href)));const n="string"==typeof e.fallback?new l.a(new URL(e.fallback,location.href)):e.fallback;this._base=t,this._fallback=n,this._fallbackPattern=e.fallbackPattern,this._metadataFilename=e.metadataFilename||"metadata.json";let o=i.d(this.progress.current);this.loadPayload=i.e(this.progress.all,c()(2,t=>t.then(t=>t.read((()=>{let t=new r.a;return o.add(t),t})())).then(t=>new Blob([t])).then(d)))}get base(){return this._base}file(t){return f(this,void 0,void 0,(function*(){let e=(yield this._getFileMap()).get(t.toLowerCase());if(e)return new h(this,e.ref,e.name);if(this._fallback&&this._fallbackPattern&&this._fallbackPattern.test(t))return this._fallback.file(t);throw new Error("Unable to find: "+t)}))}getBlob([t,e,n]){return f(this,void 0,void 0,(function*(){const r=(yield this._getRefs())[t];return(yield r.load()).slice(e,n)}))}}},650:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.fromBMSChart=void 0;var a=o(n(127)),s=u(n(281)),c=u(n(338));function l(t){var e=+t.headers.get("rank")||2;return 0===e?[8,24]:1===e?[15,30]:3===e?[21,60]:[18,40]}function f(t,e){var n=s.default.max(t.map((function(t){return t.endBeat||t.beat})))||0,r=[0],i=0,o=0;do{i+=e.timeSignatures.getBeats(o),o+=1,r.push(i)}while(i<=n);return r}e.fromBMSChart=function(t,e){var n=a.Notes.fromBMSChart(t).all(),r={notes:n,timing:a.Timing.fromBMSChart(t),keysounds:a.Keysounds.fromBMSChart(t),songInfo:a.SongInfo.fromBMSChart(t),positioning:a.Positioning.fromBMSChart(t),spacing:a.Spacing.fromBMSChart(t),barLines:f(n,t),expertJudgmentWindow:l(t)};return new c.default(r,e)}},651:function(t,e,n){(function(t,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o="Expected a function",u="__lodash_placeholder__",a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],s="[object Arguments]",c="[object Array]",l="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Function]",d="[object GeneratorFunction]",v="[object Map]",_="[object Number]",g="[object Object]",m="[object RegExp]",y="[object Set]",b="[object String]",w="[object Symbol]",x="[object WeakMap]",S="[object ArrayBuffer]",E="[object DataView]",k="[object Float32Array]",j="[object Float64Array]",A="[object Int8Array]",C="[object Int16Array]",O="[object Int32Array]",T="[object Uint8Array]",P="[object Uint16Array]",F="[object Uint32Array]",M=/\b__p \+= '';/g,I=/\b(__p \+=) '' \+/g,B=/(__e\(.*?\)|\b__t\)) \+\n'';/g,R=/&(?:amp|lt|gt|quot|#39);/g,L=/[&<>"']/g,D=RegExp(R.source),N=RegExp(L.source),U=/<%-([\s\S]+?)%>/g,z=/<%([\s\S]+?)%>/g,W=/<%=([\s\S]+?)%>/g,V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/,q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$=/[\\^$.*+?()[\]{}|]/g,G=RegExp($.source),K=/^\s+|\s+$/g,J=/^\s+/,Q=/\s+$/,X=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Y=/\{\n\/\* \[wrapped with (.+)\] \*/,Z=/,? & /,tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,et=/\\(\\)?/g,nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rt=/\w*$/,it=/^[-+]0x[0-9a-f]+$/i,ot=/^0b[01]+$/i,ut=/^\[object .+?Constructor\]$/,at=/^0o[0-7]+$/i,st=/^(?:0|[1-9]\d*)$/,ct=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lt=/($^)/,ft=/['\n\r\u2028\u2029\\]/g,ht="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",pt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dt="[\\ud800-\\udfff]",vt="["+pt+"]",_t="["+ht+"]",gt="\\d+",mt="[\\u2700-\\u27bf]",yt="[a-z\\xdf-\\xf6\\xf8-\\xff]",bt="[^\\ud800-\\udfff"+pt+gt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",wt="\\ud83c[\\udffb-\\udfff]",xt="[^\\ud800-\\udfff]",St="(?:\\ud83c[\\udde6-\\uddff]){2}",Et="[\\ud800-\\udbff][\\udc00-\\udfff]",kt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",jt="(?:"+yt+"|"+bt+")",At="(?:"+kt+"|"+bt+")",Ct="(?:"+_t+"|"+wt+")"+"?",Ot="[\\ufe0e\\ufe0f]?"+Ct+("(?:\\u200d(?:"+[xt,St,Et].join("|")+")[\\ufe0e\\ufe0f]?"+Ct+")*"),Tt="(?:"+[mt,St,Et].join("|")+")"+Ot,Pt="(?:"+[xt+_t+"?",_t,St,Et,dt].join("|")+")",Ft=RegExp("['’]","g"),Mt=RegExp(_t,"g"),It=RegExp(wt+"(?="+wt+")|"+Pt+Ot,"g"),Bt=RegExp([kt+"?"+yt+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[vt,kt,"$"].join("|")+")",At+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[vt,kt+jt,"$"].join("|")+")",kt+"?"+jt+"+(?:['’](?:d|ll|m|re|s|t|ve))?",kt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gt,Tt].join("|"),"g"),Rt=RegExp("[\\u200d\\ud800-\\udfff"+ht+"\\ufe0e\\ufe0f]"),Lt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Nt=-1,Ut={};Ut[k]=Ut[j]=Ut[A]=Ut[C]=Ut[O]=Ut[T]=Ut["[object Uint8ClampedArray]"]=Ut[P]=Ut[F]=!0,Ut[s]=Ut[c]=Ut[S]=Ut[l]=Ut[E]=Ut[f]=Ut[h]=Ut[p]=Ut[v]=Ut[_]=Ut[g]=Ut[m]=Ut[y]=Ut[b]=Ut[x]=!1;var zt={};zt[s]=zt[c]=zt[S]=zt[E]=zt[l]=zt[f]=zt[k]=zt[j]=zt[A]=zt[C]=zt[O]=zt[v]=zt[_]=zt[g]=zt[m]=zt[y]=zt[b]=zt[w]=zt[T]=zt["[object Uint8ClampedArray]"]=zt[P]=zt[F]=!0,zt[h]=zt[p]=zt[x]=!1;var Wt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vt=parseFloat,Ht=parseInt,qt="object"==typeof t&&t&&t.Object===Object&&t,$t="object"==typeof self&&self&&self.Object===Object&&self,Gt=qt||$t||Function("return this")(),Kt=e&&!e.nodeType&&e,Jt=Kt&&"object"==typeof r&&r&&!r.nodeType&&r,Qt=Jt&&Jt.exports===Kt,Xt=Qt&&qt.process,Yt=function(){try{var t=Jt&&Jt.require&&Jt.require("util").types;return t||Xt&&Xt.binding&&Xt.binding("util")}catch(t){}}(),Zt=Yt&&Yt.isArrayBuffer,te=Yt&&Yt.isDate,ee=Yt&&Yt.isMap,ne=Yt&&Yt.isRegExp,re=Yt&&Yt.isSet,ie=Yt&&Yt.isTypedArray;function oe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ue(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var u=t[i];e(r,u,n(u),t)}return r}function ae(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function se(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function ce(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function le(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var u=t[n];e(u,n,t)&&(o[i++]=u)}return o}function fe(t,e){return!!(null==t?0:t.length)&&we(t,e,0)>-1}function he(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function pe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function de(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function ve(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function _e(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ge(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var me=ke("length");function ye(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function be(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function we(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):be(t,Se,n)}function xe(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Se(t){return t!=t}function Ee(t,e){var n=null==t?0:t.length;return n?Ce(t,e)/n:NaN}function ke(t){return function(e){return null==e?void 0:e[t]}}function je(t){return function(e){return null==t?void 0:t[e]}}function Ae(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ce(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Oe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Te(t){return function(e){return t(e)}}function Pe(t,e){return pe(e,(function(e){return t[e]}))}function Fe(t,e){return t.has(e)}function Me(t,e){for(var n=-1,r=t.length;++n<r&&we(e,t[n],0)>-1;);return n}function Ie(t,e){for(var n=t.length;n--&&we(e,t[n],0)>-1;);return n}function Be(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Re=je({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Le=je({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function De(t){return"\\"+Wt[t]}function Ne(t){return Rt.test(t)}function Ue(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function ze(t,e){return function(n){return t(e(n))}}function We(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==u||(t[n]=u,o[i++]=n)}return o}function Ve(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function He(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function qe(t){return Ne(t)?function(t){var e=It.lastIndex=0;for(;It.test(t);)++e;return e}(t):me(t)}function $e(t){return Ne(t)?function(t){return t.match(It)||[]}(t):function(t){return t.split("")}(t)}var Ge=je({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Ke=function t(e){var n,r=(e=null==e?Gt:Ke.defaults(Gt.Object(),e,Ke.pick(Gt,Dt))).Array,i=e.Date,ht=e.Error,pt=e.Function,dt=e.Math,vt=e.Object,_t=e.RegExp,gt=e.String,mt=e.TypeError,yt=r.prototype,bt=pt.prototype,wt=vt.prototype,xt=e["__core-js_shared__"],St=bt.toString,Et=wt.hasOwnProperty,kt=0,jt=(n=/[^.]+$/.exec(xt&&xt.keys&&xt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",At=wt.toString,Ct=St.call(vt),Ot=Gt._,Tt=_t("^"+St.call(Et).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pt=Qt?e.Buffer:void 0,It=e.Symbol,Rt=e.Uint8Array,Wt=Pt?Pt.allocUnsafe:void 0,qt=ze(vt.getPrototypeOf,vt),$t=vt.create,Kt=wt.propertyIsEnumerable,Jt=yt.splice,Xt=It?It.isConcatSpreadable:void 0,Yt=It?It.iterator:void 0,me=It?It.toStringTag:void 0,je=function(){try{var t=Zi(vt,"defineProperty");return t({},"",{}),t}catch(t){}}(),Je=e.clearTimeout!==Gt.clearTimeout&&e.clearTimeout,Qe=i&&i.now!==Gt.Date.now&&i.now,Xe=e.setTimeout!==Gt.setTimeout&&e.setTimeout,Ye=dt.ceil,Ze=dt.floor,tn=vt.getOwnPropertySymbols,en=Pt?Pt.isBuffer:void 0,nn=e.isFinite,rn=yt.join,on=ze(vt.keys,vt),un=dt.max,an=dt.min,sn=i.now,cn=e.parseInt,ln=dt.random,fn=yt.reverse,hn=Zi(e,"DataView"),pn=Zi(e,"Map"),dn=Zi(e,"Promise"),vn=Zi(e,"Set"),_n=Zi(e,"WeakMap"),gn=Zi(vt,"create"),mn=_n&&new _n,yn={},bn=Ao(hn),wn=Ao(pn),xn=Ao(dn),Sn=Ao(vn),En=Ao(_n),kn=It?It.prototype:void 0,jn=kn?kn.valueOf:void 0,An=kn?kn.toString:void 0;function Cn(t){if(Hu(t)&&!Mu(t)&&!(t instanceof Fn)){if(t instanceof Pn)return t;if(Et.call(t,"__wrapped__"))return Co(t)}return new Pn(t)}var On=function(){function t(){}return function(e){if(!Vu(e))return{};if($t)return $t(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Tn(){}function Pn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Fn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Mn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function In(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Bn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Rn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Bn;++e<n;)this.add(t[e])}function Ln(t){var e=this.__data__=new In(t);this.size=e.size}function Dn(t,e){var n=Mu(t),r=!n&&Fu(t),i=!n&&!r&&Lu(t),o=!n&&!r&&!i&&Yu(t),u=n||r||i||o,a=u?Oe(t.length,gt):[],s=a.length;for(var c in t)!e&&!Et.call(t,c)||u&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||uo(c,s))||a.push(c);return a}function Nn(t){var e=t.length;return e?t[Rr(0,e-1)]:void 0}function Un(t,e){return Eo(gi(t),Jn(e,0,t.length))}function zn(t){return Eo(gi(t))}function Wn(t,e,n){(void 0!==n&&!Ou(t[e],n)||void 0===n&&!(e in t))&&Gn(t,e,n)}function Vn(t,e,n){var r=t[e];Et.call(t,e)&&Ou(r,n)&&(void 0!==n||e in t)||Gn(t,e,n)}function Hn(t,e){for(var n=t.length;n--;)if(Ou(t[n][0],e))return n;return-1}function qn(t,e,n,r){return tr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function $n(t,e){return t&&mi(e,ba(e),t)}function Gn(t,e,n){"__proto__"==e&&je?je(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Kn(t,e){for(var n=-1,i=e.length,o=r(i),u=null==t;++n<i;)o[n]=u?void 0:va(t,e[n]);return o}function Jn(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Qn(t,e,n,r,i,o){var u,a=1&e,c=2&e,h=4&e;if(n&&(u=i?n(t,r,i,o):n(t)),void 0!==u)return u;if(!Vu(t))return t;var x=Mu(t);if(x){if(u=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Et.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!a)return gi(t,u)}else{var M=no(t),I=M==p||M==d;if(Lu(t))return fi(t,a);if(M==g||M==s||I&&!i){if(u=c||I?{}:io(t),!a)return c?function(t,e){return mi(t,eo(t),e)}(t,function(t,e){return t&&mi(e,wa(e),t)}(u,t)):function(t,e){return mi(t,to(t),e)}(t,$n(u,t))}else{if(!zt[M])return i?t:{};u=function(t,e,n){var r=t.constructor;switch(e){case S:return hi(t);case l:case f:return new r(+t);case E:return function(t,e){var n=e?hi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case k:case j:case A:case C:case O:case T:case"[object Uint8ClampedArray]":case P:case F:return pi(t,n);case v:return new r;case _:case b:return new r(t);case m:return function(t){var e=new t.constructor(t.source,rt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case y:return new r;case w:return i=t,jn?vt(jn.call(i)):{}}var i}(t,M,a)}}o||(o=new Ln);var B=o.get(t);if(B)return B;o.set(t,u),Ju(t)?t.forEach((function(r){u.add(Qn(r,e,n,r,t,o))})):qu(t)&&t.forEach((function(r,i){u.set(i,Qn(r,e,n,i,t,o))}));var R=x?void 0:(h?c?$i:qi:c?wa:ba)(t);return ae(R||t,(function(r,i){R&&(r=t[i=r]),Vn(u,i,Qn(r,e,n,i,t,o))})),u}function Xn(t,e,n){var r=n.length;if(null==t)return!r;for(t=vt(t);r--;){var i=n[r],o=e[i],u=t[i];if(void 0===u&&!(i in t)||!o(u))return!1}return!0}function Yn(t,e,n){if("function"!=typeof t)throw new mt(o);return bo((function(){t.apply(void 0,n)}),e)}function Zn(t,e,n,r){var i=-1,o=fe,u=!0,a=t.length,s=[],c=e.length;if(!a)return s;n&&(e=pe(e,Te(n))),r?(o=he,u=!1):e.length>=200&&(o=Fe,u=!1,e=new Rn(e));t:for(;++i<a;){var l=t[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,u&&f==f){for(var h=c;h--;)if(e[h]===f)continue t;s.push(l)}else o(e,f,r)||s.push(l)}return s}Cn.templateSettings={escape:U,evaluate:z,interpolate:W,variable:"",imports:{_:Cn}},Cn.prototype=Tn.prototype,Cn.prototype.constructor=Cn,Pn.prototype=On(Tn.prototype),Pn.prototype.constructor=Pn,Fn.prototype=On(Tn.prototype),Fn.prototype.constructor=Fn,Mn.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},Mn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Mn.prototype.get=function(t){var e=this.__data__;if(gn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Et.call(e,t)?e[t]:void 0},Mn.prototype.has=function(t){var e=this.__data__;return gn?void 0!==e[t]:Et.call(e,t)},Mn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=gn&&void 0===e?"__lodash_hash_undefined__":e,this},In.prototype.clear=function(){this.__data__=[],this.size=0},In.prototype.delete=function(t){var e=this.__data__,n=Hn(e,t);return!(n<0)&&(n==e.length-1?e.pop():Jt.call(e,n,1),--this.size,!0)},In.prototype.get=function(t){var e=this.__data__,n=Hn(e,t);return n<0?void 0:e[n][1]},In.prototype.has=function(t){return Hn(this.__data__,t)>-1},In.prototype.set=function(t,e){var n=this.__data__,r=Hn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Bn.prototype.clear=function(){this.size=0,this.__data__={hash:new Mn,map:new(pn||In),string:new Mn}},Bn.prototype.delete=function(t){var e=Xi(this,t).delete(t);return this.size-=e?1:0,e},Bn.prototype.get=function(t){return Xi(this,t).get(t)},Bn.prototype.has=function(t){return Xi(this,t).has(t)},Bn.prototype.set=function(t,e){var n=Xi(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Rn.prototype.add=Rn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Rn.prototype.has=function(t){return this.__data__.has(t)},Ln.prototype.clear=function(){this.__data__=new In,this.size=0},Ln.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ln.prototype.get=function(t){return this.__data__.get(t)},Ln.prototype.has=function(t){return this.__data__.has(t)},Ln.prototype.set=function(t,e){var n=this.__data__;if(n instanceof In){var r=n.__data__;if(!pn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Bn(r)}return n.set(t,e),this.size=n.size,this};var tr=wi(sr),er=wi(cr,!0);function nr(t,e){var n=!0;return tr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function rr(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],u=e(o);if(null!=u&&(void 0===a?u==u&&!Xu(u):n(u,a)))var a=u,s=o}return s}function ir(t,e){var n=[];return tr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function or(t,e,n,r,i){var o=-1,u=t.length;for(n||(n=oo),i||(i=[]);++o<u;){var a=t[o];e>0&&n(a)?e>1?or(a,e-1,n,r,i):de(i,a):r||(i[i.length]=a)}return i}var ur=xi(),ar=xi(!0);function sr(t,e){return t&&ur(t,e,ba)}function cr(t,e){return t&&ar(t,e,ba)}function lr(t,e){return le(e,(function(e){return Uu(t[e])}))}function fr(t,e){for(var n=0,r=(e=ai(e,t)).length;null!=t&&n<r;)t=t[jo(e[n++])];return n&&n==r?t:void 0}function hr(t,e,n){var r=e(t);return Mu(t)?r:de(r,n(t))}function pr(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":me&&me in vt(t)?function(t){var e=Et.call(t,me),n=t[me];try{t[me]=void 0;var r=!0}catch(t){}var i=At.call(t);r&&(e?t[me]=n:delete t[me]);return i}(t):function(t){return At.call(t)}(t)}function dr(t,e){return t>e}function vr(t,e){return null!=t&&Et.call(t,e)}function _r(t,e){return null!=t&&e in vt(t)}function gr(t,e,n){for(var i=n?he:fe,o=t[0].length,u=t.length,a=u,s=r(u),c=1/0,l=[];a--;){var f=t[a];a&&e&&(f=pe(f,Te(e))),c=an(f.length,c),s[a]=!n&&(e||o>=120&&f.length>=120)?new Rn(a&&f):void 0}f=t[0];var h=-1,p=s[0];t:for(;++h<o&&l.length<c;){var d=f[h],v=e?e(d):d;if(d=n||0!==d?d:0,!(p?Fe(p,v):i(l,v,n))){for(a=u;--a;){var _=s[a];if(!(_?Fe(_,v):i(t[a],v,n)))continue t}p&&p.push(v),l.push(d)}}return l}function mr(t,e,n){var r=null==(t=_o(t,e=ai(e,t)))?t:t[jo(No(e))];return null==r?void 0:oe(r,t,n)}function yr(t){return Hu(t)&&pr(t)==s}function br(t,e,n,r,i){return t===e||(null==t||null==e||!Hu(t)&&!Hu(e)?t!=t&&e!=e:function(t,e,n,r,i,o){var u=Mu(t),a=Mu(e),p=u?c:no(t),d=a?c:no(e),x=(p=p==s?g:p)==g,k=(d=d==s?g:d)==g,j=p==d;if(j&&Lu(t)){if(!Lu(e))return!1;u=!0,x=!1}if(j&&!x)return o||(o=new Ln),u||Yu(t)?Vi(t,e,n,r,i,o):function(t,e,n,r,i,o,u){switch(n){case E:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case S:return!(t.byteLength!=e.byteLength||!o(new Rt(t),new Rt(e)));case l:case f:case _:return Ou(+t,+e);case h:return t.name==e.name&&t.message==e.message;case m:case b:return t==e+"";case v:var a=Ue;case y:var s=1&r;if(a||(a=Ve),t.size!=e.size&&!s)return!1;var c=u.get(t);if(c)return c==e;r|=2,u.set(t,e);var p=Vi(a(t),a(e),r,i,o,u);return u.delete(t),p;case w:if(jn)return jn.call(t)==jn.call(e)}return!1}(t,e,p,n,r,i,o);if(!(1&n)){var A=x&&Et.call(t,"__wrapped__"),C=k&&Et.call(e,"__wrapped__");if(A||C){var O=A?t.value():t,T=C?e.value():e;return o||(o=new Ln),i(O,T,n,r,o)}}if(!j)return!1;return o||(o=new Ln),function(t,e,n,r,i,o){var u=1&n,a=qi(t),s=a.length,c=qi(e).length;if(s!=c&&!u)return!1;var l=s;for(;l--;){var f=a[l];if(!(u?f in e:Et.call(e,f)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var p=!0;o.set(t,e),o.set(e,t);var d=u;for(;++l<s;){f=a[l];var v=t[f],_=e[f];if(r)var g=u?r(_,v,f,e,t,o):r(v,_,f,t,e,o);if(!(void 0===g?v===_||i(v,_,n,r,o):g)){p=!1;break}d||(d="constructor"==f)}if(p&&!d){var m=t.constructor,y=e.constructor;m==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,i,o)}(t,e,n,r,br,i))}function wr(t,e,n,r){var i=n.length,o=i,u=!r;if(null==t)return!o;for(t=vt(t);i--;){var a=n[i];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var s=(a=n[i])[0],c=t[s],l=a[1];if(u&&a[2]){if(void 0===c&&!(s in t))return!1}else{var f=new Ln;if(r)var h=r(c,l,s,t,e,f);if(!(void 0===h?br(l,c,3,r,f):h))return!1}}return!0}function xr(t){return!(!Vu(t)||(e=t,jt&&jt in e))&&(Uu(t)?Tt:ut).test(Ao(t));var e}function Sr(t){return"function"==typeof t?t:null==t?$a:"object"==typeof t?Mu(t)?Or(t[0],t[1]):Cr(t):es(t)}function Er(t){if(!fo(t))return on(t);var e=[];for(var n in vt(t))Et.call(t,n)&&"constructor"!=n&&e.push(n);return e}function kr(t){if(!Vu(t))return function(t){var e=[];if(null!=t)for(var n in vt(t))e.push(n);return e}(t);var e=fo(t),n=[];for(var r in t)("constructor"!=r||!e&&Et.call(t,r))&&n.push(r);return n}function jr(t,e){return t<e}function Ar(t,e){var n=-1,i=Bu(t)?r(t.length):[];return tr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Cr(t){var e=Yi(t);return 1==e.length&&e[0][2]?po(e[0][0],e[0][1]):function(n){return n===t||wr(n,t,e)}}function Or(t,e){return so(t)&&ho(e)?po(jo(t),e):function(n){var r=va(n,t);return void 0===r&&r===e?_a(n,t):br(e,r,3)}}function Tr(t,e,n,r,i){t!==e&&ur(e,(function(o,u){if(i||(i=new Ln),Vu(o))!function(t,e,n,r,i,o,u){var a=mo(t,n),s=mo(e,n),c=u.get(s);if(c)return void Wn(t,n,c);var l=o?o(a,s,n+"",t,e,u):void 0,f=void 0===l;if(f){var h=Mu(s),p=!h&&Lu(s),d=!h&&!p&&Yu(s);l=s,h||p||d?Mu(a)?l=a:Ru(a)?l=gi(a):p?(f=!1,l=fi(s,!0)):d?(f=!1,l=pi(s,!0)):l=[]:Gu(s)||Fu(s)?(l=a,Fu(a)?l=ua(a):Vu(a)&&!Uu(a)||(l=io(s))):f=!1}f&&(u.set(s,l),i(l,s,r,o,u),u.delete(s));Wn(t,n,l)}(t,e,u,n,Tr,r,i);else{var a=r?r(mo(t,u),o,u+"",t,e,i):void 0;void 0===a&&(a=o),Wn(t,u,a)}}),wa)}function Pr(t,e){var n=t.length;if(n)return uo(e+=e<0?n:0,n)?t[e]:void 0}function Fr(t,e,n){var r=-1;return e=pe(e.length?e:[$a],Te(Qi())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Ar(t,(function(t,n,i){return{criteria:pe(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,u=i.length,a=n.length;for(;++r<u;){var s=di(i[r],o[r]);if(s){if(r>=a)return s;var c=n[r];return s*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)}))}function Mr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var u=e[r],a=fr(t,u);n(a,u)&&zr(o,ai(u,t),a)}return o}function Ir(t,e,n,r){var i=r?xe:we,o=-1,u=e.length,a=t;for(t===e&&(e=gi(e)),n&&(a=pe(t,Te(n)));++o<u;)for(var s=0,c=e[o],l=n?n(c):c;(s=i(a,l,s,r))>-1;)a!==t&&Jt.call(a,s,1),Jt.call(t,s,1);return t}function Br(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;uo(i)?Jt.call(t,i,1):Zr(t,i)}}return t}function Rr(t,e){return t+Ze(ln()*(e-t+1))}function Lr(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=Ze(e/2))&&(t+=t)}while(e);return n}function Dr(t,e){return wo(vo(t,e,$a),t+"")}function Nr(t){return Nn(Oa(t))}function Ur(t,e){var n=Oa(t);return Eo(n,Jn(e,0,n.length))}function zr(t,e,n,r){if(!Vu(t))return t;for(var i=-1,o=(e=ai(e,t)).length,u=o-1,a=t;null!=a&&++i<o;){var s=jo(e[i]),c=n;if(i!=u){var l=a[s];void 0===(c=r?r(l,s,a):void 0)&&(c=Vu(l)?l:uo(e[i+1])?[]:{})}Vn(a,s,c),a=a[s]}return t}var Wr=mn?function(t,e){return mn.set(t,e),t}:$a,Vr=je?function(t,e){return je(t,"toString",{configurable:!0,enumerable:!1,value:Va(e),writable:!0})}:$a;function Hr(t){return Eo(Oa(t))}function qr(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var u=r(o);++i<o;)u[i]=t[i+e];return u}function $r(t,e){var n;return tr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function Gr(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,u=t[o];null!==u&&!Xu(u)&&(n?u<=e:u<e)?r=o+1:i=o}return i}return Kr(t,e,$a,n)}function Kr(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,u=e!=e,a=null===e,s=Xu(e),c=void 0===e;i<o;){var l=Ze((i+o)/2),f=n(t[l]),h=void 0!==f,p=null===f,d=f==f,v=Xu(f);if(u)var _=r||d;else _=c?d&&(r||h):a?d&&h&&(r||!p):s?d&&h&&!p&&(r||!v):!p&&!v&&(r?f<=e:f<e);_?i=l+1:o=l}return an(o,4294967294)}function Jr(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var u=t[n],a=e?e(u):u;if(!n||!Ou(a,s)){var s=a;o[i++]=0===u?0:u}}return o}function Qr(t){return"number"==typeof t?t:Xu(t)?NaN:+t}function Xr(t){if("string"==typeof t)return t;if(Mu(t))return pe(t,Xr)+"";if(Xu(t))return An?An.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Yr(t,e,n){var r=-1,i=fe,o=t.length,u=!0,a=[],s=a;if(n)u=!1,i=he;else if(o>=200){var c=e?null:Li(t);if(c)return Ve(c);u=!1,i=Fe,s=new Rn}else s=e?[]:a;t:for(;++r<o;){var l=t[r],f=e?e(l):l;if(l=n||0!==l?l:0,u&&f==f){for(var h=s.length;h--;)if(s[h]===f)continue t;e&&s.push(f),a.push(l)}else i(s,f,n)||(s!==a&&s.push(f),a.push(l))}return a}function Zr(t,e){return null==(t=_o(t,e=ai(e,t)))||delete t[jo(No(e))]}function ti(t,e,n,r){return zr(t,e,n(fr(t,e)),r)}function ei(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?qr(t,r?0:o,r?o+1:i):qr(t,r?o+1:0,r?i:o)}function ni(t,e){var n=t;return n instanceof Fn&&(n=n.value()),ve(e,(function(t,e){return e.func.apply(e.thisArg,de([t],e.args))}),n)}function ri(t,e,n){var i=t.length;if(i<2)return i?Yr(t[0]):[];for(var o=-1,u=r(i);++o<i;)for(var a=t[o],s=-1;++s<i;)s!=o&&(u[o]=Zn(u[o]||a,t[s],e,n));return Yr(or(u,1),e,n)}function ii(t,e,n){for(var r=-1,i=t.length,o=e.length,u={};++r<i;){var a=r<o?e[r]:void 0;n(u,t[r],a)}return u}function oi(t){return Ru(t)?t:[]}function ui(t){return"function"==typeof t?t:$a}function ai(t,e){return Mu(t)?t:so(t,e)?[t]:ko(aa(t))}var si=Dr;function ci(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:qr(t,e,n)}var li=Je||function(t){return Gt.clearTimeout(t)};function fi(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}function hi(t){var e=new t.constructor(t.byteLength);return new Rt(e).set(new Rt(t)),e}function pi(t,e){var n=e?hi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function di(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Xu(t),u=void 0!==e,a=null===e,s=e==e,c=Xu(e);if(!a&&!c&&!o&&t>e||o&&u&&s&&!a&&!c||r&&u&&s||!n&&s||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||a&&n&&i||!u&&i||!s)return-1}return 0}function vi(t,e,n,i){for(var o=-1,u=t.length,a=n.length,s=-1,c=e.length,l=un(u-a,0),f=r(c+l),h=!i;++s<c;)f[s]=e[s];for(;++o<a;)(h||o<u)&&(f[n[o]]=t[o]);for(;l--;)f[s++]=t[o++];return f}function _i(t,e,n,i){for(var o=-1,u=t.length,a=-1,s=n.length,c=-1,l=e.length,f=un(u-s,0),h=r(f+l),p=!i;++o<f;)h[o]=t[o];for(var d=o;++c<l;)h[d+c]=e[c];for(;++a<s;)(p||o<u)&&(h[d+n[a]]=t[o++]);return h}function gi(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function mi(t,e,n,r){var i=!n;n||(n={});for(var o=-1,u=e.length;++o<u;){var a=e[o],s=r?r(n[a],t[a],a,n,t):void 0;void 0===s&&(s=t[a]),i?Gn(n,a,s):Vn(n,a,s)}return n}function yi(t,e){return function(n,r){var i=Mu(n)?ue:qn,o=e?e():{};return i(n,t,Qi(r,2),o)}}function bi(t){return Dr((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,u=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,u&&ao(n[0],n[1],u)&&(o=i<3?void 0:o,i=1),e=vt(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e}))}function wi(t,e){return function(n,r){if(null==n)return n;if(!Bu(n))return t(n,r);for(var i=n.length,o=e?i:-1,u=vt(n);(e?o--:++o<i)&&!1!==r(u[o],o,u););return n}}function xi(t){return function(e,n,r){for(var i=-1,o=vt(e),u=r(e),a=u.length;a--;){var s=u[t?a:++i];if(!1===n(o[s],s,o))break}return e}}function Si(t){return function(e){var n=Ne(e=aa(e))?$e(e):void 0,r=n?n[0]:e.charAt(0),i=n?ci(n,1).join(""):e.slice(1);return r[t]()+i}}function Ei(t){return function(e){return ve(Ua(Fa(e).replace(Ft,"")),t,"")}}function ki(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=On(t.prototype),r=t.apply(n,e);return Vu(r)?r:n}}function ji(t){return function(e,n,r){var i=vt(e);if(!Bu(e)){var o=Qi(n,3);e=ba(e),n=function(t){return o(i[t],t,i)}}var u=t(e,n,r);return u>-1?i[o?e[u]:u]:void 0}}function Ai(t){return Hi((function(e){var n=e.length,r=n,i=Pn.prototype.thru;for(t&&e.reverse();r--;){var u=e[r];if("function"!=typeof u)throw new mt(o);if(i&&!a&&"wrapper"==Ki(u))var a=new Pn([],!0)}for(r=a?r:n;++r<n;){var s=Ki(u=e[r]),c="wrapper"==s?Gi(u):void 0;a=c&&co(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?a[Ki(c[0])].apply(a,c[3]):1==u.length&&co(u)?a[s]():a.thru(u)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&Mu(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Ci(t,e,n,i,o,u,a,s,c,l){var f=128&e,h=1&e,p=2&e,d=24&e,v=512&e,_=p?void 0:ki(t);return function g(){for(var m=arguments.length,y=r(m),b=m;b--;)y[b]=arguments[b];if(d)var w=Ji(g),x=Be(y,w);if(i&&(y=vi(y,i,o,d)),u&&(y=_i(y,u,a,d)),m-=x,d&&m<l){var S=We(y,w);return Bi(t,e,Ci,g.placeholder,n,y,S,s,c,l-m)}var E=h?n:this,k=p?E[t]:t;return m=y.length,s?y=go(y,s):v&&m>1&&y.reverse(),f&&c<m&&(y.length=c),this&&this!==Gt&&this instanceof g&&(k=_||ki(k)),k.apply(E,y)}}function Oi(t,e){return function(n,r){return function(t,e,n,r){return sr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Ti(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Xr(n),r=Xr(r)):(n=Qr(n),r=Qr(r)),i=t(n,r)}return i}}function Pi(t){return Hi((function(e){return e=pe(e,Te(Qi())),Dr((function(n){var r=this;return t(e,(function(t){return oe(t,r,n)}))}))}))}function Fi(t,e){var n=(e=void 0===e?" ":Xr(e)).length;if(n<2)return n?Lr(e,t):e;var r=Lr(e,Ye(t/qe(e)));return Ne(e)?ci($e(r),0,t).join(""):r.slice(0,t)}function Mi(t){return function(e,n,i){return i&&"number"!=typeof i&&ao(e,n,i)&&(n=i=void 0),e=na(e),void 0===n?(n=e,e=0):n=na(n),function(t,e,n,i){for(var o=-1,u=un(Ye((e-t)/(n||1)),0),a=r(u);u--;)a[i?u:++o]=t,t+=n;return a}(e,n,i=void 0===i?e<n?1:-1:na(i),t)}}function Ii(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=oa(e),n=oa(n)),t(e,n)}}function Bi(t,e,n,r,i,o,u,a,s,c){var l=8&e;e|=l?32:64,4&(e&=~(l?64:32))||(e&=-4);var f=[t,e,i,l?o:void 0,l?u:void 0,l?void 0:o,l?void 0:u,a,s,c],h=n.apply(void 0,f);return co(t)&&yo(h,f),h.placeholder=r,xo(h,t,e)}function Ri(t){var e=dt[t];return function(t,n){if(t=oa(t),(n=null==n?0:an(ra(n),292))&&nn(t)){var r=(aa(t)+"e").split("e");return+((r=(aa(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Li=vn&&1/Ve(new vn([,-0]))[1]==1/0?function(t){return new vn(t)}:Xa;function Di(t){return function(e){var n=no(e);return n==v?Ue(e):n==y?He(e):function(t,e){return pe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ni(t,e,n,i,a,s,c,l){var f=2&e;if(!f&&"function"!=typeof t)throw new mt(o);var h=i?i.length:0;if(h||(e&=-97,i=a=void 0),c=void 0===c?c:un(ra(c),0),l=void 0===l?l:ra(l),h-=a?a.length:0,64&e){var p=i,d=a;i=a=void 0}var v=f?void 0:Gi(t),_=[t,e,n,i,a,p,d,s,c,l];if(v&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var s=e[3];if(s){var c=t[3];t[3]=c?vi(c,s,e[4]):s,t[4]=c?We(t[3],u):e[4]}(s=e[5])&&(c=t[5],t[5]=c?_i(c,s,e[6]):s,t[6]=c?We(t[5],u):e[6]);(s=e[7])&&(t[7]=s);128&r&&(t[8]=null==t[8]?e[8]:an(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(_,v),t=_[0],e=_[1],n=_[2],i=_[3],a=_[4],!(l=_[9]=void 0===_[9]?f?0:t.length:un(_[9]-h,0))&&24&e&&(e&=-25),e&&1!=e)g=8==e||16==e?function(t,e,n){var i=ki(t);return function o(){for(var u=arguments.length,a=r(u),s=u,c=Ji(o);s--;)a[s]=arguments[s];var l=u<3&&a[0]!==c&&a[u-1]!==c?[]:We(a,c);if((u-=l.length)<n)return Bi(t,e,Ci,o.placeholder,void 0,a,l,void 0,void 0,n-u);var f=this&&this!==Gt&&this instanceof o?i:t;return oe(f,this,a)}}(t,e,l):32!=e&&33!=e||a.length?Ci.apply(void 0,_):function(t,e,n,i){var o=1&e,u=ki(t);return function e(){for(var a=-1,s=arguments.length,c=-1,l=i.length,f=r(l+s),h=this&&this!==Gt&&this instanceof e?u:t;++c<l;)f[c]=i[c];for(;s--;)f[c++]=arguments[++a];return oe(h,o?n:this,f)}}(t,e,n,i);else var g=function(t,e,n){var r=1&e,i=ki(t);return function e(){var o=this&&this!==Gt&&this instanceof e?i:t;return o.apply(r?n:this,arguments)}}(t,e,n);return xo((v?Wr:yo)(g,_),t,e)}function Ui(t,e,n,r){return void 0===t||Ou(t,wt[n])&&!Et.call(r,n)?e:t}function zi(t,e,n,r,i,o){return Vu(t)&&Vu(e)&&(o.set(e,t),Tr(t,e,void 0,zi,o),o.delete(e)),t}function Wi(t){return Gu(t)?void 0:t}function Vi(t,e,n,r,i,o){var u=1&n,a=t.length,s=e.length;if(a!=s&&!(u&&s>a))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,f=!0,h=2&n?new Rn:void 0;for(o.set(t,e),o.set(e,t);++l<a;){var p=t[l],d=e[l];if(r)var v=u?r(d,p,l,e,t,o):r(p,d,l,t,e,o);if(void 0!==v){if(v)continue;f=!1;break}if(h){if(!ge(e,(function(t,e){if(!Fe(h,e)&&(p===t||i(p,t,n,r,o)))return h.push(e)}))){f=!1;break}}else if(p!==d&&!i(p,d,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function Hi(t){return wo(vo(t,void 0,Io),t+"")}function qi(t){return hr(t,ba,to)}function $i(t){return hr(t,wa,eo)}var Gi=mn?function(t){return mn.get(t)}:Xa;function Ki(t){for(var e=t.name+"",n=yn[e],r=Et.call(yn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Ji(t){return(Et.call(Cn,"placeholder")?Cn:t).placeholder}function Qi(){var t=Cn.iteratee||Ga;return t=t===Ga?Sr:t,arguments.length?t(arguments[0],arguments[1]):t}function Xi(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Yi(t){for(var e=ba(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ho(i)]}return e}function Zi(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return xr(n)?n:void 0}var to=tn?function(t){return null==t?[]:(t=vt(t),le(tn(t),(function(e){return Kt.call(t,e)})))}:is,eo=tn?function(t){for(var e=[];t;)de(e,to(t)),t=qt(t);return e}:is,no=pr;function ro(t,e,n){for(var r=-1,i=(e=ai(e,t)).length,o=!1;++r<i;){var u=jo(e[r]);if(!(o=null!=t&&n(t,u)))break;t=t[u]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Wu(i)&&uo(u,i)&&(Mu(t)||Fu(t))}function io(t){return"function"!=typeof t.constructor||fo(t)?{}:On(qt(t))}function oo(t){return Mu(t)||Fu(t)||!!(Xt&&t&&t[Xt])}function uo(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&st.test(t))&&t>-1&&t%1==0&&t<e}function ao(t,e,n){if(!Vu(n))return!1;var r=typeof e;return!!("number"==r?Bu(n)&&uo(e,n.length):"string"==r&&e in n)&&Ou(n[e],t)}function so(t,e){if(Mu(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Xu(t))||(H.test(t)||!V.test(t)||null!=e&&t in vt(e))}function co(t){var e=Ki(t),n=Cn[e];if("function"!=typeof n||!(e in Fn.prototype))return!1;if(t===n)return!0;var r=Gi(n);return!!r&&t===r[0]}(hn&&no(new hn(new ArrayBuffer(1)))!=E||pn&&no(new pn)!=v||dn&&"[object Promise]"!=no(dn.resolve())||vn&&no(new vn)!=y||_n&&no(new _n)!=x)&&(no=function(t){var e=pr(t),n=e==g?t.constructor:void 0,r=n?Ao(n):"";if(r)switch(r){case bn:return E;case wn:return v;case xn:return"[object Promise]";case Sn:return y;case En:return x}return e});var lo=xt?Uu:os;function fo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||wt)}function ho(t){return t==t&&!Vu(t)}function po(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in vt(n)))}}function vo(t,e,n){return e=un(void 0===e?t.length-1:e,0),function(){for(var i=arguments,o=-1,u=un(i.length-e,0),a=r(u);++o<u;)a[o]=i[e+o];o=-1;for(var s=r(e+1);++o<e;)s[o]=i[o];return s[e]=n(a),oe(t,this,s)}}function _o(t,e){return e.length<2?t:fr(t,qr(e,0,-1))}function go(t,e){for(var n=t.length,r=an(e.length,n),i=gi(t);r--;){var o=e[r];t[r]=uo(o,n)?i[o]:void 0}return t}function mo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var yo=So(Wr),bo=Xe||function(t,e){return Gt.setTimeout(t,e)},wo=So(Vr);function xo(t,e,n){var r=e+"";return wo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(X,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return ae(a,(function(n){var r="_."+n[0];e&n[1]&&!fe(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(Y);return e?e[1].split(Z):[]}(r),n)))}function So(t){var e=0,n=0;return function(){var r=sn(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Eo(t,e){var n=-1,r=t.length,i=r-1;for(e=void 0===e?r:e;++n<e;){var o=Rr(n,i),u=t[o];t[o]=t[n],t[n]=u}return t.length=e,t}var ko=function(t){var e=Su(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(q,(function(t,n,r,i){e.push(r?i.replace(et,"$1"):n||t)})),e}));function jo(t){if("string"==typeof t||Xu(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ao(t){if(null!=t){try{return St.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Co(t){if(t instanceof Fn)return t.clone();var e=new Pn(t.__wrapped__,t.__chain__);return e.__actions__=gi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Oo=Dr((function(t,e){return Ru(t)?Zn(t,or(e,1,Ru,!0)):[]})),To=Dr((function(t,e){var n=No(e);return Ru(n)&&(n=void 0),Ru(t)?Zn(t,or(e,1,Ru,!0),Qi(n,2)):[]})),Po=Dr((function(t,e){var n=No(e);return Ru(n)&&(n=void 0),Ru(t)?Zn(t,or(e,1,Ru,!0),void 0,n):[]}));function Fo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ra(n);return i<0&&(i=un(r+i,0)),be(t,Qi(e,3),i)}function Mo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=ra(n),i=n<0?un(r+i,0):an(i,r-1)),be(t,Qi(e,3),i,!0)}function Io(t){return(null==t?0:t.length)?or(t,1):[]}function Bo(t){return t&&t.length?t[0]:void 0}var Ro=Dr((function(t){var e=pe(t,oi);return e.length&&e[0]===t[0]?gr(e):[]})),Lo=Dr((function(t){var e=No(t),n=pe(t,oi);return e===No(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?gr(n,Qi(e,2)):[]})),Do=Dr((function(t){var e=No(t),n=pe(t,oi);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?gr(n,void 0,e):[]}));function No(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Uo=Dr(zo);function zo(t,e){return t&&t.length&&e&&e.length?Ir(t,e):t}var Wo=Hi((function(t,e){var n=null==t?0:t.length,r=Kn(t,e);return Br(t,pe(e,(function(t){return uo(t,n)?+t:t})).sort(di)),r}));function Vo(t){return null==t?t:fn.call(t)}var Ho=Dr((function(t){return Yr(or(t,1,Ru,!0))})),qo=Dr((function(t){var e=No(t);return Ru(e)&&(e=void 0),Yr(or(t,1,Ru,!0),Qi(e,2))})),$o=Dr((function(t){var e=No(t);return e="function"==typeof e?e:void 0,Yr(or(t,1,Ru,!0),void 0,e)}));function Go(t){if(!t||!t.length)return[];var e=0;return t=le(t,(function(t){if(Ru(t))return e=un(t.length,e),!0})),Oe(e,(function(e){return pe(t,ke(e))}))}function Ko(t,e){if(!t||!t.length)return[];var n=Go(t);return null==e?n:pe(n,(function(t){return oe(e,void 0,t)}))}var Jo=Dr((function(t,e){return Ru(t)?Zn(t,e):[]})),Qo=Dr((function(t){return ri(le(t,Ru))})),Xo=Dr((function(t){var e=No(t);return Ru(e)&&(e=void 0),ri(le(t,Ru),Qi(e,2))})),Yo=Dr((function(t){var e=No(t);return e="function"==typeof e?e:void 0,ri(le(t,Ru),void 0,e)})),Zo=Dr(Go);var tu=Dr((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Ko(t,n)}));function eu(t){var e=Cn(t);return e.__chain__=!0,e}function nu(t,e){return e(t)}var ru=Hi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Kn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Fn&&uo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:nu,args:[i],thisArg:void 0}),new Pn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(i)}));var iu=yi((function(t,e,n){Et.call(t,n)?++t[n]:Gn(t,n,1)}));var ou=ji(Fo),uu=ji(Mo);function au(t,e){return(Mu(t)?ae:tr)(t,Qi(e,3))}function su(t,e){return(Mu(t)?se:er)(t,Qi(e,3))}var cu=yi((function(t,e,n){Et.call(t,n)?t[n].push(e):Gn(t,n,[e])}));var lu=Dr((function(t,e,n){var i=-1,o="function"==typeof e,u=Bu(t)?r(t.length):[];return tr(t,(function(t){u[++i]=o?oe(e,t,n):mr(t,e,n)})),u})),fu=yi((function(t,e,n){Gn(t,n,e)}));function hu(t,e){return(Mu(t)?pe:Ar)(t,Qi(e,3))}var pu=yi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var du=Dr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ao(t,e[0],e[1])?e=[]:n>2&&ao(e[0],e[1],e[2])&&(e=[e[0]]),Fr(t,or(e,1),[])})),vu=Qe||function(){return Gt.Date.now()};function _u(t,e,n){return e=n?void 0:e,Ni(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function gu(t,e){var n;if("function"!=typeof e)throw new mt(o);return t=ra(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var mu=Dr((function(t,e,n){var r=1;if(n.length){var i=We(n,Ji(mu));r|=32}return Ni(t,r,e,n,i)})),yu=Dr((function(t,e,n){var r=3;if(n.length){var i=We(n,Ji(yu));r|=32}return Ni(e,r,t,n,i)}));function bu(t,e,n){var r,i,u,a,s,c,l=0,f=!1,h=!1,p=!0;if("function"!=typeof t)throw new mt(o);function d(e){var n=r,o=i;return r=i=void 0,l=e,a=t.apply(o,n)}function v(t){return l=t,s=bo(g,e),f?d(t):a}function _(t){var n=t-c;return void 0===c||n>=e||n<0||h&&t-l>=u}function g(){var t=vu();if(_(t))return m(t);s=bo(g,function(t){var n=e-(t-c);return h?an(n,u-(t-l)):n}(t))}function m(t){return s=void 0,p&&r?d(t):(r=i=void 0,a)}function y(){var t=vu(),n=_(t);if(r=arguments,i=this,c=t,n){if(void 0===s)return v(c);if(h)return li(s),s=bo(g,e),d(c)}return void 0===s&&(s=bo(g,e)),a}return e=oa(e)||0,Vu(n)&&(f=!!n.leading,u=(h="maxWait"in n)?un(oa(n.maxWait)||0,e):u,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==s&&li(s),l=0,r=c=i=s=void 0},y.flush=function(){return void 0===s?a:m(vu())},y}var wu=Dr((function(t,e){return Yn(t,1,e)})),xu=Dr((function(t,e,n){return Yn(t,oa(e)||0,n)}));function Su(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new mt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var u=t.apply(this,r);return n.cache=o.set(i,u)||o,u};return n.cache=new(Su.Cache||Bn),n}function Eu(t){if("function"!=typeof t)throw new mt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Su.Cache=Bn;var ku=si((function(t,e){var n=(e=1==e.length&&Mu(e[0])?pe(e[0],Te(Qi())):pe(or(e,1),Te(Qi()))).length;return Dr((function(r){for(var i=-1,o=an(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return oe(t,this,r)}))})),ju=Dr((function(t,e){return Ni(t,32,void 0,e,We(e,Ji(ju)))})),Au=Dr((function(t,e){return Ni(t,64,void 0,e,We(e,Ji(Au)))})),Cu=Hi((function(t,e){return Ni(t,256,void 0,void 0,void 0,e)}));function Ou(t,e){return t===e||t!=t&&e!=e}var Tu=Ii(dr),Pu=Ii((function(t,e){return t>=e})),Fu=yr(function(){return arguments}())?yr:function(t){return Hu(t)&&Et.call(t,"callee")&&!Kt.call(t,"callee")},Mu=r.isArray,Iu=Zt?Te(Zt):function(t){return Hu(t)&&pr(t)==S};function Bu(t){return null!=t&&Wu(t.length)&&!Uu(t)}function Ru(t){return Hu(t)&&Bu(t)}var Lu=en||os,Du=te?Te(te):function(t){return Hu(t)&&pr(t)==f};function Nu(t){if(!Hu(t))return!1;var e=pr(t);return e==h||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Gu(t)}function Uu(t){if(!Vu(t))return!1;var e=pr(t);return e==p||e==d||"[object AsyncFunction]"==e||"[object Proxy]"==e}function zu(t){return"number"==typeof t&&t==ra(t)}function Wu(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Vu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Hu(t){return null!=t&&"object"==typeof t}var qu=ee?Te(ee):function(t){return Hu(t)&&no(t)==v};function $u(t){return"number"==typeof t||Hu(t)&&pr(t)==_}function Gu(t){if(!Hu(t)||pr(t)!=g)return!1;var e=qt(t);if(null===e)return!0;var n=Et.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&St.call(n)==Ct}var Ku=ne?Te(ne):function(t){return Hu(t)&&pr(t)==m};var Ju=re?Te(re):function(t){return Hu(t)&&no(t)==y};function Qu(t){return"string"==typeof t||!Mu(t)&&Hu(t)&&pr(t)==b}function Xu(t){return"symbol"==typeof t||Hu(t)&&pr(t)==w}var Yu=ie?Te(ie):function(t){return Hu(t)&&Wu(t.length)&&!!Ut[pr(t)]};var Zu=Ii(jr),ta=Ii((function(t,e){return t<=e}));function ea(t){if(!t)return[];if(Bu(t))return Qu(t)?$e(t):gi(t);if(Yt&&t[Yt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Yt]());var e=no(t);return(e==v?Ue:e==y?Ve:Oa)(t)}function na(t){return t?(t=oa(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ra(t){var e=na(t),n=e%1;return e==e?n?e-n:e:0}function ia(t){return t?Jn(ra(t),0,4294967295):0}function oa(t){if("number"==typeof t)return t;if(Xu(t))return NaN;if(Vu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Vu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(K,"");var n=ot.test(t);return n||at.test(t)?Ht(t.slice(2),n?2:8):it.test(t)?NaN:+t}function ua(t){return mi(t,wa(t))}function aa(t){return null==t?"":Xr(t)}var sa=bi((function(t,e){if(fo(e)||Bu(e))mi(e,ba(e),t);else for(var n in e)Et.call(e,n)&&Vn(t,n,e[n])})),ca=bi((function(t,e){mi(e,wa(e),t)})),la=bi((function(t,e,n,r){mi(e,wa(e),t,r)})),fa=bi((function(t,e,n,r){mi(e,ba(e),t,r)})),ha=Hi(Kn);var pa=Dr((function(t,e){t=vt(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&ao(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],u=wa(o),a=-1,s=u.length;++a<s;){var c=u[a],l=t[c];(void 0===l||Ou(l,wt[c])&&!Et.call(t,c))&&(t[c]=o[c])}return t})),da=Dr((function(t){return t.push(void 0,zi),oe(Sa,void 0,t)}));function va(t,e,n){var r=null==t?void 0:fr(t,e);return void 0===r?n:r}function _a(t,e){return null!=t&&ro(t,e,_r)}var ga=Oi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=At.call(e)),t[e]=n}),Va($a)),ma=Oi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=At.call(e)),Et.call(t,e)?t[e].push(n):t[e]=[n]}),Qi),ya=Dr(mr);function ba(t){return Bu(t)?Dn(t):Er(t)}function wa(t){return Bu(t)?Dn(t,!0):kr(t)}var xa=bi((function(t,e,n){Tr(t,e,n)})),Sa=bi((function(t,e,n,r){Tr(t,e,n,r)})),Ea=Hi((function(t,e){var n={};if(null==t)return n;var r=!1;e=pe(e,(function(e){return e=ai(e,t),r||(r=e.length>1),e})),mi(t,$i(t),n),r&&(n=Qn(n,7,Wi));for(var i=e.length;i--;)Zr(n,e[i]);return n}));var ka=Hi((function(t,e){return null==t?{}:function(t,e){return Mr(t,e,(function(e,n){return _a(t,n)}))}(t,e)}));function ja(t,e){if(null==t)return{};var n=pe($i(t),(function(t){return[t]}));return e=Qi(e),Mr(t,n,(function(t,n){return e(t,n[0])}))}var Aa=Di(ba),Ca=Di(wa);function Oa(t){return null==t?[]:Pe(t,ba(t))}var Ta=Ei((function(t,e,n){return e=e.toLowerCase(),t+(n?Pa(e):e)}));function Pa(t){return Na(aa(t).toLowerCase())}function Fa(t){return(t=aa(t))&&t.replace(ct,Re).replace(Mt,"")}var Ma=Ei((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ia=Ei((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ba=Si("toLowerCase");var Ra=Ei((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var La=Ei((function(t,e,n){return t+(n?" ":"")+Na(e)}));var Da=Ei((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Na=Si("toUpperCase");function Ua(t,e,n){return t=aa(t),void 0===(e=n?void 0:e)?function(t){return Lt.test(t)}(t)?function(t){return t.match(Bt)||[]}(t):function(t){return t.match(tt)||[]}(t):t.match(e)||[]}var za=Dr((function(t,e){try{return oe(t,void 0,e)}catch(t){return Nu(t)?t:new ht(t)}})),Wa=Hi((function(t,e){return ae(e,(function(e){e=jo(e),Gn(t,e,mu(t[e],t))})),t}));function Va(t){return function(){return t}}var Ha=Ai(),qa=Ai(!0);function $a(t){return t}function Ga(t){return Sr("function"==typeof t?t:Qn(t,1))}var Ka=Dr((function(t,e){return function(n){return mr(n,t,e)}})),Ja=Dr((function(t,e){return function(n){return mr(t,n,e)}}));function Qa(t,e,n){var r=ba(e),i=lr(e,r);null!=n||Vu(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=lr(e,ba(e)));var o=!(Vu(n)&&"chain"in n&&!n.chain),u=Uu(t);return ae(i,(function(n){var r=e[n];t[n]=r,u&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=gi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,de([this.value()],arguments))})})),t}function Xa(){}var Ya=Pi(pe),Za=Pi(ce),ts=Pi(ge);function es(t){return so(t)?ke(jo(t)):function(t){return function(e){return fr(e,t)}}(t)}var ns=Mi(),rs=Mi(!0);function is(){return[]}function os(){return!1}var us=Ti((function(t,e){return t+e}),0),as=Ri("ceil"),ss=Ti((function(t,e){return t/e}),1),cs=Ri("floor");var ls,fs=Ti((function(t,e){return t*e}),1),hs=Ri("round"),ps=Ti((function(t,e){return t-e}),0);return Cn.after=function(t,e){if("function"!=typeof e)throw new mt(o);return t=ra(t),function(){if(--t<1)return e.apply(this,arguments)}},Cn.ary=_u,Cn.assign=sa,Cn.assignIn=ca,Cn.assignInWith=la,Cn.assignWith=fa,Cn.at=ha,Cn.before=gu,Cn.bind=mu,Cn.bindAll=Wa,Cn.bindKey=yu,Cn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Mu(t)?t:[t]},Cn.chain=eu,Cn.chunk=function(t,e,n){e=(n?ao(t,e,n):void 0===e)?1:un(ra(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,u=0,a=r(Ye(i/e));o<i;)a[u++]=qr(t,o,o+=e);return a},Cn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Cn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return de(Mu(n)?gi(n):[n],or(e,1))},Cn.cond=function(t){var e=null==t?0:t.length,n=Qi();return t=e?pe(t,(function(t){if("function"!=typeof t[1])throw new mt(o);return[n(t[0]),t[1]]})):[],Dr((function(n){for(var r=-1;++r<e;){var i=t[r];if(oe(i[0],this,n))return oe(i[1],this,n)}}))},Cn.conforms=function(t){return function(t){var e=ba(t);return function(n){return Xn(n,t,e)}}(Qn(t,1))},Cn.constant=Va,Cn.countBy=iu,Cn.create=function(t,e){var n=On(t);return null==e?n:$n(n,e)},Cn.curry=function t(e,n,r){var i=Ni(e,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},Cn.curryRight=function t(e,n,r){var i=Ni(e,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},Cn.debounce=bu,Cn.defaults=pa,Cn.defaultsDeep=da,Cn.defer=wu,Cn.delay=xu,Cn.difference=Oo,Cn.differenceBy=To,Cn.differenceWith=Po,Cn.drop=function(t,e,n){var r=null==t?0:t.length;return r?qr(t,(e=n||void 0===e?1:ra(e))<0?0:e,r):[]},Cn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?qr(t,0,(e=r-(e=n||void 0===e?1:ra(e)))<0?0:e):[]},Cn.dropRightWhile=function(t,e){return t&&t.length?ei(t,Qi(e,3),!0,!0):[]},Cn.dropWhile=function(t,e){return t&&t.length?ei(t,Qi(e,3),!0):[]},Cn.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ao(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=ra(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:ra(r))<0&&(r+=i),r=n>r?0:ia(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Cn.filter=function(t,e){return(Mu(t)?le:ir)(t,Qi(e,3))},Cn.flatMap=function(t,e){return or(hu(t,e),1)},Cn.flatMapDeep=function(t,e){return or(hu(t,e),1/0)},Cn.flatMapDepth=function(t,e,n){return n=void 0===n?1:ra(n),or(hu(t,e),n)},Cn.flatten=Io,Cn.flattenDeep=function(t){return(null==t?0:t.length)?or(t,1/0):[]},Cn.flattenDepth=function(t,e){return(null==t?0:t.length)?or(t,e=void 0===e?1:ra(e)):[]},Cn.flip=function(t){return Ni(t,512)},Cn.flow=Ha,Cn.flowRight=qa,Cn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Cn.functions=function(t){return null==t?[]:lr(t,ba(t))},Cn.functionsIn=function(t){return null==t?[]:lr(t,wa(t))},Cn.groupBy=cu,Cn.initial=function(t){return(null==t?0:t.length)?qr(t,0,-1):[]},Cn.intersection=Ro,Cn.intersectionBy=Lo,Cn.intersectionWith=Do,Cn.invert=ga,Cn.invertBy=ma,Cn.invokeMap=lu,Cn.iteratee=Ga,Cn.keyBy=fu,Cn.keys=ba,Cn.keysIn=wa,Cn.map=hu,Cn.mapKeys=function(t,e){var n={};return e=Qi(e,3),sr(t,(function(t,r,i){Gn(n,e(t,r,i),t)})),n},Cn.mapValues=function(t,e){var n={};return e=Qi(e,3),sr(t,(function(t,r,i){Gn(n,r,e(t,r,i))})),n},Cn.matches=function(t){return Cr(Qn(t,1))},Cn.matchesProperty=function(t,e){return Or(t,Qn(e,1))},Cn.memoize=Su,Cn.merge=xa,Cn.mergeWith=Sa,Cn.method=Ka,Cn.methodOf=Ja,Cn.mixin=Qa,Cn.negate=Eu,Cn.nthArg=function(t){return t=ra(t),Dr((function(e){return Pr(e,t)}))},Cn.omit=Ea,Cn.omitBy=function(t,e){return ja(t,Eu(Qi(e)))},Cn.once=function(t){return gu(2,t)},Cn.orderBy=function(t,e,n,r){return null==t?[]:(Mu(e)||(e=null==e?[]:[e]),Mu(n=r?void 0:n)||(n=null==n?[]:[n]),Fr(t,e,n))},Cn.over=Ya,Cn.overArgs=ku,Cn.overEvery=Za,Cn.overSome=ts,Cn.partial=ju,Cn.partialRight=Au,Cn.partition=pu,Cn.pick=ka,Cn.pickBy=ja,Cn.property=es,Cn.propertyOf=function(t){return function(e){return null==t?void 0:fr(t,e)}},Cn.pull=Uo,Cn.pullAll=zo,Cn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ir(t,e,Qi(n,2)):t},Cn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Ir(t,e,void 0,n):t},Cn.pullAt=Wo,Cn.range=ns,Cn.rangeRight=rs,Cn.rearg=Cu,Cn.reject=function(t,e){return(Mu(t)?le:ir)(t,Eu(Qi(e,3)))},Cn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Qi(e,3);++r<o;){var u=t[r];e(u,r,t)&&(n.push(u),i.push(r))}return Br(t,i),n},Cn.rest=function(t,e){if("function"!=typeof t)throw new mt(o);return Dr(t,e=void 0===e?e:ra(e))},Cn.reverse=Vo,Cn.sampleSize=function(t,e,n){return e=(n?ao(t,e,n):void 0===e)?1:ra(e),(Mu(t)?Un:Ur)(t,e)},Cn.set=function(t,e,n){return null==t?t:zr(t,e,n)},Cn.setWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:zr(t,e,n,r)},Cn.shuffle=function(t){return(Mu(t)?zn:Hr)(t)},Cn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ao(t,e,n)?(e=0,n=r):(e=null==e?0:ra(e),n=void 0===n?r:ra(n)),qr(t,e,n)):[]},Cn.sortBy=du,Cn.sortedUniq=function(t){return t&&t.length?Jr(t):[]},Cn.sortedUniqBy=function(t,e){return t&&t.length?Jr(t,Qi(e,2)):[]},Cn.split=function(t,e,n){return n&&"number"!=typeof n&&ao(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=aa(t))&&("string"==typeof e||null!=e&&!Ku(e))&&!(e=Xr(e))&&Ne(t)?ci($e(t),0,n):t.split(e,n):[]},Cn.spread=function(t,e){if("function"!=typeof t)throw new mt(o);return e=null==e?0:un(ra(e),0),Dr((function(n){var r=n[e],i=ci(n,0,e);return r&&de(i,r),oe(t,this,i)}))},Cn.tail=function(t){var e=null==t?0:t.length;return e?qr(t,1,e):[]},Cn.take=function(t,e,n){return t&&t.length?qr(t,0,(e=n||void 0===e?1:ra(e))<0?0:e):[]},Cn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?qr(t,(e=r-(e=n||void 0===e?1:ra(e)))<0?0:e,r):[]},Cn.takeRightWhile=function(t,e){return t&&t.length?ei(t,Qi(e,3),!1,!0):[]},Cn.takeWhile=function(t,e){return t&&t.length?ei(t,Qi(e,3)):[]},Cn.tap=function(t,e){return e(t),t},Cn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new mt(o);return Vu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),bu(t,e,{leading:r,maxWait:e,trailing:i})},Cn.thru=nu,Cn.toArray=ea,Cn.toPairs=Aa,Cn.toPairsIn=Ca,Cn.toPath=function(t){return Mu(t)?pe(t,jo):Xu(t)?[t]:gi(ko(aa(t)))},Cn.toPlainObject=ua,Cn.transform=function(t,e,n){var r=Mu(t),i=r||Lu(t)||Yu(t);if(e=Qi(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Vu(t)&&Uu(o)?On(qt(t)):{}}return(i?ae:sr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Cn.unary=function(t){return _u(t,1)},Cn.union=Ho,Cn.unionBy=qo,Cn.unionWith=$o,Cn.uniq=function(t){return t&&t.length?Yr(t):[]},Cn.uniqBy=function(t,e){return t&&t.length?Yr(t,Qi(e,2)):[]},Cn.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Yr(t,void 0,e):[]},Cn.unset=function(t,e){return null==t||Zr(t,e)},Cn.unzip=Go,Cn.unzipWith=Ko,Cn.update=function(t,e,n){return null==t?t:ti(t,e,ui(n))},Cn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:ti(t,e,ui(n),r)},Cn.values=Oa,Cn.valuesIn=function(t){return null==t?[]:Pe(t,wa(t))},Cn.without=Jo,Cn.words=Ua,Cn.wrap=function(t,e){return ju(ui(e),t)},Cn.xor=Qo,Cn.xorBy=Xo,Cn.xorWith=Yo,Cn.zip=Zo,Cn.zipObject=function(t,e){return ii(t||[],e||[],Vn)},Cn.zipObjectDeep=function(t,e){return ii(t||[],e||[],zr)},Cn.zipWith=tu,Cn.entries=Aa,Cn.entriesIn=Ca,Cn.extend=ca,Cn.extendWith=la,Qa(Cn,Cn),Cn.add=us,Cn.attempt=za,Cn.camelCase=Ta,Cn.capitalize=Pa,Cn.ceil=as,Cn.clamp=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=oa(n))==n?n:0),void 0!==e&&(e=(e=oa(e))==e?e:0),Jn(oa(t),e,n)},Cn.clone=function(t){return Qn(t,4)},Cn.cloneDeep=function(t){return Qn(t,5)},Cn.cloneDeepWith=function(t,e){return Qn(t,5,e="function"==typeof e?e:void 0)},Cn.cloneWith=function(t,e){return Qn(t,4,e="function"==typeof e?e:void 0)},Cn.conformsTo=function(t,e){return null==e||Xn(t,e,ba(e))},Cn.deburr=Fa,Cn.defaultTo=function(t,e){return null==t||t!=t?e:t},Cn.divide=ss,Cn.endsWith=function(t,e,n){t=aa(t),e=Xr(e);var r=t.length,i=n=void 0===n?r:Jn(ra(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},Cn.eq=Ou,Cn.escape=function(t){return(t=aa(t))&&N.test(t)?t.replace(L,Le):t},Cn.escapeRegExp=function(t){return(t=aa(t))&&G.test(t)?t.replace($,"\\$&"):t},Cn.every=function(t,e,n){var r=Mu(t)?ce:nr;return n&&ao(t,e,n)&&(e=void 0),r(t,Qi(e,3))},Cn.find=ou,Cn.findIndex=Fo,Cn.findKey=function(t,e){return ye(t,Qi(e,3),sr)},Cn.findLast=uu,Cn.findLastIndex=Mo,Cn.findLastKey=function(t,e){return ye(t,Qi(e,3),cr)},Cn.floor=cs,Cn.forEach=au,Cn.forEachRight=su,Cn.forIn=function(t,e){return null==t?t:ur(t,Qi(e,3),wa)},Cn.forInRight=function(t,e){return null==t?t:ar(t,Qi(e,3),wa)},Cn.forOwn=function(t,e){return t&&sr(t,Qi(e,3))},Cn.forOwnRight=function(t,e){return t&&cr(t,Qi(e,3))},Cn.get=va,Cn.gt=Tu,Cn.gte=Pu,Cn.has=function(t,e){return null!=t&&ro(t,e,vr)},Cn.hasIn=_a,Cn.head=Bo,Cn.identity=$a,Cn.includes=function(t,e,n,r){t=Bu(t)?t:Oa(t),n=n&&!r?ra(n):0;var i=t.length;return n<0&&(n=un(i+n,0)),Qu(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&we(t,e,n)>-1},Cn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ra(n);return i<0&&(i=un(r+i,0)),we(t,e,i)},Cn.inRange=function(t,e,n){return e=na(e),void 0===n?(n=e,e=0):n=na(n),function(t,e,n){return t>=an(e,n)&&t<un(e,n)}(t=oa(t),e,n)},Cn.invoke=ya,Cn.isArguments=Fu,Cn.isArray=Mu,Cn.isArrayBuffer=Iu,Cn.isArrayLike=Bu,Cn.isArrayLikeObject=Ru,Cn.isBoolean=function(t){return!0===t||!1===t||Hu(t)&&pr(t)==l},Cn.isBuffer=Lu,Cn.isDate=Du,Cn.isElement=function(t){return Hu(t)&&1===t.nodeType&&!Gu(t)},Cn.isEmpty=function(t){if(null==t)return!0;if(Bu(t)&&(Mu(t)||"string"==typeof t||"function"==typeof t.splice||Lu(t)||Yu(t)||Fu(t)))return!t.length;var e=no(t);if(e==v||e==y)return!t.size;if(fo(t))return!Er(t).length;for(var n in t)if(Et.call(t,n))return!1;return!0},Cn.isEqual=function(t,e){return br(t,e)},Cn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?br(t,e,void 0,n):!!r},Cn.isError=Nu,Cn.isFinite=function(t){return"number"==typeof t&&nn(t)},Cn.isFunction=Uu,Cn.isInteger=zu,Cn.isLength=Wu,Cn.isMap=qu,Cn.isMatch=function(t,e){return t===e||wr(t,e,Yi(e))},Cn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:void 0,wr(t,e,Yi(e),n)},Cn.isNaN=function(t){return $u(t)&&t!=+t},Cn.isNative=function(t){if(lo(t))throw new ht("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return xr(t)},Cn.isNil=function(t){return null==t},Cn.isNull=function(t){return null===t},Cn.isNumber=$u,Cn.isObject=Vu,Cn.isObjectLike=Hu,Cn.isPlainObject=Gu,Cn.isRegExp=Ku,Cn.isSafeInteger=function(t){return zu(t)&&t>=-9007199254740991&&t<=9007199254740991},Cn.isSet=Ju,Cn.isString=Qu,Cn.isSymbol=Xu,Cn.isTypedArray=Yu,Cn.isUndefined=function(t){return void 0===t},Cn.isWeakMap=function(t){return Hu(t)&&no(t)==x},Cn.isWeakSet=function(t){return Hu(t)&&"[object WeakSet]"==pr(t)},Cn.join=function(t,e){return null==t?"":rn.call(t,e)},Cn.kebabCase=Ma,Cn.last=No,Cn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=ra(n))<0?un(r+i,0):an(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):be(t,Se,i,!0)},Cn.lowerCase=Ia,Cn.lowerFirst=Ba,Cn.lt=Zu,Cn.lte=ta,Cn.max=function(t){return t&&t.length?rr(t,$a,dr):void 0},Cn.maxBy=function(t,e){return t&&t.length?rr(t,Qi(e,2),dr):void 0},Cn.mean=function(t){return Ee(t,$a)},Cn.meanBy=function(t,e){return Ee(t,Qi(e,2))},Cn.min=function(t){return t&&t.length?rr(t,$a,jr):void 0},Cn.minBy=function(t,e){return t&&t.length?rr(t,Qi(e,2),jr):void 0},Cn.stubArray=is,Cn.stubFalse=os,Cn.stubObject=function(){return{}},Cn.stubString=function(){return""},Cn.stubTrue=function(){return!0},Cn.multiply=fs,Cn.nth=function(t,e){return t&&t.length?Pr(t,ra(e)):void 0},Cn.noConflict=function(){return Gt._===this&&(Gt._=Ot),this},Cn.noop=Xa,Cn.now=vu,Cn.pad=function(t,e,n){t=aa(t);var r=(e=ra(e))?qe(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Fi(Ze(i),n)+t+Fi(Ye(i),n)},Cn.padEnd=function(t,e,n){t=aa(t);var r=(e=ra(e))?qe(t):0;return e&&r<e?t+Fi(e-r,n):t},Cn.padStart=function(t,e,n){t=aa(t);var r=(e=ra(e))?qe(t):0;return e&&r<e?Fi(e-r,n)+t:t},Cn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),cn(aa(t).replace(J,""),e||0)},Cn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&ao(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=na(t),void 0===e?(e=t,t=0):e=na(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=ln();return an(t+i*(e-t+Vt("1e-"+((i+"").length-1))),e)}return Rr(t,e)},Cn.reduce=function(t,e,n){var r=Mu(t)?ve:Ae,i=arguments.length<3;return r(t,Qi(e,4),n,i,tr)},Cn.reduceRight=function(t,e,n){var r=Mu(t)?_e:Ae,i=arguments.length<3;return r(t,Qi(e,4),n,i,er)},Cn.repeat=function(t,e,n){return e=(n?ao(t,e,n):void 0===e)?1:ra(e),Lr(aa(t),e)},Cn.replace=function(){var t=arguments,e=aa(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Cn.result=function(t,e,n){var r=-1,i=(e=ai(e,t)).length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[jo(e[r])];void 0===o&&(r=i,o=n),t=Uu(o)?o.call(t):o}return t},Cn.round=hs,Cn.runInContext=t,Cn.sample=function(t){return(Mu(t)?Nn:Nr)(t)},Cn.size=function(t){if(null==t)return 0;if(Bu(t))return Qu(t)?qe(t):t.length;var e=no(t);return e==v||e==y?t.size:Er(t).length},Cn.snakeCase=Ra,Cn.some=function(t,e,n){var r=Mu(t)?ge:$r;return n&&ao(t,e,n)&&(e=void 0),r(t,Qi(e,3))},Cn.sortedIndex=function(t,e){return Gr(t,e)},Cn.sortedIndexBy=function(t,e,n){return Kr(t,e,Qi(n,2))},Cn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Gr(t,e);if(r<n&&Ou(t[r],e))return r}return-1},Cn.sortedLastIndex=function(t,e){return Gr(t,e,!0)},Cn.sortedLastIndexBy=function(t,e,n){return Kr(t,e,Qi(n,2),!0)},Cn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=Gr(t,e,!0)-1;if(Ou(t[n],e))return n}return-1},Cn.startCase=La,Cn.startsWith=function(t,e,n){return t=aa(t),n=null==n?0:Jn(ra(n),0,t.length),e=Xr(e),t.slice(n,n+e.length)==e},Cn.subtract=ps,Cn.sum=function(t){return t&&t.length?Ce(t,$a):0},Cn.sumBy=function(t,e){return t&&t.length?Ce(t,Qi(e,2)):0},Cn.template=function(t,e,n){var r=Cn.templateSettings;n&&ao(t,e,n)&&(e=void 0),t=aa(t),e=la({},e,r,Ui);var i,o,u=la({},e.imports,r.imports,Ui),a=ba(u),s=Pe(u,a),c=0,l=e.interpolate||lt,f="__p += '",h=_t((e.escape||lt).source+"|"+l.source+"|"+(l===W?nt:lt).source+"|"+(e.evaluate||lt).source+"|$","g"),p="//# sourceURL="+(Et.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Nt+"]")+"\n";t.replace(h,(function(e,n,r,u,a,s){return r||(r=u),f+=t.slice(c,s).replace(ft,De),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),a&&(o=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=s+e.length,e})),f+="';\n";var d=Et.call(e,"variable")&&e.variable;d||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(M,""):f).replace(I,"$1").replace(B,"$1;"),f="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=za((function(){return pt(a,p+"return "+f).apply(void 0,s)}));if(v.source=f,Nu(v))throw v;return v},Cn.times=function(t,e){if((t=ra(t))<1||t>9007199254740991)return[];var n=4294967295,r=an(t,4294967295);t-=4294967295;for(var i=Oe(r,e=Qi(e));++n<t;)e(n);return i},Cn.toFinite=na,Cn.toInteger=ra,Cn.toLength=ia,Cn.toLower=function(t){return aa(t).toLowerCase()},Cn.toNumber=oa,Cn.toSafeInteger=function(t){return t?Jn(ra(t),-9007199254740991,9007199254740991):0===t?t:0},Cn.toString=aa,Cn.toUpper=function(t){return aa(t).toUpperCase()},Cn.trim=function(t,e,n){if((t=aa(t))&&(n||void 0===e))return t.replace(K,"");if(!t||!(e=Xr(e)))return t;var r=$e(t),i=$e(e);return ci(r,Me(r,i),Ie(r,i)+1).join("")},Cn.trimEnd=function(t,e,n){if((t=aa(t))&&(n||void 0===e))return t.replace(Q,"");if(!t||!(e=Xr(e)))return t;var r=$e(t);return ci(r,0,Ie(r,$e(e))+1).join("")},Cn.trimStart=function(t,e,n){if((t=aa(t))&&(n||void 0===e))return t.replace(J,"");if(!t||!(e=Xr(e)))return t;var r=$e(t);return ci(r,Me(r,$e(e))).join("")},Cn.truncate=function(t,e){var n=30,r="...";if(Vu(e)){var i="separator"in e?e.separator:i;n="length"in e?ra(e.length):n,r="omission"in e?Xr(e.omission):r}var o=(t=aa(t)).length;if(Ne(t)){var u=$e(t);o=u.length}if(n>=o)return t;var a=n-qe(r);if(a<1)return r;var s=u?ci(u,0,a).join(""):t.slice(0,a);if(void 0===i)return s+r;if(u&&(a+=s.length-a),Ku(i)){if(t.slice(a).search(i)){var c,l=s;for(i.global||(i=_t(i.source,aa(rt.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;s=s.slice(0,void 0===f?a:f)}}else if(t.indexOf(Xr(i),a)!=a){var h=s.lastIndexOf(i);h>-1&&(s=s.slice(0,h))}return s+r},Cn.unescape=function(t){return(t=aa(t))&&D.test(t)?t.replace(R,Ge):t},Cn.uniqueId=function(t){var e=++kt;return aa(t)+e},Cn.upperCase=Da,Cn.upperFirst=Na,Cn.each=au,Cn.eachRight=su,Cn.first=Bo,Qa(Cn,(ls={},sr(Cn,(function(t,e){Et.call(Cn.prototype,e)||(ls[e]=t)})),ls),{chain:!1}),Cn.VERSION="4.17.13",ae(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Cn[t].placeholder=Cn})),ae(["drop","take"],(function(t,e){Fn.prototype[t]=function(n){n=void 0===n?1:un(ra(n),0);var r=this.__filtered__&&!e?new Fn(this):this.clone();return r.__filtered__?r.__takeCount__=an(n,r.__takeCount__):r.__views__.push({size:an(n,4294967295),type:t+(r.__dir__<0?"Right":"")}),r},Fn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ae(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Fn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Qi(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),ae(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Fn.prototype[t]=function(){return this[n](1).value()[0]}})),ae(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Fn.prototype[t]=function(){return this.__filtered__?new Fn(this):this[n](1)}})),Fn.prototype.compact=function(){return this.filter($a)},Fn.prototype.find=function(t){return this.filter(t).head()},Fn.prototype.findLast=function(t){return this.reverse().find(t)},Fn.prototype.invokeMap=Dr((function(t,e){return"function"==typeof t?new Fn(this):this.map((function(n){return mr(n,t,e)}))})),Fn.prototype.reject=function(t){return this.filter(Eu(Qi(t)))},Fn.prototype.slice=function(t,e){t=ra(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Fn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=ra(e))<0?n.dropRight(-e):n.take(e-t)),n)},Fn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Fn.prototype.toArray=function(){return this.take(4294967295)},sr(Fn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=Cn[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(Cn.prototype[e]=function(){var e=this.__wrapped__,u=r?[1]:arguments,a=e instanceof Fn,s=u[0],c=a||Mu(e),l=function(t){var e=i.apply(Cn,de([t],u));return r&&f?e[0]:e};c&&n&&"function"==typeof s&&1!=s.length&&(a=c=!1);var f=this.__chain__,h=!!this.__actions__.length,p=o&&!f,d=a&&!h;if(!o&&c){e=d?e:new Fn(this);var v=t.apply(e,u);return v.__actions__.push({func:nu,args:[l],thisArg:void 0}),new Pn(v,f)}return p&&d?t.apply(this,u):(v=this.thru(l),p?r?v.value()[0]:v.value():v)})})),ae(["pop","push","shift","sort","splice","unshift"],(function(t){var e=yt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Cn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Mu(i)?i:[],t)}return this[n]((function(n){return e.apply(Mu(n)?n:[],t)}))}})),sr(Fn.prototype,(function(t,e){var n=Cn[e];if(n){var r=n.name+"";Et.call(yn,r)||(yn[r]=[]),yn[r].push({name:e,func:n})}})),yn[Ci(void 0,2).name]=[{name:"wrapper",func:void 0}],Fn.prototype.clone=function(){var t=new Fn(this.__wrapped__);return t.__actions__=gi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=gi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=gi(this.__views__),t},Fn.prototype.reverse=function(){if(this.__filtered__){var t=new Fn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Fn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Mu(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],u=o.size;switch(o.type){case"drop":t+=u;break;case"dropRight":e-=u;break;case"take":e=an(e,t+u);break;case"takeRight":t=un(t,e-u)}}return{start:t,end:e}}(0,i,this.__views__),u=o.start,a=o.end,s=a-u,c=r?a:u-1,l=this.__iteratees__,f=l.length,h=0,p=an(s,this.__takeCount__);if(!n||!r&&i==s&&p==s)return ni(t,this.__actions__);var d=[];t:for(;s--&&h<p;){for(var v=-1,_=t[c+=e];++v<f;){var g=l[v],m=g.iteratee,y=g.type,b=m(_);if(2==y)_=b;else if(!b){if(1==y)continue t;break t}}d[h++]=_}return d},Cn.prototype.at=ru,Cn.prototype.chain=function(){return eu(this)},Cn.prototype.commit=function(){return new Pn(this.value(),this.__chain__)},Cn.prototype.next=function(){void 0===this.__values__&&(this.__values__=ea(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},Cn.prototype.plant=function(t){for(var e,n=this;n instanceof Tn;){var r=Co(n);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},Cn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Fn){var e=t;return this.__actions__.length&&(e=new Fn(this)),(e=e.reverse()).__actions__.push({func:nu,args:[Vo],thisArg:void 0}),new Pn(e,this.__chain__)}return this.thru(Vo)},Cn.prototype.toJSON=Cn.prototype.valueOf=Cn.prototype.value=function(){return ni(this.__wrapped__,this.__actions__)},Cn.prototype.first=Cn.prototype.head,Yt&&(Cn.prototype[Yt]=function(){return this}),Cn}();Gt._=Ke,void 0===(i=function(){return Ke}.call(e,n,e,r))||(r.exports=i)}).call(this)}).call(this,n(30),n(58)(t))},652:function(t,e,n){"use strict";var r=n(696);e.a=Object(r.a)()},653:function(t,e,n){var r=n(654);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},654:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,".BenchmarkPanel {\n  background: #449;\n  border: 2px solid #66e;\n  padding: 4px;\n}\n.BenchmarkPanel table {\n  font-size: 10px;\n}",""])},655:function(t,e,n){"use strict";var r,i=n(34),o=n.n(i),u=n(365),a=n(77),s=n(67),c=n.n(s);!function(t){t.Active="active",t.Unjudged="unjudged",t.Judged="judged"}(r||(r={}));function l(){return!!window.BEMUSE_AUTOPLAY}e.a=class{constructor(t){var e;this.player=t,this.notifications={sounds:[],judgments:[]},this.finished=!1,this.tainted=!1,this.input=new Map,this._gameTime=0,this._pinching=null,this._columns=t.columns,this._noteBufferByColumn=o()(t.notechart.notes).sortBy(t=>t.time).groupBy(t=>t.column).mapValues((e=this,function(t){let n=0;return{notes:t,get startIndex(){return n},update(){for(;n<t.length&&"judged"===e.getNoteStatus(t[n]);)n+=1}}})).value(),this._noteResult=new Map,this._duration=t.notechart.duration,this._judge=Object(a.d)(t.notechart,{tutorial:t.options.tutorial}),this.stats=new u.a(t.notechart),this.speed=t.options.speed}update(t,e){this._gameTime=t,this._rawInput=e,this.notifications={sounds:[],judgments:[]},this._updateInputColumnMap(),this._judgeNotes(),this._updateSpeed(),t>this._duration+3&&(this.finished=!0)}getNoteStatus(t){let e=this._noteResult.get(t);return e?e.status:r.Unjudged}getNoteJudgment(t){let e=this._noteResult.get(t);return e?e.judgment:a.a.Unjudged}getPlayerInput(t){return this._rawInput.get(`p${this.player.number}_${t}`)}_updateInputColumnMap(){this.input=new Map(this._columns.map(t=>[t,this.getPlayerInput(t)]))}_judgeNotes(){for(let t of this._columns){let e=this._noteBufferByColumn[t];if(e){let n=this.input.get(t);this._judgeColumn(e,n,t),e.update()}}}_updateSpeed(){this.getPlayerInput("speedup").justPressed&&this._modifySpeed(1),this.getPlayerInput("speeddown").justPressed&&this._modifySpeed(-1);let t=this.getPlayerInput("pinch").value;if(t&&!this._pinching?this._pinching={start:t,speed:this.speed}:t||(this._pinching=null),t&&this._pinching){let e=this._pinching,n=e.speed*t/e.start;this.speed=Math.max(.2,Math.round(10*n)/10)}}_modifySpeed(t){let e=this._rawInput.get("select").value?.1:this.speed<.5?.3:.5;this.speed+=t*e,this.speed<.2&&(this.speed=.2)}_judgeColumn(t,e,n){let r,i,o=t.notes,u=!1;for(let n=t.startIndex;n<o.length;n++){let a=o[n];if(this._shouldJudge(a,e,t)){let t="active"!==this.getNoteStatus(a);if(r=a,i=this._judgeNote(a),l()&&(u=!0),t)break}}if(e.justPressed||u)if(r&&null!=i)this.notifications.sounds.push({note:r,type:"hit",judgment:i});else{let t=this._getFreestyleNote(o);if(t){("3d"!==this.player.options.placement||!this._isSandwiched(n))&&this.notifications.sounds.push({note:t,type:"free"})}}}_getClosestNote(t){return o.a.minBy(t,t=>Math.abs(this._gameTime-t.time))}_getFreestyleNote(t){return o.a.minBy(t,t=>Math.abs(this._gameTime-t.time)+(this._gameTime<t.time-1?1e6:0))}_isSandwiched(t){const e={2:["1","3"],3:["2","4"],4:["3","5"],5:["4","6"],6:["5","7"]};return!!e[t]&&e[t].every(t=>{const e=this._noteBufferByColumn[t];return!!e&&e.notes.some(t=>Math.abs(this._gameTime-t.time)<.1)})}_shouldJudge(t,e,n){let r=this.getNoteStatus(t);if("unjudged"===r){if(l()&&this._gameTime>=t.time)return this.tainted=!0,!0;let r=Object(a.g)(this._gameTime,t.time,this._judge),i=r===a.b,o=r>0&&e.changed&&e.value;return Object(a.e)(r)&&this._getClosestNote(n.notes)!==t&&(o=!1),i||o}if("active"===r){const n=t.end||c()(!1,"note.end must exist");if(l()&&this._gameTime>=n.time)return this.tainted=!0,!0;let r=Object(a.f)(this._gameTime,n.time,this._judge)===a.b,i=e.changed,o="SC"===t.column,u=this._gameTime>=n.time;return r||i||o&&u}return!1}_judgeNote(t){let e=this._gameTime-t.time,n=Object(a.g)(this._gameTime,t.time,this._judge),i=this._noteResult.get(t),o=!i||"unjudged"===i.status,u=i&&"active"===i.status;if(l()&&n>=1&&(n=1),t.end){if(o){let o=n===a.b?r.Judged:r.Active;n===a.b&&this._setJudgment(n,e,t.column),i={status:o,judgment:n,delta:e}}else if(u){let o="SC"===t.column;e=this._gameTime-t.end.time,n=Object(a.f)(this._gameTime,t.end.time,this._judge)||a.b,o&&e>0&&(n=1),i={status:r.Judged,judgment:n,delta:e}}}else i={status:r.Judged,judgment:n,delta:e};if(n===a.b&&this.notifications.sounds.push({note:t,type:"break"}),o&&n!==a.b&&this.stats.handleDelta(e),!i)throw new Error("Invariant violation: result must not be undefined");if(!n)throw new Error("Invariant violation: note should be judged by this point");return this._noteResult.set(t,i),this._setJudgment(n,e,t.column),n}_setJudgment(t,e,n){this.stats.handleJudgment(t);let r={judgment:t,combo:this.stats.combo,delta:e,column:n};this.notifications.judgments.push(r)}}},656:function(t,e){function n(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return u[t];var n,o=String(t);return(n=r[o.toLowerCase()])?n:(n=i[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}n.isEventKey=function(t,e){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;if(null==n)return!1;if("string"==typeof e){var o;if(o=r[e.toLowerCase()])return o===n;if(o=i[e.toLowerCase()])return o===n}else if("number"==typeof e)return e===n;return!1}};var r=(e=t.exports=n).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};
/*!
 * Programatically add the following
 */
for(o=97;o<123;o++)r[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)r[o-48]=o;for(o=1;o<13;o++)r["f"+o]=o+111;for(o=0;o<10;o++)r["numpad "+o]=o+96;var u=e.names=e.title={};for(o in r)u[r[o]]=o;for(var a in i)r[a]=i[a]},657:function(t,e,n){"use strict";var r=n(211),i=n(366),o=n(77),u=n(367);e.a=class{constructor(t,e){this._currentSpeed=1,this._player=t,this._noteArea=new i.a(t.notechart.notes,t.notechart.barLines),this._stateful={},this._defaultData={placement:t.options.placement,scratch:t.options.scratch,key_mode:t.notechart.getKeyMode(t.options.scratch),lane_lift:Math.max(0,-t.options.laneCover),lane_press:Math.max(0,t.options.laneCover)},this._gauge=Object(u.a)(t.options.gauge),this._touch3dMode="touch3d"===e.displayMode}update(t,e,n){const i=this._touch3dMode;let u=this._player,a=this._noteArea,s=this._stateful,c=u.notechart.secondsToBeat(e),l=u.notechart.beatToPosition(c),f=u.notechart.spacingAtBeat(c),h=Object.assign({},this._defaultData),p=(t,e)=>(h[t]||(h[t]=[])).push(e),d=this._gauge;this._currentSpeed+=(n.speed-this._currentSpeed)/3;let v=this._currentSpeed*f;h.beat=c,function(){let t=a.getVisibleNotes(l,m(),1);if(i){const e=(t,e,n,i=1)=>{const o=r.b(e-.01),u=+n||-1,a=r.a,s=o.projection*a*(2*(u-.5)/7-1),c=o.projection*i*a*2/7;p("note3d_"+n,{key:t,y:o.y,x:s+640,width:c})};let i=3/128;for(let r of t){let t=r.note,o=t.column;if(r.height){let n=0,u=r.y+r.height;for(let a=u-Math.max(0,Math.floor((u-1)/i)*i);a>=0&&a>=r.y;a-=i)e(t.id+"x"+n++,a,o,.8);e(t.id,r.y+r.height,o)}else"judged"!==n.getNoteStatus(t)&&e(t.id,r.y,o)}}else for(let e of t){let t=e.note,r=t.column;if(e.height){let i=n.getNoteJudgment(t),u=n.getNoteStatus(t);p("longnote_"+r,{key:t.id,y:e.y,height:e.height,active:0!==i&&i!==o.b,missed:"judged"===u&&i===o.b})}else"judged"!==n.getNoteStatus(t)&&p("note_"+r,{key:t.id,y:e.y})}}(),function(){let t=a.getVisibleBarLines(l,m(),1);for(let e of t)if(i){const t=r.b(e.y-.01);p("barlines3d",{key:e.id,y:t.y,x:t.projection*-r.a+640,width:t.projection*r.a*2})}else p("barlines",{key:e.id,y:e.y})}(),function(){let e=n.input;for(let n of u.columns){let r=e.get(n);h[n+"_active"]=0!==r.value?1:0,r.changed&&(0!==r.value?s[n+"_down"]=t:s[n+"_up"]=t)}}(),function(){let e=n.notifications.judgments,r=e[e.length-1];if(r){let e=-1===r.judgment?"missed":""+r.judgment;s["judge_"+e]=t;let n=-1===r.judgment||1===r.judgment?"none":r.delta>0?"late":r.delta<0?"early":"none";s["judge_deviation_"+n]=t,s.combo=r.combo}h.score=n.stats.score}(),function(){d.update(n),d.shouldDisplay()?s.gauge_enter||(s.gauge_enter=t):s.gauge_enter&&(s.gauge_exit||(s.gauge_exit=t));h.gauge_primary=d.getPrimary(),h.gauge_secondary=d.getSecondary(),h.gauge_extra=d.getExtra()}(),function(){let e=n.notifications.judgments;for(let n=0;n<e.length;n++){let r=e[n];Object(o.c)(r.judgment)||(s[r.column+"_explode"]=t)}}(),h.speed=n.speed.toFixed(1)+"x",h.stat_1=g(1),h.stat_2=g(2),h.stat_3=g(3),h.stat_4=g(4),h.stat_missed=g(o.b),h.stat_acc=(100*(n.stats.currentAccuracy||0)).toFixed(2)+"%";const _=u.notechart.bpmAtBeat(c);return h.bpm=_<1?"":Math.round(_)%1e4||"",Object.assign(h,s),h;function g(t){return n.stats.counts&&n.stats.counts[t]}function m(){return l+5/v}}}},658:function(t,e,n){"use strict";var r=n(207),i=n(205),o=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))};class u extends r.b{constructor(t){super({getFiles:e=>function(t,e){return o(this,void 0,void 0,(function*(){let n=[];const u=t.dataTransfer;if(!u)throw new Error("Expect event.dataTransfer to be present");if(u.types.indexOf("text/uri-list")>-1){let t=u.getData("text/uri-list").split(/\r\n|\r|\n/).filter(t=>t&&!t.startsWith("#"))[0];if(r.a.test(t&&t.replace(/[?#].*/,"")))return e("Link to archive file detected. Trying to download"),[yield Object(r.d)(t,e)]}else if(u.items)for(let t of Array.from(u.items))yield a(t);else if(u.files)for(let t of Array.from(u.files))c(t);return n;function a(t){return o(this,void 0,void 0,(function*(){let e=t.webkitGetAsEntry&&t.webkitGetAsEntry();if(e)yield s(e);else{let e=t.getAsFile&&t.getAsFile();e&&c(e)}}))}function s(t,e=""){return t.isFile?function(t,e=""){return new Promise((e,n)=>{t.file(e,n)}).tap(t=>{c(t,e)})}(t,e):t.isDirectory?function(t,e=""){return o(this,void 0,void 0,(function*(){let n=[],r=t.createReader();for(;;){let t=yield new Promise((t,e)=>{r.readEntries(t,e)});if(!t||0===t.length)break;n.push(...Array.from(t))}for(let r of n)yield s(r,e+t.name+"/")}))}(t,e):void 0}function c(t,e=""){t&&Object(i.a)(e,t.name,e=>{n.push({name:e,file:t})})}}))}(t,e)})}}e.a=u},679:function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},693:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(118),i=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))};function o(t,e){if(e.includes("://"))return[new r.a(new URL(e)),e.split("/").slice(-1)[0]];const n=e.split("/");let i=t;for(;n.length>1;){const t=n.shift();i=new u(i,t)}return[i,n[0]]}class u{constructor(t,e){this.base=t,this.dirName=e}file(t){return i(this,void 0,void 0,(function*(){return this.base.file(`${this.dirName}/${t}`)}))}}},696:function(t,e,n){"use strict";var r=n(67),i=n.n(r);e.a=function(){const t=new Map;let e;return{receiveSongId(n){e!==n&&(e=n,t.clear())},isEmpty:()=>0===t.size,isCached:e=>t.has(e),cache(n,r){i()(e,"Expected current song to be set."),t.set(n,r)},get:e=>t.get(e)}}},697:function(t,e,n){"use strict";e.a=class{constructor(t,e,n,{volume:r}={}){this._master=t,this._samples=e,this._map=n,this._exclusiveInstances=new Map,this._group=this._master.group({volume:r})}playAuto(t,e,n){return this._play({note:t,delay:e,exclusive:!0,slice:n})}playNote(t,e,n){return this._play({note:t,delay:e,exclusive:!0,slice:n})}playFree(t,e,n){return this._play({note:t,delay:0,exclusive:!1,slice:n})}_play({note:t,delay:e,exclusive:n}){let r=t.keysound;n&&this._stopOldExclusiveSound(r,e);let i=this._map[r.toLowerCase()];if(!i)return null;let o=this._samples[i];if(!o)return null;let u=o.play(e,{start:t.keysoundStart,end:t.keysoundEnd,group:this._group});return n&&this._exclusiveInstances.set(r,u),u}_stopOldExclusiveSound(t,e){let n=this._exclusiveInstances.get(t);n&&(setTimeout(()=>n.stop(),1e3*e),this._exclusiveInstances.delete(t))}}},707:function(t,e,n){(function(e,n,r){var i;i=function(){var t,i,o;return function t(e,n,r){function i(u,a){if(!n[u]){if(!e[u]){var s="function"==typeof _dereq_&&_dereq_;if(!a&&s)return s(u,!0);if(o)return o(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[u]={exports:{}};e[u][0].call(l.exports,(function(t){var n=e[u][1][t];return i(n||t)}),l,l.exports,t,e,n,r)}return n[u].exports}for(var o="function"==typeof _dereq_&&_dereq_,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function n(t){var n=new e(t),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}t.any=function(t){return n(t)},t.prototype.any=function(){return n(this)}}},{}],2:[function(t,n,r){"use strict";var i;try{throw new Error}catch(t){i=t}var o=t("./schedule"),u=t("./queue"),a=t("./util");function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=o}function c(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function l(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function f(t){this._normalQueue._pushOne(t),this._queueTick()}function h(t){for(;t.length()>0;)p(t)}function p(t){var e=t.shift();if("function"!=typeof e)e._settlePromises();else{var n=t.shift(),r=t.shift();e.call(n,r)}}s.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},s.prototype.disableTrampolineIfNecessary=function(){a.hasDevTools&&(this._trampolineEnabled=!1)},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},s.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout((function(){t(e)}),0);else try{this._schedule((function(){t(e)}))}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.hasDevTools?(s.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?c.call(this,t,e,n):this._schedule((function(){setTimeout((function(){t.call(e,n)}),100)}))},s.prototype.invoke=function(t,e,n){this._trampolineEnabled?l.call(this,t,e,n):this._schedule((function(){t.call(e,n)}))},s.prototype.settlePromises=function(t){this._trampolineEnabled?f.call(this,t):this._schedule((function(){t._settlePromises()}))}):(s.prototype.invokeLater=c,s.prototype.invoke=l,s.prototype.settlePromises=f),s.prototype._drainQueues=function(){h(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,h(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},n.exports=s,n.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},u=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},a=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},s=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var c=n(o),l=new t(e);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(c),c instanceof t){var h={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:c};f._then(e,u,void 0,l,h),c._then(a,s,void 0,l,h),l._setOnCancel(c)}else l._resolveCallback(f);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var i=t("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(t){}return i},e.exports=i},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){var n=t("./util"),r=n.canEvaluate;function i(t){return function(t,r){var i;if(null!=t&&(i=t[r]),"function"!=typeof i){var o="Object "+n.classString(t)+" has no method '"+n.toString(r)+"'";throw new e.TypeError(o)}return i}(t,this.pop()).apply(t,this)}function o(t){return t[this]}function u(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}n.isIdentifier,e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(i,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e;if("number"==typeof t)e=u;else if(r){var n=(void 0)(t);e=null!==n?n:o}else e=o;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),u=o.tryCatch,a=o.errorObj,s=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),s.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=u(t).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),s.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),s.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=t("./es5").keys,i=n.tryCatch,o=n.errorObj;return function(t,u,a){return function(s){var c=a._boundValue();t:for(var l=0;l<t.length;++l){var f=t[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(s instanceof f)return i(u).call(c,s)}else if("function"==typeof f){var h=i(f).call(c,s);if(h===o)return h;if(h)return i(u).call(c,s)}else if(n.isObject(s)){for(var p=r(f),d=0;d<p.length;++d){var v=p[d];if(f[v]!=s[v])continue t}return i(u).call(c,s)}}return e}}}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){var e=!1,n=[];function r(){this._trace=new r.CapturedTrace(i())}function i(){var t=n.length-1;if(t>=0)return n[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var t=n.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},r.CapturedTrace=null,r.create=function(){if(e)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,u=t._peekContext,a=t.prototype._peekContext,s=t.prototype._promiseCreated;r.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=u,t.prototype._peekContext=a,t.prototype._promiseCreated=s,e=!1},e=!0,t.prototype._pushContext=r.prototype._pushContext,t.prototype._popContext=r.prototype._popContext,t._peekContext=t.prototype._peekContext=i,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},r}},{}],9:[function(t,n,r){"use strict";n.exports=function(n,r){var i,o,u,a=n._getDomain,s=n._async,c=t("./errors").Warning,l=t("./util"),f=t("./es5"),h=l.canAttachTrace,p=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,d=/\((?:timers\.js):\d+:\d+\)/,v=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,_=null,g=null,m=!1,y=!(0==l.env("BLUEBIRD_DEBUG")),b=!(0==l.env("BLUEBIRD_WARNINGS")||!y&&!l.env("BLUEBIRD_WARNINGS")),w=!(0==l.env("BLUEBIRD_LONG_STACK_TRACES")||!y&&!l.env("BLUEBIRD_LONG_STACK_TRACES")),x=0!=l.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(b||!!l.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout((function(){t._notifyUnhandledRejection()}),1)}},n.prototype._notifyUnhandledRejectionIsHandled=function(){q("rejectionHandled",i,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),q("unhandledRejection",o,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return z(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=a();o="function"==typeof t?null===e?t:l.domainBind(e,t):void 0},n.onUnhandledRejectionHandled=function(t){var e=a();i="function"==typeof t?null===e?t:l.domainBind(e,t):void 0};var S=function(){};n.longStackTraces=function(){if(s.haveItemsQueued()&&!Z.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Z.longStackTraces&&G()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace,i=n.prototype._dereferenceTrace;Z.longStackTraces=!0,S=function(){if(s.haveItemsQueued()&&!Z.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,n.prototype._dereferenceTrace=i,r.deactivateLongStackTraces(),s.enableTrampoline(),Z.longStackTraces=!1},n.prototype._captureStackTrace=D,n.prototype._attachExtraTrace=N,n.prototype._dereferenceTrace=U,r.activateLongStackTraces(),s.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return Z.longStackTraces&&G()};var E=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return l.global.dispatchEvent(t),function(t,e){var n={detail:e,cancelable:!0};f.defineProperty(n,"promise",{value:e.promise}),f.defineProperty(n,"reason",{value:e.reason});var r=new CustomEvent(t.toLowerCase(),n);return!l.global.dispatchEvent(r)}}return"function"==typeof Event?(t=new Event("CustomEvent"),l.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,f.defineProperty(n,"promise",{value:e.promise}),f.defineProperty(n,"reason",{value:e.reason}),!l.global.dispatchEvent(n)}):((t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),l.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!l.global.dispatchEvent(n)})}catch(t){}return function(){return!1}}(),k=l.isNode?function(){return e.emit.apply(e,arguments)}:l.global?function(t){var e="on"+t.toLowerCase(),n=l.global[e];return!!n&&(n.apply(l.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function j(t,e){return{promise:e}}var A={promiseCreated:j,promiseFulfilled:j,promiseRejected:j,promiseResolved:j,promiseCancelled:j,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:j},C=function(t){var e=!1;try{e=k.apply(null,arguments)}catch(t){s.throwLater(t),e=!0}var n=!1;try{n=E(t,A[t].apply(null,arguments))}catch(t){s.throwLater(t),n=!0}return n||e};function O(){return!1}function T(t,e,n){var r=this;try{t(e,n,(function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+l.toString(t));r._attachCancellationCallback(t)}))}catch(t){return t}}function P(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?l.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function F(){return this._onCancelField}function M(t){this._onCancelField=t}function I(){this._cancellationParent=void 0,this._onCancelField=void 0}function B(t,e){if(0!=(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}n.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&S()),"warnings"in t){var e=t.warnings;Z.warnings=!!e,x=Z.warnings,l.isObject(e)&&"wForgottenReturn"in e&&(x=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!Z.cancellation){if(s.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=I,n.prototype._propagateFrom=B,n.prototype._onCancel=F,n.prototype._setOnCancel=M,n.prototype._attachCancellationCallback=P,n.prototype._execute=T,R=B,Z.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!Z.monitoring?(Z.monitoring=!0,n.prototype._fireEvent=C):!t.monitoring&&Z.monitoring&&(Z.monitoring=!1,n.prototype._fireEvent=O)),n},n.prototype._fireEvent=O,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._dereferenceTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var R=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function L(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function D(){this._trace=new X(this._peekContext())}function N(t,e){if(h(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=V(t);l.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),l.notEnumerableProp(t,"__stackCleaned__",!0)}}}function U(){this._trace=void 0}function z(t,e,r){if(Z.warnings){var i,o=new c(t);if(e)r._attachExtraTrace(o);else if(Z.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var u=V(o);o.stack=u.message+"\n"+u.stack.join("\n")}C("warning",o)||H(o,"",!0)}}function W(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||_.test(r),o=i&&K(r);i&&!o&&(m&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function V(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||_.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:W(e)}}function H(t,e,n){if("undefined"!=typeof console){var r;if(l.isObject(t)){var i=t.stack;r=e+g(i,t)}else r=e+String(t);"function"==typeof u?u(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function q(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){s.throwLater(t)}"unhandledRejection"===t?C(t,n,r)||i||H(n,"Unhandled rejection "):C(t,r)}function $(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{if(e=t&&"function"==typeof t.toString?t.toString():l.toString(t),/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){return t.length<41?t:t.substr(0,38)+"..."}(e)+">, no stack trace)"}function G(){return"function"==typeof Y}var K=function(){return!1},J=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Q(t){var e=t.match(J);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function X(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);Y(this,X),e>32&&this.uncycle()}l.inherits(X,Error),r.CapturedTrace=X,X.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;for(r=(t=this._length=r)-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<t;++r){var u=n[e[r].stack];if(void 0!==u&&u!==r){u>0&&(e[u-1]._parent=void 0,e[u-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var a=r>0?e[r-1]:this;u<t-1?(a._parent=e[u+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var s=a._length+1,c=r-2;c>=0;--c)e[c]._length=s,s++;return}}}},X.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=V(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(W(i.stack.split("\n"))),i=i._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],u=-1,a=r.length-1;a>=0;--a)if(r[a]===o){u=a;break}for(a=u;a>=0;--a){var s=r[a];if(e[i]!==s)break;e.pop(),i--}e=r}}(r),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(r),l.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}(n,r)),l.notEnumerableProp(t,"__stackCleaned__",!0)}};var Y=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():$(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,_=t,g=e;var n=Error.captureStackTrace;return K=function(t){return p.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return _=/@/,g=e,m=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){r="stack"in t}return!("stack"in i)&&r&&"number"==typeof Error.stackTraceLimit?(_=t,g=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6}):(g=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?$(e):e.toString()},null)}();"undefined"!=typeof console&&void 0!==console.warn&&(u=function(t){console.warn(t)},l.isNode&&e.stderr.isTTY?u=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:l.isNode||"string"!=typeof(new Error).stack||(u=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var Z={warnings:b,longStackTraces:!1,cancellation:!1,monitoring:!1};return w&&n.longStackTraces(),{longStackTraces:function(){return Z.longStackTraces},warnings:function(){return Z.warnings},cancellation:function(){return Z.cancellation},monitoring:function(){return Z.monitoring},propagateFromFunction:function(){return R},boundValueFunction:function(){return L},checkForgottenReturns:function(t,e,n,r,i){if(void 0===t&&null!==e&&x){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",u="";if(e._trace){for(var a=e._trace.stack.split("\n"),s=W(a),c=s.length-1;c>=0;--c){var l=s[c];if(!d.test(l)){var f=l.match(v);f&&(o="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(s.length>0){var h=s[0];for(c=0;c<a.length;++c)if(a[c]===h){c>0&&(u="\n"+a[c-1]);break}}}var p="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+u;r._warn(p,!0,e)}},setBounds:function(t,e){if(G()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),u=-1,a=-1,s=0;s<i.length;++s)if(c=Q(i[s])){n=c.fileName,u=c.line;break}for(s=0;s<o.length;++s){var c;if(c=Q(o[s])){r=c.fileName,a=c.line;break}}u<0||a<0||!n||!r||n!==r||u>=a||(K=function(t){if(p.test(t))return!0;var e=Q(t);return!!(e&&e.fileName===n&&u<=e.line&&e.line<=a)})}},warn:z,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),z(n)},CapturedTrace:X,fireDomEvent:E,fireGlobalEvent:k}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.reduce,r=t.all;function i(){return r(this)}t.prototype.each=function(t){return n(this,t,e,0)._then(i,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return n(this,t,e,e)},t.each=function(t,r){return n(t,r,e,0)._then(i,void 0,void 0,t,void 0)},t.mapSeries=function(t,r){return n(t,r,e,e)}}},{}],12:[function(t,e,n){"use strict";var r,i,o=t("./es5"),u=o.freeze,a=t("./util"),s=a.inherits,c=a.notEnumerableProp;function l(t,e){function n(r){if(!(this instanceof n))return new n(r);c(this,"message","string"==typeof r?r:e),c(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return s(n,Error),n}var f=l("Warning","warning"),h=l("CancellationError","cancellation error"),p=l("TimeoutError","timeout error"),d=l("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(t){r=l("TypeError","type error"),i=l("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),_=0;_<v.length;++_)"function"==typeof Array.prototype[v[_]]&&(d.prototype[v[_]]=Array.prototype[v[_]]);o.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var g=0;function m(t){if(!(this instanceof m))return new m(t);c(this,"name","OperationalError"),c(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(c(this,"message",t.message),c(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}d.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\n"+t+"AggregateError of:\n";g++,t=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];e+=(r=i.join("\n"))+"\n"}return g--,e},s(m,Error);var y=Error.__BluebirdErrorTypes__;y||(y=u({CancellationError:h,TimeoutError:p,OperationalError:m,RejectionError:m,AggregateError:d}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:y,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:y.CancellationError,OperationalError:y.OperationalError,TimeoutError:y.TimeoutError,AggregateError:y.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,u={}.constructor.prototype,a=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}},keys:a,names:a,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return u}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=e.CancellationError,u=i.errorObj,a=t("./catch_filter")(r);function s(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function c(t){this.finallyHandler=t}function l(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function f(){return p.call(this,this.promise._target()._settledValue())}function h(t){if(!l(this,t))return u.e=t,u}function p(t){var i=this.promise,a=this.handler;if(!this.called){this.called=!0;var s=this.isFinallyHandler()?a.call(i._boundValue()):a.call(i._boundValue(),t);if(s===r)return s;if(void 0!==s){i._setReturnedNonUndefined();var p=n(s,i);if(p instanceof e){if(null!=this.cancelPromise){if(p._isCancelled()){var d=new o("late cancellation observer");return i._attachExtraTrace(d),u.e=d,u}p.isPending()&&p._attachCancellationCallback(new c(this))}return p._then(f,h,void 0,this,void 0)}}}return i.isRejected()?(l(this),u.e=t,u):(l(this),t)}return s.prototype.isFinallyHandler=function(){return 0===this.type},c.prototype._resultCancelled=function(){l(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,new s(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,p,p)},e.prototype.tap=function(t){return this._passThrough(t,1,p)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,p);var r,o=new Array(n-1),u=0;for(r=0;r<n-1;++r){var s=arguments[r];if(!i.isObject(s))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(s)));o[u++]=s}o.length=u;var c=arguments[r];return this._passThrough(a(o,c,this),1,void 0,p)},s}},{"./catch_filter":7,"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,u){var a=t("./errors").TypeError,s=t("./util"),c=s.errorObj,l=s.tryCatch,f=[];function h(t,n,i,o){if(u.cancellation()){var a=new e(r),s=this._finallyPromise=new e(r);this._promise=a.lastly((function(){return s})),a._captureStackTrace(),a._setOnCancel(this)}else(this._promise=new e(r))._captureStackTrace();this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}s.inherits(h,o),h.prototype._isResolved=function(){return null===this._promise},h.prototype._cleanup=function(){this._promise=this._generator=null,u.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},h.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=l(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),t=l(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},h.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=l(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},h.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=l(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},h.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},h.prototype.promise=function(){return this._promise},h.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},h.prototype._continue=function(t){var n=this._promise;if(t===c)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof e||null!==(o=function(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var u=l(n[o])(t);if(r._popContext(),u===c){r._pushContext();var a=e.reject(c.e);return r._popContext(),a}var s=i(u,r);if(s instanceof e)return s}return null}(o,this._yieldHandlers,this._promise))){var u=(o=o._target())._bitField;0==(50397184&u)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&u)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&u)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(t,e){if("function"!=typeof t)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=h,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),u=o.promise();return o._generator=e,o._promiseFulfilled(void 0),u}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new a("expecting a function but got "+s.classString(t));f.push(t)},e.spawn=function(t){if(u.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new h(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,u){var a=t("./util");a.canEvaluate,a.tryCatch,a.errorObj,e.join=function(){var t,e=arguments.length-1;e>0&&"function"==typeof arguments[e]&&(t=arguments[e]);var r=[].slice.call(arguments);t&&r.pop();var i=new n(r).promise();return void 0!==t?i.spread(t):i}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,u){var a=e._getDomain,s=t("./util"),c=s.tryCatch,l=s.errorObj,f=e._async;function h(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=a();this._callback=null===i?e:s.domainBind(i,e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],f.invoke(this._asyncInit,this,void 0)}function p(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+s.classString(n));var u=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+s.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+s.classString(i.concurrency)));u=i.concurrency}return new h(t,n,u="number"==typeof u&&isFinite(u)&&u>=1?u:0,o).promise()}s.inherits(h,n),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),a=this._preservedValues,s=this._limit;if(n<0){if(r[n=-1*n-1]=t,s>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(s>=1&&this._inFlight>=s)return r[n]=t,this._queue.push(n),!1;null!==a&&(a[n]=t);var f=this._promise,h=this._callback,p=f._boundValue();f._pushContext();var d=c(h).call(p,t,n,o),v=f._popContext();if(u.checkForgottenReturns(d,v,null!==a?"Promise.filter":"Promise.map",f),d===l)return this._reject(d.e),!0;var _=i(d,this._promise);if(_ instanceof e){var g=(_=_._target())._bitField;if(0==(50397184&g))return s>=1&&this._inFlight++,r[n]=_,_._proxy(this,-1*(n+1)),!1;if(0==(33554432&g))return 0!=(16777216&g)?(this._reject(_._reason()),!0):(this._cancel(),!0);d=_._value()}r[n]=d}return++this._totalResolved>=o&&(null!==a?this._filter(r,a):this._resolve(r),!0)},h.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},h.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},h.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return p(this,t,e,null)},e.map=function(t,e,n,r){return p(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var u=t("./util"),a=u.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+u.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=a(t).apply(this,arguments),u=r._popContext();return o.checkForgottenReturns(i,u,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e.try=function(t){if("function"!=typeof t)return i("expecting a function but got "+u.classString(t));var r,s=new e(n);if(s._captureStackTrace(),s._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];r=u.isArray(c)?a(t).apply(l,c):a(t).call(l,c)}else r=a(t)();var f=s._popContext();return o.checkForgottenReturns(r,f,"Promise.try",s),s._resolveFromSyncValue(r),s},e.prototype._resolveFromSyncValue=function(t){t===u.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";var r=t("./util"),i=r.maybeWrapAsError,o=t("./errors").OperationalError,u=t("./es5"),a=/^(?:name|message|stack|cause)$/;function s(t){var e;if(function(t){return t instanceof Error&&u.getPrototypeOf(t)===Error.prototype}(t)){(e=new o(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=u.keys(t),i=0;i<n.length;++i){var s=n[i];a.test(s)||(e[s]=t[s])}return e}return r.markAsOriginatingFromRejection(t),t}e.exports=function(t,e){return function(n,r){if(null!==t){if(n){var o=s(i(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var u=[].slice.call(arguments,1);t._fulfill(u)}else t._fulfill(r);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=e._async,i=n.tryCatch,o=n.errorObj;function u(t,e){if(!n.isArray(t))return a.call(this,t,e);var u=i(e).apply(this._boundValue(),[null].concat(t));u===o&&r.throwLater(u.e)}function a(t,e){var n=this._boundValue(),u=void 0===t?i(e).call(n,null):i(e).call(n,null,t);u===o&&r.throwLater(u.e)}function s(t,e){if(!t){var n=new Error(t+"");n.cause=t,t=n}var u=i(e).call(this._boundValue(),t);u===o&&r.throwLater(u.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var n=a;void 0!==e&&Object(e).spread&&(n=u),this._then(n,s,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,n,r){"use strict";n.exports=function(){var r=function(){return new d("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new O.PromiseInspection(this._target())},o=function(t){return O.reject(new d(t))};function u(){}var a,s={},c=t("./util");a=c.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},c.notEnumerableProp(O,"_getDomain",a);var l=t("./es5"),f=t("./async"),h=new f;l.defineProperty(O,"_async",{value:h});var p=t("./errors"),d=O.TypeError=p.TypeError;O.RangeError=p.RangeError;var v=O.CancellationError=p.CancellationError;O.TimeoutError=p.TimeoutError,O.OperationalError=p.OperationalError,O.RejectionError=p.OperationalError,O.AggregateError=p.AggregateError;var _=function(){},g={},m={},y=t("./thenables")(O,_),b=t("./promise_array")(O,_,y,o,u),w=t("./context")(O),x=w.create,S=t("./debuggability")(O,w),E=(S.CapturedTrace,t("./finally")(O,y,m)),k=t("./catch_filter")(m),j=t("./nodeback"),A=c.errorObj,C=c.tryCatch;function O(t){t!==_&&function(t,e){if(null==t||t.constructor!==O)throw new d("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new d("expecting a function but got "+c.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function T(t){this.promise._resolveCallback(t)}function P(t){this.promise._rejectCallback(t,!1)}function F(t){var e=new O(_);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return O.prototype.toString=function(){return"[object Promise]"},O.prototype.caught=O.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var u=arguments[n];if(!c.isObject(u))return o("Catch statement predicate: expecting an object but got "+c.classString(u));r[i++]=u}return r.length=i,t=arguments[n],this.then(void 0,k(r,t,this))}return this.then(void 0,t)},O.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},O.prototype.then=function(t,e){if(S.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+c.classString(t);arguments.length>1&&(n+=", "+c.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},O.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},O.prototype.spread=function(t){return"function"!=typeof t?o("expecting a function but got "+c.classString(t)):this.all()._then(t,void 0,void 0,g,void 0)},O.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},O.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new b(this).promise()},O.prototype.error=function(t){return this.caught(c.originatesFromRejection,t)},O.getNewLibraryCopy=n.exports,O.is=function(t){return t instanceof O},O.fromNode=O.fromCallback=function(t){var e=new O(_);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=C(t)(j(e,n));return r===A&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},O.all=function(t){return new b(t).promise()},O.cast=function(t){var e=y(t);return e instanceof O||((e=new O(_))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},O.resolve=O.fulfilled=O.cast,O.reject=O.rejected=function(t){var e=new O(_);return e._captureStackTrace(),e._rejectCallback(t,!0),e},O.setScheduler=function(t){if("function"!=typeof t)throw new d("expecting a function but got "+c.classString(t));return h.setScheduler(t)},O.prototype._then=function(t,e,n,r,i){var o=void 0!==i,u=o?i:new O(_),s=this._target(),l=s._bitField;o||(u._propagateFrom(this,3),u._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():s===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,u));var f=a();if(0!=(50397184&l)){var p,d,g=s._settlePromiseCtx;0!=(33554432&l)?(d=s._rejectionHandler0,p=t):0!=(16777216&l)?(d=s._fulfillmentHandler0,p=e,s._unsetRejectionIsUnhandled()):(g=s._settlePromiseLateCancellationObserver,d=new v("late cancellation observer"),s._attachExtraTrace(d),p=e),h.invoke(g,s,{handler:null===f?p:"function"==typeof p&&c.domainBind(f,p),promise:u,receiver:r,value:d})}else s._addCallbacks(t,e,u,r,f);return u},O.prototype._length=function(){return 65535&this._bitField},O.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},O.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},O.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},O.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},O.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},O.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},O.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},O.prototype._isFinal=function(){return(4194304&this._bitField)>0},O.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},O.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},O.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},O.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},O.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==s)return void 0===e&&this._isBound()?this._boundValue():e},O.prototype._promiseAt=function(t){return this[4*t-4+2]},O.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},O.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},O.prototype._boundValue=function(){},O.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=s),this._addCallbacks(e,n,r,i,null)},O.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=s),this._addCallbacks(n,r,i,o,null)},O.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:c.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:c.domainBind(i,e));else{var u=4*o-4;this[u+2]=n,this[u+3]=r,"function"==typeof t&&(this[u+0]=null===i?t:c.domainBind(i,t)),"function"==typeof e&&(this[u+1]=null===i?e:c.domainBind(i,e))}return this._setLength(o+1),o},O.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},O.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(r(),!1);var n=y(t,this);if(!(n instanceof O))return this._fulfill(t);e&&this._propagateFrom(n,2);var i=n._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var u=this._length();u>0&&i._migrateCallback0(this);for(var a=1;a<u;++a)i._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var s=new v("late cancellation observer");i._attachExtraTrace(s),this._reject(s)}}else this._reject(r())}},O.prototype._rejectCallback=function(t,e,n){var r=c.ensureErrorObject(t),i=r===t;if(!i&&!n&&S.warnings()){var o="a promise was rejected with a non-error: "+c.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},O.prototype._resolveFromExecutor=function(t){if(t!==_){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,(function(t){e._resolveCallback(t)}),(function(t){e._rejectCallback(t,n)}));n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},O.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),e===g?n&&"number"==typeof n.length?o=C(t).apply(this._boundValue(),n):(o=A).e=new d("cannot .spread() a non-array: "+c.classString(n)):o=C(t).call(e,n);var u=r._popContext();0==(65536&(i=r._bitField))&&(o===m?r._reject(n):o===A?r._rejectCallback(o.e,!1):(S.checkForgottenReturns(o,u,"",r,this),r._resolveCallback(o)))}},O.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},O.prototype._followee=function(){return this._rejectionHandler0},O.prototype._setFollowee=function(t){this._rejectionHandler0=t},O.prototype._settlePromise=function(t,e,n,r){var o=t instanceof O,a=this._bitField,s=0!=(134217728&a);0!=(65536&a)?(o&&t._invokeInternalOnCancel(),n instanceof E&&n.isFinallyHandler()?(n.cancelPromise=t,C(e).call(n,r)===A&&t._reject(A.e)):e===i?t._fulfill(i.call(n)):n instanceof u?n._promiseCancelled(t):o||t instanceof b?t._cancel():n.cancel()):"function"==typeof e?o?(s&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,r,t)):e.call(n,r,t):n instanceof u?n._isResolved()||(0!=(33554432&a)?n._promiseFulfilled(r,t):n._promiseRejected(r,t)):o&&(s&&t._setAsyncGuaranteed(),0!=(33554432&a)?t._fulfill(r):t._reject(r))},O.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,i=t.value;"function"==typeof e?n instanceof O?this._settlePromiseFromHandler(e,r,i,n):e.call(r,i,n):n instanceof O&&n._reject(i)},O.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},O.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},O.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},O.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=r();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():h.settlePromises(this),this._dereferenceTrace())}},O.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return h.fatalError(t,c.isNode);(65535&e)>0?h.settlePromises(this):this._ensurePossibleRejectionHandled()}},O.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},O.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},O.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},O.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},O.defer=O.pending=function(){return S.deprecated("Promise.defer","new Promise"),{promise:new O(_),resolve:T,reject:P}},c.notEnumerableProp(O,"_makeSelfResolutionError",r),t("./method")(O,_,y,o,S),t("./bind")(O,_,y,S),t("./cancel")(O,b,o,S),t("./direct_resolve")(O),t("./synchronous_inspection")(O),t("./join")(O,b,y,_,h,a),O.Promise=O,O.version="3.5.2",t("./map.js")(O,b,o,y,_,S),t("./call_get.js")(O),t("./using.js")(O,o,y,x,_,S),t("./timers.js")(O,_,S),t("./generators.js")(O,o,_,y,u,S),t("./nodeify.js")(O),t("./promisify.js")(O,_),t("./props.js")(O,b,y,o),t("./race.js")(O,_,y,o),t("./reduce.js")(O,b,o,y,_,S),t("./settle.js")(O,b,S),t("./some.js")(O,b,o),t("./filter.js")(O,_),t("./each.js")(O,_),t("./any.js")(O),c.toFastProperties(O),c.toFastProperties(O.prototype),F({a:1}),F({b:2}),F({c:3}),F(1),F((function(){})),F(void 0),F(!1),F(new O(_)),S.setBounds(f.firstLineError,c.lastLineError),O}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var u=t("./util");function a(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return u.isArray,u.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function t(n,o){var a=r(this._values,this._promise);if(a instanceof e){var s=(a=a._target())._bitField;if(this._values=a,0==(50397184&s))return this._promise._setAsyncGuaranteed(),a._then(t,this._reject,void 0,this,o);if(0==(33554432&s))return 0!=(16777216&s)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=u.asArray(a)))0!==a.length?this._iterate(a):-5===o?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(o));else{var c=i("expecting an array or an iterable object but got "+u.classString(a)).reason();this._promise._rejectCallback(c,!1)}},a.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,u=null,a=0;a<n;++a){var s=r(t[a],i);u=s instanceof e?(s=s._target())._bitField:null,o?null!==u&&s.suppressUnhandledRejections():null!==u?0==(50397184&u)?(s._proxy(this,a),this._values[a]=s):o=0!=(33554432&u)?this._promiseFulfilled(s._value(),a):0!=(16777216&u)?this._promiseRejected(s._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(s,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){var r={},i=t("./util"),o=t("./nodeback"),u=i.withAppended,a=i.maybeWrapAsError,s=i.canEvaluate,c=t("./errors").TypeError,l={__isPromisified__:!0},f=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),h=function(t){return i.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function p(t){return!f.test(t)}function d(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function v(t,e,n){var r=i.getDataPropertyOrDefault(t,e+n,l);return!!r&&d(r)}function _(t,e,n,r){for(var o=i.inheritedDataKeys(t),u=[],a=0;a<o.length;++a){var s=o[a],l=t[s],f=r===h||h(s);"function"!=typeof l||d(l)||v(t,s,e)||!r(s,l,t,f)||u.push(s,l)}return function(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),u=0;u<t.length;u+=2)if(t[u]===o)throw new c("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(u,e,n),u}var g=s?void 0:function(t,s,c,l,f,h){var p=function(){return this}(),d=t;function v(){var i=s;s===r&&(i=this);var c=new e(n);c._captureStackTrace();var l="string"==typeof d&&this!==p?this[d]:t,f=o(c,h);try{l.apply(i,u(arguments,f))}catch(t){c._rejectCallback(a(t),!0,!0)}return c._isFateSealed()||c._setAsyncGuaranteed(),c}return"string"==typeof d&&(t=l),i.notEnumerableProp(v,"__isPromisified__",!0),v};function m(t,e,n,o,u){for(var a=new RegExp(e.replace(/([$])/,"\\$")+"$"),s=_(t,e,a,n),c=0,l=s.length;c<l;c+=2){var f=s[c],h=s[c+1],p=f+e;if(o===g)t[p]=g(f,r,f,h,e,u);else{var d=o(h,(function(){return g(f,r,f,h,e,u)}));i.notEnumerableProp(d,"__isPromisified__",!0),t[p]=d}}return i.toFastProperties(t),t}e.promisify=function(t,e){if("function"!=typeof t)throw new c("expecting a function but got "+i.classString(t));if(d(t))return t;var n=function(t,e,n){return g(t,e,void 0,t,null,n)}(t,void 0===(e=Object(e)).context?r:e.context,!!e.multiArgs);return i.copyDescriptors(t,n,p),n},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new c("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(e=Object(e)).multiArgs,r=e.suffix;"string"!=typeof r&&(r="Async");var o=e.filter;"function"!=typeof o&&(o=h);var u=e.promisifier;if("function"!=typeof u&&(u=g),!i.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=i.inheritedDataKeys(t),s=0;s<a.length;++s){var l=t[a[s]];"constructor"!==a[s]&&i.isClass(l)&&(m(l.prototype,r,o,u,n),m(l,r,o,u,n))}return m(t,r,o,u,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o,u=t("./util"),a=u.isObject,s=t("./es5");"function"==typeof Map&&(o=Map);var c=function(){var t=0,e=0;function n(n,r){this[t]=n,this[t+e]=r,t++}return function(r){e=r.size,t=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function l(t){var e,n=!1;if(void 0!==o&&t instanceof o)e=c(t),n=!0;else{var r=s.keys(t),i=r.length;e=new Array(2*i);for(var u=0;u<i;++u){var a=r[u];e[u]=t[a],e[u+i]=a}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function f(t){var n,o=r(t);return a(o)?(n=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new l(o).promise(),o instanceof e&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}u.inherits(l,n),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(t){for(var e=new o,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],u=t[r];e.set(i,u)}return e}(this._values);else{n={};for(var r=this.length(),i=0,u=this.length();i<u;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return f(this)},e.props=function(t){return f(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},r.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=r},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util");function u(t,a){var s,c=r(t);if(c instanceof e)return(s=c).then((function(t){return u(t,s)}));if(null===(t=o.asArray(t)))return i("expecting an array or an iterable object but got "+o.classString(t));var l=new e(n);void 0!==a&&l._propagateFrom(a,3);for(var f=l._fulfill,h=l._reject,p=0,d=t.length;p<d;++p){var v=t[p];(void 0!==v||p in t)&&e.cast(v)._then(f,h,void 0,l,null)}return l}e.race=function(t){return u(t,void 0)},e.prototype.race=function(){return u(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,u){var a=e._getDomain,s=t("./util"),c=s.tryCatch;function l(t,n,r,i){this.constructor$(t);var u=a();this._fn=null===u?n:s.domainBind(u,n),void 0!==r&&(r=e.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function f(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function h(t,e,n,i){return"function"!=typeof e?r("expecting a function but got "+s.classString(e)):new l(t,e,n,i).promise()}function p(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(d,void 0,void 0,this,void 0)):d.call(this,n)}function d(t){var n,r=this.array,i=r._promise,o=c(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),t,this.index,this.length):o.call(i._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(r._currentCancellable=n);var a=i._popContext();return u.checkForgottenReturns(n,a,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}s.inherits(l,n),l.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},l.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},l.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},l.prototype._iterate=function(t){var n,r;this._values=t;var i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(p,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(f,f,void 0,n,this)},e.prototype.reduce=function(t,e){return h(this,t,e,null)},e.reduce=function(t,e,n,r){return h(t,e,n,r)}}},{"./util":36}],29:[function(t,i,o){"use strict";var u,a,s,c,l,f=t("./util"),h=f.getNativePromise();if(f.isNode&&"undefined"==typeof MutationObserver){var p=n.setImmediate,d=e.nextTick;u=f.isRecentNode?function(t){p.call(n,t)}:function(t){d.call(e,t)}}else if("function"==typeof h&&"function"==typeof h.resolve){var v=h.resolve();u=function(t){v.then(t)}}else u="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==r?function(t){r(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(a=document.createElement("div"),s={attributes:!0},c=!1,l=document.createElement("div"),new MutationObserver((function(){a.classList.toggle("foo"),c=!1})).observe(l,s),function(t){var e=new MutationObserver((function(){e.disconnect(),t()}));e.observe(a,s),c||(c=!0,l.classList.toggle("foo"))});i.exports=u},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=e.PromiseInspection;function o(t){this.constructor$(t)}t("./util").inherits(o,n),o.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(t,e){var n=new i;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},o.prototype._promiseRejected=function(t,e){var n=new i;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new o(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=t("./errors").RangeError,u=t("./errors").AggregateError,a=i.isArray,s={};function c(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new c(t),i=n.promise();return n.setHowMany(e),n.init(),i}i.inherits(c,n),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=a(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(t){this._howMany=t},c.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(s),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new u,e=this.length();e<this._values.length;++e)this._values[e]!==s&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(t){this._values.push(t)},c.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new o(e)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return l(t,e)},e.prototype.some=function(t){return l(this,t)},e._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},u=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return u.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){var r=t("./util"),i=r.errorObj,o=r.isObject,u={}.hasOwnProperty;return function(t,a){if(o(t)){if(t instanceof e)return t;var s=function(t){try{return function(t){return t.then}(t)}catch(t){return i.e=t,i}}(t);if(s===i){a&&a._pushContext();var c=e.reject(s.e);return a&&a._popContext(),c}if("function"==typeof s)return function(t){try{return u.call(t,"_promise0")}catch(t){return!1}}(t)?(c=new e(n),t._then(c._fulfill,c._reject,void 0,c,null),c):function(t,o,u){var a=new e(n),s=a;u&&u._pushContext(),a._captureStackTrace(),u&&u._popContext();var c=r.tryCatch(o).call(t,(function(t){a&&(a._resolveCallback(t),a=null)}),(function(t){a&&(a._rejectCallback(t,!1,!0),a=null)}));return a&&c===i&&(a._rejectCallback(c.e,!0,!0),a=null),s}(t,s,a)}return t}}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=e.TimeoutError;function u(t){this.handle=t}u.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(t){return s(+this).thenReturn(t)},s=e.delay=function(t,i){var o,s;return void 0!==i?(o=e.resolve(i)._then(a,null,null,t,void 0),r.cancellation()&&i instanceof e&&o._setOnCancel(i)):(o=new e(n),s=setTimeout((function(){o._fulfill()}),+t),r.cancellation()&&o._setOnCancel(new u(s)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};function c(t){return clearTimeout(this.handle),t}function l(t){throw clearTimeout(this.handle),t}e.prototype.delay=function(t){return s(t,this)},e.prototype.timeout=function(t,e){var n,a;t=+t;var s=new u(setTimeout((function(){n.isPending()&&function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new o("operation timed out"):new o(e),i.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()}(n,e,a)}),t));return r.cancellation()?(a=this.then(),(n=a._then(c,l,void 0,s,void 0))._setOnCancel(s)):n=this._then(c,l,void 0,s,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,u){var a=t("./util"),s=t("./errors").TypeError,c=t("./util").inherits,l=a.errorObj,f=a.tryCatch,h={};function p(t){setTimeout((function(){throw t}),0)}function d(t,n){var i=0,u=t.length,a=new e(o);return function o(){if(i>=u)return a._fulfill();var s=function(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[i++]);if(s instanceof e&&s._isDisposable()){try{s=r(s._getDisposer().tryDispose(n),t.promise)}catch(t){return p(t)}if(s instanceof e)return s._then(o,p,null,null,null)}o()}(),a}function v(t,e,n){this._data=t,this._promise=e,this._context=n}function _(t,e,n){this.constructor$(t,e,n)}function g(t){return v.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function m(t){this.length=t,this.promise=null,this[t-1]=null}v.prototype.data=function(){return this._data},v.prototype.promise=function(){return this._promise},v.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():h},v.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==h?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},v.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},c(_,v),_.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},m.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var i,o=arguments[t-1];if("function"!=typeof o)return n("expecting a function but got "+a.classString(o));var s=!0;2===t&&Array.isArray(arguments[0])?(t=(i=arguments[0]).length,s=!1):(i=arguments,t--);for(var c=new m(t),h=0;h<t;++h){var p=i[h];if(v.isDisposer(p)){var _=p;(p=p.promise())._setDisposable(_)}else{var y=r(p);y instanceof e&&(p=y._then(g,null,null,{resources:c,index:h},void 0))}c[h]=p}var b=new Array(c.length);for(h=0;h<b.length;++h)b[h]=e.resolve(c[h]).reflect();var w=e.all(b).then((function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return l.e=n.error(),l;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}x._pushContext(),o=f(o);var r=s?o.apply(void 0,t):o(t),i=x._popContext();return u.checkForgottenReturns(r,i,"Promise.using",x),r})),x=w.lastly((function(){var t=new e.PromiseInspection(w);return d(c,t)}));return c.promise=x,x._setOnCancel(c),x},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new _(t,this,i());throw new s}}},{"./errors":12,"./util":36}],36:[function(t,r,i){"use strict";var o=t("./es5"),u="undefined"==typeof navigator,a={e:{}},s,c="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null;function l(){try{var t=s;return s=null,t.apply(this,arguments)}catch(t){return a.e=t,a}}function f(t){return s=t,l}var h=function(t,e){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=t,this.constructor$=e,e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}return r.prototype=e.prototype,t.prototype=new r,t.prototype};function p(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function d(t){return"function"==typeof t||"object"==typeof t&&null!==t}function v(t){return p(t)?new Error(A(t)):t}function _(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function g(t,e,n){if(!o.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function m(t,e,n){if(p(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(t,e,r),t}function y(t){throw t}var b=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(o.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var u;try{u=n(t)}catch(t){return r}for(var a=0;a<u.length;++a){var s=u[a];if(!i[s]){i[s]=!0;var c=Object.getOwnPropertyDescriptor(t,s);null!=c&&null==c.get&&null==c.set&&r.push(s)}}t=o.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var u=0;u<t.length;++u)if(r.call(t[u],o))continue t;i.push(o)}return i}}(),w=/this\s*\.\s*\S+\s*=/;function x(t){try{if("function"==typeof t){var e=o.names(t.prototype),n=o.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=w.test(t+"")&&o.names(t).length>0;if(n||r||i)return!0}return!1}catch(t){return!1}}function S(t){function e(){}e.prototype=t;var n=new e;function r(){return typeof n.foo}return r(),r(),t}var E=/^[a-z$_][a-z$_0-9]*$/i;function k(t){return E.test(t)}function j(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function A(t){try{return t+""}catch(t){return"[no string representation]"}}function C(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function O(t){try{m(t,"isOperational",!0)}catch(t){}}function T(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function P(t){return C(t)&&o.propertyIsWritable(t,"stack")}var F="stack"in new Error?function(t){return P(t)?t:new Error(A(t))}:function(t){if(P(t))return t;try{throw new Error(A(t))}catch(t){return t}};function M(t){return{}.toString.call(t)}function I(t,e,n){for(var r=o.names(t),i=0;i<r.length;++i){var u=r[i];if(n(u))try{o.defineProperty(e,u,o.getDescriptor(t,u))}catch(t){}}}var B=function(t){return o.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var R="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};B=function(t){return o.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?R(t):null}}var L=void 0!==e&&"[object process]"===M(e).toLowerCase(),D=void 0!==e&&void 0!==e.env;function N(t){return D?e.env[t]:void 0}function U(){if("function"==typeof Promise)try{var t=new Promise((function(){}));if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function z(t,e){return t.bind(e)}var W={isClass:x,isIdentifier:k,inheritedDataKeys:b,getDataPropertyOrDefault:g,thrower:y,isArray:o.isArray,asArray:B,notEnumerableProp:m,isPrimitive:p,isObject:d,isError:C,canEvaluate:u,errorObj:a,tryCatch:f,inherits:h,withAppended:_,maybeWrapAsError:v,toFastProperties:S,filledRange:j,toString:A,canAttachTrace:P,ensureErrorObject:F,originatesFromRejection:T,markAsOriginatingFromRejection:O,classString:M,copyDescriptors:I,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:L,hasEnvVariables:D,env:N,global:c,getNativePromise:U,domainBind:z},V;W.isRecentNode=W.isNode&&(V=e.versions.node.split(".").map(Number),0===V[0]&&V[1]>10||V[0]>0),W.isNode&&W.toFastProperties(e);try{throw new Error}catch(t){W.lastLineError=t}r.exports=W},{"./es5":13}]},{},[4])(4)},t.exports=i(),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,n(40),n(30),n(182).setImmediate)},719:function(t,e,n){var r=n(720);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},720:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,'.Scene {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: hidden;\n  font-family: "Source Sans Pro", "Segoe UI", "Helvetica Neue", sans-serif;\n}\n.Scene > .SceneHeading {\n  position: absolute;\n  top: 20px;\n  right: 0;\n  left: 0;\n}\n@media (min-width: 720px) {\n  .Scene > .SceneHeading {\n    top: 2rem;\n  }\n}\n.Scene > .SceneToolbar {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}',""])},749:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},u=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return u},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e._slicesForNotesAndTiming=e.beatForLoc=e.timingInfoForBmson=e.barLinesForBmson=void 0;var c=s(n(651)),l=o(n(750));function f(t){return t/240}e.barLinesForBmson=function(t){var e=t.lines;return(0,c.default)(e).map((function(t){return f(t.y)})).sortBy().value()},e.timingInfoForBmson=function(t){return{initialBPM:t.info.initBPM,actions:a(a([],u((t.bpmNotes||[]).map((function(t){var e=t.y,n=t.v;return{type:"bpm",beat:f(e),bpm:n}}))),!1),u((t.stopNotes||[]).map((function(t){var e=t.y,n=t.v;return{type:"stop",beat:f(e),stopBeats:f(Math.floor(n))}}))),!1)}},e.beatForLoc=f,e._slicesForNotesAndTiming=function(t,e){return l.slicesForNotesAndTiming(t,e,{beatForPulse:f})}},750:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return u},o=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.slicesForNotesAndTiming=void 0;var a=u(n(651));e.slicesForNotesAndTiming=function(t,e,n){var u,s,c,l,f=n.beatForPulse,h=new Set,p=new Set,d=new Set;try{for(var v=r(t),_=v.next();!_.done;_=v.next()){var g=_.value,m=g.x,y=g.y,b=g.c;h.add(y),m&&p.add(y),b||d.add(y)}}catch(t){u={error:t}}finally{try{_&&!_.done&&(s=v.return)&&s.call(v)}finally{if(u)throw u.error}}var w,x,S=new Map,E=null,k=!0;try{for(var j=r(a.default.sortBy(o([],i(h),!1))),A=j.next();!A.done;A=j.next()){y=A.value;var C=e.beatToSeconds(f(y));if(null===E||d.has(y)?E=0:E+=C-w,k||p.has(y)||d.has(y)){x&&!d.has(y)&&(x.keysoundEnd=E);var O={keysoundStart:E,keysoundEnd:void 0};S.set(y,O),x=O}k=p.has(y),w=C}}catch(t){c={error:t}}finally{try{A&&!A.done&&(l=j.return)&&l.call(j)}finally{if(c)throw c.error}}return S}},751:function(t,e,n){"use strict";var r=n(364);e.a=class{constructor(t,e){this.options=e,this.players=e.players.map((function(n,i){return n=Object.assign({},n,{autosound:e.audioInputLatency>=.01,tutorial:e.tutorial}),new r.a(t[i],i+1,n)}))}get samples(){let t=new Set;for(let e of this.players)for(let n of e.notechart.samples)t.add(n);return Array.from(t)}}},752:function(t,e,n){"use strict";var r=n(34),i=n.n(r),o=n(697),u=n(77);function a(t){t=i.a.sortBy(t,"time");let e=0;return{next(n){let r=[];for(;e<t.length&&n>=t[e].time;e++)r.push(t[e]);return r}}}e.a=class{constructor({player:t,samples:e,master:n,waveFactory:r,volume:i}){let u=t.notechart;this._waveFactory=r||new o.a(n,e,u.keysounds,{volume:i}),this._autos=a(u.autos),this._notes=a(u.notes),this._played=new Map,this._autosound=!!t.options.autosound}update(t,e){this._playAutokeysounds(t),this._playAutosounds(t,e),this._handleSoundNotifications(e&&e.notifications.sounds||[])}_playAutokeysounds(t){for(let e of this._autos.next(t+1/30))this._waveFactory.playAuto(e,e.time-t)}_playAutosounds(t,e){let n=this._notes.next(t+1/30),r=e&&e.stats.poor;if(this._autosound&&!r)for(let e of n)this._hitNote(e,e.time-t)}_handleSoundNotifications(t){for(let e of t){let{type:t,note:n}=e;"hit"===t?this._hitNote(n,0,e.judgment):"break"===t?this._breakNote(n):"free"===t&&this._waveFactory.playFree(n,0)}}_hitNote(t,e,n){let r=this._played.get(t);r||(r=this._waveFactory.playNote(t,e),this._played.set(t,r)),r&&Object(u.e)(n)&&r.bad()}_breakNote(t){let e=this._played.get(t);e&&e.stop()}}},753:function(t,e,n){"use strict";var r=n(655),i=n(67),o=n.n(i);e.a=class{constructor(t){this.game=t,this.readyFraction=0,this.gettingStarted=!1,this.started=!1,this.finished=!1,this._players=new Map(t.players.map(t=>[t,new r.a(t)]))}update(t,e,n){let r=!0;for(let[n,i]of this._players)i.update(t,e),i.finished||(r=!1);this.readyFraction=n.readyFraction,this.gettingStarted=n.gettingStarted,this.started=n.started,this.finished=r}player(t){return this._players.get(t)||o()(!1,"Invariant violation: No player state found for player %s",t.number)}}},754:function(t,e,n){"use strict";var r=n(213),i=n(211);let o=["p1_1","p1_2","p1_3","p1_4","p1_5","p1_6","p1_7","start"];function u(){const t=[];return window.BEMUSE_TOUCH_STATS.push(t),{record(e){for(let{x:n,y:r}of e)t.push({x:Math.round(n),y:Math.round(r)})},done(){t.length&&(localStorage._stats_touch=JSON.stringify(window.BEMUSE_TOUCH_STATS))}}}window.BEMUSE_TOUCH_STATS=[],e.a=function(t){let e=null,n=null,a=r.a.wrap("input:touch:I",(function(){return t.input})),s=r.a.wrap("input:touch:SC",(function(r){let i=t.refs.p1_SC;if(!i)return 0;n=null;for(let t of r){for(let e of i)if(d(e.getBounds(),32).contains(t.x,t.y)){n=t.y;break}if(null!==n)break}if(null===n)return e=null,0;null===e&&(e=n);n>e+24?e=n-24:n<e-24&&(e=n+24);return n>e+4?-1:n<e-4?1:0})),c=r.a.wrap("input:touch:B",(function(e,n){let r=t.refs[n];if(r)for(let t of r){let n=d(t.getBounds());for(let t of e)if(n.contains(t.x,t.y))return 1}return 0})),l=r.a.wrap("input:touch:P",(function(t){let e=null,n=null;for(let r of t)if(r.y<p)if(null===e)e=r.y;else{if(null!==n)return 0;n=r.y}return null!==e&&null!==n?Math.abs(e-n):0})),f=new u;const h="touch3d"===t.skinData.displayMode,p=h?i.b(.8).y:550;return{name:"TouchPlugin",get(){let t=a(),e={};r.a.enabled&&(r.a.stats["input:touch:n"]=""+t.length),f.record(t),e.p1_SC=s(t);for(let n of o)e[n]=c(t,n);if(h)for(let n of t){const t=i.c(n.x,n.y);t&&(e["p1_"+t]=1)}return e.p1_pinch=l(t),e},destroy(){f.done()}};function d(t,e=4){const n=t.clone();return n.x-=e,n.y-=e,n.width+=2*e,n.height+=2*e,n}}},755:function(t,e,n){"use strict";n(756);var r=n(81),i=n.n(r),o=n(657),u=n(368),a=n(141),s=n(762),c=n.n(s);function l(t,e){let n=document.createElement("button");return n.addEventListener("touchstart",t=>{t.stopPropagation()},!0),n.onclick=e=>{e.preventDefault(),t()},n.className=e,n}e.a=class{constructor({game:t,context:e,backgroundImagePromise:n,video:r}){this._game=t,this._context=e;const i=e.skinData;this._players=new Map(t.players.map(t=>[t,new o.a(t,i)])),this._stateful={},this._wrapper=this._createWrapper({backgroundImagePromise:n,video:r,panelPlacement:t.players[0].options.placement,infoPanelPosition:i.infoPanelPosition}),this._createTouchEscapeButton(),this._createFullScreenButton(),this._escapeHintShown=!1}setEscapeHandler(t){this._onEscape=t}setReplayHandler(t){this._onReplay=t}start(){this._started=(new Date).getTime();let t=this._game.players[0],e=t.notechart.songInfo;this._stateful.song_title=e.title,this._stateful.song_artist=e.artist,this._duration=t.notechart.duration}destroy(){this._context.destroy()}update(t,e){let n=((new Date).getTime()-this._started)/1e3,r=this._getData(n,t,e);this._updateStatefulData(n,t,e),this._context.render(Object.assign({},this._stateful,r)),this._synchronizeVideo(t),this._synchronizeTutorialEscapeHint(t)}_synchronizeVideo(t){this._video&&!this._videoStarted&&t>=this._videoOffset&&(this._video.volume=0,this._video.play(),this._video.classList.add("is-playing"),this._videoStarted=!0)}_synchronizeTutorialEscapeHint(t){if(this._game.options.tutorial){t>=101.123595506&&!this._escapeHintShown&&(this._escapeHintShown=!0,this._escapeHint.classList.add("is-shown"))}}_getData(t,e,n){let r={};r.tutorial=this._game.options.tutorial?"yes":"no",r.t=t,r.gameTime=e,r.ready=this._getReady(n),r.song_time=this._getSongTime(e);for(let[i,o]of this._players){let u=n.player(i),a=o.update(t,e,u);for(let t in a)r[`p${i.number}_${t}`]=a[t]}return r}_updateStatefulData(t,e,n){let r=this._stateful;void 0===r.started&&n.started&&(r.started=t),void 0===r.gettingStarted&&n.gettingStarted&&(r.gettingStarted=t)}_getSongTime(t){return Object(u.a)(Math.min(this._duration,Math.max(0,t)))+" / "+Object(u.a)(this._duration)}_getReady(t){let e=t.readyFraction;return e>.5?Math.pow(1-(e-.5)/.5,2):0}_createWrapper({backgroundImagePromise:t,video:e,panelPlacement:n,infoPanelPosition:r}){var o=i()('<div class="game-display"></div>').attr("data-panel-placement",n).attr("data-info-panel-position",r).append('<div class="game-display--bg js-back-image"></div>').append(this.view);return t&&Promise.resolve(t).then(t=>o.find(".js-back-image").append(t)),e&&(this._video=e.element,this._videoOffset=e.offset,i()(e.element).addClass("game-display--video-bg").appendTo(o)),o[0]}_createTouchEscapeButton(){const t=document.createElement("div");t.className="game-display--touch-buttons is-left",this.wrapper.appendChild(t),t.classList.add("is-visible");const e=(e,n)=>{let r=l(n,e);t.appendChild(r)};e("game-display--touch-escape-button",()=>this._onEscape()),e("game-display--touch-replay-button",()=>this._onReplay());const n=document.createElement("div");n.textContent="Click or press Esc to exit the tutorial",n.className="game-display--escape-hint",this._escapeHint=n,t.appendChild(n)}_createFullScreenButton(){if(Object(a.b)()||!c.a.enabled)return;const t=document.createElement("div");t.className="game-display--touch-buttons is-visible is-right",this.wrapper.appendChild(t);const e=l(()=>{c.a.request()},"game-display--touch-fullscreen-button");t.appendChild(e)}get context(){return this._context}get view(){return this._context.view}get wrapper(){return this._wrapper}}},756:function(t,e,n){var r=n(757);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i);r.locals&&(t.exports=r.locals)},757:function(t,e,n){var r=n(9);(t.exports=n(1)(!1)).push([t.i,".game-display {\n  display: block;\n  margin: 0 auto;\n  overflow: hidden;\n  position: relative;\n}\n.game-display--bg {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 10;\n  background: url("+r(n(758))+") center no-repeat;\n  background-size: cover;\n  -webkit-animation: 1.5s game-display--bg-default;\n          animation: 1.5s game-display--bg-default;\n  -webkit-animation-fill-mode: both;\n          animation-fill-mode: both;\n}\n.game-display[data-info-panel-position=top] .game-display--bg {\n  -webkit-animation-name: game-display--bg-down;\n          animation-name: game-display--bg-down;\n}\n.game-display--video-bg {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: -48px;\n  left: 0px;\n  z-index: 11;\n  opacity: 0;\n  transition: 0.5s opacity;\n  will-change: opacity;\n}\n.game-display--video-bg.is-playing {\n  opacity: 1;\n}\n.game-display[data-panel-placement=left] .game-display--video-bg {\n  -webkit-transform: translateX(13.671875%) scale(0.87);\n          transform: translateX(13.671875%) scale(0.87);\n}\n.game-display[data-panel-placement=right] .game-display--video-bg {\n  -webkit-transform: translateX(13.671875%) scale(0.87);\n          transform: translateX(13.671875%) scale(0.87);\n}\n.game-display--bg img {\n  width: 100%;\n  height: 100%;\n  display: block;\n  object-fit: cover;\n  -webkit-animation: 1.2s game-display--bg-default;\n          animation: 1.2s game-display--bg-default;\n  -webkit-animation-fill-mode: both;\n          animation-fill-mode: both;\n}\n.game-display[data-info-panel-position=top] .game-display--bg img {\n  -webkit-animation-name: game-display--bg-down;\n          animation-name: game-display--bg-down;\n}\n.game-display > canvas {\n  position: relative;\n  z-index: 100;\n}\n.game-display--touch-buttons {\n  position: fixed;\n  -webkit-transform: translateZ(0);\n          transform: translateZ(0);\n  top: 0;\n  opacity: 0;\n  z-index: 110;\n}\n.game-display--touch-buttons.is-visible {\n  opacity: 1;\n}\n.game-display--touch-buttons.is-left {\n  left: 0;\n}\n.game-display--touch-buttons.is-right {\n  right: 0;\n}\n.game-display--touch-escape-button, .game-display--touch-replay-button, .game-display--touch-fullscreen-button {\n  position: absolute;\n  top: 12px;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  width: 32px;\n  height: 32px;\n  background: transparent center center no-repeat;\n  background-size: 32px 32px;\n  cursor: pointer;\n}\n.game-display--touch-escape-button {\n  background-image: url("+r(n(759))+");\n  left: 12px;\n}\n.game-display--touch-replay-button {\n  background-image: url("+r(n(760))+");\n  left: 56px;\n}\n.game-display--touch-fullscreen-button {\n  background-image: url("+r(n(761))+');\n  right: 12px;\n}\n:root:-webkit-full-screen .game-display--touch-fullscreen-button {\n  display: none;\n}\n:root:-moz-full-screen .game-display--touch-fullscreen-button {\n  display: none;\n}\n:root:fullscreen .game-display--touch-fullscreen-button {\n  display: none;\n}\n.game-display--escape-hint {\n  position: absolute;\n  left: 12px;\n  top: 56px;\n  display: none;\n  background: #b61a44;\n  padding: 8px 12px;\n  color: white;\n  white-space: nowrap;\n  border-radius: 8px;\n  font-weight: bold;\n  font-size: 1rem;\n  pointer-events: none;\n}\n.game-display--escape-hint.is-shown {\n  display: block;\n}\n.game-display--escape-hint::after {\n  content: "";\n  display: block;\n  position: absolute;\n  width: 0;\n  height: 0;\n  top: -8px;\n  left: 16px;\n  margin-left: -8px;\n  border-width: 0 8px 8px 8px;\n  border-style: solid;\n  border-color: transparent;\n  border-bottom-color: #b61a44;\n}\n\n@-webkit-keyframes game-display--bg-default {\n  from {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n    opacity: 0;\n  }\n  to {\n    -webkit-transform: translate(0, -35px);\n            transform: translate(0, -35px);\n    opacity: 1;\n  }\n}\n\n@keyframes game-display--bg-default {\n  from {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n    opacity: 0;\n  }\n  to {\n    -webkit-transform: translate(0, -35px);\n            transform: translate(0, -35px);\n    opacity: 1;\n  }\n}\n@-webkit-keyframes game-display--bg-down {\n  from {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n    opacity: 0;\n  }\n  to {\n    -webkit-transform: translate(0, 35px);\n            transform: translate(0, 35px);\n    opacity: 1;\n  }\n}\n@keyframes game-display--bg-down {\n  from {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n    opacity: 0;\n  }\n  to {\n    -webkit-transform: translate(0, 35px);\n            transform: translate(0, 35px);\n    opacity: 1;\n  }\n}',""])},758:function(t,e,n){t.exports=n.p+"build/ea410328703171d8f693d3a404a11a8f.jpg"},759:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACxUlEQVR4AdSYgWfrUBTG2xWNhLbQUbQAlUA7oEzKUNSGwqbA84INBs3oJPvj+75wUMe5Sd+yfM3KD+L2nvPdnNz7ndtp+nc6nQIQghjsQALeQQoyIZVniYyJ5T9BI0kRRE/ABryCr5q8ylyTtovugxV4k8Sb4E1i9Nsk3ANr8CFJMviQmN41hXfBAqQVyeYgkTK+AzMwAj7oCb48m8mYjfwnr5j7IDl02eKH4E9JYhl4lo3Mq1ldocyVueJJLkOW+Ck4OBL5BA/AbyCuL3N/llTDtGnxS5A5yvwJDAgvYCCxckflLZsIegM2jpXfg/EV9qCxxP7SSK43Pyn+xRHovgWn0L0jt5cfWQTHmz+CeYuO4jk4WpVQ+5s3Jn0Hty00YreSm853WWe3zwzxQYvdaKAXQTRMv3POH3TZ22++lZVwNI7I4eUOzzY581/UjM0dZql7yZ8X5m5fvmBbEBEFRhKz+5+nw6LSehrefl8h/vHMDEUk8bnEfKxYhL3xKXhlk68NhzcuGb81xkcM8WdsK8ySHr8u6+d1S/t0SUKERfh2rEKD0Ur3rYEro7EZNJIYQbzqHXQDtbIG6pucB0KClLkLLfpmSQ+YGObBJyRKmbPQYpi6SZnffyYkTF3QQpOzTzBub0PCW2NXU6hvm8/9sw7kUb5bgnjlcfS8gbUyf2k7N0G8mj/RlV48jK1vg7cIBPHuvS4uHu7UwzuWgWEbqkKbirGzymLGdHFkNzlTcZKOcYEwIvr4nCVechjpC56O0f35zGaG3Ez5Kl7aMRxSj9HOssVL7J52vP/at28CgIEYiqF4AssQzH/Jmt4z/QfhqptkAzwBn6AwmJ4ISYWH1bUIKobiy2ENES0xTVFtcYMRozHD0Vms7IDxOEACIgOSgskBJaGyYGm4PGGCMkOaeq/N9QVtrh5oc/W7NkecpM6Sp+P1+REepk4aEr9vwAAAAABJRU5ErkJggg=="},760:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEEklEQVR4AdSaBY/zPAzHBw8cMzMzCo+ZmZmZmfvh7/1P8kt+kq65dLt00k9QZYbUSWynvkj/Pj8/40Et6AZz4ABcgQfwTjzQswMa003/ifd58QfDc8EwOAGWJickK9d0p3+DNnAKrAhxSjp+m+R4DOgBj8CKEo+kM+Y7HfeDZvAQxtgPcEBh3AqKQAqIA0Eijp4V0Zhh+s9HGNn3ZIM/2s4ng10bw97BMqgFMZrRVUuy3mX6yJbkaDlfCO4lhryCfhAXAb1xJPvVJhoKI+18C3iXhPkUSIrCC0giXR+SyGuJhNIArUtLwBrI/IY9KJN0WxyyNeCm8ysSRZ0GnEKdEttWXJkEyZt/AdUGHcXV4EUUCW6seYtxBbIMTMSyyDaL0aKz279z503Oz6nuuBJsjIVfOefvediL37yRkfAiOCKTFTI8YZJTrWlYLGgEM2AbnIMX4hLsgRkak+BQ5oB0TxAnS34nQps1d3surwZsOUhrRQZX2sgdonG/FE6HZiep5wM/5zX2kD1gaXIMSkTOE9LkS5An3Num5lRh8Qwv8wt5wwiwXGYQBJnzIbLDJEs88nrs6nle0k59oXjZsHHiCHSDEpAOfhF/V4LdYYqsW8Gz4jA2TQlK6d+igW2CwiZJ0fkzieGLIF1xJ59xGBnVDmoHXkC1iQbyTk6/YthvSJKmAs3K85LJVE50Qr7wzpKgh8eSB4WSVrLmtxVkKMlmtDkspXlSl2uX7y8rvSWx80F95/mGJ6TPoaxlaZ0g6N7WKhi5Jwj7uGg4T4w5lFfLu83/zZ/50RejkORYjIJoOU/MK2zS/EiMF83MvoKhW3y3d8H5AWApsK4g++CPSKezV7mGptyez2i6SwXNLzq+skExRVoLaAN9YAzMg3UwqdHb6A49nGMPWx0Ka+RJjgcqxVZm85woLIocCpvls+mBCShiNh/4BA2EFIfCttn/SjwwASn8xPIJqr84h8LO+fr3wATEMZsffDxDcprACLouvzwwAUGe8XpyAsiRjv/QpjMBnlsC0JXG17LGEvDeJghd5Uz3lsYm6L1jkMJe0LhRPwY9mQiFdHGbdRIhY1Jhh3ozBMVbnE4qXMvD4juKIQWdC+4WQwaUw5rNlzqdctjMhoh8yV0wXXvAr9EQMbolxhOYHZ1oE7fEvNEUjQObCq0whaao+W3xfMmd/wb7+kOvLW7gxUgG/ccScMo3ae2LEQOuxtJAMegBhzb/3xQtK42rMU9djsq//NK8HOVv8N6w6/G9cBegGtfjxn4g8UGnSLXLn881m/CJzKzgE5kLejZLY2L/at8OLACAgSAI1nolpH9IC8kJ4U0Xi50H21y1yJikbHJGSausWdouD0wgM9DUBZtbB1mbgs3lP5sDJ9FZeHo6n99ybdMJ2yzi/QAAAABJRU5ErkJggg=="},761:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAC30lEQVR4AdyYgacqQRTGt1u0NmqhSyiAFFRAXEUICEHXA563KNiH9tK19cf3vjgexje7e+9p9m4NPxhzzpzzdXbmTJ7rcb1eW2AEFmALIhCDBKRCInORrFmITct7xIHAe2AN9uCiZC++elVPugnm4AAujjjIHs0qJe6DJfgAl5L4kD39n0y8BiYgyQn2DCIp4xkYgBAEoC4EMjeQNWuxOef4PkoMtbKT74DfGYGlYCcHma+srpH4Sm37SSydspLvi/IskE+wAoGDfQPx/ZlRDX3XyU9BainzDWiX8AO0Za+zpfKmLjZ9AWuL8r9A9wfOoK7szWJag5d7Jv9u2eitArfQmyW297uIYPnlT2BYoat4CE6sEtTfPHEag9cKNmKvICbxTjWnfUqSb1W4G20REVLQ/849fyRlz3/56lXCiVyRneIdHm9yhg/0GBtamqVaEeNJVU57B7fDpEjrmZj3fI7N5SuIWSn+SJ9wBH6WwZJ0eN0HFqBLOsal9T1PnrQb9wE797chT+kmWzgnD5v2EwjQJg+oOVt4MBatPAxFwGcwvsNhNs76X6Cgj5VhdzAX9EjzECgF0IlAklcIEJCmrpfV7++KB0mTVovAkmdifMHfzvpOIP/ejhQCjLUiZPlQCDAybPf/+2eykV/YMQlIIUKurUIAn/htMWX+eBgaAb4pQr6NQgCxjcxKv00u+LehECA7oRg0iJ8GiO3J6wUgZ93iNrk1Jmd6Aawi/AVhhq9Q1vBq0QswM+y3rCwGnnZwEWKaPBchBmMHcQyMXCOPlF3o6HXW0K9VxxCan6NHXn+B96TjlpuRa+KRDqn+xALUzY73X/v2UQAgDMBQVA+yKqH+L9zZezRPAnQn//sBlkD6JugYdBFyFe5G0yLoMeQ5nByIiMSEomJxxYhqTDk6PitrQD0OkIDIgKRgckBJqCxYGi5PmKDMkKbOa3N1QyhSDmhz5WVtjjhJnSVPB+jzPZGAyclJbc34AAAAAElFTkSuQmCC"},762:function(t,e,n){
/*!
* screenfull
* v3.3.3 - 2018-09-04
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=t.exports,r="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,i=function(){for(var t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,i=n.length,o={};r<i;r++)if((t=n[r])&&t[1]in e){for(r=0;r<t.length;r++)o[n[0][r]]=t[r];return o}return!1}(),o={change:i.fullscreenchange,error:i.fullscreenerror},u={request:function(t){var n=i.requestFullscreen;t=t||e.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?t[n]():t[n](r?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){e[i.exitFullscreen]()},toggle:function(t){this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,n){var r=o[t];r&&e.addEventListener(r,n,!1)},off:function(t,n){var r=o[t];r&&e.removeEventListener(r,n,!1)},raw:i};i?(Object.defineProperties(u,{isFullscreen:{get:function(){return Boolean(e[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[i.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(e[i.fullscreenEnabled])}}}),n?t.exports=u:window.screenfull=u):n?t.exports=!1:window.screenfull=!1}()},763:function(t,e,n){"use strict";var r=n(97),i=n(34),o=n.n(i),u=n(652),a=n(78);e.a=class{constructor(t,e,{keysoundCache:n=u.a}={}){this._assets=t,this._master=e,this._keysoundCache=n}loadFiles(t,e,n){let i=r.c(t.length,e),u=r.c(t.length,n);return n&&(n.formatter=a.b),Promise.map(t,t=>new Promise(e=>{requestAnimationFrame(()=>{e(this._loadSample(t,i,u))})}),{concurrency:64}).then(t=>o()(t).filter().fromPairs().value())}_loadSample(t,e,n){return(()=>this._keysoundCache.isCached(t)?Promise.resolve(this._keysoundCache.get(t)).tap(()=>{e(t),n(t)}):this._getFile(t).then(r=>r.read().tap(()=>{e(t)}).then(t=>this._decode(t)).tap(e=>{this._keysoundCache.cache(t,e),n(t)})))().then(t=>this._master.sample(t)).then(e=>[t,e]).catch(e=>(console.error("Unable to load keysound: "+t,e),null))}_decode(t){return this._master.decode(t)}_getFile(t){return t=t.replace(/\\/g,"/"),Promise.try(()=>this._assets.file(t.replace(/\.\w+$/,".ogg"))).catch(()=>this._assets.file(t.replace(/\.\w+$/,".m4a"))).catch(()=>this._assets.file(t.replace(/\.\w+$/,".mp3"))).catch(()=>this._assets.file(t))}}},77:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return _})),n.d(e,"g",(function(){return m})),n.d(e,"f",(function(){return y})),n.d(e,"h",(function(){return b})),n.d(e,"e",(function(){return w})),n.d(e,"c",(function(){return x})),n.d(e,"i",(function(){return S}));var r,i=n(34),o=n.n(i);!function(t){t[t.Missed=-1]="Missed",t[t.Unjudged=0]="Unjudged",t[t.Meticulous=1]="Meticulous",t[t.Precise=2]="Precise",t[t.Good=3]="Good",t[t.Offbeat=4]="Offbeat"}(r||(r={}));const u=r.Unjudged,a=r.Missed,s=[{value:1,timegate:.02,endTimegate:.04},{value:2,timegate:.05,endTimegate:.1},{value:3,timegate:.1,endTimegate:.2},{value:4,timegate:.2,endTimegate:.2}],c=[{value:1,timegate:.021,endTimegate:.042},{value:2,timegate:.06,endTimegate:.12},{value:3,timegate:.12,endTimegate:.2},{value:4,timegate:.2,endTimegate:.2}],l=[{value:1,timegate:.022,endTimegate:.044},{value:2,timegate:.07,endTimegate:.14},{value:3,timegate:.14,endTimegate:.2},{value:4,timegate:.2,endTimegate:.2}],f=[{value:1,timegate:.023,endTimegate:.046},{value:2,timegate:.08,endTimegate:.16},{value:3,timegate:.16,endTimegate:.2},{value:4,timegate:.2,endTimegate:.2}],h=[{value:1,timegate:.024,endTimegate:.048},{value:2,timegate:.1,endTimegate:.18},{value:3,timegate:.18,endTimegate:.2},{value:4,timegate:.2,endTimegate:.2}];class p{constructor(t){this.timegates=t}getTimegates(t,e){return this.timegates}}class d{getTimegates(t,e){return!e||e<100?h:s}}const v=new p(s);function _(t,{tutorial:e=!1}){const n=t.songInfo,r=n.difficulty>=5;return e?new d:r?v:1===n.level||2===n.level?new p(h):3===n.level?new p(f):4===n.level?new p(l):5===n.level?new p(c):v}function g(t){return function(e,n,r=v){const i=r.getTimegates(e,n);let o=Math.abs(e-n);for(let e=0;e<i.length;e++)if(o<t(i[e]))return i[e].value;return e<n?u:a}}const m=g(t=>t.timegate),y=g(t=>t.endTimegate);function b(t,e=v){return o.a.find(e.getTimegates(null,null),{value:t}).timegate}function w(t){return t>=4}function x(t){return t===a||w(t)}function S(t){return 1===t?100:2===t?80:3===t?50:0}},78:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return s}));var r=n(363),i=n.n(r);let o=t=>e=>null!==e.progress?t(e):"",u=o(t=>i()(t.current)+" / "+i()(t.total)),a=o(t=>(t.current/t.total*100).toFixed(1)+"%"),s=o(t=>t.extra+"")},82:function(t,e,n){(function(t,r){var i;(function(){var o=Array.prototype.slice,u={toString:function(){return"Bacon"},version:"0.7.95"},a=(null!=t?t:this).Error,s=function(){},c=function(t,e){return t},l=function(t,e){if(!e)throw new a(t)},f=function(t){if((null!=t?t._isObservable:void 0)&&!(null!=t?t._isProperty:void 0))throw new a("Observable is not a Property : "+t)},h=function(t){return l("not a function : "+t,y.isFunction(t))},p=Array.isArray||function(t){return t instanceof Array},d=function(t){return t&&t._isObservable},v=function(t){return l("no arguments supported",0===t.length)},_=function(t){for(var e=arguments.length,n=1;1<e?n<e:n>e;1<e?n++:n--)for(var r in arguments[n])t[r]=arguments[n][r];return t},g=function(t,e){var n={}.hasOwnProperty,r=function(){};for(var i in r.prototype=e.prototype,t.prototype=new r,e)n.call(e,i)&&(t[i]=e[i]);return t},m=function(t){return"undefined"!=typeof Symbol&&Symbol[t]?Symbol[t]:"undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol[t]=Symbol.for(t):"@@"+t},y={indexOf:Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1},indexWhere:function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1},head:function(t){return t[0]},always:function(t){return function(){return t}},negate:function(t){return function(e){return!t(e)}},empty:function(t){return 0===t.length},tail:function(t){return t.slice(1,t.length)},filter:function(t,e){for(var n,r=[],i=0;i<e.length;i++)t(n=e[i])&&r.push(n);return r},map:function(t,e){return function(){for(var n,r=[],i=0;i<e.length;i++)n=e[i],r.push(t(n));return r}()},each:function(t,e){for(var n in t){if(Object.prototype.hasOwnProperty.call(t,n))e(n,t[n])}},toArray:function(t){return p(t)?t:[t]},contains:function(t,e){return-1!==y.indexOf(t,e)},id:function(t){return t},last:function(t){return t[t.length-1]},all:function(t){for(var e=arguments.length<=1||void 0===arguments[1]?y.id:arguments[1],n=0;n<t.length;n++)if(!e(t[n]))return!1;return!0},any:function(t){for(var e=arguments.length<=1||void 0===arguments[1]?y.id:arguments[1],n=0;n<t.length;n++)if(e(t[n]))return!0;return!1},without:function(t,e){return y.filter((function(e){return e!==t}),e)},remove:function(t,e){var n=y.indexOf(e,t);if(n>=0)return e.splice(n,1)},fold:function(t,e,n){for(var r=0;r<t.length;r++)e=n(e,t[r]);return e},flatMap:function(t,e){return y.fold(e,[],(function(e,n){return e.concat(t(n))}))},cached:function(t){var e=U;return function(){return(null!=e?e._isNone:void 0)&&(e=t(),t=void 0),e}},bind:function(t,e){return function(){return t.apply(e,arguments)}},isFunction:function(t){return"function"==typeof t},toString:function(t){var e,n,r={}.hasOwnProperty;try{return b++,null==t?"undefined":y.isFunction(t)?"function":p(t)?b>5?"[..]":"["+y.map(y.toString,t).toString()+"]":null!=(null!=t?t.toString:void 0)&&t.toString!==Object.prototype.toString?t.toString():"object"==typeof t?b>5?"{..}":"{"+function(){var i=[];for(e in t)r.call(t,e)&&(n=function(){var n;try{return t[e]}catch(n){return n}}(),i.push(y.toString(e)+":"+y.toString(n)));return i}()+"}":t}finally{b--}}},b=0;u._=y;var w=u.UpdateBarrier=function(){var t,e=[],n={},r=[],i=0,o={};function a(t){t<=i||(r[t-1]||(r[t-1]=[[],0]),i=t)}var s=function(e,n){if(!t&&!r.length)return n();a(1);for(var o=0;o<i-1&&!c(e,r[o][0]);)o++;r[o][0].push([e,n]),t||l()};function c(t,e){for(var n=0;n<e.length;n++)if(e[n][0].id==t.id)return!0;return!1}function l(){var t=i;if(t)for(;i>=t;){var e=r[i-1];if(!e)throw new G("Unexpected stack top: "+e);var n=e[0],o=e[1];if(!(o<n.length)){e[0]=[],e[1]=0;break}var u=n[o],s=(u[0],u[1]);e[1]++,a(i+1);var c=!1;try{for(s(),c=!0;i>t&&0==r[i-1][0].length;)i--}finally{c||(r=[],i=0)}}}var f=function(t,r){var i=e[t],o=i.id,u=n[o];e.splice(t,1),delete n[o],r&&e.length>0&&h(i);for(var a=0;a<u.length;a++)(0,u[a])()},h=function(t){if(!o[t.id]){for(var r,i=t.internalDeps(),u=0;u<i.length;u++)if(r=i[u],h(r),n[r.id]){var a=y.indexOf(e,r);f(a,!1)}o[t.id]=!0}};return{whenDoneWith:function(r,i){if(t){var o=n[r.id];return null==o?(o=n[r.id]=[i],e.push(r)):o.push(i)}return i()},hasWaiters:function(){return e.length>0},inTransaction:function(n,r,i,u){if(t)return i.apply(r,u);t=n;try{var a=i.apply(r,u);!function(){for(;e.length>0;)f(0,!0);o={}}()}finally{t=void 0,l()}return a},currentEventId:function(){return t?t.id:void 0},wrappedSubscribe:function(t,e){var n=!1,r=!1,i=function(){return r=!0},o=function(){return n=!0,i()};return i=t.dispatcher.subscribe((function(r){return s(t,(function(){if(!n&&e(r)===u.noMore)return o()}))})),r&&i(),o},afterTransaction:s}}();function x(t,e){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];this.obs=t,this.sync=e,this.lazy=n,this.queue=[]}function S(){x.apply(this,arguments)}function E(t){x.call(this,t,!0)}function k(t,e,n){this.context=t,this.method=e,this.args=n}_(x.prototype,{_isSource:!0,subscribe:function(t){return this.obs.dispatcher.subscribe(t)},toString:function(){return this.obs.toString()},markEnded:function(){return this.ended=!0,!0},consume:function(){return this.lazy?{value:y.always(this.queue[0])}:this.queue[0]},push:function(t){return this.queue=[t],[t]},mayHave:function(){return!0},hasAtLeast:function(){return this.queue.length},flatten:!0}),g(S,x),_(S.prototype,{consume:function(){return this.queue.shift()},push:function(t){return this.queue.push(t)},mayHave:function(t){return!this.ended||this.queue.length>=t},hasAtLeast:function(t){return this.queue.length>=t},flatten:!1}),g(E,x),_(E.prototype,{consume:function(){var t=this.queue;return this.queue=[],{value:function(){return t}}},push:function(t){return this.queue.push(t.value())},hasAtLeast:function(){return!0}}),x.isTrigger=function(t){return(null!=t?t._isSource:void 0)?t.sync:null!=t?t._isEventStream:void 0},x.fromObservable=function(t){return(null!=t?t._isSource:void 0)?t:(null!=t?t._isProperty:void 0)?new x(t,!1):new S(t,!0)},_(k.prototype,{_isDesc:!0,deps:function(){return this.cached||(this.cached=C([this.context].concat(this.args))),this.cached},toString:function(){return y.toString(this.context)+"."+y.toString(this.method)+"("+y.map(y.toString,this.args)+")"}});var j=function(t,e){var n=t||e;if(n&&n._isDesc)return t||e;for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return new k(t,e,i)},A=function(t,e){return e.desc=t,e},C=function(t){return p(t)?y.flatMap(C,t):d(t)?[t]:(null!=t?t._isSource:void 0)?[t.obs]:[]};u.Desc=k,u.Desc.empty=new u.Desc("","",[]);var O=function(t){return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if("object"==typeof e&&r.length){var o=e,u=r[0];e=function(){return o[u].apply(o,arguments)},r=r.slice(1)}return t.apply(void 0,[e].concat(r))}},T=function(t){return t=Array.prototype.slice.call(t),I.apply(void 0,t)},P=function(t,e){return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.apply(void 0,e.concat(r))}},F=function(t,e){var n=t.slice(1).split("."),r=y.map(function(t){return function(e){return function(n){if(null!=n){var r=n[e];return y.isFunction(r)?r.apply(n,t):r}}}}(e),n);return function(t){for(var e=0;e<r.length;e++)t=(0,r[e])(t);return t}},M=function(t){return"string"==typeof t&&t.length>1&&"."===t.charAt(0)},I=O((function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return y.isFunction(t)?n.length?P(t,n):t:M(t)?F(t,n):y.always(t)})),B=function(t,e){return I.apply(void 0,[t].concat(e))},R=function(t,e,n,r){if(null!=e?e._isProperty:void 0){var i=e.sampledBy(t,(function(t,e){return[t,e]}));return r.call(i,(function(t){var e=t[0];t[1];return e})).map((function(t){t[0];return t[1]}))}return e=B(e,n),r.call(t,e)},L=function(t){if(y.isFunction(t))return t;if(M(t)){var e=D(t);return function(t,n){return t[e](n)}}throw new a("not a function or a field key: "+t)},D=function(t){return t.slice(1)};function N(t){this.value=t}_(N.prototype,{_isSome:!0,getOrElse:function(){return this.value},get:function(){return this.value},filter:function(t){return t(this.value)?new N(this.value):U},map:function(t){return new N(t(this.value))},forEach:function(t){return t(this.value)},isDefined:!0,toArray:function(){return[this.value]},inspect:function(){return"Some("+this.value+")"},toString:function(){return this.inspect()}});var U={_isNone:!0,getOrElse:function(t){return t},filter:function(){return U},map:function(){return U},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},z=function(t){return(null!=t?t._isSome:void 0)||(null!=t?t._isNone:void 0)?t:new N(t)};u.noMore="<no-more>",u.more="<more>";var W=0;function V(){this.id=++W}function H(t,e){if(!(this instanceof H))return new H(t,e);V.call(this),!e&&y.isFunction(t)||(null!=t?t._isNext:void 0)?(this.valueF=t,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=t)}function q(t,e){if(!(this instanceof q))return new q(t,e);H.call(this,t,e)}function $(){if(!(this instanceof $))return new $;V.call(this)}function G(t){if(!(this instanceof G))return new G(t);this.error=t,V.call(this)}V.prototype._isEvent=!0,V.prototype.isEvent=function(){return!0},V.prototype.isEnd=function(){return!1},V.prototype.isInitial=function(){return!1},V.prototype.isNext=function(){return!1},V.prototype.isError=function(){return!1},V.prototype.hasValue=function(){return!1},V.prototype.filter=function(){return!0},V.prototype.inspect=function(){return this.toString()},V.prototype.log=function(){return this.toString()},g(H,V),H.prototype.isNext=function(){return!0},H.prototype.hasValue=function(){return!0},H.prototype.value=function(){var t;return(null!=(t=this.valueF)?t._isNext:void 0)?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},H.prototype.fmap=function(t){var e,n;return this.valueInternal?(n=this.valueInternal,this.apply((function(){return t(n)}))):(e=this,this.apply((function(){return t(e.value())})))},H.prototype.apply=function(t){return new H(t)},H.prototype.filter=function(t){return t(this.value())},H.prototype.toString=function(){return y.toString(this.value())},H.prototype.log=function(){return this.value()},H.prototype._isNext=!0,g(q,H),q.prototype._isInitial=!0,q.prototype.isInitial=function(){return!0},q.prototype.isNext=function(){return!1},q.prototype.apply=function(t){return new q(t)},q.prototype.toNext=function(){return new H(this)},g($,V),$.prototype.isEnd=function(){return!0},$.prototype.fmap=function(){return this},$.prototype.apply=function(){return this},$.prototype.toString=function(){return"<end>"},g(G,V),G.prototype.isError=function(){return!0},G.prototype.fmap=function(){return this},G.prototype.apply=function(){return this},G.prototype.toString=function(){return"<error> "+y.toString(this.error)},u.Event=V,u.Initial=q,u.Next=H,u.End=$,u.Error=G;var K=function(t){return new q(t,!0)},J=function(t){return new H(t,!0)},Q=function(){return new $},X=function(t){return t&&t._isEvent?t:J(t)},Y=0,Z=function(){};function tt(t){this.desc=t,this.id=++Y,this.initialDesc=this.desc}function et(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];this.unsubscribe=y.bind(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[];for(var e,n=0;n<t.length;n++)e=t[n],this.add(e)}function nt(t,e){this._subscribe=t,this._handleEvent=e,this.subscribe=y.bind(this.subscribe,this),this.handleEvent=y.bind(this.handleEvent,this),this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0,this.subscriptions=[],this.queue=[]}function rt(t,e,n){if(!(this instanceof rt))return new rt(t,e,n);y.isFunction(t)&&(n=e,e=t,t=k.empty),tt.call(this,t),h(e),this.dispatcher=new nt(e,n),Z(this)}_(tt.prototype,{_isObservable:!0,subscribe:function(t){return w.wrappedSubscribe(this,t)},subscribeInternal:function(t){return this.dispatcher.subscribe(t)},onValue:function(){var t=T(arguments);return this.subscribe((function(e){if(e.hasValue())return t(e.value())}))},onValues:function(t){return this.onValue((function(e){return t.apply(void 0,e)}))},onError:function(){var t=T(arguments);return this.subscribe((function(e){if(e.isError())return t(e.error)}))},onEnd:function(){var t=T(arguments);return this.subscribe((function(e){if(e.isEnd())return t()}))},name:function(t){return this._name=t,this},withDescription:function(){return this.desc=j.apply(void 0,arguments),this},toString:function(){return this._name?this._name:this.desc.toString()},deps:function(){return this.desc.deps()},internalDeps:function(){return this.initialDesc.deps()}}),tt.prototype.assign=tt.prototype.onValue,tt.prototype.forEach=tt.prototype.onValue,tt.prototype.inspect=tt.prototype.toString,u.Observable=tt,_(et.prototype,{add:function(t){var e=this;if(!this.unsubscribed){var n=!1,r=s;this.starting.push(t);return r=t(this.unsubscribe,(function(){if(!e.unsubscribed)return n=!0,e.remove(r),y.remove(t,e.starting)})),this.unsubscribed||n?r():this.subscriptions.push(r),y.remove(t,this.starting),r}},remove:function(t){if(!this.unsubscribed)return void 0!==y.remove(t,this.subscriptions)?t():void 0},unsubscribe:function(){if(!this.unsubscribed){this.unsubscribed=!0;for(var t=this.subscriptions,e=0;e<t.length;e++)t[e]();return this.subscriptions=[],this.starting=[],[]}},count:function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},empty:function(){return 0===this.count()}}),u.CompositeUnsubscribe=et,nt.prototype.hasSubscribers=function(){return this.subscriptions.length>0},nt.prototype.removeSub=function(t){return this.subscriptions=y.without(t,this.subscriptions),this.subscriptions},nt.prototype.push=function(t){return t.isEnd()&&(this.ended=!0),w.inTransaction(t,this,this.pushIt,[t])},nt.prototype.pushToSubscriptions=function(t){try{for(var e=this.subscriptions,n=e.length,r=0;r<n;r++){var i=e[r];(i.sink(t)===u.noMore||t.isEnd())&&this.removeSub(i)}return!0}catch(t){throw this.pushing=!1,this.queue=[],t}},nt.prototype.pushIt=function(t){if(this.pushing)return this.queue.push(t),u.more;if(t!==this.prevError){for(t.isError()&&(this.prevError=t),this.pushing=!0,this.pushToSubscriptions(t),this.pushing=!1;this.queue.length;)t=this.queue.shift(),this.push(t);return this.hasSubscribers()?u.more:(this.unsubscribeFromSource(),u.noMore)}},nt.prototype.handleEvent=function(t){return this._handleEvent?this._handleEvent(t):this.push(t)},nt.prototype.unsubscribeFromSource=function(){this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},nt.prototype.subscribe=function(t){var e,n;return this.ended?(t(Q()),s):(h(t),e={sink:t},this.subscriptions.push(e),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),h(this.unsubSrc)),n=this,function(){if(n.removeSub(e),!n.hasSubscribers())return n.unsubscribeFromSource()})},u.Dispatcher=nt,g(rt,tt),_(rt.prototype,{_isEventStream:!0,toProperty:function(t){var e=0===arguments.length?U:z((function(){return t})),n=this.dispatcher,r=new u.Desc(this,"toProperty",[t]);return new at(r,(function(t){var r=!1,i=!1,o=s,a=u.more,c=function(){if(!r)return e.forEach((function(e){if(r=!0,(a=t(new q(e)))===u.noMore)return o(),o=s,s}))};return o=n.subscribe((function(n){return n.hasValue()?n.isInitial()&&!i?(e=new N((function(){return n.value()})),u.more):(n.isInitial()||c(),r=!0,e=new N(n),t(n)):(n.isEnd()&&(a=c()),a!==u.noMore?t(n):void 0)})),i=!0,c(),o}))},toEventStream:function(){return this},withHandler:function(t){return new rt(new u.Desc(this,"withHandler",[t]),this.dispatcher.subscribe,t)}}),u.EventStream=rt,u.never=function(){return new rt(j(u,"never"),(function(t){return t(Q()),s}))},u.when=function(){if(0===arguments.length)return u.never();var t=arguments.length,e="when: expecting arguments in the form (Observable+,function)+";l(e,t%2==0);for(var n=[],r=[],i=0,o=[];i<t;){o[i]=arguments[i],o[i+1]=arguments[i+1];for(var a,s=y.toArray(arguments[i]),c=ot(arguments[i+1]),f={f:c,ixs:[]},h=!1,p=0;p<s.length;p++){a=s[p];var d=y.indexOf(n,a);h||(h=x.isTrigger(a)),d<0&&(n.push(a),d=n.length-1);for(var v,_=0;_<f.ixs.length;_++)(v=f.ixs[_]).index===d&&v.count++;f.ixs.push({index:d,count:1})}l("At least one EventStream required",h||!s.length),s.length>0&&r.push(f),i+=2}if(!n.length)return u.never();n=y.map(x.fromObservable,n);var g=y.any(n,(function(t){return t.flatten}))&&it(y.map((function(t){return t.obs}),n)),m=new u.Desc(u,"when",o),b=new rt(m,(function(t){var e=[],i=!1,o=function(t){for(var e,r=0;r<t.ixs.length;r++)if(e=t.ixs[r],!n[e.index].hasAtLeast(e.count))return!1;return!0},a=function(t){return!t.sync||t.ended},s=function(t){for(var e,r=0;r<t.ixs.length;r++)if(e=t.ixs[r],!n[e.index].mayHave(e.count))return!0},c=function(t){return!t.source.flatten},l=function(l){return function(f){var h=function(){return w.whenDoneWith(b,d)},p=function(){if(!(e.length>0))return u.more;for(var i,a=u.more,s=e.pop(),l=0;l<r.length;l++)if(i=r[l],o(i)){var f=function(){for(var t,e=[],r=0;r<i.ixs.length;r++)t=i.ixs[r],e.push(n[t.index].consume());return e}();return a=t(s.e.apply((function(){var t,e=function(){for(var t,e=[],n=0;n<f.length;n++)t=f[n],e.push(t.value());return e}();return(t=i).f.apply(t,e)}))),e.length&&(e=y.filter(c,e)),a===u.noMore?a:p()}},d=function(){var e=p();return i&&(y.all(n,a)||y.all(r,s))&&(e=u.noMore,t(Q())),e===u.noMore&&f(),e};return l.subscribe((function(n){if(n.isEnd())i=!0,l.markEnded(),h();else if(n.isError())var r=t(n);else l.push(n),l.sync&&(e.push({source:l,e:n}),g||w.hasWaiters()?h():d());return r===u.noMore&&f(),r||u.more}))}};return new u.CompositeUnsubscribe(function(){for(var t,e=[],r=0;r<n.length;r++)t=n[r],e.push(l(t));return e}()).unsubscribe}));return b};var it=function(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],n=function(t){if(y.contains(e,t))return!0;var r=t.internalDeps();return r.length?(e.push(t),y.any(r,n)):(e.push(t),!1)};return y.any(t,n)},ot=function(t){return y.isFunction(t)?t:y.always(t)};function ut(t,e,n){nt.call(this,e,n),this.property=t,this.subscribe=y.bind(this.subscribe,this),this.current=U,this.currentValueRootId=void 0,this.propertyEnded=!1}function at(t,e,n){tt.call(this,t),h(e),this.dispatcher=new ut(this,e,n),Z(this)}u.groupSimultaneous=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];1===e.length&&p(e[0])&&(e=e[0]);var r=function(){for(var t,n=[],r=0;r<e.length;r++)t=e[r],n.push(new E(t));return n}();return A(new u.Desc(u,"groupSimultaneous",e),u.when(r,(function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e})))},g(ut,nt),_(ut.prototype,{push:function(t){return t.isEnd()&&(this.propertyEnded=!0),t.hasValue()&&(this.current=new N(t),this.currentValueRootId=w.currentEventId()),nt.prototype.push.call(this,t)},maybeSubSource:function(t,e){return e===u.noMore?s:this.propertyEnded?(t(Q()),s):nt.prototype.subscribe.call(this,t)},subscribe:function(t){var e=this,n=u.more;if(this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)){var r=w.currentEventId(),i=this.currentValueRootId;return!this.propertyEnded&&i&&r&&r!==i?(w.whenDoneWith(this.property,(function(){if(e.currentValueRootId===i)return t(K(e.current.get().value()))})),this.maybeSubSource(t,n)):(w.inTransaction(void 0,this,(function(){return n=t(K(this.current.get().value()))}),[]),this.maybeSubSource(t,n))}return this.maybeSubSource(t,n)}}),g(at,tt),_(at.prototype,{_isProperty:!0,changes:function(){var t=this;return new rt(new u.Desc(this,"changes",[]),(function(e){return t.dispatcher.subscribe((function(t){if(!t.isInitial())return e(t)}))}))},withHandler:function(t){return new at(new u.Desc(this,"withHandler",[t]),this.dispatcher.subscribe,t)},toProperty:function(){return v(arguments),this},toEventStream:function(){var t=this;return new rt(new u.Desc(this,"toEventStream",[]),(function(e){return t.dispatcher.subscribe((function(t){return t.isInitial()&&(t=t.toNext()),e(t)}))}))}}),u.Property=at,u.constant=function(t){return new at(new u.Desc(u,"constant",[t]),(function(e){return e(K(t)),e(Q()),s}))},u.fromBinder=function(t){var e=arguments.length<=1||void 0===arguments[1]?y.id:arguments[1],n=new u.Desc(u,"fromBinder",[t,e]);return new rt(n,(function(n){var r=!1,i=!1,o=function(){if(!r)return null!=a?(a(),r=!0):i=!0},a=t((function(){for(var t,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=e.apply(this,i);p(s)&&(null!=(t=y.last(s))?t._isEvent:void 0)||(s=[s]);for(var c,l=u.more,f=0;f<s.length;f++)if(c=s[f],(l=n(c=X(c)))===u.noMore||c.isEnd())return o(),l;return l}));return i&&o(),o}))},u.Observable.prototype.map=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return R(this,t,n,(function(t){return A(new u.Desc(this,"map",[t]),this.withHandler((function(e){return this.push(e.fmap(t))})))}))};var st=function(t){return p(t[0])?t[0]:Array.prototype.slice.call(t)},ct=function(t){return y.isFunction(t[0])?[st(Array.prototype.slice.call(t,1)),t[0]]:[st(Array.prototype.slice.call(t,0,t.length-1)),y.last(t)]};u.combineAsArray=function(){var t=st(arguments);if(t.length){for(var e=[],n=0;n<t.length;n++){var r=d(t[n])?t[n]:u.constant(t[n]);e.push(new x(r,!0))}return A(new u.Desc(u,"combineAsArray",t),u.when(e,(function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e})).toProperty())}return u.constant([])},u.onValues=function(){return u.combineAsArray(Array.prototype.slice.call(arguments,0,arguments.length-1)).onValues(arguments[arguments.length-1])},u.combineWith=function(){var t=ct(arguments),e=t[0],n=t[1],r=new u.Desc(u,"combineWith",[n].concat(e));return A(r,u.combineAsArray(e).map((function(t){return n.apply(void 0,t)})))},u.Observable.prototype.combine=function(t,e){var n=L(e),r=new u.Desc(this,"combine",[t,e]);return A(r,u.combineAsArray(this,t).map((function(t){return n(t[0],t[1])})))},u.Observable.prototype.withStateMachine=function(t,e){var n=t,r=new u.Desc(this,"withStateMachine",[t,e]);return A(r,this.withHandler((function(t){var r=e(n,t),i=r[0],o=r[1];n=i;for(var a,s=u.more,c=0;c<o.length;c++)if(a=o[c],(s=this.push(a))===u.noMore)return s;return s})))};var lt=function(t,e){return t===e},ft=function(t){return null!=t&&t._isNone};u.Observable.prototype.skipDuplicates=function(){var t=arguments.length<=0||void 0===arguments[0]?lt:arguments[0],e=new u.Desc(this,"skipDuplicates",[]);return A(e,this.withStateMachine(U,(function(e,n){return n.hasValue()?n.isInitial()||ft(e)||!t(e.get(),n.value())?[new N(n.value()),[n]]:[e,[]]:[e,[n]]})))},u.Observable.prototype.awaiting=function(t){var e=new u.Desc(this,"awaiting",[t]);return A(e,u.groupSimultaneous(this,t).map((function(t){return 0===t[1].length})).toProperty(!1).skipDuplicates())},u.Observable.prototype.not=function(){return A(new u.Desc(this,"not",[]),this.map((function(t){return!t})))},u.Property.prototype.and=function(t){return A(new u.Desc(this,"and",[t]),this.combine(t,(function(t,e){return t&&e})))},u.Property.prototype.or=function(t){return A(new u.Desc(this,"or",[t]),this.combine(t,(function(t,e){return t||e})))},u.scheduler={setTimeout:function(t,e){return setTimeout(t,e)},setInterval:function(t,e){return setInterval(t,e)},clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)},now:function(){return(new Date).getTime()}},u.EventStream.prototype.bufferWithTime=function(t){return A(new u.Desc(this,"bufferWithTime",[t]),this.bufferWithTimeOrCount(t,Number.MAX_VALUE))},u.EventStream.prototype.bufferWithCount=function(t){return A(new u.Desc(this,"bufferWithCount",[t]),this.bufferWithTimeOrCount(void 0,t))},u.EventStream.prototype.bufferWithTimeOrCount=function(t,e){var n=function(n){return n.values.length===e?n.flush():void 0!==t?n.schedule():void 0},r=new u.Desc(this,"bufferWithTimeOrCount",[t,e]);return A(r,this.buffer(t,n,n))},u.EventStream.prototype.buffer=function(t){var e=arguments.length<=1||void 0===arguments[1]?s:arguments[1],n=arguments.length<=2||void 0===arguments[2]?s:arguments[2],r={scheduled:null,end:void 0,values:[],flush:function(){if(this.scheduled&&(u.scheduler.clearTimeout(this.scheduled),this.scheduled=null),this.values.length>0){var t=this.values;this.values=[];var e=this.push(J(t));if(null!=this.end)return this.push(this.end);if(e!==u.noMore)return n(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){var e=this;if(!this.scheduled)return this.scheduled=t((function(){return e.flush()}))}},i=u.more;if(!y.isFunction(t)){var o=t;t=function(t){return u.scheduler.setTimeout(t,o)}}return A(new u.Desc(this,"buffer",[]),this.withHandler((function(t){var n=this;return r.push=function(t){return n.push(t)},t.isError()?i=this.push(t):t.isEnd()?(r.end=t,r.scheduled||r.flush()):(r.values.push(t.value()),e(r)),i})))},u.Observable.prototype.filter=function(t){f(t);for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return R(this,t,n,(function(t){return A(new u.Desc(this,"filter",[t]),this.withHandler((function(e){return e.filter(t)?this.push(e):u.more})))}))},u.once=function(t){return new rt(new k(u,"once",[t]),(function(e){return e(X(t)),e(Q()),s}))},u.EventStream.prototype.concat=function(t){var e=this;return new rt(new u.Desc(e,"concat",[t]),(function(n){var r=s,i=e.dispatcher.subscribe((function(e){return e.isEnd()?r=t.toEventStream().dispatcher.subscribe(n):n(e)}));return function(){return i(),r()}}))},u.Property.prototype.concat=function(t){return ht(this,this.changes().concat(t))},u.concatAll=function(){var t=st(arguments);return t.length?A(new u.Desc(u,"concatAll",t),y.fold(y.tail(t),y.head(t).toEventStream(),(function(t,e){return t.concat(e)}))):u.never()};var ht=function(t,e){var n=new rt(j(t,"justInitValue"),(function(e){var r=void 0,i=t.dispatcher.subscribe((function(t){return t.isEnd()||(r=t),u.noMore}));return w.whenDoneWith(n,(function(){return null!=r&&e(r),e(Q())})),i}));return n.concat(e).toProperty()};u.Observable.prototype.flatMap=function(){return vt(this,pt(arguments))},u.Observable.prototype.flatMapFirst=function(){return vt(this,pt(arguments),!0)};var pt=function(t){return 1===t.length&&d(t[0])?y.always(t[0]):T(t)},dt=function(t){return d(t)?t:u.once(t)},vt=function(t,e,n,r){var i=[t],o=[],a=new rt(new u.Desc(t,"flatMap"+(n?"First":""),[e]),(function(i){var a=new et,s=[],c=function(t){var n=dt(e(t.value()));return o.push(n),a.add((function(t,e){return n.dispatcher.subscribe((function(r){if(r.isEnd())return y.remove(n,o),l(),f(e),u.noMore;(null!=r?r._isInitial:void 0)&&(r=r.toNext());var a=i(r);return a===u.noMore&&t(),a}))}))},l=function(){var t=s.shift();if(t)return c(t)},f=function(t){if(t(),a.empty())return i(Q())};return a.add((function(e,o){return t.dispatcher.subscribe((function(t){return t.isEnd()?f(o):t.isError()?i(t):n&&a.count()>1?u.more:a.unsubscribed?u.noMore:r&&a.count()>r?s.push(t):c(t)}))})),a.unsubscribe}));return a.internalDeps=function(){return o.length?i.concat(o):i},a};function _t(){if(!(this instanceof _t))return new _t;this.unsubAll=y.bind(this.unsubAll,this),this.subscribeAll=y.bind(this.subscribeAll,this),this.guardedSink=y.bind(this.guardedSink,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,rt.call(this,new u.Desc(u,"Bus",[]),this.subscribeAll)}u.Observable.prototype.flatMapWithConcurrencyLimit=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=new u.Desc(this,"flatMapWithConcurrencyLimit",[t].concat(n));return A(i,vt(this,pt(n),!1,t))},u.Observable.prototype.flatMapConcat=function(){var t=new u.Desc(this,"flatMapConcat",Array.prototype.slice.call(arguments,0));return A(t,this.flatMapWithConcurrencyLimit.apply(this,[1].concat(o.call(arguments))))},u.later=function(t,e){return A(new u.Desc(u,"later",[t,e]),u.fromBinder((function(n){var r=u.scheduler.setTimeout((function(){return n([e,Q()])}),t);return function(){return u.scheduler.clearTimeout(r)}})))},u.Observable.prototype.bufferingThrottle=function(t){var e=new u.Desc(this,"bufferingThrottle",[t]);return A(e,this.flatMapConcat((function(e){return u.once(e).concat(u.later(t).filter(!1))})))},u.Property.prototype.bufferingThrottle=function(){return u.Observable.prototype.bufferingThrottle.apply(this,arguments).toProperty()},g(_t,rt),_(_t.prototype,{unsubAll:function(){for(var t,e=this.subscriptions,n=0;n<e.length;n++)"function"==typeof(t=e[n]).unsub&&t.unsub()},subscribeAll:function(t){if(this.ended)t(Q());else{this.sink=t;for(var e,n=this.subscriptions.slice(0),r=0;r<n.length;r++)e=n[r],this.subscribeInput(e)}return this.unsubAll},guardedSink:function(t){var e=this;return function(n){return n.isEnd()?(e.unsubscribeInput(t),u.noMore):e.sink(n)}},subscribeInput:function(t){return t.unsub=t.input.dispatcher.subscribe(this.guardedSink(t.input)),t.unsub},unsubscribeInput:function(t){for(var e,n=this.subscriptions,r=0;r<n.length;r++)if((e=n[r]).input===t)return"function"==typeof e.unsub&&e.unsub(),void this.subscriptions.splice(r,1)},plug:function(t){var e=this;if(function(t){if(!(null!=t?t._isObservable:void 0))throw new a("not an Observable : "+t)}(t),!this.ended){var n={input:t};return this.subscriptions.push(n),void 0!==this.sink&&this.subscribeInput(n),function(){return e.unsubscribeInput(t)}}},end:function(){if(this.ended=!0,this.unsubAll(),"function"==typeof this.sink)return this.sink(Q())},push:function(t){if(!this.ended&&"function"==typeof this.sink){var e=!this.pushing;if(!e)return this.pushQueue||(this.pushQueue=[]),void this.pushQueue.push(t);this.pushing=!0;try{return this.sink(J(t))}finally{if(e&&this.pushQueue){for(var n=0;n<this.pushQueue.length;){t=this.pushQueue[n];this.sink(J(t)),n++}this.pushQueue=null}this.pushing=!1}}},error:function(t){if("function"==typeof this.sink)return this.sink(new G(t))}}),u.Bus=_t;var gt=function(t,e){return O((function(n){for(var r=P(e,[function(t,e){return n.apply(void 0,t.concat([e]))}]),i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return A(new u.Desc(u,t,[n].concat(o)),u.combineAsArray(o).flatMap(r))}))};u.fromCallback=gt("fromCallback",(function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return u.fromBinder((function(e){return B(t,n)(e),s}),(function(t){return[t,Q()]}))})),u.fromNodeCallback=gt("fromNodeCallback",(function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return u.fromBinder((function(e){return B(t,n)(e),s}),(function(t,e){return t?[new G(t),Q()]:[e,Q()]}))})),u.combineTemplate=function(t){function e(t,e,n){return(function(t){return t[t.length-1]}(t))[e]=n,n}function n(t){return p(t)?[]:{}}function r(t){if(d(t))return!0;if(t&&(t.constructor==Object||t.constructor==Array))for(var e in t){if(Object.prototype.hasOwnProperty.call(t,e))if(r(t[e]))return!0}}function i(t,i){if(d(i))s.push(i),a.push(function(t,n){return function(r,i){e(r,t,i[n])}}(t,s.length-1));else if(r(i)){a.push(function(t,r){return function(i){var o=n(r);e(i,t,o),i.push(o)}}(t,i)),o(i),a.push((function(t){t.pop()}))}else a.push(function(t,n){return function(r){e(r,t,n)}}(t,i))}function o(t){y.each(t,i)}var a=[],s=[],c=r(t)?(o(t),u.combineAsArray(s).map((function(e){for(var r=n(t),i=[r],o=0;o<a.length;o++)(0,a[o])(i,e);return r}))):u.constant(t);return A(new u.Desc(u,"combineTemplate",[t]),c)},u.Observable.prototype.mapEnd=function(){var t=T(arguments);return A(new u.Desc(this,"mapEnd",[t]),this.withHandler((function(e){return e.isEnd()?(this.push(J(t(e))),this.push(Q()),u.noMore):this.push(e)})))},u.Observable.prototype.skipErrors=function(){return A(new u.Desc(this,"skipErrors",[]),this.withHandler((function(t){return t.isError()?u.more:this.push(t)})))},u.EventStream.prototype.takeUntil=function(t){var e={};return A(new u.Desc(this,"takeUntil",[t]),u.groupSimultaneous(this.mapEnd(e),t.skipErrors()).withHandler((function(t){if(t.hasValue()){var n=t.value(),r=n[0];if(n[1].length)return this.push(Q());for(var i,o=u.more,a=0;a<r.length;a++)o=(i=r[a])===e?this.push(Q()):this.push(J(i));return o}return this.push(t)})))},u.Property.prototype.takeUntil=function(t){var e=this.changes().takeUntil(t);return A(new u.Desc(this,"takeUntil",[t]),ht(this,e))},u.Observable.prototype.flatMapLatest=function(){var t=pt(arguments),e=this.toEventStream();return A(new u.Desc(this,"flatMapLatest",[t]),e.flatMap((function(n){return dt(t(n)).takeUntil(e)})))},u.Property.prototype.delayChanges=function(t,e){return A(t,ht(this,e(this.changes())))},u.EventStream.prototype.delayChanges=function(t,e){return A(t,e(this))},u.Observable.prototype.delay=function(t){return this.delayChanges(new u.Desc(this,"delay",[t]),(function(e){return e.flatMap((function(e){return u.later(t,e)}))}))},u.Observable.prototype.debounce=function(t){return this.delayChanges(new u.Desc(this,"debounce",[t]),(function(e){return e.flatMapLatest((function(e){return u.later(t,e)}))}))},u.Observable.prototype.debounceImmediate=function(t){return this.delayChanges(new u.Desc(this,"debounceImmediate",[t]),(function(e){return e.flatMapFirst((function(e){return u.once(e).concat(u.later(t).filter(!1))}))}))},u.Observable.prototype.decode=function(t){return A(new u.Desc(this,"decode",[t]),this.combine(u.combineTemplate(t),(function(t,e){return e[t]})))},u.Observable.prototype.scan=function(t,e){var n,r=this;e=L(e);var i=z(t),o=!1;return n=new at(new u.Desc(this,"scan",[t,e]),(function(t){var a=!1,c=s,l=u.more,f=function(){if(!a)return i.forEach((function(e){if(a=o=!0,(l=t(new q((function(){return e}))))===u.noMore)return c(),c=s}))};return c=r.dispatcher.subscribe((function(n){if(n.hasValue()){if(o&&n.isInitial())return u.more;n.isInitial()||f(),a=o=!0;var r=i.getOrElse(void 0),s=e(r,n.value());return i=new N(s),t(n.apply((function(){return s})))}if(n.isEnd()&&(l=f()),l!==u.noMore)return t(n)})),w.whenDoneWith(n,f),c}))},u.Observable.prototype.diff=function(t,e){return e=L(e),A(new u.Desc(this,"diff",[t,e]),this.scan([t],(function(t,n){return[n,e(t[0],n)]})).filter((function(t){return 2===t.length})).map((function(t){return t[1]})))},u.Observable.prototype.doAction=function(){var t=T(arguments);return A(new u.Desc(this,"doAction",[t]),this.withHandler((function(e){return e.hasValue()&&t(e.value()),this.push(e)})))},u.Observable.prototype.doEnd=function(){var t=T(arguments);return A(new u.Desc(this,"doEnd",[t]),this.withHandler((function(e){return e.isEnd()&&t(),this.push(e)})))},u.Observable.prototype.doError=function(){var t=T(arguments);return A(new u.Desc(this,"doError",[t]),this.withHandler((function(e){return e.isError()&&t(e.error),this.push(e)})))},u.Observable.prototype.doLog=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return A(new u.Desc(this,"doLog",e),this.withHandler((function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log.apply(console,e.concat([t.log()])),this.push(t)})))},u.Observable.prototype.endOnError=function(t){null==t&&(t=!0);for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return R(this,t,n,(function(t){return A(new u.Desc(this,"endOnError",[]),this.withHandler((function(e){return e.isError()&&t(e.error)?(this.push(e),this.push(Q())):this.push(e)})))}))},tt.prototype.errors=function(){return A(new u.Desc(this,"errors",[]),this.filter((function(){return!1})))},u.Observable.prototype.take=function(t){return t<=0?u.never():A(new u.Desc(this,"take",[t]),this.withHandler((function(e){return e.hasValue()?--t>0?this.push(e):(0===t&&this.push(e),this.push(Q()),u.noMore):this.push(e)})))},u.Observable.prototype.first=function(){return A(new u.Desc(this,"first",[]),this.take(1))},u.Observable.prototype.mapError=function(){var t=T(arguments);return A(new u.Desc(this,"mapError",[t]),this.withHandler((function(e){return e.isError()?this.push(J(t(e.error))):this.push(e)})))},u.Observable.prototype.flatMapError=function(t){var e=new u.Desc(this,"flatMapError",[t]);return A(e,this.mapError((function(t){return new G(t)})).flatMap((function(e){return e instanceof G?t(e.error):u.once(e)})))},u.EventStream.prototype.flatScan=function(t,e){var n=t;return this.flatMapConcat((function(t){return dt(e(n,t)).doAction((function(t){return n=t}))})).toProperty(t)},u.EventStream.prototype.sampledBy=function(t,e){return A(new u.Desc(this,"sampledBy",[t,e]),this.toProperty().sampledBy(t,e))},u.Property.prototype.sampledBy=function(t,e){var n=!1;null!=e?e=L(e):(n=!0,e=function(t){return t.value()});var r=new x(this,!1,n),i=new x(t,!0,n),o=u.when([r,i],e),a=t._isProperty?o.toProperty():o;return A(new u.Desc(this,"sampledBy",[t,e]),a)},u.Property.prototype.sample=function(t){return A(new u.Desc(this,"sample",[t]),this.sampledBy(u.interval(t,{})))},u.Observable.prototype.map=function(t){if(t&&t._isProperty)return t.sampledBy(this,c);for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return R(this,t,n,(function(t){return A(new u.Desc(this,"map",[t]),this.withHandler((function(e){return this.push(e.fmap(t))})))}))},u.Observable.prototype.fold=function(t,e){return A(new u.Desc(this,"fold",[t,e]),this.scan(t,e).sampledBy(this.filter(!1).mapEnd().toProperty()))},tt.prototype.reduce=tt.prototype.fold;var mt=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]];function yt(t){return[t,Q()]}u.fromEventTarget=function(t,e,n){var r=function(t){for(var e,n=0;n<mt.length;n++){var r=[t[(e=mt[n])[0]],t[e[1]]];if(r[0]&&r[1])return r}for(var i=0;i<mt.length;i++){var o=t[(e=mt[i])[0]];if(o)return[o,function(){}]}throw new G("No suitable event methods in "+t)}(t),i=r[0],o=r[1],a=new u.Desc(u,"fromEvent",[t,e]);return A(a,u.fromBinder((function(n){return i.call(t,e,n),function(){return o.call(t,e,n)}}),n))},u.fromEvent=u.fromEventTarget,u.fromPoll=function(t,e){var n=new u.Desc(u,"fromPoll",[t,e]);return A(n,u.fromBinder((function(e){var n=u.scheduler.setInterval(e,t);return function(){return u.scheduler.clearInterval(n)}}),e))},u.fromPromise=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?yt:arguments[2];return A(new u.Desc(u,"fromPromise",[t]),u.fromBinder((function(n){var r=t.then(n,(function(t){return n(new G(t))}));return r&&"function"==typeof r.done&&r.done(),e?function(){if("function"==typeof t.abort)return t.abort()}:function(){}}),n))},u.Observable.prototype.groupBy=function(t){var e=arguments.length<=1||void 0===arguments[1]?u._.id:arguments[1],n={},r=this;return r.filter((function(e){return!n[t(e)]})).map((function(i){var o=t(i),a=r.filter((function(e){return t(e)===o})),s=u.once(i).concat(a),c=e(s,i).withHandler((function(t){if(this.push(t),t.isEnd())return delete n[o]}));return n[o]=c,c}))},u.fromArray=function(t){if(function(t){if(!p(t))throw new a("not an array : "+t)}(t),t.length){var e=0,n=new rt(new u.Desc(u,"fromArray",[t]),(function(r){var i=!1,o=u.more,a=!1,s=!1;return function c(){if(s=!0,!a){for(a=!0;s;)if(s=!1,o!==u.noMore&&!i){var l=t[e++];(o=r(X(l)))!==u.noMore&&(e===t.length?r(Q()):w.afterTransaction(n,c))}return a=!1}}(),function(){return i=!0}}));return n}return A(new u.Desc(u,"fromArray",t),u.never())},u.EventStream.prototype.holdWhen=function(t){var e=!1,n=[],r=this,i=!1;return new rt(new u.Desc(this,"holdWhen",[t]),(function(o){var u=new et,a=!1,s=function(t){if("function"==typeof t&&t(),u.empty()&&a)return o(Q())};return u.add((function(r,u){return t.subscribeInternal((function(t){if(!t.hasValue())return t.isEnd()?s(u):o(t);if(!(e=t.value())){var r=n;return n=[],function(){for(var t,e=[],n=0;n<r.length;n++)t=r[n],e.push(o(J(t)));return i&&(e.push(o(Q())),u()),e}()}}))})),u.add((function(t,u){return r.subscribeInternal((function(t){return e&&t.hasValue()?n.push(t.value()):t.isEnd()&&n.length?(i=!0,s(u)):o(t)}))})),a=!0,s(),u.unsubscribe}))},u.interval=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return A(new u.Desc(u,"interval",[t,e]),u.fromPoll(t,(function(){return J(e)})))},u.$={},u.$.asEventStream=function(t,e,n){var r=this;return y.isFunction(e)&&(n=e,e=void 0),A(new u.Desc(this.selector||this,"asEventStream",[t]),u.fromBinder((function(n){return r.on(t,e,n),function(){return r.off(t,e,n)}}),n))},"undefined"!=typeof jQuery&&jQuery&&(jQuery.fn.asEventStream=u.$.asEventStream),"undefined"!=typeof Zepto&&Zepto&&(Zepto.fn.asEventStream=u.$.asEventStream),u.Observable.prototype.last=function(){var t;return A(new u.Desc(this,"last",[]),this.withHandler((function(e){if(e.isEnd())return t&&this.push(t),this.push(Q()),u.noMore;t=e})))},u.Observable.prototype.log=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.subscribe((function(t){"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,e.concat([t.log()]))})),this},u.EventStream.prototype.merge=function(t){!function(t){if(!(null!=t?t._isEventStream:void 0))throw new a("not an EventStream : "+t)}(t);return A(new u.Desc(this,"merge",[t]),u.mergeAll(this,t))},u.mergeAll=function(){var t=st(arguments);return t.length?new rt(new u.Desc(u,"mergeAll",t),(function(e){var n=0,r=y.map((function(r){return function(i){return r.dispatcher.subscribe((function(r){if(r.isEnd())return++n===t.length?e(Q()):u.more;var o=e(r);return o===u.noMore&&i(),o}))}}),t);return new u.CompositeUnsubscribe(r).unsubscribe})):u.never()},u.repeatedly=function(t,e){var n=0;return A(new u.Desc(u,"repeatedly",[t,e]),u.fromPoll(t,(function(){return e[n++%e.length]})))},u.repeat=function(t){var e=0;return u.fromBinder((function(n){var r=!1,i=u.more,o=function(){};function a(t){return t.isEnd()?r?s():r=!0:i=n(t)}function s(){var s;for(r=!0;r&&i!==u.noMore;)s=t(e++),r=!1,s?o=s.subscribeInternal(a):n(Q());return r=!0}return s(),function(){return o()}}))},u.retry=function(t){if(!y.isFunction(t.source))throw new a("'source' option has to be a function");var e=t.source,n=t.retries||0,r=0,i=t.delay||function(){return 0},o=t.isRetryable||function(){return!0},s=!1,c=null;return A(new u.Desc(u,"retry",[t]),u.repeat((function(t){function a(){return e(t).endOnError().withHandler((function(t){return t.isError()?o((c=t).error)&&(0===n||r<n)?void 0:(s=!0,this.push(t)):(t.hasValue()&&(c=null,s=!0),this.push(t))}))}if(s)return null;if(c){var l={error:c.error,retriesDone:r},f=u.later(i(l)).filter(!1);return r++,f.concat(u.once().flatMap(a))}return a()})))},u.sequentially=function(t,e){var n=0;return A(new u.Desc(u,"sequentially",[t,e]),u.fromPoll(t,(function(){var t=e[n++];return n<e.length?t:n===e.length?[t,Q()]:Q()})))},u.Observable.prototype.skip=function(t){return A(new u.Desc(this,"skip",[t]),this.withHandler((function(e){return e.hasValue()&&t>0?(t--,u.more):this.push(e)})))},u.EventStream.prototype.skipUntil=function(t){var e=t.take(1).map(!0).toProperty(!1);return A(new u.Desc(this,"skipUntil",[t]),this.filter(e))},u.EventStream.prototype.skipWhile=function(t){f(t);for(var e=!1,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return R(this,t,r,(function(t){return A(new u.Desc(this,"skipWhile",[t]),this.withHandler((function(n){return!e&&n.hasValue()&&t(n.value())?u.more:(n.hasValue()&&(e=!0),this.push(n))})))}))},u.Observable.prototype.slidingWindow=function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return A(new u.Desc(this,"slidingWindow",[t,e]),this.scan([],(function(e,n){return e.concat([n]).slice(-t)})).filter((function(t){return t.length>=e})))};var bt=[];Z=function(t){if(bt.length&&!Z.running)try{Z.running=!0,bt.forEach((function(e){e(t)}))}finally{delete Z.running}};function wt(t){this.observable=t}u.spy=function(t){return bt.push(t)},u.Property.prototype.startWith=function(t){return A(new u.Desc(this,"startWith",[t]),this.scan(t,(function(t,e){return e})))},u.EventStream.prototype.startWith=function(t){return A(new u.Desc(this,"startWith",[t]),u.once(t).concat(this))},u.Observable.prototype.takeWhile=function(t){f(t);for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return R(this,t,n,(function(t){return A(new u.Desc(this,"takeWhile",[t]),this.withHandler((function(e){return e.filter(t)?this.push(e):(this.push(Q()),u.noMore)})))}))},u.Observable.prototype.throttle=function(t){return this.delayChanges(new u.Desc(this,"throttle",[t]),(function(e){return e.bufferWithTime(t).map((function(t){return t[t.length-1]}))}))},tt.prototype.firstToPromise=function(t){var e=this;if("function"!=typeof t){if("function"!=typeof Promise)throw new a("There isn't default Promise, use shim or parameter");t=Promise}return new t((function(t,n){return e.subscribe((function(e){return e.hasValue()&&t(e.value()),e.isError()&&n(e.error),u.noMore}))}))},tt.prototype.toPromise=function(t){return this.last().firstToPromise(t)},u.try=function(t){return function(e){try{return u.once(t(e))}catch(t){return new u.Error(t)}}},u.update=function(t){function e(t){return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(e){return t.apply(void 0,[e].concat(n))}}}for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=r.length-1;o>0;)r[o]instanceof Function||(r[o]=y.always(r[o])),r[o]=e(r[o]),o-=2;return A(new u.Desc(u,"update",[t].concat(r)),u.when.apply(u,r).scan(t,(function(t,e){return e(t)})))},u.zipAsArray=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=st(e);return A(new u.Desc(u,"zipAsArray",r),u.zipWith(r,(function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e})))},u.zipWith=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ct(e),i=r[0],o=r[1];return i=y.map((function(t){return t.toEventStream()}),i),A(new u.Desc(u,"zipWith",[o].concat(i)),u.when(i,o))},u.Observable.prototype.zip=function(t,e){return A(new u.Desc(this,"zip",[t]),u.zipWith([this,t],e||Array))},wt.prototype.subscribe=function(t,e,n){var r="function"==typeof t?{next:t,error:e,complete:n}:t,i={closed:!1,unsubscribe:function(){i.closed=!0,o()}},o=this.observable.subscribe((function(t){t.isError()?(r.error&&r.error(t.error),i.unsubscribe()):t.isEnd()?(i.closed=!0,r.complete&&r.complete()):r.next&&r.next(t.value())}));return i},wt.prototype[m("observable")]=function(){return this},u.Observable.prototype.toESObservable=function(){return new wt(this)},u.Observable.prototype[m("observable")]=u.Observable.prototype.toESObservable,u.fromESObservable=function(t){var e;e=t[m("observable")]?t[m("observable")]():t;var n=new u.Desc(u,"fromESObservable",[e]);return new u.EventStream(n,(function(t){var n=e.subscribe({error:function(){t(new u.Error),t(new u.End)},next:function(e){t(new u.Next(e,!0))},complete:function(){t(new u.End)}});return n.unsubscribe?function(){n.unsubscribe()}:n}))},null!==n(322)&&null!=n(323)?(void 0===(i=function(){return u}.apply(e,[]))||(r.exports=i),null!=this&&(this.Bacon=u)):null!==r&&null!=r.exports?(r.exports=u,u.Bacon=u):this.Bacon=u}).call(this)}).call(this,n(30),n(58)(t))},83:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Speedcore=void 0;var r=n(329),i=function(){function t(t){t.forEach(r.Segment),this._segments=t}return t.prototype._reached=function(t,e,n){if(t>=this._segments.length)return!1;var r=this._segments[t],i=e(r);return r.inclusive?n>=i:n>i},t.prototype._segmentAt=function(t,e){for(var n=0;n<this._segments.length;n++)if(!this._reached(n+1,t,e))return this._segments[n];throw new Error("Unable to find a segment matching a criteria (this should never happen)!")},t.prototype.segmentAtX=function(t){return this._segmentAt(u,t)},t.prototype.segmentAtT=function(t){return this._segmentAt(o,t)},t.prototype.t=function(t){var e=this.segmentAtX(t);return e.t+(t-e.x)/(e.dx||1)},t.prototype.x=function(t){var e=this.segmentAtT(t);return e.x+(t-e.t)*e.dx},t.prototype.dx=function(t){return this.segmentAtT(t).dx},t}();e.Speedcore=i;var o=function(t){return t.t},u=function(t){return t.x}},97:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return u})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return s}));var r=n(78);function i(t,e){if(!e)return()=>{};let n=0;return e.report(0,t),r=>e.report(++n,t,r)}function o(t,e){return t?Promise.resolve(e).tap(e=>{!function(t){return t&&t.byteLength}(e)?t.report(1,1):(t.formatter=r.a,t.report(e.byteLength,e.byteLength))}):e}function u(t,e){let n=0,r=0;return function(...i){return t.report(n,++r),Promise.resolve(e.apply(this,i)).tap(()=>t.report(++n,r))}}function a(t,e){return t.watch(()=>e.report(t.current,t.total,t.extra))}function s(t){let e,n=[],r=null;function i(){e&&t.report(e.current,e.total,e.extra),n.length>0&&(!e||e.progress>=1)&&function(t){if(e===t)return;r&&(r(),r=null);e=t,e&&(r=e.watch(i))}(n.shift())}return{add(t){n.push(t),i()}}}}}]);
//# sourceMappingURL=game-23af908b287d405c52b8.js.map