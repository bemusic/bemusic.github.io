webpackJsonp([2,7],[,,function(t,e,n){(function(e){"use strict";var n=function(t,n,r,i,o,a,s,u){if("production"!==e.env.NODE_ENV&&void 0===n)throw new Error("invariant requires an error message argument");if(!t){var c;if(void 0===n)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,i,o,a,s,u],f=0;c=new Error("Invariant Violation: "+n.replace(/%s/g,function(){return l[f++]}))}throw c.framesToPop=1,c}};t.exports=n}).call(e,n(1))},function(t,e,n){"use strict";function r(t,e){if(null==t)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(t),r=Object.prototype.hasOwnProperty,i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o){var a=Object(o);for(var s in a)r.call(a,s)&&(n[s]=a[s])}}return n}t.exports=r},function(t,e,n){(function(e){"use strict";function r(t,n){Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:function(){return this._store?this._store[n]:null},set:function(t){"production"!==e.env.NODE_ENV?u(!1,"Don't set the %s property of the React element. Instead, specify the correct value when initially creating the element.",n):null,this._store[n]=t}})}function i(t){try{var e={props:!0};for(var n in e)r(t,n);l=!0}catch(i){}}var o=n(60),a=n(17),s=n(3),u=n(5),c={key:!0,ref:!0},l=!1,f=function(t,n,r,i,o,a){if(this.type=t,this.key=n,this.ref=r,this._owner=i,this._context=o,"production"!==e.env.NODE_ENV){this._store={props:a,originalProps:s({},a)};try{Object.defineProperty(this._store,"validated",{configurable:!1,enumerable:!1,writable:!0})}catch(u){}if(this._store.validated=!1,l)return void Object.freeze(this)}this.props=a};f.prototype={_isReactElement:!0},"production"!==e.env.NODE_ENV&&i(f.prototype),f.createElement=function(t,e,n){var r,i={},s=null,u=null;if(null!=e){u=void 0===e.ref?null:e.ref,s=void 0===e.key?null:""+e.key;for(r in e)e.hasOwnProperty(r)&&!c.hasOwnProperty(r)&&(i[r]=e[r])}var l=arguments.length-2;if(1===l)i.children=n;else if(l>1){for(var h=Array(l),p=0;l>p;p++)h[p]=arguments[p+2];i.children=h}if(t&&t.defaultProps){var d=t.defaultProps;for(r in d)"undefined"==typeof i[r]&&(i[r]=d[r])}return new f(t,s,u,a.current,o.current,i)},f.createFactory=function(t){var e=f.createElement.bind(null,t);return e.type=t,e},f.cloneAndReplaceProps=function(t,n){var r=new f(t.type,t.key,t.ref,t._owner,t._context,n);return"production"!==e.env.NODE_ENV&&(r._store.validated=t._store.validated),r},f.cloneElement=function(t,e,n){var r,i=s({},t.props),o=t.key,u=t.ref,l=t._owner;if(null!=e){void 0!==e.ref&&(u=e.ref,l=a.current),void 0!==e.key&&(o=""+e.key);for(r in e)e.hasOwnProperty(r)&&!c.hasOwnProperty(r)&&(i[r]=e[r])}var h=arguments.length-2;if(1===h)i.children=n;else if(h>1){for(var p=Array(h),d=0;h>d;d++)p[d]=arguments[d+2];i.children=p}return new f(t.type,o,u,l,t._context,i)},f.isValidElement=function(t){var e=!(!t||!t._isReactElement);return e},t.exports=f}).call(e,n(1))},function(t,e,n){(function(e){"use strict";var r=n(19),i=r;"production"!==e.env.NODE_ENV&&(i=function(t,e){for(var n=[],r=2,i=arguments.length;i>r;r++)n.push(arguments[r]);if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(e.length<10||/^[s\W]*$/.test(e))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+e);if(0!==e.indexOf("Failed Composite propType: ")&&!t){var o=0,a="Warning: "+e.replace(/%s/g,function(){return n[o++]});console.warn(a);try{throw new Error(a)}catch(s){}}}),t.exports=i}).call(e,n(1))},function(t,e,n){t.exports=n(162)},,,function(t,e,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=i},function(t,e,n){"use strict";var r=n(37),i=r({bubbled:null,captured:null}),o=r({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),a={topLevelTypes:o,PropagationPhases:i};t.exports=a},function(t,e,n){(function(e){"use strict";function r(t,n,r){for(var i in n)n.hasOwnProperty(i)&&("production"!==e.env.NODE_ENV?C("function"==typeof n[i],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",t.displayName||"ReactClass",b[r],i):null)}function i(t,n){var r=O.hasOwnProperty(n)?O[n]:null;R.hasOwnProperty(n)&&("production"!==e.env.NODE_ENV?x(r===A.OVERRIDE_BASE,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",n):x(r===A.OVERRIDE_BASE)),t.hasOwnProperty(n)&&("production"!==e.env.NODE_ENV?x(r===A.DEFINE_MANY||r===A.DEFINE_MANY_MERGED,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n):x(r===A.DEFINE_MANY||r===A.DEFINE_MANY_MERGED))}function o(t,n){if(n){"production"!==e.env.NODE_ENV?x("function"!=typeof n,"ReactClass: You're attempting to use a component class as a mixin. Instead, just use a regular object."):x("function"!=typeof n),"production"!==e.env.NODE_ENV?x(!d.isValidElement(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object."):x(!d.isValidElement(n));var r=t.prototype;n.hasOwnProperty(S)&&j.mixins(t,n.mixins);for(var o in n)if(n.hasOwnProperty(o)&&o!==S){var a=n[o];if(i(r,o),j.hasOwnProperty(o))j[o](t,a);else{var s=O.hasOwnProperty(o),l=r.hasOwnProperty(o),f=a&&a.__reactDontBind,h="function"==typeof a,p=h&&!s&&!l&&!f;if(p)r.__reactAutoBindMap||(r.__reactAutoBindMap={}),r.__reactAutoBindMap[o]=a,r[o]=a;else if(l){var m=O[o];"production"!==e.env.NODE_ENV?x(s&&(m===A.DEFINE_MANY_MERGED||m===A.DEFINE_MANY),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",m,o):x(s&&(m===A.DEFINE_MANY_MERGED||m===A.DEFINE_MANY)),m===A.DEFINE_MANY_MERGED?r[o]=u(r[o],a):m===A.DEFINE_MANY&&(r[o]=c(r[o],a))}else r[o]=a,"production"!==e.env.NODE_ENV&&"function"==typeof a&&n.displayName&&(r[o].displayName=n.displayName+"_"+o)}}}}function a(t,n){if(n)for(var r in n){var i=n[r];if(n.hasOwnProperty(r)){var o=r in j;"production"!==e.env.NODE_ENV?x(!o,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r):x(!o);var a=r in t;"production"!==e.env.NODE_ENV?x(!a,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r):x(!a),t[r]=i}}}function s(t,n){"production"!==e.env.NODE_ENV?x(t&&n&&"object"==typeof t&&"object"==typeof n,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."):x(t&&n&&"object"==typeof t&&"object"==typeof n);for(var r in n)n.hasOwnProperty(r)&&("production"!==e.env.NODE_ENV?x(void 0===t[r],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r):x(void 0===t[r]),t[r]=n[r]);return t}function u(t,e){return function(){var n=t.apply(this,arguments),r=e.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return s(i,n),s(i,r),i}}function c(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function l(t,n){var r=n.bind(t);if("production"!==e.env.NODE_ENV){r.__reactBoundContext=t,r.__reactBoundMethod=n,r.__reactBoundArguments=null;var i=t.constructor.displayName,o=r.bind;r.bind=function(a){for(var s=[],u=1,c=arguments.length;c>u;u++)s.push(arguments[u]);if(a!==t&&null!==a)"production"!==e.env.NODE_ENV?C(!1,"bind(): React component methods may only be bound to the component instance. See %s",i):null;else if(!s.length)return"production"!==e.env.NODE_ENV?C(!1,"bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See %s",i):null,r;var l=o.apply(r,arguments);return l.__reactBoundContext=t,l.__reactBoundMethod=n,l.__reactBoundArguments=s,l}}return r}function f(t){for(var e in t.__reactAutoBindMap)if(t.__reactAutoBindMap.hasOwnProperty(e)){var n=t.__reactAutoBindMap[e];t[e]=l(t,m.guard(n,t.constructor.displayName+"."+e))}}var h=n(89),p=n(17),d=n(4),m=n(180),v=n(26),g=n(63),y=n(64),b=n(43),_=n(65),w=n(3),x=n(2),E=n(37),T=n(20),C=n(5),S=T({mixins:null}),A=E({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),k=[],O={mixins:A.DEFINE_MANY,statics:A.DEFINE_MANY,propTypes:A.DEFINE_MANY,contextTypes:A.DEFINE_MANY,childContextTypes:A.DEFINE_MANY,getDefaultProps:A.DEFINE_MANY_MERGED,getInitialState:A.DEFINE_MANY_MERGED,getChildContext:A.DEFINE_MANY_MERGED,render:A.DEFINE_ONCE,componentWillMount:A.DEFINE_MANY,componentDidMount:A.DEFINE_MANY,componentWillReceiveProps:A.DEFINE_MANY,shouldComponentUpdate:A.DEFINE_ONCE,componentWillUpdate:A.DEFINE_MANY,componentDidUpdate:A.DEFINE_MANY,componentWillUnmount:A.DEFINE_MANY,updateComponent:A.OVERRIDE_BASE},j={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)o(t,e[n])},childContextTypes:function(t,n){"production"!==e.env.NODE_ENV&&r(t,n,y.childContext),t.childContextTypes=w({},t.childContextTypes,n)},contextTypes:function(t,n){"production"!==e.env.NODE_ENV&&r(t,n,y.context),t.contextTypes=w({},t.contextTypes,n)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=u(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,n){"production"!==e.env.NODE_ENV&&r(t,n,y.prop),t.propTypes=w({},t.propTypes,n)},statics:function(t,e){a(t,e)}},M={enumerable:!1,get:function(){var t=this.displayName||this.name||"Component";return"production"!==e.env.NODE_ENV?C(!1,"%s.type is deprecated. Use %s directly to access the class.",t,t):null,Object.defineProperty(this,"type",{value:this}),this}},R={replaceState:function(t,e){_.enqueueReplaceState(this,t),e&&_.enqueueCallback(this,e)},isMounted:function(){if("production"!==e.env.NODE_ENV){var t=p.current;null!==t&&("production"!==e.env.NODE_ENV?C(t._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",t.getName()||"A component"):null,t._warnedAboutRefsInRender=!0)}var n=v.get(this);return n&&n!==g.currentlyMountingInstance},setProps:function(t,e){_.enqueueSetProps(this,t),e&&_.enqueueCallback(this,e)},replaceProps:function(t,e){_.enqueueReplaceProps(this,t),e&&_.enqueueCallback(this,e)}},N=function(){};w(N.prototype,h.prototype,R);var P={createClass:function(t){var n=function(t,r){"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?C(this instanceof n,"Something is calling a React component directly. Use a factory or JSX instead. See: http://fb.me/react-legacyfactory"):null),this.__reactAutoBindMap&&f(this),this.props=t,this.context=r,this.state=null;var i=this.getInitialState?this.getInitialState():null;"production"!==e.env.NODE_ENV&&"undefined"==typeof i&&this.getInitialState._isMockFunction&&(i=null),"production"!==e.env.NODE_ENV?x("object"==typeof i&&!Array.isArray(i),"%s.getInitialState(): must return an object or null",n.displayName||"ReactCompositeComponent"):x("object"==typeof i&&!Array.isArray(i)),this.state=i};n.prototype=new N,n.prototype.constructor=n,k.forEach(o.bind(null,n)),o(n,t),n.getDefaultProps&&(n.defaultProps=n.getDefaultProps()),"production"!==e.env.NODE_ENV&&(n.getDefaultProps&&(n.getDefaultProps.isReactClassApproved={}),n.prototype.getInitialState&&(n.prototype.getInitialState.isReactClassApproved={})),"production"!==e.env.NODE_ENV?x(n.prototype.render,"createClass(...): Class specification must implement a `render` method."):x(n.prototype.render),"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?C(!n.prototype.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",t.displayName||"A component"):null);for(var r in O)n.prototype[r]||(n.prototype[r]=null);if(n.type=n,"production"!==e.env.NODE_ENV)try{Object.defineProperty(n,"type",M)}catch(i){}return n},injection:{injectMixin:function(t){k.push(t)}}};t.exports=P}).call(e,n(1))},function(t,e,n){var r;(function(t,i){(function(){function o(t,e){if(t!==e){var n=t===t,r=e===e;if(t>e||!n||t===A&&r)return 1;if(e>t||!r||e===A&&n)return-1}return 0}function a(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function s(t,e,n){if(e!==e)return y(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function u(t){return"function"==typeof t||!1}function c(t){return"string"==typeof t?t:null==t?"":t+""}function l(t){return t.charCodeAt(0)}function f(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function h(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function p(t,e){return o(t.criteria,e.criteria)||t.index-e.index}function d(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,s=i.length,u=n.length;++r<s;){var c=o(i[r],a[r]);if(c)return r>=u?c:c*(n[r]?1:-1)}return t.index-e.index}function m(t){return Yt[t]}function v(t){return $t[t]}function g(t){return"\\"+Kt[t]}function y(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!==o)return i}return-1}function b(t){return!!t&&"object"==typeof t}function _(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function w(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=z,o[++i]=n);return o}function x(t,e){for(var n,r=-1,i=t.length,o=-1,a=[];++r<i;){var s=t[r],u=e?e(s,r,t):s;r&&n===u||(n=u,a[++o]=s)}return a}function E(t){for(var e=-1,n=t.length;++e<n&&_(t.charCodeAt(e)););return e}function T(t){for(var e=t.length;e--&&_(t.charCodeAt(e)););return e}function C(t){return Xt[t]}function S(t){function e(t){if(b(t)&&!Es(t)&&!(t instanceof i)){if(t instanceof r)return t;if(qo.call(t,"__chain__")&&qo.call(t,"__wrapped__"))return ir(t)}return new r(t)}function n(){}function r(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function i(t){this.__wrapped__=t,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=_a,this.__views__=null}function _(){var t=this.__actions__,e=this.__iteratees__,n=this.__views__,r=new i(this.__wrapped__);return r.__actions__=t?te(t):null,r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=e?te(e):null,r.__takeCount__=this.__takeCount__,r.__views__=n?te(n):null,r}function Z(){if(this.__filtered__){var t=new i(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function rt(){var t=this.__wrapped__.value();if(!Es(t))return tn(t,this.__actions__);var e=this.__dir__,n=0>e,r=Fn(0,t.length,this.__views__),i=r.start,o=r.end,a=o-i,s=n?o:i-1,u=da(a,this.__takeCount__),c=this.__iteratees__,l=c?c.length:0,f=0,h=[];t:for(;a--&&u>f;){s+=e;for(var p=-1,d=t[s];++p<l;){var m=c[p],v=m.iteratee,g=m.type;if(g==V){if(m.done&&(n?s>m.index:s<m.index)&&(m.count=0,m.done=!1),m.index=s,!m.done){var y=m.limit;if(!(m.done=y>-1?m.count++>=y:!v(d)))continue t}}else{var b=v(d);if(g==G)d=b;else if(!b){if(g==W)continue t;break t}}}h[f++]=d}return h}function ot(){this.__data__={}}function Yt(t){return this.has(t)&&delete this.__data__[t]}function $t(t){return"__proto__"==t?A:this.__data__[t]}function Xt(t){return"__proto__"!=t&&qo.call(this.__data__,t)}function Jt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Kt(t){var e=t?t.length:0;for(this.data={hash:la(null),set:new na};e--;)this.push(t[e])}function Qt(t,e){var n=t.data,r="string"==typeof e||wi(e)?n.set.has(e):n.hash[e];return r?0:-1}function Zt(t){var e=this.data;"string"==typeof t||wi(t)?e.set.add(t):e.hash[t]=!0}function te(t,e){var n=-1,r=t.length;for(e||(e=So(r));++n<r;)e[n]=t[n];return e}function ee(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function ne(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function oe(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ae(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[++i]=a)}return o}function se(t,e){for(var n=-1,r=t.length,i=So(r);++n<r;)i[n]=e(t[n],n,t);return i}function ue(t){for(var e=-1,n=t.length,r=ba;++e<n;){var i=t[e];i>r&&(r=i)}return r}function ce(t){for(var e=-1,n=t.length,r=_a;++e<n;){var i=t[e];r>i&&(r=i)}return r}function le(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function fe(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function he(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function pe(t){for(var e=t.length,n=0;e--;)n+=+t[e]||0;return n}function de(t,e){return t===A?e:t}function me(t,e,n,r){return t!==A&&qo.call(r,n)?t:e}function ve(t,e,n){var r=Is(e);Zo.apply(r,Ua(e));for(var i=-1,o=r.length;++i<o;){var a=r[i],s=t[a],u=n(s,e[a],a,t,e);(u===u?u===s:s!==s)&&(s!==A||a in t)||(t[a]=u)}return t}function ge(t,e){for(var n=-1,r=t.length,i=Yn(r),o=e.length,a=So(o);++n<o;){var s=e[n];i?a[n]=Wn(s,r)?t[s]:A:a[n]=t[s]}return a}function ye(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}function be(t,e,n){var r=typeof t;return"function"==r?e===A?t:rn(t,e,n):null==t?ho:"object"==r?Le(t):e===A?bo(t):Fe(t,e)}function _e(t,e,n,r,i,o,a){var s;if(n&&(s=i?n(t,r,i):n(t)),s!==A)return s;if(!wi(t))return t;var u=Es(t);if(u){if(s=Bn(t),!e)return te(t,s)}else{var c=Wo.call(t),l=c==Q;if(c!=et&&c!=Y&&(!l||i))return Ht[c]?qn(t,c,e):i?t:{};if(s=Un(l?{}:t),!e)return Oa(s,t)}o||(o=[]),a||(a=[]);for(var f=o.length;f--;)if(o[f]==t)return a[f];return o.push(t),a.push(s),(u?ee:Oe)(t,function(r,i){s[i]=_e(r,e,n,i,t,o,a)}),s}function we(t,e,n){if("function"!=typeof t)throw new Io(H);return ra(function(){t.apply(A,n)},e)}function xe(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,o=Ln(),a=o==s,u=a&&e.length>=200?Da(e):null,c=e.length;u&&(o=Qt,a=!1,e=u);t:for(;++i<n;){var l=t[i];if(a&&l===l){for(var f=c;f--;)if(e[f]===l)continue t;r.push(l)}else o(e,l,0)<0&&r.push(l)}return r}function Ee(t,e){var n=!0;return Ma(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Te(t,e,n,r){var i=t.length;for(n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=r===A||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)t[n++]=e;return t}function Ce(t,e){var n=[];return Ma(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Se(t,e,n,r){var i;return n(t,function(t,n,o){return e(t,n,o)?(i=r?n:t,!1):void 0}),i}function Ae(t,e,n){for(var r=-1,i=t.length,o=-1,a=[];++r<i;){var s=t[r];if(b(s)&&Yn(s.length)&&(Es(s)||di(s))){e&&(s=Ae(s,e,n));var u=-1,c=s.length;for(a.length+=c;++u<c;)a[++o]=s[u]}else n||(a[++o]=s)}return a}function ke(t,e){return Na(t,e,Fi)}function Oe(t,e){return Na(t,e,Is)}function je(t,e){return Pa(t,e,Is)}function Me(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];Cs(t[a])&&(o[++i]=a)}return o}function Re(t,e,n){if(null!=t){n!==A&&n in nr(t)&&(e=[n]);for(var r=-1,i=e.length;null!=t&&++r<i;)var o=t=t[e[r]];return o}}function Ne(t,e,n,r,i,o){if(t===e)return 0!==t||1/t==1/e;var a=typeof t,s=typeof e;return"function"!=a&&"object"!=a&&"function"!=s&&"object"!=s||null==t||null==e?t!==t&&e!==e:Pe(t,e,Ne,n,r,i,o)}function Pe(t,e,n,r,i,o,a){var s=Es(t),u=Es(e),c=$,l=$;s||(c=Wo.call(t),c==Y?c=et:c!=et&&(s=Oi(t))),u||(l=Wo.call(e),l==Y?l=et:l!=et&&(u=Oi(e)));var f=c==et,h=l==et,p=c==l;if(p&&!s&&!f)return Nn(t,e,c);if(!i){var d=f&&qo.call(t,"__wrapped__"),m=h&&qo.call(e,"__wrapped__");if(d||m)return n(d?t.value():t,m?e.value():e,r,i,o,a)}if(!p)return!1;o||(o=[]),a||(a=[]);for(var v=o.length;v--;)if(o[v]==t)return a[v]==e;o.push(t),a.push(e);var g=(s?Rn:Pn)(t,e,n,r,i,o,a);return o.pop(),a.pop(),g}function Ie(t,e,n,r,i){for(var o=-1,a=e.length,s=!i;++o<a;)if(s&&r[o]?n[o]!==t[e[o]]:!(e[o]in t))return!1;for(o=-1;++o<a;){var u=e[o],c=t[u],l=n[o];if(s&&r[o])var f=c!==A||u in t;else f=i?i(c,l,u):A,f===A&&(f=Ne(l,c,i,!0));if(!f)return!1}return!0}function De(t,e){var n=-1,r=Ba(t),i=Yn(r)?So(r):[];return Ma(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function Le(t){var e=Is(t),n=e.length;if(!n)return fo(!0);if(1==n){var r=e[0],i=t[r];if($n(i))return function(t){return null==t?!1:t[r]===i&&(i!==A||r in nr(t))}}for(var o=So(n),a=So(n);n--;)i=t[e[n]],o[n]=i,a[n]=$n(i);return function(t){return null!=t&&Ie(nr(t),e,o,a)}}function Fe(t,e){var n=Es(t),r=Hn(t)&&$n(e),i=t+"";return t=rr(t),function(o){if(null==o)return!1;var a=i;if(o=nr(o),!(!n&&r||a in o)){if(o=1==t.length?o:Re(o,ze(t,0,-1)),null==o)return!1;a=yr(t),o=nr(o)}return o[a]===e?e!==A||a in o:Ne(e,o[a],null,!0)}}function Be(t,e,n,r,i){if(!wi(t))return t;var o=Yn(e.length)&&(Es(e)||Oi(e));if(!o){var a=Is(e);Zo.apply(a,Ua(e))}return ee(a||e,function(s,u){if(a&&(u=s,s=e[u]),b(s))r||(r=[]),i||(i=[]),Ue(t,e,u,Be,n,r,i);else{var c=t[u],l=n?n(c,s,u,t,e):A,f=l===A;f&&(l=s),!o&&l===A||!f&&(l===l?l===c:c!==c)||(t[u]=l)}}),t}function Ue(t,e,n,r,i,o,a){for(var s=o.length,u=e[n];s--;)if(o[s]==u)return void(t[n]=a[s]);var c=t[n],l=i?i(c,u,n,t,e):A,f=l===A;f&&(l=u,Yn(u.length)&&(Es(u)||Oi(u))?l=Es(c)?c:Ba(c)?te(c):[]:Ss(u)||di(u)?l=di(c)?Ri(c):Ss(c)?c:{}:f=!1),o.push(u),a.push(l),f?t[n]=r(l,u,i,o,a):(l===l?l!==c:c===c)&&(t[n]=l)}function qe(t){return function(e){return null==e?A:e[t]}}function Ve(t){var e=t+"";return t=rr(t),function(n){return Re(n,t,e)}}function We(t,e){for(var n=e.length;n--;){var r=parseFloat(e[n]);if(r!=i&&Wn(r)){var i=r;ia.call(t,r,1)}}return t}function Ge(t,e){return t+Jo(ya()*(e-t+1))}function He(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function ze(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),n=n===A||n>i?i:+n||0,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=So(i);++r<i;)o[r]=t[r+e];return o}function Ye(t,e){var n;return Ma(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function $e(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Xe(t,e,n){var r=Dn(),i=-1;e=se(e,function(t){return r(t)});var o=De(t,function(t){var n=se(e,function(e){return e(t)});return{criteria:n,index:++i,value:t}});return $e(o,function(t,e){return d(t,e,n)})}function Je(t,e){var n=0;return Ma(t,function(t,r,i){n+=+e(t,r,i)||0}),n}function Ke(t,e){var n=-1,r=Ln(),i=t.length,o=r==s,a=o&&i>=200,u=a?Da():null,c=[];u?(r=Qt,o=!1):(a=!1,u=e?[]:c);t:for(;++n<i;){var l=t[n],f=e?e(l,n,t):l;if(o&&l===l){for(var h=u.length;h--;)if(u[h]===f)continue t;e&&u.push(f),c.push(l)}else r(u,f,0)<0&&((e||a)&&u.push(f),c.push(l))}return c}function Qe(t,e){for(var n=-1,r=e.length,i=So(r);++n<r;)i[n]=t[e[n]];return i}function Ze(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ze(t,r?0:o,r?o+1:i):ze(t,r?o+1:0,r?i:o)}function tn(t,e){var n=t;n instanceof i&&(n=n.value());for(var r=-1,o=e.length;++r<o;){var a=[n],s=e[r];Zo.apply(a,s.args),n=s.func.apply(s.thisArg,a)}return n}function en(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&Ea>=i){for(;i>r;){var o=r+i>>>1,a=t[o];(n?e>=a:e>a)?r=o+1:i=o}return i}return nn(t,e,ho,n)}function nn(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!==e,s=e===A;o>i;){var u=Jo((i+o)/2),c=n(t[u]),l=c===c;if(a)var f=l||r;else f=s?l&&(r||c!==A):r?e>=c:e>c;f?i=u+1:o=u}return da(o,xa)}function rn(t,e,n){if("function"!=typeof t)return ho;if(e===A)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function on(t){return Yo.call(t,0)}function an(t,e,n){for(var r=n.length,i=-1,o=pa(t.length-r,0),a=-1,s=e.length,u=So(o+s);++a<s;)u[a]=e[a];for(;++i<r;)u[n[i]]=t[i];for(;o--;)u[a++]=t[i++];return u}function sn(t,e,n){for(var r=-1,i=n.length,o=-1,a=pa(t.length-i,0),s=-1,u=e.length,c=So(a+u);++o<a;)c[o]=t[o];for(var l=o;++s<u;)c[l+s]=e[s];for(;++r<i;)c[l+n[r]]=t[o++];return c}function un(t,e){return function(n,r,i){var o=e?e():{};if(r=Dn(r,i,3),Es(n))for(var a=-1,s=n.length;++a<s;){var u=n[a];t(o,u,r(u,a,n),n)}else Ma(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function cn(t){return ui(function(e,n){var r=-1,i=null==e?0:n.length,o=i>2&&n[i-2],a=i>2&&n[2],s=i>1&&n[i-1];for("function"==typeof o?(o=rn(o,s,5),i-=2):(o="function"==typeof s?s:null,i-=o?1:0),a&&Gn(n[0],n[1],a)&&(o=3>i?null:o,i=1);++r<i;){var u=n[r];u&&t(e,u,o)}return e})}function ln(t,e){return function(n,r){var i=n?Ba(n):0;if(!Yn(i))return t(n,r);for(var o=e?i:-1,a=nr(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function fn(t){return function(e,n,r){for(var i=nr(e),o=r(e),a=o.length,s=t?a:-1;t?s--:++s<a;){var u=o[s];if(n(i[u],u,i)===!1)break}return e}}function hn(t,e){function n(){var i=this&&this!==re&&this instanceof n?r:t;return i.apply(e,arguments)}var r=dn(t);return n}function pn(t){return function(e){for(var n=-1,r=co(Xi(e)),i=r.length,o="";++n<i;)o=t(o,r[n],n);return o}}function dn(t){return function(){var e=ja(t.prototype),n=t.apply(e,arguments);return wi(n)?n:e}}function mn(t){function e(n,r,i){i&&Gn(n,r,i)&&(r=null);var o=Mn(n,t,null,null,null,null,null,r);return o.placeholder=e.placeholder,o}return e}function vn(t,e){return function(n,r,i){i&&Gn(n,r,i)&&(r=null);var o=Dn(),a=null==r;if(o===be&&a||(a=!1,r=o(r,i,3)),a){var s=Es(n);if(s||!ki(n))return t(s?n:er(n));r=l}return In(n,r,e)}}function gn(t,e){return function(n,r,i){if(r=Dn(r,i,3),Es(n)){var o=a(n,r,e);return o>-1?n[o]:A}return Se(n,r,t)}}function yn(t){return function(e,n,r){return e&&e.length?(n=Dn(n,r,3),a(e,n,t)):-1}}function bn(t){return function(e,n,r){return n=Dn(n,r,3),Se(e,n,t,!0)}}function _n(t){return function(){var e=arguments.length;if(!e)return function(){return arguments[0]};for(var n,i=t?e:-1,o=0,a=So(e);t?i--:++i<e;){var s=a[o++]=arguments[i];if("function"!=typeof s)throw new Io(H);var u=n?"":Fa(s);n="wrapper"==u?new r([]):n}for(i=n?-1:e;++i<e;){s=a[i],u=Fa(s);var c="wrapper"==u?La(s):null;n=c&&zn(c[0])?n[Fa(c[0])].apply(n,c[3]):1==s.length&&zn(s)?n[u]():n.thru(s)}return function(){var t=arguments;if(n&&1==t.length&&Es(t[0]))return n.plant(t[0]).value();for(var r=0,i=a[r].apply(this,t);++r<e;)i=a[r].call(this,i);return i}}}function wn(t,e){return function(n,r,i){return"function"==typeof r&&i===A&&Es(n)?t(n,r):e(n,rn(r,i,3))}}function xn(t){return function(e,n,r){return("function"!=typeof n||r!==A)&&(n=rn(n,r,3)),t(e,n,Fi)}}function En(t){return function(e,n,r){return("function"!=typeof n||r!==A)&&(n=rn(n,r,3)),t(e,n)}}function Tn(t){return function(e,n,r){return e=c(e),e&&(t?e:"")+kn(e,n,r)+(t?"":e)}}function Cn(t){var e=ui(function(n,r){var i=w(r,e.placeholder);return Mn(n,t,null,r,i)});return e}function Sn(t,e){return function(n,r,i,o){var a=arguments.length<3;return"function"==typeof r&&o===A&&Es(n)?t(n,r,i,a):He(n,Dn(r,o,4),i,a,e)}}function An(t,e,n,r,i,o,a,s,u,c){function l(){for(var b=arguments.length,_=b,x=So(b);_--;)x[_]=arguments[_];if(r&&(x=an(x,r,i)),o&&(x=sn(x,o,a)),d||v){var E=l.placeholder,T=w(x,E);if(b-=T.length,c>b){var C=s?te(s):null,S=pa(c-b,0),k=d?T:null,M=d?null:T,R=d?x:null,N=d?null:x;e|=d?P:I,e&=~(d?I:P),m||(e&=~(O|j));var D=[t,e,n,R,k,N,M,C,u,S],L=An.apply(A,D);return zn(t)&&qa(L,D),L.placeholder=E,L}}var F=h?n:this;p&&(t=F[y]),s&&(x=Qn(x,s)),f&&u<x.length&&(x.length=u);var B=this&&this!==re&&this instanceof l?g||dn(t):t;return B.apply(F,x)}var f=e&D,h=e&O,p=e&j,d=e&R,m=e&M,v=e&N,g=!p&&dn(t),y=t;return l}function kn(t,e,n){var r=t.length;if(e=+e,r>=e||!fa(e))return"";var i=e-r;return n=null==n?" ":n+"",eo(n,$o(i/n.length)).slice(0,i)}function On(t,e,n,r){function i(){for(var e=-1,s=arguments.length,u=-1,c=r.length,l=So(s+c);++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++e];var f=this&&this!==re&&this instanceof i?a:t;return f.apply(o?n:this,l)}var o=e&O,a=dn(t);return i}function jn(t){return function(e,n,r,i){var o=Dn(r);return o===be&&null==r?en(e,n,t):nn(e,n,o(r,i,1),t)}}function Mn(t,e,n,r,i,o,a,s){var u=e&j;if(!u&&"function"!=typeof t)throw new Io(H);var c=r?r.length:0;if(c||(e&=~(P|I),r=i=null),c-=i?i.length:0,e&I){var l=r,f=i;r=i=null}var h=u?null:La(t),p=[t,e,n,r,i,l,f,o,a,s];if(h&&(Xn(p,h),e=p[1],s=p[9]),p[9]=null==s?u?0:t.length:pa(s-c,0)||0,e==O)var d=hn(p[0],p[2]);else d=e!=P&&e!=(O|P)||p[4].length?An.apply(A,p):On.apply(A,p);var m=h?Ia:qa;return m(d,p)}function Rn(t,e,n,r,i,o,a){var s=-1,u=t.length,c=e.length,l=!0;if(u!=c&&!(i&&c>u))return!1;for(;l&&++s<u;){var f=t[s],h=e[s];if(l=A,r&&(l=i?r(h,f,s):r(f,h,s)),l===A)if(i)for(var p=c;p--&&(h=e[p],!(l=f&&f===h||n(f,h,r,i,o,a))););else l=f&&f===h||n(f,h,r,i,o,a)}return!!l}function Nn(t,e,n){switch(n){case X:case J:return+t==+e;case K:return t.name==e.name&&t.message==e.message;case tt:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case nt:case it:return t==e+""}return!1}function Pn(t,e,n,r,i,o,a){var s=Is(t),u=s.length,c=Is(e),l=c.length;if(u!=l&&!i)return!1;for(var f=i,h=-1;++h<u;){var p=s[h],d=i?p in e:qo.call(e,p);if(d){var m=t[p],v=e[p];d=A,r&&(d=i?r(v,m,p):r(m,v,p)),d===A&&(d=m&&m===v||n(m,v,r,i,o,a))}if(!d)return!1;f||(f="constructor"==p)}if(!f){var g=t.constructor,y=e.constructor;if(g!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y))return!1}return!0}function In(t,e,n){var r=n?_a:ba,i=r,o=i;return Ma(t,function(t,a,s){var u=e(t,a,s);((n?i>u:u>i)||u===r&&u===o)&&(i=u,o=t)}),o}function Dn(t,n,r){var i=e.callback||lo;return i=i===lo?be:i,r?i(t,n,r):i}function Ln(t,n,r){var i=e.indexOf||mr;return i=i===mr?s:i,t?i(t,n,r):i}function Fn(t,e,n){for(var r=-1,i=n?n.length:0;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=da(e,t+a);break;case"takeRight":t=pa(t,e-a)}}return{start:t,end:e}}function Bn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&qo.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Un(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Ro),new e}function qn(t,e,n){var r=t.constructor;switch(e){case at:return on(t);case X:case J:return new r(+t);case st:case ut:case ct:case lt:case ft:case ht:case pt:case dt:case mt:var i=t.buffer;return new r(n?on(i):i,t.byteOffset,t.length);case tt:case it:return new r(t);case nt:var o=new r(t.source,Pt.exec(t));o.lastIndex=t.lastIndex}return o}function Vn(t,e,n){null==t||Hn(e,t)||(e=rr(e),t=1==e.length?t:Re(t,ze(e,0,-1)),e=yr(e));var r=null==t?t:t[e];return null==r?A:r.apply(t,n)}function Wn(t,e){return t=+t,e=null==e?Ca:e,t>-1&&t%1==0&&e>t}function Gn(t,e,n){if(!wi(n))return!1;var r=typeof e;if("number"==r)var i=Ba(n),o=Yn(i)&&Wn(e,i);else o="string"==r&&e in n;if(o){var a=n[e];return t===t?t===a:a!==a}return!1}function Hn(t,e){var n=typeof t;if("string"==n&&At.test(t)||"number"==n)return!0;if(Es(t))return!1;var r=!St.test(t);return r||null!=e&&t in nr(e)}function zn(t){var n=Fa(t);return!!n&&t===e[n]&&n in i.prototype}function Yn(t){
return"number"==typeof t&&t>-1&&t%1==0&&Ca>=t}function $n(t){return t===t&&(0===t?1/t>0:!wi(t))}function Xn(t,e){var n=t[1],r=e[1],i=n|r,o=D>i,a=r==D&&n==R||r==D&&n==L&&t[7].length<=e[8]||r==(D|L)&&n==R;if(!o&&!a)return t;r&O&&(t[2]=e[2],i|=n&O?0:M);var s=e[3];if(s){var u=t[3];t[3]=u?an(u,s,e[4]):te(s),t[4]=u?w(t[3],z):te(e[4])}return s=e[5],s&&(u=t[5],t[5]=u?sn(u,s,e[6]):te(s),t[6]=u?w(t[5],z):te(e[6])),s=e[7],s&&(t[7]=te(s)),r&D&&(t[8]=null==t[8]?e[8]:da(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Jn(t,e){t=nr(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function Kn(t,e){var n={};return ke(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function Qn(t,e){for(var n=t.length,r=da(e.length,n),i=te(t);r--;){var o=e[r];t[r]=Wn(o,n)?i[o]:A}return t}function Zn(t){{var n;e.support}if(!b(t)||Wo.call(t)!=et||!qo.call(t,"constructor")&&(n=t.constructor,"function"==typeof n&&!(n instanceof n)))return!1;var r;return ke(t,function(t,e){r=e}),r===A||qo.call(t,r)}function tr(t){for(var n=Fi(t),r=n.length,i=r&&t.length,o=e.support,a=i&&Yn(i)&&(Es(t)||o.nonEnumArgs&&di(t)),s=-1,u=[];++s<r;){var c=n[s];(a&&Wn(c,i)||qo.call(t,c))&&u.push(c)}return u}function er(t){return null==t?[]:Yn(Ba(t))?wi(t)?t:Ro(t):Gi(t)}function nr(t){return wi(t)?t:Ro(t)}function rr(t){if(Es(t))return t;var e=[];return c(t).replace(kt,function(t,n,r,i){e.push(r?i.replace(Rt,"$1"):n||t)}),e}function ir(t){return t instanceof i?t.clone():new r(t.__wrapped__,t.__chain__,te(t.__actions__))}function or(t,e,n){e=(n?Gn(t,e,n):null==e)?1:pa(+e||1,1);for(var r=0,i=t?t.length:0,o=-1,a=So($o(i/e));i>r;)a[++o]=ze(t,r,r+=e);return a}function ar(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i}function sr(t,e,n){var r=t?t.length:0;return r?((n?Gn(t,e,n):null==e)&&(e=1),ze(t,0>e?0:e)):[]}function ur(t,e,n){var r=t?t.length:0;return r?((n?Gn(t,e,n):null==e)&&(e=1),e=r-(+e||0),ze(t,0,0>e?0:e)):[]}function cr(t,e,n){return t&&t.length?Ze(t,Dn(e,n,3),!0,!0):[]}function lr(t,e,n){return t&&t.length?Ze(t,Dn(e,n,3),!0):[]}function fr(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Gn(t,e,n)&&(n=0,r=i),Te(t,e,n,r)):[]}function hr(t){return t?t[0]:A}function pr(t,e,n){var r=t?t.length:0;return n&&Gn(t,e,n)&&(e=!1),r?Ae(t,e):[]}function dr(t){var e=t?t.length:0;return e?Ae(t,!0):[]}function mr(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?pa(r+n,0):n;else if(n){var i=en(t,e),o=t[i];return(e===e?e===o:o!==o)?i:-1}return s(t,e,n||0)}function vr(t){return ur(t,1)}function gr(){for(var t=[],e=-1,n=arguments.length,r=[],i=Ln(),o=i==s,a=[];++e<n;){var u=arguments[e];(Es(u)||di(u))&&(t.push(u),r.push(o&&u.length>=120?Da(e&&u):null))}if(n=t.length,2>n)return a;var c=t[0],l=-1,f=c?c.length:0,h=r[0];t:for(;++l<f;)if(u=c[l],(h?Qt(h,u):i(a,u,0))<0){for(e=n;--e;){var p=r[e];if((p?Qt(p,u):i(t[e],u,0))<0)continue t}h&&h.push(u),a.push(u)}return a}function yr(t){var e=t?t.length:0;return e?t[e-1]:A}function br(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?pa(r+n,0):da(n||0,r-1))+1;else if(n){i=en(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return y(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function _r(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Ln(),i=t.length;++n<i;)for(var o=0,a=t[n];(o=r(e,a,o))>-1;)ia.call(e,o,1);return e}function wr(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],a=t.length;for(e=Dn(e,n,3);++i<a;){var s=t[i];e(s,i,t)&&(r.push(s),o.push(i))}return We(t,o),r}function xr(t){return sr(t,1)}function Er(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Gn(t,e,n)&&(e=0,n=r),ze(t,e,n)):[]}function Tr(t,e,n){var r=t?t.length:0;return r?((n?Gn(t,e,n):null==e)&&(e=1),ze(t,0,0>e?0:e)):[]}function Cr(t,e,n){var r=t?t.length:0;return r?((n?Gn(t,e,n):null==e)&&(e=1),e=r-(+e||0),ze(t,0>e?0:e)):[]}function Sr(t,e,n){return t&&t.length?Ze(t,Dn(e,n,3),!1,!0):[]}function Ar(t,e,n){return t&&t.length?Ze(t,Dn(e,n,3)):[]}function kr(t,e,n,r){var i=t?t.length:0;if(!i)return[];null!=e&&"boolean"!=typeof e&&(r=n,n=Gn(t,e,r)?null:e,e=!1);var o=Dn();return(o!==be||null!=n)&&(n=o(n,r,3)),e&&Ln()==s?x(t,n):Ke(t,n)}function Or(t){for(var e=-1,n=(t&&t.length&&ue(se(t,Ba)))>>>0,r=So(n);++e<n;)r[e]=se(t,qe(e));return r}function jr(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Es(n)||di(n))var r=r?xe(r,n).concat(xe(n,r)):n}return r?Ke(r):[]}function Mr(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||Es(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Rr(t){var n=e(t);return n.__chain__=!0,n}function Nr(t,e,n){return e.call(n,t),t}function Pr(t,e,n){return e.call(n,t)}function Ir(){return Rr(this)}function Dr(){return new r(this.value(),this.__chain__)}function Lr(t){for(var e,r=this;r instanceof n;){var i=ir(r);e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function Fr(){var t=this.__wrapped__;return t instanceof i?(this.__actions__.length&&(t=new i(this)),new r(t.reverse(),this.__chain__)):this.thru(function(t){return t.reverse()})}function Br(){return this.value()+""}function Ur(){return tn(this.__wrapped__,this.__actions__)}function qr(t,e,n){var r=Es(t)?oe:Ee;return n&&Gn(t,e,n)&&(e=null),("function"!=typeof e||n!==A)&&(e=Dn(e,n,3)),r(t,e)}function Vr(t,e,n){var r=Es(t)?ae:Ce;return e=Dn(e,n,3),r(t,e)}function Wr(t,e){return Za(t,Le(e))}function Gr(t,e,n,r){var i=t?Ba(t):0;return Yn(i)||(t=Gi(t),i=t.length),i?(n="number"!=typeof n||r&&Gn(e,n,r)?0:0>n?pa(i+n,0):n||0,"string"==typeof t||!Es(t)&&ki(t)?i>n&&t.indexOf(e,n)>-1:Ln(t,e,n)>-1):!1}function Hr(t,e,n){var r=Es(t)?se:De;return e=Dn(e,n,3),r(t,e)}function zr(t,e){return Hr(t,bo(e))}function Yr(t,e,n){var r=Es(t)?ae:Ce;return e=Dn(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function $r(t,e,n){if(n?Gn(t,e,n):null==e){t=er(t);var r=t.length;return r>0?t[Ge(0,r-1)]:A}var i=Xr(t);return i.length=da(0>e?0:+e||0,i.length),i}function Xr(t){t=er(t);for(var e=-1,n=t.length,r=So(n);++e<n;){var i=Ge(0,e);e!=i&&(r[e]=r[i]),r[i]=t[e]}return r}function Jr(t){var e=t?Ba(t):0;return Yn(e)?e:Is(t).length}function Kr(t,e,n){var r=Es(t)?he:Ye;return n&&Gn(t,e,n)&&(e=null),("function"!=typeof e||n!==A)&&(e=Dn(e,n,3)),r(t,e)}function Qr(t,e,n){if(null==t)return[];n&&Gn(t,e,n)&&(e=null);var r=-1;e=Dn(e,n,3);var i=De(t,function(t,n,i){return{criteria:e(t,n,i),index:++r,value:t}});return $e(i,p)}function Zr(t,e,n,r){return null==t?[]:(r&&Gn(e,n,r)&&(n=null),Es(e)||(e=null==e?[]:[e]),Es(n)||(n=null==n?[]:[n]),Xe(t,e,n))}function ti(t,e){return Vr(t,Le(e))}function ei(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Io(H);var n=t;t=e,e=n}return t=fa(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function ni(t,e,n){return n&&Gn(t,e,n)&&(e=null),e=t&&null==e?t.length:pa(+e||0,0),Mn(t,D,null,null,null,null,e)}function ri(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Io(H);var r=t;t=e,e=r}return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}}function ii(t,e,n){function r(){h&&Xo(h),u&&Xo(u),u=h=p=A}function i(){var n=e-(ls()-l);if(0>=n||n>e){u&&Xo(u);var r=p;u=h=p=A,r&&(d=ls(),c=t.apply(f,s),h||u||(s=f=null))}else h=ra(i,n)}function o(){h&&Xo(h),u=h=p=A,(v||m!==e)&&(d=ls(),c=t.apply(f,s),h||u||(s=f=null))}function a(){if(s=arguments,l=ls(),f=this,p=v&&(h||!g),m===!1)var n=g&&!h;else{u||g||(d=l);var r=m-(l-d),a=0>=r||r>m;a?(u&&(u=Xo(u)),d=l,c=t.apply(f,s)):u||(u=ra(o,r))}return a&&h?h=Xo(h):h||e===m||(h=ra(i,e)),n&&(a=!0,c=t.apply(f,s)),!a||h||u||(s=f=null),c}var s,u,c,l,f,h,p,d=0,m=!1,v=!0;if("function"!=typeof t)throw new Io(H);if(e=0>e?0:+e||0,n===!0){var g=!0;v=!1}else wi(n)&&(g=n.leading,m="maxWait"in n&&pa(+n.maxWait||0,e),v="trailing"in n?n.trailing:v);return a.cancel=r,a}function oi(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Io(H);var n=function(){var r=arguments,i=n.cache,o=e?e.apply(this,r):r[0];if(i.has(o))return i.get(o);var a=t.apply(this,r);return i.set(o,a),a};return n.cache=new oi.Cache,n}function ai(t){if("function"!=typeof t)throw new Io(H);return function(){return!t.apply(this,arguments)}}function si(t){return ri(2,t)}function ui(t,e){if("function"!=typeof t)throw new Io(H);return e=pa(e===A?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=pa(n.length-e,0),o=So(i);++r<i;)o[r]=n[e+r];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var a=So(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=o,t.apply(this,a)}}function ci(t){if("function"!=typeof t)throw new Io(H);return function(e){return t.apply(this,e)}}function li(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Io(H);return n===!1?r=!1:wi(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),zt.leading=r,zt.maxWait=+e,zt.trailing=i,ii(t,e,zt)}function fi(t,e){return e=null==e?ho:e,Mn(e,P,null,[t],[])}function hi(t,e,n,r){return e&&"boolean"!=typeof e&&Gn(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),n="function"==typeof n&&rn(n,r,1),_e(t,e,n)}function pi(t,e,n){return e="function"==typeof e&&rn(e,n,1),_e(t,!0,e)}function di(t){var e=b(t)?t.length:A;return Yn(e)&&Wo.call(t)==Y}function mi(t){return t===!0||t===!1||b(t)&&Wo.call(t)==X}function vi(t){return b(t)&&Wo.call(t)==J}function gi(t){return!!t&&1===t.nodeType&&b(t)&&Wo.call(t).indexOf("Element")>-1}function yi(t){if(null==t)return!0;var e=Ba(t);return Yn(e)&&(Es(t)||ki(t)||di(t)||b(t)&&Cs(t.splice))?!e:!Is(t).length}function bi(t,e,n,r){if(n="function"==typeof n&&rn(n,r,3),!n&&$n(t)&&$n(e))return t===e;var i=n?n(t,e):A;return i===A?Ne(t,e,n):!!i}function _i(t){return b(t)&&"string"==typeof t.message&&Wo.call(t)==K}function wi(t){var e=typeof t;return"function"==e||!!t&&"object"==e}function xi(t,e,n,r){var i=Is(e),o=i.length;if(!o)return!0;if(null==t)return!1;if(n="function"==typeof n&&rn(n,r,3),t=nr(t),!n&&1==o){var a=i[0],s=e[a];if($n(s))return s===t[a]&&(s!==A||a in t)}for(var u=So(o),c=So(o);o--;)s=u[o]=e[i[o]],c[o]=$n(s);return Ie(t,i,u,c,n)}function Ei(t){return Si(t)&&t!=+t}function Ti(t){return null==t?!1:Wo.call(t)==Q?Ho.test(Uo.call(t)):b(t)&&Dt.test(t)}function Ci(t){return null===t}function Si(t){return"number"==typeof t||b(t)&&Wo.call(t)==tt}function Ai(t){return b(t)&&Wo.call(t)==nt||!1}function ki(t){return"string"==typeof t||b(t)&&Wo.call(t)==it}function Oi(t){return b(t)&&Yn(t.length)&&!!Gt[Wo.call(t)]}function ji(t){return t===A}function Mi(t){var e=t?Ba(t):0;return Yn(e)?e?te(t):[]:Gi(t)}function Ri(t){return ye(t,Fi(t))}function Ni(t,e,n){var r=ja(t);return n&&Gn(t,e,n)&&(e=null),e?Oa(r,e):r}function Pi(t){return Me(t,Fi(t))}function Ii(t,e,n){var r=null==t?A:Re(t,rr(e),e+"");return r===A?n:r}function Di(t,e){if(null==t)return!1;var n=qo.call(t,e);return n||Hn(e)||(e=rr(e),t=1==e.length?t:Re(t,ze(e,0,-1)),e=yr(e),n=null!=t&&qo.call(t,e)),n}function Li(t,e,n){n&&Gn(t,e,n)&&(e=null);for(var r=-1,i=Is(t),o=i.length,a={};++r<o;){var s=i[r],u=t[s];e?qo.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a}function Fi(t){if(null==t)return[];wi(t)||(t=Ro(t));var e=t.length;e=e&&Yn(e)&&(Es(t)||ka.nonEnumArgs&&di(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=So(e),a=e>0;++r<e;)o[r]=r+"";for(var s in t)a&&Wn(s,e)||"constructor"==s&&(i||!qo.call(t,s))||o.push(s);return o}function Bi(t,e,n){var r={};return e=Dn(e,n,3),Oe(t,function(t,n,i){r[n]=e(t,n,i)}),r}function Ui(t){for(var e=-1,n=Is(t),r=n.length,i=So(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function qi(t,e,n){var r=null==t?A:t[e];return r===A&&(null==t||Hn(e,t)||(e=rr(e),t=1==e.length?t:Re(t,ze(e,0,-1)),r=null==t?A:t[yr(e)]),r=r===A?n:r),Cs(r)?r.call(t):r}function Vi(t,e,n){if(null==t)return t;var r=e+"";e=null!=t[r]||Hn(e,t)?[r]:rr(e);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=e[i];wi(s)&&(i==a?s[u]=n:null==s[u]&&(s[u]=Wn(e[i+1])?[]:{})),s=s[u]}return t}function Wi(t,e,n,r){var i=Es(t)||Oi(t);if(e=Dn(e,r,4),null==n)if(i||wi(t)){var o=t.constructor;n=i?Es(t)?new o:[]:ja(Cs(o)&&o.prototype)}else n={};return(i?ee:Oe)(t,function(t,r,i){return e(n,t,r,i)}),n}function Gi(t){return Qe(t,Is(t))}function Hi(t){return Qe(t,Fi(t))}function zi(t,e,n){return e=+e||0,"undefined"==typeof n?(n=e,e=0):n=+n||0,t>=da(e,n)&&t<pa(e,n)}function Yi(t,e,n){n&&Gn(t,e,n)&&(e=n=null);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=ya();return da(t+o*(e-t+parseFloat("1e-"+((o+"").length-1))),e)}return Ge(t,e)}function $i(t){return t=c(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function Xi(t){return t=c(t),t&&t.replace(Lt,m).replace(Mt,"")}function Ji(t,e,n){t=c(t),e+="";var r=t.length;return n=n===A?r:da(0>n?0:+n||0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function Ki(t){return t=c(t),t&&xt.test(t)?t.replace(_t,v):t}function Qi(t){return t=c(t),t&&jt.test(t)?t.replace(Ot,"\\$&"):t}function Zi(t,e,n){t=c(t),e=+e;var r=t.length;if(r>=e||!fa(e))return t;var i=(e-r)/2,o=Jo(i),a=$o(i);return n=kn("",a,n),n.slice(0,o)+t+n}function to(t,e,n){return n&&Gn(t,e,n)&&(e=0),ga(t,e)}function eo(t,e){var n="";if(t=c(t),e=+e,1>e||!t||!fa(e))return n;do e%2&&(n+=t),e=Jo(e/2),t+=t;while(e);return n}function no(t,e,n){return t=c(t),n=null==n?0:da(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function ro(t,n,r){var i=e.templateSettings;r&&Gn(t,n,r)&&(n=r=null),t=c(t),n=ve(Oa({},r||n),i,me);var o,a,s=ve(Oa({},n.imports),i.imports,me),u=Is(s),l=Qe(s,u),f=0,h=n.interpolate||Ft,p="__p += '",d=No((n.escape||Ft).source+"|"+h.source+"|"+(h===Ct?Nt:Ft).source+"|"+(n.evaluate||Ft).source+"|$","g"),m="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Wt+"]")+"\n";t.replace(d,function(e,n,r,i,s,u){return r||(r=i),p+=t.slice(f,u).replace(Bt,g),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=u+e.length,e}),p+="';\n";var v=n.variable;v||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(vt,""):p).replace(gt,"$1").replace(yt,"$1;"),p="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=Hs(function(){return Oo(u,m+"return "+p).apply(A,l)});if(y.source=p,_i(y))throw y;return y}function io(t,e,n){var r=t;return(t=c(t))?(n?Gn(r,e,n):null==e)?t.slice(E(t),T(t)+1):(e+="",t.slice(f(t,e),h(t,e)+1)):t}function oo(t,e,n){var r=t;return t=c(t),t?t.slice((n?Gn(r,e,n):null==e)?E(t):f(t,e+"")):t}function ao(t,e,n){var r=t;return t=c(t),t?(n?Gn(r,e,n):null==e)?t.slice(0,T(t)+1):t.slice(0,h(t,e+"")+1):t}function so(t,e,n){n&&Gn(t,e,n)&&(e=null);var r=F,i=B;if(null!=e)if(wi(e)){var o="separator"in e?e.separator:o;r="length"in e?+e.length||0:r,i="omission"in e?c(e.omission):i}else r=+e||0;if(t=c(t),r>=t.length)return t;var a=r-i.length;if(1>a)return i;var s=t.slice(0,a);if(null==o)return s+i;if(Ai(o)){if(t.slice(a).search(o)){var u,l,f=t.slice(0,a);for(o.global||(o=No(o.source,(Pt.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(f);)l=u.index;s=s.slice(0,null==l?a:l)}}else if(t.indexOf(o,a)!=a){var h=s.lastIndexOf(o);h>-1&&(s=s.slice(0,h))}return s+i}function uo(t){return t=c(t),t&&wt.test(t)?t.replace(bt,C):t}function co(t,e,n){return n&&Gn(t,e,n)&&(e=null),t=c(t),t.match(e||Ut)||[]}function lo(t,e,n){return n&&Gn(t,e,n)&&(e=null),be(t,e)}function fo(t){return function(){return t}}function ho(t){return t}function po(t){return Le(_e(t,!0))}function mo(t,e){return Fe(t,_e(e,!0))}function vo(t,e,n){if(null==n){var r=wi(e),i=r&&Is(e),o=i&&i.length&&Me(e,i);(o?o.length:r)||(o=!1,n=e,e=t,t=this)}o||(o=Me(e,Is(e)));var a=!0,s=-1,u=Cs(t),c=o.length;n===!1?a=!1:wi(n)&&"chain"in n&&(a=n.chain);for(;++s<c;){var l=o[s],f=e[l];t[l]=f,u&&(t.prototype[l]=function(e){return function(){var n=this.__chain__;if(a||n){var r=t(this.__wrapped__),i=r.__actions__=te(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}var o=[this.value()];return Zo.apply(o,arguments),e.apply(t,o)}}(f))}return t}function go(){return t._=Go,this}function yo(){}function bo(t){return Hn(t)?qe(t):Ve(t)}function _o(t){return function(e){return Re(t,rr(e),e+"")}}function wo(t,e,n){n&&Gn(t,e,n)&&(e=n=null),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=pa($o((e-t)/(n||1)),0),o=So(i);++r<i;)o[r]=t,t+=n;return o}function xo(t,e,n){if(t=Jo(t),1>t||!fa(t))return[];var r=-1,i=So(da(t,wa));for(e=rn(e,n,1);++r<t;)wa>r?i[r]=e(r):e(r);return i}function Eo(t){var e=++Vo;return c(t)+e}function To(t,e){return(+t||0)+(+e||0)}function Co(t,e,n){n&&Gn(t,e,n)&&(e=null);var r=Dn(),i=null==e;return r===be&&i||(i=!1,e=r(e,n,3)),i?pe(Es(t)?t:er(t)):Je(t,e)}t=t?ie.defaults(re.Object(),t,ie.pick(re,Vt)):re;var So=t.Array,Ao=t.Date,ko=t.Error,Oo=t.Function,jo=t.Math,Mo=t.Number,Ro=t.Object,No=t.RegExp,Po=t.String,Io=t.TypeError,Do=So.prototype,Lo=Ro.prototype,Fo=Po.prototype,Bo=(Bo=t.window)&&Bo.document,Uo=Oo.prototype.toString,qo=Lo.hasOwnProperty,Vo=0,Wo=Lo.toString,Go=t._,Ho=No("^"+Qi(Wo).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zo=Ti(zo=t.ArrayBuffer)&&zo,Yo=Ti(Yo=zo&&new zo(0).slice)&&Yo,$o=jo.ceil,Xo=t.clearTimeout,Jo=jo.floor,Ko=Ti(Ko=Ro.getOwnPropertySymbols)&&Ko,Qo=Ti(Qo=Ro.getPrototypeOf)&&Qo,Zo=Do.push,ta=Ti(Ro.preventExtensions=Ro.preventExtensions)&&ta,ea=Lo.propertyIsEnumerable,na=Ti(na=t.Set)&&na,ra=t.setTimeout,ia=Do.splice,oa=Ti(oa=t.Uint8Array)&&oa,aa=Ti(aa=t.WeakMap)&&aa,sa=function(){try{var e=Ti(e=t.Float64Array)&&e,n=new e(new zo(10),0,1)&&e}catch(r){}return n}(),ua=function(){var t={1:0},e=ta&&Ti(e=Ro.assign)&&e;try{e(ta(t),"xo")}catch(n){}return!t[1]&&e}(),ca=Ti(ca=So.isArray)&&ca,la=Ti(la=Ro.create)&&la,fa=t.isFinite,ha=Ti(ha=Ro.keys)&&ha,pa=jo.max,da=jo.min,ma=Ti(ma=Ao.now)&&ma,va=Ti(va=Mo.isFinite)&&va,ga=t.parseInt,ya=jo.random,ba=Mo.NEGATIVE_INFINITY,_a=Mo.POSITIVE_INFINITY,wa=jo.pow(2,32)-1,xa=wa-1,Ea=wa>>>1,Ta=sa?sa.BYTES_PER_ELEMENT:0,Ca=jo.pow(2,53)-1,Sa=aa&&new aa,Aa={},ka=e.support={};!function(t){var e=function(){this.x=t},n=[];e.prototype={valueOf:t,y:t};for(var r in new e)n.push(r);ka.funcDecomp=/\bthis\b/.test(function(){return this}),ka.funcNames="string"==typeof Oo.name;try{ka.dom=11===Bo.createDocumentFragment().nodeType}catch(i){ka.dom=!1}try{ka.nonEnumArgs=!ea.call(arguments,1)}catch(i){ka.nonEnumArgs=!0}}(1,0),e.templateSettings={escape:Et,evaluate:Tt,interpolate:Ct,variable:"",imports:{_:e}};var Oa=ua||function(t,e){return null==e?t:ye(e,Ua(e),ye(e,Is(e),t))},ja=function(){function e(){}return function(n){if(wi(n)){e.prototype=n;var r=new e;e.prototype=null}return r||t.Object()}}(),Ma=ln(Oe),Ra=ln(je,!0),Na=fn(),Pa=fn(!0),Ia=Sa?function(t,e){return Sa.set(t,e),t}:ho;Yo||(on=zo&&oa?function(t){var e=t.byteLength,n=sa?Jo(e/Ta):0,r=n*Ta,i=new zo(e);if(n){var o=new sa(i,0,n);o.set(new sa(t,0,n))}return e!=r&&(o=new oa(i,r),o.set(new oa(t,r))),i}:fo(null));var Da=la&&na?function(t){return new Kt(t)}:fo(null),La=Sa?function(t){return Sa.get(t)}:yo,Fa=function(){return ka.funcNames?"constant"==fo.name?qe("name"):function(t){for(var e=t.name,n=Aa[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}:fo("")}(),Ba=qe("length"),Ua=Ko?function(t){return Ko(nr(t))}:fo([]),qa=function(){var t=0,e=0;return function(n,r){var i=ls(),o=q-(i-e);if(e=i,o>0){if(++t>=U)return n}else t=0;return Ia(n,r)}}(),Va=ui(function(t,e){return Es(t)||di(t)?xe(t,Ae(e,!1,!0)):[]}),Wa=yn(),Ga=yn(!0),Ha=ui(function(t,e){t||(t=[]),e=Ae(e);var n=ge(t,e);return We(t,e.sort(o)),n}),za=jn(),Ya=jn(!0),$a=ui(function(t){return Ke(Ae(t,!1,!0))}),Xa=ui(function(t,e){return Es(t)||di(t)?xe(t,e):[]}),Ja=ui(Or),Ka=ui(function(t,e){var n=t?Ba(t):0;return Yn(n)&&(t=er(t)),ge(t,Ae(e))}),Qa=un(function(t,e,n){qo.call(t,n)?++t[n]:t[n]=1}),Za=gn(Ma),ts=gn(Ra,!0),es=wn(ee,Ma),ns=wn(ne,Ra),rs=un(function(t,e,n){qo.call(t,n)?t[n].push(e):t[n]=[e]}),is=un(function(t,e,n){t[n]=e}),os=ui(function(t,e,n){var r=-1,i="function"==typeof e,o=Hn(e),a=Ba(t),s=Yn(a)?So(a):[];return Ma(t,function(t){var a=i?e:o&&null!=t&&t[e];s[++r]=a?a.apply(t,n):Vn(t,e,n)}),s}),as=un(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),ss=Sn(le,Ma),us=Sn(fe,Ra),cs=ui(function(t,e){if(null==t)return[];var n=e[2];return n&&Gn(e[0],e[1],n)&&(e.length=1),Xe(t,Ae(e),[])}),ls=ma||function(){return(new Ao).getTime()},fs=ui(function(t,e,n){var r=O;if(n.length){var i=w(n,fs.placeholder);r|=P}return Mn(t,r,e,n,i)}),hs=ui(function(t,e){e=e.length?Ae(e):Pi(t);for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=Mn(t[i],O,t)}return t}),ps=ui(function(t,e,n){var r=O|j;if(n.length){var i=w(n,ps.placeholder);r|=P}return Mn(e,r,t,n,i)}),ds=mn(R),ms=mn(N),vs=ui(function(t,e){return we(t,1,e)}),gs=ui(function(t,e,n){return we(t,e,n)}),ys=_n(),bs=_n(!0),_s=Cn(P),ws=Cn(I),xs=ui(function(t,e){return Mn(t,L,null,null,null,Ae(e))}),Es=ca||function(t){return b(t)&&Yn(t.length)&&Wo.call(t)==$};ka.dom||(gi=function(t){return!!t&&1===t.nodeType&&b(t)&&!Ss(t)});var Ts=va||function(t){return"number"==typeof t&&fa(t)},Cs=u(/x/)||oa&&!u(oa)?function(t){return Wo.call(t)==Q}:u,Ss=Qo?function(t){if(!t||Wo.call(t)!=et)return!1;var e=t.valueOf,n=Ti(e)&&(n=Qo(e))&&Qo(n);return n?t==n||Qo(t)==n:Zn(t)}:Zn,As=cn(function(t,e,n){return n?ve(t,e,n):Oa(t,e)}),ks=ui(function(t){var e=t[0];return null==e?e:(t.push(de),As.apply(A,t))}),Os=bn(Oe),js=bn(je),Ms=xn(Na),Rs=xn(Pa),Ns=En(Oe),Ps=En(je),Is=ha?function(t){if(t)var e=t.constructor,n=t.length;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Yn(n)?tr(t):wi(t)?ha(t):[]}:tr,Ds=cn(Be),Ls=ui(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=se(Ae(e),Po);return Jn(t,xe(Fi(t),e))}var n=rn(e[0],e[1],3);return Kn(t,function(t,e,r){return!n(t,e,r)})}),Fs=ui(function(t,e){return null==t?{}:"function"==typeof e[0]?Kn(t,rn(e[0],e[1],3)):Jn(t,Ae(e))}),Bs=pn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Us=pn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),qs=Tn(),Vs=Tn(!0);8!=ga(qt+"08")&&(to=function(t,e,n){return(n?Gn(t,e,n):null==e)?e=0:e&&(e=+e),t=io(t),ga(t,e||(It.test(t)?16:10))});var Ws=pn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Gs=pn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Hs=ui(function(t,e){try{return t.apply(A,e)}catch(n){return _i(n)?n:new ko(n)}}),zs=ui(function(t,e){return function(n){return Vn(n,t,e)}}),Ys=ui(function(t,e){return function(n){return Vn(t,n,e)}}),$s=vn(ue),Xs=vn(ce,!0);return e.prototype=n.prototype,r.prototype=ja(n.prototype),r.prototype.constructor=r,i.prototype=ja(n.prototype),i.prototype.constructor=i,ot.prototype["delete"]=Yt,ot.prototype.get=$t,ot.prototype.has=Xt,ot.prototype.set=Jt,Kt.prototype.push=Zt,oi.Cache=ot,e.after=ei,e.ary=ni,e.assign=As,e.at=Ka,e.before=ri,e.bind=fs,e.bindAll=hs,e.bindKey=ps,e.callback=lo,e.chain=Rr,e.chunk=or,e.compact=ar,e.constant=fo,e.countBy=Qa,e.create=Ni,e.curry=ds,e.curryRight=ms,e.debounce=ii,e.defaults=ks,e.defer=vs,e.delay=gs,e.difference=Va,e.drop=sr,e.dropRight=ur,e.dropRightWhile=cr,e.dropWhile=lr,e.fill=fr,e.filter=Vr,e.flatten=pr,e.flattenDeep=dr,e.flow=ys,e.flowRight=bs,e.forEach=es,e.forEachRight=ns,e.forIn=Ms,e.forInRight=Rs,e.forOwn=Ns,e.forOwnRight=Ps,e.functions=Pi,e.groupBy=rs,e.indexBy=is,e.initial=vr,e.intersection=gr,e.invert=Li,e.invoke=os,e.keys=Is,e.keysIn=Fi,e.map=Hr,e.mapValues=Bi,e.matches=po,e.matchesProperty=mo,e.memoize=oi,e.merge=Ds,e.method=zs,e.methodOf=Ys,e.mixin=vo,e.negate=ai,e.omit=Ls,e.once=si,e.pairs=Ui,e.partial=_s,e.partialRight=ws,e.partition=as,e.pick=Fs,e.pluck=zr,e.property=bo,e.propertyOf=_o,e.pull=_r,e.pullAt=Ha,e.range=wo,e.rearg=xs,e.reject=Yr,e.remove=wr,e.rest=xr,e.restParam=ui,e.set=Vi,e.shuffle=Xr,e.slice=Er,e.sortBy=Qr,e.sortByAll=cs,e.sortByOrder=Zr,e.spread=ci,e.take=Tr,e.takeRight=Cr,e.takeRightWhile=Sr,e.takeWhile=Ar,e.tap=Nr,e.throttle=li,e.thru=Pr,e.times=xo,e.toArray=Mi,e.toPlainObject=Ri,e.transform=Wi,e.union=$a,e.uniq=kr,e.unzip=Or,e.values=Gi,e.valuesIn=Hi,e.where=ti,e.without=Xa,e.wrap=fi,e.xor=jr,e.zip=Ja,e.zipObject=Mr,e.backflow=bs,e.collect=Hr,e.compose=bs,e.each=es,e.eachRight=ns,e.extend=As,e.iteratee=lo,e.methods=Pi,e.object=Mr,e.select=Vr,e.tail=xr,e.unique=kr,vo(e,e),e.add=To,e.attempt=Hs,e.camelCase=Bs,e.capitalize=$i,e.clone=hi,e.cloneDeep=pi,e.deburr=Xi,e.endsWith=Ji,e.escape=Ki,e.escapeRegExp=Qi,e.every=qr,e.find=Za,e.findIndex=Wa,e.findKey=Os,e.findLast=ts,e.findLastIndex=Ga,e.findLastKey=js,e.findWhere=Wr,e.first=hr,e.get=Ii,e.has=Di,e.identity=ho,e.includes=Gr,e.indexOf=mr,e.inRange=zi,e.isArguments=di,e.isArray=Es,e.isBoolean=mi,e.isDate=vi,e.isElement=gi,e.isEmpty=yi,e.isEqual=bi,e.isError=_i,e.isFinite=Ts,e.isFunction=Cs,e.isMatch=xi,e.isNaN=Ei,e.isNative=Ti,e.isNull=Ci,e.isNumber=Si,e.isObject=wi,e.isPlainObject=Ss,e.isRegExp=Ai,e.isString=ki,e.isTypedArray=Oi,e.isUndefined=ji,e.kebabCase=Us,e.last=yr,e.lastIndexOf=br,e.max=$s,e.min=Xs,e.noConflict=go,e.noop=yo,e.now=ls,e.pad=Zi,e.padLeft=qs,e.padRight=Vs,e.parseInt=to,e.random=Yi,e.reduce=ss,e.reduceRight=us,e.repeat=eo,e.result=qi,e.runInContext=S,e.size=Jr,e.snakeCase=Ws,e.some=Kr,e.sortedIndex=za,e.sortedLastIndex=Ya,e.startCase=Gs,e.startsWith=no,e.sum=Co,e.template=ro,e.trim=io,e.trimLeft=oo,e.trimRight=ao,e.trunc=so,e.unescape=uo,e.uniqueId=Eo,e.words=co,e.all=qr,e.any=Kr,e.contains=Gr,e.detect=Za,e.foldl=ss,e.foldr=us,e.head=hr,e.include=Gr,e.inject=ss,vo(e,function(){var t={};return Oe(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.sample=$r,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return $r(e,t)}):$r(this.value())},e.VERSION=k,ee(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ee(["dropWhile","filter","map","takeWhile"],function(t,e){var n=e!=G,r=e==V;i.prototype[t]=function(t,o){var a=this.__filtered__,s=a&&r?new i(this):this.clone(),u=s.__iteratees__||(s.__iteratees__=[]);return u.push({done:!1,count:0,index:0,iteratee:Dn(t,o,1),limit:-1,type:e}),s.__filtered__=a||n,s}}),ee(["drop","take"],function(t,e){var n=t+"While";i.prototype[t]=function(n){var r=this.__filtered__,i=r&&!e?this.dropWhile():this.clone();if(n=null==n?1:pa(Jo(n)||0,0),r)e?i.__takeCount__=da(i.__takeCount__,n):yr(i.__iteratees__).limit=n;else{var o=i.__views__||(i.__views__=[]);o.push({size:n,type:t+(i.__dir__<0?"Right":"")})}return i},i.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()},i.prototype[t+"RightWhile"]=function(t,e){return this.reverse()[n](t,e).reverse()}}),ee(["first","last"],function(t,e){var n="take"+(e?"Right":"");i.prototype[t]=function(){return this[n](1).value()[0]}}),ee(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");i.prototype[t]=function(){return this[n](1)}}),ee(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Le:bo;i.prototype[t]=function(t){return this[n](r(t))}}),i.prototype.compact=function(){return this.filter(ho)},i.prototype.reject=function(t,e){return t=Dn(t,e,1),this.filter(function(e){return!t(e)})},i.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=0>t?this.takeRight(-t):this.drop(t);return e!==A&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n},i.prototype.toArray=function(){return this.drop(0)},Oe(i.prototype,function(t,n){var o=e[n];if(o){var a=/^(?:filter|map|reject)|While$/.test(n),s=/^(?:first|last)$/.test(n);e.prototype[n]=function(){var n=arguments,u=(n.length,this.__chain__),c=this.__wrapped__,l=!!this.__actions__.length,f=c instanceof i,h=n[0],p=f||Es(c);p&&a&&"function"==typeof h&&1!=h.length&&(f=p=!1);var d=f&&!l;if(s&&!u)return d?t.call(c):o.call(e,this.value());var m=function(t){var r=[t];return Zo.apply(r,n),o.apply(e,r)};if(p){var v=d?c:new i(this),g=t.apply(v,n);if(!s&&(l||g.__actions__)){var y=g.__actions__||(g.__actions__=[]);y.push({func:Pr,args:[m],thisArg:e})}return new r(g,u)}return this.thru(m)}}}),ee(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?Fo:Do)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),Oe(i.prototype,function(t,n){var r=e[n];if(r){var i=r.name,o=Aa[i]||(Aa[i]=[]);o.push({name:n,func:r})}}),Aa[An(null,j).name]=[{name:"wrapper",func:null}],i.prototype.clone=_,i.prototype.reverse=Z,i.prototype.value=rt,e.prototype.chain=Ir,e.prototype.commit=Dr,e.prototype.plant=Lr,e.prototype.reverse=Fr,e.prototype.toString=Br,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Ur,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var A,k="3.7.0",O=1,j=2,M=4,R=8,N=16,P=32,I=64,D=128,L=256,F=30,B="...",U=150,q=16,V=0,W=1,G=2,H="Expected a function",z="__lodash_placeholder__",Y="[object Arguments]",$="[object Array]",X="[object Boolean]",J="[object Date]",K="[object Error]",Q="[object Function]",Z="[object Map]",tt="[object Number]",et="[object Object]",nt="[object RegExp]",rt="[object Set]",it="[object String]",ot="[object WeakMap]",at="[object ArrayBuffer]",st="[object Float32Array]",ut="[object Float64Array]",ct="[object Int8Array]",lt="[object Int16Array]",ft="[object Int32Array]",ht="[object Uint8Array]",pt="[object Uint8ClampedArray]",dt="[object Uint16Array]",mt="[object Uint32Array]",vt=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,yt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39|#96);/g,_t=/[&<>"'`]/g,wt=RegExp(bt.source),xt=RegExp(_t.source),Et=/<%-([\s\S]+?)%>/g,Tt=/<%([\s\S]+?)%>/g,Ct=/<%=([\s\S]+?)%>/g,St=/\.|\[(?:[^[\]]+|(["'])(?:(?!\1)[^\n\\]|\\.)*?)\1\]/,At=/^\w*$/,kt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Ot=/[.*+?^${}()|[\]\/\\]/g,jt=RegExp(Ot.source),Mt=/[\u0300-\u036f\ufe20-\ufe23]/g,Rt=/\\(\\)?/g,Nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pt=/\w*$/,It=/^0[xX]/,Dt=/^\[object .+?Constructor\]$/,Lt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ft=/($^)/,Bt=/['\n\r\u2028\u2029\\]/g,Ut=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),qt=" 	\f\ufeff\n\r\u2028\u2029",Vt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],Wt=-1,Gt={};Gt[st]=Gt[ut]=Gt[ct]=Gt[lt]=Gt[ft]=Gt[ht]=Gt[pt]=Gt[dt]=Gt[mt]=!0,Gt[Y]=Gt[$]=Gt[at]=Gt[X]=Gt[J]=Gt[K]=Gt[Q]=Gt[Z]=Gt[tt]=Gt[et]=Gt[nt]=Gt[rt]=Gt[it]=Gt[ot]=!1;var Ht={};Ht[Y]=Ht[$]=Ht[at]=Ht[X]=Ht[J]=Ht[st]=Ht[ut]=Ht[ct]=Ht[lt]=Ht[ft]=Ht[tt]=Ht[et]=Ht[nt]=Ht[it]=Ht[ht]=Ht[pt]=Ht[dt]=Ht[mt]=!0,Ht[K]=Ht[Q]=Ht[Z]=Ht[rt]=Ht[ot]=!1;var zt={leading:!1,maxWait:0,trailing:!1},Yt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},$t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Xt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Jt={"function":!0,object:!0},Kt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Qt=Jt[typeof e]&&e&&!e.nodeType&&e,Zt=Jt[typeof t]&&t&&!t.nodeType&&t,te=Qt&&Zt&&"object"==typeof i&&i&&i.Object&&i,ee=Jt[typeof self]&&self&&self.Object&&self,ne=Jt[typeof window]&&window&&window.Object&&window,re=(Zt&&Zt.exports===Qt&&Qt,
te||ne!==(this&&this.window)&&ne||ee||this),ie=S();re._=ie,r=function(){return ie}.call(e,n,e,t),!(r!==A&&(t.exports=r))}).call(this)}).call(e,n(79)(t),function(){return this}())},function(t,e,n){(function(e){"use strict";function r(t,e){for(var n=Math.min(t.length,e.length),r=0;n>r;r++)if(t.charAt(r)!==e.charAt(r))return r;return t.length===e.length?-1:n}function i(t){var e=M(t);return e&&Y.getID(e)}function o(t){var n=a(t);if(n)if(B.hasOwnProperty(n)){var r=B[n];r!==t&&("production"!==e.env.NODE_ENV?N(!l(r,n),"ReactMount: Two valid but unequal nodes with the same `%s`: %s",F,n):N(!l(r,n)),B[n]=t)}else B[n]=t;return n}function a(t){return t&&t.getAttribute&&t.getAttribute(F)||""}function s(t,e){var n=a(t);n!==e&&delete B[n],t.setAttribute(F,e),B[e]=t}function u(t){return B.hasOwnProperty(t)&&l(B[t],t)||(B[t]=Y.findReactNodeByID(t)),B[t]}function c(t){var e=E.get(t)._rootNodeID;return w.isNullComponentID(e)?null:(B.hasOwnProperty(e)&&l(B[e],e)||(B[e]=Y.findReactNodeByID(e)),B[e])}function l(t,n){if(t){"production"!==e.env.NODE_ENV?N(a(t)===n,"ReactMount: Unexpected modification of `%s`",F):N(a(t)===n);var r=Y.findReactContainerForID(n);if(r&&j(r,t))return!0}return!1}function f(t){delete B[t]}function h(t){var e=B[t];return e&&l(e,t)?void(z=e):!1}function p(t){z=null,x.traverseAncestors(t,h);var e=z;return z=null,e}function d(t,e,n,r,i){var o=S.mountComponent(t,e,r,O);t._isTopLevel=!0,Y._mountImageIntoNode(o,n,i)}function m(t,e,n,r){var i=k.ReactReconcileTransaction.getPooled();i.perform(d,null,t,e,n,i,r),k.ReactReconcileTransaction.release(i)}var v=n(21),g=n(24),y=n(17),b=n(4),_=n(35),w=n(62),x=n(25),E=n(26),T=n(93),C=n(18),S=n(27),A=n(65),k=n(14),O=n(46),j=n(99),M=n(212),R=n(71),N=n(2),P=n(73),I=n(74),D=n(5),L=x.SEPARATOR,F=v.ID_ATTRIBUTE_NAME,B={},U=1,q=9,V={},W={};if("production"!==e.env.NODE_ENV)var G={};var H=[],z=null,Y={_instancesByReactRootID:V,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,n,r,o){return"production"!==e.env.NODE_ENV&&_.checkAndWarnForMutatedProps(n),Y.scrollMonitor(r,function(){A.enqueueElementInternal(t,n),o&&A.enqueueCallbackInternal(t,o)}),"production"!==e.env.NODE_ENV&&(G[i(r)]=M(r)),t},_registerComponent:function(t,n){"production"!==e.env.NODE_ENV?N(n&&(n.nodeType===U||n.nodeType===q),"_registerComponent(...): Target container is not a DOM element."):N(n&&(n.nodeType===U||n.nodeType===q)),g.ensureScrollValueMonitoring();var r=Y.registerContainer(n);return V[r]=t,r},_renderNewRootComponent:function(t,n,r){"production"!==e.env.NODE_ENV?D(null==y.current,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."):null;var i=R(t,null),o=Y._registerComponent(i,n);return k.batchedUpdates(m,i,o,n,r),"production"!==e.env.NODE_ENV&&(G[o]=M(n)),i},render:function(t,n,r){"production"!==e.env.NODE_ENV?N(b.isValidElement(t),"React.render(): Invalid component element.%s","string"==typeof t?" Instead of passing an element string, make sure to instantiate it by passing it to React.createElement.":"function"==typeof t?" Instead of passing a component class, make sure to instantiate it by passing it to React.createElement.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":""):N(b.isValidElement(t));var o=V[i(n)];if(o){var a=o._currentElement;if(I(a,t))return Y._updateRootComponent(o,t,n,r).getPublicInstance();Y.unmountComponentAtNode(n)}var s=M(n),u=s&&Y.isRenderedByReact(s);if("production"!==e.env.NODE_ENV&&(!u||s.nextSibling))for(var c=s;c;){if(Y.isRenderedByReact(c)){"production"!==e.env.NODE_ENV?D(!1,"render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup."):null;break}c=c.nextSibling}var l=u&&!o,f=Y._renderNewRootComponent(t,n,l).getPublicInstance();return r&&r.call(f),f},constructAndRenderComponent:function(t,e,n){var r=b.createElement(t,e);return Y.render(r,n)},constructAndRenderComponentByID:function(t,n,r){var i=document.getElementById(r);return"production"!==e.env.NODE_ENV?N(i,'Tried to get element with id of "%s" but it is not present on the page.',r):N(i),Y.constructAndRenderComponent(t,n,i)},registerContainer:function(t){var e=i(t);return e&&(e=x.getReactRootIDFromNodeID(e)),e||(e=x.createReactRootID()),W[e]=t,e},unmountComponentAtNode:function(t){"production"!==e.env.NODE_ENV?D(null==y.current,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."):null,"production"!==e.env.NODE_ENV?N(t&&(t.nodeType===U||t.nodeType===q),"unmountComponentAtNode(...): Target container is not a DOM element."):N(t&&(t.nodeType===U||t.nodeType===q));var n=i(t),r=V[n];return r?(Y.unmountComponentFromNode(r,t),delete V[n],delete W[n],"production"!==e.env.NODE_ENV&&delete G[n],!0):!1},unmountComponentFromNode:function(t,e){for(S.unmountComponent(t),e.nodeType===q&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)},findReactContainerForID:function(t){var n=x.getReactRootIDFromNodeID(t),r=W[n];if("production"!==e.env.NODE_ENV){var i=G[n];if(i&&i.parentNode!==r){"production"!==e.env.NODE_ENV?N(a(i)===n,"ReactMount: Root element ID differed from reactRootID."):N(a(i)===n);var o=r.firstChild;o&&n===a(o)?G[n]=o:"production"!==e.env.NODE_ENV?D(!1,"ReactMount: Root element has been removed from its original container. New container:",i.parentNode):null}}return r},findReactNodeByID:function(t){var e=Y.findReactContainerForID(t);return Y.findComponentRoot(e,t)},isRenderedByReact:function(t){if(1!==t.nodeType)return!1;var e=Y.getID(t);return e?e.charAt(0)===L:!1},getFirstReactDOM:function(t){for(var e=t;e&&e.parentNode!==e;){if(Y.isRenderedByReact(e))return e;e=e.parentNode}return null},findComponentRoot:function(t,n){var r=H,i=0,o=p(n)||t;for(r[0]=o.firstChild,r.length=1;i<r.length;){for(var a,s=r[i++];s;){var u=Y.getID(s);u?n===u?a=s:x.isAncestorIDOf(u,n)&&(r.length=i=0,r.push(s.firstChild)):r.push(s.firstChild),s=s.nextSibling}if(a)return r.length=0,a}r.length=0,"production"!==e.env.NODE_ENV?N(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",n,Y.getID(t)):N(!1)},_mountImageIntoNode:function(t,n,i){if("production"!==e.env.NODE_ENV?N(n&&(n.nodeType===U||n.nodeType===q),"mountComponentIntoNode(...): Target container is not valid."):N(n&&(n.nodeType===U||n.nodeType===q)),i){var o=M(n);if(T.canReuseMarkup(t,o))return;var a=o.getAttribute(T.CHECKSUM_ATTR_NAME);o.removeAttribute(T.CHECKSUM_ATTR_NAME);var s=o.outerHTML;o.setAttribute(T.CHECKSUM_ATTR_NAME,a);var u=r(t,s),c=" (client) "+t.substring(u-20,u+20)+"\n (server) "+s.substring(u-20,u+20);"production"!==e.env.NODE_ENV?N(n.nodeType!==q,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side:\n%s",c):N(n.nodeType!==q),"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?D(!1,"React attempted to reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server:\n%s",c):null)}"production"!==e.env.NODE_ENV?N(n.nodeType!==q,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See React.renderToString() for server rendering."):N(n.nodeType!==q),P(n,t)},getReactRootID:i,getID:o,setID:s,getNode:u,getNodeFromInstance:c,purgeID:f};C.measureMethods(Y,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),t.exports=Y}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(){"production"!==e.env.NODE_ENV?g(k.ReactReconcileTransaction&&x,"ReactUpdates: must inject a reconcile transaction class and batching strategy"):g(k.ReactReconcileTransaction&&x)}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=l.getPooled(),this.reconcileTransaction=k.ReactReconcileTransaction.getPooled()}function o(t,e,n,i,o){r(),x.batchedUpdates(t,e,n,i,o)}function a(t,e){return t._mountOrder-e._mountOrder}function s(t){var n=t.dirtyComponentsLength;"production"!==e.env.NODE_ENV?g(n===b.length,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",n,b.length):g(n===b.length),b.sort(a);for(var r=0;n>r;r++){var i=b[r],o=i._pendingCallbacks;if(i._pendingCallbacks=null,d.performUpdateIfNecessary(i,t.reconcileTransaction),o)for(var s=0;s<o.length;s++)t.callbackQueue.enqueue(o[s],i.getPublicInstance())}}function u(t){return r(),"production"!==e.env.NODE_ENV?y(null==h.current,"enqueueUpdate(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."):null,x.isBatchingUpdates?void b.push(t):void x.batchedUpdates(u,t)}function c(t,n){"production"!==e.env.NODE_ENV?g(x.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."):g(x.isBatchingUpdates),_.enqueue(t,n),w=!0}var l=n(54),f=n(15),h=n(17),p=n(18),d=n(27),m=n(45),v=n(3),g=n(2),y=n(5),b=[],_=l.getPooled(),w=!1,x=null,E={initialize:function(){this.dirtyComponentsLength=b.length},close:function(){this.dirtyComponentsLength!==b.length?(b.splice(0,this.dirtyComponentsLength),S()):b.length=0}},T={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},C=[E,T];v(i.prototype,m.Mixin,{getTransactionWrappers:function(){return C},destructor:function(){this.dirtyComponentsLength=null,l.release(this.callbackQueue),this.callbackQueue=null,k.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,n){return m.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,n)}}),f.addPoolingTo(i);var S=function(){for(;b.length||w;){if(b.length){var t=i.getPooled();t.perform(s,null,t),i.release(t)}if(w){w=!1;var e=_;_=l.getPooled(),e.notifyAll(),l.release(e)}}};S=p.measure("ReactUpdates","flushBatchedUpdates",S);var A={injectReconcileTransaction:function(t){"production"!==e.env.NODE_ENV?g(t,"ReactUpdates: must provide a reconcile transaction class"):g(t),k.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){"production"!==e.env.NODE_ENV?g(t,"ReactUpdates: must provide a batching strategy"):g(t),"production"!==e.env.NODE_ENV?g("function"==typeof t.batchedUpdates,"ReactUpdates: must provide a batchedUpdates() function"):g("function"==typeof t.batchedUpdates),"production"!==e.env.NODE_ENV?g("boolean"==typeof t.isBatchingUpdates,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"):g("boolean"==typeof t.isBatchingUpdates),x=t}},k={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:u,flushBatchedUpdates:S,injection:A,asap:c};t.exports=k}).call(e,n(1))},function(t,e,n){(function(e){"use strict";var r=n(2),i=function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)},o=function(t,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,t,e),r}return new n(t,e)},a=function(t,e,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,t,e,n),i}return new r(t,e,n)},s=function(t,e,n,r,i){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,t,e,n,r,i),a}return new o(t,e,n,r,i)},u=function(t){var n=this;"production"!==e.env.NODE_ENV?r(t instanceof n,"Trying to release an instance into a pool of a different type."):r(t instanceof n),t.destructor&&t.destructor(),n.instancePool.length<n.poolSize&&n.instancePool.push(t)},c=10,l=i,f=function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||l,n.poolSize||(n.poolSize=c),n.release=u,n},h={addPoolingTo:f,oneArgumentPooler:i,twoArgumentPooler:o,threeArgumentPooler:a,fiveArgumentPooler:s};t.exports=h}).call(e,n(1))},function(t,e,n){"use strict";var r=n(100),i={getDOMNode:function(){return r(this)}};t.exports=i},function(t,e,n){"use strict";var r={current:null};t.exports=r},function(t,e,n){(function(e){"use strict";function n(t,e,n){return n}var r={enableMeasure:!1,storedMeasure:n,measureMethods:function(t,n,i){if("production"!==e.env.NODE_ENV)for(var o in i)i.hasOwnProperty(o)&&(t[o]=r.measure(n,i[o],t[o]))},measure:function(t,n,i){if("production"!==e.env.NODE_ENV){var o=null,a=function(){return r.enableMeasure?(o||(o=r.storedMeasure(t,n,i)),o.apply(this,arguments)):i.apply(this,arguments)};return a.displayName=t+"_"+n,a}return i},injection:{injectMeasure:function(t){r.storedMeasure=t}}};t.exports=r}).call(e,n(1))},function(t,e,n){function r(t){return function(){return t}}function i(){}i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},function(t,e,n){var r=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return e;return null};t.exports=r},function(t,e,n){(function(e){"use strict";function r(t,e){return(t&e)===e}var i=n(2),o={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(t){var n=t.Properties||{},a=t.DOMAttributeNames||{},u=t.DOMPropertyNames||{},c=t.DOMMutationMethods||{};t.isCustomAttribute&&s._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var l in n){"production"!==e.env.NODE_ENV?i(!s.isStandardName.hasOwnProperty(l),"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",l):i(!s.isStandardName.hasOwnProperty(l)),s.isStandardName[l]=!0;var f=l.toLowerCase();if(s.getPossibleStandardName[f]=l,a.hasOwnProperty(l)){var h=a[l];s.getPossibleStandardName[h]=l,s.getAttributeName[l]=h}else s.getAttributeName[l]=f;s.getPropertyName[l]=u.hasOwnProperty(l)?u[l]:l,c.hasOwnProperty(l)?s.getMutationMethod[l]=c[l]:s.getMutationMethod[l]=null;var p=n[l];s.mustUseAttribute[l]=r(p,o.MUST_USE_ATTRIBUTE),s.mustUseProperty[l]=r(p,o.MUST_USE_PROPERTY),s.hasSideEffects[l]=r(p,o.HAS_SIDE_EFFECTS),s.hasBooleanValue[l]=r(p,o.HAS_BOOLEAN_VALUE),s.hasNumericValue[l]=r(p,o.HAS_NUMERIC_VALUE),s.hasPositiveNumericValue[l]=r(p,o.HAS_POSITIVE_NUMERIC_VALUE),s.hasOverloadedBooleanValue[l]=r(p,o.HAS_OVERLOADED_BOOLEAN_VALUE),"production"!==e.env.NODE_ENV?i(!s.mustUseAttribute[l]||!s.mustUseProperty[l],"DOMProperty: Cannot require using both attribute and property: %s",l):i(!s.mustUseAttribute[l]||!s.mustUseProperty[l]),"production"!==e.env.NODE_ENV?i(s.mustUseProperty[l]||!s.hasSideEffects[l],"DOMProperty: Properties that have side effects must use property: %s",l):i(s.mustUseProperty[l]||!s.hasSideEffects[l]),"production"!==e.env.NODE_ENV?i(!!s.hasBooleanValue[l]+!!s.hasNumericValue[l]+!!s.hasOverloadedBooleanValue[l]<=1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",l):i(!!s.hasBooleanValue[l]+!!s.hasNumericValue[l]+!!s.hasOverloadedBooleanValue[l]<=1)}}},a={},s={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<s._isCustomAttributeFunctions.length;e++){var n=s._isCustomAttributeFunctions[e];if(n(t))return!0}return!1},getDefaultValueForProperty:function(t,e){var n,r=a[t];return r||(a[t]=r={}),e in r||(n=document.createElement(t),r[e]=n[e]),r[e]},injection:o};t.exports=s}).call(e,n(1))},function(t,e,n){"use strict";function r(t,e,n){this.dispatchConfig=t,this.dispatchMarker=e,this.nativeEvent=n;var r=this.constructor.Interface;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o?this[i]=o(n):this[i]=n[i]}var s=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;s?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse}var i=n(15),o=n(3),a=n(19),s=n(70),u={type:null,target:s,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};o(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=a.thatReturnsTrue},stopPropagation:function(){var t=this.nativeEvent;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.isPropagationStopped=a.thatReturnsTrue},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),r.Interface=u,r.augmentClass=function(t,e){var n=this,r=Object.create(n.prototype);o(r,t.prototype),t.prototype=r,t.prototype.constructor=t,t.Interface=o({},n.Interface,e),t.augmentClass=n.augmentClass,i.addPoolingTo(t,i.threeArgumentPooler)},i.addPoolingTo(r,i.threeArgumentPooler),t.exports=r},function(t,e,n){/**
	 * @license
	 * pixi.js - v2.2.9
	 * Copyright (c) 2012-2014, Mat Groves
	 * http://goodboydigital.com/
	 *
	 * Compiled: 2015-04-08
	 *
	 * pixi.js is licensed under the MIT License.
	 * http://www.opensource.org/licenses/mit-license.php
	 */
(function(){var n=n||{};n.WEBGL_RENDERER=0,n.CANVAS_RENDERER=1,n.VERSION="v2.2.9",n.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},n.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},n._UID=0,"undefined"!=typeof Float32Array?(n.Float32Array=Float32Array,n.Uint16Array=Uint16Array,n.Uint32Array=Uint32Array,n.ArrayBuffer=ArrayBuffer):(n.Float32Array=Array,n.Uint16Array=Array),n.INTERACTION_FREQUENCY=30,n.AUTO_PREVENT_DEFAULT=!0,n.PI_2=2*Math.PI,n.RAD_TO_DEG=180/Math.PI,n.DEG_TO_RAD=Math.PI/180,n.RETINA_PREFIX="@2x",n.dontSayHello=!1,n.defaultRenderOptions={view:null,transparent:!1,antialias:!1,preserveDrawingBuffer:!1,resolution:1,clearBeforeRender:!0,autoResize:!1},n.sayHello=function(t){if(!n.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["%c %c %c Pixi.js "+n.VERSION+" - "+t+"  %c  %c  http://www.pixijs.com/  %c %c %c%c ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,e)}else window.console&&console.log("Pixi.js "+n.VERSION+" - http://www.pixijs.com/");n.dontSayHello=!0}},n.Point=function(t,e){this.x=t||0,this.y=e||0},n.Point.prototype.clone=function(){return new n.Point(this.x,this.y)},n.Point.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},n.Point.prototype.constructor=n.Point,n.Rectangle=function(t,e,n,r){this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0},n.Rectangle.prototype.clone=function(){return new n.Rectangle(this.x,this.y,this.width,this.height)},n.Rectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=this.x;if(t>=n&&t<=n+this.width){var r=this.y;if(e>=r&&e<=r+this.height)return!0}return!1},n.Rectangle.prototype.constructor=n.Rectangle,n.EmptyRectangle=new n.Rectangle(0,0,0,0),n.Polygon=function(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),t[0]instanceof n.Point){for(var e=[],r=0,i=t.length;i>r;r++)e.push(t[r].x,t[r].y);t=e}this.closed=!0,this.points=t},n.Polygon.prototype.clone=function(){var t=this.points.slice();return new n.Polygon(t)},n.Polygon.prototype.contains=function(t,e){for(var n=!1,r=this.points.length/2,i=0,o=r-1;r>i;o=i++){var a=this.points[2*i],s=this.points[2*i+1],u=this.points[2*o],c=this.points[2*o+1],l=s>e!=c>e&&(u-a)*(e-s)/(c-s)+a>t;l&&(n=!n)}return n},n.Polygon.prototype.constructor=n.Polygon,n.Circle=function(t,e,n){this.x=t||0,this.y=e||0,this.radius=n||0},n.Circle.prototype.clone=function(){return new n.Circle(this.x,this.y,this.radius)},n.Circle.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.x-t,r=this.y-e,i=this.radius*this.radius;return n*=n,r*=r,i>=n+r},n.Circle.prototype.getBounds=function(){return new n.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},n.Circle.prototype.constructor=n.Circle,n.Ellipse=function(t,e,n,r){this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0},n.Ellipse.prototype.clone=function(){return new n.Ellipse(this.x,this.y,this.width,this.height)},n.Ellipse.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,r=(e-this.y)/this.height;return n*=n,r*=r,1>=n+r},n.Ellipse.prototype.getBounds=function(){return new n.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},n.Ellipse.prototype.constructor=n.Ellipse,n.RoundedRectangle=function(t,e,n,r,i){this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this.radius=i||20},n.RoundedRectangle.prototype.clone=function(){return new n.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},n.RoundedRectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=this.x;if(t>=n&&t<=n+this.width){var r=this.y;if(e>=r&&e<=r+this.height)return!0}return!1},n.RoundedRectangle.prototype.constructor=n.RoundedRectangle,n.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},n.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},n.Matrix.prototype.toArray=function(t){this.array||(this.array=new n.Float32Array(9));var e=this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0,e[8]=1),e},n.Matrix.prototype.apply=function(t,e){return e=e||new n.Point,e.x=this.a*t.x+this.c*t.y+this.tx,e.y=this.b*t.x+this.d*t.y+this.ty,e},n.Matrix.prototype.applyInverse=function(t,e){e=e||new n.Point;var r=1/(this.a*this.d+this.c*-this.b);return e.x=this.d*r*t.x+-this.c*r*t.y+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t.y+-this.b*r*t.x+(-this.ty*this.a+this.tx*this.b)*r,e},n.Matrix.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},n.Matrix.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},n.Matrix.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},n.Matrix.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},n.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.identityMatrix=new n.Matrix,n.DisplayObject=function(){this.position=new n.Point,this.scale=new n.Point(1,1),this.pivot=new n.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new n.Matrix,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new n.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},n.DisplayObject.prototype.constructor=n.DisplayObject,Object.defineProperty(n.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(t){this._interactive=t,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(n.DisplayObject.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}}),Object.defineProperty(n.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(n.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(t){if(t){for(var e=[],n=0;n<t.length;n++)for(var r=t[n].passes,i=0;i<r.length;i++)e.push(r[i]);this._filterBlock={target:this,filterPasses:e}}this._filters=t}}),Object.defineProperty(n.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),n.DisplayObject.prototype.updateTransform=function(){var t,e,r,i,o,a,s=this.parent.worldTransform,u=this.worldTransform;this.rotation%n.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,e=this._sr*this.scale.x,r=-this._sr*this.scale.y,i=this._cr*this.scale.y,o=this.position.x,a=this.position.y,(this.pivot.x||this.pivot.y)&&(o-=this.pivot.x*t+this.pivot.y*r,a-=this.pivot.x*e+this.pivot.y*i),u.a=t*s.a+e*s.c,u.b=t*s.b+e*s.d,u.c=r*s.a+i*s.c,u.d=r*s.b+i*s.d,u.tx=o*s.a+a*s.c+s.tx,u.ty=o*s.b+a*s.d+s.ty):(t=this.scale.x,i=this.scale.y,o=this.position.x-this.pivot.x*t,a=this.position.y-this.pivot.y*i,u.a=t*s.a,u.b=t*s.b,u.c=i*s.c,u.d=i*s.d,u.tx=o*s.a+a*s.c+s.tx,u.ty=o*s.b+a*s.d+s.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha},n.DisplayObject.prototype.displayObjectUpdateTransform=n.DisplayObject.prototype.updateTransform,n.DisplayObject.prototype.getBounds=function(t){return t=t,n.EmptyRectangle},n.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(n.identityMatrix)},n.DisplayObject.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0)},n.DisplayObject.prototype.generateTexture=function(t,e,r){var i=this.getLocalBounds(),o=new n.RenderTexture(0|i.width,0|i.height,r,e,t);return n.DisplayObject._tempMatrix.tx=-i.x,n.DisplayObject._tempMatrix.ty=-i.y,o.render(this,n.DisplayObject._tempMatrix),o},n.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},n.DisplayObject.prototype.toGlobal=function(t){return this.displayObjectUpdateTransform(),this.worldTransform.apply(t)},n.DisplayObject.prototype.toLocal=function(t,e){return e&&(t=e.toGlobal(t)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(t)},n.DisplayObject.prototype._renderCachedSprite=function(t){this._cachedSprite.worldAlpha=this.worldAlpha,t.gl?n.Sprite.prototype._renderWebGL.call(this._cachedSprite,t):n.Sprite.prototype._renderCanvas.call(this._cachedSprite,t)},n.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|t.width,0|t.height);else{var e=new n.RenderTexture(0|t.width,0|t.height);this._cachedSprite=new n.Sprite(e),this._cachedSprite.worldTransform=this.worldTransform}var r=this._filters;this._filters=null,this._cachedSprite.filters=r,n.DisplayObject._tempMatrix.tx=-t.x,n.DisplayObject._tempMatrix.ty=-t.y,this._cachedSprite.texture.render(this,n.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._filters=r,this._cacheAsBitmap=!0},n.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},n.DisplayObject.prototype._renderWebGL=function(t){t=t},n.DisplayObject.prototype._renderCanvas=function(t){t=t},n.DisplayObject._tempMatrix=new n.Matrix,Object.defineProperty(n.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(n.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),n.DisplayObjectContainer=function(){n.DisplayObject.call(this),this.children=[]},n.DisplayObjectContainer.prototype=Object.create(n.DisplayObject.prototype),n.DisplayObjectContainer.prototype.constructor=n.DisplayObjectContainer,Object.defineProperty(n.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;0!==e?this.scale.x=t/e:this.scale.x=1,this._width=t}}),Object.defineProperty(n.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;0!==e?this.scale.y=t/e:this.scale.y=1,this._height=t}}),n.DisplayObjectContainer.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},n.DisplayObjectContainer.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.stage&&t.setStageReference(this.stage),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},n.DisplayObjectContainer.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),r=this.getChildIndex(e);if(0>n||0>r)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[n]=e,this.children[r]=t}},n.DisplayObjectContainer.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},n.DisplayObjectContainer.prototype.setChildIndex=function(t,e){if(0>e||e>=this.children.length)throw new Error("The supplied index is out of bounds");var n=this.getChildIndex(t);this.children.splice(n,1),this.children.splice(e,0,t)},n.DisplayObjectContainer.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[t]},n.DisplayObjectContainer.prototype.removeChild=function(t){var e=this.children.indexOf(t);if(-1!==e)return this.removeChildAt(e)},n.DisplayObjectContainer.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return this.stage&&e.removeStageReference(),e.parent=void 0,this.children.splice(t,1),e},n.DisplayObjectContainer.prototype.removeChildren=function(t,e){var n=t||0,r="number"==typeof e?e:this.children.length,i=r-n;if(i>0&&r>=i){for(var o=this.children.splice(n,i),a=0;a<o.length;a++){var s=o[a];this.stage&&s.removeStageReference(),s.parent=void 0}return o}if(0===i&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},n.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform()},n.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=n.DisplayObjectContainer.prototype.updateTransform,n.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return n.EmptyRectangle;for(var t,e,r,i=1/0,o=1/0,a=-(1/0),s=-(1/0),u=!1,c=0,l=this.children.length;l>c;c++){var f=this.children[c];f.visible&&(u=!0,t=this.children[c].getBounds(),i=i<t.x?i:t.x,o=o<t.y?o:t.y,e=t.width+t.x,r=t.height+t.y,a=a>e?a:e,s=s>r?s:r)}if(!u)return n.EmptyRectangle;var h=this._bounds;return h.x=i,h.y=o,h.width=a-i,h.height=s-o,h},n.DisplayObjectContainer.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=n.identityMatrix;for(var e=0,r=this.children.length;r>e;e++)this.children[e].updateTransform();var i=this.getBounds();return this.worldTransform=t,i},n.DisplayObjectContainer.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0);for(var e=0,n=this.children.length;n>e;e++){var r=this.children[e];r.setStageReference(t)}},n.DisplayObjectContainer.prototype.removeStageReference=function(){for(var t=0,e=this.children.length;e>t;t++){var n=this.children[t];n.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},n.DisplayObjectContainer.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);var e,n;if(this._mask||this._filters){for(this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),t.spriteBatch.start()}else for(e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t)}},n.DisplayObjectContainer.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);this._mask&&t.maskManager.pushMask(this._mask,t);for(var e=0,n=this.children.length;n>e;e++){var r=this.children[e];r._renderCanvas(t)}this._mask&&t.maskManager.popMask(t)}},n.Sprite=function(t){n.DisplayObjectContainer.call(this),this.anchor=new n.Point,this.texture=t||n.Texture.emptyTexture,this._width=0,this._height=0,this.tint=16777215,this.blendMode=n.blendModes.NORMAL,this.shader=null,this.texture.baseTexture.hasLoaded?this.onTextureUpdate():this.texture.on("update",this.onTextureUpdate.bind(this)),this.renderable=!0},n.Sprite.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Sprite.prototype.constructor=n.Sprite,Object.defineProperty(n.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(n.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),n.Sprite.prototype.setTexture=function(t){this.texture=t,this.cachedTint=16777215},n.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},n.Sprite.prototype.getBounds=function(t){var e=this.texture.frame.width,n=this.texture.frame.height,r=e*(1-this.anchor.x),i=e*-this.anchor.x,o=n*(1-this.anchor.y),a=n*-this.anchor.y,s=t||this.worldTransform,u=s.a,c=s.b,l=s.c,f=s.d,h=s.tx,p=s.ty,d=-(1/0),m=-(1/0),v=1/0,g=1/0;if(0===c&&0===l)0>u&&(u*=-1),0>f&&(f*=-1),v=u*i+h,d=u*r+h,g=f*a+p,m=f*o+p;else{var y=u*i+l*a+h,b=f*a+c*i+p,_=u*r+l*a+h,w=f*a+c*r+p,x=u*r+l*o+h,E=f*o+c*r+p,T=u*i+l*o+h,C=f*o+c*i+p;v=v>y?y:v,v=v>_?_:v,v=v>x?x:v,v=v>T?T:v,g=g>b?b:g,g=g>w?w:g,g=g>E?E:g,g=g>C?C:g,d=y>d?y:d,d=_>d?_:d,d=x>d?x:d,d=T>d?T:d,m=b>m?b:m,m=w>m?w:m,m=E>m?E:m,m=C>m?C:m}var S=this._bounds;return S.x=v,S.width=d-v,S.y=g,S.height=m-g,this._currentBounds=S,S},n.Sprite.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){var e,n;if(this._mask||this._filters){var r=t.spriteBatch;for(this._filters&&(r.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(r.stop(),t.maskManager.pushMask(this.mask,t),r.start()),r.render(this),e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t);r.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),r.start()}else for(t.spriteBatch.render(this),e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t)}},n.Sprite.prototype._renderCanvas=function(t){if(!(this.visible===!1||0===this.alpha||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=n.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t),this.texture.valid){var e=this.texture.baseTexture.resolution/t.resolution;t.context.globalAlpha=this.worldAlpha,t.smoothProperty&&t.scaleMode!==this.texture.baseTexture.scaleMode&&(t.scaleMode=this.texture.baseTexture.scaleMode,t.context[t.smoothProperty]=t.scaleMode===n.scaleModes.LINEAR);var r=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,i=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;t.roundPixels?(t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution|0,this.worldTransform.ty*t.resolution|0),r=0|r,i=0|i):t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution,this.worldTransform.ty*t.resolution),16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=n.CanvasTinter.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,r/e,i/e,this.texture.crop.width/e,this.texture.crop.height/e)):t.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,r/e,i/e,this.texture.crop.width/e,this.texture.crop.height/e)}for(var o=0,a=this.children.length;a>o;o++)this.children[o]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},n.Sprite.fromFrame=function(t){var e=n.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache'+this);return new n.Sprite(e)},n.Sprite.fromImage=function(t,e,r){var i=n.Texture.fromImage(t,e,r);return new n.Sprite(i)},n.SpriteBatch=function(t){n.DisplayObjectContainer.call(this),this.textureThing=t,this.ready=!1},n.SpriteBatch.prototype=Object.create(n.DisplayObjectContainer.prototype),n.SpriteBatch.prototype.constructor=n.SpriteBatch,n.SpriteBatch.prototype.initWebGL=function(t){this.fastSpriteBatch=new n.WebGLFastSpriteBatch(t),this.ready=!0},n.SpriteBatch.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},n.SpriteBatch.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(t.gl),this.fastSpriteBatch.gl!==t.gl&&this.fastSpriteBatch.setContext(t.gl),t.spriteBatch.stop(),t.shaderManager.setShader(t.shaderManager.fastShader),this.fastSpriteBatch.begin(this,t),this.fastSpriteBatch.render(this),t.spriteBatch.start())},n.SpriteBatch.prototype._renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.children.length){var e=t.context;e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var n=this.worldTransform,r=!0,i=0;i<this.children.length;i++){var o=this.children[i];if(o.visible){var a=o.texture,s=a.frame;if(e.globalAlpha=this.worldAlpha*o.alpha,o.rotation%(2*Math.PI)===0)r&&(e.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty),r=!1),e.drawImage(a.baseTexture.source,s.x,s.y,s.width,s.height,o.anchor.x*-s.width*o.scale.x+o.position.x+.5|0,o.anchor.y*-s.height*o.scale.y+o.position.y+.5|0,s.width*o.scale.x,s.height*o.scale.y);else{r||(r=!0),o.displayObjectUpdateTransform();var u=o.worldTransform;t.roundPixels?e.setTransform(u.a,u.b,u.c,u.d,0|u.tx,0|u.ty):e.setTransform(u.a,u.b,u.c,u.d,u.tx,u.ty),e.drawImage(a.baseTexture.source,s.x,s.y,s.width,s.height,o.anchor.x*-s.width+.5|0,o.anchor.y*-s.height+.5|0,s.width,s.height)}}}}},n.MovieClip=function(t){n.Sprite.call(this,t[0]),this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},n.MovieClip.prototype=Object.create(n.Sprite.prototype),n.MovieClip.prototype.constructor=n.MovieClip,Object.defineProperty(n.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),n.MovieClip.prototype.stop=function(){this.playing=!1},n.MovieClip.prototype.play=function(){this.playing=!0},n.MovieClip.prototype.gotoAndStop=function(t){this.playing=!1,this.currentFrame=t;var e=this.currentFrame+.5|0;this.setTexture(this.textures[e%this.textures.length])},n.MovieClip.prototype.gotoAndPlay=function(t){this.currentFrame=t,this.playing=!0},n.MovieClip.prototype.updateTransform=function(){if(this.displayObjectContainerUpdateTransform(),this.playing){this.currentFrame+=this.animationSpeed;var t=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||t<this.textures.length?this.setTexture(this.textures[t%this.textures.length]):t>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},n.MovieClip.fromFrames=function(t){for(var e=[],r=0;r<t.length;r++)e.push(new n.Texture.fromFrame(t[r]));return new n.MovieClip(e)},n.MovieClip.fromImages=function(t){for(var e=[],r=0;r<t.length;r++)e.push(new n.Texture.fromImage(t[r]));return new n.MovieClip(e)},n.FilterBlock=function(){this.visible=!0,this.renderable=!0},n.FilterBlock.prototype.constructor=n.FilterBlock,n.Text=function(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,n.Sprite.call(this,n.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(e)},n.Text.prototype=Object.create(n.Sprite.prototype),n.Text.prototype.constructor=n.Text,Object.defineProperty(n.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(n.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),n.Text.prototype.setStyle=function(t){t=t||{},t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||4,t.dropShadowColor=t.dropShadowColor||"black",t.lineJoin=t.lineJoin||"miter",t.lineHeight=t.lineHeight||!1,this.style=t,this.dirty=!0},n.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},n.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),n=[],r=0,i=this.determineFontProperties(this.style.font),o=0;o<e.length;o++){var a=this.context.measureText(e[o]).width;n[o]=a,r=Math.max(r,a)}var s=r+this.style.strokeThickness;this.style.dropShadow&&(s+=this.style.dropShadowDistance),this.canvas.width=(s+this.context.lineWidth)*this.resolution;var u=this.style.lineHeight||i.fontSize+this.style.strokeThickness,c=u*e.length;this.style.dropShadow&&(c+=this.style.dropShadowDistance),this.canvas.height=c*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic",this.context.lineJoin=this.style.lineJoin;var l,f;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var h=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,p=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(o=0;o<e.length;o++)l=this.style.strokeThickness/2,f=this.style.strokeThickness/2+o*u+i.ascent,"right"===this.style.align?l+=r-n[o]:"center"===this.style.align&&(l+=(r-n[o])/2),this.style.fill&&this.context.fillText(e[o],l+h,f+p)}for(this.context.fillStyle=this.style.fill,o=0;o<e.length;o++)l=this.style.strokeThickness/2,f=this.style.strokeThickness/2+o*u+i.ascent,"right"===this.style.align?l+=r-n[o]:"center"===this.style.align&&(l+=(r-n[o])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[o],l,f),this.style.fill&&this.context.fillText(e[o],l,f);this.updateTexture()},n.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.texture.baseTexture.dirty()},n.Text.prototype._renderWebGL=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),n.Sprite.prototype._renderWebGL.call(this,t)},n.Text.prototype._renderCanvas=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),n.Sprite.prototype._renderCanvas.call(this,t)},n.Text.prototype.determineFontProperties=function(t){var e=n.Text.fontPropertiesCache[t];if(!e){e={};var r=n.Text.fontPropertiesCanvas,i=n.Text.fontPropertiesContext;i.font=t;var o=Math.ceil(i.measureText("|Mq").width),a=Math.ceil(i.measureText("M").width),s=2*a;a=1.4*a|0,r.width=o,r.height=s,i.fillStyle="#f00",i.fillRect(0,0,o,s),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|Mq",0,a);var u,c,l=i.getImageData(0,0,o,s).data,f=l.length,h=4*o,p=0,d=!1;for(u=0;a>u;u++){for(c=0;h>c;c+=4)if(255!==l[p+c]){d=!0;break}if(d)break;p+=h}for(e.ascent=a-u,p=f-h,d=!1,u=s;u>a;u--){for(c=0;h>c;c+=4)if(255!==l[p+c]){d=!0;break}if(d)break;p-=h}e.descent=u-a,e.descent+=6,e.fontSize=e.ascent+e.descent,n.Text.fontPropertiesCache[t]=e}return e},n.Text.prototype.wordWrap=function(t){for(var e="",n=t.split("\n"),r=0;r<n.length;r++){for(var i=this.style.wordWrapWidth,o=n[r].split(" "),a=0;a<o.length;a++){var s=this.context.measureText(o[a]).width,u=s+this.context.measureText(" ").width;0===a||u>i?(a>0&&(e+="\n"),e+=o[a],i=this.style.wordWrapWidth-s):(i-=u,e+=" "+o[a])}r<n.length-1&&(e+="\n")}return e},n.Text.prototype.getBounds=function(t){return this.dirty&&(this.updateText(),this.dirty=!1),n.Sprite.prototype.getBounds.call(this,t)},n.Text.prototype.destroy=function(t){this.context=null,this.canvas=null,this.texture.destroy(void 0===t?!0:t)},n.Text.fontPropertiesCache={},n.Text.fontPropertiesCanvas=document.createElement("canvas"),n.Text.fontPropertiesContext=n.Text.fontPropertiesCanvas.getContext("2d"),n.BitmapText=function(t,e){n.DisplayObjectContainer.call(this),this.textWidth=0,this.textHeight=0,this._pool=[],this.setText(t),this.setStyle(e),this.updateText(),this.dirty=!1},n.BitmapText.prototype=Object.create(n.DisplayObjectContainer.prototype),n.BitmapText.prototype.constructor=n.BitmapText,n.BitmapText.prototype.setText=function(t){this.text=t||" ",this.dirty=!0},n.BitmapText.prototype.setStyle=function(t){t=t||{},t.align=t.align||"left",this.style=t;var e=t.font.split(" ");this.fontName=e[e.length-1],this.fontSize=e.length>=2?parseInt(e[e.length-2],10):n.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=t.tint},n.BitmapText.prototype.updateText=function(){for(var t=n.BitmapText.fonts[this.fontName],e=new n.Point,r=null,i=[],o=0,a=[],s=0,u=this.fontSize/t.size,c=0;c<this.text.length;c++){var l=this.text.charCodeAt(c);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(c)))a.push(e.x),o=Math.max(o,e.x),s++,e.x=0,e.y+=t.lineHeight,r=null;else{var f=t.chars[l];f&&(r&&f.kerning[r]&&(e.x+=f.kerning[r]),i.push({texture:f.texture,line:s,charCode:l,position:new n.Point(e.x+f.xOffset,e.y+f.yOffset)}),e.x+=f.xAdvance,r=l)}}a.push(e.x),o=Math.max(o,e.x);var h=[];for(c=0;s>=c;c++){var p=0;"right"===this.style.align?p=o-a[c]:"center"===this.style.align&&(p=(o-a[c])/2),h.push(p)}var d=this.children.length,m=i.length,v=this.tint||16777215;for(c=0;m>c;c++){var g=d>c?this.children[c]:this._pool.pop();g?g.setTexture(i[c].texture):g=new n.Sprite(i[c].texture),g.position.x=(i[c].position.x+h[i[c].line])*u,g.position.y=i[c].position.y*u,g.scale.x=g.scale.y=u,g.tint=v,g.parent||this.addChild(g)}for(;this.children.length>m;){var y=this.getChildAt(this.children.length-1);this._pool.push(y),this.removeChild(y)}this.textWidth=o*u,this.textHeight=(e.y+t.lineHeight)*u},n.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),n.DisplayObjectContainer.prototype.updateTransform.call(this)},n.BitmapText.fonts={},n.InteractionData=function(){this.global=new n.Point,this.target=null,this.originalEvent=null},n.InteractionData.prototype.getLocalPosition=function(t,e,r){var i=t.worldTransform,o=r?r:this.global,a=i.a,s=i.c,u=i.tx,c=i.b,l=i.d,f=i.ty,h=1/(a*l+s*-c);return e=e||new n.Point,e.x=l*h*o.x+-s*h*o.y+(f*s-u*l)*h,e.y=a*h*o.y+-c*h*o.x+(-f*a+u*c)*h,e},n.InteractionData.prototype.constructor=n.InteractionData,n.InteractionManager=function(t){this.stage=t,this.mouse=new n.InteractionData,this.touches={},this.tempPoint=new n.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),
this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1,this.resolution=1,this._tempPoint=new n.Point},n.InteractionManager.prototype.constructor=n.InteractionManager,n.InteractionManager.prototype.collectInteractiveSprite=function(t,e){for(var n=t.children,r=n.length,i=r-1;i>=0;i--){var o=n[i];o._interactive?(e.interactiveChildren=!0,this.interactiveItems.push(o),o.children.length>0&&this.collectInteractiveSprite(o,o)):(o.__iParent=null,o.children.length>0&&this.collectInteractiveSprite(o,e))}},n.InteractionManager.prototype.setTarget=function(t){this.target=t,this.resolution=t.resolution,null===this.interactionDOMElement&&this.setTargetDomElement(t.view)},n.InteractionManager.prototype.setTargetDomElement=function(t){this.removeEvents(),window.navigator.msPointerEnabled&&(t.style["-ms-content-zooming"]="none",t.style["-ms-touch-action"]="none"),this.interactionDOMElement=t,t.addEventListener("mousemove",this.onMouseMove,!0),t.addEventListener("mousedown",this.onMouseDown,!0),t.addEventListener("mouseout",this.onMouseOut,!0),t.addEventListener("touchstart",this.onTouchStart,!0),t.addEventListener("touchend",this.onTouchEnd,!0),t.addEventListener("touchleave",this.onTouchCancel,!0),t.addEventListener("touchcancel",this.onTouchCancel,!0),t.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},n.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchleave",this.onTouchCancel,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onTouchCancel,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))},n.InteractionManager.prototype.update=function(){if(this.target){var t=Date.now(),e=t-this.last;if(e=e*n.INTERACTION_FREQUENCY/1e3,!(1>e)){this.last=t;var r=0;this.dirty&&this.rebuildInteractiveGraph();var i=this.interactiveItems.length,o="inherit",a=!1;for(r=0;i>r;r++){var s=this.interactiveItems[r];s.__hit=this.hitTest(s,this.mouse),this.mouse.target=s,s.__hit&&!a?(s.buttonMode&&(o=s.defaultCursor),s.interactiveChildren||(a=!0),s.__isOver||(s.mouseover&&s.mouseover(this.mouse),s.__isOver=!0)):s.__isOver&&(s.mouseout&&s.mouseout(this.mouse),s.__isOver=!1)}this.currentCursorStyle!==o&&(this.currentCursorStyle=o,this.interactionDOMElement.style.cursor=o)}}},n.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var t=this.interactiveItems.length,e=0;t>e;e++)this.interactiveItems[e].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},n.InteractionManager.prototype.onMouseMove=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;var e=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(t.clientX-e.left)*(this.target.width/e.width)/this.resolution,this.mouse.global.y=(t.clientY-e.top)*(this.target.height/e.height)/this.resolution;for(var n=this.interactiveItems.length,r=0;n>r;r++){var i=this.interactiveItems[r];i.mousemove&&i.mousemove(this.mouse)}},n.InteractionManager.prototype.onMouseDown=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t,n.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();for(var e=this.interactiveItems.length,r=this.mouse.originalEvent,i=2===r.button||3===r.which,o=i?"rightdown":"mousedown",a=i?"rightclick":"click",s=i?"__rightIsDown":"__mouseIsDown",u=i?"__isRightDown":"__isDown",c=0;e>c;c++){var l=this.interactiveItems[c];if((l[o]||l[a])&&(l[s]=!0,l.__hit=this.hitTest(l,this.mouse),l.__hit&&(l[o]&&l[o](this.mouse),l[u]=!0,!l.interactiveChildren)))break}},n.InteractionManager.prototype.onMouseOut=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;var e=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var n=0;e>n;n++){var r=this.interactiveItems[n];r.__isOver&&(this.mouse.target=r,r.mouseout&&r.mouseout(this.mouse),r.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},n.InteractionManager.prototype.onMouseUp=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;for(var e=this.interactiveItems.length,n=!1,r=this.mouse.originalEvent,i=2===r.button||3===r.which,o=i?"rightup":"mouseup",a=i?"rightclick":"click",s=i?"rightupoutside":"mouseupoutside",u=i?"__isRightDown":"__isDown",c=0;e>c;c++){var l=this.interactiveItems[c];(l[a]||l[o]||l[s])&&(l.__hit=this.hitTest(l,this.mouse),l.__hit&&!n?(l[o]&&l[o](this.mouse),l[u]&&l[a]&&l[a](this.mouse),l.interactiveChildren||(n=!0)):l[u]&&l[s]&&l[s](this.mouse),l[u]=!1)}},n.InteractionManager.prototype.hitTest=function(t,e){var r=e.global;if(!t.worldVisible)return!1;t.worldTransform.applyInverse(r,this._tempPoint);var i,o=this._tempPoint.x,a=this._tempPoint.y;if(e.target=t,t.hitArea&&t.hitArea.contains)return t.hitArea.contains(o,a);if(t instanceof n.Sprite){var s,u=t.texture.frame.width,c=t.texture.frame.height,l=-u*t.anchor.x;if(o>l&&l+u>o&&(s=-c*t.anchor.y,a>s&&s+c>a))return!0}else if(t instanceof n.Graphics){var f=t.graphicsData;for(i=0;i<f.length;i++){var h=f[i];if(h.fill&&h.shape&&h.shape.contains(o,a))return!0}}var p=t.children.length;for(i=0;p>i;i++){var d=t.children[i],m=this.hitTest(d,e);if(m)return e.target=t,!0}return!1},n.InteractionManager.prototype.onTouchMove=function(t){this.dirty&&this.rebuildInteractiveGraph();for(var e,n,r=this.interactionDOMElement.getBoundingClientRect(),i=t.changedTouches,o=i.length,a=this.target.width/r.width,s=this.target.height/r.height,u=navigator.isCocoonJS&&!r.left&&!r.top&&!t.target.style.width&&!t.target.style.height,c=0;o>c;c++)n=i[c],u?(n.globalX=n.clientX,n.globalY=n.clientY):(n.globalX=(n.clientX-r.left)*a/this.resolution,n.globalY=(n.clientY-r.top)*s/this.resolution);for(var l=0;o>l;l++){n=i[l],e=this.touches[n.identifier],e.originalEvent=t,u?(e.global.x=n.clientX,e.global.y=n.clientY):(n.globalX=e.global.x=(n.clientX-r.left)*a/this.resolution,n.globalY=e.global.y=(n.clientY-r.top)*s/this.resolution);for(var f=0;f<this.interactiveItems.length;f++){var h=this.interactiveItems[f];h.touchmove&&h.__touchData&&h.__touchData[n.identifier]&&h.touchmove(e)}}},n.InteractionManager.prototype.onTouchStart=function(t){this.dirty&&this.rebuildInteractiveGraph();var e=this.interactionDOMElement.getBoundingClientRect();n.AUTO_PREVENT_DEFAULT&&t.preventDefault();for(var r,i=t.changedTouches,o=i.length,a=this.target.width/e.width,s=this.target.height/e.height,u=navigator.isCocoonJS&&!e.left&&!e.top&&!t.target.style.width&&!t.target.style.height,c=0;o>c;c++)r=i[c],u?(r.globalX=r.clientX,r.globalY=r.clientY):(r.globalX=(r.clientX-e.left)*a/this.resolution,r.globalY=(r.clientY-e.top)*s/this.resolution);for(var l=0;o>l;l++){r=i[l];var f=this.pool.pop();f||(f=new n.InteractionData),f.originalEvent=t,this.touches[r.identifier]=f,u?(f.global.x=r.clientX,f.global.y=r.clientY):(f.global.x=(r.clientX-e.left)*a/this.resolution,f.global.y=(r.clientY-e.top)*s/this.resolution);for(var h=this.interactiveItems.length,p=0;h>p;p++){var d=this.interactiveItems[p];if((d.touchstart||d.tap)&&(d.__hit=this.hitTest(d,f),d.__hit&&(d.touchstart&&d.touchstart(f),d.__isDown=!0,d.__touchData=d.__touchData||{},d.__touchData[r.identifier]=f,!d.interactiveChildren)))break}}},n.InteractionManager.prototype.onTouchEnd=function(t){this.dirty&&this.rebuildInteractiveGraph();for(var e,n=this.interactionDOMElement.getBoundingClientRect(),r=t.changedTouches,i=r.length,o=this.target.width/n.width,a=this.target.height/n.height,s=navigator.isCocoonJS&&!n.left&&!n.top&&!t.target.style.width&&!t.target.style.height,u=0;i>u;u++)e=r[u],s?(e.globalX=e.clientX,e.globalY=e.clientY):(e.globalX=(e.clientX-n.left)*o/this.resolution,e.globalY=(e.clientY-n.top)*a/this.resolution);for(var c=0;i>c;c++){e=r[c];var l=this.touches[e.identifier],f=!1;s?(l.global.x=e.clientX,l.global.y=e.clientY):(l.global.x=(e.clientX-n.left)*o/this.resolution,l.global.y=(e.clientY-n.top)*a/this.resolution);for(var h=this.interactiveItems.length,p=0;h>p;p++){var d=this.interactiveItems[p];d.__touchData&&d.__touchData[e.identifier]&&(d.__hit=this.hitTest(d,d.__touchData[e.identifier]),l.originalEvent=t,(d.touchend||d.tap)&&(d.__hit&&!f?(d.touchend&&d.touchend(l),d.__isDown&&d.tap&&d.tap(l),d.interactiveChildren||(f=!0)):d.__isDown&&d.touchendoutside&&d.touchendoutside(l),d.__isDown=!1),d.__touchData[e.identifier]=null)}this.pool.push(l),this.touches[e.identifier]=null}},n.InteractionManager.prototype.onTouchCancel=function(t){this.dirty&&this.rebuildInteractiveGraph();for(var e,n=this.interactionDOMElement.getBoundingClientRect(),r=t.changedTouches,i=r.length,o=this.target.width/n.width,a=this.target.height/n.height,s=navigator.isCocoonJS&&!n.left&&!n.top&&!t.target.style.width&&!t.target.style.height,u=0;i>u;u++)e=r[u],s?(e.globalX=e.clientX,e.globalY=e.clientY):(e.globalX=(e.clientX-n.left)*o/this.resolution,e.globalY=(e.clientY-n.top)*a/this.resolution);for(var c=0;i>c;c++){e=r[c];var l=this.touches[e.identifier],f=!1;s?(l.global.x=e.clientX,l.global.y=e.clientY):(l.global.x=(e.clientX-n.left)*o/this.resolution,l.global.y=(e.clientY-n.top)*a/this.resolution);for(var h=this.interactiveItems.length,p=0;h>p;p++){var d=this.interactiveItems[p];d.__touchData&&d.__touchData[e.identifier]&&(d.__hit=this.hitTest(d,d.__touchData[e.identifier]),l.originalEvent=t,d.touchcancel&&!f&&(d.touchcancel(l),d.interactiveChildren||(f=!0)),d.__isDown=!1,d.__touchData[e.identifier]=null)}this.pool.push(l),this.touches[e.identifier]=null}},n.Stage=function(t){n.DisplayObjectContainer.call(this),this.worldTransform=new n.Matrix,this.interactive=!0,this.interactionManager=new n.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new n.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(t)},n.Stage.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Stage.prototype.constructor=n.Stage,n.Stage.prototype.setInteractionDelegate=function(t){this.interactionManager.setTargetDomElement(t)},n.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},n.Stage.prototype.setBackgroundColor=function(t){this.backgroundColor=t||0,this.backgroundColorSplit=n.hex2rgb(this.backgroundColor);var e=this.backgroundColor.toString(16);e="000000".substr(0,6-e.length)+e,this.backgroundColorString="#"+e},n.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global},function(t){for(var e=0,n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r)t.requestAnimationFrame=t[n[r]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[r]+"CancelAnimationFrame"]||t[n[r]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),o=t.setTimeout(function(){n(r+i)},i);return e=r+i,o}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)}),t.requestAnimFrame=t.requestAnimationFrame}(this),n.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},n.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){return function(t){function e(){for(var r=arguments.length,o=new Array(r);r--;)o[r]=arguments[r];return o=i.concat(o),n.apply(this instanceof e?this:t,o)}var n=this,r=arguments.length-1,i=[];if(r>0)for(i.length=r;r--;)i[r]=arguments[r+1];if("function"!=typeof n)throw new TypeError;return e.prototype=function o(t){return t&&(o.prototype=t),this instanceof o?void 0:new o}(n.prototype),e}}()),n.AjaxRequest=function(){var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var e=0;e<t.length;e++)try{return new window.ActiveXObject(t[e])}catch(n){}},n.canUseNewCanvasBlendModes=function(){if("undefined"==typeof document)return!1;var t=document.createElement("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="#000",e.fillRect(0,0,1,1),e.globalCompositeOperation="multiply",e.fillStyle="#fff",e.fillRect(0,0,1,1),0===e.getImageData(0,0,1,1).data[0]},n.getNextPowerOfTwo=function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},n.isPowerOfTwo=function(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)},n.EventTarget={call:function(t){t&&(t=t.prototype||t,n.EventTarget.mixin(t))},mixin:function(t){t.listeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]?this._listeners[t].slice():[]},t.emit=t.dispatchEvent=function(t,e){if(this._listeners=this._listeners||{},"object"==typeof t&&(e=t,t=t.type),e&&e.__isEventObject===!0||(e=new n.Event(this,t,e)),this._listeners&&this._listeners[t]){var r,i=this._listeners[t].slice(0),o=i.length,a=i[0];for(r=0;o>r;a=i[++r])if(a.call(this,e),e.stoppedImmediate)return this;if(e.stopped)return this}return this.parent&&this.parent.emit&&this.parent.emit.call(this.parent,t,e),this},t.on=t.addEventListener=function(t,e){return this._listeners=this._listeners||{},(this._listeners[t]=this._listeners[t]||[]).push(e),this},t.once=function(t,e){function n(){e.apply(r.off(t,n),arguments)}this._listeners=this._listeners||{};var r=this;return n._originalHandler=e,this.on(t,n)},t.off=t.removeEventListener=function(t,e){if(this._listeners=this._listeners||{},!this._listeners[t])return this;for(var n=this._listeners[t],r=e?n.length:0;r-->0;)(n[r]===e||n[r]._originalHandler===e)&&n.splice(r,1);return 0===n.length&&delete this._listeners[t],this},t.removeAllListeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]?(delete this._listeners[t],this):this}}},n.Event=function(t,e,n){this.__isEventObject=!0,this.stopped=!1,this.stoppedImmediate=!1,this.target=t,this.type=e,this.data=n,this.content=n,this.timeStamp=Date.now()},n.Event.prototype.stopPropagation=function(){this.stopped=!0},n.Event.prototype.stopImmediatePropagation=function(){this.stoppedImmediate=!0},n.autoDetectRenderer=function(t,e,r){t||(t=800),e||(e=600);var i=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}();return i?new n.WebGLRenderer(t,e,r):new n.CanvasRenderer(t,e,r)},n.autoDetectRecommendedRenderer=function(t,e,r){t||(t=800),e||(e=600);var i=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}(),o=/Android/i.test(navigator.userAgent);return i&&!o?new n.WebGLRenderer(t,e,r):new n.CanvasRenderer(t,e,r)},n.PolyK={},n.PolyK.Triangulate=function(t){var e=!0,r=t.length>>1;if(3>r)return[];for(var i=[],o=[],a=0;r>a;a++)o.push(a);a=0;for(var s=r;s>3;){var u=o[(a+0)%s],c=o[(a+1)%s],l=o[(a+2)%s],f=t[2*u],h=t[2*u+1],p=t[2*c],d=t[2*c+1],m=t[2*l],v=t[2*l+1],g=!1;if(n.PolyK._convex(f,h,p,d,m,v,e)){g=!0;for(var y=0;s>y;y++){var b=o[y];if(b!==u&&b!==c&&b!==l&&n.PolyK._PointInTriangle(t[2*b],t[2*b+1],f,h,p,d,m,v)){g=!1;break}}}if(g)i.push(u,c,l),o.splice((a+1)%s,1),s--,a=0;else if(a++>3*s){if(!e)return null;for(i=[],o=[],a=0;r>a;a++)o.push(a);a=0,s=r,e=!1}}return i.push(o[0],o[1],o[2]),i},n.PolyK._PointInTriangle=function(t,e,n,r,i,o,a,s){var u=a-n,c=s-r,l=i-n,f=o-r,h=t-n,p=e-r,d=u*u+c*c,m=u*l+c*f,v=u*h+c*p,g=l*l+f*f,y=l*h+f*p,b=1/(d*g-m*m),_=(g*v-m*y)*b,w=(d*y-m*v)*b;return _>=0&&w>=0&&1>_+w},n.PolyK._convex=function(t,e,n,r,i,o,a){return(e-r)*(i-n)+(n-t)*(o-r)>=0===a},n.initDefaultShaders=function(){},n.CompileVertexShader=function(t,e){return n._CompileShader(t,e,t.VERTEX_SHADER)},n.CompileFragmentShader=function(t,e){return n._CompileShader(t,e,t.FRAGMENT_SHADER)},n._CompileShader=function(t,e,n){var r=e.join("\n"),i=t.createShader(n);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(window.console.log(t.getShaderInfoLog(i)),null)},n.compileProgram=function(t,e,r){var i=n.CompileFragmentShader(t,r),o=n.CompileVertexShader(t,e),a=t.createProgram();return t.attachShader(a,o),t.attachShader(a,i),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||window.console.log("Could not initialise shaders"),a},n.PixiShader=function(t){this._UID=n._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},n.PixiShader.prototype.constructor=n.PixiShader,n.PixiShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc||n.PixiShader.defaultVertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var r in this.uniforms)this.uniforms[r].uniformLocation=t.getUniformLocation(e,r);this.initUniforms(),this.program=e},n.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var n in this.uniforms){t=this.uniforms[n];var r=t.type;"sampler2D"===r?(t._init=!1,null!==t.value&&this.initSampler2D(t)):"mat2"===r||"mat3"===r||"mat4"===r?(t.glMatrix=!0,t.glValueLength=1,"mat2"===r?t.glFunc=e.uniformMatrix2fv:"mat3"===r?t.glFunc=e.uniformMatrix3fv:"mat4"===r&&(t.glFunc=e.uniformMatrix4fv)):(t.glFunc=e["uniform"+r],"2f"===r||"2i"===r?t.glValueLength=2:"3f"===r||"3i"===r?t.glValueLength=3:"4f"===r||"4i"===r?t.glValueLength=4:t.glValueLength=1)}},n.PixiShader.prototype.initSampler2D=function(t){if(t.value&&t.value.baseTexture&&t.value.baseTexture.hasLoaded){var e=this.gl;if(e.activeTexture(e["TEXTURE"+this.textureCount]),e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),t.textureData){var n=t.textureData,r=n.magFilter?n.magFilter:e.LINEAR,i=n.minFilter?n.minFilter:e.LINEAR,o=n.wrapS?n.wrapS:e.CLAMP_TO_EDGE,a=n.wrapT?n.wrapT:e.CLAMP_TO_EDGE,s=n.luminance?e.LUMINANCE:e.RGBA;if(n.repeat&&(o=e.REPEAT,a=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!n.flipY),n.width){var u=n.width?n.width:512,c=n.height?n.height:2,l=n.border?n.border:0;e.texImage2D(e.TEXTURE_2D,0,s,u,c,l,s,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,s,e.RGBA,e.UNSIGNED_BYTE,t.value.baseTexture.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,a)}e.uniform1i(t.uniformLocation,this.textureCount),t._init=!0,this.textureCount++}},n.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var r in this.uniforms)t=this.uniforms[r],1===t.glValueLength?t.glMatrix===!0?t.glFunc.call(e,t.uniformLocation,t.transpose,t.value):t.glFunc.call(e,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w):"sampler2D"===t.type&&(t._init?(e.activeTexture(e["TEXTURE"+this.textureCount]),t.value.baseTexture._dirty[e.id]?n.instances[e.id].updateTexture(t.value.baseTexture):e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),e.uniform1i(t.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(t))},n.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"],n.PixiFastShader=function(t){this._UID=n._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},n.PixiFastShader.prototype.constructor=n.PixiFastShader,n.PixiFastShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.uMatrix=t.getUniformLocation(e,"uMatrix"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aPositionCoord=t.getAttribLocation(e,"aPositionCoord"),this.aScale=t.getAttribLocation(e,"aScale"),this.aRotation=t.getAttribLocation(e,"aRotation"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=e},n.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.StripShader=function(t){this._UID=n._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},n.StripShader.prototype.constructor=n.StripShader,n.StripShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},n.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},n.PrimitiveShader=function(t){this._UID=n._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},n.PrimitiveShader.prototype.constructor=n.PrimitiveShader,n.PrimitiveShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.tintColor=t.getUniformLocation(e,"tint"),this.flipY=t.getUniformLocation(e,"flipY"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},n.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.ComplexPrimitiveShader=function(t){this._UID=n._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","uniform float flipY;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},n.ComplexPrimitiveShader.prototype.constructor=n.ComplexPrimitiveShader,n.ComplexPrimitiveShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.tintColor=t.getUniformLocation(e,"tint"),this.color=t.getUniformLocation(e,"color"),this.flipY=t.getUniformLocation(e,"flipY"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},n.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},n.WebGLGraphics=function(){},n.WebGLGraphics.renderGraphics=function(t,e){var r,i=e.gl,o=e.projection,a=e.offset,s=e.shaderManager.primitiveShader;t.dirty&&n.WebGLGraphics.updateGraphics(t,i);for(var u=t._webGL[i.id],c=0;c<u.data.length;c++)1===u.data[c].mode?(r=u.data[c],e.stencilManager.pushStencil(t,r,e),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(r.indices.length-4)),e.stencilManager.popStencil(t,r,e)):(r=u.data[c],e.shaderManager.setShader(s),s=e.shaderManager.primitiveShader,i.uniformMatrix3fv(s.translationMatrix,!1,t.worldTransform.toArray(!0)),i.uniform1f(s.flipY,1),i.uniform2f(s.projectionVector,o.x,-o.y),i.uniform2f(s.offsetVector,-a.x,-a.y),i.uniform3fv(s.tintColor,n.hex2rgb(t.tint)),i.uniform1f(s.alpha,t.worldAlpha),i.bindBuffer(i.ARRAY_BUFFER,r.buffer),i.vertexAttribPointer(s.aVertexPosition,2,i.FLOAT,!1,24,0),i.vertexAttribPointer(s.colorAttribute,4,i.FLOAT,!1,24,8),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r.indexBuffer),i.drawElements(i.TRIANGLE_STRIP,r.indices.length,i.UNSIGNED_SHORT,0))},n.WebGLGraphics.updateGraphics=function(t,e){var r=t._webGL[e.id];r||(r=t._webGL[e.id]={lastIndex:0,data:[],gl:e}),t.dirty=!1;var i;if(t.clearDirty){for(t.clearDirty=!1,i=0;i<r.data.length;i++){var o=r.data[i];o.reset(),n.WebGLGraphics.graphicsDataPool.push(o)}r.data=[],r.lastIndex=0}var a;for(i=r.lastIndex;i<t.graphicsData.length;i++){var s=t.graphicsData[i];if(s.type===n.Graphics.POLY){if(s.points=s.shape.points.slice(),s.shape.closed&&(s.points[0]!==s.points[s.points.length-2]||s.points[1]!==s.points[s.points.length-1])&&s.points.push(s.points[0],s.points[1]),s.fill&&s.points.length>=6)if(s.points.length<12){a=n.WebGLGraphics.switchMode(r,0);var u=n.WebGLGraphics.buildPoly(s,a);u||(a=n.WebGLGraphics.switchMode(r,1),n.WebGLGraphics.buildComplexPoly(s,a))}else a=n.WebGLGraphics.switchMode(r,1),n.WebGLGraphics.buildComplexPoly(s,a);s.lineWidth>0&&(a=n.WebGLGraphics.switchMode(r,0),n.WebGLGraphics.buildLine(s,a))}else a=n.WebGLGraphics.switchMode(r,0),s.type===n.Graphics.RECT?n.WebGLGraphics.buildRectangle(s,a):s.type===n.Graphics.CIRC||s.type===n.Graphics.ELIP?n.WebGLGraphics.buildCircle(s,a):s.type===n.Graphics.RREC&&n.WebGLGraphics.buildRoundedRectangle(s,a);r.lastIndex++}for(i=0;i<r.data.length;i++)a=r.data[i],a.dirty&&a.upload()},n.WebGLGraphics.switchMode=function(t,e){var r;return t.data.length?(r=t.data[t.data.length-1],(r.mode!==e||1===e)&&(r=n.WebGLGraphics.graphicsDataPool.pop()||new n.WebGLGraphicsData(t.gl),r.mode=e,t.data.push(r))):(r=n.WebGLGraphics.graphicsDataPool.pop()||new n.WebGLGraphicsData(t.gl),r.mode=e,t.data.push(r)),r.dirty=!0,r},n.WebGLGraphics.buildRectangle=function(t,e){var r=t.shape,i=r.x,o=r.y,a=r.width,s=r.height;if(t.fill){var u=n.hex2rgb(t.fillColor),c=t.fillAlpha,l=u[0]*c,f=u[1]*c,h=u[2]*c,p=e.points,d=e.indices,m=p.length/6;p.push(i,o),p.push(l,f,h,c),p.push(i+a,o),p.push(l,f,h,c),p.push(i,o+s),p.push(l,f,h,c),p.push(i+a,o+s),p.push(l,f,h,c),d.push(m,m,m+1,m+2,m+3,m+3)}if(t.lineWidth){var v=t.points;t.points=[i,o,i+a,o,i+a,o+s,i,o+s,i,o],n.WebGLGraphics.buildLine(t,e),t.points=v}},n.WebGLGraphics.buildRoundedRectangle=function(t,e){var r=t.shape,i=r.x,o=r.y,a=r.width,s=r.height,u=r.radius,c=[];if(c.push(i,o+u),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i,o+s-u,i,o+s,i+u,o+s)),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i+a-u,o+s,i+a,o+s,i+a,o+s-u)),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i+a,o+u,i+a,o,i+a-u,o)),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i+u,o,i,o,i,o+u)),
t.fill){var l=n.hex2rgb(t.fillColor),f=t.fillAlpha,h=l[0]*f,p=l[1]*f,d=l[2]*f,m=e.points,v=e.indices,g=m.length/6,y=n.PolyK.Triangulate(c),b=0;for(b=0;b<y.length;b+=3)v.push(y[b]+g),v.push(y[b]+g),v.push(y[b+1]+g),v.push(y[b+2]+g),v.push(y[b+2]+g);for(b=0;b<c.length;b++)m.push(c[b],c[++b],h,p,d,f)}if(t.lineWidth){var _=t.points;t.points=c,n.WebGLGraphics.buildLine(t,e),t.points=_}},n.WebGLGraphics.quadraticBezierCurve=function(t,e,n,r,i,o){function a(t,e,n){var r=e-t;return t+r*n}for(var s,u,c,l,f,h,p=20,d=[],m=0,v=0;p>=v;v++)m=v/p,s=a(t,n,m),u=a(e,r,m),c=a(n,i,m),l=a(r,o,m),f=a(s,c,m),h=a(u,l,m),d.push(f,h);return d},n.WebGLGraphics.buildCircle=function(t,e){var r,i,o=t.shape,a=o.x,s=o.y;t.type===n.Graphics.CIRC?(r=o.radius,i=o.radius):(r=o.width,i=o.height);var u=40,c=2*Math.PI/u,l=0;if(t.fill){var f=n.hex2rgb(t.fillColor),h=t.fillAlpha,p=f[0]*h,d=f[1]*h,m=f[2]*h,v=e.points,g=e.indices,y=v.length/6;for(g.push(y),l=0;u+1>l;l++)v.push(a,s,p,d,m,h),v.push(a+Math.sin(c*l)*r,s+Math.cos(c*l)*i,p,d,m,h),g.push(y++,y++);g.push(y-1)}if(t.lineWidth){var b=t.points;for(t.points=[],l=0;u+1>l;l++)t.points.push(a+Math.sin(c*l)*r,s+Math.cos(c*l)*i);n.WebGLGraphics.buildLine(t,e),t.points=b}},n.WebGLGraphics.buildLine=function(t,e){var r=0,i=t.points;if(0!==i.length){if(t.lineWidth%2)for(r=0;r<i.length;r++)i[r]+=.5;var o=new n.Point(i[0],i[1]),a=new n.Point(i[i.length-2],i[i.length-1]);if(o.x===a.x&&o.y===a.y){i=i.slice(),i.pop(),i.pop(),a=new n.Point(i[i.length-2],i[i.length-1]);var s=a.x+.5*(o.x-a.x),u=a.y+.5*(o.y-a.y);i.unshift(s,u),i.push(s,u)}var c,l,f,h,p,d,m,v,g,y,b,_,w,x,E,T,C,S,A,k,O,j,M,R=e.points,N=e.indices,P=i.length/2,I=i.length,D=R.length/6,L=t.lineWidth/2,F=n.hex2rgb(t.lineColor),B=t.lineAlpha,U=F[0]*B,q=F[1]*B,V=F[2]*B;for(f=i[0],h=i[1],p=i[2],d=i[3],g=-(h-d),y=f-p,M=Math.sqrt(g*g+y*y),g/=M,y/=M,g*=L,y*=L,R.push(f-g,h-y,U,q,V,B),R.push(f+g,h+y,U,q,V,B),r=1;P-1>r;r++)f=i[2*(r-1)],h=i[2*(r-1)+1],p=i[2*r],d=i[2*r+1],m=i[2*(r+1)],v=i[2*(r+1)+1],g=-(h-d),y=f-p,M=Math.sqrt(g*g+y*y),g/=M,y/=M,g*=L,y*=L,b=-(d-v),_=p-m,M=Math.sqrt(b*b+_*_),b/=M,_/=M,b*=L,_*=L,E=-y+h-(-y+d),T=-g+p-(-g+f),C=(-g+f)*(-y+d)-(-g+p)*(-y+h),S=-_+v-(-_+d),A=-b+p-(-b+m),k=(-b+m)*(-_+d)-(-b+p)*(-_+v),O=E*A-S*T,Math.abs(O)<.1?(O+=10.1,R.push(p-g,d-y,U,q,V,B),R.push(p+g,d+y,U,q,V,B)):(c=(T*k-A*C)/O,l=(S*C-E*k)/O,j=(c-p)*(c-p)+(l-d)+(l-d),j>19600?(w=g-b,x=y-_,M=Math.sqrt(w*w+x*x),w/=M,x/=M,w*=L,x*=L,R.push(p-w,d-x),R.push(U,q,V,B),R.push(p+w,d+x),R.push(U,q,V,B),R.push(p-w,d-x),R.push(U,q,V,B),I++):(R.push(c,l),R.push(U,q,V,B),R.push(p-(c-p),d-(l-d)),R.push(U,q,V,B)));for(f=i[2*(P-2)],h=i[2*(P-2)+1],p=i[2*(P-1)],d=i[2*(P-1)+1],g=-(h-d),y=f-p,M=Math.sqrt(g*g+y*y),g/=M,y/=M,g*=L,y*=L,R.push(p-g,d-y),R.push(U,q,V,B),R.push(p+g,d+y),R.push(U,q,V,B),N.push(D),r=0;I>r;r++)N.push(D++);N.push(D-1)}},n.WebGLGraphics.buildComplexPoly=function(t,e){var r=t.points.slice();if(!(r.length<6)){var i=e.indices;e.points=r,e.alpha=t.fillAlpha,e.color=n.hex2rgb(t.fillColor);for(var o,a,s=1/0,u=-(1/0),c=1/0,l=-(1/0),f=0;f<r.length;f+=2)o=r[f],a=r[f+1],s=s>o?o:s,u=o>u?o:u,c=c>a?a:c,l=a>l?a:l;r.push(s,c,u,c,u,l,s,l);var h=r.length/2;for(f=0;h>f;f++)i.push(f)}},n.WebGLGraphics.buildPoly=function(t,e){var r=t.points;if(!(r.length<6)){var i=e.points,o=e.indices,a=r.length/2,s=n.hex2rgb(t.fillColor),u=t.fillAlpha,c=s[0]*u,l=s[1]*u,f=s[2]*u,h=n.PolyK.Triangulate(r);if(!h)return!1;var p=i.length/6,d=0;for(d=0;d<h.length;d+=3)o.push(h[d]+p),o.push(h[d]+p),o.push(h[d+1]+p),o.push(h[d+2]+p),o.push(h[d+2]+p);for(d=0;a>d;d++)i.push(r[2*d],r[2*d+1],c,l,f,u);return!0}},n.WebGLGraphics.graphicsDataPool=[],n.WebGLGraphicsData=function(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},n.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[]},n.WebGLGraphicsData.prototype.upload=function(){var t=this.gl;this.glPoints=new n.Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndicies=new n.Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndicies,t.STATIC_DRAW),this.dirty=!1},n.glContexts=[],n.instances=[],n.WebGLRenderer=function(t,e,r){if(r)for(var i in n.defaultRenderOptions)"undefined"==typeof r[i]&&(r[i]=n.defaultRenderOptions[i]);else r=n.defaultRenderOptions;n.defaultRenderer||(n.sayHello("webGL"),n.defaultRenderer=this),this.type=n.WEBGL_RENDERER,this.resolution=r.resolution,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.preserveDrawingBuffer=r.preserveDrawingBuffer,this.clearBeforeRender=r.clearBeforeRender,this.width=t||800,this.height=e||600,this.view=r.view||document.createElement("canvas"),this.contextLostBound=this.handleContextLost.bind(this),this.contextRestoredBound=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLostBound,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredBound,!1),this._contextOptions={alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer},this.projection=new n.Point,this.offset=new n.Point(0,0),this.shaderManager=new n.WebGLShaderManager,this.spriteBatch=new n.WebGLSpriteBatch,this.maskManager=new n.WebGLMaskManager,this.filterManager=new n.WebGLFilterManager,this.stencilManager=new n.WebGLStencilManager,this.blendModeManager=new n.WebGLBlendModeManager,this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,this.renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},n.WebGLRenderer.prototype.constructor=n.WebGLRenderer,n.WebGLRenderer.prototype.initContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=t.id=n.WebGLRenderer.glContextId++,n.glContexts[this.glContextId]=t,n.instances[this.glContextId]=this,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.shaderManager.setContext(t),this.spriteBatch.setContext(t),this.maskManager.setContext(t),this.filterManager.setContext(t),this.blendModeManager.setContext(t),this.stencilManager.setContext(t),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},n.WebGLRenderer.prototype.render=function(t){if(!this.contextLost){this.__stage!==t&&(t.interactive&&t.interactionManager.removeEvents(),this.__stage=t),t.updateTransform();var e=this.gl;t._interactive?t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)):t._interactiveEventsAdded&&(t._interactiveEventsAdded=!1,t.interactionManager.setTarget(this)),e.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,null),this.clearBeforeRender&&(this.transparent?e.clearColor(0,0,0,0):e.clearColor(t.backgroundColorSplit[0],t.backgroundColorSplit[1],t.backgroundColorSplit[2],1),e.clear(e.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.projection)}},n.WebGLRenderer.prototype.renderDisplayObject=function(t,e,r){this.renderSession.blendModeManager.setBlendMode(n.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.flipY=r?-1:1,this.renderSession.projection=e,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,r),t._renderWebGL(this.renderSession),this.spriteBatch.end()},n.WebGLRenderer.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},n.WebGLRenderer.prototype.updateTexture=function(t){if(t.hasLoaded){var e=this.gl;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture()),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t.mipmap&&n.isPowerOfTwo(t.width,t.height)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===n.scaleModes.LINEAR?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),t._dirty[e.id]=!1,t._glTextures[e.id]}},n.WebGLRenderer.prototype.handleContextLost=function(t){t.preventDefault(),this.contextLost=!0},n.WebGLRenderer.prototype.handleContextRestored=function(){this.initContext();for(var t in n.TextureCache){var e=n.TextureCache[t].baseTexture;e._glTextures=[]}this.contextLost=!1},n.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLostBound),this.view.removeEventListener("webglcontextrestored",this.contextRestoredBound),n.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},n.WebGLRenderer.prototype.mapBlendModes=function(){var t=this.gl;n.blendModesWebGL||(n.blendModesWebGL=[],n.blendModesWebGL[n.blendModes.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.ADD]=[t.SRC_ALPHA,t.DST_ALPHA],n.blendModesWebGL[n.blendModes.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SCREEN]=[t.SRC_ALPHA,t.ONE],n.blendModesWebGL[n.blendModes.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA])},n.WebGLRenderer.glContextId=0,n.WebGLBlendModeManager=function(){this.currentBlendMode=99999},n.WebGLBlendModeManager.prototype.constructor=n.WebGLBlendModeManager,n.WebGLBlendModeManager.prototype.setContext=function(t){this.gl=t},n.WebGLBlendModeManager.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=n.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(e[0],e[1]),!0},n.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},n.WebGLMaskManager=function(){},n.WebGLMaskManager.prototype.constructor=n.WebGLMaskManager,n.WebGLMaskManager.prototype.setContext=function(t){this.gl=t},n.WebGLMaskManager.prototype.pushMask=function(t,e){var r=e.gl;t.dirty&&n.WebGLGraphics.updateGraphics(t,r),t._webGL[r.id].data.length&&e.stencilManager.pushStencil(t,t._webGL[r.id].data[0],e)},n.WebGLMaskManager.prototype.popMask=function(t,e){var n=this.gl;e.stencilManager.popStencil(t,t._webGL[n.id].data[0],e)},n.WebGLMaskManager.prototype.destroy=function(){this.gl=null},n.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},n.WebGLStencilManager.prototype.setContext=function(t){this.gl=t},n.WebGLStencilManager.prototype.pushStencil=function(t,e,n){var r=this.gl;this.bindGraphics(t,e,n),0===this.stencilStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(e);var i=this.count;r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),1===e.mode?(r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),this.reverse?(r.stencilFunc(r.EQUAL,255-i,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,i,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),this.reverse?r.stencilFunc(r.EQUAL,255-(i+1),255):r.stencilFunc(r.EQUAL,i+1,255),this.reverse=!this.reverse):(this.reverse?(r.stencilFunc(r.EQUAL,i,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,255-i,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,i+1,255):r.stencilFunc(r.EQUAL,255-(i+1),255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),this.count++},n.WebGLStencilManager.prototype.bindGraphics=function(t,e,r){this._currentGraphics=t;var i,o=this.gl,a=r.projection,s=r.offset;1===e.mode?(i=r.shaderManager.complexPrimitiveShader,r.shaderManager.setShader(i),o.uniform1f(i.flipY,r.flipY),o.uniformMatrix3fv(i.translationMatrix,!1,t.worldTransform.toArray(!0)),o.uniform2f(i.projectionVector,a.x,-a.y),o.uniform2f(i.offsetVector,-s.x,-s.y),o.uniform3fv(i.tintColor,n.hex2rgb(t.tint)),o.uniform3fv(i.color,e.color),o.uniform1f(i.alpha,t.worldAlpha*e.alpha),o.bindBuffer(o.ARRAY_BUFFER,e.buffer),o.vertexAttribPointer(i.aVertexPosition,2,o.FLOAT,!1,8,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e.indexBuffer)):(i=r.shaderManager.primitiveShader,r.shaderManager.setShader(i),o.uniformMatrix3fv(i.translationMatrix,!1,t.worldTransform.toArray(!0)),o.uniform1f(i.flipY,r.flipY),o.uniform2f(i.projectionVector,a.x,-a.y),o.uniform2f(i.offsetVector,-s.x,-s.y),o.uniform3fv(i.tintColor,n.hex2rgb(t.tint)),o.uniform1f(i.alpha,t.worldAlpha),o.bindBuffer(o.ARRAY_BUFFER,e.buffer),o.vertexAttribPointer(i.aVertexPosition,2,o.FLOAT,!1,24,0),o.vertexAttribPointer(i.colorAttribute,4,o.FLOAT,!1,24,8),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e.indexBuffer))},n.WebGLStencilManager.prototype.popStencil=function(t,e,n){var r=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)r.disable(r.STENCIL_TEST);else{var i=this.count;this.bindGraphics(t,e,n),r.colorMask(!1,!1,!1,!1),1===e.mode?(this.reverse=!this.reverse,this.reverse?(r.stencilFunc(r.EQUAL,255-(i+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,i+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,i,255):r.stencilFunc(r.EQUAL,255-i,255)):(this.reverse?(r.stencilFunc(r.EQUAL,i+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,255-(i+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,i,255):r.stencilFunc(r.EQUAL,255-i,255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}},n.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},n.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.stack=[]},n.WebGLShaderManager.prototype.constructor=n.WebGLShaderManager,n.WebGLShaderManager.prototype.setContext=function(t){this.gl=t,this.primitiveShader=new n.PrimitiveShader(t),this.complexPrimitiveShader=new n.ComplexPrimitiveShader(t),this.defaultShader=new n.PixiShader(t),this.fastShader=new n.PixiFastShader(t),this.stripShader=new n.StripShader(t),this.setShader(this.defaultShader)},n.WebGLShaderManager.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(e=0;e<t.length;e++){var n=t[e];this.tempAttribState[n]=!0}var r=this.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?r.enableVertexAttribArray(e):r.disableVertexAttribArray(e))},n.WebGLShaderManager.prototype.setShader=function(t){return this._currentId===t._UID?!1:(this._currentId=t._UID,this.currentShader=t,this.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},n.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},n.WebGLSpriteBatch=function(){this.vertSize=5,this.size=2e3;var t=4*this.size*4*this.vertSize,e=6*this.size;this.vertices=new n.ArrayBuffer(t),this.positions=new n.Float32Array(this.vertices),this.colors=new n.Uint32Array(this.vertices),this.indices=new n.Uint16Array(e),this.lastIndexCount=0;for(var r=0,i=0;e>r;r+=6,i+=4)this.indices[r+0]=i+0,this.indices[r+1]=i+1,this.indices[r+2]=i+2,this.indices[r+3]=i+0,this.indices[r+4]=i+2,this.indices[r+5]=i+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new n.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},n.WebGLSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999;var e=new n.PixiShader(t);e.fragmentSrc=this.defaultShader.fragmentSrc,e.uniforms={},e.init(),this.defaultShader.shaders[t.id]=e},n.WebGLSpriteBatch.prototype.begin=function(t){this.renderSession=t,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},n.WebGLSpriteBatch.prototype.end=function(){this.flush()},n.WebGLSpriteBatch.prototype.render=function(t){var e=t.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture);var n=e._uvs;if(n){var r,i,o,a,s=t.anchor.x,u=t.anchor.y;if(e.trim){var c=e.trim;i=c.x-s*c.width,r=i+e.crop.width,a=c.y-u*c.height,o=a+e.crop.height}else r=e.frame.width*(1-s),i=e.frame.width*-s,o=e.frame.height*(1-u),a=e.frame.height*-u;var l=4*this.currentBatchSize*this.vertSize,f=e.baseTexture.resolution,h=t.worldTransform,p=h.a/f,d=h.b/f,m=h.c/f,v=h.d/f,g=h.tx,y=h.ty,b=this.colors,_=this.positions;this.renderSession.roundPixels?(_[l]=p*i+m*a+g|0,_[l+1]=v*a+d*i+y|0,_[l+5]=p*r+m*a+g|0,_[l+6]=v*a+d*r+y|0,_[l+10]=p*r+m*o+g|0,_[l+11]=v*o+d*r+y|0,_[l+15]=p*i+m*o+g|0,_[l+16]=v*o+d*i+y|0):(_[l]=p*i+m*a+g,_[l+1]=v*a+d*i+y,_[l+5]=p*r+m*a+g,_[l+6]=v*a+d*r+y,_[l+10]=p*r+m*o+g,_[l+11]=v*o+d*r+y,_[l+15]=p*i+m*o+g,_[l+16]=v*o+d*i+y),_[l+2]=n.x0,_[l+3]=n.y0,_[l+7]=n.x1,_[l+8]=n.y1,_[l+12]=n.x2,_[l+13]=n.y2,_[l+17]=n.x3,_[l+18]=n.y3;var w=t.tint;b[l+4]=b[l+9]=b[l+14]=b[l+19]=(w>>16)+(65280&w)+((255&w)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},n.WebGLSpriteBatch.prototype.renderTilingSprite=function(t){var e=t.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture),t._uvs||(t._uvs=new n.TextureUvs);var r=t._uvs;t.tilePosition.x%=e.baseTexture.width*t.tileScaleOffset.x,t.tilePosition.y%=e.baseTexture.height*t.tileScaleOffset.y;var i=t.tilePosition.x/(e.baseTexture.width*t.tileScaleOffset.x),o=t.tilePosition.y/(e.baseTexture.height*t.tileScaleOffset.y),a=t.width/e.baseTexture.width/(t.tileScale.x*t.tileScaleOffset.x),s=t.height/e.baseTexture.height/(t.tileScale.y*t.tileScaleOffset.y);r.x0=0-i,r.y0=0-o,r.x1=1*a-i,r.y1=0-o,r.x2=1*a-i,r.y2=1*s-o,r.x3=0-i,r.y3=1*s-o;var u=t.tint,c=(u>>16)+(65280&u)+((255&u)<<16)+(255*t.alpha<<24),l=this.positions,f=this.colors,h=t.width,p=t.height,d=t.anchor.x,m=t.anchor.y,v=h*(1-d),g=h*-d,y=p*(1-m),b=p*-m,_=4*this.currentBatchSize*this.vertSize,w=e.baseTexture.resolution,x=t.worldTransform,E=x.a/w,T=x.b/w,C=x.c/w,S=x.d/w,A=x.tx,k=x.ty;l[_++]=E*g+C*b+A,l[_++]=S*b+T*g+k,l[_++]=r.x0,l[_++]=r.y0,f[_++]=c,l[_++]=E*v+C*b+A,l[_++]=S*b+T*v+k,l[_++]=r.x1,l[_++]=r.y1,f[_++]=c,l[_++]=E*v+C*y+A,l[_++]=S*y+T*v+k,l[_++]=r.x2,l[_++]=r.y2,f[_++]=c,l[_++]=E*g+C*y+A,l[_++]=S*y+T*g+k,l[_++]=r.x3,l[_++]=r.y3,f[_++]=c,this.sprites[this.currentBatchSize++]=t},n.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e=this.gl;if(this.dirty){this.dirty=!1,e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t=this.defaultShader.shaders[e.id];var r=4*this.vertSize;e.vertexAttribPointer(t.aVertexPosition,2,e.FLOAT,!1,r,0),e.vertexAttribPointer(t.aTextureCoord,2,e.FLOAT,!1,r,8),e.vertexAttribPointer(t.colorAttribute,4,e.UNSIGNED_BYTE,!0,r,16)}if(this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var i=this.positions.subarray(0,4*this.currentBatchSize*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,i)}for(var o,a,s,u,c=0,l=0,f=null,h=this.renderSession.blendModeManager.currentBlendMode,p=null,d=!1,m=!1,v=0,g=this.currentBatchSize;g>v;v++){if(u=this.sprites[v],o=u.texture.baseTexture,a=u.blendMode,s=u.shader||this.defaultShader,d=h!==a,m=p!==s,(f!==o||d||m)&&(this.renderBatch(f,c,l),l=v,c=0,f=o,d&&(h=a,this.renderSession.blendModeManager.setBlendMode(h)),m)){p=s,t=p.shaders[e.id],t||(t=new n.PixiShader(e),t.fragmentSrc=p.fragmentSrc,t.uniforms=p.uniforms,t.init(),p.shaders[e.id]=t),this.renderSession.shaderManager.setShader(t),t.dirty&&t.syncUniforms();var y=this.renderSession.projection;e.uniform2f(t.projectionVector,y.x,y.y);var b=this.renderSession.offset;e.uniform2f(t.offsetVector,b.x,b.y)}c++}this.renderBatch(f,c,l),this.currentBatchSize=0}},n.WebGLSpriteBatch.prototype.renderBatch=function(t,e,n){if(0!==e){var r=this.gl;t._dirty[r.id]?this.renderSession.renderer.updateTexture(t):r.bindTexture(r.TEXTURE_2D,t._glTextures[r.id]),r.drawElements(r.TRIANGLES,6*e,r.UNSIGNED_SHORT,6*n*2),this.renderSession.drawCount++}},n.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},n.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},n.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},n.WebGLFastSpriteBatch=function(t){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var e=4*this.size*this.vertSize,r=6*this.maxSize;this.vertices=new n.Float32Array(e),this.indices=new n.Uint16Array(r),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var i=0,o=0;r>i;i+=6,o+=4)this.indices[i+0]=o+0,this.indices[i+1]=o+1,this.indices[i+2]=o+2,this.indices[i+3]=o+0,this.indices[i+4]=o+2,this.indices[i+5]=o+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(t)},n.WebGLFastSpriteBatch.prototype.constructor=n.WebGLFastSpriteBatch,n.WebGLFastSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW)},n.WebGLFastSpriteBatch.prototype.begin=function(t,e){this.renderSession=e,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=t.worldTransform.toArray(!0),this.start()},n.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},n.WebGLFastSpriteBatch.prototype.render=function(t){var e=t.children,n=e[0];if(n.texture._uvs){this.currentBaseTexture=n.texture.baseTexture,n.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(n.blendMode));for(var r=0,i=e.length;i>r;r++)this.renderSprite(e[r]);this.flush()}},n.WebGLFastSpriteBatch.prototype.renderSprite=function(t){if(t.visible&&(t.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=t.texture.baseTexture,t.texture._uvs))){var e,n,r,i,o,a,s,u,c=this.vertices;if(e=t.texture._uvs,n=t.texture.frame.width,r=t.texture.frame.height,t.texture.trim){var l=t.texture.trim;o=l.x-t.anchor.x*l.width,i=o+t.texture.crop.width,s=l.y-t.anchor.y*l.height,a=s+t.texture.crop.height}else i=t.texture.frame.width*(1-t.anchor.x),o=t.texture.frame.width*-t.anchor.x,a=t.texture.frame.height*(1-t.anchor.y),s=t.texture.frame.height*-t.anchor.y;u=4*this.currentBatchSize*this.vertSize,c[u++]=o,c[u++]=s,c[u++]=t.position.x,c[u++]=t.position.y,c[u++]=t.scale.x,c[u++]=t.scale.y,c[u++]=t.rotation,c[u++]=e.x0,c[u++]=e.y1,c[u++]=t.alpha,c[u++]=i,c[u++]=s,c[u++]=t.position.x,c[u++]=t.position.y,c[u++]=t.scale.x,c[u++]=t.scale.y,c[u++]=t.rotation,c[u++]=e.x1,c[u++]=e.y1,c[u++]=t.alpha,c[u++]=i,c[u++]=a,c[u++]=t.position.x,c[u++]=t.position.y,c[u++]=t.scale.x,c[u++]=t.scale.y,c[u++]=t.rotation,c[u++]=e.x2,c[u++]=e.y2,c[u++]=t.alpha,c[u++]=o,c[u++]=a,c[u++]=t.position.x,c[u++]=t.position.y,c[u++]=t.scale.x,c[u++]=t.scale.y,c[u++]=t.rotation,c[u++]=e.x3,c[u++]=e.y3,c[u++]=t.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},n.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t=this.gl;if(this.currentBaseTexture._glTextures[t.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,t),t.bindTexture(t.TEXTURE_2D,this.currentBaseTexture._glTextures[t.id]),this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,e)}t.drawElements(t.TRIANGLES,6*this.currentBatchSize,t.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},n.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},n.WebGLFastSpriteBatch.prototype.start=function(){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;t.uniform2f(this.shader.projectionVector,e.x,e.y),t.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var n=4*this.vertSize;t.vertexAttribPointer(this.shader.aVertexPosition,2,t.FLOAT,!1,n,0),t.vertexAttribPointer(this.shader.aPositionCoord,2,t.FLOAT,!1,n,8),t.vertexAttribPointer(this.shader.aScale,2,t.FLOAT,!1,n,16),t.vertexAttribPointer(this.shader.aRotation,1,t.FLOAT,!1,n,24),t.vertexAttribPointer(this.shader.aTextureCoord,2,t.FLOAT,!1,n,28),t.vertexAttribPointer(this.shader.colorAttribute,1,t.FLOAT,!1,n,36)},n.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},n.WebGLFilterManager.prototype.constructor=n.WebGLFilterManager,n.WebGLFilterManager.prototype.setContext=function(t){this.gl=t,this.texturePool=[],this.initShaderBuffers()},n.WebGLFilterManager.prototype.begin=function(t,e){this.renderSession=t,this.defaultShader=t.shaderManager.defaultShader;var n=this.renderSession.projection;this.width=2*n.x,this.height=2*-n.y,this.buffer=e},n.WebGLFilterManager.prototype.pushFilter=function(t){var e=this.gl,r=this.renderSession.projection,i=this.renderSession.offset;t._filterArea=t.target.filterArea||t.target.getBounds(),this.filterStack.push(t);var o=t.filterPasses[0];this.offsetX+=t._filterArea.x,this.offsetY+=t._filterArea.y;var a=this.texturePool.pop();a?a.resize(this.width,this.height):a=new n.FilterTexture(this.gl,this.width,this.height),e.bindTexture(e.TEXTURE_2D,a.texture);var s=t._filterArea,u=o.padding;s.x-=u,s.y-=u,s.width+=2*u,s.height+=2*u,s.x<0&&(s.x=0),s.width>this.width&&(s.width=this.width),s.y<0&&(s.y=0),s.height>this.height&&(s.height=this.height),e.bindFramebuffer(e.FRAMEBUFFER,a.frameBuffer),e.viewport(0,0,s.width,s.height),r.x=s.width/2,r.y=-s.height/2,i.x=-s.x,i.y=-s.y,e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t._glFilterTexture=a},n.WebGLFilterManager.prototype.popFilter=function(){var t=this.gl,e=this.filterStack.pop(),r=e._filterArea,i=e._glFilterTexture,o=this.renderSession.projection,a=this.renderSession.offset;if(e.filterPasses.length>1){t.viewport(0,0,r.width,r.height),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=r.height,this.vertexArray[2]=r.width,this.vertexArray[3]=r.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=r.width,this.vertexArray[7]=0,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray);var s=i,u=this.texturePool.pop();u||(u=new n.FilterTexture(this.gl,this.width,this.height)),u.resize(this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,u.frameBuffer),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.BLEND);for(var c=0;c<e.filterPasses.length-1;c++){var l=e.filterPasses[c];t.bindFramebuffer(t.FRAMEBUFFER,u.frameBuffer),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,s.texture),this.applyFilterPass(l,r,r.width,r.height);var f=s;s=u,u=f}t.enable(t.BLEND),i=s,this.texturePool.push(u)}var h=e.filterPasses[e.filterPasses.length-1];this.offsetX-=r.x,this.offsetY-=r.y;var p=this.width,d=this.height,m=0,v=0,g=this.buffer;if(0===this.filterStack.length)t.colorMask(!0,!0,!0,!0);else{var y=this.filterStack[this.filterStack.length-1];r=y._filterArea,p=r.width,d=r.height,m=r.x,v=r.y,g=y._glFilterTexture.frameBuffer}o.x=p/2,o.y=-d/2,a.x=m,a.y=v,r=e._filterArea;var b=r.x-m,_=r.y-v;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=b,this.vertexArray[1]=_+r.height,this.vertexArray[2]=b+r.width,this.vertexArray[3]=_+r.height,this.vertexArray[4]=b,this.vertexArray[5]=_,this.vertexArray[6]=b+r.width,this.vertexArray[7]=_,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray),t.viewport(0,0,p*this.renderSession.resolution,d*this.renderSession.resolution),t.bindFramebuffer(t.FRAMEBUFFER,g),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i.texture),this.applyFilterPass(h,r,p,d),this.texturePool.push(i),e._glFilterTexture=null},n.WebGLFilterManager.prototype.applyFilterPass=function(t,e,r,i){var o=this.gl,a=t.shaders[o.id];
a||(a=new n.PixiShader(o),a.fragmentSrc=t.fragmentSrc,a.uniforms=t.uniforms,a.init(),t.shaders[o.id]=a),this.renderSession.shaderManager.setShader(a),o.uniform2f(a.projectionVector,r/2,-i/2),o.uniform2f(a.offsetVector,0,0),t.uniforms.dimensions&&(t.uniforms.dimensions.value[0]=this.width,t.uniforms.dimensions.value[1]=this.height,t.uniforms.dimensions.value[2]=this.vertexArray[0],t.uniforms.dimensions.value[3]=this.vertexArray[5]),a.syncUniforms(),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.vertexAttribPointer(a.aVertexPosition,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.uvBuffer),o.vertexAttribPointer(a.aTextureCoord,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.colorBuffer),o.vertexAttribPointer(a.colorAttribute,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),this.renderSession.drawCount++},n.WebGLFilterManager.prototype.initShaderBuffers=function(){var t=this.gl;this.vertexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.vertexArray=new n.Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.STATIC_DRAW),this.uvArray=new n.Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvArray,t.STATIC_DRAW),this.colorArray=new n.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colorArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),t.STATIC_DRAW)},n.WebGLFilterManager.prototype.destroy=function(){var t=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var e=0;e<this.texturePool.length;e++)this.texturePool[e].destroy();this.texturePool=null,t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.uvBuffer),t.deleteBuffer(this.colorBuffer),t.deleteBuffer(this.indexBuffer)},n.FilterTexture=function(t,e,r,i){this.gl=t,this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),i=i||n.scaleModes.DEFAULT,t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i===n.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i===n.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0),this.renderBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.renderBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.renderBuffer),this.resize(e,r)},n.FilterTexture.prototype.constructor=n.FilterTexture,n.FilterTexture.prototype.clear=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},n.FilterTexture.prototype.resize=function(t,e){if(this.width!==t||this.height!==e){this.width=t,this.height=e;var n=this.gl;n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t,e,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindRenderbuffer(n.RENDERBUFFER,this.renderBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t,e)}},n.FilterTexture.prototype.destroy=function(){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},n.CanvasBuffer=function(t,e){this.width=t,this.height=e,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e},n.CanvasBuffer.prototype.constructor=n.CanvasBuffer,n.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},n.CanvasBuffer.prototype.resize=function(t,e){this.width=this.canvas.width=t,this.height=this.canvas.height=e},n.CanvasMaskManager=function(){},n.CanvasMaskManager.prototype.constructor=n.CanvasMaskManager,n.CanvasMaskManager.prototype.pushMask=function(t,e){var r=e.context;r.save();var i=t.alpha,o=t.worldTransform,a=e.resolution;r.setTransform(o.a*a,o.b*a,o.c*a,o.d*a,o.tx*a,o.ty*a),n.CanvasGraphics.renderGraphicsMask(t,r),r.clip(),t.worldAlpha=i},n.CanvasMaskManager.prototype.popMask=function(t){t.context.restore()},n.CanvasTinter=function(){},n.CanvasTinter.getTintedTexture=function(t,e){var r=t.texture;e=n.CanvasTinter.roundColor(e);var i="#"+("00000"+(0|e).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[i])return r.tintCache[i];var o=n.CanvasTinter.canvas||document.createElement("canvas");if(n.CanvasTinter.tintMethod(r,e,o),n.CanvasTinter.convertTintToImage){var a=new Image;a.src=o.toDataURL(),r.tintCache[i]=a}else r.tintCache[i]=o,n.CanvasTinter.canvas=null;return o},n.CanvasTinter.tintWithMultiply=function(t,e,n){var r=n.getContext("2d"),i=t.crop;n.width=i.width,n.height=i.height,r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},n.CanvasTinter.tintWithOverlay=function(t,e,n){var r=n.getContext("2d"),i=t.crop;n.width=i.width,n.height=i.height,r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},n.CanvasTinter.tintWithPerPixel=function(t,e,r){var i=r.getContext("2d"),o=t.crop;r.width=o.width,r.height=o.height,i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var a=n.hex2rgb(e),s=a[0],u=a[1],c=a[2],l=i.getImageData(0,0,o.width,o.height),f=l.data,h=0;h<f.length;h+=4)f[h+0]*=s,f[h+1]*=u,f[h+2]*=c;i.putImageData(l,0,0)},n.CanvasTinter.roundColor=function(t){var e=n.CanvasTinter.cacheStepsPerColorChannel,r=n.hex2rgb(t);return r[0]=Math.min(255,r[0]/e*e),r[1]=Math.min(255,r[1]/e*e),r[2]=Math.min(255,r[2]/e*e),n.rgb2hex(r)},n.CanvasTinter.cacheStepsPerColorChannel=8,n.CanvasTinter.convertTintToImage=!1,n.CanvasTinter.canUseMultiply=n.canUseNewCanvasBlendModes(),n.CanvasTinter.tintMethod=n.CanvasTinter.canUseMultiply?n.CanvasTinter.tintWithMultiply:n.CanvasTinter.tintWithPerPixel,n.CanvasRenderer=function(t,e,r){if(r)for(var i in n.defaultRenderOptions)"undefined"==typeof r[i]&&(r[i]=n.defaultRenderOptions[i]);else r=n.defaultRenderOptions;n.defaultRenderer||(n.sayHello("Canvas"),n.defaultRenderer=this),this.type=n.CANVAS_RENDERER,this.resolution=r.resolution,this.clearBeforeRender=r.clearBeforeRender,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.width=t||800,this.height=e||600,this.width*=this.resolution,this.height*=this.resolution,this.view=r.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width*this.resolution,this.view.height=this.height*this.resolution,this.count=0,this.maskManager=new n.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},this.mapBlendModes(),this.resize(t,e),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},n.CanvasRenderer.prototype.constructor=n.CanvasRenderer,n.CanvasRenderer.prototype.render=function(t){t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=n.blendModes.NORMAL,this.context.globalCompositeOperation=n.blendModesCanvas[n.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=t.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)))},n.CanvasRenderer.prototype.destroy=function(t){"undefined"==typeof t&&(t=!0),t&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},n.CanvasRenderer.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},n.CanvasRenderer.prototype.renderDisplayObject=function(t,e){this.renderSession.context=e||this.context,this.renderSession.resolution=this.resolution,t._renderCanvas(this.renderSession)},n.CanvasRenderer.prototype.mapBlendModes=function(){n.blendModesCanvas||(n.blendModesCanvas=[],n.canUseNewCanvasBlendModes()?(n.blendModesCanvas[n.blendModes.NORMAL]="source-over",n.blendModesCanvas[n.blendModes.ADD]="lighter",n.blendModesCanvas[n.blendModes.MULTIPLY]="multiply",n.blendModesCanvas[n.blendModes.SCREEN]="screen",n.blendModesCanvas[n.blendModes.OVERLAY]="overlay",n.blendModesCanvas[n.blendModes.DARKEN]="darken",n.blendModesCanvas[n.blendModes.LIGHTEN]="lighten",n.blendModesCanvas[n.blendModes.COLOR_DODGE]="color-dodge",n.blendModesCanvas[n.blendModes.COLOR_BURN]="color-burn",n.blendModesCanvas[n.blendModes.HARD_LIGHT]="hard-light",n.blendModesCanvas[n.blendModes.SOFT_LIGHT]="soft-light",n.blendModesCanvas[n.blendModes.DIFFERENCE]="difference",n.blendModesCanvas[n.blendModes.EXCLUSION]="exclusion",n.blendModesCanvas[n.blendModes.HUE]="hue",n.blendModesCanvas[n.blendModes.SATURATION]="saturation",n.blendModesCanvas[n.blendModes.COLOR]="color",n.blendModesCanvas[n.blendModes.LUMINOSITY]="luminosity"):(n.blendModesCanvas[n.blendModes.NORMAL]="source-over",n.blendModesCanvas[n.blendModes.ADD]="lighter",n.blendModesCanvas[n.blendModes.MULTIPLY]="source-over",n.blendModesCanvas[n.blendModes.SCREEN]="source-over",n.blendModesCanvas[n.blendModes.OVERLAY]="source-over",n.blendModesCanvas[n.blendModes.DARKEN]="source-over",n.blendModesCanvas[n.blendModes.LIGHTEN]="source-over",n.blendModesCanvas[n.blendModes.COLOR_DODGE]="source-over",n.blendModesCanvas[n.blendModes.COLOR_BURN]="source-over",n.blendModesCanvas[n.blendModes.HARD_LIGHT]="source-over",n.blendModesCanvas[n.blendModes.SOFT_LIGHT]="source-over",n.blendModesCanvas[n.blendModes.DIFFERENCE]="source-over",n.blendModesCanvas[n.blendModes.EXCLUSION]="source-over",n.blendModesCanvas[n.blendModes.HUE]="source-over",n.blendModesCanvas[n.blendModes.SATURATION]="source-over",n.blendModesCanvas[n.blendModes.COLOR]="source-over",n.blendModesCanvas[n.blendModes.LUMINOSITY]="source-over"))},n.CanvasGraphics=function(){},n.CanvasGraphics.renderGraphics=function(t,e){var r=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var i=0;i<t.graphicsData.length;i++){var o=t.graphicsData[i],a=o.shape,s=o._fillTint,u=o._lineTint;if(e.lineWidth=o.lineWidth,o.type===n.Graphics.POLY){e.beginPath();var c=a.points;e.moveTo(c[0],c[1]);for(var l=1;l<c.length/2;l++)e.lineTo(c[2*l],c[2*l+1]);a.closed&&e.lineTo(c[0],c[1]),c[0]===c[c.length-2]&&c[1]===c[c.length-1]&&e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke())}else if(o.type===n.Graphics.RECT)(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),e.fillRect(a.x,a.y,a.width,a.height)),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.strokeRect(a.x,a.y,a.width,a.height));else if(o.type===n.Graphics.CIRC)e.beginPath(),e.arc(a.x,a.y,a.radius,0,2*Math.PI),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke());else if(o.type===n.Graphics.ELIP){var f=2*a.width,h=2*a.height,p=a.x-f/2,d=a.y-h/2;e.beginPath();var m=.5522848,v=f/2*m,g=h/2*m,y=p+f,b=d+h,_=p+f/2,w=d+h/2;e.moveTo(p,w),e.bezierCurveTo(p,w-g,_-v,d,_,d),e.bezierCurveTo(_+v,d,y,w-g,y,w),e.bezierCurveTo(y,w+g,_+v,b,_,b),e.bezierCurveTo(_-v,b,p,w+g,p,w),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke())}else if(o.type===n.Graphics.RREC){var x=a.x,E=a.y,T=a.width,C=a.height,S=a.radius,A=Math.min(T,C)/2|0;S=S>A?A:S,e.beginPath(),e.moveTo(x,E+S),e.lineTo(x,E+C-S),e.quadraticCurveTo(x,E+C,x+S,E+C),e.lineTo(x+T-S,E+C),e.quadraticCurveTo(x+T,E+C,x+T,E+C-S),e.lineTo(x+T,E+S),e.quadraticCurveTo(x+T,E,x+T-S,E),e.lineTo(x+S,E),e.quadraticCurveTo(x,E,x,E+S),e.closePath(),(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke())}}},n.CanvasGraphics.renderGraphicsMask=function(t,e){var r=t.graphicsData.length;if(0!==r){r>1&&(r=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var i=0;1>i;i++){var o=t.graphicsData[i],a=o.shape;if(o.type===n.Graphics.POLY){e.beginPath();var s=a.points;e.moveTo(s[0],s[1]);for(var u=1;u<s.length/2;u++)e.lineTo(s[2*u],s[2*u+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath()}else if(o.type===n.Graphics.RECT)e.beginPath(),e.rect(a.x,a.y,a.width,a.height),e.closePath();else if(o.type===n.Graphics.CIRC)e.beginPath(),e.arc(a.x,a.y,a.radius,0,2*Math.PI),e.closePath();else if(o.type===n.Graphics.ELIP){var c=2*a.width,l=2*a.height,f=a.x-c/2,h=a.y-l/2;e.beginPath();var p=.5522848,d=c/2*p,m=l/2*p,v=f+c,g=h+l,y=f+c/2,b=h+l/2;e.moveTo(f,b),e.bezierCurveTo(f,b-m,y-d,h,y,h),e.bezierCurveTo(y+d,h,v,b-m,v,b),e.bezierCurveTo(v,b+m,y+d,g,y,g),e.bezierCurveTo(y-d,g,f,b+m,f,b),e.closePath()}else if(o.type===n.Graphics.RREC){var _=a.points,w=_[0],x=_[1],E=_[2],T=_[3],C=_[4],S=Math.min(E,T)/2|0;C=C>S?S:C,e.beginPath(),e.moveTo(w,x+C),e.lineTo(w,x+T-C),e.quadraticCurveTo(w,x+T,w+C,x+T),e.lineTo(w+E-C,x+T),e.quadraticCurveTo(w+E,x+T,w+E,x+T-C),e.lineTo(w+E,x+C),e.quadraticCurveTo(w+E,x,w+E-C,x),e.lineTo(w+C,x),e.quadraticCurveTo(w,x,w,x+C),e.closePath()}}}},n.CanvasGraphics.updateGraphicsTint=function(t){if(16777215!==t.tint)for(var e=(t.tint>>16&255)/255,n=(t.tint>>8&255)/255,r=(255&t.tint)/255,i=0;i<t.graphicsData.length;i++){var o=t.graphicsData[i],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*n*255<<8)+(255&a)/255*r*255,o._lineTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*n*255<<8)+(255&s)/255*r*255}},n.Graphics=function(){n.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=n.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new n.Rectangle(0,0,1,1),this.dirty=!0,this.webGLDirty=!1,this.cachedSpriteDirty=!1},n.Graphics.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Graphics.prototype.constructor=n.Graphics,Object.defineProperty(n.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),n.Graphics.prototype.lineStyle=function(t,e,r){if(this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=void 0===r?1:r,this.currentPath){if(this.currentPath.shape.points.length)return this.drawShape(new n.Polygon(this.currentPath.shape.points.slice(-2))),this;this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha}return this},n.Graphics.prototype.moveTo=function(t,e){return this.drawShape(new n.Polygon([t,e])),this},n.Graphics.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},n.Graphics.prototype.quadraticCurveTo=function(t,e,n,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i,o,a=20,s=this.currentPath.shape.points;0===s.length&&this.moveTo(0,0);for(var u=s[s.length-2],c=s[s.length-1],l=0,f=1;a>=f;f++)l=f/a,i=u+(t-u)*l,o=c+(e-c)*l,s.push(i+(t+(n-t)*l-i)*l,o+(e+(r-e)*l-o)*l);return this.dirty=!0,this},n.Graphics.prototype.bezierCurveTo=function(t,e,n,r,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var a,s,u,c,l,f=20,h=this.currentPath.shape.points,p=h[h.length-2],d=h[h.length-1],m=0,v=1;f>=v;v++)m=v/f,a=1-m,s=a*a,u=s*a,c=m*m,l=c*m,h.push(u*p+3*s*m*t+3*a*c*n+l*i,u*d+3*s*m*e+3*a*c*r+l*o);return this.dirty=!0,this},n.Graphics.prototype.arcTo=function(t,e,n,r,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1],u=s-e,c=a-t,l=r-e,f=n-t,h=Math.abs(u*f-c*l);if(1e-8>h||0===i)(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e);else{var p=u*u+c*c,d=l*l+f*f,m=u*l+c*f,v=i*Math.sqrt(p)/h,g=i*Math.sqrt(d)/h,y=v*m/p,b=g*m/d,_=v*f+g*c,w=v*l+g*u,x=c*(g+y),E=u*(g+y),T=f*(v+b),C=l*(v+b),S=Math.atan2(E-w,x-_),A=Math.atan2(C-w,T-_);this.arc(_+t,w+e,i,S,A,c*l>f*u)}return this.dirty=!0,this},n.Graphics.prototype.arc=function(t,e,n,r,i,o){if(o=o||!1,r===i)return this;!o&&r>=i?i+=2*Math.PI:o&&i>=r&&(r+=2*Math.PI);var a=o?-1*(r-i):i-r,s=Math.abs(a)/(2*Math.PI)*40;if(0===a)return this;var u=t+Math.cos(r)*n,c=e+Math.sin(r)*n;o&&this.filling?this.moveTo(t,e):this.moveTo(u,c);for(var l=this.currentPath.shape.points,f=a/(2*s),h=2*f,p=Math.cos(f),d=Math.sin(f),m=s-1,v=m%1/m,g=0;m>=g;g++){var y=g+v*g,b=f+r+h*y,_=Math.cos(b),w=-Math.sin(b);l.push((p*_+d*w)*n+t,(p*-w+d*_)*n+e)}return this.dirty=!0,this},n.Graphics.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},n.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},n.Graphics.prototype.drawRect=function(t,e,r,i){return this.drawShape(new n.Rectangle(t,e,r,i)),this},n.Graphics.prototype.drawRoundedRect=function(t,e,r,i,o){return this.drawShape(new n.RoundedRectangle(t,e,r,i,o)),this},n.Graphics.prototype.drawCircle=function(t,e,r){return this.drawShape(new n.Circle(t,e,r)),this},n.Graphics.prototype.drawEllipse=function(t,e,r,i){return this.drawShape(new n.Ellipse(t,e,r,i)),this},n.Graphics.prototype.drawPolygon=function(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments)),this.drawShape(new n.Polygon(t)),this},n.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},n.Graphics.prototype.generateTexture=function(t,e){t=t||1;var r=this.getBounds(),i=new n.CanvasBuffer(r.width*t,r.height*t),o=n.Texture.fromCanvas(i.canvas,e);return o.baseTexture.resolution=t,i.context.scale(t,t),i.context.translate(-r.x,-r.y),n.CanvasGraphics.renderGraphics(this,i.context),o},n.Graphics.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void n.Sprite.prototype._renderWebGL.call(this._cachedSprite,t);if(t.spriteBatch.stop(),t.blendModeManager.setBlendMode(this.blendMode),this._mask&&t.maskManager.pushMask(this._mask,t),this._filters&&t.filterManager.pushFilter(this._filterBlock),this.blendMode!==t.spriteBatch.currentBlendMode){t.spriteBatch.currentBlendMode=this.blendMode;var e=n.blendModesWebGL[t.spriteBatch.currentBlendMode];t.spriteBatch.gl.blendFunc(e[0],e[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),n.WebGLGraphics.renderGraphics(this,t),this.children.length){t.spriteBatch.start();for(var r=0,i=this.children.length;i>r;r++)this.children[r]._renderWebGL(t);t.spriteBatch.stop()}this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this.mask,t),t.drawCount++,t.spriteBatch.start()}},n.Graphics.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void n.Sprite.prototype._renderCanvas.call(this._cachedSprite,t);var e=t.context,r=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=n.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t);var i=t.resolution;e.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),n.CanvasGraphics.renderGraphics(this,e);for(var o=0,a=this.children.length;a>o;o++)this.children[o]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},n.Graphics.prototype.getBounds=function(t){if(this.isMask)return n.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var e=this._localBounds,r=e.x,i=e.width+e.x,o=e.y,a=e.height+e.y,s=t||this.worldTransform,u=s.a,c=s.b,l=s.c,f=s.d,h=s.tx,p=s.ty,d=u*i+l*a+h,m=f*a+c*i+p,v=u*r+l*a+h,g=f*a+c*r+p,y=u*r+l*o+h,b=f*o+c*r+p,_=u*i+l*o+h,w=f*o+c*i+p,x=d,E=m,T=d,C=m;return T=T>v?v:T,T=T>y?y:T,T=T>_?_:T,C=C>g?g:C,C=C>b?b:C,C=C>w?w:C,x=v>x?v:x,x=y>x?y:x,x=_>x?_:x,E=g>E?g:E,E=b>E?b:E,E=w>E?w:E,this._bounds.x=T,this._bounds.width=x-T,this._bounds.y=C,this._bounds.height=E-C,this._bounds},n.Graphics.prototype.updateLocalBounds=function(){var t=1/0,e=-(1/0),r=1/0,i=-(1/0);if(this.graphicsData.length)for(var o,a,s,u,c,l,f=0;f<this.graphicsData.length;f++){var h=this.graphicsData[f],p=h.type,d=h.lineWidth;if(o=h.shape,p===n.Graphics.RECT||p===n.Graphics.RREC)s=o.x-d/2,u=o.y-d/2,c=o.width+d,l=o.height+d,t=t>s?s:t,e=s+c>e?s+c:e,r=r>u?u:r,i=u+l>i?u+l:i;else if(p===n.Graphics.CIRC)s=o.x,u=o.y,c=o.radius+d/2,l=o.radius+d/2,t=t>s-c?s-c:t,e=s+c>e?s+c:e,r=r>u-l?u-l:r,i=u+l>i?u+l:i;else if(p===n.Graphics.ELIP)s=o.x,u=o.y,c=o.width+d/2,l=o.height+d/2,t=t>s-c?s-c:t,e=s+c>e?s+c:e,r=r>u-l?u-l:r,i=u+l>i?u+l:i;else{a=o.points;for(var m=0;m<a.length;m+=2)s=a[m],u=a[m+1],t=t>s-d?s-d:t,e=s+d>e?s+d:e,r=r>u-d?u-d:r,i=u+d>i?u+d:i}}else t=0,e=0,r=0,i=0;var v=this.boundsPadding;this._localBounds.x=t-v,this._localBounds.width=e-t+2*v,this._localBounds.y=r-v,this._localBounds.height=i-r+2*v},n.Graphics.prototype._generateCachedSprite=function(){var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(t.width,t.height);else{var e=new n.CanvasBuffer(t.width,t.height),r=n.Texture.fromCanvas(e.canvas);this._cachedSprite=new n.Sprite(r),this._cachedSprite.buffer=e,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._cachedSprite.buffer.context.translate(-t.x,-t.y),this.worldAlpha=1,n.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},n.Graphics.prototype.updateCachedSpriteTexture=function(){var t=this._cachedSprite,e=t.texture,n=t.buffer.canvas;e.baseTexture.width=n.width,e.baseTexture.height=n.height,e.crop.width=e.frame.width=n.width,e.crop.height=e.frame.height=n.height,t._width=n.width,t._height=n.height,e.baseTexture.dirty()},n.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},n.Graphics.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new n.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===n.Graphics.POLY&&(e.shape.closed=this.filling,this.currentPath=e),this.dirty=!0,e},n.GraphicsData=function(t,e,n,r,i,o,a){this.lineWidth=t,this.lineColor=e,this.lineAlpha=n,this._lineTint=e,this.fillColor=r,this.fillAlpha=i,this._fillTint=r,this.fill=o,this.shape=a,this.type=a.type},n.Graphics.POLY=0,n.Graphics.RECT=1,n.Graphics.CIRC=2,n.Graphics.ELIP=3,n.Graphics.RREC=4,n.Polygon.prototype.type=n.Graphics.POLY,n.Rectangle.prototype.type=n.Graphics.RECT,n.Circle.prototype.type=n.Graphics.CIRC,n.Ellipse.prototype.type=n.Graphics.ELIP,n.RoundedRectangle.prototype.type=n.Graphics.RREC,n.Strip=function(t){n.DisplayObjectContainer.call(this),this.texture=t,this.uvs=new n.Float32Array([0,1,1,1,1,0,0,1]),this.vertices=new n.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new n.Float32Array([1,1,1,1]),this.indices=new n.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=n.blendModes.NORMAL,this.canvasPadding=0,this.drawMode=n.Strip.DrawModes.TRIANGLE_STRIP},n.Strip.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Strip.prototype.constructor=n.Strip,n.Strip.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||(t.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(t),t.shaderManager.setShader(t.shaderManager.stripShader),this._renderStrip(t),t.spriteBatch.start())},n.Strip.prototype._initWebGL=function(t){var e=t.gl;this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),this._uvBuffer=e.createBuffer(),this._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colors,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)},n.Strip.prototype._renderStrip=function(t){var e=t.gl,r=t.projection,i=t.offset,o=t.shaderManager.stripShader,a=this.drawMode===n.Strip.DrawModes.TRIANGLE_STRIP?e.TRIANGLE_STRIP:e.TRIANGLES;t.blendModeManager.setBlendMode(this.blendMode),e.uniformMatrix3fv(o.translationMatrix,!1,this.worldTransform.toArray(!0)),e.uniform2f(o.projectionVector,r.x,-r.y),e.uniform2f(o.offsetVector,-i.x,-i.y),e.uniform1f(o.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.STATIC_DRAW),e.vertexAttribPointer(o.aVertexPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.vertexAttribPointer(o.aTextureCoord,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),this.texture.baseTexture._dirty[e.id]?t.renderer.updateTexture(this.texture.baseTexture):e.bindTexture(e.TEXTURE_2D,this.texture.baseTexture._glTextures[e.id]),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)):(e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices),e.vertexAttribPointer(o.aVertexPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.vertexAttribPointer(o.aTextureCoord,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),this.texture.baseTexture._dirty[e.id]?t.renderer.updateTexture(this.texture.baseTexture):e.bindTexture(e.TEXTURE_2D,this.texture.baseTexture._glTextures[e.id]),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),e.drawElements(a,this.indices.length,e.UNSIGNED_SHORT,0)},n.Strip.prototype._renderCanvas=function(t){var e=t.context,r=this.worldTransform;t.roundPixels?e.setTransform(r.a,r.b,r.c,r.d,0|r.tx,0|r.ty):e.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.drawMode===n.Strip.DrawModes.TRIANGLE_STRIP?this._renderCanvasTriangleStrip(e):this._renderCanvasTriangles(e)},n.Strip.prototype._renderCanvasTriangleStrip=function(t){var e=this.vertices,n=this.uvs,r=e.length/2;this.count++;for(var i=0;r-2>i;i++){var o=2*i;this._renderCanvasDrawTriangle(t,e,n,o,o+2,o+4)}},n.Strip.prototype._renderCanvasTriangles=function(t){var e=this.vertices,n=this.uvs,r=this.indices,i=r.length;this.count++;for(var o=0;i>o;o+=3){var a=2*r[o],s=2*r[o+1],u=2*r[o+2];this._renderCanvasDrawTriangle(t,e,n,a,s,u)}},n.Strip.prototype._renderCanvasDrawTriangle=function(t,e,n,r,i,o){var a=this.texture.baseTexture.source,s=this.texture.width,u=this.texture.height,c=e[r],l=e[i],f=e[o],h=e[r+1],p=e[i+1],d=e[o+1],m=n[r]*s,v=n[i]*s,g=n[o]*s,y=n[r+1]*u,b=n[i+1]*u,_=n[o+1]*u;if(this.canvasPadding>0){var w=this.canvasPadding/this.worldTransform.a,x=this.canvasPadding/this.worldTransform.d,E=(c+l+f)/3,T=(h+p+d)/3,C=c-E,S=h-T,A=Math.sqrt(C*C+S*S);c=E+C/A*(A+w),h=T+S/A*(A+x),C=l-E,S=p-T,A=Math.sqrt(C*C+S*S),l=E+C/A*(A+w),p=T+S/A*(A+x),C=f-E,S=d-T,A=Math.sqrt(C*C+S*S),f=E+C/A*(A+w),d=T+S/A*(A+x)}t.save(),t.beginPath(),t.moveTo(c,h),t.lineTo(l,p),t.lineTo(f,d),t.closePath(),t.clip();var k=m*b+y*g+v*_-b*g-y*v-m*_,O=c*b+y*f+l*_-b*f-y*l-c*_,j=m*l+c*g+v*f-l*g-c*v-m*f,M=m*b*f+y*l*g+c*v*_-c*b*g-y*v*f-m*l*_,R=h*b+y*d+p*_-b*d-y*p-h*_,N=m*p+h*g+v*d-p*g-h*v-m*d,P=m*b*d+y*p*g+h*v*_-h*b*g-y*v*d-m*p*_;t.transform(O/k,R/k,j/k,N/k,M/k,P/k),t.drawImage(a,0,0),t.restore()},n.Strip.prototype.renderStripFlat=function(t){var e=this.context,n=t.vertices,r=n.length/2;this.count++,e.beginPath();for(var i=1;r-2>i;i++){var o=2*i,a=n[o],s=n[o+2],u=n[o+4],c=n[o+1],l=n[o+3],f=n[o+5];e.moveTo(a,c),e.lineTo(s,l),e.lineTo(u,f)}e.fillStyle="#FF0000",e.fill(),e.closePath()},n.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},n.Strip.prototype.getBounds=function(t){for(var e=t||this.worldTransform,r=e.a,i=e.b,o=e.c,a=e.d,s=e.tx,u=e.ty,c=-(1/0),l=-(1/0),f=1/0,h=1/0,p=this.vertices,d=0,m=p.length;m>d;d+=2){var v=p[d],g=p[d+1],y=r*v+o*g+s,b=a*g+i*v+u;f=f>y?y:f,h=h>b?b:h,c=y>c?y:c,l=b>l?b:l}if(f===-(1/0)||l===1/0)return n.EmptyRectangle;var _=this._bounds;return _.x=f,_.width=c-f,_.y=h,_.height=l-h,this._currentBounds=_,_},n.Strip.DrawModes={TRIANGLE_STRIP:0,TRIANGLES:1},n.Rope=function(t,e){n.Strip.call(this,t),this.points=e,this.vertices=new n.Float32Array(4*e.length),this.uvs=new n.Float32Array(4*e.length),this.colors=new n.Float32Array(2*e.length),this.indices=new n.Uint16Array(2*e.length),this.refresh()},n.Rope.prototype=Object.create(n.Strip.prototype),n.Rope.prototype.constructor=n.Rope,n.Rope.prototype.refresh=function(){var t=this.points;if(!(t.length<1)){var e=this.uvs,n=t[0],r=this.indices,i=this.colors;this.count-=.2,e[0]=0,e[1]=0,e[2]=0,e[3]=1,i[0]=1,i[1]=1,r[0]=0,r[1]=1;for(var o,a,s,u=t.length,c=1;u>c;c++)o=t[c],a=4*c,s=c/(u-1),c%2?(e[a]=s,e[a+1]=0,e[a+2]=s,e[a+3]=1):(e[a]=s,e[a+1]=0,e[a+2]=s,e[a+3]=1),a=2*c,i[a]=1,i[a+1]=1,a=2*c,r[a]=a,r[a+1]=a+1,
n=o}},n.Rope.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){var e,r=t[0],i={x:0,y:0};this.count-=.2;for(var o,a,s,u,c,l=this.vertices,f=t.length,h=0;f>h;h++)o=t[h],a=4*h,e=h<t.length-1?t[h+1]:o,i.y=-(e.x-r.x),i.x=e.y-r.y,s=10*(1-h/(f-1)),s>1&&(s=1),u=Math.sqrt(i.x*i.x+i.y*i.y),c=this.texture.height/2,i.x/=u,i.y/=u,i.x*=c,i.y*=c,l[a]=o.x+i.x,l[a+1]=o.y+i.y,l[a+2]=o.x-i.x,l[a+3]=o.y-i.y,r=o;n.DisplayObjectContainer.prototype.updateTransform.call(this)}},n.Rope.prototype.setTexture=function(t){this.texture=t},n.TilingSprite=function(t,e,r){n.Sprite.call(this,t),this._width=e||100,this._height=r||100,this.tileScale=new n.Point(1,1),this.tileScaleOffset=new n.Point(1,1),this.tilePosition=new n.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=n.blendModes.NORMAL},n.TilingSprite.prototype=Object.create(n.Sprite.prototype),n.TilingSprite.prototype.constructor=n.TilingSprite,Object.defineProperty(n.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(n.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),n.TilingSprite.prototype.setTexture=function(t){this.texture!==t&&(this.texture=t,this.refreshTexture=!0,this.cachedTint=16777215)},n.TilingSprite.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha){var e,n;for(this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(t.renderer.updateTexture(this.tilingTexture.baseTexture),this.tilingTexture.needsUpdate=!1)):t.spriteBatch.renderTilingSprite(this),e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this._mask,t),t.spriteBatch.start()}},n.TilingSprite.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){var e=t.context;this._mask&&t.maskManager.pushMask(this._mask,t),e.globalAlpha=this.worldAlpha;var r,i,o=this.worldTransform,a=t.resolution;if(e.setTransform(o.a*a,o.b*a,o.c*a,o.d*a,o.tx*a,o.ty*a),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=e.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=n.blendModesCanvas[t.currentBlendMode]);var s=this.tilePosition,u=this.tileScale;for(s.x%=this.tilingTexture.baseTexture.width,s.y%=this.tilingTexture.baseTexture.height,e.scale(u.x,u.y),e.translate(s.x+this.anchor.x*-this._width,s.y+this.anchor.y*-this._height),e.fillStyle=this.__tilePattern,e.fillRect(-s.x,-s.y,this._width/u.x,this._height/u.y),e.scale(1/u.x,1/u.y),e.translate(-s.x+this.anchor.x*this._width,-s.y+this.anchor.y*this._height),this._mask&&t.maskManager.popMask(t),r=0,i=this.children.length;i>r;r++)this.children[r]._renderCanvas(t)}},n.TilingSprite.prototype.getBounds=function(){var t=this._width,e=this._height,n=t*(1-this.anchor.x),r=t*-this.anchor.x,i=e*(1-this.anchor.y),o=e*-this.anchor.y,a=this.worldTransform,s=a.a,u=a.b,c=a.c,l=a.d,f=a.tx,h=a.ty,p=s*r+c*o+f,d=l*o+u*r+h,m=s*n+c*o+f,v=l*o+u*n+h,g=s*n+c*i+f,y=l*i+u*n+h,b=s*r+c*i+f,_=l*i+u*r+h,w=-(1/0),x=-(1/0),E=1/0,T=1/0;E=E>p?p:E,E=E>m?m:E,E=E>g?g:E,E=E>b?b:E,T=T>d?d:T,T=T>v?v:T,T=T>y?y:T,T=T>_?_:T,w=p>w?p:w,w=m>w?m:w,w=g>w?g:w,w=b>w?b:w,x=d>x?d:x,x=v>x?v:x,x=y>x?y:x,x=_>x?_:x;var C=this._bounds;return C.x=E,C.width=w-E,C.y=T,C.height=x-T,this._currentBounds=C,C},n.TilingSprite.prototype.onTextureUpdate=function(){},n.TilingSprite.prototype.generateTilingTexture=function(t){if(this.texture.baseTexture.hasLoaded){var e,r,i=this.originalTexture||this.texture,o=i.frame,a=o.width!==i.baseTexture.width||o.height!==i.baseTexture.height,s=!1;if(t?(e=n.getNextPowerOfTwo(o.width),r=n.getNextPowerOfTwo(o.height),(o.width!==e||o.height!==r||i.baseTexture.width!==e||i.baseTexture.height||r)&&(s=!0)):a&&(i.trim?(e=i.trim.width,r=i.trim.height):(e=o.width,r=o.height),s=!0),s){var u;this.tilingTexture&&this.tilingTexture.isTiling?(u=this.tilingTexture.canvasBuffer,u.resize(e,r),this.tilingTexture.baseTexture.width=e,this.tilingTexture.baseTexture.height=r,this.tilingTexture.needsUpdate=!0):(u=new n.CanvasBuffer(e,r),this.tilingTexture=n.Texture.fromCanvas(u.canvas),this.tilingTexture.canvasBuffer=u,this.tilingTexture.isTiling=!0),u.context.drawImage(i.baseTexture.source,i.crop.x,i.crop.y,i.crop.width,i.crop.height,0,0,e,r),this.tileScaleOffset.x=o.width/e,this.tileScaleOffset.y=o.height/r}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=i;this.refreshTexture=!1,this.originalTexture=this.texture,this.texture=this.tilingTexture,this.tilingTexture.baseTexture._powerOf2=!0}},n.TilingSprite.prototype.destroy=function(){n.Sprite.prototype.destroy.call(this),this.tileScale=null,this.tileScaleOffset=null,this.tilePosition=null,this.tilingTexture&&(this.tilingTexture.destroy(!0),this.tilingTexture=null)};var r={radDeg:180/Math.PI,degRad:Math.PI/180,temp:[],Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array};r.BoneData=function(t,e){this.name=t,this.parent=e},r.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0,flipX:!1,flipY:!1},r.SlotData=function(t,e){this.name=t,this.boneData=e},r.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},r.IkConstraintData=function(t){this.name=t,this.bones=[]},r.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},r.Bone=function(t,e,n){this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()},r.Bone.yDown=!1,r.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,worldFlipX:!1,worldFlipY:!1,updateWorldTransform:function(){var t=this.parent;if(t)this.worldX=this.x*t.m00+this.y*t.m01+t.worldX,this.worldY=this.x*t.m10+this.y*t.m11+t.worldY,this.data.inheritScale?(this.worldScaleX=t.worldScaleX*this.scaleX,this.worldScaleY=t.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?t.worldRotation+this.rotationIK:this.rotationIK,this.worldFlipX=t.worldFlipX!=this.flipX,this.worldFlipY=t.worldFlipY!=this.flipY;else{var e=this.skeleton.flipX,n=this.skeleton.flipY;this.worldX=e?-this.x:this.x,this.worldY=n!=r.Bone.yDown?-this.y:this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotationIK,this.worldFlipX=e!=this.flipX,this.worldFlipY=n!=this.flipY}var i=this.worldRotation*r.degRad,o=Math.cos(i),a=Math.sin(i);this.worldFlipX?(this.m00=-o*this.worldScaleX,this.m01=a*this.worldScaleY):(this.m00=o*this.worldScaleX,this.m01=-a*this.worldScaleY),this.worldFlipY!=r.Bone.yDown?(this.m10=-a*this.worldScaleX,this.m11=-o*this.worldScaleY):(this.m10=a*this.worldScaleX,this.m11=o*this.worldScaleY)},setToSetupPose:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.rotationIK=this.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.flipX=t.flipX,this.flipY=t.flipY},worldToLocal:function(t){var e=t[0]-this.worldX,n=t[1]-this.worldY,i=this.m00,o=this.m10,a=this.m01,s=this.m11;this.worldFlipX!=(this.worldFlipY!=r.Bone.yDown)&&(i=-i,s=-s);var u=1/(i*s-a*o);t[0]=e*i*u-n*a*u,t[1]=n*s*u-e*o*u},localToWorld:function(t){var e=t[0],n=t[1];t[0]=e*this.m00+n*this.m01+this.worldX,t[1]=e*this.m10+n*this.m11+this.worldY}},r.Slot=function(t,e){this.data=t,this.bone=e,this.setToSetupPose()},r.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(t){this.attachment=t,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0},setAttachmentTime:function(t){this._attachmentTime=this.bone.skeleton.time-t},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var t=this.data;this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a;for(var e=this.bone.skeleton.data.slots,n=0,r=e.length;r>n;n++)if(e[n]==t){this.setAttachment(t.attachmentName?this.bone.skeleton.getAttachmentBySlotIndex(n,t.attachmentName):null);break}}},r.IkConstraint=function(t,e){this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=[];for(var n=0,r=t.bones.length;r>n;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)},r.IkConstraint.prototype={apply:function(){var t=this.target,e=this.bones;switch(e.length){case 1:r.IkConstraint.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:r.IkConstraint.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}}},r.IkConstraint.apply1=function(t,e,n,i){var o=t.data.inheritRotation&&t.parent?t.parent.worldRotation:0,a=t.rotation,s=Math.atan2(n-t.worldY,e-t.worldX)*r.radDeg-o;t.rotationIK=a+(s-a)*i},r.IkConstraint.apply2=function(t,e,n,i,o,a){var s=e.rotation,u=t.rotation;if(!a)return e.rotationIK=s,void(t.rotationIK=u);var c,l,f=r.temp,h=t.parent;h?(f[0]=n,f[1]=i,h.worldToLocal(f),n=(f[0]-t.x)*h.worldScaleX,i=(f[1]-t.y)*h.worldScaleY):(n-=t.x,i-=t.y),e.parent==t?(c=e.x,l=e.y):(f[0]=e.x,f[1]=e.y,e.parent.localToWorld(f),t.worldToLocal(f),c=f[0],l=f[1]);var p=c*t.worldScaleX,d=l*t.worldScaleY,m=Math.atan2(d,p),v=Math.sqrt(p*p+d*d),g=e.data.length*e.worldScaleX,y=2*v*g;if(1e-4>y)return void(e.rotationIK=s+(Math.atan2(i,n)*r.radDeg-u-s)*a);var b=(n*n+i*i-v*v-g*g)/y;-1>b?b=-1:b>1&&(b=1);var _=Math.acos(b)*o,w=v+g*b,x=g*Math.sin(_),E=Math.atan2(i*w-n*x,n*w+i*x),T=(E-m)*r.radDeg-u;T>180?T-=360:-180>T&&(T+=360),t.rotationIK=u+T*a,T=(_+m)*r.radDeg-s,T>180?T-=360:-180>T&&(T+=360),e.rotationIK=s+(T+t.worldRotation-e.parent.worldRotation)*a},r.Skin=function(t){this.name=t,this.attachments={}},r.Skin.prototype={addAttachment:function(t,e,n){this.attachments[t+":"+e]=n},getAttachment:function(t,e){return this.attachments[t+":"+e]},_attachAll:function(t,e){for(var n in e.attachments){var r=n.indexOf(":"),i=parseInt(n.substring(0,r)),o=n.substring(r+1),a=t.slots[i];if(a.attachment&&a.attachment.name==o){var s=this.getAttachment(i,o);s&&a.setAttachment(s)}}}},r.Animation=function(t,e,n){this.name=t,this.timelines=e,this.duration=n},r.Animation.prototype={apply:function(t,e,n,r,i){r&&0!=this.duration&&(n%=this.duration,e%=this.duration);for(var o=this.timelines,a=0,s=o.length;s>a;a++)o[a].apply(t,e,n,i,1)},mix:function(t,e,n,r,i,o){r&&0!=this.duration&&(n%=this.duration,e%=this.duration);for(var a=this.timelines,s=0,u=a.length;u>s;s++)a[s].apply(t,e,n,i,o)}},r.Animation.binarySearch=function(t,e,n){var r=0,i=Math.floor(t.length/n)-2;if(!i)return n;for(var o=i>>>1;;){if(t[(o+1)*n]<=e?r=o+1:i=o,r==i)return(r+1)*n;o=r+i>>>1}},r.Animation.binarySearch1=function(t,e){var n=0,r=t.length-2;if(!r)return 1;for(var i=r>>>1;;){if(t[i+1]<=e?n=i+1:r=i,n==r)return n+1;i=n+r>>>1}},r.Animation.linearSearch=function(t,e,n){for(var r=0,i=t.length-n;i>=r;r+=n)if(t[r]>e)return r;return-1},r.Curves=function(t){this.curves=[]},r.Curves.prototype={setLinear:function(t){this.curves[19*t]=0},setStepped:function(t){this.curves[19*t]=1},setCurve:function(t,e,n,r,i){var o=.1,a=o*o,s=a*o,u=3*o,c=3*a,l=6*a,f=6*s,h=2*-e+r,p=2*-n+i,d=3*(e-r)+1,m=3*(n-i)+1,v=e*u+h*c+d*s,g=n*u+p*c+m*s,y=h*l+d*f,b=p*l+m*f,_=d*f,w=m*f,x=19*t,E=this.curves;E[x++]=2;for(var T=v,C=g,S=x+19-1;S>x;x+=2)E[x]=T,E[x+1]=C,v+=y,g+=b,y+=_,b+=w,T+=v,C+=g},getCurvePercent:function(t,e){e=0>e?0:e>1?1:e;var n=this.curves,r=19*t,i=n[r];if(0===i)return e;if(1==i)return 0;r++;for(var o=0,a=r,s=r+19-1;s>r;r+=2)if(o=n[r],o>=e){var u,c;return r==a?(u=0,c=0):(u=n[r-2],c=n[r-1]),c+(n[r+1]-c)*(e-u)/(o-u)}var l=n[r-1];return l+(1-l)*(e-o)/(1-o)}},r.RotateTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=2*t},r.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,n){t*=2,this.frames[t]=e,this.frames[t+1]=n},apply:function(t,e,n,i,o){var a=this.frames;if(!(n<a[0])){var s=t.bones[this.boneIndex];if(n>=a[a.length-2]){for(var u=s.data.rotation+a[a.length-1]-s.rotation;u>180;)u-=360;for(;-180>u;)u+=360;return void(s.rotation+=u*o)}var c=r.Animation.binarySearch(a,n,2),l=a[c-1],f=a[c],h=1-(n-f)/(a[c-2]-f);h=this.curves.getCurvePercent(c/2-1,h);for(var u=a[c+1]-l;u>180;)u-=360;for(;-180>u;)u+=360;for(u=s.data.rotation+(l+u*h)-s.rotation;u>180;)u-=360;for(;-180>u;)u+=360;s.rotation+=u*o}}},r.TranslateTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=3*t},r.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,n,r){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r},apply:function(t,e,n,i,o){var a=this.frames;if(!(n<a[0])){var s=t.bones[this.boneIndex];if(n>=a[a.length-3])return s.x+=(s.data.x+a[a.length-2]-s.x)*o,void(s.y+=(s.data.y+a[a.length-1]-s.y)*o);var u=r.Animation.binarySearch(a,n,3),c=a[u-2],l=a[u-1],f=a[u],h=1-(n-f)/(a[u+-3]-f);h=this.curves.getCurvePercent(u/3-1,h),s.x+=(s.data.x+c+(a[u+1]-c)*h-s.x)*o,s.y+=(s.data.y+l+(a[u+2]-l)*h-s.y)*o}}},r.ScaleTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=3*t},r.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,n,r){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r},apply:function(t,e,n,i,o){var a=this.frames;if(!(n<a[0])){var s=t.bones[this.boneIndex];if(n>=a[a.length-3])return s.scaleX+=(s.data.scaleX*a[a.length-2]-s.scaleX)*o,void(s.scaleY+=(s.data.scaleY*a[a.length-1]-s.scaleY)*o);var u=r.Animation.binarySearch(a,n,3),c=a[u-2],l=a[u-1],f=a[u],h=1-(n-f)/(a[u+-3]-f);h=this.curves.getCurvePercent(u/3-1,h),s.scaleX+=(s.data.scaleX*(c+(a[u+1]-c)*h)-s.scaleX)*o,s.scaleY+=(s.data.scaleY*(l+(a[u+2]-l)*h)-s.scaleY)*o}}},r.ColorTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=5*t},r.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(t,e,n,r,i,o){t*=5,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=i,this.frames[t+4]=o},apply:function(t,e,n,i,o){var a=this.frames;if(!(n<a[0])){var s,u,c,l;if(n>=a[a.length-5]){var f=a.length-1;s=a[f-3],u=a[f-2],c=a[f-1],l=a[f]}else{var h=r.Animation.binarySearch(a,n,5),p=a[h-4],d=a[h-3],m=a[h-2],v=a[h-1],g=a[h],y=1-(n-g)/(a[h-5]-g);y=this.curves.getCurvePercent(h/5-1,y),s=p+(a[h+1]-p)*y,u=d+(a[h+2]-d)*y,c=m+(a[h+3]-m)*y,l=v+(a[h+4]-v)*y}var b=t.slots[this.slotIndex];1>o?(b.r+=(s-b.r)*o,b.g+=(u-b.g)*o,b.b+=(c-b.b)*o,b.a+=(l-b.a)*o):(b.r=s,b.g=u,b.b=c,b.a=l)}}},r.AttachmentTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=t,this.attachmentNames=[],this.attachmentNames.length=t},r.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},apply:function(t,e,n,i,o){var a=this.frames;if(n<a[0])return void(e>n&&this.apply(t,e,Number.MAX_VALUE,null,0));e>n&&(e=-1);var s=n>=a[a.length-1]?a.length-1:r.Animation.binarySearch1(a,n)-1;if(!(a[s]<e)){var u=this.attachmentNames[s];t.slots[this.slotIndex].setAttachment(u?t.getAttachmentBySlotIndex(this.slotIndex,u):null)}}},r.EventTimeline=function(t){this.frames=[],this.frames.length=t,this.events=[],this.events.length=t},r.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.events[t]=n},apply:function(t,e,n,i,o){if(i){var a=this.frames,s=a.length;if(e>n)this.apply(t,e,Number.MAX_VALUE,i,o),e=-1;else if(e>=a[s-1])return;if(!(n<a[0])){var u;if(e<a[0])u=0;else{u=r.Animation.binarySearch1(a,e);for(var c=a[u];u>0&&a[u-1]==c;)u--}for(var l=this.events;s>u&&n>=a[u];u++)i.push(l[u])}}}},r.DrawOrderTimeline=function(t){this.frames=[],this.frames.length=t,this.drawOrders=[],this.drawOrders.length=t},r.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},apply:function(t,e,n,i,o){var a=this.frames;if(!(n<a[0])){var s;s=n>=a[a.length-1]?a.length-1:r.Animation.binarySearch1(a,n)-1;var u=t.drawOrder,c=(t.slots,this.drawOrders[s]);if(c)for(var l=0,f=c.length;f>l;l++)u[l]=c[l]}}},r.FfdTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=t,this.frameVertices=[],this.frameVertices.length=t},r.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},apply:function(t,e,n,i,o){var a=t.slots[this.slotIndex];if(a.attachment==this.attachment){var s=this.frames;if(!(n<s[0])){var u=this.frameVertices,c=u[0].length,l=a.attachmentVertices;if(l.length!=c&&(o=1),l.length=c,n>=s[s.length-1]){var f=u[s.length-1];if(1>o)for(var h=0;c>h;h++)l[h]+=(f[h]-l[h])*o;else for(var h=0;c>h;h++)l[h]=f[h]}else{var p=r.Animation.binarySearch1(s,n),d=s[p],m=1-(n-d)/(s[p-1]-d);m=this.curves.getCurvePercent(p-1,0>m?0:m>1?1:m);var v=u[p-1],g=u[p];if(1>o)for(var h=0;c>h;h++){var y=v[h];l[h]+=(y+(g[h]-y)*m-l[h])*o}else for(var h=0;c>h;h++){var y=v[h];l[h]=y+(g[h]-y)*m}}}}}},r.IkConstraintTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=3*t},r.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,n,r){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r},apply:function(t,e,n,i,o){var a=this.frames;if(!(n<a[0])){var s=t.ikConstraints[this.ikConstraintIndex];if(n>=a[a.length-3])return s.mix+=(a[a.length-2]-s.mix)*o,void(s.bendDirection=a[a.length-1]);var u=r.Animation.binarySearch(a,n,3),c=a[u+-2],l=a[u],f=1-(n-l)/(a[u+-3]-l);f=this.curves.getCurvePercent(u/3-1,f);var h=c+(a[u+1]-c)*f;s.mix+=(h-s.mix)*o,s.bendDirection=a[u+-1]}}},r.FlipXTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=2*t},r.FlipXTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,n){t*=2,this.frames[t]=e,this.frames[t+1]=n?1:0},apply:function(t,e,n,i,o){var a=this.frames;if(n<a[0])return void(e>n&&this.apply(t,e,Number.MAX_VALUE,null,0));e>n&&(e=-1);var s=(n>=a[a.length-2]?a.length:r.Animation.binarySearch(a,n,2))-2;a[s]<e||(t.bones[this.boneIndex].flipX=0!=a[s+1])}},r.FlipYTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=2*t},r.FlipYTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,n){t*=2,this.frames[t]=e,this.frames[t+1]=n?1:0},apply:function(t,e,n,i,o){var a=this.frames;if(n<a[0])return void(e>n&&this.apply(t,e,Number.MAX_VALUE,null,0));e>n&&(e=-1);var s=(n>=a[a.length-2]?a.length:r.Animation.binarySearch(a,n,2))-2;a[s]<e||(t.bones[this.boneIndex].flipY=0!=a[s+1])}},r.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[]},r.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(t){for(var e=this.bones,n=0,r=e.length;r>n;n++)if(e[n].name==t)return e[n];return null},findBoneIndex:function(t){for(var e=this.bones,n=0,r=e.length;r>n;n++)if(e[n].name==t)return n;return-1},findSlot:function(t){for(var e=this.slots,n=0,r=e.length;r>n;n++)if(e[n].name==t)return slot[n];return null},findSlotIndex:function(t){for(var e=this.slots,n=0,r=e.length;r>n;n++)if(e[n].name==t)return n;return-1},findSkin:function(t){for(var e=this.skins,n=0,r=e.length;r>n;n++)if(e[n].name==t)return e[n];return null},findEvent:function(t){for(var e=this.events,n=0,r=e.length;r>n;n++)if(e[n].name==t)return e[n];return null},findAnimation:function(t){for(var e=this.animations,n=0,r=e.length;r>n;n++)if(e[n].name==t)return e[n];return null},findIkConstraint:function(t){for(var e=this.ikConstraints,n=0,r=e.length;r>n;n++)if(e[n].name==t)return e[n];return null}},r.Skeleton=function(t){this.data=t,this.bones=[];for(var e=0,n=t.bones.length;n>e;e++){var i=t.bones[e],o=i.parent?this.bones[t.bones.indexOf(i.parent)]:null;this.bones.push(new r.Bone(i,this,o))}this.slots=[],this.drawOrder=[];for(var e=0,n=t.slots.length;n>e;e++){var a=t.slots[e],s=this.bones[t.bones.indexOf(a.boneData)],u=new r.Slot(a,s);this.slots.push(u),this.drawOrder.push(e)}this.ikConstraints=[];for(var e=0,n=t.ikConstraints.length;n>e;e++)this.ikConstraints.push(new r.IkConstraint(t.ikConstraints[e],this));this.boneCache=[],this.updateCache()},r.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){var t=this.ikConstraints,e=t.length,n=e+1,r=this.boneCache;r.length>n&&(r.length=n);for(var i=0,o=r.length;o>i;i++)r[i].length=0;for(;r.length<n;)r[r.length]=[];var a=r[0],s=this.bones;t:for(var i=0,o=s.length;o>i;i++){var u=s[i],c=u;do{for(var l=0;e>l;l++)for(var f=t[l],h=f.bones[0],p=f.bones[f.bones.length-1];;){if(c==p){r[l].push(u),r[l+1].push(u);continue t}if(p==h)break;p=p.parent}c=c.parent}while(c);a[a.length]=u}},updateWorldTransform:function(){for(var t=this.bones,e=0,n=t.length;n>e;e++){var r=t[e];r.rotationIK=r.rotation}for(var e=0,i=this.boneCache.length-1;;){for(var o=this.boneCache[e],a=0,s=o.length;s>a;a++)o[a].updateWorldTransform();if(e==i)break;this.ikConstraints[e].apply(),e++}},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var t=this.bones,e=0,n=t.length;n>e;e++)t[e].setToSetupPose();for(var r=this.ikConstraints,e=0,n=r.length;n>e;e++){var i=r[e];i.bendDirection=i.data.bendDirection,i.mix=i.data.mix}},setSlotsToSetupPose:function(){for(var t=this.slots,e=0,n=t.length;n>e;e++)t[e].setToSetupPose(e);this.resetDrawOrder()},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(t){for(var e=this.bones,n=0,r=e.length;r>n;n++)if(e[n].data.name==t)return e[n];return null},findBoneIndex:function(t){for(var e=this.bones,n=0,r=e.length;r>n;n++)if(e[n].data.name==t)return n;return-1},findSlot:function(t){for(var e=this.slots,n=0,r=e.length;r>n;n++)if(e[n].data.name==t)return e[n];return null},findSlotIndex:function(t){for(var e=this.slots,n=0,r=e.length;r>n;n++)if(e[n].data.name==t)return n;return-1},setSkinByName:function(t){var e=this.data.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){if(t)if(this.skin)t._attachAll(this,this.skin);else for(var e=this.slots,n=0,r=e.length;r>n;n++){var i=e[n],o=i.data.attachmentName;if(o){var a=t.getAttachment(n,o);a&&i.setAttachment(a)}}this.skin=t},getAttachmentBySlotName:function(t,e){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t),e)},getAttachmentBySlotIndex:function(t,e){if(this.skin){var n=this.skin.getAttachment(t,e);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},setAttachment:function(t,e){for(var n=this.slots,r=0,i=n.length;i>r;r++){var o=n[r];if(o.data.name==t){var a=null;if(e&&(a=this.getAttachmentBySlotIndex(r,e),!a))throw"Attachment not found: "+e+", for slot: "+t;return void o.setAttachment(a)}}throw"Slot not found: "+t},findIkConstraint:function(t){for(var e=this.ikConstraints,n=0,r=e.length;r>n;n++)if(e[n].data.name==t)return e[n];return null},update:function(t){this.time+=t},resetDrawOrder:function(){for(var t=0,e=this.drawOrder.length;e>t;t++)this.drawOrder[t]=t}},r.EventData=function(t){this.name=t},r.EventData.prototype={intValue:0,floatValue:0,stringValue:null},r.Event=function(t){this.data=t},r.Event.prototype={intValue:0,floatValue:0,stringValue:null},r.AttachmentType={region:0,boundingbox:1,mesh:2,skinnedmesh:3},r.RegionAttachment=function(t){this.name=t,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},r.RegionAttachment.prototype={type:r.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(t,e,n,r,i){var o=this.uvs;i?(o[2]=t,o[3]=r,o[4]=t,o[5]=e,o[6]=n,o[7]=e,o[0]=n,o[1]=r):(o[0]=t,o[1]=r,o[2]=t,o[3]=e,o[4]=n,o[5]=e,o[6]=n,o[7]=r)},updateOffset:function(){var t=this.width/this.regionOriginalWidth*this.scaleX,e=this.height/this.regionOriginalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.regionOffsetX*t,i=-this.height/2*this.scaleY+this.regionOffsetY*e,o=n+this.regionWidth*t,a=i+this.regionHeight*e,s=this.rotation*r.degRad,u=Math.cos(s),c=Math.sin(s),l=n*u+this.x,f=n*c,h=i*u+this.y,p=i*c,d=o*u+this.x,m=o*c,v=a*u+this.y,g=a*c,y=this.offset;y[0]=l-p,y[1]=h+f,y[2]=l-g,y[3]=v+f,y[4]=d-g,y[5]=v+m,y[6]=d-p,y[7]=h+m},computeVertices:function(t,e,n,r){t+=n.worldX,e+=n.worldY;var i=n.m00,o=n.m01,a=n.m10,s=n.m11,u=this.offset;r[0]=u[0]*i+u[1]*o+t,r[1]=u[0]*a+u[1]*s+e,r[2]=u[2]*i+u[3]*o+t,r[3]=u[2]*a+u[3]*s+e,r[4]=u[4]*i+u[5]*o+t,r[5]=u[4]*a+u[5]*s+e,r[6]=u[6]*i+u[7]*o+t,r[7]=u[6]*a+u[7]*s+e}},r.MeshAttachment=function(t){this.name=t},r.MeshAttachment.prototype={type:r.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var t=this.regionU2-this.regionU,e=this.regionV2-this.regionV,n=this.regionUVs.length;if(this.uvs&&this.uvs.length==n||(this.uvs=new r.Float32Array(n)),this.regionRotate)for(var i=0;n>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i+1]*t,this.uvs[i+1]=this.regionV+e-this.regionUVs[i]*e;else for(var i=0;n>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i]*t,this.uvs[i+1]=this.regionV+this.regionUVs[i+1]*e},computeWorldVertices:function(t,e,n,r){var i=n.bone;t+=i.worldX,e+=i.worldY;var o=i.m00,a=i.m01,s=i.m10,u=i.m11,c=this.vertices,l=c.length;n.attachmentVertices.length==l&&(c=n.attachmentVertices);for(var f=0;l>f;f+=2){var h=c[f],p=c[f+1];r[f]=h*o+p*a+t,r[f+1]=h*s+p*u+e}}},r.SkinnedMeshAttachment=function(t){this.name=t},r.SkinnedMeshAttachment.prototype={type:r.AttachmentType.skinnedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(t,e,n,i,o){var a=this.regionU2-this.regionU,s=this.regionV2-this.regionV,u=this.regionUVs.length;if(this.uvs&&this.uvs.length==u||(this.uvs=new r.Float32Array(u)),this.regionRotate)for(var c=0;u>c;c+=2)this.uvs[c]=this.regionU+this.regionUVs[c+1]*a,this.uvs[c+1]=this.regionV+s-this.regionUVs[c]*s;else for(var c=0;u>c;c+=2)this.uvs[c]=this.regionU+this.regionUVs[c]*a,this.uvs[c+1]=this.regionV+this.regionUVs[c+1]*s},computeWorldVertices:function(t,e,n,r){var i,o,a,s,u,c,l,f=n.bone.skeleton.bones,h=this.weights,p=this.bones,d=0,m=0,v=0,g=0,y=p.length;if(n.attachmentVertices.length)for(var b=n.attachmentVertices;y>m;d+=2){for(o=0,a=0,i=p[m++]+m;i>m;m++,v+=3,g+=2)s=f[p[m]],u=h[v]+b[g],c=h[v+1]+b[g+1],l=h[v+2],o+=(u*s.m00+c*s.m01+s.worldX)*l,a+=(u*s.m10+c*s.m11+s.worldY)*l;r[d]=o+t,r[d+1]=a+e}else for(;y>m;d+=2){for(o=0,a=0,i=p[m++]+m;i>m;m++,v+=3)s=f[p[m]],u=h[v],c=h[v+1],l=h[v+2],o+=(u*s.m00+c*s.m01+s.worldX)*l,a+=(u*s.m10+c*s.m11+s.worldY)*l;r[d]=o+t,r[d+1]=a+e}}},r.BoundingBoxAttachment=function(t){this.name=t,this.vertices=[]},r.BoundingBoxAttachment.prototype={type:r.AttachmentType.boundingbox,computeWorldVertices:function(t,e,n,r){t+=n.worldX,e+=n.worldY;for(var i=n.m00,o=n.m01,a=n.m10,s=n.m11,u=this.vertices,c=0,l=u.length;l>c;c+=2){var f=u[c],h=u[c+1];r[c]=f*i+h*o+t,r[c+1]=f*a+h*s+e}}},r.AnimationStateData=function(t){this.skeletonData=t,this.animationToMixTime={}},r.AnimationStateData.prototype={defaultMix:0,setMixByName:function(t,e,n){var r=this.skeletonData.findAnimation(t);if(!r)throw"Animation not found: "+t;var i=this.skeletonData.findAnimation(e);if(!i)throw"Animation not found: "+e;this.setMix(r,i,n)},setMix:function(t,e,n){this.animationToMixTime[t.name+":"+e.name]=n},getMix:function(t,e){var n=t.name+":"+e.name;return this.animationToMixTime.hasOwnProperty(n)?this.animationToMixTime[n]:this.defaultMix}},r.TrackEntry=function(){},r.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},r.AnimationState=function(t){this.data=t,this.tracks=[],this.events=[]},r.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(t){t*=this.timeScale;for(var e=0;e<this.tracks.length;e++){var n=this.tracks[e];if(n){if(n.time+=t*n.timeScale,n.previous){var r=t*n.previous.timeScale;n.previous.time+=r,n.mixTime+=r}var i=n.next;i?(i.time=n.lastTime-i.delay,i.time>=0&&this.setCurrent(e,i)):!n.loop&&n.lastTime>=n.endTime&&this.clearTrack(e)}}},apply:function(t){t.resetDrawOrder();for(var e=0;e<this.tracks.length;e++){var n=this.tracks[e];if(n){this.events.length=0;var r=n.time,i=n.lastTime,o=n.endTime,a=n.loop;!a&&r>o&&(r=o);var s=n.previous;if(s){var u=s.time;!s.loop&&u>s.endTime&&(u=s.endTime),s.animation.apply(t,u,u,s.loop,null);var c=n.mixTime/n.mixDuration*n.mix;c>=1&&(c=1,n.previous=null),n.animation.mix(t,n.lastTime,r,a,this.events,c)}else 1==n.mix?n.animation.apply(t,n.lastTime,r,a,this.events):n.animation.mix(t,n.lastTime,r,a,this.events,n.mix);for(var l=0,f=this.events.length;f>l;l++){var h=this.events[l];n.onEvent&&n.onEvent(e,h),this.onEvent&&this.onEvent(e,h)}if(a?i%o>r%o:o>i&&r>=o){var p=Math.floor(r/o);n.onComplete&&n.onComplete(e,p),this.onComplete&&this.onComplete(e,p)}n.lastTime=n.time}}},clearTracks:function(){for(var t=0,e=this.tracks.length;e>t;t++)this.clearTrack(t);this.tracks.length=0},clearTrack:function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];e&&(e.onEnd&&e.onEnd(t),this.onEnd&&this.onEnd(t),this.tracks[t]=null)}},_expandToIndex:function(t){if(t<this.tracks.length)return this.tracks[t];for(;t>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(t,e){var n=this._expandToIndex(t);if(n){var r=n.previous;n.previous=null,n.onEnd&&n.onEnd(t),this.onEnd&&this.onEnd(t),e.mixDuration=this.data.getMix(n.animation,e.animation),e.mixDuration>0&&(e.mixTime=0,r&&n.mixTime/n.mixDuration<.5?e.previous=r:e.previous=n)}this.tracks[t]=e,e.onStart&&e.onStart(t),this.onStart&&this.onStart(t)},setAnimationByName:function(t,e,n){var r=this.data.skeletonData.findAnimation(e);if(!r)throw"Animation not found: "+e;return this.setAnimation(t,r,n)},setAnimation:function(t,e,n){var i=new r.TrackEntry;return i.animation=e,i.loop=n,i.endTime=e.duration,this.setCurrent(t,i),i},addAnimationByName:function(t,e,n,r){var i=this.data.skeletonData.findAnimation(e);if(!i)throw"Animation not found: "+e;return this.addAnimation(t,i,n,r)},addAnimation:function(t,e,n,i){var o=new r.TrackEntry;o.animation=e,o.loop=n,o.endTime=e.duration;var a=this._expandToIndex(t);if(a){for(;a.next;)a=a.next;a.next=o}else this.tracks[t]=o;return 0>=i&&(a?i+=a.endTime-this.data.getMix(a.animation,e):i=0),o.delay=i,o},getCurrent:function(t){return t>=this.tracks.length?null:this.tracks[t]}},r.SkeletonJson=function(t){this.attachmentLoader=t},r.SkeletonJson.prototype={scale:1,readSkeletonData:function(t,e){var n=new r.SkeletonData;n.name=e;var i=t.skeleton;i&&(n.hash=i.hash,n.version=i.spine,
n.width=i.width||0,n.height=i.height||0);for(var o=t.bones,a=0,s=o.length;s>a;a++){var u=o[a],c=null;if(u.parent&&(c=n.findBone(u.parent),!c))throw"Parent bone not found: "+u.parent;var l=new r.BoneData(u.name,c);l.length=(u.length||0)*this.scale,l.x=(u.x||0)*this.scale,l.y=(u.y||0)*this.scale,l.rotation=u.rotation||0,l.scaleX=u.hasOwnProperty("scaleX")?u.scaleX:1,l.scaleY=u.hasOwnProperty("scaleY")?u.scaleY:1,l.inheritScale=u.hasOwnProperty("inheritScale")?u.inheritScale:!0,l.inheritRotation=u.hasOwnProperty("inheritRotation")?u.inheritRotation:!0,n.bones.push(l)}var f=t.ik;if(f)for(var a=0,s=f.length;s>a;a++){for(var h=f[a],p=new r.IkConstraintData(h.name),o=h.bones,d=0,m=o.length;m>d;d++){var v=n.findBone(o[d]);if(!v)throw"IK bone not found: "+o[d];p.bones.push(v)}if(p.target=n.findBone(h.target),!p.target)throw"Target bone not found: "+h.target;p.bendDirection=!h.hasOwnProperty("bendPositive")||h.bendPositive?1:-1,p.mix=h.hasOwnProperty("mix")?h.mix:1,n.ikConstraints.push(p)}for(var g=t.slots,a=0,s=g.length;s>a;a++){var y=g[a],l=n.findBone(y.bone);if(!l)throw"Slot bone not found: "+y.bone;var b=new r.SlotData(y.name,l),_=y.color;_&&(b.r=this.toColor(_,0),b.g=this.toColor(_,1),b.b=this.toColor(_,2),b.a=this.toColor(_,3)),b.attachmentName=y.attachment,b.additiveBlending=y.additive&&"true"==y.additive,n.slots.push(b)}var w=t.skins;for(var x in w)if(w.hasOwnProperty(x)){var E=w[x],T=new r.Skin(x);for(var C in E)if(E.hasOwnProperty(C)){var S=n.findSlotIndex(C),A=E[C];for(var k in A)if(A.hasOwnProperty(k)){var O=this.readAttachment(T,k,A[k]);O&&T.addAttachment(S,k,O)}}n.skins.push(T),"default"==T.name&&(n.defaultSkin=T)}var j=t.events;for(var M in j)if(j.hasOwnProperty(M)){var R=j[M],N=new r.EventData(M);N.intValue=R["int"]||0,N.floatValue=R["float"]||0,N.stringValue=R.string||null,n.events.push(N)}var P=t.animations;for(var I in P)P.hasOwnProperty(I)&&this.readAnimation(I,P[I],n);return n},readAttachment:function(t,e,n){e=n.name||e;var i=r.AttachmentType[n.type||"region"],o=n.path||e,a=this.scale;if(i==r.AttachmentType.region){var s=this.attachmentLoader.newRegionAttachment(t,e,o);if(!s)return null;s.path=o,s.x=(n.x||0)*a,s.y=(n.y||0)*a,s.scaleX=n.hasOwnProperty("scaleX")?n.scaleX:1,s.scaleY=n.hasOwnProperty("scaleY")?n.scaleY:1,s.rotation=n.rotation||0,s.width=(n.width||0)*a,s.height=(n.height||0)*a;var u=n.color;return u&&(s.r=this.toColor(u,0),s.g=this.toColor(u,1),s.b=this.toColor(u,2),s.a=this.toColor(u,3)),s.updateOffset(),s}if(i==r.AttachmentType.mesh){var c=this.attachmentLoader.newMeshAttachment(t,e,o);return c?(c.path=o,c.vertices=this.getFloatArray(n,"vertices",a),c.triangles=this.getIntArray(n,"triangles"),c.regionUVs=this.getFloatArray(n,"uvs",1),c.updateUVs(),u=n.color,u&&(c.r=this.toColor(u,0),c.g=this.toColor(u,1),c.b=this.toColor(u,2),c.a=this.toColor(u,3)),c.hullLength=2*(n.hull||0),n.edges&&(c.edges=this.getIntArray(n,"edges")),c.width=(n.width||0)*a,c.height=(n.height||0)*a,c):null}if(i==r.AttachmentType.skinnedmesh){var c=this.attachmentLoader.newSkinnedMeshAttachment(t,e,o);if(!c)return null;c.path=o;for(var l=this.getFloatArray(n,"uvs",1),f=this.getFloatArray(n,"vertices",1),h=[],p=[],d=0,m=f.length;m>d;){var v=0|f[d++];p[p.length]=v;for(var g=d+4*v;g>d;)p[p.length]=f[d],h[h.length]=f[d+1]*a,h[h.length]=f[d+2]*a,h[h.length]=f[d+3],d+=4}return c.bones=p,c.weights=h,c.triangles=this.getIntArray(n,"triangles"),c.regionUVs=l,c.updateUVs(),u=n.color,u&&(c.r=this.toColor(u,0),c.g=this.toColor(u,1),c.b=this.toColor(u,2),c.a=this.toColor(u,3)),c.hullLength=2*(n.hull||0),n.edges&&(c.edges=this.getIntArray(n,"edges")),c.width=(n.width||0)*a,c.height=(n.height||0)*a,c}if(i==r.AttachmentType.boundingbox){for(var y=this.attachmentLoader.newBoundingBoxAttachment(t,e),f=n.vertices,d=0,m=f.length;m>d;d++)y.vertices.push(f[d]*a);return y}throw"Unknown attachment type: "+i},readAnimation:function(t,e,n){var i=[],o=0,a=e.slots;for(var s in a)if(a.hasOwnProperty(s)){var u=a[s],c=n.findSlotIndex(s);for(var l in u)if(u.hasOwnProperty(l)){var f=u[l];if("color"==l){var h=new r.ColorTimeline(f.length);h.slotIndex=c;for(var p=0,d=0,m=f.length;m>d;d++){var v=f[d],g=v.color,y=this.toColor(g,0),b=this.toColor(g,1),_=this.toColor(g,2),w=this.toColor(g,3);h.setFrame(p,v.time,y,b,_,w),this.readCurve(h,p,v),p++}i.push(h),o=Math.max(o,h.frames[5*h.getFrameCount()-5])}else{if("attachment"!=l)throw"Invalid timeline type for a slot: "+l+" ("+s+")";var h=new r.AttachmentTimeline(f.length);h.slotIndex=c;for(var p=0,d=0,m=f.length;m>d;d++){var v=f[d];h.setFrame(p++,v.time,v.name)}i.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}}}var x=e.bones;for(var E in x)if(x.hasOwnProperty(E)){var T=n.findBoneIndex(E);if(-1==T)throw"Bone not found: "+E;var C=x[E];for(var l in C)if(C.hasOwnProperty(l)){var f=C[l];if("rotate"==l){var h=new r.RotateTimeline(f.length);h.boneIndex=T;for(var p=0,d=0,m=f.length;m>d;d++){var v=f[d];h.setFrame(p,v.time,v.angle),this.readCurve(h,p,v),p++}i.push(h),o=Math.max(o,h.frames[2*h.getFrameCount()-2])}else if("translate"==l||"scale"==l){var h,S=1;"scale"==l?h=new r.ScaleTimeline(f.length):(h=new r.TranslateTimeline(f.length),S=this.scale),h.boneIndex=T;for(var p=0,d=0,m=f.length;m>d;d++){var v=f[d],A=(v.x||0)*S,k=(v.y||0)*S;h.setFrame(p,v.time,A,k),this.readCurve(h,p,v),p++}i.push(h),o=Math.max(o,h.frames[3*h.getFrameCount()-3])}else{if("flipX"!=l&&"flipY"!=l)throw"Invalid timeline type for a bone: "+l+" ("+E+")";var A="flipX"==l,h=A?new r.FlipXTimeline(f.length):new r.FlipYTimeline(f.length);h.boneIndex=T;for(var O=A?"x":"y",p=0,d=0,m=f.length;m>d;d++){var v=f[d];h.setFrame(p,v.time,v[O]||!1),p++}i.push(h),o=Math.max(o,h.frames[2*h.getFrameCount()-2])}}}var j=e.ik;for(var M in j)if(j.hasOwnProperty(M)){var R=n.findIkConstraint(M),f=j[M],h=new r.IkConstraintTimeline(f.length);h.ikConstraintIndex=n.ikConstraints.indexOf(R);for(var p=0,d=0,m=f.length;m>d;d++){var v=f[d],N=v.hasOwnProperty("mix")?v.mix:1,P=!v.hasOwnProperty("bendPositive")||v.bendPositive?1:-1;h.setFrame(p,v.time,N,P),this.readCurve(h,p,v),p++}i.push(h),o=Math.max(o,h.frames[3*h.getFrameCount()-3])}var I=e.ffd;for(var D in I){var L=n.findSkin(D),u=I[D];for(s in u){var c=n.findSlotIndex(s),F=u[s];for(var B in F){var f=F[B],h=new r.FfdTimeline(f.length),U=L.getAttachment(c,B);if(!U)throw"FFD attachment not found: "+B;h.slotIndex=c,h.attachment=U;var q,V=U.type==r.AttachmentType.mesh;q=V?U.vertices.length:U.weights.length/3*2;for(var p=0,d=0,m=f.length;m>d;d++){var W,v=f[d];if(v.vertices){var G=v.vertices,W=[];W.length=q;var H=v.offset||0,z=G.length;if(1==this.scale)for(var Y=0;z>Y;Y++)W[Y+H]=G[Y];else for(var Y=0;z>Y;Y++)W[Y+H]=G[Y]*this.scale;if(V)for(var $=U.vertices,Y=0,z=W.length;z>Y;Y++)W[Y]+=$[Y]}else V?W=U.vertices:(W=[],W.length=q);h.setFrame(p,v.time,W),this.readCurve(h,p,v),p++}i[i.length]=h,o=Math.max(o,h.frames[h.getFrameCount()-1])}}}var X=e.drawOrder;if(X||(X=e.draworder),X){for(var h=new r.DrawOrderTimeline(X.length),J=n.slots.length,p=0,d=0,m=X.length;m>d;d++){var K=X[d],Q=null;if(K.offsets){Q=[],Q.length=J;for(var Y=J-1;Y>=0;Y--)Q[Y]=-1;var Z=K.offsets,tt=[];tt.length=J-Z.length;for(var et=0,nt=0,Y=0,z=Z.length;z>Y;Y++){var rt=Z[Y],c=n.findSlotIndex(rt.slot);if(-1==c)throw"Slot not found: "+rt.slot;for(;et!=c;)tt[nt++]=et++;Q[et+rt.offset]=et++}for(;J>et;)tt[nt++]=et++;for(var Y=J-1;Y>=0;Y--)-1==Q[Y]&&(Q[Y]=tt[--nt])}h.setFrame(p++,K.time,Q)}i.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}var it=e.events;if(it){for(var h=new r.EventTimeline(it.length),p=0,d=0,m=it.length;m>d;d++){var ot=it[d],at=n.findEvent(ot.name);if(!at)throw"Event not found: "+ot.name;var st=new r.Event(at);st.intValue=ot.hasOwnProperty("int")?ot["int"]:at.intValue,st.floatValue=ot.hasOwnProperty("float")?ot["float"]:at.floatValue,st.stringValue=ot.hasOwnProperty("string")?ot.string:at.stringValue,h.setFrame(p++,ot.time,st)}i.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}n.animations.push(new r.Animation(t,i,o))},readCurve:function(t,e,n){var r=n.curve;r?"stepped"==r?t.curves.setStepped(e):r instanceof Array&&t.curves.setCurve(e,r[0],r[1],r[2],r[3]):t.curves.setLinear(e)},toColor:function(t,e){if(8!=t.length)throw"Color hexidecimal length must be 8, recieved: "+t;return parseInt(t.substring(2*e,2*e+2),16)/255},getFloatArray:function(t,e,n){var i=t[e],o=new r.Float32Array(i.length),a=0,s=i.length;if(1==n)for(;s>a;a++)o[a]=i[a];else for(;s>a;a++)o[a]=i[a]*n;return o},getIntArray:function(t,e){for(var n=t[e],i=new r.Uint16Array(n.length),o=0,a=n.length;a>o;o++)i[o]=0|n[o];return i}},r.Atlas=function(t,e){this.textureLoader=e,this.pages=[],this.regions=[];var n=new r.AtlasReader(t),i=[];i.length=4;for(var o=null;;){var a=n.readLine();if(null===a)break;if(a=n.trim(a),a.length)if(o){var s=new r.AtlasRegion;s.name=a,s.page=o,s.rotate="true"==n.readValue(),n.readTuple(i);var u=parseInt(i[0]),c=parseInt(i[1]);n.readTuple(i);var l=parseInt(i[0]),f=parseInt(i[1]);s.u=u/o.width,s.v=c/o.height,s.rotate?(s.u2=(u+f)/o.width,s.v2=(c+l)/o.height):(s.u2=(u+l)/o.width,s.v2=(c+f)/o.height),s.x=u,s.y=c,s.width=Math.abs(l),s.height=Math.abs(f),4==n.readTuple(i)&&(s.splits=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],4==n.readTuple(i)&&(s.pads=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],n.readTuple(i))),s.originalWidth=parseInt(i[0]),s.originalHeight=parseInt(i[1]),n.readTuple(i),s.offsetX=parseInt(i[0]),s.offsetY=parseInt(i[1]),s.index=parseInt(n.readValue()),this.regions.push(s)}else{o=new r.AtlasPage,o.name=a,2==n.readTuple(i)&&(o.width=parseInt(i[0]),o.height=parseInt(i[1]),n.readTuple(i)),o.format=r.Atlas.Format[i[0]],n.readTuple(i),o.minFilter=r.Atlas.TextureFilter[i[0]],o.magFilter=r.Atlas.TextureFilter[i[1]];var h=n.readValue();o.uWrap=r.Atlas.TextureWrap.clampToEdge,o.vWrap=r.Atlas.TextureWrap.clampToEdge,"x"==h?o.uWrap=r.Atlas.TextureWrap.repeat:"y"==h?o.vWrap=r.Atlas.TextureWrap.repeat:"xy"==h&&(o.uWrap=o.vWrap=r.Atlas.TextureWrap.repeat),e.load(o,a,this),this.pages.push(o)}else o=null}},r.Atlas.prototype={findRegion:function(t){for(var e=this.regions,n=0,r=e.length;r>n;n++)if(e[n].name==t)return e[n];return null},dispose:function(){for(var t=this.pages,e=0,n=t.length;n>e;e++)this.textureLoader.unload(t[e].rendererObject)},updateUVs:function(t){for(var e=this.regions,n=0,r=e.length;r>n;n++){var i=e[n];i.page==t&&(i.u=i.x/t.width,i.v=i.y/t.height,i.rotate?(i.u2=(i.x+i.height)/t.width,i.v2=(i.y+i.width)/t.height):(i.u2=(i.x+i.width)/t.width,i.v2=(i.y+i.height)/t.height))}}},r.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},r.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},r.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},r.AtlasPage=function(){},r.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},r.AtlasRegion=function(){},r.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},r.AtlasReader=function(t){this.lines=t.split(/\r\n|\r|\n/)},r.AtlasReader.prototype={index:0,trim:function(t){return t.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw"Invalid line: "+t;return this.trim(t.substring(e+1))},readTuple:function(t){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw"Invalid line: "+e;for(var r=0,i=n+1;3>r;r++){var o=e.indexOf(",",i);if(-1==o)break;t[r]=this.trim(e.substr(i,o-i)),i=o+1}return t[r]=this.trim(e.substring(i)),r+1}},r.AtlasAttachmentLoader=function(t){this.atlas=t},r.AtlasAttachmentLoader.prototype={newRegionAttachment:function(t,e,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (region attachment: "+e+")";var o=new r.RegionAttachment(e);return o.rendererObject=i,o.setUVs(i.u,i.v,i.u2,i.v2,i.rotate),o.regionOffsetX=i.offsetX,o.regionOffsetY=i.offsetY,o.regionWidth=i.width,o.regionHeight=i.height,o.regionOriginalWidth=i.originalWidth,o.regionOriginalHeight=i.originalHeight,o},newMeshAttachment:function(t,e,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (mesh attachment: "+e+")";var o=new r.MeshAttachment(e);return o.rendererObject=i,o.regionU=i.u,o.regionV=i.v,o.regionU2=i.u2,o.regionV2=i.v2,o.regionRotate=i.rotate,o.regionOffsetX=i.offsetX,o.regionOffsetY=i.offsetY,o.regionWidth=i.width,o.regionHeight=i.height,o.regionOriginalWidth=i.originalWidth,o.regionOriginalHeight=i.originalHeight,o},newSkinnedMeshAttachment:function(t,e,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (skinned mesh attachment: "+e+")";var o=new r.SkinnedMeshAttachment(e);return o.rendererObject=i,o.regionU=i.u,o.regionV=i.v,o.regionU2=i.u2,o.regionV2=i.v2,o.regionRotate=i.rotate,o.regionOffsetX=i.offsetX,o.regionOffsetY=i.offsetY,o.regionWidth=i.width,o.regionHeight=i.height,o.regionOriginalWidth=i.originalWidth,o.regionOriginalHeight=i.originalHeight,o},newBoundingBoxAttachment:function(t,e){return new r.BoundingBoxAttachment(e)}},r.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},r.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(t,e){var n=t.slots,i=n.length,o=t.x,a=t.y,s=this.boundingBoxes,u=this.polygonPool,c=this.polygons;s.length=0;for(var l=0,f=c.length;f>l;l++)u.push(c[l]);c.length=0;for(var l=0;i>l;l++){var h=n[l],p=h.attachment;if(p.type==r.AttachmentType.boundingbox){s.push(p);var d,m=u.length;m>0?(d=u[m-1],u.splice(m-1,1)):d=[],c.push(d),d.length=p.vertices.length,p.computeWorldVertices(o,a,h.bone,d)}}e&&this.aabbCompute()},aabbCompute:function(){for(var t=this.polygons,e=Number.MAX_VALUE,n=Number.MAX_VALUE,r=Number.MIN_VALUE,i=Number.MIN_VALUE,o=0,a=t.length;a>o;o++)for(var s=t[o],u=0,c=s.length;c>u;u+=2){var l=s[u],f=s[u+1];e=Math.min(e,l),n=Math.min(n,f),r=Math.max(r,l),i=Math.max(i,f)}this.minX=e,this.minY=n,this.maxX=r,this.maxY=i},aabbContainsPoint:function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},aabbIntersectsSegment:function(t,e,n,r){var i=this.minX,o=this.minY,a=this.maxX,s=this.maxY;if(i>=t&&i>=n||o>=e&&o>=r||t>=a&&n>=a||e>=s&&r>=s)return!1;var u=(r-e)/(n-t),c=u*(i-t)+e;if(c>o&&s>c)return!0;if(c=u*(a-t)+e,c>o&&s>c)return!0;var l=(o-e)/u+t;return l>i&&a>l?!0:(l=(s-e)/u+t,l>i&&a>l?!0:!1)},aabbIntersectsSkeleton:function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},containsPoint:function(t,e){for(var n=this.polygons,r=0,i=n.length;i>r;r++)if(this.polygonContainsPoint(n[r],t,e))return this.boundingBoxes[r];return null},intersectsSegment:function(t,e,n,r){for(var i=this.polygons,o=0,a=i.length;a>o;o++)if(i[o].intersectsSegment(t,e,n,r))return this.boundingBoxes[o];return null},polygonContainsPoint:function(t,e,n){for(var r=t.length,i=r-2,o=!1,a=0;r>a;a+=2){var s=t[a+1],u=t[i+1];if(n>s&&u>=n||n>u&&s>=n){var c=t[a];c+(n-s)/(u-s)*(t[i]-c)<e&&(o=!o)}i=a}return o},polygonIntersectsSegment:function(t,e,n,r,i){for(var o=t.length,a=e-r,s=n-i,u=e*i-n*r,c=t[o-2],l=t[o-1],f=0;o>f;f+=2){var h=t[f],p=t[f+1],d=c*p-l*h,m=c-h,v=l-p,g=a*v-s*m,y=(u*m-a*d)/g;if((y>=c&&h>=y||y>=h&&c>=y)&&(y>=e&&r>=y||y>=r&&e>=y)){var b=(u*v-s*d)/g;if((b>=l&&p>=b||b>=p&&l>=b)&&(b>=n&&i>=b||b>=i&&n>=b))return!0}c=h,l=p}return!1},getPolygon:function(t){var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},r.Bone.yDown=!0,n.AnimCache={},n.SpineTextureLoader=function(t,e){n.EventTarget.call(this),this.basePath=t,this.crossorigin=e,this.loadingCount=0},n.SpineTextureLoader.prototype=n.SpineTextureLoader,n.SpineTextureLoader.prototype.load=function(t,e){if(t.rendererObject=n.BaseTexture.fromImage(this.basePath+"/"+e,this.crossorigin),!t.rendererObject.hasLoaded){var r=this;++r.loadingCount,t.rendererObject.addEventListener("loaded",function(){--r.loadingCount,r.dispatchEvent({type:"loadedBaseTexture",content:r})})}},n.SpineTextureLoader.prototype.unload=function(t){t.destroy(!0)},n.Spine=function(t){if(n.DisplayObjectContainer.call(this),this.spineData=n.AnimCache[t],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+t);this.skeleton=new r.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new r.AnimationStateData(this.spineData),this.state=new r.AnimationState(this.stateData),this.slotContainers=[];for(var e=0,i=this.skeleton.slots.length;i>e;e++){var o=this.skeleton.slots[e],a=o.attachment,s=new n.DisplayObjectContainer;if(this.slotContainers.push(s),this.addChild(s),a instanceof r.RegionAttachment){var u=a.rendererObject.name,c=this.createSprite(o,a);o.currentSprite=c,o.currentSpriteName=u,s.addChild(c)}else{if(!(a instanceof r.MeshAttachment))continue;var l=this.createMesh(o,a);o.currentMesh=l,o.currentMeshName=a.name,s.addChild(l)}}this.autoUpdate=!0},n.Spine.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Spine.prototype.constructor=n.Spine,Object.defineProperty(n.Spine.prototype,"autoUpdate",{get:function(){return this.updateTransform===n.Spine.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?n.Spine.prototype.autoUpdateTransform:n.DisplayObjectContainer.prototype.updateTransform}}),n.Spine.prototype.update=function(t){this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var e=this.skeleton.drawOrder,i=this.skeleton.slots,o=0,a=e.length;a>o;o++)this.children[o]=this.slotContainers[e[o]];for(o=0,a=i.length;a>o;o++){var s=i[o],u=s.attachment,c=this.slotContainers[o];if(u){var l=u.type;if(l===r.AttachmentType.region){if(u.rendererObject&&(!s.currentSpriteName||s.currentSpriteName!==u.name)){var f=u.rendererObject.name;if(void 0!==s.currentSprite&&(s.currentSprite.visible=!1),s.sprites=s.sprites||{},void 0!==s.sprites[f])s.sprites[f].visible=!0;else{var h=this.createSprite(s,u);c.addChild(h)}s.currentSprite=s.sprites[f],s.currentSpriteName=f}var p=s.bone;c.position.x=p.worldX+u.x*p.m00+u.y*p.m01,c.position.y=p.worldY+u.x*p.m10+u.y*p.m11,c.scale.x=p.worldScaleX,c.scale.y=p.worldScaleY,c.rotation=-(s.bone.worldRotation*r.degRad),s.currentSprite.tint=n.rgb2hex([s.r,s.g,s.b])}else{if(l!==r.AttachmentType.skinnedmesh){c.visible=!1;continue}if(!s.currentMeshName||s.currentMeshName!==u.name){var d=u.name;if(void 0!==s.currentMesh&&(s.currentMesh.visible=!1),s.meshes=s.meshes||{},void 0!==s.meshes[d])s.meshes[d].visible=!0;else{var m=this.createMesh(s,u);c.addChild(m)}s.currentMesh=s.meshes[d],s.currentMeshName=d}u.computeWorldVertices(s.bone.skeleton.x,s.bone.skeleton.y,s,s.currentMesh.vertices)}c.visible=!0,c.alpha=s.a}else c.visible=!1}},n.Spine.prototype.autoUpdateTransform=function(){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t),n.DisplayObjectContainer.prototype.updateTransform.call(this)},n.Spine.prototype.createSprite=function(t,e){var i=e.rendererObject,o=i.page.rendererObject,a=new n.Rectangle(i.x,i.y,i.rotate?i.height:i.width,i.rotate?i.width:i.height),s=new n.Texture(o,a),u=new n.Sprite(s),c=i.rotate?.5*Math.PI:0;return u.scale.set(i.width/i.originalWidth*e.scaleX,i.height/i.originalHeight*e.scaleY),u.rotation=c-e.rotation*r.degRad,u.anchor.x=u.anchor.y=.5,u.alpha=e.a,t.sprites=t.sprites||{},t.sprites[i.name]=u,u},n.Spine.prototype.createMesh=function(t,e){var r=e.rendererObject,i=r.page.rendererObject,o=new n.Texture(i),a=new n.Strip(o);return a.drawMode=n.Strip.DrawModes.TRIANGLES,a.canvasPadding=1.5,a.vertices=new n.Float32Array(e.uvs.length),a.uvs=e.uvs,a.indices=e.triangles,a.alpha=e.a,t.meshes=t.meshes||{},t.meshes[e.name]=a,a},n.BaseTextureCache={},n.BaseTextureCacheIdGenerator=0,n.BaseTexture=function(t,e){if(this.resolution=1,this.width=100,this.height=100,this.scaleMode=e||n.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=t,this._UID=n._UID++,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this._dirty=[!0,!0,!0,!0],t){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty();else{var r=this;this.source.onload=function(){r.hasLoaded=!0,r.width=r.source.naturalWidth||r.source.width,r.height=r.source.naturalHeight||r.source.height,r.dirty(),r.dispatchEvent({type:"loaded",content:r})},this.source.onerror=function(){r.dispatchEvent({type:"error",content:r})}}this.imageUrl=null,this._powerOf2=!1}},n.BaseTexture.prototype.constructor=n.BaseTexture,n.EventTarget.mixin(n.BaseTexture.prototype),n.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete n.BaseTextureCache[this.imageUrl],delete n.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete n.BaseTextureCache[this.source._pixiId],this.source=null,this.unloadFromGPU()},n.BaseTexture.prototype.updateSourceImage=function(t){this.hasLoaded=!1,this.source.src=null,this.source.src=t},n.BaseTexture.prototype.dirty=function(){for(var t=0;t<this._glTextures.length;t++)this._dirty[t]=!0},n.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var t=this._glTextures.length-1;t>=0;t--){var e=this._glTextures[t],r=n.glContexts[t];r&&e&&r.deleteTexture(e)}this._glTextures.length=0,this.dirty()},n.BaseTexture.fromImage=function(t,e,r){var i=n.BaseTextureCache[t];if(void 0===e&&-1===t.indexOf("data:")&&(e=!0),!i){var o=new Image;e&&(o.crossOrigin=""),o.src=t,i=new n.BaseTexture(o,r),i.imageUrl=t,n.BaseTextureCache[t]=i,-1!==t.indexOf(n.RETINA_PREFIX+".")&&(i.resolution=2)}return i},n.BaseTexture.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+n.TextureCacheIdGenerator++);var r=n.BaseTextureCache[t._pixiId];return r||(r=new n.BaseTexture(t,e),n.BaseTextureCache[t._pixiId]=r),r},n.TextureCache={},n.FrameCache={},n.TextureCacheIdGenerator=0,n.Texture=function(t,e,r,i){this.noFrame=!1,e||(this.noFrame=!0,e=new n.Rectangle(0,0,1,1)),t instanceof n.Texture&&(t=t.baseTexture),this.baseTexture=t,this.frame=e,this.trim=i,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=r||new n.Rectangle(0,0,1,1),t.hasLoaded?(this.noFrame&&(e=new n.Rectangle(0,0,t.width,t.height)),this.setFrame(e)):t.addEventListener("loaded",this.onBaseTextureLoaded.bind(this))},n.Texture.prototype.constructor=n.Texture,n.EventTarget.mixin(n.Texture.prototype),n.Texture.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;t.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new n.Rectangle(0,0,t.width,t.height)),this.setFrame(this.frame),this.dispatchEvent({type:"update",content:this})},n.Texture.prototype.destroy=function(t){t&&this.baseTexture.destroy(),this.valid=!1},n.Texture.prototype.setFrame=function(t){if(this.noFrame=!1,this.frame=t,this.width=t.width,this.height=t.height,this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,!this.trim&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs()},n.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new n.TextureUvs);var t=this.crop,e=this.baseTexture.width,r=this.baseTexture.height;this._uvs.x0=t.x/e,this._uvs.y0=t.y/r,this._uvs.x1=(t.x+t.width)/e,this._uvs.y1=t.y/r,this._uvs.x2=(t.x+t.width)/e,this._uvs.y2=(t.y+t.height)/r,this._uvs.x3=t.x/e,this._uvs.y3=(t.y+t.height)/r},n.Texture.fromImage=function(t,e,r){var i=n.TextureCache[t];return i||(i=new n.Texture(n.BaseTexture.fromImage(t,e,r)),n.TextureCache[t]=i),i},n.Texture.fromFrame=function(t){var e=n.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache ');return e},n.Texture.fromCanvas=function(t,e){var r=n.BaseTexture.fromCanvas(t,e);return new n.Texture(r)},n.Texture.addTextureToCache=function(t,e){n.TextureCache[e]=t},n.Texture.removeTextureFromCache=function(t){var e=n.TextureCache[t];return delete n.TextureCache[t],delete n.BaseTextureCache[t],e},n.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},n.Texture.emptyTexture=new n.Texture(new n.BaseTexture),n.RenderTexture=function(t,e,r,i,o){if(this.width=t||100,this.height=e||100,this.resolution=o||1,this.frame=new n.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new n.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new n.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=i||n.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,n.Texture.call(this,this.baseTexture,new n.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution)),this.renderer=r||n.defaultRenderer,this.renderer.type===n.WEBGL_RENDERER){var a=this.renderer.gl;this.baseTexture._dirty[a.id]=!1,this.textureBuffer=new n.FilterTexture(a,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[a.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new n.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new n.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()},n.RenderTexture.prototype=Object.create(n.Texture.prototype),n.RenderTexture.prototype.constructor=n.RenderTexture,n.RenderTexture.prototype.resize=function(t,e,r){(t!==this.width||e!==this.height)&&(this.valid=t>0&&e>0,this.width=t,this.height=e,this.frame.width=this.crop.width=t*this.resolution,this.frame.height=this.crop.height=e*this.resolution,r&&(this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution),this.renderer.type===n.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width,this.height))},n.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===n.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},n.RenderTexture.prototype.renderWebGL=function(t,e,n){if(this.valid){var r=t.worldTransform;r.identity(),r.translate(0,2*this.projection.y),e&&r.append(e),r.scale(1,-1),t.worldAlpha=1;for(var i=t.children,o=0,a=i.length;a>o;o++)i[o].updateTransform();var s=this.renderer.gl;s.viewport(0,0,this.width*this.resolution,this.height*this.resolution),s.bindFramebuffer(s.FRAMEBUFFER,this.textureBuffer.frameBuffer),n&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(t,this.projection,this.textureBuffer.frameBuffer),this.renderer.spriteBatch.dirty=!0}},n.RenderTexture.prototype.renderCanvas=function(t,e,n){if(this.valid){var r=t.worldTransform;r.identity(),e&&r.append(e),t.worldAlpha=1;for(var i=t.children,o=0,a=i.length;a>o;o++)i[o].updateTransform();n&&this.textureBuffer.clear();var s=this.textureBuffer.context,u=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,s),this.renderer.resolution=u}},n.RenderTexture.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},n.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},n.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===n.WEBGL_RENDERER){var t=this.renderer.gl,e=this.textureBuffer.width,r=this.textureBuffer.height,i=new Uint8Array(4*e*r);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,r,t.RGBA,t.UNSIGNED_BYTE,i),t.bindFramebuffer(t.FRAMEBUFFER,null);var o=new n.CanvasBuffer(e,r),a=o.context.getImageData(0,0,e,r);return a.data.set(i),o.context.putImageData(a,0,0),o.canvas}return this.textureBuffer.canvas},n.RenderTexture.tempMatrix=new n.Matrix,n.VideoTexture=function(t,e){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),n.BaseTexture.call(this,t,e),this.autoUpdate=!1,this.updateBound=this._onUpdate.bind(this),t.complete||(this._onCanPlay=this.onCanPlay.bind(this),t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this.onPlayStart.bind(this)),t.addEventListener("pause",this.onPlayStop.bind(this)))},n.VideoTexture.prototype=Object.create(n.BaseTexture.prototype),n.VideoTexture.constructor=n.VideoTexture,n.VideoTexture.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this.updateBound),this.dirty())},n.VideoTexture.prototype.onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this.updateBound),this.autoUpdate=!0)},n.VideoTexture.prototype.onPlayStop=function(){this.autoUpdate=!1},n.VideoTexture.prototype.onCanPlay=function(){"canplaythrough"===event.type&&(this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.dispatchEvent({type:"loaded",content:this}))))},n.VideoTexture.prototype.destroy=function(){this.source&&this.source._pixiId&&(n.BaseTextureCache[this.source._pixiId]=null,delete n.BaseTextureCache[this.source._pixiId],this.source._pixiId=null,delete this.source._pixiId),n.BaseTexture.prototype.destroy.call(this)},n.VideoTexture.baseTextureFromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+n.TextureCacheIdGenerator++);var r=n.BaseTextureCache[t._pixiId];return r||(r=new n.VideoTexture(t,e),n.BaseTextureCache[t._pixiId]=r),r},n.VideoTexture.textureFromVideo=function(t,e){var r=n.VideoTexture.baseTextureFromVideo(t,e);return new n.Texture(r)},n.VideoTexture.fromUrl=function(t,e){var r=document.createElement("video");return r.src=t,r.autoPlay=!0,r.play(),n.VideoTexture.textureFromVideo(r,e)},n.AssetLoader=function(t,e){this.assetURLs=t,this.crossorigin=e,this.loadersByType={jpg:n.ImageLoader,jpeg:n.ImageLoader,png:n.ImageLoader,gif:n.ImageLoader,webp:n.ImageLoader,json:n.JsonLoader,atlas:n.AtlasLoader,anim:n.SpineLoader,xml:n.BitmapFontLoader,fnt:n.BitmapFontLoader}},n.EventTarget.mixin(n.AssetLoader.prototype),n.AssetLoader.prototype.constructor=n.AssetLoader,n.AssetLoader.prototype._getDataType=function(t){var e="data:",n=t.slice(0,e.length).toLowerCase();if(n===e){var r=t.slice(e.length),i=r.indexOf(",");if(-1===i)return null;var o=r.slice(0,i).split(";")[0];return o&&"text/plain"!==o.toLowerCase()?o.split("/").pop().toLowerCase():"txt"}return null},n.AssetLoader.prototype.load=function(){function t(t){e.onAssetLoaded(t.data.content)}var e=this;this.loadCount=this.assetURLs.length;for(var n=0;n<this.assetURLs.length;n++){var r=this.assetURLs[n],i=this._getDataType(r);i||(i=r.split("?").shift().split(".").pop().toLowerCase());var o=this.loadersByType[i];if(!o)throw new Error(i+" is an unsupported file type");var a=new o(r,this.crossorigin);a.on("loaded",t),a.load()}},n.AssetLoader.prototype.onAssetLoaded=function(t){this.loadCount--,this.emit("onProgress",{content:this,loader:t,loaded:this.assetURLs.length-this.loadCount,total:this.assetURLs.length
}),this.onProgress&&this.onProgress(t),this.loadCount||(this.emit("onComplete",{content:this}),this.onComplete&&this.onComplete())},n.JsonLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.loaded=!1},n.JsonLoader.prototype.constructor=n.JsonLoader,n.EventTarget.mixin(n.JsonLoader.prototype),n.JsonLoader.prototype.load=function(){window.XDomainRequest&&this.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=this.onError.bind(this),this.ajaxRequest.ontimeout=this.onError.bind(this),this.ajaxRequest.onprogress=function(){},this.ajaxRequest.onload=this.onJSONLoaded.bind(this)):(window.XMLHttpRequest?this.ajaxRequest=new window.XMLHttpRequest:this.ajaxRequest=new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onreadystatechange=this.onReadyStateChanged.bind(this)),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},n.JsonLoader.prototype.onReadyStateChanged=function(){4!==this.ajaxRequest.readyState||200!==this.ajaxRequest.status&&-1!==window.location.href.indexOf("http")||this.onJSONLoaded()},n.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames&&this.json.meta&&this.json.meta.image){var t=this.json.meta.image;-1===t.indexOf("data:")&&(t=this.baseUrl+t);var e=new n.ImageLoader(t,this.crossorigin),i=this.json.frames;this.texture=e.texture.baseTexture,e.addEventListener("loaded",this.onLoaded.bind(this));for(var o in i){var a=i[o].frame;if(a){var s=new n.Rectangle(a.x,a.y,a.w,a.h),u=s.clone(),c=null;if(i[o].trimmed){var l=i[o].sourceSize,f=i[o].spriteSourceSize;c=new n.Rectangle(f.x,f.y,l.w,l.h)}n.TextureCache[o]=new n.Texture(this.texture,s,u,c)}}e.load()}else if(this.json.bones)if(n.AnimCache[this.url])this.onLoaded();else{var h=this.url.substr(0,this.url.lastIndexOf("."))+".atlas",p=new n.JsonLoader(h,this.crossorigin),d=this;p.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();var t=new n.SpineTextureLoader(this.url.substring(0,this.url.lastIndexOf("/"))),e=new r.Atlas(this.ajaxRequest.responseText,t),i=new r.AtlasAttachmentLoader(e),o=new r.SkeletonJson(i),a=o.readSkeletonData(d.json);n.AnimCache[d.url]=a,d.spine=a,d.spineAtlas=e,d.spineAtlasLoader=p,t.loadingCount>0?t.addEventListener("loadedBaseTexture",function(t){t.content.content.loadingCount<=0&&d.onLoaded()}):d.onLoaded()},p.load()}else this.onLoaded()},n.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},n.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},n.AtlasLoader=function(t,e){this.url=t,this.baseUrl=t.replace(/[^\/]*$/,""),this.crossorigin=e,this.loaded=!1},n.AtlasLoader.constructor=n.AtlasLoader,n.EventTarget.mixin(n.AtlasLoader.prototype),n.AtlasLoader.prototype.load=function(){this.ajaxRequest=new n.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},n.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var t=this.ajaxRequest.responseText.split(/\r?\n/),e=-3,r=0,i=null,o=!1,a=0,s=0,u=this.onLoaded.bind(this);for(a=0;a<t.length;a++)if(t[a]=t[a].replace(/^\s+|\s+$/g,""),""===t[a]&&(o=a+1),t[a].length>0){if(o===a)this.atlas.meta.image.push(t[a]),r=this.atlas.meta.image.length-1,this.atlas.frames.push({}),e=-3;else if(e>0)if(e%7===1)null!=i&&(this.atlas.frames[r][i.name]=i),i={name:t[a],frame:{}};else{var c=t[a].split(" ");if(e%7===3)i.frame.x=Number(c[1].replace(",","")),i.frame.y=Number(c[2]);else if(e%7===4)i.frame.w=Number(c[1].replace(",","")),i.frame.h=Number(c[2]);else if(e%7===5){var l={x:0,y:0,w:Number(c[1].replace(",","")),h:Number(c[2])};l.w>i.frame.w||l.h>i.frame.h?(i.trimmed=!0,i.realSize=l):i.trimmed=!1}}e++}if(null!=i&&(this.atlas.frames[r][i.name]=i),this.atlas.meta.image.length>0){for(this.images=[],s=0;s<this.atlas.meta.image.length;s++){var f=this.baseUrl+this.atlas.meta.image[s],h=this.atlas.frames[s];this.images.push(new n.ImageLoader(f,this.crossorigin));for(a in h){var p=h[a].frame;p&&(n.TextureCache[a]=new n.Texture(this.images[s].texture.baseTexture,{x:p.x,y:p.y,width:p.w,height:p.h}),h[a].trimmed&&(n.TextureCache[a].realSize=h[a].realSize,n.TextureCache[a].trim.x=0,n.TextureCache[a].trim.y=0))}}for(this.currentImageId=0,s=0;s<this.images.length;s++)this.images[s].on("loaded",u);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},n.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.emit("loaded",{content:this}))},n.AtlasLoader.prototype.onError=function(){this.emit("error",{content:this})},n.SpriteSheetLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},n.SpriteSheetLoader.prototype.constructor=n.SpriteSheetLoader,n.EventTarget.mixin(n.SpriteSheetLoader.prototype),n.SpriteSheetLoader.prototype.load=function(){var t=this,e=new n.JsonLoader(this.url,this.crossorigin);e.on("loaded",function(e){t.json=e.data.content.json,t.onLoaded()}),e.load()},n.SpriteSheetLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},n.ImageLoader=function(t,e){this.texture=n.Texture.fromImage(t,e),this.frames=[]},n.ImageLoader.prototype.constructor=n.ImageLoader,n.EventTarget.mixin(n.ImageLoader.prototype),n.ImageLoader.prototype.load=function(){this.texture.baseTexture.hasLoaded?this.onLoaded():this.texture.baseTexture.on("loaded",this.onLoaded.bind(this))},n.ImageLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},n.ImageLoader.prototype.loadFramedSpriteSheet=function(t,e,r){this.frames=[];for(var i=Math.floor(this.texture.width/t),o=Math.floor(this.texture.height/e),a=0,s=0;o>s;s++)for(var u=0;i>u;u++,a++){var c=new n.Texture(this.texture.baseTexture,{x:u*t,y:s*e,width:t,height:e});this.frames.push(c),r&&(n.TextureCache[r+"-"+a]=c)}this.load()},n.BitmapFontLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null},n.BitmapFontLoader.prototype.constructor=n.BitmapFontLoader,n.EventTarget.mixin(n.BitmapFontLoader.prototype),n.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new n.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onXMLLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},n.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var t=this.ajaxRequest.responseXML;if(!t||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){var e=new DOMParser;t=e.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=this.ajaxRequest.responseText,t=r}var i=this.baseUrl+t.getElementsByTagName("page")[0].getAttribute("file"),o=new n.ImageLoader(i,this.crossorigin);this.texture=o.texture.baseTexture;var a={},s=t.getElementsByTagName("info")[0],u=t.getElementsByTagName("common")[0];a.font=s.getAttribute("face"),a.size=parseInt(s.getAttribute("size"),10),a.lineHeight=parseInt(u.getAttribute("lineHeight"),10),a.chars={};for(var c=t.getElementsByTagName("char"),l=0;l<c.length;l++){var f=parseInt(c[l].getAttribute("id"),10),h=new n.Rectangle(parseInt(c[l].getAttribute("x"),10),parseInt(c[l].getAttribute("y"),10),parseInt(c[l].getAttribute("width"),10),parseInt(c[l].getAttribute("height"),10));a.chars[f]={xOffset:parseInt(c[l].getAttribute("xoffset"),10),yOffset:parseInt(c[l].getAttribute("yoffset"),10),xAdvance:parseInt(c[l].getAttribute("xadvance"),10),kerning:{},texture:n.TextureCache[f]=new n.Texture(this.texture,h)}}var p=t.getElementsByTagName("kerning");for(l=0;l<p.length;l++){var d=parseInt(p[l].getAttribute("first"),10),m=parseInt(p[l].getAttribute("second"),10),v=parseInt(p[l].getAttribute("amount"),10);a.chars[m].kerning[d]=v}n.BitmapText.fonts[a.font]=a,o.addEventListener("loaded",this.onLoaded.bind(this)),o.load()}},n.BitmapFontLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},n.SpineLoader=function(t,e){this.url=t,this.crossorigin=e,this.loaded=!1},n.SpineLoader.prototype.constructor=n.SpineLoader,n.EventTarget.mixin(n.SpineLoader.prototype),n.SpineLoader.prototype.load=function(){var t=this,e=new n.JsonLoader(this.url,this.crossorigin);e.on("loaded",function(e){t.json=e.data.content.json,t.onLoaded()}),e.load()},n.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.emit("loaded",{content:this})},n.AbstractFilter=function(t,e){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=e||{},this.fragmentSrc=t||[]},n.AbstractFilter.prototype.constructor=n.AbstractFilter,n.AbstractFilter.prototype.syncUniforms=function(){for(var t=0,e=this.shaders.length;e>t;t++)this.shaders[t].dirty=!0},n.AlphaMaskFilter=function(t){n.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:t},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mask.value.x=t.width,this.uniforms.mask.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},n.AlphaMaskFilter.prototype=Object.create(n.AbstractFilter.prototype),n.AlphaMaskFilter.prototype.constructor=n.AlphaMaskFilter,n.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(n.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}}),n.ColorMatrixFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},n.ColorMatrixFilter.prototype=Object.create(n.AbstractFilter.prototype),n.ColorMatrixFilter.prototype.constructor=n.ColorMatrixFilter,Object.defineProperty(n.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=t}}),n.GrayFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},n.GrayFilter.prototype=Object.create(n.AbstractFilter.prototype),n.GrayFilter.prototype.constructor=n.GrayFilter,Object.defineProperty(n.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}),n.DisplacementFilter=function(t){n.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:t},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=t.width,this.uniforms.mapDimensions.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},n.DisplacementFilter.prototype=Object.create(n.AbstractFilter.prototype),n.DisplacementFilter.prototype.constructor=n.DisplacementFilter,n.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(n.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(t){this.uniforms.displacementMap.value=t}}),Object.defineProperty(n.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}}),Object.defineProperty(n.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}),n.PixelateFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new n.Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},n.PixelateFilter.prototype=Object.create(n.AbstractFilter.prototype),n.PixelateFilter.prototype.constructor=n.PixelateFilter,Object.defineProperty(n.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.dirty=!0,this.uniforms.pixelSize.value=t}}),n.BlurXFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},n.BlurXFilter.prototype=Object.create(n.AbstractFilter.prototype),n.BlurXFilter.prototype.constructor=n.BlurXFilter,Object.defineProperty(n.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.dirty=!0,this.uniforms.blur.value=1/7e3*t}}),n.BlurYFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},n.BlurYFilter.prototype=Object.create(n.AbstractFilter.prototype),n.BlurYFilter.prototype.constructor=n.BlurYFilter,Object.defineProperty(n.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),n.BlurFilter=function(){this.blurXFilter=new n.BlurXFilter,this.blurYFilter=new n.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},n.BlurFilter.prototype=Object.create(n.AbstractFilter.prototype),n.BlurFilter.prototype.constructor=n.BlurFilter,Object.defineProperty(n.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}}),Object.defineProperty(n.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}}),Object.defineProperty(n.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}),n.InvertFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},n.InvertFilter.prototype=Object.create(n.AbstractFilter.prototype),n.InvertFilter.prototype.constructor=n.InvertFilter,Object.defineProperty(n.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}),n.SepiaFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},n.SepiaFilter.prototype=Object.create(n.AbstractFilter.prototype),n.SepiaFilter.prototype.constructor=n.SepiaFilter,Object.defineProperty(n.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}),n.TwistFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},n.TwistFilter.prototype=Object.create(n.AbstractFilter.prototype),n.TwistFilter.prototype.constructor=n.TwistFilter,Object.defineProperty(n.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.dirty=!0,this.uniforms.offset.value=t}}),Object.defineProperty(n.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(t){this.dirty=!0,this.uniforms.radius.value=t}}),Object.defineProperty(n.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),n.ColorStepFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},n.ColorStepFilter.prototype=Object.create(n.AbstractFilter.prototype),n.ColorStepFilter.prototype.constructor=n.ColorStepFilter,Object.defineProperty(n.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}),n.DotScreenFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},n.DotScreenFilter.prototype=Object.create(n.AbstractFilter.prototype),n.DotScreenFilter.prototype.constructor=n.DotScreenFilter,Object.defineProperty(n.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.dirty=!0,this.uniforms.scale.value=t}}),Object.defineProperty(n.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),n.CrossHatchFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},n.CrossHatchFilter.prototype=Object.create(n.AbstractFilter.prototype),n.CrossHatchFilter.prototype.constructor=n.CrossHatchFilter,Object.defineProperty(n.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),n.RGBSplitFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},n.RGBSplitFilter.prototype=Object.create(n.AbstractFilter.prototype),n.RGBSplitFilter.prototype.constructor=n.RGBSplitFilter,Object.defineProperty(n.RGBSplitFilter.prototype,"red",{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}}),Object.defineProperty(n.RGBSplitFilter.prototype,"green",{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}}),Object.defineProperty(n.RGBSplitFilter.prototype,"blue",{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}),"undefined"!=typeof t&&t.exports&&(e=t.exports=n),e.PIXI=n}).call(this)},function(t,e,n){"use strict";function r(t){return Object.prototype.hasOwnProperty.call(t,m)||(t[m]=p++,f[t[m]]={}),f[t[m]]}var i=n(10),o=n(33),a=n(88),s=n(181),u=n(98),c=n(3),l=n(72),f={},h=!1,p=0,d={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),v=c({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=t}},setEnabled:function(t){v.ReactEventListener&&v.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var n=e,o=r(n),s=a.registrationNameDependencies[t],u=i.topLevelTypes,c=0,f=s.length;f>c;c++){var h=s[c];o.hasOwnProperty(h)&&o[h]||(h===u.topWheel?l("wheel")?v.ReactEventListener.trapBubbledEvent(u.topWheel,"wheel",n):l("mousewheel")?v.ReactEventListener.trapBubbledEvent(u.topWheel,"mousewheel",n):v.ReactEventListener.trapBubbledEvent(u.topWheel,"DOMMouseScroll",n):h===u.topScroll?l("scroll",!0)?v.ReactEventListener.trapCapturedEvent(u.topScroll,"scroll",n):v.ReactEventListener.trapBubbledEvent(u.topScroll,"scroll",v.ReactEventListener.WINDOW_HANDLE):h===u.topFocus||h===u.topBlur?(l("focus",!0)?(v.ReactEventListener.trapCapturedEvent(u.topFocus,"focus",n),v.ReactEventListener.trapCapturedEvent(u.topBlur,"blur",n)):l("focusin")&&(v.ReactEventListener.trapBubbledEvent(u.topFocus,"focusin",n),v.ReactEventListener.trapBubbledEvent(u.topBlur,"focusout",n)),o[u.topBlur]=!0,o[u.topFocus]=!0):d.hasOwnProperty(h)&&v.ReactEventListener.trapBubbledEvent(h,d[h],n),o[h]=!0)}},trapBubbledEvent:function(t,e,n){return v.ReactEventListener.trapBubbledEvent(t,e,n)},trapCapturedEvent:function(t,e,n){return v.ReactEventListener.trapCapturedEvent(t,e,n)},ensureScrollValueMonitoring:function(){if(!h){var t=u.refreshScrollValues;v.ReactEventListener.monitorScrollValue(t),h=!0}},eventNameDispatchConfigs:o.eventNameDispatchConfigs,registrationNameModules:o.registrationNameModules,putListener:o.putListener,getListener:o.getListener,deleteListener:o.deleteListener,deleteAllListeners:o.deleteAllListeners});t.exports=v},function(t,e,n){(function(e){"use strict";function r(t){return p+t.toString(36)}function i(t,e){return t.charAt(e)===p||e===t.length}function o(t){return""===t||t.charAt(0)===p&&t.charAt(t.length-1)!==p}function a(t,e){return 0===e.indexOf(t)&&i(e,t.length)}function s(t){return t?t.substr(0,t.lastIndexOf(p)):""}function u(t,n){if("production"!==e.env.NODE_ENV?h(o(t)&&o(n),"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",t,n):h(o(t)&&o(n)),"production"!==e.env.NODE_ENV?h(a(t,n),"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",t,n):h(a(t,n)),t===n)return t;var r,s=t.length+d;for(r=s;r<n.length&&!i(n,r);r++);return n.substr(0,r)}function c(t,n){var r=Math.min(t.length,n.length);if(0===r)return"";for(var a=0,s=0;r>=s;s++)if(i(t,s)&&i(n,s))a=s;else if(t.charAt(s)!==n.charAt(s))break;var u=t.substr(0,a);return"production"!==e.env.NODE_ENV?h(o(u),"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",t,n,u):h(o(u)),u}function l(t,n,r,i,o,c){t=t||"",n=n||"","production"!==e.env.NODE_ENV?h(t!==n,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",t):h(t!==n);var l=a(n,t);"production"!==e.env.NODE_ENV?h(l||a(t,n),"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",t,n):h(l||a(t,n));for(var f=0,p=l?s:u,d=t;;d=p(d,n)){var v;if(o&&d===t||c&&d===n||(v=r(d,l,i)),v===!1||d===n)break;"production"!==e.env.NODE_ENV?h(f++<m,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",t,n):h(f++<m)}}var f=n(97),h=n(2),p=".",d=p.length,m=100,v={createReactRootID:function(){return r(f.createReactRootIndex())},createReactID:function(t,e){return t+e},getReactRootIDFromNodeID:function(t){if(t&&t.charAt(0)===p&&t.length>1){var e=t.indexOf(p,1);

return e>-1?t.substr(0,e):t}return null},traverseEnterLeave:function(t,e,n,r,i){var o=c(t,e);o!==t&&l(t,o,n,r,!1,!0),o!==e&&l(o,e,n,i,!0,!1)},traverseTwoPhase:function(t,e,n){t&&(l("",t,e,n,!0,!1),l(t,"",e,n,!1,!0))},traverseAncestors:function(t,e,n){l("",t,e,n,!0,!1)},_getFirstCommonAncestorID:c,_getNextDescendantID:u,isAncestorIDOf:a,SEPARATOR:p};t.exports=v}).call(e,n(1))},function(t,e,n){"use strict";var r={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,e){t._reactInternalInstance=e}};t.exports=r},function(t,e,n){(function(e){"use strict";function r(){i.attachRefs(this,this._currentElement)}var i=n(187),o=n(35),a={mountComponent:function(t,n,i,a){var s=t.mountComponent(n,i,a);return"production"!==e.env.NODE_ENV&&o.checkAndWarnForMutatedProps(t._currentElement),i.getReactMountReady().enqueue(r,t),s},unmountComponent:function(t){i.detachRefs(t,t._currentElement),t.unmountComponent()},receiveComponent:function(t,n,a,s){var u=t._currentElement;if(n!==u||null==n._owner){"production"!==e.env.NODE_ENV&&o.checkAndWarnForMutatedProps(n);var c=i.shouldUpdateRefs(u,n);c&&i.detachRefs(t,u),t.receiveComponent(n,a,s),c&&a.getReactMountReady().enqueue(r,t)}},performUpdateIfNecessary:function(t,e){t.performUpdateIfNecessary(e)}};t.exports=a}).call(e,n(1))},function(t,e,n){(function(e){"use strict";var r=n(739),i={};i.VERSION="0.2.1",i.sampleRate=44100,i.use=function(){e.AnalyserNode=i.AnalyserNode.exports,e.AudioBuffer=i.AudioBuffer.exports,e.AudioBufferSourceNode=i.AudioBufferSourceNode.exports,e.AudioContext=i.AudioContext,e.AudioDestinationNode=i.AudioDestinationNode.exports,e.AudioListener=i.AudioListener.exports,e.AudioNode=i.AudioNode.exports,e.AudioParam=i.AudioParam.exports,e.AudioProcessingEvent=i.AudioProcessingEvent.exports,e.BiquadFilterNode=i.BiquadFilterNode.exports,e.ChannelMergerNode=i.ChannelMergerNode.exports,e.ChannelSplitterNode=i.ChannelSplitterNode.exports,e.ConvolverNode=i.ConvolverNode.exports,e.DelayNode=i.DelayNode.exports,e.DynamicsCompressorNode=i.DynamicsCompressorNode.exports,e.GainNode=i.GainNode.exports,e.MediaElementAudioSourceNode=i.MediaElementAudioSourceNode.exports,e.MediaStreamAudioDestinationNode=i.MediaStreamAudioDestinationNode.exports,e.MediaStreamAudioSourceNode=i.MediaStreamAudioSourceNode.exports,e.OfflineAudioCompletionEvent=i.OfflineAudioCompletionEvent.exports,e.OfflineAudioContext=i.OfflineAudioContext,e.OscillatorNode=i.OscillatorNode.exports,e.PannerNode=i.PannerNode.exports,e.PeriodicWave=i.PeriodicWave.exports,e.ScriptProcessorNode=i.ScriptProcessorNode.exports,e.WaveShaperNode=i.WaveShaperNode.exports},i.unuse=function(){e.AnalyserNode=r.AnalyserNode,e.AudioBuffer=r.AudioBuffer,e.AudioBufferSourceNode=r.AudioBufferSourceNode,e.AudioContext=r.AudioContext,e.AudioDestinationNode=r.AudioDestinationNode,e.AudioListener=r.AudioListener,e.AudioNode=r.AudioNode,e.AudioParam=r.AudioParam,e.AudioProcessingEvent=r.AudioProcessingEvent,e.BiquadFilterNode=r.BiquadFilterNode,e.ChannelMergerNode=r.ChannelMergerNode,e.ChannelSplitterNode=r.ChannelSplitterNode,e.ConvolverNode=r.ConvolverNode,e.DelayNode=r.DelayNode,e.DynamicsCompressorNode=r.DynamicsCompressorNode,e.GainNode=r.GainNode,e.MediaElementAudioSourceNode=r.MediaElementAudioSourceNode,e.MediaStreamAudioDestinationNode=r.MediaStreamAudioDestinationNode,e.MediaStreamAudioSourceNode=r.MediaStreamAudioSourceNode,e.OfflineAudioCompletionEvent=r.OfflineAudioCompletionEvent,e.OfflineAudioContext=r.OfflineAudioContext,e.OscillatorNode=r.OscillatorNode,e.PannerNode=r.PannerNode,e.PeriodicWave=r.PeriodicWave,e.ScriptProcessorNode=r.ScriptProcessorNode,e.WaveShaperNode=r.WaveShaperNode},t.exports=i}).call(e,function(){return this}())},function(t,e,n){"use strict";var r={};r.NOP=function(){},r.inherits=n(744),r.defaults=n(742),r.article=n(423),r.name=n(462),r.toJSON=n(747),r.toMicroseconds=n(463),r.toSeconds=n(748),r.typeCheck=n(425),r.formatter=n(424),r.defineAttribute=n(743),t.exports=r},function(t,e,n){"use strict";function r(){var t=void 0===arguments[0]?function(t){return t}:arguments[0],e=new l.Bus,n=function(){if(h)throw new Error("An action should not fire another action!");try{var n=t.apply(null,arguments);h=!0,e.push(n)}finally{h=!1}};return n.bus=e,n.debug=function(t){return e.map(function(e){return[t,e]}).log(),n},n}function i(t){var e=void 0===arguments[1]?{}:arguments[1],n=!!e.lazy;return t=o(t),t.get=function(){var e=void 0,n=t.onValue(function(t){return e=t});return setTimeout(n),e},n||t.onValue(function(){}),t}function o(t){if(t instanceof l.Property)return t;if(t instanceof l.EventStream)throw new Error("Please convert Bacon.EventStream to Bacon.Property first.");if(t&&"object"==typeof t)return l.combineTemplate(t);throw new Error("Expected a Bacon.Property or a template.")}var a=function(t){return t&&t.__esModule?t["default"]:t},s=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},c=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};e.Action=r,e.Store=i,Object.defineProperty(e,"__esModule",{value:!0});var l=a(n(78)),f=a(n(6));e.Bacon=l;{var h=!1;e.Binding=function(t){function e(){c(this,e),null!=t&&t.apply(this,arguments)}return u(e,t),s(e,{render:{value:function(){return null}},componentDidMount:{value:function(){var t=this;this._unsubscribe=this.props.store.onValue(function(e){return t.props.onChange(e)})}},componentWillUnmount:{value:function(){this._unsubscribe()}}}),e}(f.Component)}},function(t,e,n){t.exports=function(t,e,n,r,i){this.confidence=n,this.name=r||e.name(t),this.lang=i}},function(t,e,n){(function(e){"use strict";function r(t,e){return null==e||i.hasBooleanValue[t]&&!e||i.hasNumericValue[t]&&isNaN(e)||i.hasPositiveNumericValue[t]&&1>e||i.hasOverloadedBooleanValue[t]&&e===!1}var i=n(21),o=n(222),a=n(5);if("production"!==e.env.NODE_ENV)var s={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},u={},c=function(t){if(!(s.hasOwnProperty(t)&&s[t]||u.hasOwnProperty(t)&&u[t])){u[t]=!0;var n=t.toLowerCase(),r=i.isCustomAttribute(n)?n:i.getPossibleStandardName.hasOwnProperty(n)?i.getPossibleStandardName[n]:null;"production"!==e.env.NODE_ENV?a(null==r,"Unknown DOM property %s. Did you mean %s?",t,r):null}};var l={createMarkupForID:function(t){return i.ID_ATTRIBUTE_NAME+"="+o(t)},createMarkupForProperty:function(t,n){if(i.isStandardName.hasOwnProperty(t)&&i.isStandardName[t]){if(r(t,n))return"";var a=i.getAttributeName[t];return i.hasBooleanValue[t]||i.hasOverloadedBooleanValue[t]&&n===!0?a:a+"="+o(n)}return i.isCustomAttribute(t)?null==n?"":t+"="+o(n):("production"!==e.env.NODE_ENV&&c(t),null)},setValueForProperty:function(t,n,o){if(i.isStandardName.hasOwnProperty(n)&&i.isStandardName[n]){var a=i.getMutationMethod[n];if(a)a(t,o);else if(r(n,o))this.deleteValueForProperty(t,n);else if(i.mustUseAttribute[n])t.setAttribute(i.getAttributeName[n],""+o);else{var s=i.getPropertyName[n];i.hasSideEffects[n]&&""+t[s]==""+o||(t[s]=o)}}else i.isCustomAttribute(n)?null==o?t.removeAttribute(n):t.setAttribute(n,""+o):"production"!==e.env.NODE_ENV&&c(n)},deleteValueForProperty:function(t,n){if(i.isStandardName.hasOwnProperty(n)&&i.isStandardName[n]){var r=i.getMutationMethod[n];if(r)r(t,void 0);else if(i.mustUseAttribute[n])t.removeAttribute(i.getAttributeName[n]);else{var o=i.getPropertyName[n],a=i.getDefaultValueForProperty(t.nodeName,o);i.hasSideEffects[n]&&""+t[o]===a||(t[o]=a)}}else i.isCustomAttribute(n)?t.removeAttribute(n):"production"!==e.env.NODE_ENV&&c(n)}};t.exports=l}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(){var t=h&&h.traverseTwoPhase&&h.traverseEnterLeave;"production"!==e.env.NODE_ENV?u(t,"InstanceHandle not injected before use!"):u(t)}var i=n(88),o=n(55),a=n(66),s=n(67),u=n(2),c={},l=null,f=function(t){if(t){var e=o.executeDispatch,n=i.getPluginModuleForEvent(t);n&&n.executeDispatch&&(e=n.executeDispatch),o.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t)}},h=null,p={injection:{injectMount:o.injection.injectMount,injectInstanceHandle:function(t){h=t,"production"!==e.env.NODE_ENV&&r()},getInstanceHandle:function(){return"production"!==e.env.NODE_ENV&&r(),h},injectEventPluginOrder:i.injectEventPluginOrder,injectEventPluginsByName:i.injectEventPluginsByName},eventNameDispatchConfigs:i.eventNameDispatchConfigs,registrationNameModules:i.registrationNameModules,putListener:function(t,n,r){"production"!==e.env.NODE_ENV?u(!r||"function"==typeof r,"Expected %s listener to be a function, instead got type %s",n,typeof r):u(!r||"function"==typeof r);var i=c[n]||(c[n]={});i[t]=r},getListener:function(t,e){var n=c[e];return n&&n[t]},deleteListener:function(t,e){var n=c[e];n&&delete n[t]},deleteAllListeners:function(t){for(var e in c)delete c[e][t]},extractEvents:function(t,e,n,r){for(var o,s=i.plugins,u=0,c=s.length;c>u;u++){var l=s[u];if(l){var f=l.extractEvents(t,e,n,r);f&&(o=a(o,f))}}return o},enqueueEvents:function(t){t&&(l=a(l,t))},processEventQueue:function(){var t=l;l=null,s(t,f),"production"!==e.env.NODE_ENV?u(!l,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented."):u(!l)},__purge:function(){c={}},__getListenerBank:function(){return c}};t.exports=p}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(t,e,n){var r=e.dispatchConfig.phasedRegistrationNames[n];return v(t,r)}function i(t,n,i){if("production"!==e.env.NODE_ENV&&!t)throw new Error("Dispatching id must not be null");var o=n?m.bubbled:m.captured,a=r(t,i,o);a&&(i._dispatchListeners=p(i._dispatchListeners,a),i._dispatchIDs=p(i._dispatchIDs,t))}function o(t){t&&t.dispatchConfig.phasedRegistrationNames&&h.injection.getInstanceHandle().traverseTwoPhase(t.dispatchMarker,i,t)}function a(t,e,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=v(t,r);i&&(n._dispatchListeners=p(n._dispatchListeners,i),n._dispatchIDs=p(n._dispatchIDs,t))}}function s(t){t&&t.dispatchConfig.registrationName&&a(t.dispatchMarker,null,t)}function u(t){d(t,o)}function c(t,e,n,r){h.injection.getInstanceHandle().traverseEnterLeave(n,r,a,t,e)}function l(t){d(t,s)}var f=n(10),h=n(33),p=n(66),d=n(67),m=f.PropagationPhases,v=h.getListener,g={accumulateTwoPhaseDispatches:u,accumulateDirectDispatches:l,accumulateEnterLeaveDispatches:c};t.exports=g}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(){if(b.current){var t=b.current.getName();if(t)return" Check the render method of `"+t+"`."}return""}function i(t){var e=t&&t.getPublicInstance();if(!e)return void 0;var n=e.constructor;return n?n.displayName||n.name||void 0:void 0}function o(){var t=b.current;return t&&i(t)||void 0}function a(t,e){t._store.validated||null!=t.key||(t._store.validated=!0,u('Each child in an array or iterator should have a unique "key" prop.',t,e))}function s(t,e,n){S.test(t)&&u("Child objects should have non-numeric keys so ordering is preserved.",e,n)}function u(t,n,r){var a=o(),s="string"==typeof r?r:r.displayName||r.name,u=a||s,c=T[t]||(T[t]={});if(!c.hasOwnProperty(u)){c[u]=!0;var l=a?" Check the render method of "+a+".":s?" Check the React.render call using <"+s+">.":"",f="";if(n&&n._owner&&n._owner!==b.current){var h=i(n._owner);f=" It was passed a child from "+h+"."}"production"!==e.env.NODE_ENV?E(!1,t+"%s%s See http://fb.me/react-warning-keys for more information.",l,f):null}}function c(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];m.isValidElement(r)&&a(r,e)}else if(m.isValidElement(t))t._store.validated=!0;else if(t){var i=w(t);if(i){if(i!==t.entries)for(var o,u=i.call(t);!(o=u.next()).done;)m.isValidElement(o.value)&&a(o.value,e)}else if("object"==typeof t){var c=v.extractIfFragment(t);for(var l in c)c.hasOwnProperty(l)&&s(l,c[l],e)}}}function l(t,n,i,o){for(var a in n)if(n.hasOwnProperty(a)){var s;try{"production"!==e.env.NODE_ENV?x("function"==typeof n[a],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",t||"React class",y[o],a):x("function"==typeof n[a]),s=n[a](i,a,t,o)}catch(u){s=u}if(s instanceof Error&&!(s.message in C)){C[s.message]=!0;var c=r(this);"production"!==e.env.NODE_ENV?E(!1,"Failed propType: %s%s",s.message,c):null}}}function f(t,n){var r=n.type,i="string"==typeof r?r:r.displayName,o=n._owner?n._owner.getPublicInstance().constructor.displayName:null,a=t+"|"+i+"|"+o;if(!A.hasOwnProperty(a)){A[a]=!0;var s="";i&&(s=" <"+i+" />");var u="";o&&(u=" The element was created by "+o+"."),"production"!==e.env.NODE_ENV?E(!1,"Don't set .props.%s of the React component%s. Instead, specify the correct value when initially creating the element or use React.cloneElement to make a new element with updated props.%s",t,s,u):null}}function h(t,e){return t!==t?e!==e:0===t&&0===e?1/t===1/e:t===e}function p(t){if(t._store){var e=t._store.originalProps,n=t.props;for(var r in n)n.hasOwnProperty(r)&&(e.hasOwnProperty(r)&&h(e[r],n[r])||(f(r,t),e[r]=n[r]))}}function d(t){if(null!=t.type){var n=_.getComponentClassForElement(t),r=n.displayName||n.name;n.propTypes&&l(r,n.propTypes,t.props,g.prop),"function"==typeof n.getDefaultProps&&("production"!==e.env.NODE_ENV?E(n.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead."):null)}}var m=n(4),v=n(41),g=n(64),y=n(43),b=n(17),_=n(42),w=n(103),x=n(2),E=n(5),T={},C={},S=/^\d+$/,A={},k={checkAndWarnForMutatedProps:p,createElement:function(t,n,r){"production"!==e.env.NODE_ENV?E(null!=t,"React.createElement: type should not be null or undefined. It should be a string (for DOM elements) or a ReactClass (for composite components)."):null;var i=m.createElement.apply(this,arguments);if(null==i)return i;for(var o=2;o<arguments.length;o++)c(arguments[o],t);return d(i),i},createFactory:function(t){var n=k.createElement.bind(null,t);if(n.type=t,"production"!==e.env.NODE_ENV)try{Object.defineProperty(n,"type",{enumerable:!1,get:function(){return"production"!==e.env.NODE_ENV?E(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."):null,Object.defineProperty(this,"type",{value:t}),t}})}catch(r){}return n},cloneElement:function(t,e,n){for(var r=m.cloneElement.apply(this,arguments),i=2;i<arguments.length;i++)c(arguments[i],r.type);return d(r),r}};t.exports=k}).call(e,n(1))},function(t,e,n){"use strict";function r(t,e,n){i.call(this,t,e,n)}var i=n(22),o=n(70),a={view:function(t){if(t.view)return t.view;var e=o(t);if(null!=e&&e.window===e)return e;var n=e.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(t){return t.detail||0}};i.augmentClass(r,a),t.exports=r},function(t,e,n){(function(e){"use strict";var r=n(2),i=function(t){var n,i={};"production"!==e.env.NODE_ENV?r(t instanceof Object&&!Array.isArray(t),"keyMirror(...): Argument must be an object."):r(t instanceof Object&&!Array.isArray(t));for(n in t)t.hasOwnProperty(n)&&(i[n]=n);return i};t.exports=i}).call(e,n(1))},function(t,e,n){function r(t){var e=this;return new Promise(function(n,r){function o(e){var n;try{n=t.next(e)}catch(i){return r(i)}s(n)}function a(e){var n;try{n=t["throw"](e)}catch(i){return r(i)}s(n)}function s(t){if(t.done)return n(t.value);var r=i.call(e,t.value);return r&&u(r)?r.then(o,a):a(new TypeError('You may only yield a function, promise, generator, array, or object, but the following object was passed: "'+String(t.value)+'"'))}return"function"==typeof t&&(t=t.call(e)),t&&"function"==typeof t.next?void o():n(t)})}function i(t){return t?u(t)?t:l(t)||c(t)?r.call(this,t):"function"==typeof t?o.call(this,t):Array.isArray(t)?a.call(this,t):f(t)?s.call(this,t):t:t}function o(t){var e=this;return new Promise(function(n,r){t.call(e,function(t,e){return t?r(t):(arguments.length>2&&(e=h.call(arguments,1)),void n(e))})})}function a(t){return Promise.all(t.map(i,this))}function s(t){function e(t,e){n[e]=void 0,o.push(t.then(function(t){n[e]=t}))}for(var n=new t.constructor,r=Object.keys(t),o=[],a=0;a<r.length;a++){var s=r[a],c=i.call(this,t[s]);c&&u(c)?e(c,s):n[s]=t[s]}return Promise.all(o).then(function(){return n})}function u(t){return"function"==typeof t.then}function c(t){return"function"==typeof t.next&&"function"==typeof t["throw"]}function l(t){var e=t.constructor;return e?"GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName?!0:c(e.prototype):!1}function f(t){return Object==t.constructor}var h=Array.prototype.slice;t.exports=r["default"]=r.co=r,r.wrap=function(t){function e(){return r.call(this,t.apply(this,arguments))}return e.__generatorFunction__=t,e}},function(t,e,n){/*!
	  Copyright (c) 2015 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
function r(){for(var t,e="",n=0;n<arguments.length;n++)if(t=arguments[n])if("string"==typeof t||"number"==typeof t)e+=" "+t;else if("[object Array]"===Object.prototype.toString.call(t))e+=" "+r.apply(null,t);else if("object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&t[i]&&(e+=" "+i);return e.substr(1)}var i,o;"undefined"!=typeof t&&t.exports&&(t.exports=r),i=[],o=function(){return r}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var r=n(101),i={componentDidMount:function(){this.props.autoFocus&&r(this.getDOMNode())}};t.exports=i},function(t,e,n){(function(e){"use strict";var r=n(4),i=n(5);if("production"!==e.env.NODE_ENV){var o="_reactFragment",a="_reactDidWarn",s=!1;try{var u=function(){return 1};Object.defineProperty({},o,{enumerable:!1,value:!0}),Object.defineProperty({},"key",{enumerable:!0,get:u}),s=!0}catch(c){}var l=function(t,n){Object.defineProperty(t,n,{enumerable:!0,get:function(){return"production"!==e.env.NODE_ENV?i(this[a],"A ReactFragment is an opaque type. Accessing any of its properties is deprecated. Pass it to one of the React.Children helpers."):null,this[a]=!0,this[o][n]},set:function(t){"production"!==e.env.NODE_ENV?i(this[a],"A ReactFragment is an immutable opaque type. Mutating its properties is deprecated."):null,this[a]=!0,this[o][n]=t}})},f={},h=function(t){var e="";for(var n in t)e+=n+":"+typeof t[n]+",";var r=!!f[e];return f[e]=!0,r}}var p={create:function(t){if("production"!==e.env.NODE_ENV){if("object"!=typeof t||!t||Array.isArray(t))return"production"!==e.env.NODE_ENV?i(!1,"React.addons.createFragment only accepts a single object.",t):null,t;if(r.isValidElement(t))return"production"!==e.env.NODE_ENV?i(!1,"React.addons.createFragment does not accept a ReactElement without a wrapper object."):null,t;if(s){var n={};Object.defineProperty(n,o,{enumerable:!1,value:t}),Object.defineProperty(n,a,{writable:!0,enumerable:!1,value:!1});for(var u in t)l(n,u);return Object.preventExtensions(n),n}}return t},extract:function(t){return"production"!==e.env.NODE_ENV&&s?t[o]?t[o]:("production"!==e.env.NODE_ENV?i(h(t),"Any use of a keyed object should be wrapped in React.addons.createFragment(object) before being passed as a child."):null,t):t},extractIfFragment:function(t){if("production"!==e.env.NODE_ENV&&s){if(t[o])return t[o];for(var n in t)if(t.hasOwnProperty(n)&&r.isValidElement(t[n]))return p.extract(t)}return t}};t.exports=p}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(t){if("function"==typeof t.type)return t.type;var e=t.type,n=f[e];return null==n&&(f[e]=n=c(e)),n}function i(t){return"production"!==e.env.NODE_ENV?u(l,"There is no registered component for the tag %s",t.type):u(l),new l(t.type,t.props)}function o(t){return new h(t)}function a(t){return t instanceof h}var s=n(3),u=n(2),c=null,l=null,f={},h=null,p={injectGenericComponentClass:function(t){l=t},injectTextComponentClass:function(t){h=t},injectComponentClasses:function(t){s(f,t)},injectAutoWrapper:function(t){c=t}},d={getComponentClassForElement:r,createInternalComponent:i,createInstanceForText:o,isTextComponent:a,injection:p};t.exports=d}).call(e,n(1))},function(t,e,n){(function(e){"use strict";var n={};"production"!==e.env.NODE_ENV&&(n={prop:"prop",context:"context",childContext:"child context"}),t.exports=n}).call(e,n(1))},function(t,e,n){"use strict";function r(t,e,n){i.call(this,t,e,n)}var i=n(36),o=n(98),a=n(69),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+o.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+o.currentScrollTop}};i.augmentClass(r,s),t.exports=r},function(t,e,n){(function(e){"use strict";var r=n(2),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,n,i,o,a,s,u,c){"production"!==e.env.NODE_ENV?r(!this.isInTransaction(),"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction."):r(!this.isInTransaction());var l,f;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),f=t.call(n,i,o,a,s,u,c),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(h){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return f},initializeAll:function(t){for(var e=this.transactionWrappers,n=t;n<e.length;n++){var r=e[n];try{this.wrapperInitData[n]=o.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(i){}}}},closeAll:function(t){"production"!==e.env.NODE_ENV?r(this.isInTransaction(),"Transaction.closeAll(): Cannot close transaction when none are open."):r(this.isInTransaction());for(var n=this.transactionWrappers,i=t;i<n.length;i++){var a,s=n[i],u=this.wrapperInitData[i];try{a=!0,u!==o.OBSERVED_ERROR&&s.close&&s.close.call(this,u),a=!1}finally{if(a)try{this.closeAll(i+1)}catch(c){}}}this.wrapperInitData.length=0}},o={Mixin:i,OBSERVED_ERROR:{}};t.exports=o}).call(e,n(1))},function(t,e,n){(function(e){"use strict";var n={};"production"!==e.env.NODE_ENV&&Object.freeze(n),t.exports=n}).call(e,n(1))},function(t,e,n){"use strict";function r(t){return o[t]}function i(t){return(""+t).replace(a,r)}var o={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},a=/[&><"']/g;t.exports=i},function(t,e,n){(function(t,r){function i(t,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(n)?r.showHidden=n:n&&e._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,n,r){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return b(i)||(i=u(t,i,r)),i}var o=c(t,n);if(o)return o;var a=Object.keys(n),m=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),C(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(n);if(0===a.length){if(S(n)){var v=n.name?": "+n.name:"";return t.stylize("[Function"+v+"]","special")}if(x(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return t.stylize(Date.prototype.toString.call(n),"date");if(C(n))return l(n)}var g="",y=!1,_=["{","}"];if(d(n)&&(y=!0,_=["[","]"]),S(n)){var w=n.name?": "+n.name:"";g=" [Function"+w+"]"}if(x(n)&&(g=" "+RegExp.prototype.toString.call(n)),T(n)&&(g=" "+Date.prototype.toUTCString.call(n)),C(n)&&(g=" "+l(n)),0===a.length&&(!y||0==n.length))return _[0]+g+_[1];if(0>r)return x(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var E;return E=y?f(t,n,r,m,a):a.map(function(e){return h(t,n,r,m,e,y)}),t.seen.pop(),p(E,g,_)}function c(t,e){if(w(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return y(e)?t.stylize(""+e,"number"):m(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,i){for(var o=[],a=0,s=e.length;s>a;++a)o.push(M(e,String(a))?h(t,e,n,r,String(a),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,n,r,i,!0))}),o}function h(t,e,n,r,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),M(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(c.value)<0?(s=v(n)?u(t,c.value,null):u(t,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function v(t){return null===t}function g(t){return null==t}function y(t){return"number"==typeof t}function b(t){return"string"==typeof t}function _(t){return"symbol"==typeof t}function w(t){return void 0===t}function x(t){return E(t)&&"[object RegExp]"===k(t)}function E(t){return"object"==typeof t&&null!==t}function T(t){return E(t)&&"[object Date]"===k(t)}function C(t){return E(t)&&("[object Error]"===k(t)||t instanceof Error)}function S(t){return"function"==typeof t}function A(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function k(t){return Object.prototype.toString.call(t)}function O(t){return 10>t?"0"+t.toString(10):t.toString(10)}function j(){var t=new Date,e=[O(t.getHours()),O(t.getMinutes()),O(t.getSeconds())].join(":");return[t.getDate(),I[t.getMonth()],e].join(" ")}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var R=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(t).replace(R,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),s=r[n];o>n;s=r[++n])a+=v(s)||!E(s)?" "+s:" "+i(s);return a},e.deprecate=function(n,i){function o(){if(!a){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),a=!0}return n.apply(this,arguments)}if(w(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(r.noDeprecation===!0)return n;var a=!1;return o};var N,P={};e.debuglog=function(t){if(w(N)&&(N=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!P[t])if(new RegExp("\\b"+t+"\\b","i").test(N)){var n=r.pid;P[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else P[t]=function(){};return P[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=m,e.isNull=v,e.isNullOrUndefined=g,e.isNumber=y,e.isString=b,e.isSymbol=_,e.isUndefined=w,e.isRegExp=x,e.isObject=E,e.isDate=T,e.isError=C,e.isFunction=S,e.isPrimitive=A,e.isBuffer=n(227);var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",j(),e.format.apply(e,arguments))},e.inherits=n(226),e._extend=function(t,e){if(!e||!E(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,function(){return this}(),n(1))},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var o=e.SkinNode=function(){function t(){i(this,t)}return r(t,null,{compile:{value:function(t,e){var n=new this;return n.compile(t,e),n}}}),t}();e["default"]=o},function(t,e,n){"use strict";function r(t){var e=void 0;return function(n){e!==n&&(e=n,t(n))}}var i=function(t){return t&&t.__esModule?t["default"]:t},o=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},a=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var u=i(n(307)),c=e.Instance=function(){function t(e){if(s(this,t),this._context=e.context,this._object=e.object,this._children=e.children,this._bindings=[],this._concerns=[],this.onData=new u(e.onData),this.onDestroy=new u(e.onDestroy),e.bindings){var n=!0,r=!1,i=void 0;try{for(var a,c=e.bindings[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var l=a.value;this.bind.apply(this,o(l))}}catch(f){r=!0,i=f}finally{try{!n&&c["return"]&&c["return"]()}finally{if(r)throw i}}}if(e.concerns){var h=!0,p=!1,d=void 0;try{for(var m,v=e.concerns[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var g=m.value;this._concerns.push(g.instantiate(this._context,this))}}catch(f){p=!0,d=f}finally{try{!h&&v["return"]&&v["return"]()}finally{if(p)throw d}}}if(e.children){var y=!0,b=!1,_=void 0;try{for(var w,x=e.children[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var E=w.value;this._concerns.push(E.instantiate(this._context,this._object))}}catch(f){b=!0,_=f}finally{try{!y&&x["return"]&&x["return"]()}finally{if(b)throw _}}}e.onCreate&&new u(e.onCreate).call(),e.parent&&this.attachTo(e.parent)}return a(t,{bind:{value:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];var i=r(e.pop());1===e.length&&e[0].constant?i(e[0]()):this._bindings.push(function(t){for(var n=0;n<e.length;n++)t=e[n](t);i(t)})}},attachTo:{value:function(t){this._parent=t,this._parent.addChild(this._object)}},detach:{value:function(){this._parent&&(this._parent.removeChild(this._object),this._parent=null)}},push:{value:function(t){var e;for(e=0;e<this._bindings.length;e++)this._bindings[e](t);for(e=0;e<this._concerns.length;e++)this._concerns[e].push(t);this.onData.call(t)}},destroy:{value:function(){this.detach();for(var t=0;t<this._concerns.length;t++)this._concerns[t].destroy();this.onDestroy.call(),this._concerns=null,this._bindings=null,this._parent=null,this._object=null}},object:{get:function(){return this._object}},parent:{get:function(){return this._parent}}}),t}();e["default"]=c},,function(t,e,n){function r(){function t(e){return t.validate(e),e}var e=[].slice.call(arguments);return t.validate=function(t){for(var n=0;n<e.length;n++)i(e[n],t)},t}function i(t,e){if(t===Number&&(t="number"),t===String&&(t="string"),"string"==typeof t){if(typeof e!==t)throw new Error("should be a "+t)}else if("function"==typeof t){if("function"==typeof t.validate)t.validate(e);else if(!(e instanceof t))throw new Error("should be an instance of "+t)}else{if("object"!=typeof t)throw new Error("invalid schema");if(!e)throw new Error("should be an object");o(t,e)}}function o(t,e){for(var n in t){if(!(n in e))throw new Error('missing property: "'+n+'"');try{i(t[n],e[n])}catch(r){throw new Error('error in property "'+n+'": '+r.message)}}}t.exports=r,r.maybe=function(t){function e(t){return e.validate(t),t}return e.validate=function(e){null!==e&&void 0!==e&&i(t,e)},e}},function(t,e,n){"use strict";function r(t){return function(e,n){for(var r=Math.abs(e-n),i=0;i<f.length;i++)if(r<t(f[i]))return f[i].value;return n>e?c:l}}function i(t){return t>=4}function o(t){return t===l||i(t)}function a(t){return 1===t?100:2===t?80:3===t?50:0}var s=function(t){return t&&t.__esModule?t["default"]:t};e.judgeTimeWith=r,e.isBad=i,e.breaksCombo=o,e.weight=a,Object.defineProperty(e,"__esModule",{value:!0});var u=s(n(12)),c=0;e.UNJUDGED=c;var l=-1;e.MISSED=l;var f=[{value:1,timegate:.02,endTimegate:.04},{value:2,timegate:.05,endTimegate:.1},{value:3,timegate:.1,endTimegate:.2},{value:4,timegate:.2,endTimegate:.2}];e.JUDGMENTS=f;var h=r(u.property("timegate"));e.judgeTime=h;var p=r(u.property("endTimegate"));e.judgeEndTime=p},function(t,e,n){(function(e){"use strict";function r(){this._callbacks=null,this._contexts=null}var i=n(15),o=n(3),a=n(2);o(r.prototype,{enqueue:function(t,e){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(e)},notifyAll:function(){var t=this._callbacks,n=this._contexts;if(t){"production"!==e.env.NODE_ENV?a(t.length===n.length,"Mismatched list of contexts in callback queue"):a(t.length===n.length),this._callbacks=null,this._contexts=null;for(var r=0,i=t.length;i>r;r++)t[r].call(n[r]);t.length=0,n.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),i.addPoolingTo(r),t.exports=r}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(t){return t===g.topMouseUp||t===g.topTouchEnd||t===g.topTouchCancel}function i(t){return t===g.topMouseMove||t===g.topTouchMove}function o(t){return t===g.topMouseDown||t===g.topTouchStart}function a(t,n){var r=t._dispatchListeners,i=t._dispatchIDs;if("production"!==e.env.NODE_ENV&&p(t),Array.isArray(r))for(var o=0;o<r.length&&!t.isPropagationStopped();o++)n(t,r[o],i[o]);else r&&n(t,r,i)}function s(t,e,n){t.currentTarget=v.Mount.getNode(n);var r=e(t,n);return t.currentTarget=null,r}function u(t,e){a(t,e),t._dispatchListeners=null,t._dispatchIDs=null}function c(t){var n=t._dispatchListeners,r=t._dispatchIDs;if("production"!==e.env.NODE_ENV&&p(t),Array.isArray(n)){for(var i=0;i<n.length&&!t.isPropagationStopped();i++)if(n[i](t,r[i]))return r[i]}else if(n&&n(t,r))return r;return null}function l(t){var e=c(t);return t._dispatchIDs=null,t._dispatchListeners=null,e}function f(t){"production"!==e.env.NODE_ENV&&p(t);var n=t._dispatchListeners,r=t._dispatchIDs;"production"!==e.env.NODE_ENV?m(!Array.isArray(n),"executeDirectDispatch(...): Invalid `event`."):m(!Array.isArray(n));var i=n?n(t,r):null;return t._dispatchListeners=null,t._dispatchIDs=null,i}function h(t){return!!t._dispatchListeners}var p,d=n(10),m=n(2),v={Mount:null,injectMount:function(t){v.Mount=t,"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?m(t&&t.getNode,"EventPluginUtils.injection.injectMount(...): Injected Mount module is missing getNode."):m(t&&t.getNode))}},g=d.topLevelTypes;"production"!==e.env.NODE_ENV&&(p=function(t){var n=t._dispatchListeners,r=t._dispatchIDs,i=Array.isArray(n),o=Array.isArray(r),a=o?r.length:r?1:0,s=i?n.length:n?1:0;"production"!==e.env.NODE_ENV?m(o===i&&a===s,"EventPluginUtils: Invalid `event`."):m(o===i&&a===s)});var y={isEndish:r,isMoveish:i,isStartish:o,executeDirectDispatch:f,executeDispatch:s,executeDispatchesInOrder:u,executeDispatchesInOrderStopAtTrue:l,hasDispatches:h,injection:v,useTouchEvents:!1};t.exports=y}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(t){"production"!==e.env.NODE_ENV?c(null==t.props.checkedLink||null==t.props.valueLink,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa."):c(null==t.props.checkedLink||null==t.props.valueLink)}function i(t){r(t),"production"!==e.env.NODE_ENV?c(null==t.props.value&&null==t.props.onChange,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink."):c(null==t.props.value&&null==t.props.onChange)}function o(t){r(t),"production"!==e.env.NODE_ENV?c(null==t.props.checked&&null==t.props.onChange,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink"):c(null==t.props.checked&&null==t.props.onChange)}function a(t){this.props.valueLink.requestChange(t.target.value)}function s(t){this.props.checkedLink.requestChange(t.target.checked)}var u=n(95),c=n(2),l={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},f={Mixin:{propTypes:{value:function(t,e,n){return!t[e]||l[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e,n){return!t[e]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:u.func}},getValue:function(t){return t.props.valueLink?(i(t),t.props.valueLink.value):t.props.value},getChecked:function(t){return t.props.checkedLink?(o(t),t.props.checkedLink.value):t.props.checked},getOnChange:function(t){return t.props.valueLink?(i(t),a):t.props.checkedLink?(o(t),s):t.props.onChange}};t.exports=f}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(t){t.remove()}var i=n(24),o=n(66),a=n(67),s=n(2),u={trapBubbledEvent:function(t,n){"production"!==e.env.NODE_ENV?s(this.isMounted(),"Must be mounted to trap events"):s(this.isMounted());var r=this.getDOMNode();"production"!==e.env.NODE_ENV?s(r,"LocalEventTrapMixin.trapBubbledEvent(...): Requires node to be rendered."):s(r);var a=i.trapBubbledEvent(t,n,r);this._localEventListeners=o(this._localEventListeners,a)},componentWillUnmount:function(){this._localEventListeners&&a(this._localEventListeners,r)}};t.exports=u}).call(e,n(1))},function(t,e,n){"use strict";var r=n(90),i=n(13),o={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:r.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(t){i.purgeID(t)}};t.exports=o},function(t,e,n){(function(e){"use strict";var r=n(2),i=!1,o={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){"production"!==e.env.NODE_ENV?r(!i,"ReactCompositeComponent: injectEnvironment() can only be called once."):r(!i),o.unmountIDFromEnvironment=t.unmountIDFromEnvironment,o.replaceNodeWithMarkupByID=t.replaceNodeWithMarkupByID,o.processChildrenUpdates=t.processChildrenUpdates,i=!0}}};t.exports=o}).call(e,n(1))},function(t,e,n){(function(e){"use strict";var r=n(3),i=n(46),o=n(5),a=!1,s={current:i,withContext:function(t,n){"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?o(a,"withContext is deprecated and will be removed in a future version. Use a wrapper component with getChildContext instead."):null,a=!0);var i,u=s.current;s.current=r({},u,t);try{i=n()}finally{s.current=u}return i}};t.exports=s}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(t){t&&(null!=t.dangerouslySetInnerHTML&&("production"!==e.env.NODE_ENV?g(null==t.children,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."):g(null==t.children),"production"!==e.env.NODE_ENV?g(null!=t.dangerouslySetInnerHTML.__html,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit http://fb.me/react-invariant-dangerously-set-inner-html for more information."):g(null!=t.dangerouslySetInnerHTML.__html)),"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?_(null==t.innerHTML,"Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."):null,"production"!==e.env.NODE_ENV?_(!t.contentEditable||null==t.children,"A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."):null),"production"!==e.env.NODE_ENV?g(null==t.style||"object"==typeof t.style,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX."):g(null==t.style||"object"==typeof t.style))}function i(t,n,r,i){"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?_("onScroll"!==n||y("scroll",!0),"This browser doesn't support the `onScroll` event"):null);var o=h.findReactContainerForID(t);if(o){var a=o.nodeType===S?o.ownerDocument:o;x(n,a)}i.getPutListenerQueue().enqueuePutListener(t,n,r)}function o(t){M.call(j,t)||("production"!==e.env.NODE_ENV?g(O.test(t),"Invalid tag: %s",t):g(O.test(t)),j[t]=!0)}function a(t){o(t),this._tag=t,this._renderedChildren=null,this._previousStyleCopy=null,this._rootNodeID=null}var s=n(87),u=n(21),c=n(32),l=n(24),f=n(58),h=n(13),p=n(184),d=n(18),m=n(3),v=n(47),g=n(2),y=n(72),b=n(20),_=n(5),w=l.deleteListener,x=l.listenTo,E=l.registrationNameModules,T={string:!0,number:!0},C=b({style:null}),S=1,A=null,k={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},O=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,j={},M={}.hasOwnProperty;a.displayName="ReactDOMComponent",a.Mixin={construct:function(t){this._currentElement=t},mountComponent:function(t,e,n){this._rootNodeID=t,r(this._currentElement.props);var i=k[this._tag]?"":"</"+this._tag+">";return this._createOpenTagMarkupAndPutListeners(e)+this._createContentMarkup(e,n)+i},_createOpenTagMarkupAndPutListeners:function(t){var e=this._currentElement.props,n="<"+this._tag;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];if(null!=o)if(E.hasOwnProperty(r))i(this._rootNodeID,r,o,t);else{r===C&&(o&&(o=this._previousStyleCopy=m({},e.style)),o=s.createMarkupForStyles(o));var a=c.createMarkupForProperty(r,o);a&&(n+=" "+a)}}if(t.renderToStaticMarkup)return n+">";var u=c.createMarkupForID(this._rootNodeID);return n+" "+u+">"},_createContentMarkup:function(t,e){var n="";("listing"===this._tag||"pre"===this._tag||"textarea"===this._tag)&&(n="\n");var r=this._currentElement.props,i=r.dangerouslySetInnerHTML;if(null!=i){if(null!=i.__html)return n+i.__html}else{var o=T[typeof r.children]?r.children:null,a=null!=o?null:r.children;if(null!=o)return n+v(o);if(null!=a){var s=this.mountChildren(a,t,e);return n+s.join("")}}return n},receiveComponent:function(t,e,n){var r=this._currentElement;this._currentElement=t,this.updateComponent(e,r,t,n)},updateComponent:function(t,e,n,i){r(this._currentElement.props),this._updateDOMProperties(e.props,t),this._updateDOMChildren(e.props,t,i)},_updateDOMProperties:function(t,e){var n,r,o,a=this._currentElement.props;for(n in t)if(!a.hasOwnProperty(n)&&t.hasOwnProperty(n))if(n===C){var s=this._previousStyleCopy;for(r in s)s.hasOwnProperty(r)&&(o=o||{},o[r]="");this._previousStyleCopy=null}else E.hasOwnProperty(n)?w(this._rootNodeID,n):(u.isStandardName[n]||u.isCustomAttribute(n))&&A.deletePropertyByID(this._rootNodeID,n);for(n in a){var c=a[n],l=n===C?this._previousStyleCopy:t[n];if(a.hasOwnProperty(n)&&c!==l)if(n===C)if(c?c=this._previousStyleCopy=m({},c):this._previousStyleCopy=null,l){for(r in l)!l.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(o=o||{},o[r]="");for(r in c)c.hasOwnProperty(r)&&l[r]!==c[r]&&(o=o||{},o[r]=c[r])}else o=c;else E.hasOwnProperty(n)?i(this._rootNodeID,n,c,e):(u.isStandardName[n]||u.isCustomAttribute(n))&&A.updatePropertyByID(this._rootNodeID,n,c)}o&&A.updateStylesByID(this._rootNodeID,o)},_updateDOMChildren:function(t,e,n){var r=this._currentElement.props,i=T[typeof t.children]?t.children:null,o=T[typeof r.children]?r.children:null,a=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,s=r.dangerouslySetInnerHTML&&r.dangerouslySetInnerHTML.__html,u=null!=i?null:t.children,c=null!=o?null:r.children,l=null!=i||null!=a,f=null!=o||null!=s;null!=u&&null==c?this.updateChildren(null,e,n):l&&!f&&this.updateTextContent(""),null!=o?i!==o&&this.updateTextContent(""+o):null!=s?a!==s&&A.updateInnerHTMLByID(this._rootNodeID,s):null!=c&&this.updateChildren(c,e,n)},unmountComponent:function(){this.unmountChildren(),l.deleteAllListeners(this._rootNodeID),f.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null}},d.measureMethods(a,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),m(a.prototype,a.Mixin,p.Mixin),a.injection={injectIDOperations:function(t){a.BackendIDOperations=A=t}},t.exports=a}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(t){l[t]=!0}function i(t){delete l[t]}function o(t){return!!l[t]}var a,s=n(4),u=n(26),c=n(2),l={},f={injectEmptyComponent:function(t){a=s.createFactory(t)}},h=function(){};h.prototype.componentDidMount=function(){var t=u.get(this);t&&r(t._rootNodeID)},h.prototype.componentWillUnmount=function(){var t=u.get(this);t&&i(t._rootNodeID)},h.prototype.render=function(){return"production"!==e.env.NODE_ENV?c(a,"Trying to return null from a render, but no null placeholder component was injected."):c(a),a()};var p=s.createElement(h),d={emptyElement:p,injection:f,isNullComponentID:o};t.exports=d}).call(e,n(1))},function(t,e,n){"use strict";var r={currentlyMountingInstance:null,currentlyUnmountingInstance:null};t.exports=r},function(t,e,n){"use strict";var r=n(37),i=r({prop:null,context:null,childContext:null});t.exports=i},function(t,e,n){(function(e){"use strict";function r(t){t!==o.currentlyMountingInstance&&c.enqueueUpdate(t)}function i(t,n){"production"!==e.env.NODE_ENV?f(null==a.current,"%s(...): Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state.",n):f(null==a.current);var r=u.get(t);return r?r===o.currentlyUnmountingInstance?null:r:("production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?h(!n,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op.",n,n):null),null)}var o=n(63),a=n(17),s=n(4),u=n(26),c=n(14),l=n(3),f=n(2),h=n(5),p={enqueueCallback:function(t,n){"production"!==e.env.NODE_ENV?f("function"==typeof n,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."):f("function"==typeof n);var a=i(t);return a&&a!==o.currentlyMountingInstance?(a._pendingCallbacks?a._pendingCallbacks.push(n):a._pendingCallbacks=[n],void r(a)):null},enqueueCallbackInternal:function(t,n){"production"!==e.env.NODE_ENV?f("function"==typeof n,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."):f("function"==typeof n),t._pendingCallbacks?t._pendingCallbacks.push(n):t._pendingCallbacks=[n],r(t)},enqueueForceUpdate:function(t){var e=i(t,"forceUpdate");e&&(e._pendingForceUpdate=!0,r(e))},enqueueReplaceState:function(t,e){var n=i(t,"replaceState");n&&(n._pendingStateQueue=[e],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(t,e){var n=i(t,"setState");if(n){var o=n._pendingStateQueue||(n._pendingStateQueue=[]);o.push(e),r(n)}},enqueueSetProps:function(t,n){var o=i(t,"setProps");if(o){"production"!==e.env.NODE_ENV?f(o._isTopLevel,"setProps(...): You called `setProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created."):f(o._isTopLevel);var a=o._pendingElement||o._currentElement,u=l({},a.props,n);o._pendingElement=s.cloneAndReplaceProps(a,u),r(o)}},enqueueReplaceProps:function(t,n){var o=i(t,"replaceProps");

if(o){"production"!==e.env.NODE_ENV?f(o._isTopLevel,"replaceProps(...): You called `replaceProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created."):f(o._isTopLevel);var a=o._pendingElement||o._currentElement;o._pendingElement=s.cloneAndReplaceProps(a,n),r(o)}},enqueueElementInternal:function(t,e){t._pendingElement=e,r(t)}};t.exports=p}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(t,n){if("production"!==e.env.NODE_ENV?i(null!=n,"accumulateInto(...): Accumulated items must not be null or undefined."):i(null!=n),null==t)return n;var r=Array.isArray(t),o=Array.isArray(n);return r&&o?(t.push.apply(t,n),t):r?(t.push(n),t):o?[t].concat(n):[t,n]}var i=n(2);t.exports=r}).call(e,n(1))},function(t,e,n){"use strict";var r=function(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)};t.exports=r},function(t,e,n){"use strict";function r(t){var e,n=t.keyCode;return"charCode"in t?(e=t.charCode,0===e&&13===n&&(e=13)):e=n,e>=32||13===e?e:0}t.exports=r},function(t,e,n){"use strict";function r(t){var e=this,n=e.nativeEvent;if(n.getModifierState)return n.getModifierState(t);var r=o[t];return r?!!n[r]:!1}function i(t){return r}var o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=i},function(t,e,n){"use strict";function r(t){var e=t.target||t.srcElement||window;return 3===e.nodeType?e.parentNode:e}t.exports=r},function(t,e,n){(function(e){"use strict";function r(t){return"function"==typeof t&&"undefined"!=typeof t.prototype&&"function"==typeof t.prototype.mountComponent&&"function"==typeof t.prototype.receiveComponent}function i(t,n){var i;if((null===t||t===!1)&&(t=a.emptyElement),"object"==typeof t){var o=t;"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?l(o&&("function"==typeof o.type||"string"==typeof o.type),"Only functions or strings can be mounted as React components."):null),i=n===o.type&&"string"==typeof o.type?s.createInternalComponent(o):r(o.type)?new o.type(o):new f}else"string"==typeof t||"number"==typeof t?i=s.createInstanceForText(t):"production"!==e.env.NODE_ENV?c(!1,"Encountered invalid React node of type %s",typeof t):c(!1);return"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?l("function"==typeof i.construct&&"function"==typeof i.mountComponent&&"function"==typeof i.receiveComponent&&"function"==typeof i.unmountComponent,"Only React Components can be mounted."):null),i.construct(t),i._mountIndex=0,i._mountImage=null,"production"!==e.env.NODE_ENV&&(i._isOwnerNecessary=!1,i._warnedAboutRefsInRender=!1),"production"!==e.env.NODE_ENV&&Object.preventExtensions&&Object.preventExtensions(i),i}var o=n(165),a=n(62),s=n(42),u=n(3),c=n(2),l=n(5),f=function(){};u(f.prototype,o.Mixin,{_instantiateReactComponent:i}),t.exports=i}).call(e,n(1))},function(t,e,n){"use strict";/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @param {?boolean} capture Check if the capture phase is supported.
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */
function r(t,e){if(!o.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"==typeof a[n]}return!r&&i&&"wheel"===t&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var i,o=n(9);o.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=r},function(t,e,n){"use strict";var r=n(9),i=/^[ \r\n\t\f]/,o=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,a=function(t,e){t.innerHTML=e};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(a=function(t,e){MSApp.execUnsafeLocalFunction(function(){t.innerHTML=e})}),r.canUseDOM){var s=document.createElement("div");s.innerHTML=" ",""===s.innerHTML&&(a=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),i.test(e)||"<"===e[0]&&o.test(e)){t.innerHTML="\ufeff"+e;var n=t.firstChild;1===n.data.length?t.removeChild(n):n.deleteData(0,1)}else t.innerHTML=e})}t.exports=a},function(t,e,n){(function(e){"use strict";function r(t,n){if(null!=t&&null!=n){var r=typeof t,o=typeof n;if("string"===r||"number"===r)return"string"===o||"number"===o;if("object"===o&&t.type===n.type&&t.key===n.key){var a=t._owner===n._owner,s=null,u=null,c=null;return"production"!==e.env.NODE_ENV&&(a||(null!=t._owner&&null!=t._owner.getPublicInstance()&&null!=t._owner.getPublicInstance().constructor&&(s=t._owner.getPublicInstance().constructor.displayName),null!=n._owner&&null!=n._owner.getPublicInstance()&&null!=n._owner.getPublicInstance().constructor&&(u=n._owner.getPublicInstance().constructor.displayName),null!=n.type&&null!=n.type.displayName&&(c=n.type.displayName),null!=n.type&&"string"==typeof n.type&&(c=n.type),("string"!=typeof n.type||"input"===n.type||"textarea"===n.type)&&(null!=t._owner&&t._owner._isOwnerNecessary===!1||null!=n._owner&&n._owner._isOwnerNecessary===!1)&&(null!=t._owner&&(t._owner._isOwnerNecessary=!0),null!=n._owner&&(n._owner._isOwnerNecessary=!0),"production"!==e.env.NODE_ENV?i(!1,"<%s /> is being rendered by both %s and %s using the same key (%s) in the same place. Currently, this means that they don't preserve state. This behavior should be very rare so we're considering deprecating it. Please contact the React team and explain your use case so that we can take that into consideration.",c||"Unknown Component",s||"[Unknown]",u||"[Unknown]",t.key):null))),a}}return!1}var i=n(5);t.exports=r}).call(e,n(1))},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(128)),o=function(t){return function(e){return null!==e.progress?t(e):""}},a=o(function(t){return i(t.current)+" / "+i(t.total)});e.BYTES_FORMATTER=a;var s=o(function(t){return t.extra+""});e.EXTRA_FORMATTER=s},function(t,e,n){"use strict";function r(t,e){if(!e)return function(){};var n=0;return e.report(0,t),function(r){return e.report(++n,t,r)}}function i(t,e){return t?Promise.resolve(e).tap(function(e){e&&e.byteLength?(t.formatter=s,t.report(e.byteLength,e.byteLength)):t.report(1,1)}):e}function o(t,e){var n=0,r=0;return function(){return t.report(n,++r),Promise.resolve(e.apply(this,arguments)).tap(function(){return t.report(++n,r)})}}function a(t,e){return t.watch(function(){return e.report(t.current,t.total,t.extra)})}e.fixed=r,e.atomic=i,e.wrapPromise=o,e.bind=a,Object.defineProperty(e,"__esModule",{value:!0});var s=n(75).BYTES_FORMATTER},function(t,e,n){"use strict";function r(t){return{as:function(e){return new Promise(function(n,r){var i=new FileReader;switch(i.onload=function(){n(i.result)},i.onerror=function(){r(new Error("Unable to read from Blob"))},e){case"arraybuffer":i.readAsArrayBuffer(t);break;case"text":i.readAsText(t)}})}}}e.readBlob=r,Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r},function(t,e,n){var r,i;(function(t,o){(function(){var a,s,u,c,l,f,h,p,d,m,v,g,y,b,_,w,x,E,T,C,S,A,k,O,j,M,R,N,P,I,D,L,F,B,U,q,V,W,G,H,z,Y,$,X,J,K,Q,Z,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ft,ht,pt,dt,mt,vt,gt,yt,bt,_t,wt,xt={}.hasOwnProperty,Et=function(t,e){function n(){this.constructor=t}for(var r in e)xt.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},Tt=[].slice,Ct=function(t,e){return function(){return t.apply(e,arguments)}};a={toString:function(){return"Bacon"}},a.version="0.7.53",g=("undefined"!=typeof t&&null!==t?t:this).Error,st=function(){},Z=function(t,e){return e},Y=function(t,e){return t},D=function(t){return t.slice(0)},O=function(t,e){if(!e)throw new g(t)},M=function(t){if(!(t instanceof v))throw new g("not an EventStream : "+t)},P=function(t){if(!(t instanceof w))throw new g("not an Observable : "+t)},R=function(t){return O("not a function : "+t,A.isFunction(t))},J=function(t){return t instanceof Array},Q=function(t){return t instanceof w},j=function(t){if(!J(t))throw new g("not an array : "+t)},N=function(t){return O("no arguments supported",0===t.length)},I=function(t){if("string"!=typeof t)throw new g("not a string : "+t)},A={indexOf:Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){var n,r,i,o;for(n=r=0,i=t.length;i>r;n=++r)if(o=t[n],e===o)return n;return-1},indexWhere:function(t,e){var n,r,i,o;for(n=r=0,i=t.length;i>r;n=++r)if(o=t[n],e(o))return n;return-1},head:function(t){return t[0]},always:function(t){return function(){return t}},negate:function(t){return function(e){return!t(e)}},empty:function(t){return 0===t.length},tail:function(t){return t.slice(1,t.length)},filter:function(t,e){var n,r,i,o;for(n=[],r=0,i=e.length;i>r;r++)o=e[r],t(o)&&n.push(o);return n},map:function(t,e){var n,r,i,o;for(i=[],n=0,r=e.length;r>n;n++)o=e[n],i.push(t(o));return i},each:function(t,e){var n,r;for(n in t)r=t[n],e(n,r);return void 0},toArray:function(t){return J(t)?t:[t]},contains:function(t,e){return-1!==A.indexOf(t,e)},id:function(t){return t},last:function(t){return t[t.length-1]},all:function(t,e){var n,r,i;for(null==e&&(e=A.id),n=0,r=t.length;r>n;n++)if(i=t[n],!e(i))return!1;return!0},any:function(t,e){var n,r,i;for(null==e&&(e=A.id),n=0,r=t.length;r>n;n++)if(i=t[n],e(i))return!0;return!1},without:function(t,e){return A.filter(function(e){return e!==t},e)},remove:function(t,e){var n;return n=A.indexOf(e,t),n>=0?e.splice(n,1):void 0},fold:function(t,e,n){var r,i,o;for(r=0,i=t.length;i>r;r++)o=t[r],e=n(e,o);return e},flatMap:function(t,e){return A.fold(e,[],function(e,n){return e.concat(t(n))})},cached:function(t){var e;return e=_,function(){return e===_&&(e=t(),t=void 0),e}},isFunction:function(t){return"function"==typeof t},toString:function(t){var e,n,r,i;try{return ct++,null==t?"undefined":A.isFunction(t)?"function":J(t)?ct>5?"[..]":"["+A.map(A.toString,t).toString()+"]":null!=(null!=t?t.toString:void 0)&&t.toString!==Object.prototype.toString?t.toString():"object"==typeof t?ct>5?"{..}":(n=function(){var n;n=[];for(r in t)xt.call(t,r)&&(i=function(){try{return t[r]}catch(n){return e=n}}(),n.push(A.toString(r)+":"+A.toString(i)));return n}(),"{"+n+"}"):t}finally{ct--}}},ct=0,a._=A,S=a.UpdateBarrier=function(){var t,e,n,r,i,o,s,u,c,l,f,h,p,d;return l=void 0,f=[],h={},e=[],n=0,t=function(t){return l?e.push(t):t()},p=function(t,e){var n;return l?(n=h[t.id],null==n?(n=h[t.id]=[e],f.push(t)):n.push(e)):e()},i=function(){for(;f.length>0;)s(0);return void 0},s=function(t){var e,n,r,i,a,s;for(i=f[t],a=i.id,s=h[a],f.splice(t,1),delete h[a],o(i),n=0,r=s.length;r>n;n++)(e=s[n])();return void 0},o=function(t){var e,n,r,i,a;for(n=t.internalDeps(),i=0,a=n.length;a>i;i++)e=n[i],o(e),h[e.id]&&(r=A.indexOf(f,e),s(r));return void 0},c=function(t,r,o,a){var s,u;if(l)return o.apply(r,a);l=t;try{u=o.apply(r,a),i()}finally{for(l=void 0;n<e.length;)s=e[n],n++,s();n=0,e=[]}return u},r=function(){return l?l.id:void 0},d=function(e,n){var r,i,o,s;return s=!1,i=!1,r=function(){return i=!0},o=function(){return s=!0,r()},r=e.dispatcher.subscribe(function(e){return t(function(){var t;return s||(t=n(e),t!==a.noMore)?void 0:o()})}),i&&r(),o},u=function(){return f.length>0},{whenDoneWith:p,hasWaiters:u,inTransaction:c,currentEventId:r,wrappedSubscribe:d,afterTransaction:t}}(),C=function(){function t(t,e,n){this.obs=t,this.sync=e,this.lazy=null!=n?n:!1,this.queue=[]}return t.prototype.subscribe=function(t){return this.obs.dispatcher.subscribe(t)},t.prototype.toString=function(){return this.obs.toString()},t.prototype.markEnded=function(){return this.ended=!0},t.prototype.consume=function(){return this.lazy?{value:A.always(this.queue[0])}:this.queue[0]},t.prototype.push=function(t){return this.queue=[t]},t.prototype.mayHave=function(){return!0},t.prototype.hasAtLeast=function(){return this.queue.length},t.prototype.flatten=!0,t}(),l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Et(e,t),e.prototype.consume=function(){return this.queue.shift()},e.prototype.push=function(t){return this.queue.push(t)},e.prototype.mayHave=function(t){return!this.ended||this.queue.length>=t},e.prototype.hasAtLeast=function(t){return this.queue.length>=t},e.prototype.flatten=!1,e}(C),s=function(t){function e(t){e.__super__.constructor.call(this,t,!0)}return Et(e,t),e.prototype.consume=function(){var t;return t=this.queue,this.queue=[],{value:function(){return t}}},e.prototype.push=function(t){return this.queue.push(t.value())},e.prototype.hasAtLeast=function(){return!0},e}(C),C.isTrigger=function(t){return t instanceof C?t.sync:t instanceof v},C.fromObservable=function(t){return t instanceof C?t:t instanceof x?new C(t,!1):new l(t,!0)},f=function(){function t(t,e,n){this.context=t,this.method=e,this.args=n,this.cached=void 0}return t.prototype.deps=function(){return this.cached||(this.cached=G([this.context].concat(this.args)))},t.prototype.apply=function(t){return t.desc=this,t},t.prototype.toString=function(){return A.toString(this.context)+"."+A.toString(this.method)+"("+A.map(A.toString,this.args)+")"},t}(),U=function(){var t,e,n;return e=arguments[0],n=arguments[1],t=3<=arguments.length?Tt.call(arguments,2):[],(e||n)instanceof f?e||n:new f(e,n,t)},_t=function(){var t,e,n;return t=2<=arguments.length?Tt.call(arguments,0,e=arguments.length-1):(e=0,[]),n=arguments[e++],U.apply(null,t).apply(n)},G=function(t){return J(t)?A.flatMap(G,t):Q(t)?[t]:t instanceof C?[t.obs]:[]},wt=function(t){return function(){var e,n,r,i;return r=arguments[0],e=2<=arguments.length?Tt.call(arguments,1):[],"object"==typeof r&&e.length&&(n=r,i=e[0],r=function(){return n[i].apply(n,arguments)},e=e.slice(1)),t.apply(null,[r].concat(Tt.call(e)))}},nt=function(t){return t=Array.prototype.slice.call(t),rt.apply(null,t)},ut=function(t,e){return function(){var n;return n=1<=arguments.length?Tt.call(arguments,0):[],t.apply(null,e.concat(n))}},yt=function(t){return function(e){return function(n){var r;return null==n?void 0:(r=n[e],A.isFunction(r)?r.apply(n,t):r)}}},mt=function(t,e){var n,r;return r=t.slice(1).split("."),n=A.map(yt(e),r),function(e){var r,i;for(r=0,i=n.length;i>r;r++)t=n[r],e=t(e);return e}},K=function(t){return"string"==typeof t&&t.length>1&&"."===t.charAt(0)},rt=wt(function(){var t,e;return e=arguments[0],t=2<=arguments.length?Tt.call(arguments,1):[],A.isFunction(e)?t.length?ut(e,t):e:K(e)?mt(e,t):A.always(e)}),et=function(t,e){return rt.apply(null,[t].concat(Tt.call(e)))},B=function(t,e,n,r){var i;return e instanceof x?(i=e.sampledBy(t,function(t,e){return[t,e]}),r.call(i,function(t){var e,n;return e=t[0],n=t[1],e}).map(function(t){var e,n;return e=t[0],n=t[1]})):(e=et(e,n),r.call(t,e))},pt=function(t){var e;if(A.isFunction(t))return t;if(K(t))return e=vt(t),function(t,n){return t[e](n)};throw new g("not a function or a field key: "+t)},vt=function(t){return t.slice(1)},T=function(){function t(t){this.value=t}return t.prototype.getOrElse=function(){return this.value},t.prototype.get=function(){return this.value},t.prototype.filter=function(e){return e(this.value)?new t(this.value):_},t.prototype.map=function(e){return new t(e(this.value))},t.prototype.forEach=function(t){return t(this.value)},t.prototype.isDefined=!0,t.prototype.toArray=function(){return[this.value]},t.prototype.inspect=function(){return"Some("+this.value+")"},t.prototype.toString=function(){return this.inspect()},t}(),_={getOrElse:function(t){return t},filter:function(){return _},map:function(){return _},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},gt=function(t){return t instanceof T||t===_?t:new T(t)},a.noMore=["<no-more>"],a.more=["<more>"],V=0,m=function(){function t(){this.id=++V}return t.prototype.isEvent=function(){return!0},t.prototype.isEnd=function(){return!1},t.prototype.isInitial=function(){return!1},t.prototype.isNext=function(){return!1},t.prototype.isError=function(){return!1},t.prototype.hasValue=function(){return!1},t.prototype.filter=function(){return!0},t.prototype.inspect=function(){return this.toString()},t.prototype.log=function(){return this.toString()},t}(),b=function(t){function e(t,n){e.__super__.constructor.call(this),!n&&A.isFunction(t)||t instanceof e?(this.valueF=t,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=t)}return Et(e,t),e.prototype.isNext=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.value=function(){return this.valueF instanceof e?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},e.prototype.fmap=function(t){var e,n;return this.valueInternal?(n=this.valueInternal,this.apply(function(){return t(n)})):(e=this,this.apply(function(){return t(e.value())}))},e.prototype.apply=function(t){return new e(t)},e.prototype.filter=function(t){return t(this.value())},e.prototype.toString=function(){return A.toString(this.value())},e.prototype.log=function(){return this.value()},e}(m),y=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Et(e,t),e.prototype.isInitial=function(){return!0},e.prototype.isNext=function(){return!1},e.prototype.apply=function(t){return new e(t)},e.prototype.toNext=function(){return new b(this)},e}(b),p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Et(e,t),e.prototype.isEnd=function(){return!0},e.prototype.fmap=function(){return this},e.prototype.apply=function(){return this},e.prototype.toString=function(){return"<end>"},e}(m),d=function(t){function e(t){this.error=t}return Et(e,t),e.prototype.isError=function(){return!0},e.prototype.fmap=function(){return this},e.prototype.apply=function(){return this},e.prototype.toString=function(){return"<error> "+A.toString(this.error)},e}(m),a.Event=m,a.Initial=y,a.Next=b,a.End=p,a.Error=d,X=function(t){return new y(t,!0)},at=function(t){return new b(t,!0)},q=function(){return new p},dt=function(t){return t instanceof m?t:at(t)},$=0,ft=function(){},w=function(){function t(t){this.id=++$,_t(t,this),this.initialDesc=this.desc}return t.prototype.subscribe=function(t){return S.wrappedSubscribe(this,t)},t.prototype.subscribeInternal=function(t){return this.dispatcher.subscribe(t)},t.prototype.onValue=function(){var t;return t=nt(arguments),this.subscribe(function(e){return e.hasValue()?t(e.value()):void 0})},t.prototype.onValues=function(t){return this.onValue(function(e){return t.apply(null,e)})},t.prototype.onError=function(){var t;return t=nt(arguments),this.subscribe(function(e){return e.isError()?t(e.error):void 0})},t.prototype.onEnd=function(){var t;return t=nt(arguments),this.subscribe(function(e){return e.isEnd()?t():void 0})},t.prototype.name=function(t){return this._name=t,this},t.prototype.withDescription=function(){return U.apply(null,arguments).apply(this)},t.prototype.toString=function(){return this._name?this._name:this.desc.toString()},t.prototype.internalDeps=function(){return this.initialDesc.deps()},t}(),w.prototype.assign=w.prototype.onValue,w.prototype.forEach=w.prototype.onValue,w.prototype.inspect=w.prototype.toString,a.Observable=w,c=function(){function t(t){var e,n,r;for(null==t&&(t=[]),this.unsubscribe=Ct(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[],e=0,n=t.length;n>e;e++)r=t[e],this.add(r)}return t.prototype.add=function(t){var e,n,r;if(!this.unsubscribed)return e=!1,n=st,this.starting.push(t),r=function(r){return function(){return r.unsubscribed?void 0:(e=!0,r.remove(n),A.remove(t,r.starting))}}(this),n=t(this.unsubscribe,r),this.unsubscribed||e?n():this.subscriptions.push(n),A.remove(t,this.starting),n},t.prototype.remove=function(t){return this.unsubscribed?void 0:void 0!==A.remove(t,this.subscriptions)?t():void 0},t.prototype.unsubscribe=function(){var t,e,n,r;if(!this.unsubscribed){for(this.unsubscribed=!0,n=this.subscriptions,t=0,e=n.length;e>t;t++)(r=n[t])();return this.subscriptions=[],this.starting=[]}},t.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},t.prototype.empty=function(){return 0===this.count()},t}(),a.CompositeUnsubscribe=c,h=function(){function t(t,e){this._subscribe=t,this._handleEvent=e,this.subscribe=Ct(this.subscribe,this),this.handleEvent=Ct(this.handleEvent,this),this.subscriptions=[],this.queue=[],this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0}return t.prototype.hasSubscribers=function(){return this.subscriptions.length>0},t.prototype.removeSub=function(t){return this.subscriptions=A.without(t,this.subscriptions)},t.prototype.push=function(t){return t.isEnd()&&(this.ended=!0),S.inTransaction(t,this,this.pushIt,[t])},t.prototype.pushToSubscriptions=function(t){var e,n,r,i,o,s;try{for(s=this.subscriptions,n=0,r=s.length;r>n;n++)o=s[n],i=o.sink(t),(i===a.noMore||t.isEnd())&&this.removeSub(o);return!0}catch(u){throw e=u,this.pushing=!1,this.queue=[],e}},t.prototype.pushIt=function(t){if(this.pushing)return this.queue.push(t),a.more;if(t!==this.prevError){for(t.isError()&&(this.prevError=t),this.pushing=!0,this.pushToSubscriptions(t),this.pushing=!1;this.queue.length;)t=this.queue.shift(),this.push(t);return this.hasSubscribers()?a.more:(this.unsubscribeFromSource(),a.noMore)}},t.prototype.handleEvent=function(t){return this._handleEvent?this._handleEvent(t):this.push(t)},t.prototype.unsubscribeFromSource=function(){return this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},t.prototype.subscribe=function(t){var e;return this.ended?(t(q()),st):(R(t),e={sink:t},this.subscriptions.push(e),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),R(this.unsubSrc)),function(t){return function(){return t.removeSub(e),t.hasSubscribers()?void 0:t.unsubscribeFromSource()}}(this))},t}(),v=function(t){function e(t,n,r){A.isFunction(t)&&(r=n,n=t,t=[]),e.__super__.constructor.call(this,t),R(n),this.dispatcher=new h(n,r),ft(this)}return Et(e,t),e.prototype.toProperty=function(t){var e,n;return n=0===arguments.length?_:gt(function(){return t}),e=this.dispatcher,new x(U(this,"toProperty",t),function(t){var r,i,o,s;return r=!1,s=st,i=a.more,o=function(){return r?void 0:n.forEach(function(e){return r=!0,i=t(new y(e)),i===a.noMore?(s(),s=st):void 0})},s=e.subscribe(function(e){return e.hasValue()?r&&e.isInitial()?a.more:(e.isInitial()||o(),r=!0,n=new T(e),t(e)):(e.isEnd()&&(i=o()),i!==a.noMore?t(e):void 0)}),o(),s})},e.prototype.toEventStream=function(){return this},e.prototype.withHandler=function(t){return new e(U(this,"withHandler",t),this.dispatcher.subscribe,t)},e}(w),a.EventStream=v,a.never=function(){return new v(U(a,"never"),function(t){return t(q()),st})},a.when=function(){var t,e,n,r,i,o,s,u,c,l,f,h,p,d,m,g,y,b,_,w;if(0===arguments.length)return a.never();for(s=arguments.length,w="when: expecting arguments in the form (Observable+,function)+",O(w,s%2===0),b=[],p=[],e=0,d=[];s>e;){for(d[e]=arguments[e],d[e+1]=arguments[e+1],h=A.toArray(arguments[e]),t=L(arguments[e+1]),f={f:t,ixs:[]},_=!1,i=0,u=h.length;u>i;i++){for(y=h[i],n=A.indexOf(b,y),_||(_=C.isTrigger(y)),0>n&&(b.push(y),n=b.length-1),m=f.ixs,o=0,c=m.length;c>o;o++)r=m[o],r.index===n&&r.count++;f.ixs.push({index:n,count:1})}O("At least one EventStream required",_||!h.length),h.length>0&&p.push(f),e+=2}return b.length?(b=A.map(C.fromObservable,b),l=A.any(b,function(t){return t.flatten})&&F(A.map(function(t){return t.obs},b)),g=new v(U.apply(null,[a,"when"].concat(Tt.call(d))),function(t){var n,r,i,o,s,u,c;return c=[],i=!1,o=function(t){var n,r,i;for(i=t.ixs,n=0,r=i.length;r>n;n++)if(e=i[n],!b[e.index].hasAtLeast(e.count))return!1;return!0},r=function(t){return!t.sync||t.ended},n=function(t){var n,r,i;for(i=t.ixs,n=0,r=i.length;r>n;n++)if(e=i[n],!b[e.index].mayHave(e.count))return!0},s=function(t){return!t.source.flatten},u=function(u){return function(f){var h,d,m;return d=function(){return S.whenDoneWith(g,h)},m=function(){var n,r,i,u,l,f;if(!(c.length>0))return a.more;for(l=a.more,f=c.pop(),r=0,i=p.length;i>r;r++)if(u=p[r],o(u))return n=function(){var t,n,r,i;for(r=u.ixs,i=[],n=0,t=r.length;t>n;n++)e=r[n],i.push(b[e.index].consume());return i}(),l=t(f.e.apply(function(){var t,e;return e=function(){var e,r,i;for(i=[],r=0,e=n.length;e>r;r++)t=n[r],i.push(t.value());return i}(),u.f.apply(u,e)})),c.length&&(c=A.filter(s,c)),l===a.noMore?l:m()},h=function(){var e;return e=m(),i&&(i=!1,(A.all(b,r)||A.all(p,n))&&(e=a.noMore,t(q()))),e===a.noMore&&f(),e},u.subscribe(function(e){var n;return e.isEnd()?(i=!0,u.markEnded(),d()):e.isError()?n=t(e):(u.push(e),u.sync&&(c.push({source:u,e:e}),l||S.hasWaiters()?d():h())),n===a.noMore&&f(),n||a.more})}},new a.CompositeUnsubscribe(function(){var t,e,n;for(n=[],t=0,e=b.length;e>t;t++)y=b[t],n.push(u(y));return n}()).unsubscribe})):a.never()},F=function(t,e){var n;return null==e&&(e=[]),n=function(t){var r;return A.contains(e,t)?!0:(r=t.internalDeps(),r.length?(e.push(t),A.any(r,n)):(e.push(t),!1))},A.any(t,n)},L=function(t){return A.isFunction(t)?t:A.always(t)},a.groupSimultaneous=function(){var t,e,n;return n=1<=arguments.length?Tt.call(arguments,0):[],1===n.length&&J(n[0])&&(n=n[0]),e=function(){var e,r,i;for(i=[],e=0,r=n.length;r>e;e++)t=n[e],i.push(new s(t));return i}(),_t.apply(null,[a,"groupSimultaneous"].concat(Tt.call(n),[a.when(e,function(){var t;return t=1<=arguments.length?Tt.call(arguments,0):[]})]))},E=function(t){function e(t,n,r){this.property=t,this.subscribe=Ct(this.subscribe,this),e.__super__.constructor.call(this,n,r),this.current=_,this.currentValueRootId=void 0,this.propertyEnded=!1}return Et(e,t),e.prototype.push=function(t){return t.isEnd()&&(this.propertyEnded=!0),t.hasValue()&&(this.current=new T(t),this.currentValueRootId=S.currentEventId()),e.__super__.push.call(this,t)},e.prototype.maybeSubSource=function(t,e){return e===a.noMore?st:this.propertyEnded?(t(q()),st):h.prototype.subscribe.call(this,t)},e.prototype.subscribe=function(t){var e,n,r,i;return n=!1,r=a.more,this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)?(e=S.currentEventId(),i=this.currentValueRootId,!this.propertyEnded&&i&&e&&e!==i?(S.whenDoneWith(this.property,function(e){return function(){return e.currentValueRootId===i?t(X(e.current.get().value())):void 0}}(this)),this.maybeSubSource(t,r)):(S.inTransaction(void 0,this,function(){return r=t(X(this.current.get().value()))},[]),this.maybeSubSource(t,r))):this.maybeSubSource(t,r)},e}(h),x=function(t){function e(t,n,r){A.isFunction(t)&&(r=n,n=t,t=[]),e.__super__.constructor.call(this,t),R(n),this.dispatcher=new E(this,n,r),ft(this)}return Et(e,t),e.prototype.changes=function(){return new v(U(this,"changes"),function(t){return function(e){return t.dispatcher.subscribe(function(t){return t.isInitial()?void 0:e(t)})}}(this))},e.prototype.withHandler=function(t){return new e(U(this,"withHandler",t),this.dispatcher.subscribe,t)},e.prototype.toProperty=function(){return N(arguments),this},e.prototype.toEventStream=function(){return new v(U(this,"toEventStream"),function(t){return function(e){return t.dispatcher.subscribe(function(t){return t.isInitial()&&(t=t.toNext()),e(t)})}}(this))},e}(w),a.Property=x,a.constant=function(t){return new x(U(a,"constant",t),function(e){return e(X(t)),e(q()),st})},a.fromBinder=function(t,e){return null==e&&(e=A.id),new v(U(a,"fromBinder",t,e),function(n){var r,i,o,s;return s=!1,r=!1,i=function(){return s?void 0:"undefined"!=typeof o&&null!==o?(o(),s=!0):r=!0},o=t(function(){var t,r,o,s,u,c;for(t=1<=arguments.length?Tt.call(arguments,0):[],c=e.apply(this,t),J(c)&&A.last(c)instanceof m||(c=[c]),u=a.more,o=0,s=c.length;s>o;o++)if(r=c[o],u=n(r=dt(r)),u===a.noMore||r.isEnd())return i(),u;return u}),r&&i(),i})},W=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]],H=function(t){var e,n,r,i;for(e=0,n=W.length;n>e;e++)if(i=W[e],r=[t[i[0]],t[i[1]]],r[0]&&r[1])return r;throw new d("No suitable event methods in "+t)},a.fromEventTarget=function(t,e,n){var r,i,o;return r=H(t),i=r[0],o=r[1],_t(a,"fromEvent",t,e,a.fromBinder(function(n){return i.call(t,e,n),function(){return o.call(t,e,n)}},n))},a.fromEvent=a.fromEventTarget,a.Observable.prototype.map=function(){var t,e;return e=arguments[0],t=2<=arguments.length?Tt.call(arguments,1):[],B(this,e,t,function(t){return _t(this,"map",t,this.withHandler(function(e){return this.push(e.fmap(t))}))})},a.combineAsArray=function(){var t,e,n,r,i,o,s;for(s=1<=arguments.length?Tt.call(arguments,0):[],1===s.length&&J(s[0])&&(s=s[0]),t=e=0,n=s.length;n>e;t=++e)o=s[t],Q(o)||(s[t]=a.constant(o));return s.length?(i=function(){var t,e,n;for(n=[],t=0,e=s.length;e>t;t++)r=s[t],n.push(new C(r,!0));return n}(),_t.apply(null,[a,"combineAsArray"].concat(Tt.call(s),[a.when(i,function(){var t;return t=1<=arguments.length?Tt.call(arguments,0):[]}).toProperty()]))):a.constant([])},a.onValues=function(){var t,e,n;return n=2<=arguments.length?Tt.call(arguments,0,e=arguments.length-1):(e=0,[]),t=arguments[e++],a.combineAsArray(n).onValues(t)},a.combineWith=function(){var t,e;return t=arguments[0],e=2<=arguments.length?Tt.call(arguments,1):[],_t.apply(null,[a,"combineWith",t].concat(Tt.call(e),[a.combineAsArray(e).map(function(e){return t.apply(null,e)})]))},a.combineTemplate=function(t){var e,n,r,i,o,s,u,c,l,f;return u=[],f=[],s=function(t){return t[t.length-1]},l=function(t,e,n){return s(t)[e]=n},e=function(t,e){return function(n,r){return l(n,t,r[e])}},o=function(t,e){return function(n){return l(n,t,e)}},c=function(t){return J(t)?[]:{}},r=function(t,n){var r,a;return Q(n)?(f.push(n),u.push(e(t,f.length-1))):n!==Object(n)||"function"==typeof n||n instanceof RegExp||n instanceof Date?u.push(o(t,n)):(a=function(t){return function(e){var r;return r=c(n),l(e,t,r),e.push(r)}},r=function(t){return t.pop()},u.push(a(t)),i(n),u.push(r))},i=function(t){return A.each(t,r)},i(t),n=function(e){var n,r,i,o,a;for(a=c(t),n=[a],i=0,o=u.length;o>i;i++)(r=u[i])(n,e);return a},_t(a,"combineTemplate",t,a.combineAsArray(f).map(n))},a.Observable.prototype.combine=function(t,e){var n;return n=pt(e),_t(this,"combine",t,e,a.combineAsArray(this,t).map(function(t){return n(t[0],t[1])}))},a.Observable.prototype.decode=function(t){return _t(this,"decode",t,this.combine(a.combineTemplate(t),function(t,e){return e[t]}))},a.Observable.prototype.withStateMachine=function(t,e){var n;return n=t,_t(this,"withStateMachine",t,e,this.withHandler(function(t){var r,i,o,s,u,c,l;for(r=e(n,t),s=r[0],c=r[1],n=s,l=a.more,i=0,o=c.length;o>i;i++)if(u=c[i],l=this.push(u),l===a.noMore)return l;return l}))},a.Observable.prototype.skipDuplicates=function(t){return null==t&&(t=function(t,e){return t===e}),_t(this,"skipDuplicates",this.withStateMachine(_,function(e,n){return n.hasValue()?n.isInitial()||e===_||!t(e.get(),n.value())?[new T(n.value()),[n]]:[e,[]]:[e,[n]]}))},a.Observable.prototype.awaiting=function(t){return _t(this,"awaiting",t,a.groupSimultaneous(this,t).map(function(t){var e,n;return e=t[0],n=t[1],0===n.length}).toProperty(!1).skipDuplicates())},a.Observable.prototype.not=function(){return _t(this,"not",this.map(function(t){return!t}))},a.Property.prototype.and=function(t){return _t(this,"and",t,this.combine(t,function(t,e){return t&&e}))},a.Property.prototype.or=function(t){return _t(this,"or",t,this.combine(t,function(t,e){return t||e}))},a.scheduler={setTimeout:function(t,e){return setTimeout(t,e)},setInterval:function(t,e){return setInterval(t,e)},clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)},now:function(){return(new Date).getTime()}},a.EventStream.prototype.bufferWithTime=function(t){return _t(this,"bufferWithTime",t,this.bufferWithTimeOrCount(t,Number.MAX_VALUE))},a.EventStream.prototype.bufferWithCount=function(t){return _t(this,"bufferWithCount",t,this.bufferWithTimeOrCount(void 0,t))},a.EventStream.prototype.bufferWithTimeOrCount=function(t,e){var n;return n=function(n){return n.values.length===e?n.flush():void 0!==t?n.schedule():void 0},_t(this,"bufferWithTimeOrCount",t,e,this.buffer(t,n,n))},a.EventStream.prototype.buffer=function(t,e,n){var r,i,o;return null==e&&(e=st),null==n&&(n=st),r={scheduled:null,end:void 0,values:[],flush:function(){var t;if(this.scheduled&&(a.scheduler.clearTimeout(this.scheduled),this.scheduled=null),this.values.length>0){if(t=this.push(at(this.values)),this.values=[],null!=this.end)return this.push(this.end);if(t!==a.noMore)return n(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){return this.scheduled?void 0:this.scheduled=t(function(t){return function(){return t.flush()}}(this))}},o=a.more,A.isFunction(t)||(i=t,t=function(t){return a.scheduler.setTimeout(t,i)}),_t(this,"buffer",this.withHandler(function(t){return r.push=function(t){return function(e){return t.push(e)}}(this),t.isError()?o=this.push(t):t.isEnd()?(r.end=t,r.scheduled||r.flush()):(r.values.push(t.value()),e(r)),o}))},a.Observable.prototype.filter=function(){var t,e;return e=arguments[0],t=2<=arguments.length?Tt.call(arguments,1):[],B(this,e,t,function(t){return _t(this,"filter",t,this.withHandler(function(e){return e.filter(t)?this.push(e):a.more}))})},a.once=function(t){return new v(U(a,"once",t),function(e){return e(dt(t)),e(q()),st})},a.EventStream.prototype.concat=function(t){var e;return e=this,new v(U(e,"concat",t),function(n){var r,i;return i=st,r=e.dispatcher.subscribe(function(e){return e.isEnd()?i=t.dispatcher.subscribe(n):n(e)}),function(){return r(),i()}})},a.Observable.prototype.flatMap=function(){return z(this,ot(arguments))},a.Observable.prototype.flatMapFirst=function(){return z(this,ot(arguments),!0)},z=function(t,e,n,r){var i,o,s;return s=[t],i=[],o=new v(U(t,"flatMap"+(n?"First":""),e),function(o){var s,u,l,f,h;return l=new c,f=[],h=function(t){var n;return n=it(e(t.value())),i.push(n),l.add(function(t,e){return n.dispatcher.subscribe(function(r){var c;return r.isEnd()?(A.remove(n,i),u(),s(e),a.noMore):(r instanceof y&&(r=r.toNext()),c=o(r),c===a.noMore&&t(),c)})})},u=function(){var t;return t=f.shift(),t?h(t):void 0},s=function(t){return t(),l.empty()?o(q()):void 0},l.add(function(e,i){return t.dispatcher.subscribe(function(t){return t.isEnd()?s(i):t.isError()?o(t):n&&l.count()>1?a.more:l.unsubscribed?a.noMore:r&&l.count()>r?f.push(t):h(t)})}),l.unsubscribe}),o.internalDeps=function(){return i.length?s.concat(i):s},o},ot=function(t){return 1===t.length&&Q(t[0])?A.always(t[0]):nt(t)},it=function(t){return Q(t)?t:a.once(t)},a.Observable.prototype.flatMapWithConcurrencyLimit=function(){var t,e;return e=arguments[0],t=2<=arguments.length?Tt.call(arguments,1):[],_t.apply(null,[this,"flatMapWithConcurrencyLimit",e].concat(Tt.call(t),[z(this,ot(t),!1,e)]))},a.Observable.prototype.flatMapConcat=function(){return _t.apply(null,[this,"flatMapConcat"].concat(Tt.call(arguments),[this.flatMapWithConcurrencyLimit.apply(this,[1].concat(Tt.call(arguments)))]))},k=function(t,e){var n;return n=new v(U(t,"justInitValue"),function(e){var r,i;return i=void 0,r=t.dispatcher.subscribe(function(t){return t.isEnd()||(i=t),
a.noMore}),S.whenDoneWith(n,function(){return null!=i&&e(i),e(q())}),r}),n.concat(e).toProperty()},a.Observable.prototype.mapEnd=function(){var t;return t=nt(arguments),_t(this,"mapEnd",t,this.withHandler(function(e){return e.isEnd()?(this.push(at(t(e))),this.push(q()),a.noMore):this.push(e)}))},a.Observable.prototype.skipErrors=function(){return _t(this,"skipErrors",this.withHandler(function(t){return t.isError()?a.more:this.push(t)}))},a.EventStream.prototype.takeUntil=function(t){var e;return e={},_t(this,"takeUntil",t,a.groupSimultaneous(this.mapEnd(e),t.skipErrors()).withHandler(function(n){var r,i,o,s,u,c;if(n.hasValue()){if(s=n.value(),r=s[0],t=s[1],t.length)return this.push(q());for(u=a.more,i=0,o=r.length;o>i;i++)c=r[i],u=this.push(c===e?q():at(c));return u}return this.push(n)}))},a.Property.prototype.takeUntil=function(t){var e;return e=this.changes().takeUntil(t),_t(this,"takeUntil",t,k(this,e))},a.Observable.prototype.flatMapLatest=function(){var t,e;return t=ot(arguments),e=this.toEventStream(),_t(this,"flatMapLatest",t,e.flatMap(function(n){return it(t(n)).takeUntil(e)}))},a.fromPoll=function(t,e){return _t(a,"fromPoll",t,e,a.fromBinder(function(e){var n;return n=a.scheduler.setInterval(e,t),function(){return a.scheduler.clearInterval(n)}},e))},a.later=function(t,e){return _t(a,"later",t,e,a.fromBinder(function(n){var r,i;return i=function(){return n([e,q()])},r=a.scheduler.setTimeout(i,t),function(){return a.scheduler.clearTimeout(r)}}))},a.sequentially=function(t,e){var n;return n=0,_t(a,"sequentially",t,e,a.fromPoll(t,function(){var t;return t=e[n++],n<e.length?t:n===e.length?[t,q()]:q()}))},a.repeatedly=function(t,e){var n;return n=0,_t(a,"repeatedly",t,e,a.fromPoll(t,function(){return e[n++%e.length]}))},a.interval=function(t,e){return null==e&&(e={}),_t(a,"interval",t,e,a.fromPoll(t,function(){return at(e)}))},a.EventStream.prototype.delay=function(t){return _t(this,"delay",t,this.flatMap(function(e){return a.later(t,e)}))},a.Property.prototype.delay=function(t){return this.delayChanges("delay",t,function(e){return e.delay(t)})},a.Property.prototype.delayChanges=function(){var t,e,n;return t=2<=arguments.length?Tt.call(arguments,0,n=arguments.length-1):(n=0,[]),e=arguments[n++],_t.apply(null,[this].concat(Tt.call(t),[k(this,e(this.changes()))]))},a.Observable.prototype.bufferingThrottle=function(t){return _t(this,"bufferingThrottle",t,this.flatMapConcat(function(e){return a.once(e).concat(a.later(t).filter(!1))}))},a.Property.prototype.bufferingThrottle=function(){return a.Observable.prototype.bufferingThrottle.apply(this,arguments).toProperty()},u=function(t){function e(){this.guardedSink=Ct(this.guardedSink,this),this.subscribeAll=Ct(this.subscribeAll,this),this.unsubAll=Ct(this.unsubAll,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,e.__super__.constructor.call(this,U(a,"Bus"),this.subscribeAll)}return Et(e,t),e.prototype.unsubAll=function(){var t,e,n,r;for(n=this.subscriptions,t=0,e=n.length;e>t;t++)r=n[t],"function"==typeof r.unsub&&r.unsub();return void 0},e.prototype.subscribeAll=function(t){var e,n,r,i;for(this.sink=t,r=D(this.subscriptions),e=0,n=r.length;n>e;e++)i=r[e],this.subscribeInput(i);return this.unsubAll},e.prototype.guardedSink=function(t){return function(e){return function(n){return n.isEnd()?(e.unsubscribeInput(t),a.noMore):e.sink(n)}}(this)},e.prototype.subscribeInput=function(t){return t.unsub=t.input.dispatcher.subscribe(this.guardedSink(t.input))},e.prototype.unsubscribeInput=function(t){var e,n,r,i,o;for(i=this.subscriptions,e=n=0,r=i.length;r>n;e=++n)if(o=i[e],o.input===t)return"function"==typeof o.unsub&&o.unsub(),void this.subscriptions.splice(e,1)},e.prototype.plug=function(t){var e;return P(t),this.ended?void 0:(e={input:t},this.subscriptions.push(e),null!=this.sink&&this.subscribeInput(e),function(e){return function(){return e.unsubscribeInput(t)}}(this))},e.prototype.end=function(){return this.ended=!0,this.unsubAll(),"function"==typeof this.sink?this.sink(q()):void 0},e.prototype.push=function(t){return"function"==typeof this.sink?this.sink(at(t)):void 0},e.prototype.error=function(t){return"function"==typeof this.sink?this.sink(new d(t)):void 0},e}(v),a.Bus=u,tt=function(t,e){return wt(function(){var n,r,i;return r=arguments[0],n=2<=arguments.length?Tt.call(arguments,1):[],i=ut(e,[function(t,e){return r.apply(null,Tt.call(t).concat([e]))}]),_t.apply(null,[a,t,r].concat(Tt.call(n),[a.combineAsArray(n).flatMap(i)]))})},a.fromCallback=tt("fromCallback",function(){var t,e;return e=arguments[0],t=2<=arguments.length?Tt.call(arguments,1):[],a.fromBinder(function(n){return et(e,t)(n),st},function(t){return[t,q()]})}),a.fromNodeCallback=tt("fromNodeCallback",function(){var t,e;return e=arguments[0],t=2<=arguments.length?Tt.call(arguments,1):[],a.fromBinder(function(n){return et(e,t)(n),st},function(t,e){return t?[new d(t),q()]:[e,q()]})}),a.EventStream.prototype.debounce=function(t){return _t(this,"debounce",t,this.flatMapLatest(function(e){return a.later(t,e)}))},a.Property.prototype.debounce=function(t){return this.delayChanges("debounce",t,function(e){return e.debounce(t)})},a.EventStream.prototype.debounceImmediate=function(t){return _t(this,"debounceImmediate",t,this.flatMapFirst(function(e){return a.once(e).concat(a.later(t).filter(!1))}))},a.Observable.prototype.scan=function(t,e){var n,r,i;return e=pt(e),n=gt(t),i=function(t){return function(i){var o,s,u,c;return o=!1,c=st,s=a.more,u=function(){return o?void 0:n.forEach(function(t){return o=!0,s=i(new y(function(){return t})),s===a.noMore?(c(),c=st):void 0})},c=t.dispatcher.subscribe(function(t){var r,c;return t.hasValue()?o&&t.isInitial()?a.more:(t.isInitial()||u(),o=!0,c=n.getOrElse(void 0),r=e(c,t.value()),n=new T(r),i(t.apply(function(){return r}))):(t.isEnd()&&(s=u()),s!==a.noMore?i(t):void 0)}),S.whenDoneWith(r,u),c}}(this),r=new x(U(this,"scan",t,e),i)},a.Observable.prototype.diff=function(t,e){return e=pt(e),_t(this,"diff",t,e,this.scan([t],function(t,n){return[n,e(t[0],n)]}).filter(function(t){return 2===t.length}).map(function(t){return t[1]}))},a.Observable.prototype.doAction=function(){var t;return t=nt(arguments),_t(this,"doAction",t,this.withHandler(function(e){return e.hasValue()&&t(e.value()),this.push(e)}))},a.Observable.prototype.endOnError=function(){var t,e;return e=arguments[0],t=2<=arguments.length?Tt.call(arguments,1):[],null==e&&(e=!0),B(this,e,t,function(t){return _t(this,"endOnError",this.withHandler(function(e){return e.isError()&&t(e.error)?(this.push(e),this.push(q())):this.push(e)}))})},w.prototype.errors=function(){return _t(this,"errors",this.filter(function(){return!1}))},bt=function(t){return[t,q()]},a.fromPromise=function(t,e){return _t(a,"fromPromise",t,a.fromBinder(function(n){var r;return null!=(r=t.then(n,function(t){return n(new d(t))}))&&"function"==typeof r.done&&r.done(),function(){return e&&"function"==typeof t.abort?t.abort():void 0}},bt))},a.Observable.prototype.mapError=function(){var t;return t=nt(arguments),_t(this,"mapError",t,this.withHandler(function(e){return this.push(e.isError()?at(t(e.error)):e)}))},a.Observable.prototype.flatMapError=function(t){return _t(this,"flatMapError",t,this.mapError(function(t){return new d(t)}).flatMap(function(e){return e instanceof d?t(e.error):a.once(e)}))},a.EventStream.prototype.sampledBy=function(t,e){return _t(this,"sampledBy",t,e,this.toProperty().sampledBy(t,e))},a.Property.prototype.sampledBy=function(t,e){var n,r,i,o,s;return null!=e?e=pt(e):(n=!0,e=function(t){return t.value()}),s=new C(this,!1,n),i=new C(t,!0,n),o=a.when([s,i],e),r=t instanceof x?o.toProperty():o,_t(this,"sampledBy",t,e,r)},a.Property.prototype.sample=function(t){return _t(this,"sample",t,this.sampledBy(a.interval(t,{})))},a.Observable.prototype.map=function(){var t,e;return e=arguments[0],t=2<=arguments.length?Tt.call(arguments,1):[],e instanceof x?e.sampledBy(this,Y):B(this,e,t,function(t){return _t(this,"map",t,this.withHandler(function(e){return this.push(e.fmap(t))}))})},a.Observable.prototype.fold=function(t,e){return _t(this,"fold",t,e,this.scan(t,e).sampledBy(this.filter(!1).mapEnd().toProperty()))},w.prototype.reduce=w.prototype.fold,a.EventStream.prototype.merge=function(t){var e;return M(t),e=this,_t(e,"merge",t,a.mergeAll(this,t))},a.mergeAll=function(){var t;return t=1<=arguments.length?Tt.call(arguments,0):[],J(t[0])&&(t=t[0]),t.length?new v(U.apply(null,[a,"mergeAll"].concat(Tt.call(t))),function(e){var n,r,i;return n=0,i=function(r){return function(i){return r.dispatcher.subscribe(function(r){var o;return r.isEnd()?(n++,n===t.length?e(q()):a.more):(o=e(r),o===a.noMore&&i(),o)})}},r=A.map(i,t),new a.CompositeUnsubscribe(r).unsubscribe}):a.never()},a.Observable.prototype.take=function(t){return 0>=t?a.never():_t(this,"take",t,this.withHandler(function(e){return e.hasValue()?(t--,t>0?this.push(e):(0===t&&this.push(e),this.push(q()),a.noMore)):this.push(e)}))},a.fromArray=function(t){var e;return j(t),t.length?(e=0,new v(U(a,"fromArray",t),function(n){var r,i,o;return o=!1,i=a.more,r=function(){var s;return i===a.noMore||o||(s=t[e++],i=n(dt(s)),i===a.noMore)?void 0:e===t.length?n(q()):S.afterTransaction(r)},r(),function(){return o=!0}})):_t(a,"fromArray",t,a.never())},a.EventStream.prototype.holdWhen=function(t){var e,n,r;return r=t.startWith(!1),n=r.filter(function(t){return!t}),e=r.filter(A.id),_t(this,"holdWhen",t,this.filter(!1).merge(r.flatMapConcat(function(t){return function(r){return r?t.scan([],function(t,e){return t.concat([e])}).sampledBy(n).take(1).flatMap(a.fromArray):t.takeUntil(e)}}(this))))},a.$={},a.$.asEventStream=function(t,e,n){var r;return A.isFunction(e)&&(r=[e,void 0],n=r[0],e=r[1]),_t(this.selector||this,"asEventStream",t,a.fromBinder(function(n){return function(r){return n.on(t,e,r),function(){return n.off(t,e,r)}}}(this),n))},null!=(lt="undefined"!=typeof jQuery&&null!==jQuery?jQuery:"undefined"!=typeof Zepto&&null!==Zepto?Zepto:void 0)&&(lt.fn.asEventStream=a.$.asEventStream),a.Observable.prototype.log=function(){var t;return t=1<=arguments.length?Tt.call(arguments,0):[],this.subscribe(function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log.apply(console,Tt.call(t).concat([e.log()])):void 0}),this},a.repeat=function(t){var e;return e=0,a.fromBinder(function(n){var r,i,o,s,u;return r=!1,o=a.more,u=function(){},i=function(t){return t.isEnd()?r?s():r=!0:o=n(t)},s=function(){var s;for(r=!0;r&&o!==a.noMore;)s=t(e++),r=!1,s?u=s.subscribeInternal(i):n(q());return r=!0},s(),function(){return u()}})},a.retry=function(t){var e,n,r,i,o,s,u;if(!A.isFunction(t.source))throw new g("'source' option has to be a function");return u=t.source,s=t.retries||0,o=t.maxRetries||s,e=t.delay||function(){return 0},i=t.isRetryable||function(){return!0},r=!1,n=null,_t(a,"retry",t,a.repeat(function(){var t,c,l;return r?null:(l=function(){return u().endOnError().withHandler(function(t){return t.isError()?(n=t,i(n.error)&&s>0?void 0:(r=!0,this.push(t))):(t.hasValue()&&(n=null,r=!0),this.push(t))})},n?(t={error:n.error,retriesDone:o-s},c=a.later(e(t)).filter(!1),s-=1,c.concat(a.once().flatMap(l))):l())}))},a.Observable.prototype.skip=function(t){return _t(this,"skip",t,this.withHandler(function(e){return e.hasValue()&&t>0?(t--,a.more):this.push(e)}))},a.EventStream.prototype.skipUntil=function(t){var e;return e=t.take(1).map(!0).toProperty(!1),_t(this,"skipUntil",t,this.filter(e))},a.EventStream.prototype.skipWhile=function(){var t,e,n;return e=arguments[0],t=2<=arguments.length?Tt.call(arguments,1):[],n=!1,B(this,e,t,function(t){return _t(this,"skipWhile",t,this.withHandler(function(e){return!n&&e.hasValue()&&t(e.value())?a.more:(e.hasValue()&&(n=!0),this.push(e))}))})},a.Observable.prototype.slidingWindow=function(t,e){return null==e&&(e=0),_t(this,"slidingWindow",t,e,this.scan([],function(e,n){return e.concat([n]).slice(-t)}).filter(function(t){return t.length>=e}))},a.spy=function(t){return ht.push(t)},ht=[],ft=function(t){var e,n,r;if(ht.length&&!ft.running)try{for(ft.running=!0,e=0,n=ht.length;n>e;e++)(r=ht[e])(t)}finally{delete ft.running}return void 0},a.Property.prototype.startWith=function(t){return _t(this,"startWith",t,this.scan(t,function(t,e){return e}))},a.EventStream.prototype.startWith=function(t){return _t(this,"startWith",t,a.once(t).concat(this))},a.Observable.prototype.takeWhile=function(){var t,e;return e=arguments[0],t=2<=arguments.length?Tt.call(arguments,1):[],B(this,e,t,function(t){return _t(this,"takeWhile",t,this.withHandler(function(e){return e.filter(t)?this.push(e):(this.push(q()),a.noMore)}))})},a.update=function(){var t,e,n,r;for(e=arguments[0],r=2<=arguments.length?Tt.call(arguments,1):[],n=function(t){return function(){var e;return e=1<=arguments.length?Tt.call(arguments,0):[],function(n){return t.apply(null,[n].concat(e))}}},t=r.length-1;t>0;)r[t]instanceof Function||(r[t]=function(t){return function(){return t}}(r[t])),r[t]=n(r[t]),t-=2;return _t.apply(null,[a,"update",e].concat(Tt.call(r),[a.when.apply(a,r).scan(e,function(t,e){return e(t)})]))},a.zipAsArray=function(){var t;return t=1<=arguments.length?Tt.call(arguments,0):[],J(t[0])&&(t=t[0]),_t.apply(null,[a,"zipAsArray"].concat(Tt.call(t),[a.zipWith(t,function(){var t;return t=1<=arguments.length?Tt.call(arguments,0):[]})]))},a.zipWith=function(){var t,e,n;return t=arguments[0],n=2<=arguments.length?Tt.call(arguments,1):[],A.isFunction(t)||(e=[t,n[0]],n=e[0],t=e[1]),n=A.map(function(t){return t.toEventStream()},n),_t.apply(null,[a,"zipWith",t].concat(Tt.call(n),[a.when(n,t)]))},a.Observable.prototype.zip=function(t,e){return null==e&&(e=Array),_t(this,"zip",t,a.zipWith([this,t],e))},a.Observable.prototype.first=function(){return _t(this,"first",this.take(1))},a.Observable.prototype.last=function(){var t;return _t(this,"last",this.withHandler(function(e){return e.isEnd()?(t&&this.push(t),this.push(q()),a.noMore):void(t=e)}))},a.EventStream.prototype.throttle=function(t){return _t(this,"throttle",t,this.bufferWithTime(t).map(function(t){return t[t.length-1]}))},a.Property.prototype.throttle=function(t){return this.delayChanges("throttle",t,function(e){return e.throttle(t)})},w.prototype.firstToPromise=function(t){var e=this;if("function"!=typeof t){if("function"!=typeof Promise)throw new g("There isn't default Promise, use shim or parameter");t=Promise}return new t(function(t,n){return e.subscribe(function(e){return e.hasValue()&&t(e.value()),e.isError()&&n(e.error),a.noMore})})},w.prototype.toPromise=function(t){return this.last().firstToPromise(t)},null!==n(391)&&null!=n(255)?(r=[],i=function(){return a}.apply(e,r),!(void 0!==i&&(o.exports=i)),this.Bacon=a):"undefined"!=typeof o&&null!==o&&null!=o.exports?(o.exports=a,a.Bacon=a):this.Bacon=a}).call(this)}).call(e,function(){return this}(),n(79)(t))},function(t,e,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(252)),o=void 0,a=0;o=window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},o.synchronize=function(t){function e(t){a=t+Date.now()-o()}function n(t,n){t?console.error("Cannot synchronize time!",t):(e(n),console.log("Synchronized. Offset = "+a))}i(t,n,e)},o["synchronized"]=function(){var t=a;return function(){return o()+t}},e.now=o,e["default"]=o},function(t,e,n){"use strict";function r(t,e){e=e||{},u.call(this);var n=i.defaults(e.numberOfInputs,1),r=i.defaults(e.numberOfOutputs,1),o=i.defaults(e.channelCount,2),a=i.defaults(e.channelCountMode,"max"),s=i.defaults(e.channelInterpretation,"speakers");i.defineAttribute(this,"context","readonly",t,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"numberOfInputs","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"numberOfOutputs","readonly",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"channelCount","number",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"channelCountMode",c,a,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"channelInterpretation",l,s,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$name:{value:i.defaults(e.name,"AudioNode")},$context:{value:t},$inputs:{value:[]}}),this._outputs=[],this._tick=-1}var i=n(29),o=n(122),a=n(28),s=n(254),u=n(390),c="enum { max, clamped-max, explicit }",l="enum { speakers, discrete }",f=function(){throw new TypeError("Illegal constructor")};i.inherits(f,u),i.inherits(r,f),r.exports=f,f.prototype.connect=function(t){function e(t){return this.$context!==t.$context?"cannot connect to a destination belonging to a different audio context":void 0}function n(t,e){return 0>t||this.numberOfOutputs<=t?e+" index ("+t+") exceeds number of outputs ("+this.numberOfOutputs+")":void 0}function r(e,n){return 0>e||t.numberOfInputs<=e?n+" index ("+e+") exceeds number of inputs ("+t.numberOfInputs+")":void 0}var i=new o(this,"connect",[{name:"destination",type:"AudioNode | AudioParam",validate:e},{name:"output",type:"optional number",validate:n},{name:"input",type:"optional number",validate:r}]);i.validateArguments(arguments,function(t){throw new TypeError(i.form+"; "+t)});var a=this._outputs.indexOf(t);-1===a&&(this._outputs.push(t),t.$inputs.push(this))},f.prototype.disconnect=function(){function t(t,e){return 0>t||this.numberOfOutputs<=t?e+" index ("+t+") exceeds number of outputs ("+this.numberOfOutputs+")":void 0}var e=new o(this,"connect",[{name:"output",type:"optional number",validate:t}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),this._outputs.splice(0).forEach(function(t){var e=t.$inputs.indexOf(this);-1!==e&&t.$inputs.splice(e,1)},this)},r.prototype.toJSON=function(t){return i.toJSON(this,function(t,e){var n={};return n.name=i.name(t),(t.constructor.jsonAttrs||[]).forEach(function(r){t[r]&&t[r].toJSON?n[r]=t[r].toJSON(e):n[r]=t[r]}),t.$context.VERBOSE_JSON&&(n.numberOfInputs=t.numberOfInputs,n.numberOfOutputs=t.numberOfOutputs,n.channelCount=t.channelCount,n.channelCountMode=t.channelCountMode,n.channelInterpretation=t.channelInterpretation),n.inputs=t.$inputs.map(function(t){return t.toJSON(e)}),n},t)},r.prototype.$process=function(t,e){this._tick!==e&&(this._tick=e,this.$inputs.forEach(function(n){n.$process(t,e)}),Object.keys(this).forEach(function(n){this[n]instanceof s&&this[n].$process(t,e)},this),this._process&&this._process(t))},t.exports=a.AudioNode=r},function(module,exports,__webpack_require__){"use strict";function createFunction(code){var fn=eval("(function(get) { return "+code+" })");return fn.displayName="("+code+")",fn.constant=!!/^[\-0-9\.]+$/.test(code),fn}function Expression(t){log("parsing %s",t);var e=parser.parse(t);log("parsed %s => %s",t,e);var n=createFunction(e),r=void 0;return r=n.constant?n:function(t){return n(function(e){return t[e]})},r.constant=n.constant,r}var _interopRequire=function(t){return t&&t.__esModule?t["default"]:t};exports.Expression=Expression,Object.defineProperty(exports,"__esModule",{value:!0});var debug=_interopRequire(__webpack_require__(133)),log=debug("scintillator:expression"),parser=_interopRequire(__webpack_require__(366));exports["default"]=Expression},function(t,e,n){"use strict";function r(t){return"probably"===l.canPlayType(t)}function i(t){var e=t.createGain();e.connect(t.destination),e.disconnect()}var o=function(t){return t&&t.__esModule?t["default"]:t},a=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};e.canPlay=r,e.unmuteAudio=i,Object.defineProperty(e,"__esModule",{value:!0});var u=o(n(77)),c=o(n(120)),l=document.createElement("audio"),f=e.SamplingMaster=function(){function t(e){s(this,t),this._audioContext=e||c,this._samples=[],this._instances=new Set}return a(t,{unmute:{value:function(){i(this._audioContext)}},audioContext:{get:function(){return this._audioContext}},destroy:{value:function(){if(!this._destroyed){this._destroyed=!0;var t=!0,e=!1,n=void 0;try{for(var r,i=this._samples[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.destroy()}}catch(a){e=!0,n=a}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}var s=!0,u=!1,c=void 0;try{for(var l,f=this._instances[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;h.destroy()}}catch(a){u=!0,c=a}finally{try{!s&&f["return"]&&f["return"]()}finally{if(u)throw c}}this._samples=null,this._instances=null}}},sample:{value:function(t){var e=this;return this._coerceToArrayBuffer(t).then(function(t){return e._decodeAudio(t)}).then(function(t){if(e._destroyed)throw new Error("SamplingMaster already destroyed!");var n=new h(e,t);return e._samples.push(n),n})}},_coerceToArrayBuffer:{value:function(t){return t instanceof ArrayBuffer?Promise.resolve(t):u(t).as("arraybuffer")}},_decodeAudio:{value:function(t){var e=this;return new Promise(function(n,r){e.audioContext.decodeAudioData(t,function(t){n(t)},function(t){r("Unable to decode audio: "+t)})})}},_startPlaying:{value:function(t){this._instances.add(t)}},_stoppedPlaying:{value:function(t){this._instances["delete"](t)}}}),t}(),h=function(){function t(e,n){s(this,t),this._master=e,this._buffer=n}return a(t,{play:{value:function(t,e){return new p(this._master,this._buffer,t,e)}},destroy:{value:function(){this._master=null,this._buffer=null}}}),t}(),p=function(){function t(e,n,r,i){var o=this;s(this,t),r=r||0,this._master=e;var a=e.audioContext,u=a.createBufferSource();u.buffer=n,u.onended=function(){return o.stop()};var c=a.createGain();u.connect(c),c.connect(i||a.destination),this._source=u,this._gain=c,u.start(r?Math.max(0,a.currentTime+r):0),this._master._startPlaying(this)}return a(t,{stop:{value:function(){this._source&&(this._source.stop(0),this._source.disconnect(),this._gain.disconnect(),this._source=null,this._gain=null,this._master._stoppedPlaying(this),this.onstop&&this.onstop())}},bad:{value:function(){this._source&&(this._source.playbackRate.value=Math.random()<.5?Math.pow(2,1/12):Math.pow(2,-1/12))}},destroy:{value:function(){this.stop()}}}),t}();e["default"]=f},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};n(251);var i=r(n(6)),o=r(n(39));t.exports=i.createClass({displayName:"scene",render:function(){return i.createElement("div",{className:o("scene",this.props.className)},this.props.children)}})},function(t,e,n){function r(t){var e=!1;return{when:function(n,r){if(e)return this;var i=t.match(n);return i&&(e=!0,r(i)),this},"else":function(t){return e?this:void t()}}}t.exports=r},function(t,e,n){"use strict";function r(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var i={boxFlex:!0,boxFlexGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},o=["Webkit","ms","Moz","O"];Object.keys(i).forEach(function(t){o.forEach(function(e){i[r(e,t)]=i[t]})});var a={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},s={isUnitlessNumber:i,shorthandPropertyExpansions:a};t.exports=s},function(t,e,n){(function(e){"use strict";var r=n(86),i=n(9),o=n(204),a=n(208),s=n(215),u=n(218),c=n(5),l=u(function(t){return s(t)}),f="cssFloat";if(i.canUseDOM&&void 0===document.documentElement.style.cssFloat&&(f="styleFloat"),"production"!==e.env.NODE_ENV)var h=/^(?:webkit|moz|o)[A-Z]/,p=/;\s*$/,d={},m={},v=function(t){d.hasOwnProperty(t)&&d[t]||(d[t]=!0,"production"!==e.env.NODE_ENV?c(!1,"Unsupported style property %s. Did you mean %s?",t,o(t)):null)},g=function(t){d.hasOwnProperty(t)&&d[t]||(d[t]=!0,"production"!==e.env.NODE_ENV?c(!1,"Unsupported vendor-prefixed style property %s. Did you mean %s?",t,t.charAt(0).toUpperCase()+t.slice(1)):null)},y=function(t,n){m.hasOwnProperty(n)&&m[n]||(m[n]=!0,"production"!==e.env.NODE_ENV?c(!1,'Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.',t,n.replace(p,"")):null)},b=function(t,e){t.indexOf("-")>-1?v(t):h.test(t)?g(t):p.test(e)&&y(t,e)};var _={createMarkupForStyles:function(t){var n="";for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];"production"!==e.env.NODE_ENV&&b(r,i),null!=i&&(n+=l(r)+":",n+=a(r,i)+";")}return n||null},setValueForStyles:function(t,n){var i=t.style;for(var o in n)if(n.hasOwnProperty(o)){"production"!==e.env.NODE_ENV&&b(o,n[o]);var s=a(o,n[o]);if("float"===o&&(o=f),s)i[o]=s;else{var u=r.shorthandPropertyExpansions[o];if(u)for(var c in u)i[c]="";else i[o]=""}}}};t.exports=_}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(){if(s)for(var t in u){var n=u[t],r=s.indexOf(t);if("production"!==e.env.NODE_ENV?a(r>-1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",t):a(r>-1),!c.plugins[r]){"production"!==e.env.NODE_ENV?a(n.extractEvents,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",t):a(n.extractEvents),c.plugins[r]=n;var o=n.eventTypes;for(var l in o)"production"!==e.env.NODE_ENV?a(i(o[l],n,l),"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",l,t):a(i(o[l],n,l))}}}function i(t,n,r){"production"!==e.env.NODE_ENV?a(!c.eventNameDispatchConfigs.hasOwnProperty(r),"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",r):a(!c.eventNameDispatchConfigs.hasOwnProperty(r)),c.eventNameDispatchConfigs[r]=t;var i=t.phasedRegistrationNames;if(i){for(var s in i)if(i.hasOwnProperty(s)){var u=i[s];o(u,n,r)}return!0}return t.registrationName?(o(t.registrationName,n,r),!0):!1}function o(t,n,r){"production"!==e.env.NODE_ENV?a(!c.registrationNameModules[t],"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",t):a(!c.registrationNameModules[t]),c.registrationNameModules[t]=n,c.registrationNameDependencies[t]=n.eventTypes[r].dependencies}var a=n(2),s=null,u={},c={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(t){"production"!==e.env.NODE_ENV?a(!s,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."):a(!s),s=Array.prototype.slice.call(t),r()},injectEventPluginsByName:function(t){var n=!1;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];u.hasOwnProperty(i)&&u[i]===o||("production"!==e.env.NODE_ENV?a(!u[i],"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",i):a(!u[i]),u[i]=o,n=!0)}n&&r()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return c.registrationNameModules[e.registrationName]||null;for(var n in e.phasedRegistrationNames)if(e.phasedRegistrationNames.hasOwnProperty(n)){var r=c.registrationNameModules[e.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){s=null;for(var t in u)u.hasOwnProperty(t)&&delete u[t];c.plugins.length=0;var e=c.eventNameDispatchConfigs;for(var n in e)e.hasOwnProperty(n)&&delete e[n];var r=c.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};t.exports=c}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(t,e){this.props=t,this.context=e}var i=n(65),o=n(2),a=n(5);if(r.prototype.setState=function(t,n){"production"!==e.env.NODE_ENV?o("object"==typeof t||"function"==typeof t||null==t,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."):o("object"==typeof t||"function"==typeof t||null==t),"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?a(null!=t,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."):null),i.enqueueSetState(this,t),n&&i.enqueueCallback(this,n)},r.prototype.forceUpdate=function(t){i.enqueueForceUpdate(this),t&&i.enqueueCallback(this,t)},"production"!==e.env.NODE_ENV){var s={getDOMNode:"getDOMNode",isMounted:"isMounted",replaceProps:"replaceProps",replaceState:"replaceState",setProps:"setProps"},u=function(t,n){try{Object.defineProperty(r.prototype,t,{get:function(){return void("production"!==e.env.NODE_ENV?a(!1,"%s(...) is deprecated in plain JavaScript React classes.",n):null)}})}catch(i){}};for(var c in s)s.hasOwnProperty(c)&&u(c,s[c])}t.exports=r}).call(e,n(1))},function(t,e,n){(function(e){"use strict";var r=n(87),i=n(154),o=n(32),a=n(13),s=n(18),u=n(2),c=n(73),l={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},f={updatePropertyByID:function(t,n,r){var i=a.getNode(t);"production"!==e.env.NODE_ENV?u(!l.hasOwnProperty(n),"updatePropertyByID(...): %s",l[n]):u(!l.hasOwnProperty(n)),null!=r?o.setValueForProperty(i,n,r):o.deleteValueForProperty(i,n)},deletePropertyByID:function(t,n,r){var i=a.getNode(t);"production"!==e.env.NODE_ENV?u(!l.hasOwnProperty(n),"updatePropertyByID(...): %s",l[n]):u(!l.hasOwnProperty(n)),o.deleteValueForProperty(i,n,r)},updateStylesByID:function(t,e){var n=a.getNode(t);r.setValueForStyles(n,e)},updateInnerHTMLByID:function(t,e){var n=a.getNode(t);c(n,e)},updateTextContentByID:function(t,e){var n=a.getNode(t);i.updateTextContent(n,e)},dangerouslyReplaceNodeWithMarkupByID:function(t,e){var n=a.getNode(t);i.dangerouslyReplaceNodeWithMarkup(n,e)},dangerouslyProcessChildrenUpdates:function(t,e){for(var n=0;n<t.length;n++)t[n].parentNode=a.getNode(t[n].parentID);i.processUpdates(t,e)}};s.measureMethods(f,"ReactDOMIDOperations",{updatePropertyByID:"updatePropertyByID",deletePropertyByID:"deletePropertyByID",updateStylesByID:"updateStylesByID",updateInnerHTMLByID:"updateInnerHTMLByID",updateTextContentByID:"updateTextContentByID",dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),t.exports=f}).call(e,n(1))},function(t,e,n){"use strict";var r=n(32),i=n(58),o=n(61),a=n(3),s=n(47),u=function(t){};a(u.prototype,{construct:function(t){this._currentElement=t,this._stringText=""+t,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(t,e,n){this._rootNodeID=t;var i=s(this._stringText);return e.renderToStaticMarkup?i:"<span "+r.createMarkupForID(t)+">"+i+"</span>"},receiveComponent:function(t,e){if(t!==this._currentElement){this._currentElement=t;var n=""+t;n!==this._stringText&&(this._stringText=n,o.BackendIDOperations.updateTextContentByID(this._rootNodeID,n))}},unmountComponent:function(){i.unmountIDFromEnvironment(this._rootNodeID)}}),t.exports=u},function(t,e,n){"use strict";function r(t){return o(document.documentElement,t)}var i=n(174),o=n(99),a=n(101),s=n(102),u={hasSelectionCapabilities:function(t){return t&&("INPUT"===t.nodeName&&"text"===t.type||"TEXTAREA"===t.nodeName||"true"===t.contentEditable)},getSelectionInformation:function(){var t=s();return{focusedElem:t,selectionRange:u.hasSelectionCapabilities(t)?u.getSelection(t):null}},restoreSelection:function(t){var e=s(),n=t.focusedElem,i=t.selectionRange;

e!==n&&r(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,i),a(n))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&"INPUT"===t.nodeName){var n=document.selection.createRange();n.parentElement()===t&&(e={start:-n.moveStart("character",-t.value.length),end:-n.moveEnd("character",-t.value.length)})}else e=i.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var n=e.start,r=e.end;if("undefined"==typeof r&&(r=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(r,t.value.length);else if(document.selection&&"INPUT"===t.nodeName){var o=t.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select()}else i.setOffsets(t,e)}};t.exports=u},function(t,e,n){"use strict";var r=n(202),i={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=r(t);return t.replace(">"," "+i.CHECKSUM_ATTR_NAME+'="'+e+'">')},canReuseMarkup:function(t,e){var n=e.getAttribute(i.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var o=r(t);return o===n}};t.exports=i},function(t,e,n){"use strict";var r=n(37),i=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});t.exports=i},function(t,e,n){"use strict";function r(t){function e(e,n,r,i,o){if(i=i||w,null==n[r]){var a=b[o];return e?new Error("Required "+a+" `"+r+"` was not specified in "+("`"+i+"`.")):null}return t(n,r,i,o)}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function i(t){function e(e,n,r,i){var o=e[n],a=m(o);if(a!==t){var s=b[i],u=v(o);return new Error("Invalid "+s+" `"+n+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `"+t+"`."))}return null}return r(e)}function o(){return r(_.thatReturns(null))}function a(t){function e(e,n,r,i){var o=e[n];if(!Array.isArray(o)){var a=b[i],s=m(o);return new Error("Invalid "+a+" `"+n+"` of type "+("`"+s+"` supplied to `"+r+"`, expected an array."))}for(var u=0;u<o.length;u++){var c=t(o,u,r,i);if(c instanceof Error)return c}return null}return r(e)}function s(){function t(t,e,n,r){if(!g.isValidElement(t[e])){var i=b[r];return new Error("Invalid "+i+" `"+e+"` supplied to "+("`"+n+"`, expected a ReactElement."))}return null}return r(t)}function u(t){function e(e,n,r,i){if(!(e[n]instanceof t)){var o=b[i],a=t.name||w;return new Error("Invalid "+o+" `"+n+"` supplied to "+("`"+r+"`, expected instance of `"+a+"`."))}return null}return r(e)}function c(t){function e(e,n,r,i){for(var o=e[n],a=0;a<t.length;a++)if(o===t[a])return null;var s=b[i],u=JSON.stringify(t);return new Error("Invalid "+s+" `"+n+"` of value `"+o+"` "+("supplied to `"+r+"`, expected one of "+u+"."))}return r(e)}function l(t){function e(e,n,r,i){var o=e[n],a=m(o);if("object"!==a){var s=b[i];return new Error("Invalid "+s+" `"+n+"` of type "+("`"+a+"` supplied to `"+r+"`, expected an object."))}for(var u in o)if(o.hasOwnProperty(u)){var c=t(o,u,r,i);if(c instanceof Error)return c}return null}return r(e)}function f(t){function e(e,n,r,i){for(var o=0;o<t.length;o++){var a=t[o];if(null==a(e,n,r,i))return null}var s=b[i];return new Error("Invalid "+s+" `"+n+"` supplied to "+("`"+r+"`."))}return r(e)}function h(){function t(t,e,n,r){if(!d(t[e])){var i=b[r];return new Error("Invalid "+i+" `"+e+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(t)}function p(t){function e(e,n,r,i){var o=e[n],a=m(o);if("object"!==a){var s=b[i];return new Error("Invalid "+s+" `"+n+"` of type `"+a+"` "+("supplied to `"+r+"`, expected `object`."))}for(var u in t){var c=t[u];if(c){var l=c(o,u,r,i);if(l)return l}}return null}return r(e)}function d(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(d);if(null===t||g.isValidElement(t))return!0;t=y.extractIfFragment(t);for(var e in t)if(!d(t[e]))return!1;return!0;default:return!1}}function m(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":e}function v(t){var e=m(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}var g=n(4),y=n(41),b=n(43),_=n(19),w="<<anonymous>>",x=s(),E=h(),T={array:i("array"),bool:i("boolean"),func:i("function"),number:i("number"),object:i("object"),string:i("string"),any:o(),arrayOf:a,element:x,instanceOf:u,node:E,objectOf:l,oneOf:c,oneOfType:f,shape:p};t.exports=T},function(t,e,n){"use strict";function r(){this.listenersToPut=[]}var i=n(15),o=n(24),a=n(3);a(r.prototype,{enqueuePutListener:function(t,e,n){this.listenersToPut.push({rootNodeID:t,propKey:e,propValue:n})},putListeners:function(){for(var t=0;t<this.listenersToPut.length;t++){var e=this.listenersToPut[t];o.putListener(e.rootNodeID,e.propKey,e.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),i.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";var r={injectCreateReactRootIndex:function(t){i.createReactRootIndex=t}},i={createReactRootIndex:null,injection:r};t.exports=i},function(t,e,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){r.currentScrollLeft=t.x,r.currentScrollTop=t.y}};t.exports=r},function(t,e,n){function r(t,e){return t&&e?t===e?!0:i(t)?!1:i(e)?r(t,e.parentNode):t.contains?t.contains(e):t.compareDocumentPosition?!!(16&t.compareDocumentPosition(e)):!1:!1}var i=n(216);t.exports=r},function(t,e,n){(function(e){"use strict";function r(t){if("production"!==e.env.NODE_ENV){var n=i.current;null!==n&&("production"!==e.env.NODE_ENV?c(n._warnedAboutRefsInRender,"%s is accessing getDOMNode or findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",n.getName()||"A component"):null,n._warnedAboutRefsInRender=!0)}return null==t?null:u(t)?t:o.has(t)?a.getNodeFromInstance(t):("production"!==e.env.NODE_ENV?s(null==t.render||"function"!=typeof t.render,"Component (with keys: %s) contains `render` method but is not mounted in the DOM",Object.keys(t)):s(null==t.render||"function"!=typeof t.render),void("production"!==e.env.NODE_ENV?s(!1,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(t)):s(!1)))}var i=n(17),o=n(26),a=n(13),s=n(2),u=n(106),c=n(5);t.exports=r}).call(e,n(1))},function(t,e,n){"use strict";function r(t){try{t.focus()}catch(e){}}t.exports=r},function(t,e,n){function r(){try{return document.activeElement||document.body}catch(t){return document.body}}t.exports=r},function(t,e,n){"use strict";function r(t){var e=t&&(i&&t[i]||t[o]);return"function"==typeof e?e:void 0}var i="function"==typeof Symbol&&Symbol.iterator,o="@@iterator";t.exports=r},function(t,e,n){(function(e){function r(t){return"production"!==e.env.NODE_ENV?o(!!a,"Markup wrapping node not initialized"):o(!!a),h.hasOwnProperty(t)||(t="*"),s.hasOwnProperty(t)||("*"===t?a.innerHTML="<link />":a.innerHTML="<"+t+"></"+t+">",s[t]=!a.firstChild),s[t]?h[t]:null}var i=n(9),o=n(2),a=i.canUseDOM?document.createElement("div"):null,s={circle:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},u=[1,'<select multiple="true">',"</select>"],c=[1,"<table>","</table>"],l=[3,"<table><tbody><tr>","</tr></tbody></table>"],f=[1,"<svg>","</svg>"],h={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:c,colgroup:c,tbody:c,tfoot:c,thead:c,td:l,th:l,circle:f,defs:f,ellipse:f,g:f,line:f,linearGradient:f,path:f,polygon:f,polyline:f,radialGradient:f,rect:f,stop:f,text:f};t.exports=r}).call(e,n(1))},function(t,e,n){"use strict";function r(){return!o&&i.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var i=n(9),o=null;t.exports=r},function(t,e,n){function r(t){return!(!t||!("function"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}t.exports=r},function(t,e,n){"use strict";function r(t){return t&&("INPUT"===t.nodeName&&i[t.type]||"TEXTAREA"===t.nodeName)}var i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=r},function(t,e,n){(function(e){"use strict";function r(t){return g[t]}function i(t,e){return t&&null!=t.key?a(t.key):e.toString(36)}function o(t){return(""+t).replace(y,r)}function a(t){return"$"+o(t)}function s(t,n,r,o,u){var f=typeof t;if(("undefined"===f||"boolean"===f)&&(t=null),null===t||"string"===f||"number"===f||c.isValidElement(t))return o(u,t,""===n?m+i(t,0):n,r),1;var g,y,_,w=0;if(Array.isArray(t))for(var x=0;x<t.length;x++)g=t[x],y=(""!==n?n+v:m)+i(g,x),_=r+w,w+=s(g,y,_,o,u);else{var E=h(t);if(E){var T,C=E.call(t);if(E!==t.entries)for(var S=0;!(T=C.next()).done;)g=T.value,y=(""!==n?n+v:m)+i(g,S++),_=r+w,w+=s(g,y,_,o,u);else for("production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?d(b,"Using Maps as children is not yet fully supported. It is an experimental feature that might be removed. Convert it to a sequence / iterable of keyed ReactElements instead."):null,b=!0);!(T=C.next()).done;){var A=T.value;A&&(g=A[1],y=(""!==n?n+v:m)+a(A[0])+v+i(g,0),_=r+w,w+=s(g,y,_,o,u))}}else if("object"===f){"production"!==e.env.NODE_ENV?p(1!==t.nodeType,"traverseAllChildren(...): Encountered an invalid child; DOM elements are not valid children of React components."):p(1!==t.nodeType);var k=l.extract(t);for(var O in k)k.hasOwnProperty(O)&&(g=k[O],y=(""!==n?n+v:m)+a(O)+v+i(g,0),_=r+w,w+=s(g,y,_,o,u))}}return w}function u(t,e,n){return null==t?0:s(t,"",0,e,n)}var c=n(4),l=n(41),f=n(25),h=n(103),p=n(2),d=n(5),m=f.SEPARATOR,v=":",g={"=":"=0",".":"=1",":":"=2"},y=/[=.:]/g,b=!1;t.exports=u}).call(e,n(1))},,function(t,e,n){"use strict";function r(){var t=0,e=0,n=0,r=[],o=0,a=0;return{push:function(i){var s=u();for(t+=i,e+=1,n=t/e,o+=i,r.push({delta:i,time:s});r[0]&&r[0].time<s-1e3;)o-=r.shift().delta;a=o/r.length},toString:function(){return i(n)+" / "+i(a)}}}function i(t){return t.toFixed(2)+"ms"}function o(){var t={},e={enabled:!0,stats:t,wrap:function(e,n){return function(){try{var i=u();return n.apply(this,arguments)}finally{var o=u(),a=t[e]||(t[e]=new r(e));a.push(o-i)}}},benchmark:function(t,e,n){e[n]=this.wrap(t,e[n])},toString:function(){var e=[];return Object.keys(t).forEach(function(n){e.push("- "+n+": "+t[n])}),e.join("\n")}},n=document.createElement("div");return n.setAttribute("style","position:fixed;top:10px;right:10px;z-index:99999"),document.body.appendChild(n),l.render(l.createElement(f,{bench:e}),n),e}function a(){return{enabled:!1,wrap:function(t,e){return e}}}var s=function(t){return t&&t.__esModule?t["default"]:t},u=s(n(80)),c=n(124).shouldEnableBenchmark,l=s(n(6)),f=s(n(239));t.exports=window.BEMUSE_BENCHMARK=c()?new o:new a},,function(t,e,n){"use strict";function r(t){t&&t.parentNode===l&&l.removeChild(t)}function i(t){return function(e){var n=c.render(t,e);return n.setProps({scene:t}),{teardown:function(){return Promise["try"](function(){return n.teardown?n.teardown():void 0}).then(function(){c.unmountComponentAtNode(e)})}}}}var o=function(t){return t&&t.__esModule?t["default"]:t},a=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var u=o(n(38)),c=o(n(6)),l=o(n(127)),f=e.SceneManager=function(){function t(){s(this,t),this._transitioning=!1,this._stack=[]}return a(t,{display:{value:function(t){return this._transitionTo(function(){return t})}},push:{value:function(t){var e=this,n=this.currentScene;return this._transitionTo(function(){return e._stack.push(n),t})}},pop:{value:function(){var t=this;return this._transitionTo(function(){return t._stack.pop()})}},_transitionTo:{value:function(t){return u(regeneratorRuntime.mark(function e(){var n,o,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a._transitioning){e.next=2;break}throw new Error("Scene is transitioning!");case 2:if(e.prev=2,a._transitioning=!0,!a.currentSceneInstance){e.next=8;break}return e.next=7,Promise.resolve(a.currentSceneInstance.teardown());case 7:r(a.currentElement);case 8:n=t(),"function"!=typeof n&&(n=new i(n)),o=document.createElement("div"),o.className="scene-manager--scene",l.appendChild(o),a.currentElement=o,a.currentScene=n,a.currentSceneInstance=n(o);case 16:return e.prev=16,a._transitioning=!1,e.finish(16);case 19:case"end":return e.stop()}},e,this,[[2,,16,19]])}).bind(this))}}}),t}(),h=new f;e.instance=h,e["default"]=h},function(t,e,n){"use strict";function r(t){return{as:function(e,n){return new Promise(function(r,o){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType=e,a.onload=function(){200===+a.status?r(a.response):o(new Error("Unable to download "+t+": HTTP "+a.status))},a.onerror=function(){return o(new Error("Unable to download "+t))},n&&(n.formatter=i,a.onprogress=function(t){return n.report(t.loaded,t.total)}),a.send(null)})}}}e.download=r,Object.defineProperty(e,"__esModule",{value:!0});var i=n(75).BYTES_FORMATTER;e["default"]=r},function(t,e,n){function r(){this.headers=new i,this.objects=new o,this.timeSignatures=new a}var i=n(115),o=n(116),a=n(118);t.exports=r,r.prototype.measureToBeat=function(t,e){return this.timeSignatures.measureToBeat(t,e)}},function(t,e,n){function r(){this._data={},this._dataAll={}}t.exports=r,r.prototype.each=function(t){for(var e in this._data)t(e,this._data[e])},r.prototype.get=function(t){return this._data[t.toLowerCase()]},r.prototype.getAll=function(t){return this._dataAll[t.toLowerCase()]},r.prototype.set=function(t,e){var n=t.toLowerCase();this._data[n]=e,(this._dataAll[n]||(this._dataAll[n]=[])).push(e)}},function(t,e,n){function r(){this._objects=[]}t.exports=r,r.prototype.add=function(t){if("01"!==t.channel)for(var e=0;e<this._objects.length;e++){var n=this._objects[e];if(n.channel===t.channel&&n.measure===t.measure&&n.fraction===t.fraction)return void(this._objects[e]=t)}this._objects.push(t)},r.prototype.all=function(){return this._objects.slice()},r.prototype.allSorted=function(){var t=this.all();return t.sort(function(t,e){return t.measure+t.fraction-(e.measure+e.fraction)}),t}},function(t,e,n){function r(t){this._segments=t.map(i)}var i=n(149);t.exports=r;var o=function(t){return t.t},a=function(t){return t.x};r.prototype._reached=function(t,e,n){if(t>=this._segments.length)return!1;var r=this._segments[t],i=e(r);return r.inclusive?n>=i:n>i},r.prototype._segmentAt=function(t,e){for(var n=0;n<this._segments.length;n++)if(!this._reached(n+1,t,e))return this._segments[n]},r.prototype.segmentAtX=function(t){return this._segmentAt(a,t)},r.prototype.segmentAtT=function(t){return this._segmentAt(o,t)},r.prototype.t=function(t){var e=this.segmentAtX(t);return e.t+(t-e.x)/(e.dx||1)},r.prototype.x=function(t){var e=this.segmentAtT(t);return e.x+(t-e.t)*e.dx}},function(t,e,n){function r(){this._values={}}t.exports=r,r.prototype.set=function(t,e){this._values[t]=e},r.prototype.get=function(t){return this._values[t]||1},r.prototype.getBeats=function(t){return 4*this.get(t)},r.prototype.measureToBeat=function(t,e){for(var n=0,r=0;t>r;r++)n+=this.getBeats(r);return n+this.getBeats(t)*e}},function(t,e,n){(function(t){function t(e){return this instanceof t?(this.length=0,this.parent=void 0,"number"==typeof e?r(this,e):"string"==typeof e?i(this,e,arguments.length>1?arguments[1]:"utf8"):o(this,e)):arguments.length>1?new t(e,arguments[1]):new t(e)}function r(e,n){if(e=f(e,0>n?0:0|h(n)),!t.TYPED_ARRAY_SUPPORT)for(var r=0;n>r;r++)e[r]=0;return e}function i(t,e,n){("string"!=typeof n||""===n)&&(n="utf8");var r=0|d(e,n);return t=f(t,r),t.write(e,n),t}function o(e,n){if(t.isBuffer(n))return a(e,n);if(H(n))return s(e,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");return"undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer?u(e,n):n.length?c(e,n):l(e,n)}function a(t,e){var n=0|h(e.length);return t=f(t,n),e.copy(t,0,0,n),t}function s(t,e){var n=0|h(e.length);t=f(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function u(t,e){var n=0|h(e.length);t=f(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function c(t,e){var n=0|h(e.length);t=f(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function l(t,e){var n,r=0;"Buffer"===e.type&&H(e.data)&&(n=e.data,r=0|h(n.length)),t=f(t,r);for(var i=0;r>i;i+=1)t[i]=255&n[i];return t}function f(e,n){t.TYPED_ARRAY_SUPPORT?e=t._augment(new Uint8Array(n)):(e.length=n,e._isBuffer=!0);var r=0!==n&&n<=t.poolSize>>>1;return r&&(e.parent=Y),e}function h(t){if(t>=z)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+z.toString(16)+" bytes");return 0|t}function p(e,n){if(!(this instanceof p))return new p(e,n);var r=new t(e,n);return delete r.parent,r}function d(t,e){if("string"!=typeof t&&(t=String(t)),0===t.length)return 0;switch(e||"utf8"){case"ascii":case"binary":case"raw":return t.length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t.length;case"hex":return t.length>>>1;case"utf8":case"utf-8":return L(t).length;case"base64":return U(t).length;default:return t.length}}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;r>a;a++){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");t[n+a]=s}return a}function v(t,e,n,r){return q(L(e,t.length-n),t,n,r)}function g(t,e,n,r){return q(F(e),t,n,r)}function y(t,e,n,r){return g(t,e,n,r)}function b(t,e,n,r){return q(U(e),t,n,r)}function _(t,e,n,r){return q(B(e,t.length-n),t,n,r)}function w(t,e,n){return W.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function x(t,e,n){var r="",i="";n=Math.min(t.length,n);for(var o=e;n>o;o++)t[o]<=127?(r+=V(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return r+V(i)}function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(127&t[i]);return r}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(t[i]);return r}function C(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=e;n>o;o++)i+=D(t[o]);return i}function S(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function A(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function k(e,n,r,i,o,a){if(!t.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(n>o||a>n)throw new RangeError("value is out of bounds");if(r+i>e.length)throw new RangeError("index out of range")}function O(t,e,n,r){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);o>i;i++)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(t,e,n,r){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);o>i;i++)t[n+i]=e>>>8*(r?i:3-i)&255}function M(t,e,n,r,i,o){if(e>i||o>e)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function R(t,e,n,r,i){return i||M(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),G.write(t,e,n,r,23,4),n+4}function N(t,e,n,r,i){return i||M(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),G.write(t,e,n,r,52,8),n+8}function P(t){if(t=I(t).replace(X,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function I(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function D(t){return 16>t?"0"+t.toString(16):t.toString(16)}function L(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;r>a;a++){if(n=t.charCodeAt(a),n>55295&&57344>n){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&((e-=3)>-1&&o.push(239,191,189),i=null);if(128>n){if((e-=1)<0)break;o.push(n)}else if(2048>n){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(2097152>n))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function F(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function B(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);a++)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function U(t){return W.toByteArray(P(t))}function q(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}function V(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
var W=n(256),G=n(257),H=n(258);e.Buffer=t,e.SlowBuffer=p,e.INSPECT_MAX_BYTES=50,t.poolSize=8192;var z=1073741823,Y={};t.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var r=e.length,i=n.length,o=0,a=Math.min(r,i);a>o&&e[o]===n[o];)++o;return o!==a&&(r=e[o],i=n[o]),i>r?-1:r>i?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!H(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new t(0);if(1===e.length)return e[0];var r;if(void 0===n)for(n=0,r=0;r<e.length;r++)n+=e[r].length;var i=new t(n),o=0;for(r=0;r<e.length;r++){var a=e[r];a.copy(i,o),o+=a.length}return i},t.byteLength=d,t.prototype.length=void 0,t.prototype.parent=void 0,t.prototype.toString=function(t,e,n){var r=!1;if(e=0|e,n=void 0===n||n===1/0?this.length:0|n,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return x(this,e,n);case"ascii":return E(this,e,n);case"binary":return T(this,e,n);case"base64":return w(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:t.compare(this,e)},t.prototype.indexOf=function(e,n){function r(t,e,n){for(var r=-1,i=0;n+i<t.length;i++)if(t[n+i]===e[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===e.length)return n+r}else r=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,n);if(t.isBuffer(e))return r(this,e,n);if("number"==typeof e)return t.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,n):r(this,[e],n);throw new TypeError("val must be string, number or Buffer")},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},t.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=e,e=0|n,n=i}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return v(this,t,e,n);case"ascii":return g(this,t,e,n);case"binary":return y(this,t,e,n);case"base64":return b(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},t.prototype.slice=function(e,n){var r=this.length;e=~~e,n=void 0===n?r:~~n,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),e>n&&(n=e);var i;if(t.TYPED_ARRAY_SUPPORT)i=t._augment(this.subarray(e,n));else{var o=n-e;i=new t(o,void 0);for(var a=0;o>a;a++)i[a]=this[a+e]}return i.length&&(i.parent=this.parent||this),i},t.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||A(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},t.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||A(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},t.prototype.readUInt8=function(t,e){return e||A(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||A(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||A(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||A(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},t.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||A(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},t.prototype.readInt16LE=function(t,e){e||A(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||A(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||A(t,4,this.length),G.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||A(t,4,this.length),G.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||A(t,8,this.length),G.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||A(t,8,this.length),G.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||k(this,t,e,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||k(this,t,e,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},t.prototype.writeUInt8=function(e,n,r){return e=+e,n=0|n,r||k(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=e,n+1},t.prototype.writeUInt16LE=function(e,n,r){return e=+e,n=0|n,r||k(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e,this[n+1]=e>>>8):O(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,r){return e=+e,n=0|n,r||k(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e):O(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,r){return e=+e,n=0|n,r||k(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=e):j(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,r){return e=+e,n=0|n,r||k(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e):j(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e=0|e,!r){var i=Math.pow(2,8*n-1);k(this,t,e,n,i-1,-i)}var o=0,a=1,s=0>t?1:0;for(this[e]=255&t;++o<n&&(a*=256);)this[e+o]=(t/a>>0)-s&255;return e+n},t.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e=0|e,!r){var i=Math.pow(2,8*n-1);k(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0>t?1:0;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=(t/a>>0)-s&255;return e+n},t.prototype.writeInt8=function(e,n,r){return e=+e,n=0|n,r||k(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[n]=e,n+1},t.prototype.writeInt16LE=function(e,n,r){return e=+e,n=0|n,r||k(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e,this[n+1]=e>>>8):O(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,r){return e=+e,n=0|n,r||k(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e):O(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,r){return e=+e,n=0|n,r||k(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):j(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,r){return e=+e,n=0|n,r||k(this,e,n,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e):j(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return R(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return R(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},t.prototype.copy=function(e,n,r,i){if(r||(r=0),i||0===i||(i=this.length),n>=e.length&&(n=e.length),n||(n=0),i>0&&r>i&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-n<i-r&&(i=e.length-n+r);var o=i-r;if(1e3>o||!t.TYPED_ARRAY_SUPPORT)for(var a=0;o>a;a++)e[a+n]=this[a+r];else e._set(this.subarray(r,r+o),n);return o},t.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var i=L(t.toString()),o=i.length;for(r=e;n>r;r++)this[r]=i[r%o]}return this}},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t.TYPED_ARRAY_SUPPORT)return new t(this).buffer;for(var e=new Uint8Array(this.length),n=0,r=e.length;r>n;n+=1)e[n]=this[n];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var $=t.prototype;t._augment=function(e){return e.constructor=t,e._isBuffer=!0,e._set=e.set,e.get=$.get,e.set=$.set,e.write=$.write,e.toString=$.toString,e.toLocaleString=$.toString,e.toJSON=$.toJSON,e.equals=$.equals,e.compare=$.compare,e.indexOf=$.indexOf,e.copy=$.copy,e.slice=$.slice,e.readUIntLE=$.readUIntLE,e.readUIntBE=$.readUIntBE,e.readUInt8=$.readUInt8,e.readUInt16LE=$.readUInt16LE,e.readUInt16BE=$.readUInt16BE,e.readUInt32LE=$.readUInt32LE,e.readUInt32BE=$.readUInt32BE,e.readIntLE=$.readIntLE,e.readIntBE=$.readIntBE,e.readInt8=$.readInt8,e.readInt16LE=$.readInt16LE,e.readInt16BE=$.readInt16BE,e.readInt32LE=$.readInt32LE,e.readInt32BE=$.readInt32BE,e.readFloatLE=$.readFloatLE,e.readFloatBE=$.readFloatBE,e.readDoubleLE=$.readDoubleLE,e.readDoubleBE=$.readDoubleBE,e.writeUInt8=$.writeUInt8,e.writeUIntLE=$.writeUIntLE,e.writeUIntBE=$.writeUIntBE,e.writeUInt16LE=$.writeUInt16LE,e.writeUInt16BE=$.writeUInt16BE,e.writeUInt32LE=$.writeUInt32LE,e.writeUInt32BE=$.writeUInt32BE,e.writeIntLE=$.writeIntLE,e.writeIntBE=$.writeIntBE,e.writeInt8=$.writeInt8,e.writeInt16LE=$.writeInt16LE,e.writeInt16BE=$.writeInt16BE,e.writeInt32LE=$.writeInt32LE,e.writeInt32BE=$.writeInt32BE,e.writeFloatLE=$.writeFloatLE,e.writeFloatBE=$.writeFloatBE,e.writeDoubleLE=$.writeDoubleLE,e.writeDoubleBE=$.writeDoubleBE,e.fill=$.fill,e.inspect=$.inspect,e.toArrayBuffer=$.toArrayBuffer,e};var X=/[^+\/0-9A-z\-]/g}).call(e,n(119).Buffer)},function(t,e,n){var r=n(134),i=r.AudioContext||r.webkitAudioContext;i&&(t.exports=new i)},function(t,e,n){e.Reader=n(147),e.Compiler=n(138),e.BMSChart=n(114),e.BMSHeaders=n(115),e.BMSObjects=n(116),e.Speedcore=n(117),e.TimeSignatures=n(118),e.Notes=n(145),e.Timing=n(150),e.SongInfo=n(148),e.Keysounds=n(246)},function(t,e,n){"use strict";function r(t,e,n){this.instance=t,this.argsInfo=n,this.form=o.methodForm(t,e,n)}var i=n(741),o=n(424),a=n(745);r.prototype.validateArguments=function(t,e){var n=i(t,this.argsInfo.map(function(t){return t.type})),r="";-1!==n&&(r+="the "+a(n)+" argument ",r+=o.shouldBeButGot(this.argsInfo[n].type,t[n]),e.call(this.instance,r)),this.argsInfo.forEach(function(n,r){var i=n.validate&&n.validate.call(this.instance,t[r],this.argsInfo[r].name);i&&e.call(this.instance,i)},this)},r.prototype.assert=function(t,e){t||e.call(this.instance)},t.exports=r},function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&c(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}function o(t){return u(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)}function a(t,e){return i(t,!1,!0).resolve(e)}function s(t,e){return t?i(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function l(t){return null===t}function f(t){return null==t}var h=n(259);e.parse=i,e.resolve=a,e.resolveObject=s,e.format=o,e.Url=r;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","	"],v=["{","}","|","\\","^","`"].concat(m),g=["'"].concat(v),y=["%","/","?",";","#"].concat(g),b=["/","?","#"],_=255,w=/^[a-z0-9A-Z_-]{0,63}$/,x=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=n(262);r.prototype.parse=function(t,e,n){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var i=p.exec(r);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===r.substr(0,2);!a||i&&T[i]||(r=r.substr(2),this.slashes=!0)}if(!T[i]&&(a||i&&!C[i])){for(var s=-1,c=0;c<b.length;c++){var l=r.indexOf(b[c]);-1!==l&&(-1===s||s>l)&&(s=l)}var f,d;d=-1===s?r.lastIndexOf("@"):r.lastIndexOf("@",s),-1!==d&&(f=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(f)),s=-1;for(var c=0;c<y.length;c++){var l=r.indexOf(y[c]);-1!==l&&(-1===s||s>l)&&(s=l)}-1===s&&(s=r.length),this.host=r.slice(0,s),r=r.slice(s),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var v=this.hostname.split(/\./),c=0,A=v.length;A>c;c++){var k=v[c];if(k&&!k.match(w)){for(var O="",j=0,M=k.length;M>j;j++)O+=k.charCodeAt(j)>127?"x":k[j];if(!O.match(w)){var R=v.slice(0,c),N=v.slice(c+1),P=k.match(x);P&&(R.push(P[1]),N.unshift(P[2])),N.length&&(r="/"+N.join(".")+r),this.hostname=R.join(".");break}}}if(this.hostname.length>_?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){for(var I=this.hostname.split("."),D=[],c=0;c<I.length;++c){var L=I[c];D.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(L):L)}this.hostname=D.join(".")}var F=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+F,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!E[o])for(var c=0,A=g.length;A>c;c++){var U=g[c],q=encodeURIComponent(U);q===U&&(q=escape(U)),r=r.split(U).join(q)}var V=r.indexOf("#");-1!==V&&(this.hash=r.substr(V),r=r.slice(0,V));var W=r.indexOf("?");if(-1!==W?(this.search=r.substr(W),this.query=r.substr(W+1),e&&(this.query=S.parse(this.query)),r=r.slice(0,W)):e&&(this.search="",this.query={}),r&&(this.pathname=r),C[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",L=this.search||"";this.path=F+L}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||C[e])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+i+n+a+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(u(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),C[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!C[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||T[t.protocol])n.pathname=t.pathname;else{for(var i=(t.pathname||"").split("/");i.length&&!(t.host=i.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var o=n.pathname||"",a=n.search||"";n.path=o+a}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var s=n.pathname&&"/"===n.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),h=c||s||n.host&&t.pathname,p=h,d=n.pathname&&n.pathname.split("/")||[],i=t.pathname&&t.pathname.split("/")||[],m=n.protocol&&!C[n.protocol];if(m&&(n.hostname="",n.port=null,n.host&&(""===d[0]?d[0]=n.host:d.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===i[0]?i[0]=t.host:i.unshift(t.host)),t.host=null),h=h&&(""===i[0]||""===d[0])),c)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),n.search=t.search,n.query=t.query;else if(!f(t.search)){if(m){n.hostname=n.host=d.shift();var v=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return n.search=t.search,n.query=t.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!d.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var g=d.slice(-1)[0],y=(n.host||t.host)&&("."===g||".."===g)||""===g,b=0,_=d.length;_>=0;_--)g=d[_],"."==g?d.splice(_,1):".."===g?(d.splice(_,1),b++):b&&(d.splice(_,1),b--);if(!h&&!p)for(;b--;b)d.unshift("..");!h||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),y&&"/"!==d.join("/").substr(-1)&&d.push("");var w=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(m){n.hostname=n.host=w?"":d.length?d.shift():"";var v=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return h=h||n.host&&d.length,h&&!w&&d.unshift(""),d.length?n.pathname=d.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){"use strict";function r(){return"1"===c.BEMUSE_SHOW_OPTIONS}function i(){return"1"===c.BEMUSE_BENCHMARK}function o(){return"1"===c.BEMUSE_NO_FULLSCREEN}function a(){return"1"===c.BEMUSE_SHOW_ABOUT}function s(){return"1"===c.BEMUSE_SHOW_MODE_SELECT}var u=function(t){return t&&t.__esModule?t["default"]:t};e.shouldShowOptions=r,e.shouldEnableBenchmark=i,e.shouldDisableFullScreen=o,e.shouldShowAbout=a,e.shouldShowModeSelect=s,Object.defineProperty(e,"__esModule",{value:!0});var c=u(n(132))},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(52)),o=new i({beat:Number,time:Number,position:Number});e.GameEvent=o,e["default"]=o},function(t,e,n){"use strict";function r(t){if("normal"===t)return u.blendModes.NORMAL;if("screen"===t)return u.blendModes.SCREEN;throw new Error("Invalid blend mode: "+t)}var i=function(t){return t&&t.__esModule?t["default"]:t},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var u=i(n(23)),c=i(n(49)),l=i(n(50)),f=i(n(82)),h=i(n(272)),p=[{name:"x","default":"0",apply:function(t,e){return t.x=e}},{name:"y","default":"0",apply:function(t,e){return t.y=e}},{name:"scale-x","default":"1",apply:function(t,e){return t.scale.x=e}},{name:"scale-y","default":"1",apply:function(t,e){return t.scale.y=e}},{name:"alpha","default":"1",apply:function(t,e){return t.alpha=e}},{name:"width",apply:function(t,e){return t.width=e}},{name:"height",apply:function(t,e){return t.height=e}},{name:"visible",apply:function(t,e){return t.visible=e}}],d=e.DisplayObject=function(t){function e(){s(this,e),null!=t&&t.apply(this,arguments)}return a(e,t),o(e,{compile:{value:function(t,e){this._animation=h.compile(t,e),this._bindings=[];var n=!0,i=!1,o=void 0;try{for(var a,s=p[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value,c=e.attr(u.name)||u["default"];if(c){var l=new f(c),d=this._animation.prop(u.name,l);this._bindings.push({getter:d,apply:u.apply})}}}catch(m){i=!0,o=m}finally{try{!n&&s["return"]&&s["return"]()}finally{if(i)throw o}}this.blendMode=r(e.attr("blend")||"normal"),this.ref=e.attr("ref")||null}},instantiate:{value:function(t,e){var n=this,r=e.object,i=[],o=null;r.blendMode=this.blendMode;for(var a=0;a<this._bindings.length;a++){var s=this._bindings[a];i.push([s.getter,s.apply.bind(null,r)])}return this.ref&&(t.ref(this.ref,r),o=function(){return t.unref(n.ref,r)}),new l({bindings:i,onDestroy:o})}}}),e}(c);e["default"]=d},function(t,e,n){"use strict";t.exports=document.querySelector("main")},function(t,e,n){function r(t){var e=1024*(1<<30),n=1<<30,r=1<<20,i=1024,o=Math.abs(t);return o>=e?Math.round(t/e*100)/100+"tb":o>=n?Math.round(t/n*100)/100+"gb":o>=r?Math.round(t/r*100)/100+"mb":o>=i?Math.round(t/i*100)/100+"kb":t+"b"}t.exports=function(t){if("number"==typeof t)return r(t);var e=t.match(/^(\d+(?:\.\d+)?) *(kb|mb|gb|tb)$/),n=parseFloat(e[1]),i=e[2],o={kb:1024,mb:1<<20,gb:1<<30,tb:1024*(1<<30)};return o[i]*n}},function(t,e,n){function r(t){var e=4/11,n=8/11,r=.9,i=4356/361,o=35442/1805,a=16061/1805,s=t*t;return e>t?7.5625*s:n>t?9.075*s-9.9*t+3.4:r>t?i*s-o*t+a:10.8*t*t-20.52*t+10.72}t.exports=r},function(t,e,n){"use strict";function r(t){return a({"player.P1.mode":t})}function i(t){return"off"===t?r("KB"):a({"player.P1.mode":"BM","player.P1.scratch":t})}e.setMode=r,e.setScratch=i,Object.defineProperty(e,"__esModule",{value:!0});var o=n(30).Action,a=new o;e.setOptions=a;var s=new o;e.reload=s},function(t,e,n){"use strict";function r(){return window.innerWidth<window.innerHeight?"/skins/default/skin_touch.xml":"/skins/default/skin_screen.xml"}e.getSkinUrl=r,Object.defineProperty(e,"__esModule",{value:!0});var i=n(298).load,o=n(297).Context;e.load=i,e.Context=o},,,function(t,e,n){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:t.exports={}}).call(e,function(){return this}())},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var n,r=[],i=t[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!e||r.length!==e););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(243)),u=r(n(12)),c=r(n(110)),l=e.GameInput=function(){function t(){a(this,t),this._controls=new Map,this._plugins=[]}return o(t,{update:{value:function(){var t=new Map,e=!0,n=!1,r=void 0;try{for(var o,a=this._controls[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s=i(o.value,2),u=(s[0],s[1]);u.changed=!1}}catch(c){n=!0,r=c}finally{try{!e&&a["return"]&&a["return"]()}finally{if(n)throw r}}var l=!0,f=!1,h=void 0;try{for(var p,d=this._plugins[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var m=p.value,v=!0,g=!1,y=void 0;try{for(var b,_=m.get()[Symbol.iterator]();!(v=(b=_.next()).done);v=!0){var w=i(b.value,2),x=w[0],E=w[1];t.set(x,E)}}catch(c){g=!0,y=c}finally{try{!v&&_["return"]&&_["return"]()}finally{if(g)throw y}}}}catch(c){f=!0,h=c}finally{try{!l&&d["return"]&&d["return"]()}finally{if(f)throw h}}var T=!0,C=!1,S=void 0;try{for(var A,k=t[Symbol.iterator]();!(T=(A=k.next()).done);T=!0){var O=i(A.value,2),j=O[0],E=O[1],u=this.get(j);u.value!==E&&(u.changed=!0,u.value=E)}}catch(c){C=!0,S=c}finally{try{!T&&k["return"]&&k["return"]()}finally{if(C)throw S}}}},destroy:{value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._plugins[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.destroy()}}catch(a){e=!0,n=a}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}}},get:{value:function(t){return this._controls.has(t)||this._controls.set(t,new s),this._controls.get(t)}},use:{value:function(t){var e={},n="input:"+t.name;this._plugins.push({get:c.wrap(n,function(){var n=t.get(),r=[],i=!0,o=!1,a=void 0;try{for(var s,c=u.union(u.keys(n),u.keys(e))[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=s.value,f=+e[l]||0,h=+n[l]||0;f!==h&&r.push([l,h]),e[l]=h}}catch(p){o=!0,a=p}finally{try{!i&&c["return"]&&c["return"]()}finally{if(o)throw a}}return r}),destroy:function(){return"function"==typeof t.destroy?t.destroy():!0}})}}}),t}();e["default"]=l},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var o=e.Player=function(){function t(e,n,r){i(this,t),this._notechart=e,this._number=n,this._options={autosound:!!r.autosound,speed:+r.speed,placement:r.placement||"center",scratch:r.scratch||"left",input:r.input}}return r(t,{notechart:{get:function(){return this._notechart}},columns:{get:function(){return this._notechart.columns}},number:{get:function(){return this._number}},options:{get:function(){return this._options}}}),t}();e["default"]=o},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};Object.defineProperty(e,"__esModule",{value:!0}),n(382);var i=r(n(6)),o=i.createClass({displayName:"SceneToolbar",render:function(){return i.createElement("div",{className:"scene-toolbar"},this.props.children)}});e.SceneToolbar=o,o.Spacer=i.createClass({displayName:"Spacer",render:function(){return i.createElement("div",{className:"scene-toolbar--spacer"})}}),e["default"]=o},function(t,e,n){function r(t,e){t.split(/\r\n|\r|\n/).map(function(t){return t.trim()}).forEach(function(t,n){e(t,n+1)})}var i=n(85),o=n(114);e.compile=function(t,e){function n(t,e,n,r){var i=Math.floor(n.length/2);if(0!==i)for(var o=0;i>o;o++){var a=n.substr(2*o,2),u=o/i;"00"!==a&&s.objects.add({measure:t,fraction:u,value:a,channel:e,lineNumber:r})}}function a(t,e){f.warnings.push({lineNumber:t,message:e})}e=e||{};var s=new o,u=e.rng||function(t){return 1+Math.floor(Math.random()*t)},c=[],l=[!1],f={headerSentences:0,channelSentences:0,controlSentences:0,skippedSentences:0,malformedSentences:0,chart:s,warnings:[]};return r(t,function(t,e){var r=!0;if("#"===t.charAt(0)&&(i(t).when(/^#RANDOM\s+(\d+)$/i,function(t){f.controlSentences+=1,c.push(u(+t[1]))}).when(/^#IF\s+(\d+)$/i,function(t){f.controlSentences+=1,l.push(c[c.length-1]!==+t[1])}).when(/^#ENDIF$/i,function(t){f.controlSentences+=1,l.pop()})["else"](function(){r=!1}),!r)){var o=l[l.length-1];i(t).when(/^#(\d\d\d)02:(\S*)$/,function(t){f.channelSentences+=1,o||s.timeSignatures.set(+t[1],+t[2])}).when(/^#(\d\d\d)(\S\S):(\S*)$/,function(t){f.channelSentences+=1,o||n(+t[1],t[2],t[3],e)}).when(/^#(\w+)(?:\s+(\S.*))?$/,function(t){f.headerSentences+=1,o||s.headers.set(t[1],t[2])})["else"](function(){a(e,"Invalid command")})}}),f}},function(t,e,n){var r=n(144),i=n(143),o=n(141),a=(n(142),n(140),[new r,new i.UTF_16BE,new i.UTF_16LE,new o.sjis,new o.euc_kr]);t.exports.detect=function(t){for(var e=[],n=0;256>n;n++)e[n]=0;for(var n=t.length-1;n>=0;n--)e[255&t[n]]++;for(var r=!1,n=128;159>=n;n+=1)if(0!=e[n]){r=!0;break}var i={fByteStats:e,fC1Bytes:r,fRawInput:t,fRawLength:t.length,fInputBytes:t,fInputLen:t.length},o=a.map(function(t){return t.match(i)}).filter(function(t){return!!t}).sort(function(t,e){return t.confidence-e.confidence}).pop();return o?o.name:null}},function(t,e,n){function r(){}var i=n(48),o=n(31);r.prototype.match=function(t){var e,n,r,i,a=0,s=0,u=0,c=t.fInputBytes,l=t.fInputLen;t:for(e=0;l>e;e++){if(27==c[e]){e:for(r=0;r<this.escapeSequences.length;r++){var f=this.escapeSequences[r];if(!(l-e<f.length)){for(n=1;n<f.length;n++)if(f[n]!=c[e+n])continue e;a++,e+=f.length-1;continue t}}s++}(14==c[e]||15==c[e])&&u++}return 0==a?null:(i=(100*a-100*s)/(a+s),5>a+u&&(i-=10*(5-(a+u))),0>=i?null:new o(t,this,i))},t.exports.ISO_2022_JP=function(){this.name=function(){return"ISO-2022-JP"},this.escapeSequences=[[27,36,40,67],[27,36,40,68],[27,36,64],[27,36,65],[27,36,66],[27,38,64],[27,40,66],[27,40,72],[27,40,73],[27,40,74],[27,46,65],[27,46,70]]},i.inherits(t.exports.ISO_2022_JP,r),t.exports.ISO_2022_KR=function(){this.name=function(){return"ISO-2022-KR"},this.escapeSequences=[[27,36,41,67]]},i.inherits(t.exports.ISO_2022_KR,r),t.exports.ISO_2022_CN=function(){this.name=function(){return"ISO-2022-CN"},this.escapeSequences=[[27,36,41,65],[27,36,41,71],[27,36,42,72],[27,36,41,69],[27,36,43,73],[27,36,43,74],[27,36,43,75],[27,36,43,76],[27,36,43,77],[27,78],[27,79]]},i.inherits(t.exports.ISO_2022_CN,r)},function(t,e,n){function r(t,e){function n(t,e,r,i){if(r>i)return-1;var o=Math.floor(r+i>>>1);return e>t[o]?n(t,e,o+1,i):e<t[o]?n(t,e,r,o-1):o}return n(t,e,0,t.length-1)}function i(){this.charValue=0,this.index=0,this.nextIndex=0,this.error=!1,this.done=!1,this.reset=function(){this.charValue=0,this.index=-1,this.nextIndex=0,this.error=!1,this.done=!1},this.nextByte=function(t){if(this.nextIndex>=t.fRawLength)return this.done=!0,-1;var e=255&t.fRawInput[this.nextIndex++];return e}}function o(){}function a(t,e){t.index=t.nextIndex,t.error=!1;var n=0,r=0,i=0;return n=t.charValue=t.nextByte(e),0>n?t.done=!0:141>=n||(r=t.nextByte(e),t.charValue=t.charValue<<8|r,n>=161&&254>=n?161>r&&(t.error=!0):142!=n?143==n&&(i=t.nextByte(e),t.charValue=t.charValue<<8|i,
161>i&&(t.error=!0)):161>r&&(t.error=!0)),0==t.done}var s=n(48),u=n(31);o.prototype.match=function(t){var e=0,n=0,o=0,a=0,s=0,c=0,l=new i;t:{for(l.reset();this.nextChar(l,t);){if(s++,l.error)a++;else{var f=4294967295&l.charValue;255>=f?e++:(n++,null!=this.commonChars&&r(this.commonChars,f)>=0&&o++)}if(a>=2&&5*a>=n)break t}if(10>=n&&0==a)c=0==n&&10>s?0:10;else if(20*a>n)c=0;else if(null==this.commonChars)c=30+n-20*a,c>100&&(c=100);else{var h=Math.log(parseFloat(n)/4),p=90/h;c=Math.floor(Math.log(o+1)*p+10),c=Math.min(c,100)}}return 0==c?null:new u(t,this,c)},o.prototype.nextChar=function(t,e){},t.exports.sjis=function(){this.name=function(){return"Shift-JIS"},this.language=function(){return"ja"},this.commonChars=[33088,33089,33090,33093,33115,33129,33130,33141,33142,33440,33442,33444,33449,33450,33451,33453,33455,33457,33459,33461,33463,33469,33470,33473,33476,33477,33478,33480,33481,33484,33485,33500,33504,33511,33512,33513,33514,33520,33521,33601,33603,33614,33615,33624,33630,33634,33639,33653,33654,33673,33674,33675,33677,33683,36502,37882,38314],this.nextChar=function(t,e){t.index=t.nextIndex,t.error=!1;var n;if(n=t.charValue=t.nextByte(e),0>n)return!1;if(127>=n||n>160&&223>=n)return!0;var r=t.nextByte(e);return 0>r?!1:(t.charValue=n<<8|r,r>=64&&127>=r||r>=128&&255>=r||(t.error=!0),!0)}},s.inherits(t.exports.sjis,o),t.exports.big5=function(){this.name=function(){return"Big5"},this.language=function(){return"zh"},this.commonChars=[41280,41281,41282,41283,41287,41289,41333,41334,42048,42054,42055,42056,42065,42068,42071,42084,42090,42092,42103,42147,42148,42151,42177,42190,42193,42207,42216,42237,42304,42312,42328,42345,42445,42471,42583,42593,42594,42600,42608,42664,42675,42681,42707,42715,42726,42738,42816,42833,42841,42970,43171,43173,43181,43217,43219,43236,43260,43456,43474,43507,43627,43706,43710,43724,43772,44103,44111,44208,44242,44377,44745,45024,45290,45423,45747,45764,45935,46156,46158,46412,46501,46525,46544,46552,46705,47085,47207,47428,47832,47940,48033,48593,49860,50105,50240,50271],this.nextChar=function(t,e){t.index=t.nextIndex,t.error=!1;var n=t.charValue=t.nextByte(e);if(0>n)return!1;if(127>=n||255==n)return!0;var r=t.nextByte(e);return 0>r?!1:(t.charValue=t.charValue<<8|r,(64>r||127==r||255==r)&&(t.error=!0),!0)}},s.inherits(t.exports.big5,o),t.exports.euc_jp=function(){this.name=function(){return"EUC-JP"},this.language=function(){return"ja"},this.commonChars=[41377,41378,41379,41382,41404,41418,41419,41430,41431,42146,42148,42150,42152,42154,42155,42156,42157,42159,42161,42163,42165,42167,42169,42171,42173,42175,42176,42177,42179,42180,42182,42183,42184,42185,42186,42187,42190,42191,42192,42206,42207,42209,42210,42212,42216,42217,42218,42219,42220,42223,42226,42227,42402,42403,42404,42406,42407,42410,42413,42415,42416,42419,42421,42423,42424,42425,42431,42435,42438,42439,42440,42441,42443,42448,42453,42454,42455,42462,42464,42465,42469,42473,42474,42475,42476,42477,42483,47273,47572,47854,48072,48880,49079,50410,50940,51133,51896,51955,52188,52689],this.nextChar=a},s.inherits(t.exports.euc_jp,o),t.exports.euc_kr=function(){this.name=function(){return"EUC-KR"},this.language=function(){return"ko"},this.commonChars=[45217,45235,45253,45261,45268,45286,45293,45304,45306,45308,45496,45497,45511,45527,45538,45994,46011,46274,46287,46297,46315,46501,46517,46527,46535,46569,46835,47023,47042,47054,47270,47278,47286,47288,47291,47337,47531,47534,47564,47566,47613,47800,47822,47824,47857,48103,48115,48125,48301,48314,48338,48374,48570,48576,48579,48581,48838,48840,48863,48878,48888,48890,49057,49065,49088,49124,49131,49132,49144,49319,49327,49336,49338,49339,49341,49351,49356,49358,49359,49366,49370,49381,49403,49404,49572,49574,49590,49622,49631,49654,49656,50337,50637,50862,51151,51153,51154,51160,51173,51373],this.nextChar=a},s.inherits(t.exports.euc_kr,o),t.exports.gb_18030=function(){this.name=function(){return"GB18030"},this.language=function(){return"zh"},this.nextChar=function(t,e){t.index=t.nextIndex,t.error=!1;var n=0,r=0,i=0,o=0;t:if(n=t.charValue=t.nextByte(e),0>n)t.done=!0;else if(!(128>=n))if(r=t.nextByte(e),t.charValue=t.charValue<<8|r,n>=129&&254>=n){if(r>=64&&126>=r||r>=80&&254>=r)break t;if(r>=48&&57>=r&&(i=t.nextByte(e),i>=129&&254>=i&&(o=t.nextByte(e),o>=48&&57>=o))){t.charValue=t.charValue<<16|i<<8|o;break t}t.error=!0}else;return 0==t.done},this.commonChars=[41377,41378,41379,41380,41392,41393,41457,41459,41889,41900,41914,45480,45496,45502,45755,46025,46070,46323,46525,46532,46563,46767,46804,46816,47010,47016,47037,47062,47069,47284,47327,47350,47531,47561,47576,47610,47613,47821,48039,48086,48097,48122,48316,48347,48382,48588,48845,48861,49076,49094,49097,49332,49389,49611,49883,50119,50396,50410,50636,50935,51192,51371,51403,51413,51431,51663,51706,51889,51893,51911,51920,51926,51957,51965,52460,52728,52906,52932,52946,52965,53173,53186,53206,53442,53445,53456,53460,53671,53930,53938,53941,53947,53972,54211,54224,54269,54466,54490,54754,54992]},s.inherits(t.exports.gb_18030,o)},function(t,e,n){function r(t,e){var n=16777215;this.byteIndex=0,this.ngram=0,this.ngramList=t,this.byteMap=e,this.ngramCount=0,this.hitCount=0,this.spaceChar,this.search=function(t,e){var n=0;return t[n+32]<=e&&(n+=32),t[n+16]<=e&&(n+=16),t[n+8]<=e&&(n+=8),t[n+4]<=e&&(n+=4),t[n+2]<=e&&(n+=2),t[n+1]<=e&&(n+=1),t[n]>e&&(n-=1),0>n||t[n]!=e?-1:n},this.lookup=function(t){this.ngramCount+=1,this.search(this.ngramList,t)>=0&&(this.hitCount+=1)},this.addByte=function(t){this.ngram=(this.ngram<<8)+(255&t)&n,this.lookup(this.ngram)},this.nextByte=function(t){return this.byteIndex>=t.fInputLen?-1:255&t.fInputBytes[this.byteIndex++]},this.parse=function(t,e){var n,r=!1;for(this.spaceChar=e;(n=this.nextByte(t))>=0;){var i=this.byteMap[n];0!=i&&(i==this.spaceChar&&r||this.addByte(i),r=i==this.spaceChar)}this.addByte(this.spaceChar);var o=this.hitCount/this.ngramCount;return o>.33?98:Math.floor(300*o)}}function i(t,e){this.fLang=t,this.fNGrams=e}function o(){}var a=n(48),s=n(31);o.prototype.spaceChar=32,o.prototype.ngrams=function(){},o.prototype.byteMap=function(){},o.prototype.match=function(t){var e=this.ngrams(),n=Array.isArray(e)&&e[0]instanceof i;if(!n){var o=new r(e,this.byteMap()),a=o.parse(t,this.spaceChar);return 0>=a?null:new s(t,this,a)}for(var u=-1,c=null,l=e.length-1;l>=0;l--){var f=e[l],o=new r(f.fNGrams,this.byteMap()),a=o.parse(t,this.spaceChar);a>u&&(u=a,c=f.fLang)}var h=this.name(t);return 0>=u?null:new s(t,this,u,h,c)},t.exports.ISO_8859_1=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]},this.ngrams=function(){return[new i("da",[2122086,2122100,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126697,2126708,2126953,2127465,6383136,6385184,6385252,6386208,6386720,6579488,6579566,6579570,6579572,6627443,6644768,6644837,6647328,6647396,6648352,6648421,6648608,6648864,6713202,6776096,6776174,6776178,6907749,6908960,6909543,7038240,7039845,7103858,7104871,7105637,7169380,7234661,7234848,7235360,7235429,7300896,7302432,7303712,7398688,7479396,7479397,7479411,7496992,7566437,7610483,7628064,7628146,7629164,7759218]),new i("de",[2122094,2122101,2122341,2122849,2122853,2122857,2123113,2123621,2123873,2124142,2125161,2126691,2126693,2127214,2127461,2127471,2127717,2128501,6448498,6514720,6514789,6514804,6578547,6579566,6579570,6580581,6627428,6627443,6646126,6646132,6647328,6648352,6648608,6776174,6841710,6845472,6906728,6907168,6909472,6909541,6911008,7104867,7105637,7217249,7217252,7217267,7234592,7234661,7234848,7235360,7235429,7238757,7479396,7496805,7497065,7562088,7566437,7610468,7628064,7628142,7628146,7695972,7695975,7759218]),new i("en",[2122016,2122094,2122341,2122607,2123375,2123873,2123877,2124142,2125153,2125670,2125938,2126437,2126689,2126708,2126952,2126959,2127720,6383972,6384672,6385184,6385252,6386464,6386720,6386789,6386793,6561889,6561908,6627425,6627443,6627444,6644768,6647412,6648352,6648608,6713202,6840692,6841632,6841714,6906912,6909472,6909543,6909806,6910752,7217249,7217268,7234592,7235360,7238688,7300640,7302688,7303712,7496992,7500576,7544929,7544948,7561577,7566368,7610484,7628146,7628897,7628901,7629167,7630624,7631648]),new i("es",[2122016,2122593,2122607,2122853,2123116,2123118,2123123,2124142,2124897,2124911,2125921,2125935,2125938,2126197,2126437,2126693,2127214,2128160,6365283,6365284,6365285,6365292,6365296,6382441,6382703,6384672,6386208,6386464,6515187,6516590,6579488,6579564,6582048,6627428,6627429,6627436,6646816,6647328,6647412,6648608,6648692,6907246,6943598,7102752,7106419,7217253,7238757,7282788,7282789,7302688,7303712,7303968,7364978,7435621,7495968,7497075,7544932,7544933,7544944,7562528,7628064,7630624,7693600,15953440]),new i("fr",[2122101,2122607,2122849,2122853,2122869,2123118,2123124,2124897,2124901,2125921,2125935,2125938,2126197,2126693,2126703,2127214,2154528,6385268,6386793,6513952,6516590,6579488,6579571,6583584,6627425,6627427,6627428,6627429,6627436,6627440,6627443,6647328,6647412,6648352,6648608,6648864,6649202,6909806,6910752,6911008,7102752,7103776,7103859,7169390,7217252,7234848,7238432,7238688,7302688,7302772,7304562,7435621,7479404,7496992,7544929,7544932,7544933,7544940,7544944,7610468,7628064,7629167,7693600,7696928]),new i("it",[2122092,2122600,2122607,2122853,2122857,2123040,2124140,2124142,2124897,2125925,2125938,2127214,6365283,6365284,6365296,6365299,6386799,6514789,6516590,6579564,6580512,6627425,6627427,6627428,6627433,6627436,6627440,6627443,6646816,6646892,6647412,6648352,6841632,6889569,6889571,6889572,6889587,6906144,6908960,6909472,6909806,7102752,7103776,7104800,7105633,7234848,7235872,7237408,7238757,7282785,7282788,7282793,7282803,7302688,7302757,7366002,7495968,7496992,7563552,7627040,7628064,7629088,7630624,8022383]),new i("nl",[2122092,2122341,2122849,2122853,2122857,2123109,2123118,2123621,2123877,2124142,2125153,2125157,2125680,2126949,2127457,2127461,2127471,2127717,2128489,6381934,6381938,6385184,6385252,6386208,6386720,6514804,6579488,6579566,6579570,6627426,6627446,6645102,6645106,6647328,6648352,6648435,6648864,6776174,6841716,6907168,6909472,6909543,6910752,7217250,7217252,7217253,7217256,7217263,7217270,7234661,7235360,7302756,7303026,7303200,7303712,7562088,7566437,7610468,7628064,7628142,7628146,7758190,7759218,7761775]),new i("no",[2122100,2122102,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126693,2126699,2126703,2126708,2126953,2127465,2155808,6385252,6386208,6386720,6579488,6579566,6579572,6627443,6644768,6647328,6647397,6648352,6648421,6648864,6648948,6713202,6776174,6908779,6908960,6909543,7038240,7039845,7103776,7105637,7169380,7169390,7217267,7234848,7235360,7235429,7237221,7300896,7302432,7303712,7398688,7479411,7496992,7565165,7566437,7610483,7628064,7628142,7628146,7629164,7631904,7631973,7759218]),new i("pt",[2122016,2122607,2122849,2122853,2122863,2123040,2123123,2125153,2125423,2125600,2125921,2125935,2125938,2126197,2126437,2126693,2127213,6365281,6365283,6365284,6365296,6382693,6382703,6384672,6386208,6386273,6386464,6516589,6516590,6578464,6579488,6582048,6582131,6627425,6627428,6647072,6647412,6648608,6648692,6906144,6906721,7169390,7238757,7238767,7282785,7282787,7282788,7282789,7282800,7303968,7364978,7435621,7495968,7497075,7544929,7544932,7544933,7544944,7566433,7628064,7630624,7693600,14905120,15197039]),new i("sv",[2122100,2122102,2122853,2123118,2123510,2123873,2124064,2124142,2124655,2125157,2125667,2126053,2126699,2126703,2126708,2126953,2127457,2127465,2155634,6382693,6385184,6385252,6386208,6386804,6514720,6579488,6579566,6579570,6579572,6644768,6647328,6648352,6648864,6747762,6776174,6909036,6909543,7037216,7105568,7169380,7217267,7233824,7234661,7235360,7235429,7235950,7299944,7302432,7302688,7398688,7479393,7479411,7495968,7564129,7565165,7610483,7627040,7628064,7628146,7629164,7631904,7758194,14971424,16151072])]},this.name=function(t){return t&&t.fC1Bytes?"windows-1252":"ISO-8859-1"}},a.inherits(t.exports.ISO_8859_1,o),t.exports.ISO_8859_2=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,177,32,179,32,181,182,32,32,185,186,187,188,32,190,191,32,177,32,179,32,181,182,183,32,185,186,187,188,32,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,32]},this.ngrams=function(){return[new i("cs",[2122016,2122361,2122863,2124389,2125409,2125413,2125600,2125668,2125935,2125938,2126072,2126447,2126693,2126703,2126708,2126959,2127392,2127481,2128481,6365296,6513952,6514720,6627440,6627443,6627446,6647072,6647533,6844192,6844260,6910836,6972704,7042149,7103776,7104800,7233824,7268640,7269408,7269664,7282800,7300206,7301737,7304052,7304480,7304801,7368548,7368554,7369327,7403621,7562528,7565173,7566433,7566441,7566446,7628146,7630573,7630624,7676016,12477728,14773997,15296623,15540336,15540339,15559968,16278884]),new i("hu",[2122016,2122106,2122341,2123111,2123116,2123365,2123873,2123887,2124147,2124645,2124649,2124790,2124901,2125153,2125157,2125161,2125413,2126714,2126949,2156915,6365281,6365291,6365293,6365299,6384416,6385184,6388256,6447470,6448494,6645625,6646560,6646816,6646885,6647072,6647328,6648421,6648864,6648933,6648948,6781216,6844263,6909556,6910752,7020641,7075450,7169383,7170414,7217249,7233899,7234923,7234925,7238688,7300985,7544929,7567973,7567988,7568097,7596391,7610465,7631904,7659891,8021362,14773792,15299360]),new i("pl",[2122618,2122863,2124064,2124389,2124655,2125153,2125161,2125409,2125417,2125668,2125935,2125938,2126697,2127648,2127721,2127737,2128416,2128481,6365296,6365303,6385257,6514720,6519397,6519417,6582048,6584937,6627440,6627443,6627447,6627450,6645615,6646304,6647072,6647401,6778656,6906144,6907168,6907242,7037216,7039264,7039333,7170405,7233824,7235937,7235941,7282800,7305057,7305065,7368556,7369313,7369327,7369338,7502437,7502457,7563754,7564137,7566433,7825765,7955304,7957792,8021280,8022373,8026400,15955744]),new i("ro",[2122016,2122083,2122593,2122597,2122607,2122613,2122853,2122857,2124897,2125153,2125925,2125938,2126693,2126819,2127214,2144873,2158190,6365283,6365284,6386277,6386720,6386789,6386976,6513010,6516590,6518048,6546208,6579488,6627425,6627427,6627428,6627440,6627443,6644e3,6646048,6646885,6647412,6648692,6889569,6889571,6889572,6889584,6907168,6908192,6909472,7102752,7103776,7106418,7107945,7234848,7238770,7303712,7365998,7496992,7497057,7501088,7594784,7628064,7631477,7660320,7694624,7695392,12216608,15625760])]},this.name=function(t){return t&&t.fC1Bytes?"windows-1250":"ISO-8859-2"}},a.inherits(t.exports.ISO_8859_2,o),t.exports.ISO_8859_5=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255]},this.ngrams=function(){return[2150944,2151134,2151646,2152400,2152480,2153168,2153182,2153936,2153941,2154193,2154462,2154464,2154704,2154974,2154978,2155230,2156514,2158050,13688280,13689580,13884960,14015468,14015960,14016994,14017056,14164191,14210336,14211104,14216992,14407133,14407712,14413021,14536736,14538016,14538965,14538991,14540320,14540498,14557394,14557407,14557409,14602784,14602960,14603230,14604576,14605292,14605344,14606818,14671579,14672085,14672088,14672094,14733522,14734804,14803664,14803666,14803672,14806816,14865883,14868e3,14868192,14871584,15196894,15459616]},this.name=function(t){return"ISO-8859-5"},this.language=function(){return"ru"}},a.inherits(t.exports.ISO_8859_5,o),t.exports.ISO_8859_6=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32]},this.ngrams=function(){return[2148324,2148326,2148551,2152932,2154986,2155748,2156006,2156743,13050055,13091104,13093408,13095200,13100064,13100227,13100231,13100232,13100234,13100236,13100237,13100239,13100243,13100249,13100258,13100261,13100264,13100266,13100320,13100576,13100746,13115591,13181127,13181153,13181156,13181157,13181160,13246663,13574343,13617440,13705415,13748512,13836487,14229703,14279913,14805536,14950599,14993696,15001888,15002144,15016135,15058720,15059232,15066656,15081671,15147207,15189792,15255524,15263264,15278279,15343815,15343845,15343848,15386912,15388960,15394336]},this.name=function(t){return"ISO-8859-6"},this.language=function(){return"ar"}},a.inherits(t.exports.ISO_8859_6,o),t.exports.ISO_8859_7=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,161,162,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,220,32,221,222,223,32,252,32,253,254,192,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,32,243,244,245,246,247,248,249,250,251,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,32]},this.ngrams=function(){return[2154989,2154992,2155497,2155753,2156016,2156320,2157281,2157797,2158049,2158368,2158817,2158831,2158833,2159604,2159605,2159847,2159855,14672160,14754017,14754036,14805280,14806304,14807292,14807584,14936545,15067424,15069728,15147252,15199520,15200800,15278324,15327520,15330014,15331872,15393257,15393268,15525152,15540449,15540453,15540464,15589664,15725088,15725856,15790069,15790575,15793184,15868129,15868133,15868138,15868144,15868148,15983904,15984416,15987951,16048416,16048617,16050157,16050162,16050666,16052e3,16052213,16054765,16379168,16706848]},this.name=function(t){return t&&t.fC1Bytes?"windows-1253":"ISO-8859-7"},this.language=function(){return"el"}},a.inherits(t.exports.ISO_8859_7,o),t.exports.ISO_8859_8=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,32,32,32,32,32]},this.ngrams=function(){return[new i("he",[2154725,2154727,2154729,2154746,2154985,2154990,2155744,2155749,2155753,2155758,2155762,2155769,2155770,2157792,2157796,2158304,2159340,2161132,14744096,14950624,14950625,14950628,14950636,14950638,14950649,15001056,15065120,15068448,15068960,15071264,15071776,15278308,15328288,15328762,15329773,15330592,15331104,15333408,15333920,15474912,15474916,15523872,15524896,15540448,15540449,15540452,15540460,15540462,15540473,15655968,15671524,15787040,15788320,15788525,15920160,16261348,16312813,16378912,16392416,16392417,16392420,16392428,16392430,16392441]),new i("he",[2154725,2154732,2155753,2155756,2155758,2155760,2157040,2157810,2157817,2158053,2158057,2158565,2158569,2160869,2160873,2161376,2161381,2161385,14688484,14688492,14688493,14688506,14738464,14738916,14740512,14741024,14754020,14754029,14754042,14950628,14950633,14950636,14950637,14950639,14950648,14950650,15002656,15065120,15066144,15196192,15327264,15327520,15328288,15474916,15474925,15474938,15528480,15530272,15591913,15591920,15591928,15605988,15605997,15606010,15655200,15655968,15918112,16326884,16326893,16326906,16376864,16441376,16442400,16442857])]},this.name=function(t){return t&&t.fC1Bytes?"windows-1255":"ISO-8859-8"},this.language=function(){return"he"}},a.inherits(t.exports.ISO_8859_8,o),t.exports.ISO_8859_9=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,105,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]},this.ngrams=function(){return[2122337,2122345,2122357,2122849,2122853,2123621,2123873,2124140,2124641,2124655,2125153,2125676,2126689,2126945,2127461,2128225,6365282,6384416,6384737,6384993,6385184,6385405,6386208,6386273,6386429,6386685,6388065,6449522,6578464,6579488,6580512,6627426,6627435,6644841,6647328,6648352,6648425,6648681,6909029,6909472,6909545,6910496,7102830,7102834,7103776,7103858,7217249,7217250,7217259,7234657,7234661,7234848,7235872,7235950,7273760,7498094,7535982,7759136,7954720,7958386,16608800,16608868,16609021,16642301]},this.name=function(t){return t&&t.fC1Bytes?"windows-1254":"ISO-8859-9"},this.language=function(){return"tr"}},a.inherits(t.exports.ISO_8859_9,o),t.exports.windows_1251=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,144,131,32,131,32,32,32,32,32,32,154,32,156,157,158,159,144,32,32,32,32,32,32,32,32,32,154,32,156,157,158,159,32,162,162,188,32,180,32,32,184,32,186,32,32,32,32,191,32,32,179,179,180,181,32,32,184,32,186,32,188,190,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},this.ngrams=function(){return[2155040,2155246,2155758,2156512,2156576,2157280,2157294,2158048,2158053,2158305,2158574,2158576,2158816,2159086,2159090,2159342,2160626,2162162,14740968,14742268,14937632,15068156,15068648,15069682,15069728,15212783,15263008,15263776,15269664,15459821,15460384,15465709,15589408,15590688,15591653,15591679,15592992,15593186,15605986,15605999,15606001,15655456,15655648,15655918,15657248,15657980,15658016,15659506,15724267,15724773,15724776,15724782,15786210,15787492,15856352,15856354,15856360,15859488,15918571,15920672,15920880,15924256,16249582,16512288]},this.name=function(t){return"windows-1251"},this.language=function(){return"ru"}},a.inherits(t.exports.windows_1251,o),t.exports.windows_1256=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,129,32,131,32,32,32,32,136,32,138,32,156,141,142,143,144,32,32,32,32,32,32,32,152,32,154,32,156,32,32,159,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,32,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,32,32,32,244,32,32,32,32,249,32,251,252,32,32,255]},this.ngrams=function(){return[2148321,2148324,2148551,2153185,2153965,2154977,2155492,2156231,13050055,13091104,13093408,13095200,13099296,13099459,13099463,13099464,13099466,13099468,13099469,13099471,13099475,13099482,13099486,13099491,13099494,13099501,13099808,13100064,13100234,13115591,13181127,13181149,13181153,13181155,13181158,13246663,13574343,13617440,13705415,13748512,13836487,14295239,14344684,14544160,14753991,14797088,14806048,14806304,14885063,14927648,14928160,14935072,14950599,15016135,15058720,15124449,15131680,15474887,15540423,15540451,15540454,15583520,15585568,15590432]},this.name=function(t){return"windows-1256"},this.language=function(){return"ar"}},a.inherits(t.exports.windows_1256,o),t.exports.KOI8_R=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223]},this.ngrams=function(){return[2147535,2148640,2149313,2149327,2150081,2150085,2150338,2150607,2150610,2151105,2151375,2151380,2151631,2152224,2152399,2153153,2153684,2154196,12701385,12702936,12963032,12963529,12964820,12964896,13094688,13181136,13223200,13224224,13226272,13419982,13420832,13424846,13549856,13550880,13552069,13552081,13553440,13553623,13574352,13574355,13574359,13617103,13617696,13618392,13618464,13620180,13621024,13621185,13684684,13685445,13685449,13685455,13812183,13813188,13881632,13882561,13882569,13882583,13944268,13946656,13946834,13948960,14272544,14603471]},this.name=function(t){return"KOI8-R"},this.language=function(){return"ru"}},a.inherits(t.exports.KOI8_R,o)},function(t,e,n){function r(){}var i=n(48),o=n(31);t.exports.UTF_16BE=function(){this.name=function(){return"UTF-16BE"},this.match=function(t){var e=t.fRawInput;return e.length>=2&&254==(255&e[0])&&255==(255&e[1])?new o(t,this,confidence=100):null}},t.exports.UTF_16LE=function(){this.name=function(){return"UTF-16LE"},this.match=function(t){var e=t.fRawInput;return e.length>=2&&255==(255&e[0])&&254==(255&e[1])?e.length>=4&&0==e[2]&&0==e[3]?null:new o(t,this,confidence=100):null}},r.prototype.match=function(t){var e=t.fRawInput,n=t.fRawLength/4*4,r=0,i=0,a=!1,s=0;if(0==n)return null;65279==this.getChar(e,0)&&(a=!0);for(var u=0;n>u;u+=4){var c=this.getChar(e,u);0>c||c>=1114111||c>=55296&&57343>=c?i+=1:r+=1}return a&&0==i?s=100:a&&r>10*i?s=80:r>3&&0==i?s=100:r>0&&0==i?s=80:r>10*i&&(s=25),0==s?null:new o(t,this,s)},t.exports.UTF_32BE=function(){this.name=function(){return"UTF-32BE"},this.getChar=function(t,e){return(255&t[e+0])<<24|(255&t[e+1])<<16|(255&t[e+2])<<8|255&t[e+3]}},i.inherits(t.exports.UTF_32BE,r),t.exports.UTF_32LE=function(){this.name=function(){return"UTF-32LE"},this.getChar=function(t,e){return(255&t[e+3])<<24|(255&t[e+2])<<16|(255&t[e+1])<<8|255&t[e+0]}},i.inherits(t.exports.UTF_32LE,r)},function(t,e,n){var r=n(31);t.exports=function(){this.name=function(){return"UTF-8"},this.match=function(t){var e,n=!1,i=0,o=0,a=t.fRawInput,s=0;t.fRawLength>=3&&239==(255&a[0])&&187==(255&a[1])&&191==(255&a[2])&&(n=!0);for(var u=0;u<t.fRawLength;u++){var c=a[u];if(0!=(128&c)){if(192==(224&c))s=1;else if(224==(240&c))s=2;else if(240==(248&c))s=3;else{if(o++,o>5)break;s=0}for(;u++,!(u>=t.fRawLength);){if(128!=(192&a[u])){o++;break}if(0==--s){i++;break}}}}if(e=0,n&&0==o)e=100;else if(n&&i>10*o)e=80;else if(i>3&&0==o)e=100;else if(i>0&&0==o)e=80;else if(0==i&&0==o)e=10;else{if(!(i>10*o))return null;e=25}return new r(t,this,e)}}},function(t,e,n){function r(t){t.forEach(o.validate),this._notes=t}function i(t){this._chart=t}var o=n(146);t.exports=r;var a={IIDX_P1:{11:{column:"1"},12:{column:"2"},13:{column:"3"},14:{column:"4"},15:{column:"5"},18:{column:"6"},19:{column:"7"},16:{column:"SC"}}};r.prototype.count=function(){
return this._notes.length},r.prototype.all=function(){return this._notes.slice()},r.fromBMSChart=function(t,e){e=e||{};var n=new i(t);return n.build()},i.prototype.build=function(){return this._notes=[],this._activeLN={},this._lastNote={},this._lnObj=(this._chart.headers.get("lnobj")||"").toLowerCase(),this._channelMapping=a.IIDX_P1,this._objects=this._chart.objects.allSorted(),this._objects.forEach(function(t){this._handle(t)}.bind(this)),new r(this._notes)},i.prototype._handle=function(t){if("01"===t.channel)this._handleNormalNote(t);else switch(t.channel.charAt(0)){case"1":case"2":this._handleNormalNote(t);break;case"5":case"6":this._handleLongNote(t)}},i.prototype._handleNormalNote=function(t){var e=this._normalizeChannel(t.channel),n=this._getBeat(t);if(t.value.toLowerCase()===this._lnObj)this._lastNote[e]&&(this._lastNote[e].endBeat=n);else{var r={beat:n,endBeat:void 0,keysound:t.value,column:this._getColumn(e)};this._lastNote[e]=r,this._notes.push(r)}},i.prototype._handleLongNote=function(t){var e=this._normalizeChannel(t.channel),n=this._getBeat(t);if(this._activeLN[e]){var r=this._activeLN[e];r.endBeat=n,this._notes.push(r),delete this._activeLN[e]}else this._activeLN[e]={beat:n,keysound:t.value,column:this._getColumn(e)}},i.prototype._getBeat=function(t){return this._chart.measureToBeat(t.measure,t.fraction)},i.prototype._getColumn=function(t){return this._channelMapping[t]},i.prototype._normalizeChannel=function(t){return t.replace(/^5/,"1").replace(/^6/,"2")}},function(t,e,n){var r=n(52),i=new r({column:String});t.exports=new r({beat:Number,endBeat:r.maybe(Number),column:r.maybe(i),keysound:String})},function(t,e,n){var r=n(139);e.read=function(t){throw new Error("Synchronous read unsupported in browser!")},e.readAsync=function(t,e){var n=r.detect(t),i=new FileReader;i.onload=function(){e(null,i.result)},i.onerror=function(){e(new Error("cannot read it"))},i.readAsText(new Blob([t]),n)}},function(t,e,n){function r(){this.title="NO TITLE",this.artist="NO ARTIST",this.genre="NO GENRE",this.subtitles=[],this.subartists=[],this.difficulty=0,this.level=0}var i=n(85);t.exports=r,r.fromBMSChart=function(t){var e=new r,n=t.headers.get("title"),o=t.headers.get("artist"),a=t.headers.get("genre"),s=+t.headers.get("difficulty"),u=+t.headers.get("playlevel"),c=t.headers.getAll("subtitle"),l=t.headers.getAll("subartist");if("string"==typeof n&&!c){var f=function(t){n=t[1],c=[t[2]]};i(n).when(/^(.*\S)\s*-(.+?)-$/,f).when(/^(.*\S)\s*(.+?)$/,f).when(/^(.*\S)\s*\((.+?)\)$/,f).when(/^(.*\S)\s*\[(.+?)\]$/,f).when(/^(.*\S)\s*<(.+?)>$/,f)}return n&&(e.title=n),o&&(e.artist=o),a&&(e.genre=a),c&&(e.subtitles=c),l&&(e.subartists=l),s&&(e.difficulty=s),u&&(e.level=u),e}},function(t,e,n){var r=n(52);t.exports=new r({t:Number,x:Number,dx:Number})},function(t,e,n){function r(t,e){var n={bpm:t,beat:0,seconds:0},r=[];r.push({t:0,x:0,dx:n.bpm/60,bpm:n.bpm,inclusive:!0}),e=e.slice(),e.sort(function(t,e){return t.beat-e.beat||a[t.type]-a[e.type]}),e.forEach(function(t){var e=t.beat,i=n.seconds+60*(e-n.beat)/n.bpm;switch(t.type){case"bpm":n.bpm=t.bpm,r.push({t:i,x:e,dx:n.bpm/60,bpm:n.bpm,inclusive:!0});break;case"stop":r.push({t:i,x:e,dx:0,bpm:n.bpm,inclusive:!0}),i+=60*(t.stopBeats||0)/n.bpm,r.push({t:i,x:e,dx:n.bpm/60,bpm:n.bpm,inclusive:!1});break;default:throw new Error("Unrecognized segment object!")}n.beat=e,n.seconds=i}),this._speedcore=new i(r),this._eventBeats=o.uniq(o.pluck(e,"beat"),!0)}var i=n(117),o=n(12);t.exports=r;var a={bpm:1,stop:2};r.prototype.beatToSeconds=function(t){return this._speedcore.t(t)},r.prototype.secondsToBeat=function(t){return this._speedcore.x(t)},r.prototype.bpmAtBeat=function(t){return this._speedcore.segmentAtX(t).bpm},r.prototype.getEventBeats=function(t){return this._eventBeats},r.fromBMSChart=function(t){var e=[];return t.objects.all().forEach(function(n){var r,i=t.measureToBeat(n.measure,n.fraction);if("03"===n.channel)r=parseInt(n.value,16),e.push({type:"bpm",beat:i,bpm:r});else if("08"===n.channel)r=+t.headers.get("bpm"+n.value),isNaN(r)||e.push({type:"bpm",beat:i,bpm:r});else if("09"===n.channel){var o=t.headers.get("stop"+n.value)/48;e.push({type:"stop",beat:i,stopBeats:o})}}),new r(+t.headers.get("bpm")||60,e)}},function(t,e,n){"use strict";function r(){var t=window.opera;return"object"==typeof t&&"function"==typeof t.version&&parseInt(t.version(),10)<=12}function i(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}function o(t){switch(t){case k.topCompositionStart:return O.compositionStart;case k.topCompositionEnd:return O.compositionEnd;case k.topCompositionUpdate:return O.compositionUpdate}}function a(t,e){return t===k.topKeyDown&&e.keyCode===w}function s(t,e){switch(t){case k.topKeyUp:return-1!==_.indexOf(e.keyCode);case k.topKeyDown:return e.keyCode!==w;case k.topKeyPress:case k.topMouseDown:case k.topBlur:return!0;default:return!1}}function u(t){var e=t.detail;return"object"==typeof e&&"data"in e?e.data:null}function c(t,e,n,r){var i,c;if(x?i=o(t):M?s(t,r)&&(i=O.compositionEnd):a(t,r)&&(i=O.compositionStart),!i)return null;C&&(M||i!==O.compositionStart?i===O.compositionEnd&&M&&(c=M.getData()):M=v.getPooled(e));var l=g.getPooled(i,n,r);if(c)l.data=c;else{var f=u(r);null!==f&&(l.data=f)}return d.accumulateTwoPhaseDispatches(l),l}function l(t,e){switch(t){case k.topCompositionEnd:return u(e);case k.topKeyPress:var n=e.which;return n!==S?null:(j=!0,A);case k.topTextInput:var r=e.data;return r===A&&j?null:r;default:return null}}function f(t,e){if(M){if(t===k.topCompositionEnd||s(t,e)){var n=M.getData();return v.release(M),M=null,n}return null}switch(t){case k.topPaste:return null;case k.topKeyPress:return e.which&&!i(e)?String.fromCharCode(e.which):null;case k.topCompositionEnd:return C?null:e.data;default:return null}}function h(t,e,n,r){var i;if(i=T?l(t,r):f(t,r),!i)return null;var o=y.getPooled(O.beforeInput,n,r);return o.data=i,d.accumulateTwoPhaseDispatches(o),o}var p=n(10),d=n(34),m=n(9),v=n(159),g=n(195),y=n(198),b=n(20),_=[9,13,27,32],w=229,x=m.canUseDOM&&"CompositionEvent"in window,E=null;m.canUseDOM&&"documentMode"in document&&(E=document.documentMode);var T=m.canUseDOM&&"TextEvent"in window&&!E&&!r(),C=m.canUseDOM&&(!x||E&&E>8&&11>=E),S=32,A=String.fromCharCode(S),k=p.topLevelTypes,O={beforeInput:{phasedRegistrationNames:{bubbled:b({onBeforeInput:null}),captured:b({onBeforeInputCapture:null})},dependencies:[k.topCompositionEnd,k.topKeyPress,k.topTextInput,k.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:b({onCompositionEnd:null}),captured:b({onCompositionEndCapture:null})},dependencies:[k.topBlur,k.topCompositionEnd,k.topKeyDown,k.topKeyPress,k.topKeyUp,k.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:b({onCompositionStart:null}),captured:b({onCompositionStartCapture:null})},dependencies:[k.topBlur,k.topCompositionStart,k.topKeyDown,k.topKeyPress,k.topKeyUp,k.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:b({onCompositionUpdate:null}),captured:b({onCompositionUpdateCapture:null})},dependencies:[k.topBlur,k.topCompositionUpdate,k.topKeyDown,k.topKeyPress,k.topKeyUp,k.topMouseDown]}},j=!1,M=null,R={eventTypes:O,extractEvents:function(t,e,n,r){return[c(t,e,n,r),h(t,e,n,r)]}};t.exports=R},function(t,e,n){"use strict";function r(t){return"SELECT"===t.nodeName||"INPUT"===t.nodeName&&"file"===t.type}function i(t){var e=E.getPooled(k.change,j,t);_.accumulateTwoPhaseDispatches(e),x.batchedUpdates(o,e)}function o(t){b.enqueueEvents(t),b.processEventQueue()}function a(t,e){O=t,j=e,O.attachEvent("onchange",i)}function s(){O&&(O.detachEvent("onchange",i),O=null,j=null)}function u(t,e,n){return t===A.topChange?n:void 0}function c(t,e,n){t===A.topFocus?(s(),a(e,n)):t===A.topBlur&&s()}function l(t,e){O=t,j=e,M=t.value,R=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(O,"value",I),O.attachEvent("onpropertychange",h)}function f(){O&&(delete O.value,O.detachEvent("onpropertychange",h),O=null,j=null,M=null,R=null)}function h(t){if("value"===t.propertyName){var e=t.srcElement.value;e!==M&&(M=e,i(t))}}function p(t,e,n){return t===A.topInput?n:void 0}function d(t,e,n){t===A.topFocus?(f(),l(e,n)):t===A.topBlur&&f()}function m(t,e,n){return t!==A.topSelectionChange&&t!==A.topKeyUp&&t!==A.topKeyDown||!O||O.value===M?void 0:(M=O.value,j)}function v(t){return"INPUT"===t.nodeName&&("checkbox"===t.type||"radio"===t.type)}function g(t,e,n){return t===A.topClick?n:void 0}var y=n(10),b=n(33),_=n(34),w=n(9),x=n(14),E=n(22),T=n(72),C=n(107),S=n(20),A=y.topLevelTypes,k={change:{phasedRegistrationNames:{bubbled:S({onChange:null}),captured:S({onChangeCapture:null})},dependencies:[A.topBlur,A.topChange,A.topClick,A.topFocus,A.topInput,A.topKeyDown,A.topKeyUp,A.topSelectionChange]}},O=null,j=null,M=null,R=null,N=!1;w.canUseDOM&&(N=T("change")&&(!("documentMode"in document)||document.documentMode>8));var P=!1;w.canUseDOM&&(P=T("input")&&(!("documentMode"in document)||document.documentMode>9));var I={get:function(){return R.get.call(this)},set:function(t){M=""+t,R.set.call(this,t)}},D={eventTypes:k,extractEvents:function(t,e,n,i){var o,a;if(r(e)?N?o=u:a=c:C(e)?P?o=p:(o=m,a=d):v(e)&&(o=g),o){var s=o(t,e,n);if(s){var l=E.getPooled(k.change,s,i);return _.accumulateTwoPhaseDispatches(l),l}}a&&a(t,e,n)}};t.exports=D},function(t,e,n){"use strict";var r=0,i={createReactRootIndex:function(){return r++}};t.exports=i},function(t,e,n){(function(e){"use strict";function r(t,e,n){t.insertBefore(e,t.childNodes[n]||null)}var i=n(155),o=n(94),a=n(223),s=n(2),u={dangerouslyReplaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup,updateTextContent:a,processUpdates:function(t,n){for(var u,c=null,l=null,f=0;f<t.length;f++)if(u=t[f],u.type===o.MOVE_EXISTING||u.type===o.REMOVE_NODE){var h=u.fromIndex,p=u.parentNode.childNodes[h],d=u.parentID;"production"!==e.env.NODE_ENV?s(p,"processUpdates(): Unable to find child %s of element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",h,d):s(p),c=c||{},c[d]=c[d]||[],c[d][h]=p,l=l||[],l.push(p)}var m=i.dangerouslyRenderMarkup(n);if(l)for(var v=0;v<l.length;v++)l[v].parentNode.removeChild(l[v]);for(var g=0;g<t.length;g++)switch(u=t[g],u.type){case o.INSERT_MARKUP:r(u.parentNode,m[u.markupIndex],u.toIndex);break;case o.MOVE_EXISTING:r(u.parentNode,c[u.parentID][u.fromIndex],u.toIndex);break;case o.TEXT_CONTENT:a(u.parentNode,u.textContent);break;case o.REMOVE_NODE:}}};t.exports=u}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(t){return t.substring(1,t.indexOf(" "))}var i=n(9),o=n(207),a=n(19),s=n(104),u=n(2),c=/^(<[^ \/>]+)/,l="data-danger-index",f={dangerouslyRenderMarkup:function(t){"production"!==e.env.NODE_ENV?u(i.canUseDOM,"dangerouslyRenderMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering."):u(i.canUseDOM);for(var n,f={},h=0;h<t.length;h++)"production"!==e.env.NODE_ENV?u(t[h],"dangerouslyRenderMarkup(...): Missing markup."):u(t[h]),n=r(t[h]),n=s(n)?n:"*",f[n]=f[n]||[],f[n][h]=t[h];var p=[],d=0;for(n in f)if(f.hasOwnProperty(n)){var m,v=f[n];for(m in v)if(v.hasOwnProperty(m)){var g=v[m];v[m]=g.replace(c,"$1 "+l+'="'+m+'" ')}for(var y=o(v.join(""),a),b=0;b<y.length;++b){var _=y[b];_.hasAttribute&&_.hasAttribute(l)?(m=+_.getAttribute(l),_.removeAttribute(l),"production"!==e.env.NODE_ENV?u(!p.hasOwnProperty(m),"Danger: Assigning to an already-occupied result index."):u(!p.hasOwnProperty(m)),p[m]=_,d+=1):"production"!==e.env.NODE_ENV&&console.error("Danger: Discarding unexpected node:",_)}}return"production"!==e.env.NODE_ENV?u(d===p.length,"Danger: Did not assign to every index of resultList."):u(d===p.length),"production"!==e.env.NODE_ENV?u(p.length===t.length,"Danger: Expected markup to render %s nodes, but rendered %s.",t.length,p.length):u(p.length===t.length),p},dangerouslyReplaceNodeWithMarkup:function(t,n){"production"!==e.env.NODE_ENV?u(i.canUseDOM,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering."):u(i.canUseDOM),"production"!==e.env.NODE_ENV?u(n,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."):u(n),"production"!==e.env.NODE_ENV?u("html"!==t.tagName.toLowerCase(),"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See React.renderToString()."):u("html"!==t.tagName.toLowerCase());var r=o(n,a)[0];t.parentNode.replaceChild(r,t)}};t.exports=f}).call(e,n(1))},function(t,e,n){"use strict";var r=n(20),i=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({BeforeInputEventPlugin:null}),r({AnalyticsEventPlugin:null}),r({MobileSafariClickEventPlugin:null})];t.exports=i},function(t,e,n){"use strict";var r=n(10),i=n(34),o=n(44),a=n(13),s=n(20),u=r.topLevelTypes,c=a.getFirstReactDOM,l={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[u.topMouseOut,u.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[u.topMouseOut,u.topMouseOver]}},f=[null,null],h={eventTypes:l,extractEvents:function(t,e,n,r){if(t===u.topMouseOver&&(r.relatedTarget||r.fromElement))return null;if(t!==u.topMouseOut&&t!==u.topMouseOver)return null;var s;if(e.window===e)s=e;else{var h=e.ownerDocument;s=h?h.defaultView||h.parentWindow:window}var p,d;if(t===u.topMouseOut?(p=e,d=c(r.relatedTarget||r.toElement)||s):(p=s,d=e),p===d)return null;var m=p?a.getID(p):"",v=d?a.getID(d):"",g=o.getPooled(l.mouseLeave,m,r);g.type="mouseleave",g.target=p,g.relatedTarget=d;var y=o.getPooled(l.mouseEnter,v,r);return y.type="mouseenter",y.target=d,y.relatedTarget=p,i.accumulateEnterLeaveDispatches(g,y,m,v),f[0]=g,f[1]=y,f}};t.exports=h},function(t,e,n){(function(e){var r=n(19),i={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0},capture:function(t,n,i){return t.addEventListener?(t.addEventListener(n,i,!0),{remove:function(){t.removeEventListener(n,i,!0)}}):("production"!==e.env.NODE_ENV&&console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:r})},registerDefault:function(){}};t.exports=i}).call(e,n(1))},function(t,e,n){"use strict";function r(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var i=n(15),o=n(3),a=n(105);o(r.prototype,{getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,n=this._startText,r=n.length,i=this.getText(),o=i.length;for(t=0;r>t&&n[t]===i[t];t++);var a=r-t;for(e=1;a>=e&&n[r-e]===i[o-e];e++);var s=e>1?1-e:void 0;return this._fallbackText=i.slice(t,s),this._fallbackText}}),i.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";var r,i=n(21),o=n(9),a=i.injection.MUST_USE_ATTRIBUTE,s=i.injection.MUST_USE_PROPERTY,u=i.injection.HAS_BOOLEAN_VALUE,c=i.injection.HAS_SIDE_EFFECTS,l=i.injection.HAS_NUMERIC_VALUE,f=i.injection.HAS_POSITIVE_NUMERIC_VALUE,h=i.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(o.canUseDOM){var p=document.implementation;r=p&&p.hasFeature&&p.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var d={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:a|u,allowTransparency:a,alt:null,async:u,autoComplete:null,autoPlay:u,cellPadding:null,cellSpacing:null,charSet:a,checked:s|u,classID:a,className:r?a:s,cols:a|f,colSpan:null,content:null,contentEditable:null,contextMenu:a,controls:s|u,coords:null,crossOrigin:null,data:null,dateTime:a,defer:u,dir:null,disabled:a|u,download:h,draggable:null,encType:null,form:a,formAction:a,formEncType:a,formMethod:a,formNoValidate:u,formTarget:a,frameBorder:a,headers:null,height:a,hidden:a|u,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:s,label:null,lang:null,list:a,loop:s|u,low:null,manifest:a,marginHeight:null,marginWidth:null,max:null,maxLength:a,media:a,mediaGroup:null,method:null,min:null,multiple:s|u,muted:s|u,name:null,noValidate:u,open:u,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:s|u,rel:null,required:u,role:a,rows:a|f,rowSpan:null,sandbox:null,scope:null,scoped:u,scrolling:null,seamless:a|u,selected:s|u,shape:null,size:a|f,sizes:a,span:f,spellCheck:null,src:null,srcDoc:s,srcSet:a,start:l,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:s|c,width:a,wmode:a,autoCapitalize:null,autoCorrect:null,itemProp:a,itemScope:a|u,itemType:a,itemID:a,itemRef:a,property:null,unselectable:a},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=d},function(t,e,n){"use strict";var r=n(10),i=n(19),o=r.topLevelTypes,a={eventTypes:null,extractEvents:function(t,e,n,r){if(t===o.topTouchStart){var a=r.target;a&&!a.onclick&&(a.onclick=i)}}};t.exports=a},function(t,e,n){(function(e){"use strict";var r=n(55),i=n(164),o=n(89),a=n(11),s=n(60),u=n(17),c=n(4),l=n(35),f=n(166),h=n(91),p=n(177),d=n(25),m=n(13),v=n(18),g=n(95),y=n(27),b=n(188),_=n(3),w=n(100),x=n(219);p.inject();var E=c.createElement,T=c.createFactory,C=c.cloneElement;"production"!==e.env.NODE_ENV&&(E=l.createElement,T=l.createFactory,C=l.cloneElement);var S=v.measure("React","render",m.render),A={Children:{map:i.map,forEach:i.forEach,count:i.count,only:x},Component:o,DOM:f,PropTypes:g,initializeTouchEvents:function(t){r.useTouchEvents=t},createClass:a.createClass,createElement:E,cloneElement:C,createFactory:T,createMixin:function(t){return t},constructAndRenderComponent:m.constructAndRenderComponent,constructAndRenderComponentByID:m.constructAndRenderComponentByID,findDOMNode:w,render:S,renderToString:b.renderToString,renderToStaticMarkup:b.renderToStaticMarkup,unmountComponentAtNode:m.unmountComponentAtNode,isValidElement:c.isValidElement,withContext:s.withContext,__spread:_};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:u,InstanceHandles:d,Mount:m,Reconciler:y,TextComponent:h}),"production"!==e.env.NODE_ENV){var k=n(9);if(k.canUseDOM&&window.top===window.self){navigator.userAgent.indexOf("Chrome")>-1&&"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&console.debug("Download the React DevTools for a better development experience: http://fb.me/react-devtools");for(var O=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim,Object.create,Object.freeze],j=0;j<O.length;j++)if(!O[j]){console.error("One or more ES5 shim/shams expected by React are not available: http://fb.me/react-warning-polyfills");break}}}A.version="0.13.2",t.exports=A}).call(e,n(1))},function(t,e,n){"use strict";var r=n(27),i=n(209),o=n(71),a=n(74),s={instantiateChildren:function(t,e,n){var r=i(t);for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],u=o(s,null);r[a]=u}return r},updateChildren:function(t,e,n,s){var u=i(e);if(!u&&!t)return null;var c;for(c in u)if(u.hasOwnProperty(c)){var l=t&&t[c],f=l&&l._currentElement,h=u[c];if(a(f,h))r.receiveComponent(l,h,n,s),u[c]=l;else{l&&r.unmountComponent(l,c);var p=o(h,null);u[c]=p}}for(c in t)!t.hasOwnProperty(c)||u&&u.hasOwnProperty(c)||r.unmountComponent(t[c]);return u},unmountChildren:function(t){for(var e in t){var n=t[e];r.unmountComponent(n)}}};t.exports=s},function(t,e,n){(function(e){"use strict";function r(t,e){this.forEachFunction=t,this.forEachContext=e}function i(t,e,n,r){var i=t;i.forEachFunction.call(i.forEachContext,e,r)}function o(t,e,n){if(null==t)return t;var o=r.getPooled(e,n);p(t,i,o),r.release(o)}function a(t,e,n){this.mapResult=t,this.mapFunction=e,this.mapContext=n}function s(t,n,r,i){var o=t,a=o.mapResult,s=!a.hasOwnProperty(r);if("production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?d(s,"ReactChildren.map(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",r):null),s){var u=o.mapFunction.call(o.mapContext,n,i);a[r]=u}}function u(t,e,n){if(null==t)return t;var r={},i=a.getPooled(r,e,n);return p(t,s,i),a.release(i),h.create(r)}function c(t,e,n,r){return null}function l(t,e){return p(t,c,null)}var f=n(15),h=n(41),p=n(108),d=n(5),m=f.twoArgumentPooler,v=f.threeArgumentPooler;f.addPoolingTo(r,m),f.addPoolingTo(a,v);var g={forEach:o,map:u,count:l};t.exports=g}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(t){var e=t._currentElement._owner||null;if(e){var n=e.getName();if(n)return" Check the render method of `"+n+"`."}return""}var i=n(59),o=n(60),a=n(17),s=n(4),u=n(35),c=n(26),l=n(63),f=n(42),h=n(18),p=n(64),d=n(43),m=n(27),v=n(14),g=n(3),y=n(46),b=n(2),_=n(74),w=n(5),x=1,E={construct:function(t){this._currentElement=t,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._isTopLevel=!1,this._pendingCallbacks=null},mountComponent:function(t,n,r){this._context=r,this._mountOrder=x++,this._rootNodeID=t;var i=this._processProps(this._currentElement.props),o=this._processContext(this._currentElement._context),a=f.getComponentClassForElement(this._currentElement),s=new a(i,o);"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?w(null!=s.render,"%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render` in your component or you may have accidentally tried to render an element whose type is a function that isn't a React component.",a.displayName||a.name||"Component"):null),s.props=i,s.context=o,s.refs=y,this._instance=s,c.set(s,this),"production"!==e.env.NODE_ENV&&this._warnIfContextsDiffer(this._currentElement._context,r),"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?w(!s.getInitialState||s.getInitialState.isReactClassApproved,"getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",this.getName()||"a component"):null,"production"!==e.env.NODE_ENV?w(!s.getDefaultProps||s.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",this.getName()||"a component"):null,"production"!==e.env.NODE_ENV?w(!s.propTypes,"propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",this.getName()||"a component"):null,"production"!==e.env.NODE_ENV?w(!s.contextTypes,"contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",this.getName()||"a component"):null,"production"!==e.env.NODE_ENV?w("function"!=typeof s.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",this.getName()||"A component"):null);var u=s.state;void 0===u&&(s.state=u=null),"production"!==e.env.NODE_ENV?b("object"==typeof u&&!Array.isArray(u),"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"):b("object"==typeof u&&!Array.isArray(u)),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var h,p=l.currentlyMountingInstance;l.currentlyMountingInstance=this;try{s.componentWillMount&&(s.componentWillMount(),this._pendingStateQueue&&(s.state=this._processPendingState(s.props,s.context))),h=this._renderValidatedComponent()}finally{l.currentlyMountingInstance=p}this._renderedComponent=this._instantiateReactComponent(h,this._currentElement.type);var d=m.mountComponent(this._renderedComponent,t,n,this._processChildContext(r));return s.componentDidMount&&n.getReactMountReady().enqueue(s.componentDidMount,s),d},unmountComponent:function(){var t=this._instance;if(t.componentWillUnmount){var e=l.currentlyUnmountingInstance;l.currentlyUnmountingInstance=this;try{t.componentWillUnmount()}finally{l.currentlyUnmountingInstance=e}}m.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,c.remove(t)},_setPropsInternal:function(t,e){var n=this._pendingElement||this._currentElement;this._pendingElement=s.cloneAndReplaceProps(n,g({},n.props,t)),v.enqueueUpdate(this,e)},_maskContext:function(t){var e=null;if("string"==typeof this._currentElement.type)return y;var n=this._currentElement.type.contextTypes;if(!n)return y;e={};for(var r in n)e[r]=t[r];return e},_processContext:function(t){var n=this._maskContext(t);if("production"!==e.env.NODE_ENV){var r=f.getComponentClassForElement(this._currentElement);r.contextTypes&&this._checkPropTypes(r.contextTypes,n,p.context)}return n},_processChildContext:function(t){var n=this._instance,r=n.getChildContext&&n.getChildContext();if(r){"production"!==e.env.NODE_ENV?b("object"==typeof n.constructor.childContextTypes,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",this.getName()||"ReactCompositeComponent"):b("object"==typeof n.constructor.childContextTypes),"production"!==e.env.NODE_ENV&&this._checkPropTypes(n.constructor.childContextTypes,r,p.childContext);for(var i in r)"production"!==e.env.NODE_ENV?b(i in n.constructor.childContextTypes,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",i):b(i in n.constructor.childContextTypes);return g({},t,r)}return t},_processProps:function(t){if("production"!==e.env.NODE_ENV){var n=f.getComponentClassForElement(this._currentElement);n.propTypes&&this._checkPropTypes(n.propTypes,t,p.prop)}return t},_checkPropTypes:function(t,n,i){var o=this.getName();for(var a in t)if(t.hasOwnProperty(a)){var s;try{"production"!==e.env.NODE_ENV?b("function"==typeof t[a],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",o||"React class",d[i],a):b("function"==typeof t[a]),s=t[a](n,a,o,i)}catch(u){s=u}if(s instanceof Error){var c=r(this);i===p.prop?"production"!==e.env.NODE_ENV?w(!1,"Failed Composite propType: %s%s",s.message,c):null:"production"!==e.env.NODE_ENV?w(!1,"Failed Context Types: %s%s",s.message,c):null}}},receiveComponent:function(t,e,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(e,r,t,i,n)},performUpdateIfNecessary:function(t){null!=this._pendingElement&&m.receiveComponent(this,this._pendingElement||this._currentElement,t,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&("production"!==e.env.NODE_ENV&&u.checkAndWarnForMutatedProps(this._currentElement),this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context))},_warnIfContextsDiffer:function(t,n){t=this._maskContext(t),n=this._maskContext(n);for(var r=Object.keys(n).sort(),i=this.getName()||"ReactCompositeComponent",o=0;o<r.length;o++){var a=r[o];"production"!==e.env.NODE_ENV?w(t[a]===n[a],"owner-based and parent-based contexts differ (values: `%s` vs `%s`) for key (%s) while mounting %s (see: http://fb.me/react-context-by-parent)",t[a],n[a],a,i):null}},updateComponent:function(t,n,r,i,o){var a=this._instance,s=a.context,u=a.props;n!==r&&(s=this._processContext(r._context),u=this._processProps(r.props),"production"!==e.env.NODE_ENV&&null!=o&&this._warnIfContextsDiffer(r._context,o),a.componentWillReceiveProps&&a.componentWillReceiveProps(u,s));var c=this._processPendingState(u,s),l=this._pendingForceUpdate||!a.shouldComponentUpdate||a.shouldComponentUpdate(u,c,s);"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?w("undefined"!=typeof l,"%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"):null),l?(this._pendingForceUpdate=!1,this._performComponentUpdate(r,u,c,s,t,o)):(this._currentElement=r,this._context=o,a.props=u,a.state=c,a.context=s)},_processPendingState:function(t,e){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;for(var o=g({},i?r[0]:n.state),a=i?1:0;a<r.length;a++){var s=r[a];g(o,"function"==typeof s?s.call(n,o,t,e):s)}return o},_performComponentUpdate:function(t,e,n,r,i,o){var a=this._instance,s=a.props,u=a.state,c=a.context;a.componentWillUpdate&&a.componentWillUpdate(e,n,r),this._currentElement=t,this._context=o,a.props=e,a.state=n,a.context=r,this._updateRenderedComponent(i,o),a.componentDidUpdate&&i.getReactMountReady().enqueue(a.componentDidUpdate.bind(a,s,u,c),a)},_updateRenderedComponent:function(t,e){var n=this._renderedComponent,r=n._currentElement,i=this._renderValidatedComponent();if(_(r,i))m.receiveComponent(n,i,t,this._processChildContext(e));else{var o=this._rootNodeID,a=n._rootNodeID;m.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(i,this._currentElement.type);var s=m.mountComponent(this._renderedComponent,o,t,this._processChildContext(e));this._replaceNodeWithMarkupByID(a,s)}},_replaceNodeWithMarkupByID:function(t,e){i.replaceNodeWithMarkupByID(t,e)},_renderValidatedComponentWithoutOwnerOrContext:function(){var t=this._instance,n=t.render();return"production"!==e.env.NODE_ENV&&"undefined"==typeof n&&t.render._isMockFunction&&(n=null),n},_renderValidatedComponent:function(){var t,n=o.current;o.current=this._processChildContext(this._currentElement._context),a.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{o.current=n,a.current=null}return"production"!==e.env.NODE_ENV?b(null===t||t===!1||s.isValidElement(t),"%s.render(): A valid ReactComponent must be returned. You may have returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"):b(null===t||t===!1||s.isValidElement(t)),t},attachRef:function(t,e){var n=this.getPublicInstance(),r=n.refs===y?n.refs={}:n.refs;r[t]=e.getPublicInstance()},detachRef:function(t){var e=this.getPublicInstance().refs;delete e[t]},getName:function(){var t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null},getPublicInstance:function(){return this._instance},_instantiateReactComponent:null};h.measureMethods(E,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var T={
Mixin:E};t.exports=T}).call(e,n(1))},function(t,e,n){(function(e){"use strict";function r(t){return"production"!==e.env.NODE_ENV?o.createFactory(t):i.createFactory(t)}var i=n(4),o=n(35),a=n(217),s=a({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},r);t.exports=s}).call(e,n(1))},function(t,e,n){"use strict";var r=n(40),i=n(16),o=n(11),a=n(4),s=n(37),u=a.createFactory("button"),c=s({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),l=o.createClass({displayName:"ReactDOMButton",tagName:"BUTTON",mixins:[r,i],render:function(){var t={};for(var e in this.props)!this.props.hasOwnProperty(e)||this.props.disabled&&c[e]||(t[e]=this.props[e]);return u(t,this.props.children)}});t.exports=l},function(t,e,n){"use strict";var r=n(10),i=n(57),o=n(16),a=n(11),s=n(4),u=s.createFactory("form"),c=a.createClass({displayName:"ReactDOMForm",tagName:"FORM",mixins:[o,i],render:function(){return u(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(r.topLevelTypes.topSubmit,"submit")}});t.exports=c},function(t,e,n){"use strict";var r=n(10),i=n(57),o=n(16),a=n(11),s=n(4),u=s.createFactory("iframe"),c=a.createClass({displayName:"ReactDOMIframe",tagName:"IFRAME",mixins:[o,i],render:function(){return u(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load")}});t.exports=c},function(t,e,n){"use strict";var r=n(10),i=n(57),o=n(16),a=n(11),s=n(4),u=s.createFactory("img"),c=a.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[o,i],render:function(){return u(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(r.topLevelTypes.topError,"error")}});t.exports=c},function(t,e,n){(function(e){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var i=n(40),o=n(32),a=n(56),s=n(16),u=n(11),c=n(4),l=n(13),f=n(14),h=n(3),p=n(2),d=c.createFactory("input"),m={},v=u.createClass({displayName:"ReactDOMInput",tagName:"INPUT",mixins:[i,a.Mixin,s],getInitialState:function(){var t=this.props.defaultValue;return{initialChecked:this.props.defaultChecked||!1,initialValue:null!=t?t:null}},render:function(){var t=h({},this.props);t.defaultChecked=null,t.defaultValue=null;var e=a.getValue(this);t.value=null!=e?e:this.state.initialValue;var n=a.getChecked(this);return t.checked=null!=n?n:this.state.initialChecked,t.onChange=this._handleChange,d(t,this.props.children)},componentDidMount:function(){var t=l.getID(this.getDOMNode());m[t]=this},componentWillUnmount:function(){var t=this.getDOMNode(),e=l.getID(t);delete m[e]},componentDidUpdate:function(t,e,n){var r=this.getDOMNode();null!=this.props.checked&&o.setValueForProperty(r,"checked",this.props.checked||!1);var i=a.getValue(this);null!=i&&o.setValueForProperty(r,"value",""+i)},_handleChange:function(t){var n,i=a.getOnChange(this);i&&(n=i.call(this,t)),f.asap(r,this);var o=this.props.name;if("radio"===this.props.type&&null!=o){for(var s=this.getDOMNode(),u=s;u.parentNode;)u=u.parentNode;for(var c=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),h=0,d=c.length;d>h;h++){var v=c[h];if(v!==s&&v.form===s.form){var g=l.getID(v);"production"!==e.env.NODE_ENV?p(g,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported."):p(g);var y=m[g];"production"!==e.env.NODE_ENV?p(y,"ReactDOMInput: Unknown radio button ID %s.",g):p(y),f.asap(r,y)}}}return n}});t.exports=v}).call(e,n(1))},function(t,e,n){(function(e){"use strict";var r=n(16),i=n(11),o=n(4),a=n(5),s=o.createFactory("option"),u=i.createClass({displayName:"ReactDOMOption",tagName:"OPTION",mixins:[r],componentWillMount:function(){"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?a(null==this.props.selected,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."):null)},render:function(){return s(this.props,this.props.children)}});t.exports=u}).call(e,n(1))},function(t,e,n){"use strict";function r(){if(this._pendingUpdate){this._pendingUpdate=!1;var t=s.getValue(this);null!=t&&this.isMounted()&&o(this,t)}}function i(t,e,n){if(null==t[e])return null;if(t.multiple){if(!Array.isArray(t[e]))return new Error("The `"+e+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(t[e]))return new Error("The `"+e+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function o(t,e){var n,r,i,o=t.getDOMNode().options;if(t.props.multiple){for(n={},r=0,i=e.length;i>r;r++)n[""+e[r]]=!0;for(r=0,i=o.length;i>r;r++){var a=n.hasOwnProperty(o[r].value);o[r].selected!==a&&(o[r].selected=a)}}else{for(n=""+e,r=0,i=o.length;i>r;r++)if(o[r].value===n)return void(o[r].selected=!0);o.length&&(o[0].selected=!0)}}var a=n(40),s=n(56),u=n(16),c=n(11),l=n(4),f=n(14),h=n(3),p=l.createFactory("select"),d=c.createClass({displayName:"ReactDOMSelect",tagName:"SELECT",mixins:[a,s.Mixin,u],propTypes:{defaultValue:i,value:i},render:function(){var t=h({},this.props);return t.onChange=this._handleChange,t.value=null,p(t,this.props.children)},componentWillMount:function(){this._pendingUpdate=!1},componentDidMount:function(){var t=s.getValue(this);null!=t?o(this,t):null!=this.props.defaultValue&&o(this,this.props.defaultValue)},componentDidUpdate:function(t){var e=s.getValue(this);null!=e?(this._pendingUpdate=!1,o(this,e)):!t.multiple!=!this.props.multiple&&(null!=this.props.defaultValue?o(this,this.props.defaultValue):o(this,this.props.multiple?[]:""))},_handleChange:function(t){var e,n=s.getOnChange(this);return n&&(e=n.call(this,t)),this._pendingUpdate=!0,f.asap(r,this),e}});t.exports=d},function(t,e,n){"use strict";function r(t,e,n,r){return t===n&&e===r}function i(t){var e=document.selection,n=e.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(t),i.setEndPoint("EndToStart",n);var o=i.text.length,a=o+r;return{start:o,end:a}}function o(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var n=e.anchorNode,i=e.anchorOffset,o=e.focusNode,a=e.focusOffset,s=e.getRangeAt(0),u=r(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),c=u?0:s.toString().length,l=s.cloneRange();l.selectNodeContents(t),l.setEnd(s.startContainer,s.startOffset);var f=r(l.startContainer,l.startOffset,l.endContainer,l.endOffset),h=f?0:l.toString().length,p=h+c,d=document.createRange();d.setStart(n,i),d.setEnd(o,a);var m=d.collapsed;return{start:m?p:h,end:m?h:p}}function a(t,e){var n,r,i=document.selection.createRange().duplicate();"undefined"==typeof e.end?(n=e.start,r=n):e.start>e.end?(n=e.end,r=e.start):(n=e.start,r=e.end),i.moveToElementText(t),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function s(t,e){if(window.getSelection){var n=window.getSelection(),r=t[l()].length,i=Math.min(e.start,r),o="undefined"==typeof e.end?i:Math.min(e.end,r);if(!n.extend&&i>o){var a=o;o=i,i=a}var s=c(t,i),u=c(t,o);if(s&&u){var f=document.createRange();f.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(f),n.extend(u.node,u.offset)):(f.setEnd(u.node,u.offset),n.addRange(f))}}}var u=n(9),c=n(211),l=n(105),f=u.canUseDOM&&"selection"in document&&!("getSelection"in window),h={getOffsets:f?i:o,setOffsets:f?a:s};t.exports=h},function(t,e,n){(function(e){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var i=n(40),o=n(32),a=n(56),s=n(16),u=n(11),c=n(4),l=n(14),f=n(3),h=n(2),p=n(5),d=c.createFactory("textarea"),m=u.createClass({displayName:"ReactDOMTextarea",tagName:"TEXTAREA",mixins:[i,a.Mixin,s],getInitialState:function(){var t=this.props.defaultValue,n=this.props.children;null!=n&&("production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?p(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."):null),"production"!==e.env.NODE_ENV?h(null==t,"If you supply `defaultValue` on a <textarea>, do not pass children."):h(null==t),Array.isArray(n)&&("production"!==e.env.NODE_ENV?h(n.length<=1,"<textarea> can only have at most one child."):h(n.length<=1),n=n[0]),t=""+n),null==t&&(t="");var r=a.getValue(this);return{initialValue:""+(null!=r?r:t)}},render:function(){var t=f({},this.props);return"production"!==e.env.NODE_ENV?h(null==t.dangerouslySetInnerHTML,"`dangerouslySetInnerHTML` does not make sense on <textarea>."):h(null==t.dangerouslySetInnerHTML),t.defaultValue=null,t.value=null,t.onChange=this._handleChange,d(t,this.state.initialValue)},componentDidUpdate:function(t,e,n){var r=a.getValue(this);if(null!=r){var i=this.getDOMNode();o.setValueForProperty(i,"value",""+r)}},_handleChange:function(t){var e,n=a.getOnChange(this);return n&&(e=n.call(this,t)),l.asap(r,this),e}});t.exports=m}).call(e,n(1))},function(t,e,n){"use strict";function r(){this.reinitializeTransaction()}var i=n(14),o=n(45),a=n(3),s=n(19),u={initialize:s,close:function(){h.isBatchingUpdates=!1}},c={initialize:s,close:i.flushBatchedUpdates.bind(i)},l=[c,u];a(r.prototype,o.Mixin,{getTransactionWrappers:function(){return l}});var f=new r,h={isBatchingUpdates:!1,batchedUpdates:function(t,e,n,r,i){var o=h.isBatchingUpdates;h.isBatchingUpdates=!0,o?t(e,n,r,i):f.perform(t,null,e,n,r,i)}};t.exports=h},function(t,e,n){(function(e){"use strict";function r(t){return d.createClass({tagName:t.toUpperCase(),render:function(){return new k(t,null,null,null,null,this.props)}})}function i(){if(j.EventEmitter.injectReactEventListener(O),j.EventPluginHub.injectEventPluginOrder(u),j.EventPluginHub.injectInstanceHandle(M),j.EventPluginHub.injectMount(R),j.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:D,EnterLeaveEventPlugin:c,ChangeEventPlugin:a,MobileSafariClickEventPlugin:h,SelectEventPlugin:P,BeforeInputEventPlugin:o}),j.NativeComponent.injectGenericComponentClass(g),j.NativeComponent.injectTextComponentClass(A),j.NativeComponent.injectAutoWrapper(r),j.Class.injectMixin(p),j.NativeComponent.injectComponentClasses({button:y,form:b,iframe:x,img:_,input:E,option:T,select:C,textarea:S,html:F("html"),head:F("head"),body:F("body")}),j.DOMProperty.injectDOMPropertyConfig(f),j.DOMProperty.injectDOMPropertyConfig(L),j.EmptyComponent.injectEmptyComponent("noscript"),j.Updates.injectReconcileTransaction(N),j.Updates.injectBatchingStrategy(v),j.RootIndex.injectCreateReactRootIndex(l.canUseDOM?s.createReactRootIndex:I.createReactRootIndex),j.Component.injectEnvironment(m),j.DOMComponent.injectIDOperations(w),"production"!==e.env.NODE_ENV){var t=l.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(t)){var i=n(178);i.start()}}}var o=n(151),a=n(152),s=n(153),u=n(156),c=n(157),l=n(9),f=n(160),h=n(161),p=n(16),d=n(11),m=n(58),v=n(176),g=n(61),y=n(167),b=n(168),_=n(170),w=n(90),x=n(169),E=n(171),T=n(172),C=n(173),S=n(175),A=n(91),k=n(4),O=n(182),j=n(183),M=n(25),R=n(13),N=n(186),P=n(191),I=n(192),D=n(193),L=n(190),F=n(206);t.exports={inject:i}}).call(e,n(1))},function(t,e,n){"use strict";function r(t){return Math.floor(100*t)/100}function i(t,e,n){t[e]=(t[e]||0)+n}var o=n(21),a=n(179),s=n(13),u=n(18),c=n(221),l={_allMeasurements:[],_mountStack:[0],_injected:!1,start:function(){l._injected||u.injection.injectMeasure(l.measure),l._allMeasurements.length=0,u.enableMeasure=!0},stop:function(){u.enableMeasure=!1},getLastMeasurements:function(){return l._allMeasurements},printExclusive:function(t){t=t||l._allMeasurements;var e=a.getExclusiveSummary(t);console.table(e.map(function(t){return{"Component class name":t.componentName,"Total inclusive time (ms)":r(t.inclusive),"Exclusive mount time (ms)":r(t.exclusive),"Exclusive render time (ms)":r(t.render),"Mount time per instance (ms)":r(t.exclusive/t.count),"Render time per instance (ms)":r(t.render/t.count),Instances:t.count}}))},printInclusive:function(t){t=t||l._allMeasurements;var e=a.getInclusiveSummary(t);console.table(e.map(function(t){return{"Owner > component":t.componentName,"Inclusive time (ms)":r(t.time),Instances:t.count}})),console.log("Total time:",a.getTotalTime(t).toFixed(2)+" ms")},getMeasurementsSummaryMap:function(t){var e=a.getInclusiveSummary(t,!0);return e.map(function(t){return{"Owner > component":t.componentName,"Wasted time (ms)":t.time,Instances:t.count}})},printWasted:function(t){t=t||l._allMeasurements,console.table(l.getMeasurementsSummaryMap(t)),console.log("Total time:",a.getTotalTime(t).toFixed(2)+" ms")},printDOM:function(t){t=t||l._allMeasurements;var e=a.getDOMSummary(t);console.table(e.map(function(t){var e={};return e[o.ID_ATTRIBUTE_NAME]=t.id,e.type=t.type,e.args=JSON.stringify(t.args),e})),console.log("Total time:",a.getTotalTime(t).toFixed(2)+" ms")},_recordWrite:function(t,e,n,r){var i=l._allMeasurements[l._allMeasurements.length-1].writes;i[t]=i[t]||[],i[t].push({type:e,time:n,args:r})},measure:function(t,e,n){return function(){for(var r=[],o=0,a=arguments.length;a>o;o++)r.push(arguments[o]);var u,f,h;if("_renderNewRootComponent"===e||"flushBatchedUpdates"===e)return l._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0}),h=c(),f=n.apply(this,r),l._allMeasurements[l._allMeasurements.length-1].totalTime=c()-h,f;if("_mountImageIntoNode"===e||"ReactDOMIDOperations"===t){if(h=c(),f=n.apply(this,r),u=c()-h,"_mountImageIntoNode"===e){var p=s.getID(r[1]);l._recordWrite(p,e,u,r[0])}else"dangerouslyProcessChildrenUpdates"===e?r[0].forEach(function(t){var e={};null!==t.fromIndex&&(e.fromIndex=t.fromIndex),null!==t.toIndex&&(e.toIndex=t.toIndex),null!==t.textContent&&(e.textContent=t.textContent),null!==t.markupIndex&&(e.markup=r[1][t.markupIndex]),l._recordWrite(t.parentID,t.type,u,e)}):l._recordWrite(r[0],e,u,Array.prototype.slice.call(r,1));return f}if("ReactCompositeComponent"!==t||"mountComponent"!==e&&"updateComponent"!==e&&"_renderValidatedComponent"!==e)return n.apply(this,r);if("string"==typeof this._currentElement.type)return n.apply(this,r);var d="mountComponent"===e?r[0]:this._rootNodeID,m="_renderValidatedComponent"===e,v="mountComponent"===e,g=l._mountStack,y=l._allMeasurements[l._allMeasurements.length-1];if(m?i(y.counts,d,1):v&&g.push(0),h=c(),f=n.apply(this,r),u=c()-h,m)i(y.render,d,u);else if(v){var b=g.pop();g[g.length-1]+=u,i(y.exclusive,d,u-b),i(y.inclusive,d,u)}else i(y.inclusive,d,u);return y.displayNames[d]={current:this.getName(),owner:this._currentElement._owner?this._currentElement._owner.getName():"<root>"},f}}};t.exports=l},function(t,e,n){function r(t){for(var e=0,n=0;n<t.length;n++){var r=t[n];e+=r.totalTime}return e}function i(t){for(var e=[],n=0;n<t.length;n++){var r,i=t[n];for(r in i.writes)i.writes[r].forEach(function(t){e.push({id:r,type:l[t.type]||t.type,args:t.args})})}return e}function o(t){for(var e,n={},r=0;r<t.length;r++){var i=t[r],o=u({},i.exclusive,i.inclusive);for(var a in o)e=i.displayNames[a].current,n[e]=n[e]||{componentName:e,inclusive:0,exclusive:0,render:0,count:0},i.render[a]&&(n[e].render+=i.render[a]),i.exclusive[a]&&(n[e].exclusive+=i.exclusive[a]),i.inclusive[a]&&(n[e].inclusive+=i.inclusive[a]),i.counts[a]&&(n[e].count+=i.counts[a])}var s=[];for(e in n)n[e].exclusive>=c&&s.push(n[e]);return s.sort(function(t,e){return e.exclusive-t.exclusive}),s}function a(t,e){for(var n,r={},i=0;i<t.length;i++){var o,a=t[i],l=u({},a.exclusive,a.inclusive);e&&(o=s(a));for(var f in l)if(!e||o[f]){var h=a.displayNames[f];n=h.owner+" > "+h.current,r[n]=r[n]||{componentName:n,time:0,count:0},a.inclusive[f]&&(r[n].time+=a.inclusive[f]),a.counts[f]&&(r[n].count+=a.counts[f])}}var p=[];for(n in r)r[n].time>=c&&p.push(r[n]);return p.sort(function(t,e){return e.time-t.time}),p}function s(t){var e={},n=Object.keys(t.writes),r=u({},t.exclusive,t.inclusive);for(var i in r){for(var o=!1,a=0;a<n.length;a++)if(0===n[a].indexOf(i)){o=!0;break}!o&&t.counts[i]>0&&(e[i]=!0)}return e}var u=n(3),c=1.2,l={_mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",TEXT_CONTENT:"set textContent",updatePropertyByID:"update attribute",deletePropertyByID:"delete attribute",updateStylesByID:"update styles",updateInnerHTMLByID:"set innerHTML",dangerouslyReplaceNodeWithMarkupByID:"replace"},f={getExclusiveSummary:o,getInclusiveSummary:a,getDOMSummary:i,getTotalTime:r};t.exports=f},function(t,e,n){"use strict";var r={guard:function(t,e){return t}};t.exports=r},function(t,e,n){"use strict";function r(t){i.enqueueEvents(t),i.processEventQueue()}var i=n(33),o={handleTopLevel:function(t,e,n,o){var a=i.extractEvents(t,e,n,o);r(a)}};t.exports=o},function(t,e,n){"use strict";function r(t){var e=f.getID(t),n=l.getReactRootIDFromNodeID(e),r=f.findReactContainerForID(n),i=f.getFirstReactDOM(r);return i}function i(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function o(t){for(var e=f.getFirstReactDOM(d(t.nativeEvent))||window,n=e;n;)t.ancestors.push(n),n=r(n);for(var i=0,o=t.ancestors.length;o>i;i++){e=t.ancestors[i];var a=f.getID(e)||"";v._handleTopLevel(t.topLevelType,e,a,t.nativeEvent)}}function a(t){var e=m(window);t(e)}var s=n(158),u=n(9),c=n(15),l=n(25),f=n(13),h=n(14),p=n(3),d=n(70),m=n(213);p(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(i,c.twoArgumentPooler);var v={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(t){v._handleTopLevel=t},setEnabled:function(t){v._enabled=!!t},isEnabled:function(){return v._enabled},trapBubbledEvent:function(t,e,n){var r=n;return r?s.listen(r,e,v.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,n){var r=n;return r?s.capture(r,e,v.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var e=a.bind(null,t);s.listen(window,"scroll",e)},dispatchEvent:function(t,e){if(v._enabled){var n=i.getPooled(t,e);try{h.batchedUpdates(o,n)}finally{i.release(n)}}}};t.exports=v},function(t,e,n){"use strict";var r=n(21),i=n(33),o=n(59),a=n(11),s=n(62),u=n(24),c=n(42),l=n(61),f=n(18),h=n(97),p=n(14),d={Component:o.injection,Class:a.injection,DOMComponent:l.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:i.injection,EventEmitter:u.injection,NativeComponent:c.injection,Perf:f.injection,RootIndex:h.injection,Updates:p.injection};t.exports=d},function(t,e,n){"use strict";function r(t,e,n){d.push({parentID:t,parentNode:null,type:l.INSERT_MARKUP,markupIndex:m.push(e)-1,textContent:null,fromIndex:null,toIndex:n})}function i(t,e,n){d.push({parentID:t,parentNode:null,type:l.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:e,toIndex:n})}function o(t,e){d.push({parentID:t,parentNode:null,type:l.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:e,toIndex:null})}function a(t,e){d.push({parentID:t,parentNode:null,type:l.TEXT_CONTENT,markupIndex:null,textContent:e,fromIndex:null,toIndex:null})}function s(){d.length&&(c.processChildrenUpdates(d,m),u())}function u(){d.length=0,m.length=0}var c=n(59),l=n(94),f=n(27),h=n(163),p=0,d=[],m=[],v={Mixin:{mountChildren:function(t,e,n){var r=h.instantiateChildren(t,e,n);this._renderedChildren=r;var i=[],o=0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],u=this._rootNodeID+a,c=f.mountComponent(s,u,e,n);s._mountIndex=o,i.push(c),o++}return i},updateTextContent:function(t){p++;var e=!0;try{var n=this._renderedChildren;h.unmountChildren(n);for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(t),e=!1}finally{p--,p||(e?u():s())}},updateChildren:function(t,e,n){p++;var r=!0;try{this._updateChildren(t,e,n),r=!1}finally{p--,p||(r?u():s())}},_updateChildren:function(t,e,n){var r=this._renderedChildren,i=h.updateChildren(r,t,e,n);if(this._renderedChildren=i,i||r){var o,a=0,s=0;for(o in i)if(i.hasOwnProperty(o)){var u=r&&r[o],c=i[o];u===c?(this.moveChild(u,s,a),a=Math.max(u._mountIndex,a),u._mountIndex=s):(u&&(a=Math.max(u._mountIndex,a),this._unmountChildByName(u,o)),this._mountChildByNameAtIndex(c,o,s,e,n)),s++}for(o in r)!r.hasOwnProperty(o)||i&&i.hasOwnProperty(o)||this._unmountChildByName(r[o],o)}},unmountChildren:function(){var t=this._renderedChildren;h.unmountChildren(t),this._renderedChildren=null},moveChild:function(t,e,n){t._mountIndex<n&&i(this._rootNodeID,t._mountIndex,e)},createChild:function(t,e){r(this._rootNodeID,e,t._mountIndex)},removeChild:function(t){o(this._rootNodeID,t._mountIndex)},setTextContent:function(t){a(this._rootNodeID,t)},_mountChildByNameAtIndex:function(t,e,n,r,i){var o=this._rootNodeID+e,a=f.mountComponent(t,o,r,i);t._mountIndex=n,this.createChild(t,a)},_unmountChildByName:function(t,e){this.removeChild(t),t._mountIndex=null}}};t.exports=v},function(t,e,n){(function(e){"use strict";var r=n(2),i={isValidOwner:function(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)},addComponentAsRefTo:function(t,n,o){"production"!==e.env.NODE_ENV?r(i.isValidOwner(o),"addComponentAsRefTo(...): Only a ReactOwner can have refs. This usually means that you're trying to add a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."):r(i.isValidOwner(o)),o.attachRef(n,t)},removeComponentAsRefFrom:function(t,n,o){"production"!==e.env.NODE_ENV?r(i.isValidOwner(o),"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. This usually means that you're trying to remove a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."):r(i.isValidOwner(o)),o.getPublicInstance().refs[n]===t.getPublicInstance()&&o.detachRef(n)}};t.exports=i}).call(e,n(1))},function(t,e,n){"use strict";function r(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=i.getPooled(null),this.putListenerQueue=u.getPooled()}var i=n(54),o=n(15),a=n(24),s=n(92),u=n(96),c=n(45),l=n(3),f={initialize:s.getSelectionInformation,close:s.restoreSelection},h={initialize:function(){var t=a.isEnabled();return a.setEnabled(!1),t},close:function(t){a.setEnabled(t)}},p={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},d={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},m=[d,f,h,p],v={getTransactionWrappers:function(){return m},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null,u.release(this.putListenerQueue),this.putListenerQueue=null}};l(r.prototype,c.Mixin,v),o.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";function r(t,e,n){"function"==typeof t?t(e.getPublicInstance()):o.addComponentAsRefTo(e,t,n)}function i(t,e,n){"function"==typeof t?t(null):o.removeComponentAsRefFrom(e,t,n)}var o=n(185),a={};a.attachRefs=function(t,e){var n=e.ref;null!=n&&r(n,t,e._owner)},a.shouldUpdateRefs=function(t,e){return e._owner!==t._owner||e.ref!==t.ref},a.detachRefs=function(t,e){var n=e.ref;null!=n&&i(n,t,e._owner)},t.exports=a},function(t,e,n){(function(e){"use strict";function r(t){"production"!==e.env.NODE_ENV?f(o.isValidElement(t),"renderToString(): You must pass a valid ReactElement."):f(o.isValidElement(t));var n;try{var r=a.createReactRootID();return n=u.getPooled(!1),n.perform(function(){var e=l(t,null),i=e.mountComponent(r,n,c);return s.addChecksumToMarkup(i)},null)}finally{u.release(n)}}function i(t){"production"!==e.env.NODE_ENV?f(o.isValidElement(t),"renderToStaticMarkup(): You must pass a valid ReactElement."):f(o.isValidElement(t));var n;try{var r=a.createReactRootID();return n=u.getPooled(!0),n.perform(function(){var e=l(t,null);return e.mountComponent(r,n,c)},null)}finally{u.release(n)}}var o=n(4),a=n(25),s=n(93),u=n(189),c=n(46),l=n(71),f=n(2);t.exports={renderToString:r,renderToStaticMarkup:i}}).call(e,n(1))},function(t,e,n){"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.reactMountReady=o.getPooled(null),this.putListenerQueue=a.getPooled()}var i=n(15),o=n(54),a=n(96),s=n(45),u=n(3),c=n(19),l={initialize:function(){this.reactMountReady.reset()},close:c},f={initialize:function(){this.putListenerQueue.reset()},close:c},h=[f,l],p={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null,a.release(this.putListenerQueue),this.putListenerQueue=null}};u(r.prototype,s.Mixin,p),i.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";var r=n(21),i=r.injection.MUST_USE_ATTRIBUTE,o={Properties:{cx:i,cy:i,d:i,dx:i,dy:i,fill:i,fillOpacity:i,fontFamily:i,fontSize:i,fx:i,fy:i,gradientTransform:i,gradientUnits:i,markerEnd:i,markerMid:i,markerStart:i,offset:i,opacity:i,patternContentUnits:i,patternUnits:i,points:i,preserveAspectRatio:i,r:i,rx:i,ry:i,spreadMethod:i,stopColor:i,stopOpacity:i,stroke:i,strokeDasharray:i,strokeLinecap:i,strokeOpacity:i,strokeWidth:i,textAnchor:i,transform:i,version:i,viewBox:i,x1:i,x2:i,x:i,y1:i,y2:i,y:i},DOMAttributeNames:{fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};t.exports=o},function(t,e,n){"use strict";function r(t){if("selectionStart"in t&&s.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var e=window.getSelection();return{anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(t){if(y||null==m||m!==c())return null;var e=r(m);if(!g||!h(g,e)){g=e;var n=u.getPooled(d.select,v,t);return n.type="select",n.target=m,a.accumulateTwoPhaseDispatches(n),n}}var o=n(10),a=n(34),s=n(92),u=n(22),c=n(102),l=n(107),f=n(20),h=n(224),p=o.topLevelTypes,d={select:{phasedRegistrationNames:{bubbled:f({onSelect:null}),captured:f({onSelectCapture:null})},dependencies:[p.topBlur,p.topContextMenu,p.topFocus,p.topKeyDown,p.topMouseDown,p.topMouseUp,p.topSelectionChange]}},m=null,v=null,g=null,y=!1,b={eventTypes:d,extractEvents:function(t,e,n,r){switch(t){case p.topFocus:(l(e)||"true"===e.contentEditable)&&(m=e,v=n,g=null);break;case p.topBlur:m=null,v=null,g=null;break;case p.topMouseDown:y=!0;break;case p.topContextMenu:case p.topMouseUp:return y=!1,i(r);case p.topSelectionChange:case p.topKeyDown:case p.topKeyUp:return i(r)}}};t.exports=b},function(t,e,n){"use strict";var r=Math.pow(2,53),i={createReactRootIndex:function(){return Math.ceil(Math.random()*r)}};t.exports=i},function(t,e,n){(function(e){"use strict";var r=n(10),i=n(55),o=n(34),a=n(194),s=n(22),u=n(197),c=n(199),l=n(44),f=n(196),h=n(200),p=n(36),d=n(201),m=n(68),v=n(2),g=n(20),y=n(5),b=r.topLevelTypes,_={blur:{phasedRegistrationNames:{bubbled:g({onBlur:!0}),captured:g({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:g({onClick:!0}),captured:g({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:g({onContextMenu:!0}),captured:g({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:g({onCopy:!0}),captured:g({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:g({onCut:!0}),captured:g({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:g({onDoubleClick:!0}),captured:g({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:g({onDrag:!0}),captured:g({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:g({onDragEnd:!0}),captured:g({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:g({onDragEnter:!0}),captured:g({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:g({onDragExit:!0}),captured:g({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:g({onDragLeave:!0}),captured:g({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:g({onDragOver:!0}),captured:g({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:g({onDragStart:!0}),captured:g({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:g({onDrop:!0}),captured:g({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:g({onFocus:!0}),captured:g({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:g({onInput:!0}),captured:g({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:g({onKeyDown:!0}),captured:g({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:g({onKeyPress:!0}),captured:g({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:g({onKeyUp:!0}),captured:g({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:g({onLoad:!0}),captured:g({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:g({onError:!0}),captured:g({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:g({onMouseDown:!0}),captured:g({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:g({onMouseMove:!0}),captured:g({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:g({onMouseOut:!0}),captured:g({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:g({onMouseOver:!0}),captured:g({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:g({onMouseUp:!0}),captured:g({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:g({onPaste:!0}),captured:g({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:g({onReset:!0}),captured:g({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:g({onScroll:!0}),captured:g({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{
bubbled:g({onSubmit:!0}),captured:g({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:g({onTouchCancel:!0}),captured:g({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:g({onTouchEnd:!0}),captured:g({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:g({onTouchMove:!0}),captured:g({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:g({onTouchStart:!0}),captured:g({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:g({onWheel:!0}),captured:g({onWheelCapture:!0})}}},w={topBlur:_.blur,topClick:_.click,topContextMenu:_.contextMenu,topCopy:_.copy,topCut:_.cut,topDoubleClick:_.doubleClick,topDrag:_.drag,topDragEnd:_.dragEnd,topDragEnter:_.dragEnter,topDragExit:_.dragExit,topDragLeave:_.dragLeave,topDragOver:_.dragOver,topDragStart:_.dragStart,topDrop:_.drop,topError:_.error,topFocus:_.focus,topInput:_.input,topKeyDown:_.keyDown,topKeyPress:_.keyPress,topKeyUp:_.keyUp,topLoad:_.load,topMouseDown:_.mouseDown,topMouseMove:_.mouseMove,topMouseOut:_.mouseOut,topMouseOver:_.mouseOver,topMouseUp:_.mouseUp,topPaste:_.paste,topReset:_.reset,topScroll:_.scroll,topSubmit:_.submit,topTouchCancel:_.touchCancel,topTouchEnd:_.touchEnd,topTouchMove:_.touchMove,topTouchStart:_.touchStart,topWheel:_.wheel};for(var x in w)w[x].dependencies=[x];var E={eventTypes:_,executeDispatch:function(t,n,r){var o=i.executeDispatch(t,n,r);"production"!==e.env.NODE_ENV?y("boolean"!=typeof o,"Returning `false` from an event handler is deprecated and will be ignored in a future release. Instead, manually call e.stopPropagation() or e.preventDefault(), as appropriate."):null,o===!1&&(t.stopPropagation(),t.preventDefault())},extractEvents:function(t,n,r,i){var g=w[t];if(!g)return null;var y;switch(t){case b.topInput:case b.topLoad:case b.topError:case b.topReset:case b.topSubmit:y=s;break;case b.topKeyPress:if(0===m(i))return null;case b.topKeyDown:case b.topKeyUp:y=c;break;case b.topBlur:case b.topFocus:y=u;break;case b.topClick:if(2===i.button)return null;case b.topContextMenu:case b.topDoubleClick:case b.topMouseDown:case b.topMouseMove:case b.topMouseOut:case b.topMouseOver:case b.topMouseUp:y=l;break;case b.topDrag:case b.topDragEnd:case b.topDragEnter:case b.topDragExit:case b.topDragLeave:case b.topDragOver:case b.topDragStart:case b.topDrop:y=f;break;case b.topTouchCancel:case b.topTouchEnd:case b.topTouchMove:case b.topTouchStart:y=h;break;case b.topScroll:y=p;break;case b.topWheel:y=d;break;case b.topCopy:case b.topCut:case b.topPaste:y=a}"production"!==e.env.NODE_ENV?v(y,"SimpleEventPlugin: Unhandled event type, `%s`.",t):v(y);var _=y.getPooled(g,r,i);return o.accumulateTwoPhaseDispatches(_),_}};t.exports=E}).call(e,n(1))},function(t,e,n){"use strict";function r(t,e,n){i.call(this,t,e,n)}var i=n(22),o={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n){i.call(this,t,e,n)}var i=n(22),o={data:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n){i.call(this,t,e,n)}var i=n(44),o={dataTransfer:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n){i.call(this,t,e,n)}var i=n(36),o={relatedTarget:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n){i.call(this,t,e,n)}var i=n(22),o={data:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n){i.call(this,t,e,n)}var i=n(36),o=n(68),a=n(210),s=n(69),u={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(t){return"keypress"===t.type?o(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?o(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};i.augmentClass(r,u),t.exports=r},function(t,e,n){"use strict";function r(t,e,n){i.call(this,t,e,n)}var i=n(36),o=n(69),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};i.augmentClass(r,a),t.exports=r},function(t,e,n){"use strict";function r(t,e,n){i.call(this,t,e,n)}var i=n(44),o={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t){for(var e=1,n=0,r=0;r<t.length;r++)e=(e+t.charCodeAt(r))%i,n=(n+e)%i;return e|n<<16}var i=65521;t.exports=r},function(t,e,n){function r(t){return t.replace(i,function(t,e){return e.toUpperCase()})}var i=/-(.)/g;t.exports=r},function(t,e,n){"use strict";function r(t){return i(t.replace(o,"ms-"))}var i=n(203),o=/^-ms-/;t.exports=r},function(t,e,n){function r(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function i(t){return r(t)?Array.isArray(t)?t.slice():o(t):[t]}var o=n(225);t.exports=i},function(t,e,n){(function(e){"use strict";function r(t){var n=o.createFactory(t),r=i.createClass({tagName:t.toUpperCase(),displayName:"ReactFullPageComponent"+t,componentWillUnmount:function(){"production"!==e.env.NODE_ENV?a(!1,"%s tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this.constructor.displayName):a(!1)},render:function(){return n(this.props)}});return r}var i=n(11),o=n(4),a=n(2);t.exports=r}).call(e,n(1))},function(t,e,n){(function(e){function r(t){var e=t.match(l);return e&&e[1].toLowerCase()}function i(t,n){var i=c;"production"!==e.env.NODE_ENV?u(!!c,"createNodesFromMarkup dummy not initialized"):u(!!c);var o=r(t),l=o&&s(o);if(l){i.innerHTML=l[1]+t+l[2];for(var f=l[0];f--;)i=i.lastChild}else i.innerHTML=t;var h=i.getElementsByTagName("script");h.length&&("production"!==e.env.NODE_ENV?u(n,"createNodesFromMarkup(...): Unexpected <script> element rendered."):u(n),a(h).forEach(n));for(var p=a(i.childNodes);i.lastChild;)i.removeChild(i.lastChild);return p}var o=n(9),a=n(205),s=n(104),u=n(2),c=o.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;t.exports=i}).call(e,n(1))},function(t,e,n){"use strict";function r(t,e){var n=null==e||"boolean"==typeof e||""===e;if(n)return"";var r=isNaN(e);return r||0===e||o.hasOwnProperty(t)&&o[t]?""+e:("string"==typeof e&&(e=e.trim()),e+"px")}var i=n(86),o=i.isUnitlessNumber;t.exports=r},function(t,e,n){(function(e){"use strict";function r(t,n,r){var i=t,o=!i.hasOwnProperty(r);"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?a(o,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",r):null),o&&null!=n&&(i[r]=n)}function i(t){if(null==t)return t;var e={};return o(t,r,e),e}var o=n(108),a=n(5);t.exports=i}).call(e,n(1))},function(t,e,n){"use strict";function r(t){if(t.key){var e=o[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var n=i(t);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===t.type||"keyup"===t.type?a[t.keyCode]||"Unidentified":""}var i=n(68),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=r},function(t,e,n){"use strict";function r(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function i(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function o(t,e){for(var n=r(t),o=0,a=0;n;){if(3===n.nodeType){if(a=o+n.textContent.length,e>=o&&a>=e)return{node:n,offset:e-o};o=a}n=r(i(n))}}t.exports=o},function(t,e,n){"use strict";function r(t){return t?t.nodeType===i?t.documentElement:t.firstChild:null}var i=9;t.exports=r},function(t,e,n){"use strict";function r(t){return t===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}t.exports=r},function(t,e,n){function r(t){return t.replace(i,"-$1").toLowerCase()}var i=/([A-Z])/g;t.exports=r},function(t,e,n){"use strict";function r(t){return i(t).replace(o,"-ms-")}var i=n(214),o=/^ms-/;t.exports=r},function(t,e,n){function r(t){return i(t)&&3==t.nodeType}var i=n(106);t.exports=r},function(t,e,n){"use strict";function r(t,e,n){if(!t)return null;var r={};for(var o in t)i.call(t,o)&&(r[o]=e.call(n,t[o],o,t));return r}var i=Object.prototype.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}t.exports=r},function(t,e,n){(function(e){"use strict";function r(t){return"production"!==e.env.NODE_ENV?o(i.isValidElement(t),"onlyChild must be passed a children with exactly one child."):o(i.isValidElement(t)),t}var i=n(4),o=n(2);t.exports=r}).call(e,n(1))},function(t,e,n){"use strict";var r,i=n(9);i.canUseDOM&&(r=window.performance||window.msPerformance||window.webkitPerformance),t.exports=r||{}},function(t,e,n){var r=n(220);r&&r.now||(r=Date);var i=r.now.bind(r);t.exports=i},function(t,e,n){"use strict";function r(t){return'"'+i(t)+'"'}var i=n(47);t.exports=r},function(t,e,n){"use strict";var r=n(9),i=n(47),o=n(73),a=function(t,e){t.textContent=e};r.canUseDOM&&("textContent"in document.documentElement||(a=function(t,e){o(t,i(e))})),t.exports=a},function(t,e,n){"use strict";function r(t,e){if(t===e)return!0;var n;for(n in t)if(t.hasOwnProperty(n)&&(!e.hasOwnProperty(n)||t[n]!==e[n]))return!1;for(n in e)if(e.hasOwnProperty(n)&&!t.hasOwnProperty(n))return!1;return!0}t.exports=r},function(t,e,n){(function(e){function r(t){var n=t.length;if("production"!==e.env.NODE_ENV?i(!Array.isArray(t)&&("object"==typeof t||"function"==typeof t),"toArray: Array-like object expected"):i(!Array.isArray(t)&&("object"==typeof t||"function"==typeof t)),"production"!==e.env.NODE_ENV?i("number"==typeof n,"toArray: Object needs a length property"):i("number"==typeof n),"production"!==e.env.NODE_ENV?i(0===n||n-1 in t,"toArray: Object should have keys for indices"):i(0===n||n-1 in t),t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(r){}for(var o=Array(n),a=0;n>a;a++)o[a]=t[a];return o}var i=n(2);t.exports=r}).call(e,n(1))},function(t,e,n){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){"use strict";function r(t,e,n){return 1-(n-t)/(e-t)}function i(t){return t.position}var o=function(t){return t&&t.__esModule?t["default"]:t},a=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var u=o(n(12)),c=e.NoteArea=function(){function t(e,n){s(this,t),this._notes=u.sortBy(e,i),this._barLines=u(n).pluck("position").sortBy().value()}return a(t,{getVisibleNotes:{value:function(t,e,n){var i=[],o=this._notes;n||(n=0);for(var a=0;a<o.length;a++){var s=o[a],u=s.end?!(s.position>e||s.end.position<t-n):!(s.position>e||s.position<t-n);if(u){var c={note:s};if(s.end){var l=r(t,e,s.position),f=r(t,e,s.end.position);c.y=Math.min(l,f),c.height=Math.abs(l-f)}else c.y=r(t,e,s.position);i.push(c)}}return i}},getVisibleBarLines:{value:function(t,e,n){return n||(n=0),this._barLines.filter(function(r){return r>=t-n&&e>=r}).map(function(n){return{id:n,y:r(t,e,n)}})}}}),t}();e["default"]=c},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var a=r(n(228)),s=n(53),u=s.MISSED,c=s.breaksCombo,l=e.PlayerDisplay=function(){function t(e){o(this,t);var n=e.notechart;this._currentSpeed=1,this._player=e,this._noteArea=new a(n.notes,n.barLines),this._stateful={},this._defaultData={placement:e.options.placement,scratch:e.options.scratch}}return i(t,{update:{value:function(t,e,n){function r(){b.beat=g}function i(t){return n.stats.counts&&n.stats.counts[t]}function o(){return(100*(n.stats.currentAccuracy||0)).toFixed(2)+"%"}function a(){var t=m.getVisibleNotes(y,p(),1),e=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s=o.value,c=s.note,l=c.column;if(s.height){var f=n.getNoteJudgment(c),h=n.getNoteStatus(c);_("longnote_"+l,{key:c.id,y:s.y,height:s.height,active:0!==f&&f!==u,missed:"judged"===h&&f===u})}else"judged"!==n.getNoteStatus(c)&&_("note_"+l,{key:c.id,y:s.y})}}catch(d){r=!0,i=d}finally{try{!e&&a["return"]&&a["return"]()}finally{if(r)throw i}}}function s(){var t=m.getVisibleBarLines(y,p(),1),e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;_("barlines",{key:a.id,y:a.y})}}catch(s){n=!0,r=s}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}}function l(){var e=n.input,r=!0,i=!1,o=void 0;try{for(var a,s=d.columns[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,c=e.get(u);b[""+u+"_active"]=0!==c.value?1:0,c.changed&&(0!==c.value?v[""+u+"_down"]=t:v[""+u+"_up"]=t)}}catch(l){i=!0,o=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}}function f(){var e=n.notifications.judgments,r=e[e.length-1];if(r){var i=-1===r.judgment?"missed":""+r.judgment;v["judge_"+i]=t,v.combo=r.combo}b.score=n.stats.score}function h(){for(var e=n.notifications.judgments,r=0;r<e.length;r++){var i=e[r];c(i.judgment)||(v[""+i.column+"_explode"]=t)}}function p(){return y+5/w}var d=this._player,m=this._noteArea,v=this._stateful,g=d.notechart.secondsToBeat(e),y=d.notechart.beatToPosition(g),b=Object.assign({},this._defaultData),_=function(t,e){return(b[t]||(b[t]=[])).push(e)};this._currentSpeed+=(n.speed-this._currentSpeed)/3;var w=this._currentSpeed;return r(),a(),s(),l(),f(),h(),b.speed=n.speed.toFixed(1)+"x",b.stat_1=i(1),b.stat_2=i(2),b.stat_3=i(3),b.stat_4=i(4),b.stat_missed=i(u),b.stat_acc=o(),b.bpm=Math.round(d.notechart.bpmAtBeat(g)),Object.assign(b,v),b}}}),t}();e["default"]=l},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var a=r(n(121)),s=r(n(12)),u=r(n(125)),c=r(n(240)),l=e.Notechart=function(){function t(e){var n=this,r=(void 0===arguments[1]?1:arguments[1],void 0===arguments[2]?{}:arguments[2]);o(this,t);var i=a.Notes.fromBMSChart(e).all(),s=a.Timing.fromBMSChart(e),u=a.Keysounds.fromBMSChart(e),c=a.SongInfo.fromBMSChart(e);this._preTransform(i,r),this._timing=s,this._keysounds=u,this._duration=0,this._notes=this._generatePlayableNotesFromBMS(i),this._autos=this._generateAutoKeysoundEventsFromBMS(i),this._barLines=this._generateBarLines(i,e),this._samples=this._generateKeysoundFiles(u),this._infos=new Map(this._notes.map(function(t){return[t,n._getNoteInfo(t)]})),this._songInfo=c}return i(t,{notes:{get:function(){return this._notes}},autos:{get:function(){return this._autos}},samples:{get:function(){return this._samples}},keysounds:{get:function(){return this._keysounds.all()}},barLines:{get:function(){return this._barLines}},columns:{get:function(){return["SC","1","2","3","4","5","6","7"]}},duration:{get:function(){return this._duration}},songInfo:{get:function(){return this._songInfo}},info:{value:function(t){return this._infos.get(t)}},beatToSeconds:{value:function(t){return this._timing.beatToSeconds(t)}},beatToPosition:{value:function(t){return t}},secondsToBeat:{value:function(t){return this._timing.secondsToBeat(t)}},secondsToPosition:{value:function(t){return this.beatToPosition(this.secondsToBeat(t))}},bpmAtBeat:{value:function(t){return this._timing.bpmAtBeat(t)}},_preTransform:{value:function(t,e){if("off"===e.scratch){var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.column&&"SC"===s.column.column&&(s.column=null)}}catch(u){r=!0,i=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}}}},_generatePlayableNotesFromBMS:{value:function(t){var e=this,n=1;return t.filter(function(t){return t.column}).map(function(t){var r=e._generateEvent(t.beat);return r.id=n++,r.column=t.column.column,r.keysound=t.keysound,e._updateDuration(r),void 0!==t.endBeat?(r.end=e._generateEvent(t.endBeat),e._updateDuration(r.end)):r.end=void 0,new c(r)})}},_updateDuration:{value:function(t){t.time>this._duration&&(this._duration=t.time)}},_generateAutoKeysoundEventsFromBMS:{value:function(t){var e=this;return t.filter(function(t){return!t.column}).map(function(t){var n=e._generateEvent(t.beat);return n.keysound=t.keysound,new u(n)})}},_generateBarLines:{value:function(t,e){var n=s.max(t.map(function(t){return t.endBeat||t.beat})),r=[{beat:0,position:0}],i=0,o=0,a=0;do i+=e.timeSignatures.getBeats(o),o+=1,a=this.beatToPosition(i),r.push({beat:i,position:a});while(n>=i);return r}},_generateKeysoundFiles:{value:function(t){var e=new Set,n=!0,r=!1,i=void 0;try{for(var o,a=[this.notes,this.autos][Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=!0,c=!1,l=void 0;try{for(var f,h=s[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value,d=t.get(p.keysound);d&&e.add(d)}}catch(m){c=!0,l=m}finally{try{!u&&h["return"]&&h["return"]()}finally{if(c)throw l}}}}catch(m){r=!0,i=m}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}return Array.from(e)}},_generateEvent:{value:function(t){return{beat:t,time:this.beatToSeconds(t),position:this.beatToPosition(t)}}},_getNoteInfo:{value:function(t){var e=t.end?2:1;return{combos:e}}}},{fromBMSChart:{value:function(e,n,r){return new t(e,n,r)}}}),t}();e["default"]=l},function(t,e,n){"use strict";function r(t){return function(e){var n=0;return Object.defineProperties({notes:e,update:function(){for(;n<e.length&&"judged"===t.getNoteStatus(e[n]);)n+=1}},{startIndex:{get:function(){return n},configurable:!0,enumerable:!0}})}}var i=function(t){return t&&t.__esModule?t["default"]:t},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var s=i(n(12)),u=n(53),c=u.judgeTime,l=u.judgeEndTime,f=u.isBad,h=u.MISSED,p=i(n(232)),d=e.PlayerState=function(){function t(e){a(this,t),this._player=e,this._columns=e.columns,this._noteBufferByColumn=s(e.notechart.notes).sortBy("time").groupBy("column").mapValues(r(this)).value(),this._noteResult=new Map,this._duration=e.notechart.duration,this.stats=new p(e.notechart),this.notifications={},this.speed=e.options.speed,this.finished=!1}return o(t,{player:{get:function(){return this._player}},update:{value:function(t,e){this._gameTime=t,this._rawInput=e,this.notifications={},this.notifications.sounds=[],this.notifications.judgments=[],this._updateInputColumnMap(),this._judgeNotes(),this._updateSpeed(),t>this._duration+1&&(this.finished=!0)}},getNoteStatus:{value:function(t){var e=this._noteResult.get(t);return e?e.status:"unjudged"}},getNoteJudgment:{value:function(t){var e=this._noteResult.get(t);return e?e.judgment:0}},getPlayerInput:{value:function(t){return this._rawInput.get("p"+this._player.number+"_"+t)}},_updateInputColumnMap:{value:function(){var t=this;this.input=new Map(this._columns.map(function(e){return[e,t.getPlayerInput(e)]}))}},_judgeNotes:{value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._columns[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value,a=this._noteBufferByColumn[o];if(a){var s=this.input.get(o);this._judgeColumn(a,s),a.update()}}}catch(u){e=!0,n=u}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}}},_updateSpeed:{value:function(){this.getPlayerInput("speedup").justPressed&&this._modifySpeed(1),this.getPlayerInput("speeddown").justPressed&&this._modifySpeed(-1);var t=this.getPlayerInput("pinch").value;if(t&&!this._pinching?this._pinching={start:t,speed:this.speed}:t||(this._pinching=null),t){var e=this._pinching,n=e.speed*t/e.start;this.speed=Math.max(.2,Math.round(10*n)/10)}}},_modifySpeed:{value:function(t){var e=this._rawInput.get("select").value?.1:this.speed<.5?.3:.5;this.speed+=t*e,this.speed<.2&&(this.speed=.2)}},_judgeColumn:{value:function(t,e){for(var n=void 0,r=void 0,i=t.notes,o=t.startIndex;o<i.length;o++){var a=i[o];if(this._shouldJudge(a,e,t)){var s="active"!==this.getNoteStatus(a);if(n=a,r=this._judge(a),s)break}}if(e.justPressed)if(n)this.notifications.sounds.push({note:n,type:"hit",judgment:r});else{var u=this._getFreestyleNote(i);u&&this.notifications.sounds.push({note:u,type:"free"})}}},_getClosestNote:{value:function(t){var e=this;return s.min(t,function(t){return Math.abs(e._gameTime-t.time)})}},_getFreestyleNote:{value:function(t){var e=this;return s.min(t,function(t){var n=Math.abs(e._gameTime-t.time),r=e._gameTime<t.time-1?1e6:0;return n+r})}},_shouldJudge:{value:function(t,e,n){var r=this.getNoteStatus(t);if("unjudged"===r){var i=c(this._gameTime,t.time),o=i===h,a=i>0&&e.changed&&e.value;return f(i)&&this._getClosestNote(n.notes)!==t&&(a=!1),o||a}if("active"===r){var i=l(this._gameTime,t.end.time),o=i===h,s=e.changed;return o||s}return!1}},_judge:{value:function(t){var e=this._gameTime-t.time,n=c(this._gameTime,t.time),r=this._noteResult.get(t);if(t.end)if(r&&"unjudged"!==r.status){if("active"===r.status){var i="SC"===t.column;e=this._gameTime-t.end.time,n=l(this._gameTime,t.end.time)||h,i&&e>0&&(n=1),r={status:"judged",judgment:n,delta:e}}}else{var o=n===h?"judged":"active";r={status:o,judgment:n,delta:e}}else r={status:"judged",judgment:n,delta:e};return n===h&&this.notifications.sounds.push({note:t,type:"break"}),this._noteResult.set(t,r),this._setJudgment(n,e,t.column),n}},_setJudgment:{value:function(t,e,n){this.stats.handleJudgment(t);var r={judgment:t,combo:this.stats.combo,delta:e,column:n};this.notifications.judgments.push(r)}}}),t}();e["default"]=d},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}},i=function(t){return t&&t.__esModule?t["default"]:t},o=function(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0})},a=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var u=i(n(12)),c=r(n(53)),l=e.PlayerStats=function(){function t(e){s(this,t),this.totalCombo=u(e.notes).map(function(t){return e.info(t).combos}).sum(),this.combo=0,this.maxCombo=0,this.rawSumJudgmentWeight=0,this.rawTotalComboScore=this._calculateRawTotalComboScore(),this.rawSumComboScore=0,this.counts=function(){var t={};return o(t,c.MISSED,0),o(t,"1",0),o(t,"2",0),o(t,"3",0),o(t,"4",0),t}(),this.numJudgments=0,this.poor=!1}return a(t,{score:{get:function(){var t=Math.floor(5e5*this.accuracy),e=Math.floor(55555*this.rawSumComboScore/this.rawTotalComboScore);return t+e}},accuracy:{get:function(){return this.rawSumJudgmentWeight/(c.weight(1)*this.totalCombo)}},currentAccuracy:{get:function(){return this.rawSumJudgmentWeight/(c.weight(1)*this.numJudgments||1)}},handleJudgment:{value:function(t){c.breaksCombo(t)?(this.combo=0,this.poor=!0):(this.combo+=1,this.rawSumComboScore+=this._calculateRawComboScore(this.combo),this.poor=!1),this.rawSumJudgmentWeight+=c.weight(t),this.combo>this.maxCombo&&(this.maxCombo=this.combo),this.counts[t]+=1,this.numJudgments+=1}},_calculateRawTotalComboScore:{value:function(){for(var t=0,e=1;e<=this.totalCombo;e++)t+=this._calculateRawComboScore(e);return t}},_calculateRawComboScore:{value:function(t){return 0===t?0:23>t?1:51>t?2:92>t?3:161>t?4:5}}}),t}();e["default"]=l},function(t,e,n){"use strict";function r(t){var e=t.match(/^(\d+)x(\d+)\+(\d+)\+(\d+)$/);return e?new o.Rectangle(+e[3],+e[4],+e[1],+e[2]):null}var i=function(t){return t&&t.__esModule?t["default"]:t};e.parseFrame=r,Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(23))},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};n(381);var i=r(n(6)),o=r(n(39));t.exports=i.createClass({displayName:"scene-heading",render:function(){return i.createElement("div",{className:o("scene-heading",this.props.className)},this.props.children)}})},function(t,e,n){t.exports=n.p+"7d6d69a86d70e4e52079c5ce873435c6.jpg"},function(t,e,n){var r=n(362);t.exports=function(t,e,n,i){if("number"==typeof t&&"number"==typeof e)return r(t,e,n);var o=Math.min(t.length,e.length);i=i||new Array(o);for(var a=0;o>a;a++)i[a]=r(t[a],e[a],n);return i}},function(t,e,n){"use strict";e.getName=function(t){var e=t.displayName||t.name;if(!e){var n=t.toString().match(/function ([^\s\(]+)/);e=n&&n[1]}return e},e.toString=function(){if(this.getCall&&this.callCount)for(var t,e,n=this.callCount;n--;){t=this.getCall(n).thisValue;for(e in t)if(t[e]===this)return e}return this.displayName||"sinon fake"},e.create=function(t){var e=function(){};return e.prototype=t,new e}},function(t,e,n){"use strict";function r(){var t={},e=!0,n=!1,r=void 0;try{for(var i,o=l()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;t[a]=f(a)}}catch(s){n=!0,r=s}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}return t}var i=function(t){return t&&t.__esModule?t:{"default":t}},o=function(t){return t&&t.__esModule?t["default"]:t},a=o(n(78)),s=n(30).Store,u=i(n(130)),c=n(395),l=c.keys,f=c.get,h=c.set,p=a.update(r(),u.reload.bus,function(){return r()},u.setOptions.bus,function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;h(s,e[s])}}catch(u){r=!0,i=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}return Object.assign({},t,e)}),d=p.map(function(t){return t["player.P1.mode"]}),m=p.map(function(t){return"KB"===t["player.P1.mode"]?"off":t["player.P1.scratch"]});t.exports=new s({options:p,mode:d,scratch:m})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};n(250);var i=r(n(6));t.exports=i.createClass({displayName:"benchmark-panel",render:function(){return i.createElement("div",{className:"benchmark-panel",onClick:this.handleInteraction,onTouchStart:this.handleInteraction},this.state.show?i.createElement("article",null,i.createElement("b",null,"Benchmark Stats"),i.createElement("br",null),this.renderTable()):"Show Benchmark Stats")},componentDidMount:function(){var t=this;setInterval(function(){return t.forceUpdate()},1e3)},renderTable:function(){var t=this.props.bench.stats;return i.createElement("table",null,i.createElement("tbody",null,Object.keys(t).map(function(e){var n=t[e];return i.createElement("tr",null,i.createElement("td",null,i.createElement("strong",null,e)),i.createElement("td",{align:"right"},""+n))})))},getInitialState:function(){return{show:!1,text:"wow"}},handleInteraction:function(t){t.preventDefault(),t.stopPropagation(),this.setState({show:!this.state.show})}})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(52)),o=r(n(125)),a=new i(o,{id:Number,end:i.maybe(o),column:String});e.GameNote=a,e["default"]=a},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var n,r=[],i=t[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!e||r.length!==e););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(229)),u=e.GameDisplay=function(){function t(e){var n=e.game,r=(e.skin,e.context);a(this,t),this._game=n,this._context=r,this._players=new Map(n.players.map(function(t){return[t,new s(t)]})),this._stateful={}}return o(t,{start:{value:function(){this._started=(new Date).getTime();var t=this._game.players[0],e=t.notechart.songInfo;this._stateful.song_title=e.title,this._stateful.song_artist=e.artist,this._duration=t.notechart.duration}},destroy:{value:function(){this._context.destroy()}},update:{value:function(t,e){var n=((new Date).getTime()-this._started)/1e3,r=this._getData(n,t,e);this._updateStatefulData(n,t,e),this._context.render(Object.assign({},this._stateful,r))}},_getData:{value:function(t,e,n){var r={};r.tutorial=this._game.options.tutorial?"yes":"no",r.t=t,r.gameTime=e,r.ready=this._getReady(n),r.song_time=this._getSongTime(e);var o=!0,a=!1,s=void 0;try{for(var u,c=this._players[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=i(u.value,2),f=l[0],h=l[1],p=n.player(f),d=h.update(t,e,p);for(var m in d)r["p"+f.number+"_"+m]=d[m]}}catch(v){a=!0,s=v}finally{try{!o&&c["return"]&&c["return"]()}finally{if(a)throw s}}return r}},_updateStatefulData:{value:function(t,e,n){var r=this._stateful;void 0===r.started&&n.started&&(r.started=t),void 0===r.gettingStarted&&n.gettingStarted&&(r.gettingStarted=t)}},_getSongTime:{value:function(t){return this._formatTime(Math.min(this._duration,Math.max(0,t)))+" / "+this._formatTime(this._duration)}},_getReady:{value:function(t){var e=t.readyFraction;return e>.5?Math.pow(1-(e-.5)/.5,2):0}},context:{get:function(){return this._context}},view:{get:function(){return this._context.view}},_formatTime:{value:function(t){var e=Math.floor(t%60);return Math.floor(t/60)+":"+(10>e?"0":"")+e}}}),t}();e["default"]=u},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var a=r(n(230)),s=r(n(136)),u=e.Game=function(){
function t(e,n){o(this,t),this.options=n,this.players=n.players.map(function(t,r){t=Object.assign({},t,{autosound:n.audioInputLatency>=.01});var i=a.fromBMSChart(e,r+1,t);return new s(i,r+1,t)})}return i(t,{samples:{get:function(){var t=new Set,e=!0,n=!1,r=void 0;try{for(var i,o=this.players[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,s=!0,u=!1,c=void 0;try{for(var l,f=a.notechart.samples[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;t.add(h)}}catch(p){u=!0,c=p}finally{try{!s&&f["return"]&&f["return"]()}finally{if(u)throw c}}}}catch(p){n=!0,r=p}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}return Array.from(t)}}}),t}();e["default"]=u},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var o=e.Control=function(){function t(){i(this,t),this.value=0,this.changed=!1}return r(t,{justPressed:{get:function(){return this.changed&&this.value}}}),t}();e["default"]=o},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var n,r=[],i=t[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!e||r.length!==e););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(231)),u=e.GameState=function(){function t(e){a(this,t),this._game=e,this._players=new Map(e.players.map(function(t){return[t,new s(t)]}))}return o(t,{game:{get:function(){return this._game}},update:{value:function(t,e,n){var r=!0,o=!0,a=!1,s=void 0;try{for(var u,c=this._players[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=i(u.value,2),f=(l[0],l[1]);f.update(t,e),f.finished||(r=!1)}}catch(h){a=!0,s=h}finally{try{!o&&c["return"]&&c["return"]()}finally{if(a)throw s}}this.readyFraction=n.readyFraction,this.gettingStarted=n.gettingStarted,this.started=n.started,this.finished=r}},player:{value:function(t){return this._players.get(t)}}}),t}();e["default"]=u},,function(t,e,n){function r(t){this._map=t}var i=n(12);r.prototype.get=function(t){return this._map[t.toLowerCase()]},r.prototype.files=function(){return i.uniq(i.values(this._map))},r.prototype.all=function(){return this._map},r.fromBMSChart=function(t){var e={};return t.headers.each(function(t,n){var r=t.match(/^wav(\S\S)$/i);r&&(e[r[1].toLowerCase()]=n)}),new r(e)},t.exports=r},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".benchmark-panel{background:#449;border:2px solid #66e;padding:4px}.benchmark-panel table{font-size:10px}",""])},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,'.scene{top:0;bottom:0;overflow:hidden;font-family:"Source Sans Pro","Segoe UI","Helvetica Neue",sans-serif}.scene,.scene>.scene-heading{position:absolute;right:0;left:0}.scene>.scene-heading{top:5vmin}.scene>.scene-toolbar{position:absolute;right:0;bottom:0;left:0}',""])},function(t,e,n){"use strict";var r=function(){var t={constructor:function(){return"0"},toString:function(){return"1"},valueOf:function(){return"2"},toLocaleString:function(){return"3"},prototype:function(){return"4"},isPrototypeOf:function(){return"5"},propertyIsEnumerable:function(){return"6"},hasOwnProperty:function(){return"7"},length:function(){return"8"},unique:function(){return"9"}},e=[];for(var n in t)e.push(t[n]());return"0123456789"!==e.join("")}();t.exports=function(t){var e,n,i,o=Array.prototype.slice.call(arguments,1);for(n=0;n<o.length;n++){e=o[n];for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);r&&e.hasOwnProperty("toString")&&e.toString!==t.toString&&(t.toString=e.toString)}return t}},function(t,e,n){var r=n(247);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){var r=n(248);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){(function(e){function r(t,e,n){function r(){try{a.send(""+(new Date).getTime())}catch(t){}}function o(t){var e=t.split(","),r=+e[0],o=+e[1],a=(new Date).getTime();a>=r&&s.push(i.convert([r,o,o,a])),s.length>=8&&n&&n(i.offset(s))}var a=new WebSocket(t),s=[];a.onmessage=function(t){"k"==t.data&&r(),t.data.indexOf(",")>=0&&(o(t.data),r())},a.onclose=function(){return s.length<1?e(new Error("no offset received")):e(null,i.offset(s))}}var i=n(253);t.exports=r}).call(e,n(1))},function(t,e,n){e.convert=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return{offset:(n-e+(r-i))/2,delay:i-e-(r-n)}},e.offset=function(t){t=t.slice(),t.sort(function(t,e){return t.offset-e.offset}),t=t.slice(1,t.length-1),t.sort(function(t,e){return t.delay-e.delay});for(var e=0,n=0,r=Math.ceil(t.length/8),i=0;i<t.length&&(t[i].delay>t[0].delay&&r--,0!==r);i++)e+=t[i].offset,n+=1;return e/n}},function(t,e,n){"use strict";function r(t,e,n,r,i){var o=t.context;c.defineAttribute(this,"name","readonly",e,function(t){throw new TypeError(c.formatter.concat(this,t))}),c.defineAttribute(this,"defaultValue","readonly",n,function(t){throw new TypeError(c.formatter.concat(this,t))}),c.defineAttribute(this,"minValue","readonly",r,function(t){throw new TypeError(c.formatter.concat(this,t))}),c.defineAttribute(this,"maxValue","readonly",i,function(t){throw new TypeError(c.formatter.concat(this,t))}),Object.defineProperty(this,"value",{get:function(){return this._value=this.$valueAtTime(o.currentTime),this._value},set:function(t){if(!c.typeCheck(t,"number")){var e="";throw e+="type ",e+=c.formatter.shouldBeButGot("number",t),new TypeError(c.formatter.concat(this,e))}this._value=t},enumerable:!0}),Object.defineProperties(this,{$name:{value:"AudioParam"},$context:{value:o},$node:{value:t},$inputs:{value:[]},$events:{value:[]}}),this._value=this.defaultValue,this._tick=-1}function i(t,e){var n,r=e.time,i=t.$events,o=0,a=i.length;for(n=0;a>n;++n){if(i[n].time===r&&i[n].type===e.type){o=1;break}if(i[n].time>r)break}i.splice(n,o,e)}function o(t,e,n,r,i,o){var a=(r-i)/(o-i);return(1-a)*e+a*n}function a(t,e,n,r,i,o){var a=(r-i)/(o-i);return e>0&&n>0?e*Math.pow(n/e,a):t}function s(t,e,n,r,i){return e+(t-e)*Math.exp((r-n)/i)}function u(t,e,n,r,i){var o=(e-n)/(r-n);return 0>=o?c.defaults(i[0],t):o>=1?c.defaults(i[i.length-1],t):c.defaults(i[i.length*o|0],t)}var c=n(29),l=n(122),f=n(28),h=function(){throw new TypeError("Illegal constructor")};c.inherits(r,h),r.exports=h,h.prototype.setValueAtTime=function(t,e){var n=new l(this,"setValueTime",[{name:"value",type:"number"},{name:"startTime",type:"number"}]);n.validateArguments(arguments,function(t){throw new TypeError(n.form+"; "+t)}),i(this,{type:"SetValue",value:t,time:e})},h.prototype.linearRampToValueAtTime=function(t,e){var n=new l(this,"linearRampToValueAtTime",[{name:"value",type:"number"},{name:"endTime",type:"number"}]);n.validateArguments(arguments,function(t){throw new TypeError(n.form+"; "+t)}),i(this,{type:"LinearRampToValue",value:t,time:e})},h.prototype.exponentialRampToValueAtTime=function(t,e){var n=new l(this,"exponentialRampToValueAtTime",[{name:"value",type:"number"},{name:"endTime",type:"number"}]);n.validateArguments(arguments,function(t){throw new TypeError(n.form+"; "+t)}),i(this,{type:"ExponentialRampToValue",value:t,time:e})},h.prototype.setTargetAtTime=function(t,e,n){var r=new l(this,"setTargetAtTime",[{name:"target",type:"number"},{name:"startTime",type:"number"},{name:"timeConstant",type:"number"}]);r.validateArguments(arguments,function(t){throw new TypeError(r.form+"; "+t)}),i(this,{type:"SetTarget",value:t,time:e,timeConstant:n})},h.prototype.setValueCurveAtTime=function(t,e,n){var r=new l(this,"setValueCurveAtTime",[{name:"values",type:"Float32Array"},{name:"startTime",type:"number"},{name:"duration",type:"number"}]);r.validateArguments(arguments,function(t){throw new TypeError(r.form+"; "+t)}),i(this,{type:"SetValueCurve",time:e,duration:n,curve:t})},h.prototype.cancelScheduledValues=function(t){var e=new l(this,"cancelScheduledValues",[{name:"startTime",type:"number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)});for(var n=this.$events,r=0,i=n.length;i>r;++r)if(n[r].time>=t)return n.splice(r)},r.prototype.toJSON=function(t){return c.toJSON(this,function(t,e){var n={};return n.value=t.value,n.inputs=t.$inputs.map(function(t){return t.toJSON(e)}),n},t)},r.prototype.$valueAtTime=function(t){t=c.toSeconds(t);for(var e,n=this._value,r=this.$events,i=0;i<r.length;i++){var l=r[i],f=r[i+1];if(t<l.time)break;if(e=Math.min(t,f?f.time:t),f&&"LinearRampToValue"===f.type)n=o(n,l.value,f.value,e,l.time,f.time);else if(f&&"ExponentialRampToValue"===f.type)n=a(n,l.value,f.value,e,l.time,f.time);else switch(l.type){case"SetValue":case"LinearRampToValue":case"ExponentialRampToValue":n=l.value;break;case"SetTarget":n=s(n,l.value,e,l.time,l.timeConstant);break;case"SetValueCurve":n=u(n,e,l.time,l.time+l.duration,l.curve)}}return n},r.prototype.$process=function(t,e){this._tick!==e&&(this._tick=e,this.$inputs.forEach(function(n){n.$process(t,e)}))},t.exports=f.AudioParam=r},function(t,e,n){(function(e){t.exports=e}).call(e,{})},function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a||e===f?62:e===s||e===h?63:u>e?-1:u+10>e?e-u+26+26:l+26>e?e-l:c+26>e?e-c+26:void 0}function n(t){function n(t){c[f++]=t}var r,i,a,s,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=t.length;u="="===t.charAt(l-2)?2:"="===t.charAt(l-1)?1:0,c=new o(3*t.length/4-u),a=u>0?t.length-4:t.length;var f=0;for(r=0,i=0;a>r;r+=4,i+=3)s=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===u?(s=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&s)):1===u&&(s=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(s>>8&255),n(255&s)),c}function i(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,a,s=t.length%3,u="";for(i=0,a=t.length-s;a>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=n(o);switch(s){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),f="-".charCodeAt(0),h="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=i}(e)},function(t,e,n){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?0/0:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,m=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*m}},function(t,e,n){var r=Array.isArray,i=Object.prototype.toString;t.exports=r||function(t){return!!t&&"[object Array]"==i.call(t)}},function(t,e,n){var r;(function(t,i){!function(o){function a(t){throw RangeError(R[t])}function s(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function u(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(M,".");var i=t.split("."),o=s(i,e).join(".");return r+o}function c(t){for(var e,n,r=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function l(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=I(t>>>10&1023|55296),t=56320|1023&t),e+=I(t)}).join("")}function f(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:w}function h(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function p(t,e,n){var r=0;for(t=n?P(t/C):t>>1,t+=P(t/e);t>N*E>>1;r+=w)t=P(t/N);return P(r+(N+1)*t/(t+T))}function d(t){var e,n,r,i,o,s,u,c,h,d,m=[],v=t.length,g=0,y=A,b=S;for(n=t.lastIndexOf(k),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&a("not-basic"),m.push(t.charCodeAt(r));for(i=n>0?n+1:0;v>i;){for(o=g,s=1,u=w;i>=v&&a("invalid-input"),c=f(t.charCodeAt(i++)),(c>=w||c>P((_-g)/s))&&a("overflow"),g+=c*s,h=b>=u?x:u>=b+E?E:u-b,!(h>c);u+=w)d=w-h,s>P(_/d)&&a("overflow"),s*=d;e=m.length+1,b=p(g-o,e,0==o),P(g/e)>_-y&&a("overflow"),y+=P(g/e),g%=e,m.splice(g++,0,y)}return l(m)}function m(t){var e,n,r,i,o,s,u,l,f,d,m,v,g,y,b,T=[];for(t=c(t),v=t.length,e=A,n=0,o=S,s=0;v>s;++s)m=t[s],128>m&&T.push(I(m));for(r=i=T.length,i&&T.push(k);v>r;){for(u=_,s=0;v>s;++s)m=t[s],m>=e&&u>m&&(u=m);for(g=r+1,u-e>P((_-n)/g)&&a("overflow"),n+=(u-e)*g,e=u,s=0;v>s;++s)if(m=t[s],e>m&&++n>_&&a("overflow"),m==e){for(l=n,f=w;d=o>=f?x:f>=o+E?E:f-o,!(d>l);f+=w)b=l-d,y=w-d,T.push(I(h(d+b%y,0))),l=P(b/y);T.push(I(h(l,0))),o=p(n,g,r==i),n=0,++r}++n,++e}return T.join("")}function v(t){return u(t,function(t){return O.test(t)?d(t.slice(4).toLowerCase()):t})}function g(t){return u(t,function(t){return j.test(t)?"xn--"+m(t):t})}var y=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof i&&i);(y.global===y||y.window===y||y.self===y)&&(o=y);var b,_=2147483647,w=36,x=1,E=26,T=38,C=700,S=72,A=128,k="-",O=/^xn--/,j=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=w-x,P=Math.floor,I=String.fromCharCode;b={version:"1.3.2",ucs2:{decode:c,encode:l},decode:d,encode:m,toASCII:g,toUnicode:v},r=function(){return b}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(79)(t),function(){return this}())},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var u=t.length;s>0&&u>s&&(u=s);for(var c=0;u>c;++c){var l,f,h,p,d=t[c].replace(a,"%20"),m=d.indexOf(n);m>=0?(l=d.substr(0,m),f=d.substr(m+1)):(l=d,f=""),h=decodeURIComponent(l),p=decodeURIComponent(f),r(o,h)?Array.isArray(o[h])?o[h].push(p):o[h]=[o[h],p]:o[h]=p}return o}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,i){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(i){var o=encodeURIComponent(r(i))+n;return Array.isArray(t[i])?t[i].map(function(t){return o+encodeURIComponent(r(t))}).join(e):o+encodeURIComponent(r(t[i]))}).join(e):i?encodeURIComponent(r(i))+n+encodeURIComponent(r(t)):""}},function(t,e,n){"use strict";e.decode=e.parse=n(260),e.encode=e.stringify=n(261)},function(t,e,n){"use strict";function r(t){f.push({url:t})}var i=function(t){return t&&t.__esModule?t["default"]:t};e.loadCollection=r,Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(78)),a=n(30).Action,s=i(n(113)),u=new a;e.startLoading=u;var c=new a;e.finishLoading=c;var l=new a;e.errorLoading=l;var f=new o.Bus;f.flatMapLatest(function(t){var e=new o.Bus;return setTimeout(function(){e.push(function(){return u(t)}),Promise.resolve(s(t.url+"/index.json").as("text")).then(JSON.parse).then(function(t){e.push(function(){return c(t)})})["catch"](function(t){e.push(function(){return l(t)})})}),e}).onValue(function(t){return t()})},,function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};n(371);var i=r(n(6));t.exports=i.createClass({displayName:"music-chart-info",render:function(){var t=this.props.info;return i.createElement("section",{className:"music-chart-info"},i.createElement("div",{className:"music-chart-info--genre"},t.genre),i.createElement("div",{className:"music-chart-info--title"},t.title),t.subtitles.map(function(t){return i.createElement("div",{className:"music-chart-info--subtitle"},t)}),i.createElement("div",{className:"music-chart-info--artist"},t.artist,t.subartists.length?i.createElement("small",null,"  "+t.subartists.join("  ")):null))}})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};n(372);var i=r(n(6)),o=r(n(39)),a=r(n(273));t.exports=i.createClass({displayName:"music-chart-selector-item",render:function(){var t=o("music-chart-selector-item",{"is-active":this.props.isSelected,"is-tutorial":this.props.isTutorial,"is-insane":this.props.chart.info.difficulty>=5});return i.createElement("li",{className:t,onClick:this.handleClick},this.props.isTutorial?"Start Tutorial":i.createElement("span",{className:"music-chart-selector-item--level"},this.props.chart.info.level),i.createElement("span",{className:"music-chart-selector-item--play"},i.createElement(a,{name:"play"})))},handleClick:function(){this.props.onChartClick(this.props.chart)}})},function(t,e,n){"use strict";function r(t){t=s.sortBy(t,"time");var e=0;return{next:function(n){for(var r=[];e<t.length&&n>=t[e].time;e++)r.push(t[e]);return r}}}var i=function(t){return t&&t.__esModule?t["default"]:t},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var s=i(n(12)),u=i(n(268)),c=n(53).isBad,l=e.PlayerAudio=function(){function t(e){var n=e.player,i=e.samples,o=e.master,s=e.waveFactory;a(this,t);var c=n.notechart;this._waveFactory=s||new u(o,i,c.keysounds),this._autos=r(c.autos),this._notes=r(c.notes),this._played=new Map,this._autosound=!!n.options.autosound}return o(t,{update:{value:function(t,e){this._playAutokeysounds(t),this._playAutosounds(t,e),this._handleSoundNotifications(e&&e.notifications.sounds||[])}},_playAutokeysounds:{value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this._autos.next(t+1/30)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this._waveFactory.playAuto(a.keysound,a.time-t)}}catch(s){n=!0,r=s}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}}},_playAutosounds:{value:function(t,e){var n=this._notes.next(t+1/30),r=e&&e.stats.poor,i=this._autosound&&!r;if(i){var o=!0,a=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;this._hitNote(l,l.time-t)}}catch(f){a=!0,s=f}finally{try{!o&&c["return"]&&c["return"]()}finally{if(a)throw s}}}}},_handleSoundNotifications:{value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,s=a.type,u=a.note;"hit"===s?this._hitNote(u,0,a.judgment):"break"===s?this._breakNote(u):"free"===s&&this._waveFactory.playFree(u.keysound,0)}}catch(c){n=!0,r=c}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}}},_hitNote:{value:function(t,e,n){var r=this._played.get(t);r||(r=this._waveFactory.playNote(t.keysound,e),this._played.set(t,r)),r&&c(n)&&r.bad()}},_breakNote:{value:function(t){var e=this._played.get(t);e&&(console.log(e),e.stop())}}}),t}();e["default"]=l},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var o=e.WaveFactory=function(){function t(e,n,r){i(this,t),this._master=e,this._samples=n,this._map=r,this._exclusiveInstances=new Map}return r(t,{playAuto:{value:function(t,e){return this._play({keysound:t,delay:e,exclusive:!0})}},playNote:{value:function(t,e){return this._play({keysound:t,delay:e,exclusive:!0})}},playFree:{value:function(t){return this._play({keysound:t,delay:0,exclusive:!1})}},_play:{value:function(t){var e=t.keysound,n=t.delay,r=t.exclusive;r&&this._stopOldExclusiveSound(e,n);var i=this._map[e.toLowerCase()];if(!i)return null;var o=this._samples[i];if(!o)return null;var a=o.play(n);return r&&this._exclusiveInstances.set(e,a),a}},_stopOldExclusiveSound:{value:function(t,e){var n=this._exclusiveInstances.get(t);n&&(setTimeout(function(){return n.stop()},1e3*e),this._exclusiveInstances["delete"](t))}}}),t}();e["default"]=o},function(t,e,n){"use strict";function r(t){function e(){return t.input}function n(e,n){var r=t.refs[n];if(r){var i=!0,o=!1,a=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=c.getBounds(),f=!0,h=!1,p=void 0;try{for(var d,m=e[Symbol.iterator]();!(f=(d=m.next()).done);f=!0){var v=d.value;if(l.contains(v.x,v.y))return 1}}catch(g){h=!0,p=g}finally{try{!f&&m["return"]&&m["return"]()}finally{if(h)throw p}}}}catch(g){o=!0,a=g}finally{try{!i&&u["return"]&&u["return"]()}finally{if(o)throw a}}}return 0}function r(e){var n=t.refs.p1_SC;if(!n)return 0;u=null;var r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value,f=!0,h=!1,p=void 0;try{for(var d,m=n[Symbol.iterator]();!(f=(d=m.next()).done);f=!0){var v=d.value;if(v.getBounds().contains(l.x,l.y)){u=l.y;break}}}catch(g){h=!0,p=g}finally{try{!f&&m["return"]&&m["return"]()}finally{if(h)throw p}}if(null!==u)break}}catch(g){i=!0,o=g}finally{try{!r&&c["return"]&&c["return"]()}finally{if(i)throw o}}return null===u?(s=null,0):(null===s&&(s=u),u>s+16?s=u-16:s-16>u&&(s=u+16),u>s+4?-1:s-4>u?1:0)}function i(t){var e=null,n=null,r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(u.y<550)if(null===e)e=u.y;else{if(null!==n)return 0;n=u.y}}}catch(c){i=!0,o=c}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return null!==e&&null!==n?Math.abs(e-n):0}var s=null,u=null,c=o.wrap("input:touch:I",e),l=o.wrap("input:touch:SC",r),f=o.wrap("input:touch:B",n),h=o.wrap("input:touch:P",i);return{name:"TouchPlugin",get:function(){var t=c(),e={};o.enabled&&(o.stats["input:touch:n"]=""+t.length),e.p1_SC=l(t);var n=!0,r=!1,i=void 0;try{for(var s,u=a[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var p=s.value;e[p]=f(t,p)}}catch(d){r=!0,i=d}finally{try{!n&&u["return"]&&u["return"]()}finally{if(r)throw i}}return e.p1_pinch=h(t),e}}}var i=function(t){return t&&t.__esModule?t["default"]:t};e.TouchPlugin=r,Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(110)),a=["p1_1","p1_2","p1_3","p1_4","p1_5","p1_6","p1_7","start"];e["default"]=r},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}},i=function(t){return t&&t.__esModule?t["default"]:t},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var s=i(n(12)),u=r(n(76)),c=n(75).EXTRA_FORMATTER,l=n(83).canPlay,f=e.SamplesLoader=function(){function t(e,n){a(this,t),this._assets=e,this._master=n}return o(t,{loadFiles:{value:function(t,e,n){var r=this,i=u.fixed(t.length,e),o=u.fixed(t.length,n),a=function(t){return r._loadSample(t,i,o)};return n&&(n.formatter=c),Promise.map(t,a).then(function(t){return s(t).filter().object().value()})}},_loadSample:{value:function(t,e,n){var r=this;return this._getFile(t).then(function(i){return i.read().tap(function(){return e(t)}).then(function(t){return r._decode(t)}).tap(function(){return n(t)}).then(function(e){return[t,e]})["catch"](function(e){return console.error("Unable to decode: "+t,e),null})},function(e){return console.error("Unable to read: "+t,e),null})}},_decode:{value:function(t){return this._master.sample(t)}},_getFile:{value:function(t){var e=this;return Promise["try"](function(){if(!l('audio/ogg; codecs="vorbis"'))throw new Error("cannot play OGG");return e._assets.file(t.replace(/\.\w+$/,".ogg"))})["catch"](function(){return e._assets.file(t.replace(/\.\w+$/,".m4a"))})["catch"](function(){return e._assets.file(t.replace(/\.\w+$/,".mp3"))})["catch"](function(){return e._assets.file(t)})}}}),t}();e["default"]=f},function(t,e,n){"use strict";function r(t){return h(t.slice(0,10)).as("text").then(function(e){if("BEMUSEPACK"!==e)throw new Error("Invalid magic number");return h(t.slice(10,14)).as("arraybuffer")}).then(function(t){var e=new Uint8Array(t),n=e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24);return n}).then(function(e){return t.slice(14+e)})}var i=function(t){return t&&t.__esModule?t:{"default":t}},o=function(t){return t&&t.__esModule?t["default"]:t},a=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var n,r=[],i=t[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!e||r.length!==e););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var c=n(123).resolve,l=o(n(365)),f=o(n(113)),h=o(n(77)),p=o(n(383)),d=o(n(111)),m=i(n(76)),v=e.BemusePackageResources=function(){function t(e){var n=this;u(this,t);var i=l.bind(null,this);this._url=e,i("metadata",function(){return f(c(n._url,"metadata.json")).as("text").then(function(t){return JSON.parse(t)})}),i("refs",function(){return n.metadata.then(function(t){return t.refs.map(function(t){return new y(n,t)})})}),i("_fileMap",function(){return n.metadata.then(function(t){var e=new Map,n=!0,r=!1,i=void 0;try{for(var o,a=t.files[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.set(s.name.toLowerCase(),s)}}catch(u){r=!0,i=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}return e})}),this.progress={all:new d,current:new d},this._loadPayload=m.wrapPromise(this.progress.all,p(1,function(t){return f(t).as("blob",n.progress.current).then(r)}))}return s(t,{url:{get:function(){return this._url}},file:{value:function(t){var e=this;return this._fileMap.then(function(n){var r=n.get(t.toLowerCase());if(!r)throw new Error("Unable to find: "+t);return new g(e,r.ref,r.name)})}},getBlob:{value:function(t){var e=a(t,3),n=e[0],r=e[1],i=e[2];return this.refs.then(function(t){return t[n]}).then(function(t){return t.load()}).then(function(t){return t.slice(r,i)})}}}),t}(),g=function(){function t(e,n,r){u(this,t),this._resources=e,this._ref=n,this._name=r}return s(t,{read:{value:function(t){return m.atomic(t,this._resources.getBlob(this._ref).then(function(t){return h(t).as("arraybuffer")}))}},name:{get:function(){return this._name}}}),t}(),y=function(){function t(e,n){u(this,t),this._resources=e,this._url=c(e.url,n.path)}return s(t,{load:{value:function(){return this._promise||(this._promise=this._resources._loadPayload(this._url))}}}),t}();e["default"]=v},function(t,e,n){"use strict";function r(t){var e=l.map(Array.from(t.children("keyframe")),o),n={},r=!0,a=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var f=u.value,h=+f.t,p=f.ease||"linear";if(isNaN(h))throw new Error('Expected keyframe to have "t" attribute');for(var d in f)if("t"!==d&&"ease"!==d){var m=+f[d],v=n[d]||(n[d]=i(d));v.keyframes.push({time:h,value:m,ease:p})}}}catch(g){a=!0,s=g}finally{try{!r&&c["return"]&&c["return"]()}finally{if(a)throw s}}return{on:t.attr("on")||"",data:l.values(n)}}function i(t){return{name:t,keyframes:[]}}function o(t){return l(t.attributes).map(function(t){return[t.name.toLowerCase(),t.value]}).object().value()}var a=function(t){return t&&t.__esModule?t["default"]:t},s=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},u=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};e._compile=r,e._attrs=o,Object.defineProperty(e,"__esModule",{value:!0});var l=a(n(12)),f=a(n(51)),h=a(n(326)),p=function(t){return Object.assign({},t,{data:h(t.data)})},d=e.Animation=function(){function t(e,n){c(this,t),this._timeKey=n||"t",this._properties=l(e).map(function(t){return l.pluck(t.data,"name")}).flatten().thru(function(t){return new Set(t)}).value(),this._animations=l.map(e,p),this._events=l.uniq(l.pluck(e,"on"))}return u(t,{prop:{value:function(t,e){var n=this;return this._properties.has(t)?function(r){var i=n._getAnimation(r);return i.hasOwnProperty(t)?i[t]:e(r)}:e}},_getAnimation:{value:function(t){var e=l(this._events).filter(function(e){return""===e||e in t}).max(function(e){return t[e]||0}),n=t[this._timeKey]-(t[e]||0),r=this._animations.filter(function(t){return t.on===e}),i=r.map(function(t){return t.data.values(n)});return Object.assign.apply(Object,[{}].concat(s(i)))}}},{compile:{value:function(e,n){var i=Array.from(n.children("animation")),o=l.map(i,function(t){return r(f(t))}),a=n.attr("t")||"t";return new t(o,a)}}}),t}();e["default"]=d},function(t,e,n){"use strict";n(370),t.exports=n(367)},function(t,e,n){"use strict";function r(t,e,n){var r=s(t);if(r!==e)throw new TypeError("Expected type of "+n+" to be "+e+", but was "+r)}function i(t){return c.isPrototypeOf(t)}function o(t,e){if(null===e||void 0===e)return!1;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],i=e[n];if(l.isMatcher(r)){if(!r.test(i))return!1}else if("object"===s(r)){if(!o(r,i))return!1}else if(!l.equal(r,i))return!1}return!0}function a(t,e){return function(n,i){r(n,"string","property");var o=1===arguments.length,a=e+'("'+n+'"';return o||(a+=", "+i),a+=")",l(function(e){return void 0!==e&&null!==e&&t(e,n)?o||l.equal(i,e[n]):!1},a)}}var s=n(457),u=n(237),c={toString:function(){return this.message}};c.or=function(t){if(!arguments.length)throw new TypeError("Matcher expected");i(t)||(t=l(t));var e=this,n=u.create(c);return n.test=function(n){return e.test(n)||t.test(n)},n.message=e.message+".or("+t.message+")",n},c.and=function(t){if(!arguments.length)throw new TypeError("Matcher expected");i(t)||(t=l(t));var e=this,n=u.create(c);return n.test=function(n){return e.test(n)&&t.test(n)},n.message=e.message+".and("+t.message+")",n};var l=function(t,e){var n=u.create(c),r=s(t);switch(r){case"object":if("function"==typeof t.test)return n.test=function(e){return t.test(e)===!0},n.message="match("+u.getName(t.test)+")",n;var i=[];for(var a in t)t.hasOwnProperty(a)&&i.push(a+": "+t[a]);n.test=function(e){return o(t,e)},n.message="match("+i.join(", ")+")";break;case"number":n.test=function(e){return t==e};break;case"string":n.test=function(e){return"string"!=typeof e?!1:-1!==e.indexOf(t)},n.message='match("'+t+'")';break;case"regexp":n.test=function(e){return"string"!=typeof e?!1:t.test(e)};break;case"function":n.test=t,
e?n.message=e:n.message="match("+u.getName(t)+")";break;default:n.test=function(e){return l.equal(t,e)}}return n.message||(n.message="match("+t+")"),n};l.isMatcher=i,l.any=l(function(){return!0},"any"),l.defined=l(function(t){return null!==t&&void 0!==t},"defined"),l.truthy=l(function(t){return!!t},"truthy"),l.falsy=l(function(t){return!t},"falsy"),l.same=function(t){return l(function(e){return t===e},"same("+t+")")},l.typeOf=function(t){return r(t,"string","type"),l(function(e){return s(e)===t},'typeOf("'+t+'")')},l.instanceOf=function(t){return r(t,"function","type"),l(function(e){return e instanceof t},"instanceOf("+u.getName(t)+")")},l.has=a(function(t,e){return"object"==typeof t?e in t:void 0!==t[e]},"has"),l.hasOwn=a(function(t,e){return t.hasOwnProperty(e)},"hasOwn"),l.bool=l.typeOf("boolean"),l.number=l.typeOf("number"),l.string=l.typeOf("string"),l.object=l.typeOf("object"),l.func=l.typeOf("function"),l.array=l.typeOf("array"),l.regexp=l.typeOf("regexp"),l.date=l.typeOf("date"),l.equal=function(t,e){return t==e},t.exports=l},,function(t,e,n){"use strict";function r(){var t=void 0===arguments[0]?"":arguments[0];return s.Compiler.compile(t).chart}function i(t){var e=void 0===arguments[1]?{}:arguments[1];return u.fromBMSChart(r(t),1,e)}function o(t){var e=void 0===arguments[1]?{}:arguments[1];return new c(i(t,1,e),1,e)}var a=function(t){return t&&t.__esModule?t["default"]:t};e.chart=r,e.notechart=i,e.playerWithBMS=o,Object.defineProperty(e,"__esModule",{value:!0});var s=a(n(121)),u=a(n(230)),c=a(n(136)),l=a(n(12)),f=l.tap;e.tap=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(30).Action,i=new r;e.selectSong=i;var o=new r;e.selectChart=o;var a=new r;e.launchGame=a;var s=new r;e.setFilterText=s;var u=new r;e.setCustomSong=u},function(t,e,n){"use strict";function r(t){var e=void 0===arguments[1]?{}:arguments[1],n=e.onMessage||function(){};return n("Examining dropped items..."),t.fileList.then(function(t){return t.filter(function(t){return/\.(bms|bme|bml)$/i.test(t)})}).then(function(e){return n(e.length+" file(s) found. Reading them..."),Promise.map(e,function(e){return t.file(e).then(function(t){return t.read()}).then(function(t){return{name:e,data:t}})})}).then(function(t){return new Promise(function(e,r){var i=new o;i.onmessage=function(t){var r=t.data;"result"===r.type?(e(r.song),i.terminate()):"started"===r.type?n("Analyzing BMS files..."):"progress"===r.type&&n("Loaded "+r.file+" ("+r.current+"/"+r.total+").")},i.onerror=function(t){r(t)},i.postMessage({files:t})})}).then(function(e){return e.resources=t,e})}var i=function(t){return t&&t.__esModule?t["default"]:t};e.loadSongFromResources=r,Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(393))},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};n(373);var i=r(n(6));t.exports=i.createClass({displayName:"result-grade",render:function(){return i.createElement("div",{className:"result-grade"},i.createElement("div",{className:"result-grade--label"},"GRADE"),i.createElement("div",{className:"result-grade--grade"},this.props.grade))}})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};n(374);var i=r(n(6)),o=r(n(84)),a=r(n(234)),s=r(n(137)),u=r(n(265)),c=r(n(266)),l=r(n(281)),f=r(n(279));t.exports=i.createClass({displayName:"result-scene",render:function(){return i.createElement(o,{className:"result-scene"},i.createElement(a,null,"Play Result"),i.createElement("div",{className:"result-scene--report"},i.createElement(l,{result:this.props.result})),i.createElement(f,{grade:this.props.result.grade}),i.createElement("div",{className:"result-scene--information"},i.createElement("div",{className:"result-scene--chart"},i.createElement(c,{chart:this.props.chart,onChartClick:this.noop})),i.createElement(u,{info:this.props.chart.info}),i.createElement("p",{style:{textAlign:"center"}},"Ranking is coming in later version..."),i.createElement("div",{className:"result-scene--exit",onClick:this.props.onExit},"Continue")),i.createElement(s,null,i.createElement(s.Spacer,null),i.createElement("a",{onClick:this.props.onExit,href:"javascript://"},"Continue")))},noop:function(){}})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};n(375);var i=r(n(6)),o=r(n(306));t.exports=i.createClass({displayName:"result-table",render:function(){var t=this.props.result;return i.createElement("div",{className:"result-table"},i.createElement("table",null,i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{value:t[1]})),i.createElement("th",null,"Meticulous")),i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{value:t[2]})),i.createElement("th",null,"Precise")),i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{value:t[3]})),i.createElement("th",null,"Good")),i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{value:t[4]})),i.createElement("th",null,"Offbeat")),i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{value:t.missed})),i.createElement("th",null,"Missed"))),i.createElement("table",null,i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{value:t.maxCombo})),i.createElement("th",null,"Max Combo")),i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{formatter:this.formatAccuracy,value:t.accuracy})),i.createElement("th",null,"Accurate"))),i.createElement("table",{className:"result-table--total"},i.createElement("tr",null,i.createElement("td",null,i.createElement(o,{value:t.score})),i.createElement("th",null,"Total Score"))))},formatAccuracy:function(t){return(100*t).toFixed(2)+"%"}})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var n,r=[],i=t[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!e||r.length!==e););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(267)),u=e.GameAudio=function(){function t(e){var n=e.game,r=e.samples,i=e.master;a(this,t),this._master=i,this._context=i.audioContext,this._players=new Map(n.players.map(function(t){return[t,new s({player:t,samples:r,master:i})]}))}return o(t,{destroy:{value:function(){this._master.destroy()}},unmute:{value:function(){this._master.unmute()}},context:{get:function(){return this._context}},update:{value:function(t,e){var n=!0,r=!1,o=void 0;try{for(var a,s=this._players[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=i(a.value,2),c=u[0],l=u[1];l.update(t,e.player(c))}}catch(f){r=!0,o=f}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw o}}}}}),t}();e["default"]=u},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var a=r(n(80)),s=e.Clock=function(){function t(e){o(this,t),e.unmute(),this._context=e.context,this._offset=[],this._sum=0,this.update()}return i(t,{update:{value:function(){var t=a()/1e3,e=t-this._context.currentTime;for(this._offset.push(e),this._sum+=e;this._offset.length>60;)this._sum-=this._offset.shift();this.time=t-this._sum/this._offset.length}}}),t}();e["default"]=s},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var a=r(n(286)),s=r(n(244)),u=r(n(135)),c=r(n(283)),l=r(n(110)),f=r(n(288)),h=r(n(269)),p=r(n(287)),d=e.GameController=function(){function t(e){var n=this,r=e.game,i=e.display,f=e.audio;o(this,t),this._audioInputLatency=r.options.audioInputLatency,this._game=r,this._display=i,this._audio=f,this._clock=new c(this._audio),this._input=new u,this._timer=new a(this._clock,this._input),this._state=new s(r),this._promise=new Promise(function(t){return n._resolvePromise=t}),l.enabled&&this.enableBenchmark()}return i(t,{game:{get:function(){return this._game}},display:{get:function(){return this._display}},audio:{get:function(){return this._audio}},promise:{get:function(){return this._promise}},start:{value:function(){var t=this;this._handleEscape(),this._display.start(),this._input.use(new f),this._input.use(new p(this._game)),this._input.use(new h(this._display.context)),/Mobile.*?Safari/.test(navigator.userAgent)?!function(){var e=setInterval(function(){return t._update()},10);t._endGameLoop=function(){return clearInterval(e)}}():!function(){var e=!1,n=function(){e||(t._update(),requestAnimationFrame(n))};requestAnimationFrame(n),t._endGameLoop=function(){return e=!0}}()}},_handleEscape:{value:function(){var t=this,e=function(e){27===e.keyCode&&(e.preventDefault(),e.stopPropagation(),t._resolvePromise(t._state))};window.addEventListener("keydown",e,!0),this._promise["finally"](function(){window.removeEventListener("keydown",e,!0)}).done()}},destroy:{value:function(){this._endGameLoop(),this._audio.destroy(),this._input.destroy(),this._display.destroy()}},_update:{value:function(){this._clock.update(),this._input.update(),this._timer.update();var t=this._timer.time,e=this._audioInputLatency;this._state.update(t-e,this._input,this._timer),this._audio.update(t,this._state),this._display.update(t,this._state),this._state.finished&&this._resolvePromise&&(this._resolvePromise(this._state),this._resolvePromise=null)}},enableBenchmark:{value:function(){l.benchmark("update",this,"_update"),l.benchmark("input_update",this._input,"update"),l.benchmark("state_update",this._state,"update"),l.benchmark("audio_update",this._audio,"update"),l.benchmark("display_update",this._display,"update"),l.benchmark("display_compute",this._display,"_getData"),l.benchmark("display_push",this._display._context._instance,"push"),l.benchmark("display_render",this._display._context._renderer,"render")}}}),t}();e["default"]=d},function(t,e,n){"use strict";function r(t){return function(e){var n=function(){return!1};return a(window).on("touchstart",n),i(t.view,e),{teardown:function(){a(window).off("touchstart",n)}}}}function i(t,e){function n(){var e=Math.min(window.innerWidth/r,window.innerHeight/i);t.style.width=Math.round(r*e)+"px",t.style.height=Math.round(i*e)+"px";var n=(window.innerHeight-i*e)/2;t.style.marginTop=Math.round(n)+"px"}var r=t.width,i=t.height;t.style.display="block",t.style.margin="0 auto",e.appendChild(t),n(),a(window).on("resize",n)}var o=function(t){return t&&t.__esModule?t["default"]:t};t.exports=r;var a=o(n(51))},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var a=r(n(80)),s=e.GameTimer=function(){function t(e,n){o(this,t),this._clock=e,this._input=n,this._now=a["synchronized"](),this.startTime=null,this.readyFraction=0}return i(t,{started:{get:function(){return null!==this.startTime}},update:{value:function(){this._checkStartGame(),this.time=this._calculateTime()}},_checkStartGame:{value:function(){this.started||(this._input.get("start").value&&(this.gettingStarted=!0),this.gettingStarted&&!this._input.get("start").value&&(this.startTime=this._clock.time+this._getWait()),this.started||(this.readyFraction=1-this._getWait()))}},_getWait:{value:function(){var t=this._now()/1e3;return Math.ceil(t)-t}},_calculateTime:{value:function(){var t=null===this.startTime?0:this._clock.time-this.startTime;return 0>t&&(t=0),1>t?(Math.pow(t,6)-1)/6-1/30:t-31/30}}}),t}();e["default"]=s},function(t,e,n){"use strict";function r(t){function e(t){i[t.which]=1,t.metaKey||t.ctrlKey||(t.preventDefault(),t.stopPropagation())}function n(t){i[t.which]=0,t.metaKey||t.ctrlKey||(t.preventDefault(),t.stopPropagation())}var r=t.players[0].options.input.keyboard,i={};return o(window).on("keydown",e).on("keyup",n),{name:"GameKBPlugin",get:function(){return{p1_1:i[r[1]||83],p1_2:i[r[2]||68],p1_3:i[r[3]||70],p1_4:i[r[4]||32],p1_5:i[r[5]||74],p1_6:i[r[6]||75],p1_7:i[r[7]||76],p1_SC:i[r.SC||65]||-i[r.SC2||0],p1_speedup:i[38],p1_speeddown:i[40],start:i[13],select:i[18]}},destroy:function(){o(window).off("keydown",e).off("keyup",n)}}}var i=function(t){return t&&t.__esModule?t["default"]:t},o=i(n(51));t.exports=r},function(t,e,n){"use strict";function r(){function t(t){return i.some(function(e){return e&&e.buttons[t]&&e.buttons[t].pressed})}function e(t){for(var e=0;e<i.length;e++){var n=i[e];if(n&&Math.abs(n.axes[t])>.01)return n.axes[t]}return 0}return{name:"GamepadPlugin",get:function(){var n={p1_1:t(3),p1_2:t(6),p1_3:t(2),p1_4:t(7),p1_5:t(1),p1_6:t(4),p1_7:e(3)||e(0),p1_SC:e(4)||e(1),start:t(9),select:t(8)};return n.p1_speedup=(n.start||n.select)&&(n.p1_2||n.p1_4||n.p1_6),n.p1_speeddown=(n.start||n.select)&&(n.p1_1||n.p1_3||n.p1_5||n.p1_7),n}}}e.GamepadPlugin=r,Object.defineProperty(e,"__esModule",{value:!0});var i=[];window.addEventListener("gamepadconnected",function(t){i.push(t.gamepad)}),e["default"]=r},function(t,e,n){(function(t){"use strict";function r(e){var r=e.assets,i=e.bms;return h.start(function(o,h){o("Scintillator","Loading game engine",[],function(t){return new Promise(function(e){var r=new l(t);r.use(function(){n.e(7,function(t){return e(n(131))})})})}),o("Skin","Loading skin",["Scintillator"],function(t,e){return t.load(t.getSkinUrl(),e)}),o("SkinContext",null,["Scintillator","Skin"],function(t,e){return new t.Context(e)}),r.progress&&(r.progress.current&&o.bar("Loading package",r.progress.current),r.progress.all&&o.bar("Loading song packages",r.progress.all)),o("BMSChart","Loading "+e.bms.name,[],a.wrap(regeneratorRuntime.mark(function b(e){var n,r,o,a,u;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,i.read(e);case 2:return n=c.sent,r=new t(new Uint8Array(n)),c.next=6,Promise.promisify(s.Reader.readAsync)(r);case 6:return o=c.sent,a=s.Compiler.compile(o),u=a.chart,c.abrupt("return",u);case 10:case"end":return c.stop()}},b,this)})));var g=new u,y=new u;return o.bar("Loading audio",g),o.bar("Decoding audio",y),o("SamplingMaster",null,[],function(){return new c}),o("Game",null,["BMSChart"],function(t){return new p(t,e.options)}),o("GameDisplay",null,["Game","Skin","SkinContext"],function(t,e,n){return new v({game:t,skin:e,context:n})}),o("Samples",null,["SamplingMaster","Game"],function(t,e){var n=new f(r,t);return n.loadFiles(e.samples,g,y)}),o("GameAudio",null,["Game","Samples","SamplingMaster"],function(t,e,n){return new m({game:t,samples:e,master:n})}),o("GameController",null,["Game","GameDisplay","GameAudio"],function(t,e,n){return new d({game:t,display:e,audio:n})}),h("GameController")})}var i=function(t){return t&&t.__esModule?t:{"default":t}},o=function(t){return t&&t.__esModule?t["default"]:t};e.load=r,Object.defineProperty(e,"__esModule",{value:!0});var a=o(n(38)),s=o(n(121)),u=o(n(111)),c=o(n(83)),l=o(n(399)),f=o(n(270)),h=i(n(290)),p=o(n(242)),d=o(n(284)),m=o(n(282)),v=o(n(241))}).call(e,n(119).Buffer)},function(t,e,n){"use strict";function r(t){function e(t,e,n,i){var a=new s;e&&f.push({text:e,progress:a}),c[t]=function(){return Promise.all(n.map(r)).then(function(t){return i.apply(void 0,o(t.concat([a])))})}}function n(t,e){f.push({text:t,progress:e})}function r(t){return l[t]||(l[t]=c[t]())}function i(){return f.map(function(t){return{text:t.text,progress:t.progress.progress,progressText:t.progress.toString()}})}var c={},l={},f=[];e.bar=n;var h=t(e,r),p=new a(i()),d=u(function(){p.value=i()},16),m=!0,v=!1,g=void 0;try{for(var y,b=f[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var _=y.value;_.progress.watch(d)}}catch(w){v=!0,g=w}finally{try{!m&&b["return"]&&b["return"]()}finally{if(v)throw g}}return{tasks:p,promise:h}}var i=function(t){return t&&t.__esModule?t["default"]:t},o=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)};e.start=r,Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(308)),s=i(n(111)),u=n(12).throttle},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};n(376);var i=r(n(6));t.exports=i.createClass({displayName:"loading-scene-progress-bar",render:function(){return i.createElement("div",{className:"loading-scene-progress-bar"},i.createElement("div",{className:"loading-scene-progress-bar--bar",style:{width:this.props.width}}))}})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};n(377);var i=r(n(6)),o=r(n(291));t.exports=i.createClass({displayName:"loading-scene-progress",render:function(){var t=this;return i.createElement("div",{className:"loading-scene-progress"},this.props.tasks.value.map(function(e){return t.renderItem(e)}))},renderItem:function(t){var e=t.text,n=t.progressText,r=t.progress,a=Math.round(100*r||0)+"%",s=n?" ("+n+")":"";return i.createElement("div",{className:"loading-scene-progress--item"},i.createElement(o,{width:a}),e,i.createElement("span",{className:"loading-scene-progress--extra"},s))},componentDidMount:function(){var t=this;this._unsubscribe=this.props.tasks.watch(function(){return t.forceUpdate()})},componentWillUnmount:function(){this._unsubscribe()}})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};n(378);var i=r(n(6));t.exports=i.createClass({displayName:"loading-scene-song-info",render:function(){var t=this.props.song;return i.createElement("div",{className:"loading-scene-song-info"},i.createElement("div",{className:"loading-scene-song-info--genre"},t.genre),i.createElement("div",{className:"loading-scene-song-info--title"},t.title),t.subtitles.map(function(t){return i.createElement("div",{className:"loading-scene-song-info--subtitle"},t)}),i.createElement("div",{className:"loading-scene-song-info--artist"},t.artist),t.subartists.map(function(t){return i.createElement("div",{className:"loading-scene-song-info--subartist"},t)}))}})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};n(379);var i=r(n(6)),o=r(n(84)),a=r(n(293)),s=r(n(292));t.exports=i.createClass({displayName:"loading-scene",render:function(){return i.createElement(o,{className:"loading-scene",ref:"scene"},i.createElement("div",{className:"loading-scene--info"},i.createElement(a,{song:this.props.song})),i.createElement(s,{tasks:this.props.tasks}),i.createElement("div",{className:"loading-scene--flash"}),i.createElement("div",{className:"loading-scene--cover"}))},teardown:function(){return i.findDOMNode(this.refs.scene).classList.add("is-exiting"),Promise.delay(500)}})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var a=r(n(113)),s=n(392).basename,u=e.URLResource=function(){function t(e){o(this,t),this._url=e}return i(t,{read:{value:function(t){return a(this._url).as("arraybuffer",t)}},name:{get:function(){return s(this._url)}}}),t}();e["default"]=u},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=r(n(133)),s=a("scintillator:compiler"),u=r(n(51)),c=r(n(302)),l=r(n(303)),f=r(n(299)),h=r(n(301)),p=r(n(304)),d=r(n(300)),m={skin:c,sprite:l,group:f,object:h,text:p,"if":d},v=function(){function t(e){o(this,t),Object.assign(this,e),this._defs=new Map}return i(t,{compile:{value:function(e){var n=e[0].nodeName;s("compiling",e[0]);var r=t.getNodeClass(n);if(!r)throw new Error("Invalid node name: "+n);return r.compile(this,e)}},compileChildren:{value:function(e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=Array.from(e.children())[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value,l=c.nodeName;if("defs"===l)this.compileDefs(u(c));else if("use"===l)n.push(this.getDef(c.getAttribute("def")));else{var f=t.getNodeClass(l);f&&n.push(this.compile(u(c)))}}}catch(h){i=!0,o=h}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}},compileDefs:{value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=Array.from(t.children())[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,s=a.getAttribute("id");if(!s)throw new Error("A def should have an id: "+a.nodeName);this._defs.set(s,this.compile(u(a)))}}catch(c){n=!0,r=c}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}}},getDef:{value:function(t){var e=this._defs.get(t);if(!e)throw new Error("Cannot find def: "+t);return e}}},{getNodeClass:{value:function(t){return m[t]}}}),t}();t.exports=v},function(t,e,n){"use strict";function r(t,e){return navigator.userAgent.match(/Gecko\//)?new s.autoDetectRenderer(t,e):new s.CanvasRenderer(t,e)}var i=function(t){return t&&t.__esModule?t["default"]:t},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var s=i(n(23)),u=e.Context=function(){function t(e){a(this,t),this.refs={},this._skin=e,this._instance=e.instantiate(this),this._renderer=r(e.width,e.height),this.stage=this._instance.object,this.view=this._renderer.view,this._setupInteractivity()}return o(t,{render:{value:function(t){this._instance.push(t),this._renderer.render(this.stage)}},destroy:{value:function(){this._instance.destroy(),this._instance=null,this._teardownInteractivity()}},input:{get:function(){return this._input.get()}},ref:{value:function(t,e){var n=this.refs[t]||(this.refs[t]=new Set);n.add(e)}},unref:{value:function(t,e){var n=this.refs[t];n&&n["delete"](e)}},_setupInteractivity:{value:function(){function t(t,e,n){return{x:(e.clientX-n.left)/n.width*c,y:(e.clientY-n.top)/n.height*l,id:t}}var e=this,n=null,r=[],i=function(t){n=t},o=function(t){n=n&&t},a=function(){n=null},s=function(t){r=[].slice.call(t.touches)},u=this.view,c=this._skin.width,l=this._skin.height;u.addEventListener("mousedown",i,!1),u.addEventListener("mousemove",o,!1),u.addEventListener("mouseup",a,!1),u.addEventListener("touchstart",s,!1),u.addEventListener("touchmove",s,!1),u.addEventListener("touchend",s,!1),this._teardownInteractivity=function(){u.removeEventListener("mousedown",i,!1),u.removeEventListener("mousemove",o,!1),u.removeEventListener("mouseup",a,!1),u.removeEventListener("touchstart",s,!1),u.removeEventListener("touchmove",s,!1),u.removeEventListener("touchend",s,!1)},this._input={get:function(){var i=[],o=e.view.getBoundingClientRect();n&&i.push(t("mouse",n,o));for(var a=0;a<r.length;a++){var s=r[a];i.push(t("touch"+s.identifier,s,o))}return i}}}}}),t}();e["default"]=u},function(t,e,n){"use strict";function r(t,e){return h(regeneratorRuntime.mark(function n(){var r,a,s,u,h,p,g,y,b,_,w,x,E,T,C,S,A,k,O,j,M,R,N;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return c("load XML from %s",t),n.next=3,i(t);case 3:for(r=n.sent,a=new m,s=new Set,u=!0,h=!1,p=void 0,n.prev=9,g=Array.from(r.find("[image]"))[Symbol.iterator]();!(u=(y=g.next()).done);u=!0)b=y.value,s.add(l(b).attr("image"));n.next=17;break;case 13:n.prev=13,n.t6=n["catch"](9),h=!0,p=n.t6;case 17:n.prev=17,n.prev=18,!u&&g["return"]&&g["return"]();case 20:if(n.prev=20,!h){n.next=23;break}throw p;case 23:return n.finish(20);case 24:return n.finish(17);case 25:for(_=!0,w=!1,x=void 0,n.prev=28,E=Array.from(r.find("[font-src]"))[Symbol.iterator]();!(_=(T=E.next()).done);_=!0)b=T.value,s.add(l(b).attr("font-src"));n.next=36;break;case 32:n.prev=32,n.t7=n["catch"](28),w=!0,x=n.t7;case 36:n.prev=36,n.prev=37,!_&&E["return"]&&E["return"]();case 39:if(n.prev=39,!w){n.next=42;break}throw x;case 42:return n.finish(39);case 43:return n.finish(36);case 44:for(C=!0,S=!1,A=void 0,n.prev=47,k=s[Symbol.iterator]();!(C=(O=k.next()).done);C=!0)j=O.value,M=f.resolve(t,j),a.add(j,M);n.next=55;break;case 51:n.prev=51,n.t8=n["catch"](47),S=!0,A=n.t8;case 55:n.prev=55,n.prev=56,!C&&k["return"]&&k["return"]();case 58:if(n.prev=58,!S){n.next=61;break}throw A;case 61:return n.finish(58);case 62:return n.finish(55);case 63:return R=d.fixed(1+s.size,e),R(),n.next=67,o(a,R);case 67:return c("compiling"),N=new v({resources:a}).compile(r),n.abrupt("return",N);case 70:case"end":return n.stop()}},n,this,[[9,13,17,25],[18,,20,24],[28,32,36,44],[37,,39,43],[47,51,55,63],[56,,58,62]])}))}function i(t){return Promise.resolve(l.ajax({url:t,dataType:"xml"})).then(function(t){return l(t.documentElement)})}function o(t,e){return c("loading resources"),new Promise(function(n){if(0===t.urls.length)return n();var r=new p.AssetLoader(t.urls);r.on("onComplete",function(){c("resources finished loading"),n()}),e&&r.on("onProgress",e),r.load()})}var a=function(t){return t&&t.__esModule?t:{"default":t}},s=function(t){return t&&t.__esModule?t["default"]:t};e.load=r,Object.defineProperty(e,"__esModule",{value:!0});var u=s(n(133)),c=u("scintillator:loader"),l=s(n(51)),f=s(n(123)),h=s(n(38)),p=s(n(23)),d=a(n(76)),m=s(n(305)),v=s(n(296))},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(23)),u=r(n(49)),c=r(n(50)),l=r(n(126)),f=n(233).parseFrame,h=e.Mask=function(){function t(e){a(this,t),this._frame=e}return o(t,{instantiate:{value:function(t,e){var n=new s.Graphics;return n.beginFill(),n.drawShape(this._frame),n.endFill(),e.object.mask=n,new c({context:t,object:n,parent:e.object})}}}),t}(),p=e.GroupNode=function(t){function e(){a(this,e),null!=t&&t.apply(this,arguments)}return i(e,t),o(e,{compile:{value:function(t,e){this.children=t.compileChildren(e),this.display=l.compile(t,e);var n=f(e.attr("mask")||"");n&&(this.mask=new h(n))}},instantiate:{value:function(t,e){var n=new s.DisplayObjectContainer,r=[this.display];return this.mask&&r.push(this.mask),new c({context:t,object:n,parent:e,concerns:r,children:this.children})}}}),e}(u);e["default"]=p},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(23)),u=r(n(49)),c=r(n(50)),l=r(n(82)),f=e.IfNode=function(t){function e(){a(this,e),null!=t&&t.apply(this,arguments)}return o(e,t),i(e,{compile:{value:function(t,e){var n=t.compileChildren(e);if(1!==n.length)throw new Error("Expected exactly 1 children, "+n.length+" found");this.child=n[0],this.key=new l(e.attr("key")),this.value=String(e.attr("value"))}},instantiate:{value:function(t,e){var n=new s.DisplayObjectContainer,r=this.key,i=this.value,o=this.child,a=null;return new c({context:t,parent:e,object:n,onData:function(e){String(r(e))===i?(null===a&&(a=o.instantiate(t,n)),a.push(e)):null!==a&&(a.destroy(),a=null)}})}}}),e}(u);e["default"]=f},function(t,e,n){"use strict";function r(t,e,n){return{instantiate:function(r,i){function o(){var t;console.log("init i"+n);for(var o=0;n>o;o++)t=e.instantiate(r,i.object),t.detach(),c.push(t)}function a(t){var e,n,r,i=new Set(u.keys());t||(t=[]);for(var o=0;o<t.length;o++)n=t[o],e=n.key,u.has(e)?r=u.get(e):(r=s(),u.set(e,r)),r.push(n),i["delete"](e);var a=!0,l=!1,f=void 0;try{for(var h,p=i[Symbol.iterator]();!(a=(h=p.next()).done);a=!0)e=h.value,r=u.get(e),r.detach(),u["delete"](e),c.push(r)}catch(d){l=!0,f=d}finally{try{!a&&p["return"]&&p["return"]()}finally{if(l)throw f}}}function s(){var t=c.pop();return t?t.attachTo(i.object):t=e.instantiate(r,i.object),t}var u=new Map,c=[];return o(),new l({context:r,onData:function(e){a(t(e))}})}}}var i=function(t){return t&&t.__esModule?t["default"]:t},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var u=i(n(23)),c=i(n(49)),l=i(n(50)),f=i(n(82)),h=e.ObjectNode=function(t){function e(){s(this,e),null!=t&&t.apply(this,arguments)}return a(e,t),o(e,{compile:{value:function(t,e){if(this.children=t.compileChildren(e),1!==this.children.length)throw new Error("Expected exactly 1 children, "+this.children.length+" given");this.pool=+e.attr("pool")||1,this.key=new f(e.attr("key"))}},instantiate:{value:function(t,e){var n=new u.SpriteBatch,i=new r(this.key,this.children[0],this.pool);return new l({context:t,parent:e,object:n,concerns:[i]})}}}),e}(c);e["default"]=h},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");

};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(23)),u=r(n(49)),c=r(n(50)),l=e.SkinRootNode=function(t){function e(){a(this,e),null!=t&&t.apply(this,arguments)}return o(e,t),i(e,{compile:{value:function(t,e){this.children=t.compileChildren(e),this.width=+e.attr("width"),this.height=+e.attr("height")}},instantiate:{value:function(t){var e=new s.Stage(591879);return new c({context:t,object:e,children:this.children})}}}),e}(u);e["default"]=l},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(23)),u=r(n(49)),c=r(n(50)),l=n(233).parseFrame,f=r(n(126)),h=e.SpriteNode=function(t){function e(){a(this,e),null!=t&&t.apply(this,arguments)}return o(e,t),i(e,{compile:{value:function(t,e){this.url=t.resources.get(e.attr("image")),this.display=f.compile(t,e),this.frame=l(e.attr("frame")||"")}},instantiate:{value:function(t,e){var n=new s.Sprite(this.getTexture());return new c({context:t,object:n,parent:e,concerns:[this.display]})}},getTexture:{value:function(){if(this._texture)return this._texture;var t=s.scaleModes.NEAREST,e=s.BaseTexture.fromImage(this.url,void 0,t),n=new s.Texture(e,this.frame);return this._texture=n,n}}}),e}(u);e["default"]=h},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(23)),u=r(n(49)),c=r(n(50)),l=r(n(126)),f=r(n(82)),h=e.TextNode=function(t){function e(){a(this,e),null!=t&&t.apply(this,arguments)}return o(e,t),i(e,{compile:{value:function(t,e){this.font=e.attr("font"),this.text=e.attr("text"),this.data=new f(e.attr("data")||"0"),this.display=l.compile(t,e),this.ttf=!e.attr("font-src"),this.fill=e.attr("fill"),this.align="left"===e.attr("align")?0:"right"===e.attr("align")?1:.5}},instantiate:{value:function(t,e){var n=this,r=void 0;r=this.ttf?new s.Text(this.text,{font:this.font,fill:this.fill}):new s.BitmapText(this.text,{font:this.font});var i=new s.DisplayObjectContainer;return i.addChild(r),new c({context:t,parent:e,object:i,concerns:[this.display],bindings:[[this.data,function(t){r.setText(n.text.replace("%s",t)),r.updateText(),r.x=r.width*-n.align}]]})}}}),e}(u);e["default"]=h},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var a=r(n(12)),s=e.Resources=function(){function t(){o(this,t),this._map={}}return i(t,{add:{value:function(t,e){this._map[t]=e}},get:{value:function(t){if(!(t in this._map))throw new Error("Not registered: "+t);return this._map[t]}},urls:{get:function(){return a.values(this._map)}}}),t}();e["default"]=s},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t};n(380);var i=r(n(6)),o=r(n(80));t.exports=i.createClass({displayName:"running-number",render:function(){return i.createElement("span",{className:"running-number"})},componentDidMount:function(){var t=this,e=this.getDOMNode(),n=document.createTextNode("");e.appendChild(n),n.nodeValue=this._getText(0);var r=o(),i=setInterval(function(){var e=Math.min(1,Math.max(0,(o()-r)/2e3));n.nodeValue=t._getText(t.props.value*e),1===e&&clearInterval(i)},16)},_getText:function(t){return this.props.formatter?this.props.formatter(t):t.toFixed(0)}})},,,function(t,e,n){t.exports={includeStack:!1,showDiff:!0,truncateThreshold:40}},function(t,e,n){/*!
	 * Chai - flag utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){var r=t.__flags||(t.__flags=Object.create(null));return 3!==arguments.length?r[e]:void(r[e]=n)}},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,"/*!\n *  Font Awesome 4.3.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */@font-face{font-family:'FontAwesome';src:url("+n(385)+");src:url("+n(384)+"?#iefix&v=4.3.0) format('embedded-opentype'),url("+n(388)+") format('woff2'),url("+n(389)+") format('woff'),url("+n(387)+") format('truetype'),url("+n(386)+'#fontawesomeregular) format(\'svg\');font-weight:400;font-style:normal}.fa{display:inline-block;font:14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-transform:translate(0,0);transform:translate(0,0)}.fa-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.28571429em;text-align:center}.fa-ul{padding-left:0;margin-left:2.14285714em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.14285714em;width:2.14285714em;top:.14285714em;text-align:center}.fa-li.fa-lg{left:-1.85714286em}.fa-border{padding:.2em .25em .15em;border:solid .08em #eee;border-radius:.1em}.pull-right{float:right}.pull-left{float:left}.fa.pull-left{margin-right:.3em}.fa.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);-webkit-transform:scale(-1,1);transform:scale(-1,1)}.fa-flip-vertical{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);-webkit-transform:scale(1,-1);transform:scale(1,-1)}:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-flip-horizontal,:root .fa-flip-vertical{-webkit-filter:none;filter:none}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-glass:before{content:"\\f000"}.fa-music:before{content:"\\f001"}.fa-search:before{content:"\\f002"}.fa-envelope-o:before{content:"\\f003"}.fa-heart:before{content:"\\f004"}.fa-star:before{content:"\\f005"}.fa-star-o:before{content:"\\f006"}.fa-user:before{content:"\\f007"}.fa-film:before{content:"\\f008"}.fa-th-large:before{content:"\\f009"}.fa-th:before{content:"\\f00a"}.fa-th-list:before{content:"\\f00b"}.fa-check:before{content:"\\f00c"}.fa-remove:before,.fa-close:before,.fa-times:before{content:"\\f00d"}.fa-search-plus:before{content:"\\f00e"}.fa-search-minus:before{content:"\\f010"}.fa-power-off:before{content:"\\f011"}.fa-signal:before{content:"\\f012"}.fa-gear:before,.fa-cog:before{content:"\\f013"}.fa-trash-o:before{content:"\\f014"}.fa-home:before{content:"\\f015"}.fa-file-o:before{content:"\\f016"}.fa-clock-o:before{content:"\\f017"}.fa-road:before{content:"\\f018"}.fa-download:before{content:"\\f019"}.fa-arrow-circle-o-down:before{content:"\\f01a"}.fa-arrow-circle-o-up:before{content:"\\f01b"}.fa-inbox:before{content:"\\f01c"}.fa-play-circle-o:before{content:"\\f01d"}.fa-rotate-right:before,.fa-repeat:before{content:"\\f01e"}.fa-refresh:before{content:"\\f021"}.fa-list-alt:before{content:"\\f022"}.fa-lock:before{content:"\\f023"}.fa-flag:before{content:"\\f024"}.fa-headphones:before{content:"\\f025"}.fa-volume-off:before{content:"\\f026"}.fa-volume-down:before{content:"\\f027"}.fa-volume-up:before{content:"\\f028"}.fa-qrcode:before{content:"\\f029"}.fa-barcode:before{content:"\\f02a"}.fa-tag:before{content:"\\f02b"}.fa-tags:before{content:"\\f02c"}.fa-book:before{content:"\\f02d"}.fa-bookmark:before{content:"\\f02e"}.fa-print:before{content:"\\f02f"}.fa-camera:before{content:"\\f030"}.fa-font:before{content:"\\f031"}.fa-bold:before{content:"\\f032"}.fa-italic:before{content:"\\f033"}.fa-text-height:before{content:"\\f034"}.fa-text-width:before{content:"\\f035"}.fa-align-left:before{content:"\\f036"}.fa-align-center:before{content:"\\f037"}.fa-align-right:before{content:"\\f038"}.fa-align-justify:before{content:"\\f039"}.fa-list:before{content:"\\f03a"}.fa-dedent:before,.fa-outdent:before{content:"\\f03b"}.fa-indent:before{content:"\\f03c"}.fa-video-camera:before{content:"\\f03d"}.fa-photo:before,.fa-image:before,.fa-picture-o:before{content:"\\f03e"}.fa-pencil:before{content:"\\f040"}.fa-map-marker:before{content:"\\f041"}.fa-adjust:before{content:"\\f042"}.fa-tint:before{content:"\\f043"}.fa-edit:before,.fa-pencil-square-o:before{content:"\\f044"}.fa-share-square-o:before{content:"\\f045"}.fa-check-square-o:before{content:"\\f046"}.fa-arrows:before{content:"\\f047"}.fa-step-backward:before{content:"\\f048"}.fa-fast-backward:before{content:"\\f049"}.fa-backward:before{content:"\\f04a"}.fa-play:before{content:"\\f04b"}.fa-pause:before{content:"\\f04c"}.fa-stop:before{content:"\\f04d"}.fa-forward:before{content:"\\f04e"}.fa-fast-forward:before{content:"\\f050"}.fa-step-forward:before{content:"\\f051"}.fa-eject:before{content:"\\f052"}.fa-chevron-left:before{content:"\\f053"}.fa-chevron-right:before{content:"\\f054"}.fa-plus-circle:before{content:"\\f055"}.fa-minus-circle:before{content:"\\f056"}.fa-times-circle:before{content:"\\f057"}.fa-check-circle:before{content:"\\f058"}.fa-question-circle:before{content:"\\f059"}.fa-info-circle:before{content:"\\f05a"}.fa-crosshairs:before{content:"\\f05b"}.fa-times-circle-o:before{content:"\\f05c"}.fa-check-circle-o:before{content:"\\f05d"}.fa-ban:before{content:"\\f05e"}.fa-arrow-left:before{content:"\\f060"}.fa-arrow-right:before{content:"\\f061"}.fa-arrow-up:before{content:"\\f062"}.fa-arrow-down:before{content:"\\f063"}.fa-mail-forward:before,.fa-share:before{content:"\\f064"}.fa-expand:before{content:"\\f065"}.fa-compress:before{content:"\\f066"}.fa-plus:before{content:"\\f067"}.fa-minus:before{content:"\\f068"}.fa-asterisk:before{content:"\\f069"}.fa-exclamation-circle:before{content:"\\f06a"}.fa-gift:before{content:"\\f06b"}.fa-leaf:before{content:"\\f06c"}.fa-fire:before{content:"\\f06d"}.fa-eye:before{content:"\\f06e"}.fa-eye-slash:before{content:"\\f070"}.fa-warning:before,.fa-exclamation-triangle:before{content:"\\f071"}.fa-plane:before{content:"\\f072"}.fa-calendar:before{content:"\\f073"}.fa-random:before{content:"\\f074"}.fa-comment:before{content:"\\f075"}.fa-magnet:before{content:"\\f076"}.fa-chevron-up:before{content:"\\f077"}.fa-chevron-down:before{content:"\\f078"}.fa-retweet:before{content:"\\f079"}.fa-shopping-cart:before{content:"\\f07a"}.fa-folder:before{content:"\\f07b"}.fa-folder-open:before{content:"\\f07c"}.fa-arrows-v:before{content:"\\f07d"}.fa-arrows-h:before{content:"\\f07e"}.fa-bar-chart-o:before,.fa-bar-chart:before{content:"\\f080"}.fa-twitter-square:before{content:"\\f081"}.fa-facebook-square:before{content:"\\f082"}.fa-camera-retro:before{content:"\\f083"}.fa-key:before{content:"\\f084"}.fa-gears:before,.fa-cogs:before{content:"\\f085"}.fa-comments:before{content:"\\f086"}.fa-thumbs-o-up:before{content:"\\f087"}.fa-thumbs-o-down:before{content:"\\f088"}.fa-star-half:before{content:"\\f089"}.fa-heart-o:before{content:"\\f08a"}.fa-sign-out:before{content:"\\f08b"}.fa-linkedin-square:before{content:"\\f08c"}.fa-thumb-tack:before{content:"\\f08d"}.fa-external-link:before{content:"\\f08e"}.fa-sign-in:before{content:"\\f090"}.fa-trophy:before{content:"\\f091"}.fa-github-square:before{content:"\\f092"}.fa-upload:before{content:"\\f093"}.fa-lemon-o:before{content:"\\f094"}.fa-phone:before{content:"\\f095"}.fa-square-o:before{content:"\\f096"}.fa-bookmark-o:before{content:"\\f097"}.fa-phone-square:before{content:"\\f098"}.fa-twitter:before{content:"\\f099"}.fa-facebook-f:before,.fa-facebook:before{content:"\\f09a"}.fa-github:before{content:"\\f09b"}.fa-unlock:before{content:"\\f09c"}.fa-credit-card:before{content:"\\f09d"}.fa-rss:before{content:"\\f09e"}.fa-hdd-o:before{content:"\\f0a0"}.fa-bullhorn:before{content:"\\f0a1"}.fa-bell:before{content:"\\f0f3"}.fa-certificate:before{content:"\\f0a3"}.fa-hand-o-right:before{content:"\\f0a4"}.fa-hand-o-left:before{content:"\\f0a5"}.fa-hand-o-up:before{content:"\\f0a6"}.fa-hand-o-down:before{content:"\\f0a7"}.fa-arrow-circle-left:before{content:"\\f0a8"}.fa-arrow-circle-right:before{content:"\\f0a9"}.fa-arrow-circle-up:before{content:"\\f0aa"}.fa-arrow-circle-down:before{content:"\\f0ab"}.fa-globe:before{content:"\\f0ac"}.fa-wrench:before{content:"\\f0ad"}.fa-tasks:before{content:"\\f0ae"}.fa-filter:before{content:"\\f0b0"}.fa-briefcase:before{content:"\\f0b1"}.fa-arrows-alt:before{content:"\\f0b2"}.fa-group:before,.fa-users:before{content:"\\f0c0"}.fa-chain:before,.fa-link:before{content:"\\f0c1"}.fa-cloud:before{content:"\\f0c2"}.fa-flask:before{content:"\\f0c3"}.fa-cut:before,.fa-scissors:before{content:"\\f0c4"}.fa-copy:before,.fa-files-o:before{content:"\\f0c5"}.fa-paperclip:before{content:"\\f0c6"}.fa-save:before,.fa-floppy-o:before{content:"\\f0c7"}.fa-square:before{content:"\\f0c8"}.fa-navicon:before,.fa-reorder:before,.fa-bars:before{content:"\\f0c9"}.fa-list-ul:before{content:"\\f0ca"}.fa-list-ol:before{content:"\\f0cb"}.fa-strikethrough:before{content:"\\f0cc"}.fa-underline:before{content:"\\f0cd"}.fa-table:before{content:"\\f0ce"}.fa-magic:before{content:"\\f0d0"}.fa-truck:before{content:"\\f0d1"}.fa-pinterest:before{content:"\\f0d2"}.fa-pinterest-square:before{content:"\\f0d3"}.fa-google-plus-square:before{content:"\\f0d4"}.fa-google-plus:before{content:"\\f0d5"}.fa-money:before{content:"\\f0d6"}.fa-caret-down:before{content:"\\f0d7"}.fa-caret-up:before{content:"\\f0d8"}.fa-caret-left:before{content:"\\f0d9"}.fa-caret-right:before{content:"\\f0da"}.fa-columns:before{content:"\\f0db"}.fa-unsorted:before,.fa-sort:before{content:"\\f0dc"}.fa-sort-down:before,.fa-sort-desc:before{content:"\\f0dd"}.fa-sort-up:before,.fa-sort-asc:before{content:"\\f0de"}.fa-envelope:before{content:"\\f0e0"}.fa-linkedin:before{content:"\\f0e1"}.fa-rotate-left:before,.fa-undo:before{content:"\\f0e2"}.fa-legal:before,.fa-gavel:before{content:"\\f0e3"}.fa-dashboard:before,.fa-tachometer:before{content:"\\f0e4"}.fa-comment-o:before{content:"\\f0e5"}.fa-comments-o:before{content:"\\f0e6"}.fa-flash:before,.fa-bolt:before{content:"\\f0e7"}.fa-sitemap:before{content:"\\f0e8"}.fa-umbrella:before{content:"\\f0e9"}.fa-paste:before,.fa-clipboard:before{content:"\\f0ea"}.fa-lightbulb-o:before{content:"\\f0eb"}.fa-exchange:before{content:"\\f0ec"}.fa-cloud-download:before{content:"\\f0ed"}.fa-cloud-upload:before{content:"\\f0ee"}.fa-user-md:before{content:"\\f0f0"}.fa-stethoscope:before{content:"\\f0f1"}.fa-suitcase:before{content:"\\f0f2"}.fa-bell-o:before{content:"\\f0a2"}.fa-coffee:before{content:"\\f0f4"}.fa-cutlery:before{content:"\\f0f5"}.fa-file-text-o:before{content:"\\f0f6"}.fa-building-o:before{content:"\\f0f7"}.fa-hospital-o:before{content:"\\f0f8"}.fa-ambulance:before{content:"\\f0f9"}.fa-medkit:before{content:"\\f0fa"}.fa-fighter-jet:before{content:"\\f0fb"}.fa-beer:before{content:"\\f0fc"}.fa-h-square:before{content:"\\f0fd"}.fa-plus-square:before{content:"\\f0fe"}.fa-angle-double-left:before{content:"\\f100"}.fa-angle-double-right:before{content:"\\f101"}.fa-angle-double-up:before{content:"\\f102"}.fa-angle-double-down:before{content:"\\f103"}.fa-angle-left:before{content:"\\f104"}.fa-angle-right:before{content:"\\f105"}.fa-angle-up:before{content:"\\f106"}.fa-angle-down:before{content:"\\f107"}.fa-desktop:before{content:"\\f108"}.fa-laptop:before{content:"\\f109"}.fa-tablet:before{content:"\\f10a"}.fa-mobile-phone:before,.fa-mobile:before{content:"\\f10b"}.fa-circle-o:before{content:"\\f10c"}.fa-quote-left:before{content:"\\f10d"}.fa-quote-right:before{content:"\\f10e"}.fa-spinner:before{content:"\\f110"}.fa-circle:before{content:"\\f111"}.fa-mail-reply:before,.fa-reply:before{content:"\\f112"}.fa-github-alt:before{content:"\\f113"}.fa-folder-o:before{content:"\\f114"}.fa-folder-open-o:before{content:"\\f115"}.fa-smile-o:before{content:"\\f118"}.fa-frown-o:before{content:"\\f119"}.fa-meh-o:before{content:"\\f11a"}.fa-gamepad:before{content:"\\f11b"}.fa-keyboard-o:before{content:"\\f11c"}.fa-flag-o:before{content:"\\f11d"}.fa-flag-checkered:before{content:"\\f11e"}.fa-terminal:before{content:"\\f120"}.fa-code:before{content:"\\f121"}.fa-mail-reply-all:before,.fa-reply-all:before{content:"\\f122"}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before{content:"\\f123"}.fa-location-arrow:before{content:"\\f124"}.fa-crop:before{content:"\\f125"}.fa-code-fork:before{content:"\\f126"}.fa-unlink:before,.fa-chain-broken:before{content:"\\f127"}.fa-question:before{content:"\\f128"}.fa-info:before{content:"\\f129"}.fa-exclamation:before{content:"\\f12a"}.fa-superscript:before{content:"\\f12b"}.fa-subscript:before{content:"\\f12c"}.fa-eraser:before{content:"\\f12d"}.fa-puzzle-piece:before{content:"\\f12e"}.fa-microphone:before{content:"\\f130"}.fa-microphone-slash:before{content:"\\f131"}.fa-shield:before{content:"\\f132"}.fa-calendar-o:before{content:"\\f133"}.fa-fire-extinguisher:before{content:"\\f134"}.fa-rocket:before{content:"\\f135"}.fa-maxcdn:before{content:"\\f136"}.fa-chevron-circle-left:before{content:"\\f137"}.fa-chevron-circle-right:before{content:"\\f138"}.fa-chevron-circle-up:before{content:"\\f139"}.fa-chevron-circle-down:before{content:"\\f13a"}.fa-html5:before{content:"\\f13b"}.fa-css3:before{content:"\\f13c"}.fa-anchor:before{content:"\\f13d"}.fa-unlock-alt:before{content:"\\f13e"}.fa-bullseye:before{content:"\\f140"}.fa-ellipsis-h:before{content:"\\f141"}.fa-ellipsis-v:before{content:"\\f142"}.fa-rss-square:before{content:"\\f143"}.fa-play-circle:before{content:"\\f144"}.fa-ticket:before{content:"\\f145"}.fa-minus-square:before{content:"\\f146"}.fa-minus-square-o:before{content:"\\f147"}.fa-level-up:before{content:"\\f148"}.fa-level-down:before{content:"\\f149"}.fa-check-square:before{content:"\\f14a"}.fa-pencil-square:before{content:"\\f14b"}.fa-external-link-square:before{content:"\\f14c"}.fa-share-square:before{content:"\\f14d"}.fa-compass:before{content:"\\f14e"}.fa-toggle-down:before,.fa-caret-square-o-down:before{content:"\\f150"}.fa-toggle-up:before,.fa-caret-square-o-up:before{content:"\\f151"}.fa-toggle-right:before,.fa-caret-square-o-right:before{content:"\\f152"}.fa-euro:before,.fa-eur:before{content:"\\f153"}.fa-gbp:before{content:"\\f154"}.fa-dollar:before,.fa-usd:before{content:"\\f155"}.fa-rupee:before,.fa-inr:before{content:"\\f156"}.fa-cny:before,.fa-rmb:before,.fa-yen:before,.fa-jpy:before{content:"\\f157"}.fa-ruble:before,.fa-rouble:before,.fa-rub:before{content:"\\f158"}.fa-won:before,.fa-krw:before{content:"\\f159"}.fa-bitcoin:before,.fa-btc:before{content:"\\f15a"}.fa-file:before{content:"\\f15b"}.fa-file-text:before{content:"\\f15c"}.fa-sort-alpha-asc:before{content:"\\f15d"}.fa-sort-alpha-desc:before{content:"\\f15e"}.fa-sort-amount-asc:before{content:"\\f160"}.fa-sort-amount-desc:before{content:"\\f161"}.fa-sort-numeric-asc:before{content:"\\f162"}.fa-sort-numeric-desc:before{content:"\\f163"}.fa-thumbs-up:before{content:"\\f164"}.fa-thumbs-down:before{content:"\\f165"}.fa-youtube-square:before{content:"\\f166"}.fa-youtube:before{content:"\\f167"}.fa-xing:before{content:"\\f168"}.fa-xing-square:before{content:"\\f169"}.fa-youtube-play:before{content:"\\f16a"}.fa-dropbox:before{content:"\\f16b"}.fa-stack-overflow:before{content:"\\f16c"}.fa-instagram:before{content:"\\f16d"}.fa-flickr:before{content:"\\f16e"}.fa-adn:before{content:"\\f170"}.fa-bitbucket:before{content:"\\f171"}.fa-bitbucket-square:before{content:"\\f172"}.fa-tumblr:before{content:"\\f173"}.fa-tumblr-square:before{content:"\\f174"}.fa-long-arrow-down:before{content:"\\f175"}.fa-long-arrow-up:before{content:"\\f176"}.fa-long-arrow-left:before{content:"\\f177"}.fa-long-arrow-right:before{content:"\\f178"}.fa-apple:before{content:"\\f179"}.fa-windows:before{content:"\\f17a"}.fa-android:before{content:"\\f17b"}.fa-linux:before{content:"\\f17c"}.fa-dribbble:before{content:"\\f17d"}.fa-skype:before{content:"\\f17e"}.fa-foursquare:before{content:"\\f180"}.fa-trello:before{content:"\\f181"}.fa-female:before{content:"\\f182"}.fa-male:before{content:"\\f183"}.fa-gittip:before,.fa-gratipay:before{content:"\\f184"}.fa-sun-o:before{content:"\\f185"}.fa-moon-o:before{content:"\\f186"}.fa-archive:before{content:"\\f187"}.fa-bug:before{content:"\\f188"}.fa-vk:before{content:"\\f189"}.fa-weibo:before{content:"\\f18a"}.fa-renren:before{content:"\\f18b"}.fa-pagelines:before{content:"\\f18c"}.fa-stack-exchange:before{content:"\\f18d"}.fa-arrow-circle-o-right:before{content:"\\f18e"}.fa-arrow-circle-o-left:before{content:"\\f190"}.fa-toggle-left:before,.fa-caret-square-o-left:before{content:"\\f191"}.fa-dot-circle-o:before{content:"\\f192"}.fa-wheelchair:before{content:"\\f193"}.fa-vimeo-square:before{content:"\\f194"}.fa-turkish-lira:before,.fa-try:before{content:"\\f195"}.fa-plus-square-o:before{content:"\\f196"}.fa-space-shuttle:before{content:"\\f197"}.fa-slack:before{content:"\\f198"}.fa-envelope-square:before{content:"\\f199"}.fa-wordpress:before{content:"\\f19a"}.fa-openid:before{content:"\\f19b"}.fa-institution:before,.fa-bank:before,.fa-university:before{content:"\\f19c"}.fa-mortar-board:before,.fa-graduation-cap:before{content:"\\f19d"}.fa-yahoo:before{content:"\\f19e"}.fa-google:before{content:"\\f1a0"}.fa-reddit:before{content:"\\f1a1"}.fa-reddit-square:before{content:"\\f1a2"}.fa-stumbleupon-circle:before{content:"\\f1a3"}.fa-stumbleupon:before{content:"\\f1a4"}.fa-delicious:before{content:"\\f1a5"}.fa-digg:before{content:"\\f1a6"}.fa-pied-piper:before{content:"\\f1a7"}.fa-pied-piper-alt:before{content:"\\f1a8"}.fa-drupal:before{content:"\\f1a9"}.fa-joomla:before{content:"\\f1aa"}.fa-language:before{content:"\\f1ab"}.fa-fax:before{content:"\\f1ac"}.fa-building:before{content:"\\f1ad"}.fa-child:before{content:"\\f1ae"}.fa-paw:before{content:"\\f1b0"}.fa-spoon:before{content:"\\f1b1"}.fa-cube:before{content:"\\f1b2"}.fa-cubes:before{content:"\\f1b3"}.fa-behance:before{content:"\\f1b4"}.fa-behance-square:before{content:"\\f1b5"}.fa-steam:before{content:"\\f1b6"}.fa-steam-square:before{content:"\\f1b7"}.fa-recycle:before{content:"\\f1b8"}.fa-automobile:before,.fa-car:before{content:"\\f1b9"}.fa-cab:before,.fa-taxi:before{content:"\\f1ba"}.fa-tree:before{content:"\\f1bb"}.fa-spotify:before{content:"\\f1bc"}.fa-deviantart:before{content:"\\f1bd"}.fa-soundcloud:before{content:"\\f1be"}.fa-database:before{content:"\\f1c0"}.fa-file-pdf-o:before{content:"\\f1c1"}.fa-file-word-o:before{content:"\\f1c2"}.fa-file-excel-o:before{content:"\\f1c3"}.fa-file-powerpoint-o:before{content:"\\f1c4"}.fa-file-photo-o:before,.fa-file-picture-o:before,.fa-file-image-o:before{content:"\\f1c5"}.fa-file-zip-o:before,.fa-file-archive-o:before{content:"\\f1c6"}.fa-file-sound-o:before,.fa-file-audio-o:before{content:"\\f1c7"}.fa-file-movie-o:before,.fa-file-video-o:before{content:"\\f1c8"}.fa-file-code-o:before{content:"\\f1c9"}.fa-vine:before{content:"\\f1ca"}.fa-codepen:before{content:"\\f1cb"}.fa-jsfiddle:before{content:"\\f1cc"}.fa-life-bouy:before,.fa-life-buoy:before,.fa-life-saver:before,.fa-support:before,.fa-life-ring:before{content:"\\f1cd"}.fa-circle-o-notch:before{content:"\\f1ce"}.fa-ra:before,.fa-rebel:before{content:"\\f1d0"}.fa-ge:before,.fa-empire:before{content:"\\f1d1"}.fa-git-square:before{content:"\\f1d2"}.fa-git:before{content:"\\f1d3"}.fa-hacker-news:before{content:"\\f1d4"}.fa-tencent-weibo:before{content:"\\f1d5"}.fa-qq:before{content:"\\f1d6"}.fa-wechat:before,.fa-weixin:before{content:"\\f1d7"}.fa-send:before,.fa-paper-plane:before{content:"\\f1d8"}.fa-send-o:before,.fa-paper-plane-o:before{content:"\\f1d9"}.fa-history:before{content:"\\f1da"}.fa-genderless:before,.fa-circle-thin:before{content:"\\f1db"}.fa-header:before{content:"\\f1dc"}.fa-paragraph:before{content:"\\f1dd"}.fa-sliders:before{content:"\\f1de"}.fa-share-alt:before{content:"\\f1e0"}.fa-share-alt-square:before{content:"\\f1e1"}.fa-bomb:before{content:"\\f1e2"}.fa-soccer-ball-o:before,.fa-futbol-o:before{content:"\\f1e3"}.fa-tty:before{content:"\\f1e4"}.fa-binoculars:before{content:"\\f1e5"}.fa-plug:before{content:"\\f1e6"}.fa-slideshare:before{content:"\\f1e7"}.fa-twitch:before{content:"\\f1e8"}.fa-yelp:before{content:"\\f1e9"}.fa-newspaper-o:before{content:"\\f1ea"}.fa-wifi:before{content:"\\f1eb"}.fa-calculator:before{content:"\\f1ec"}.fa-paypal:before{content:"\\f1ed"}.fa-google-wallet:before{content:"\\f1ee"}.fa-cc-visa:before{content:"\\f1f0"}.fa-cc-mastercard:before{content:"\\f1f1"}.fa-cc-discover:before{content:"\\f1f2"}.fa-cc-amex:before{content:"\\f1f3"}.fa-cc-paypal:before{content:"\\f1f4"}.fa-cc-stripe:before{content:"\\f1f5"}.fa-bell-slash:before{content:"\\f1f6"}.fa-bell-slash-o:before{content:"\\f1f7"}.fa-trash:before{content:"\\f1f8"}.fa-copyright:before{content:"\\f1f9"}.fa-at:before{content:"\\f1fa"}.fa-eyedropper:before{content:"\\f1fb"}.fa-paint-brush:before{content:"\\f1fc"}.fa-birthday-cake:before{content:"\\f1fd"}.fa-area-chart:before{content:"\\f1fe"}.fa-pie-chart:before{content:"\\f200"}.fa-line-chart:before{content:"\\f201"}.fa-lastfm:before{content:"\\f202"}.fa-lastfm-square:before{content:"\\f203"}.fa-toggle-off:before{content:"\\f204"}.fa-toggle-on:before{content:"\\f205"}.fa-bicycle:before{content:"\\f206"}.fa-bus:before{content:"\\f207"}.fa-ioxhost:before{content:"\\f208"}.fa-angellist:before{content:"\\f209"}.fa-cc:before{content:"\\f20a"}.fa-shekel:before,.fa-sheqel:before,.fa-ils:before{content:"\\f20b"}.fa-meanpath:before{content:"\\f20c"}.fa-buysellads:before{content:"\\f20d"}.fa-connectdevelop:before{content:"\\f20e"}.fa-dashcube:before{content:"\\f210"}.fa-forumbee:before{content:"\\f211"}.fa-leanpub:before{content:"\\f212"}.fa-sellsy:before{content:"\\f213"}.fa-shirtsinbulk:before{content:"\\f214"}.fa-simplybuilt:before{content:"\\f215"}.fa-skyatlas:before{content:"\\f216"}.fa-cart-plus:before{content:"\\f217"}.fa-cart-arrow-down:before{content:"\\f218"}.fa-diamond:before{content:"\\f219"}.fa-ship:before{content:"\\f21a"}.fa-user-secret:before{content:"\\f21b"}.fa-motorcycle:before{content:"\\f21c"}.fa-street-view:before{content:"\\f21d"}.fa-heartbeat:before{content:"\\f21e"}.fa-venus:before{content:"\\f221"}.fa-mars:before{content:"\\f222"}.fa-mercury:before{content:"\\f223"}.fa-transgender:before{content:"\\f224"}.fa-transgender-alt:before{content:"\\f225"}.fa-venus-double:before{content:"\\f226"}.fa-mars-double:before{content:"\\f227"}.fa-venus-mars:before{content:"\\f228"}.fa-mars-stroke:before{content:"\\f229"}.fa-mars-stroke-v:before{content:"\\f22a"}.fa-mars-stroke-h:before{content:"\\f22b"}.fa-neuter:before{content:"\\f22c"}.fa-facebook-official:before{content:"\\f230"}.fa-pinterest-p:before{content:"\\f231"}.fa-whatsapp:before{content:"\\f232"}.fa-server:before{content:"\\f233"}.fa-user-plus:before{content:"\\f234"}.fa-user-times:before{content:"\\f235"}.fa-hotel:before,.fa-bed:before{content:"\\f236"}.fa-viacoin:before{content:"\\f237"}.fa-train:before{content:"\\f238"}.fa-subway:before{content:"\\f239"}.fa-medium:before{content:"\\f23a"}',""])},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,'.music-chart-info{font:2.5vmin "Source Sans Pro","Segoe UI","Helvetica Neue",sans-serif}.music-chart-info--title{font-size:2em;font-weight:700}.music-chart-info--subtitle{font-size:1.5em;color:rgba(0,0,0,.6);font-weight:700}.music-chart-info--artist>small{font-size:1em;color:rgba(0,0,0,.6)}',""])},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".music-chart-selector-item{list-style:none;border:2px solid #8ac;height:12vmin;line-height:12vmin;font-size:5vmin;text-align:center;background:rgba(255,255,255,.8);border-radius:2vmin;cursor:pointer;position:relative}.music-chart-selector-item.is-active{background:#8ac;color:#fff;-webkit-animation:3s music-chart-selector-item--active-animation infinite;animation:3s music-chart-selector-item--active-animation infinite}.music-chart-selector-item.is-insane{border-color:#c66}.music-chart-selector-item.is-insane.is-active{background:#c66;-webkit-animation:3s music-chart-selector-item--active-animation--insane infinite;animation:3s music-chart-selector-item--active-animation--insane infinite}.music-chart-selector-item--level{opacity:1;transition:.3s opacity}.music-chart-selector-item--play{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);opacity:0;transition:.3s opacity}.music-chart-selector-item:not(.is-tutorial).is-active:hover .music-chart-selector-item--play{opacity:1}.music-chart-selector-item:not(.is-tutorial).is-active:hover .music-chart-selector-item--level{opacity:0}@-webkit-keyframes music-chart-selector-item--active-animation{0%{background:#acc3db}50%{background:#6491bd}100%{background:#acc3db}}@keyframes music-chart-selector-item--active-animation{0%{background:#acc3db}50%{background:#6491bd}100%{background:#acc3db}}@-webkit-keyframes music-chart-selector-item--active-animation--insane{0%{background:#d98c8c}50%{background:#bf4040}100%{background:#d98c8c}}@keyframes music-chart-selector-item--active-animation--insane{0%{background:#d98c8c}50%{background:#bf4040}100%{background:#d98c8c}}",""])},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".result-grade{display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;border:2px dashed rgba(255,255,255,.5);border-radius:1em;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.result-grade--label{position:absolute;right:0;bottom:0;left:0;color:rgba(255,255,255,.5);text-align:center}.result-grade--grade{font-weight:700;font-size:18vh;color:#ff9;position:relative;top:-.2ex;text-shadow:3px 3px 0 rgba(0,0,0,.3);-webkit-animation:.3s result-grade--animation linear;animation:.3s result-grade--animation linear;-webkit-animation-delay:2s;animation-delay:2s;-webkit-animation-fill-mode:backwards;animation-fill-mode:backwards}@-webkit-keyframes result-grade--animation{0%{opacity:0;-webkit-transform:scale(2);transform:scale(2)}80%{-webkit-transform:scale(.85);transform:scale(.85)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes result-grade--animation{0%{opacity:0;-webkit-transform:scale(2);transform:scale(2)}80%{-webkit-transform:scale(.85);transform:scale(.85)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}",""])},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".result-scene{background:url("+n(324)+") center no-repeat;background-size:cover;color:#000}.result-scene--report{position:absolute;top:25vmin;right:52vw;bottom:3vmin;left:5vw}.result-scene--information{background:rgba(255,255,255,.8);position:absolute;top:0;right:5vw;bottom:0;left:52vw;padding-top:25vmin}.result-scene .music-chart-info{margin:0 2vw}.result-scene .result-grade{position:absolute;bottom:12vh;right:52vw;width:20vh;height:20vh}.result-scene--chart{float:right;margin-right:2vw}.result-scene .music-chart-selector-item{width:12vmin}.result-scene--exit{position:absolute;right:2vw;bottom:12vh;left:2vw;background:#5a5;border:2px solid #4d994d;text-align:center;font-size:5vmin;color:#fff;padding:1ex;cursor:pointer;border-radius:2vmin}",""])},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".result-table table{width:100%;margin-bottom:1ex;text-shadow:2px 2px 0 rgba(0,0,0,.2)}.result-table th,.result-table td{font-size:4vh;font-weight:400}.result-table td{text-align:right;width:45%;color:#fff}.result-table th{text-align:left;padding-left:1ex;color:rgba(255,255,255,.7)}.result-table table.result-table--total th,.result-table table.result-table--total td{font-weight:700}",""])},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".loading-scene-progress-bar{border:1px solid rgba(0,0,0,.6);padding:1px}.loading-scene-progress-bar--bar{height:8px;background:rgba(0,0,0,.6);width:0%}",""])},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".loading-scene-progress{color:#333;font-size:11px}.loading-scene-progress .loading-scene-progress-bar{display:inline-block;vertical-align:middle;width:48px;margin-right:4px;position:relative;top:-1px}.loading-scene-progress--extra{font-size:83%;opacity:.7}",""])},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".loading-scene-song-info{background:rgba(255,255,255,.96);color:#191817;text-align:center;padding:25px 0;box-shadow:0 2px 18px rgba(0,0,0,.2)}.loading-scene-song-info--genre{font-size:3vmin}.loading-scene-song-info--title{font-size:8vmin;font-weight:700}.loading-scene-song-info--subtitle{font-size:6vmin}.loading-scene-song-info--artist{font-size:4vmin;margin-top:.8ex}.loading-scene-song-info--subartist{font-size:2.5vmin}",""])},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,".loading-scene{background:url("+n(235)+") center no-repeat;background-size:cover}.loading-scene--info{position:absolute;top:40%;left:0;right:0;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.loading-scene .loading-scene-song-info{-webkit-animation:loading-scene--loading-scene-song-info--animation 1s ease;animation:loading-scene--loading-scene-song-info--animation 1s ease}.loading-scene .loading-scene-progress{position:absolute;bottom:10px;left:10px}.loading-scene--flash{background:#fff;-webkit-animation:loading-scene--flash-animation .8s ease-out;animation:loading-scene--flash-animation .8s ease-out}.loading-scene--flash,.loading-scene--cover{position:absolute;top:0;right:0;bottom:0;left:0;opacity:0;pointer-events:none}.loading-scene--cover{background:#000}.scene.is-exiting .loading-scene--info{-webkit-animation:loading-scene--info-exit .3s linear;animation:loading-scene--info-exit .3s linear}.scene.is-exiting .loading-scene--flash{-webkit-animation:loading-scene--flash-exit .3s ease;animation:loading-scene--flash-exit .3s ease}.scene.is-exiting .loading-scene--cover{-webkit-animation:loading-scene--cover-exit .3s linear;animation:loading-scene--cover-exit .3s linear;opacity:1}@-webkit-keyframes loading-scene--loading-scene-song-info--animation{0%{-webkit-transform:scale(1.5,.02);transform:scale(1.5,.02)}100%{-webkit-transform:scale(1,1);transform:scale(1,1)}}@keyframes loading-scene--loading-scene-song-info--animation{0%{-webkit-transform:scale(1.5,.02);transform:scale(1.5,.02)}100%{-webkit-transform:scale(1,1);transform:scale(1,1)}}@-webkit-keyframes loading-scene--info-exit{0%{-webkit-transform:translateY(-50%)scale(1,1);transform:translateY(-50%)scale(1,1)}100%{-webkit-transform:translateY(-50%)scale(2,2);transform:translateY(-50%)scale(2,2)}}@keyframes loading-scene--info-exit{0%{-webkit-transform:translateY(-50%)scale(1,1);transform:translateY(-50%)scale(1,1)}100%{-webkit-transform:translateY(-50%)scale(2,2);transform:translateY(-50%)scale(2,2)}}@-webkit-keyframes loading-scene--cover-exit{0%{opacity:0}100%{opacity:1}}@keyframes loading-scene--cover-exit{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes loading-scene--flash-animation{0%{opacity:1}100%{opacity:0}}@keyframes loading-scene--flash-animation{0%{opacity:1}100%{opacity:0}}@-webkit-keyframes loading-scene--flash-exit{0%{opacity:.5}100%{opacity:0}}@keyframes loading-scene--flash-exit{0%{opacity:.5}100%{opacity:0}}",""]);

},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,"",""])},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,'.scene-heading{box-shadow:0 .1vh 3vh rgba(0,0,0,.1);background:#fff;margin:0;padding:0 5vw;font:700 9vmin/16vmin "Source Sans Pro","Segoe UI","Helvetica Neue",sans-serif;color:#000}',""])},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,'.scene-toolbar{background:rgba(0,0,0,.7);overflow:hidden;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0 1vw;font-size:15px}.scene-toolbar>a,.scene-toolbar>span{display:block;padding:.8ex 1.3ex}.scene-toolbar>a{color:rgba(255,255,255,.8);text-decoration:none;background:0 0;transition:.1s background,.1s color}.scene-toolbar>a:hover{background:rgba(0,0,0,.5);color:#fff}.scene-toolbar>a[data-position="right"]{float:right}.scene-toolbar>span{color:rgba(255,255,255,.6)}.scene-toolbar--spacer{-webkit-flex:1;-ms-flex:1;flex:1}',""])},function(t,e,n){t.exports=n.p+"0cfe6fe9284bd4c4fcc04d66ee85c398.jpg"},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++)if(t[n].name===e)return n;return-1}function i(t){return this instanceof i?(this.properties=[],void(t&&this.load(t))):new i(t)}var o=n(236),a=n(364);i.prototype.dispose=function(){this.properties.forEach(function(t){t.dispose()}),this.properties.length=0},i.prototype.addProperty=function(t){this.properties.push(new a(t))},i.prototype.duration=function(){for(var t=0,e=0;e<this.properties.length;e++)for(var n=this.properties[e],r=n.keyframes.frames,i=0;i<r.length;i++)t=Math.max(r[i].time,t);return t},i.prototype.property=function(t){var e="number"==typeof t?t:r(this.properties,t);return 0>e?void 0:this.properties[e]},i.prototype.load=function(t){this.dispose(),t&&(this.properties=t.map(function(t){return new a(t)}))},i.prototype["export"]=function(){return this.properties.map(function(t){return t["export"]()})},i.prototype.ease=function(t,e){return e},i.prototype.interpolate=function(t,e,n,r){return o(e.value,n.value,r)},i.prototype.valueOf=function(t,e){var n=e.keyframes,r=n.interpolation(t),i=r[0],o=r[1],a=r[2];if(-1===i||-1===o)return e.value;var s=n.frames[i],u=n.frames[o];if(i===o)return s.value;var c=u.ease;return c&&(a=this.ease(c,a)),this.interpolate(e,s,u,a)},i.prototype.values=function(t,e){e||(e={});for(var n=0;n<this.properties.length;n++){var r=this.properties[n];e[r.name]=this.valueOf(t,r)}return e},t.exports=i},function(t,e,n){function r(t){return this instanceof r?void a.call(this,t):new r(t)}var i=n(344),o=n(358),a=n(325);o(r,a),r.prototype.ease=function(t,e){return i[t](e)},t.exports=r},function(t,e,n){function r(t){var e=2.5949095;return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}t.exports=r},function(t,e,n){function r(t){var e=1.70158;return t*t*((e+1)*t-e)}t.exports=r},function(t,e,n){function r(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}t.exports=r},function(t,e,n){function r(t){return.5>t?.5*(1-i(1-2*t)):.5*i(2*t-1)+.5}var i=n(129);t.exports=r},function(t,e,n){function r(t){return 1-i(1-t)}var i=n(129);t.exports=r},function(t,e,n){function r(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}t.exports=r},function(t,e,n){function r(t){return 1-Math.sqrt(1-t*t)}t.exports=r},function(t,e,n){function r(t){return Math.sqrt(1- --t*t)}t.exports=r},function(t,e,n){function r(t){return.5>t?4*t*t*t:.5*Math.pow(2*t-2,3)+1}t.exports=r},function(t,e,n){function r(t){return t*t*t}t.exports=r},function(t,e,n){function r(t){var e=t-1;return e*e*e+1}t.exports=r},function(t,e,n){function r(t){return.5>t?.5*Math.sin(13*Math.PI/2*2*t)*Math.pow(2,10*(2*t-1)):.5*Math.sin(-13*Math.PI/2*(2*t-1+1))*Math.pow(2,-10*(2*t-1))+1}t.exports=r},function(t,e,n){function r(t){return Math.sin(13*t*Math.PI/2)*Math.pow(2,10*(t-1))}t.exports=r},function(t,e,n){function r(t){return Math.sin(-13*(t+1)*Math.PI/2)*Math.pow(2,-10*t)+1}t.exports=r},function(t,e,n){function r(t){return 0===t||1===t?t:.5>t?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-20*t)+1}t.exports=r},function(t,e,n){function r(t){return 0===t?t:Math.pow(2,10*(t-1))}t.exports=r},function(t,e,n){function r(t){return 1===t?t:1-Math.pow(2,-10*t)}t.exports=r},function(t,e,n){t.exports={backInOut:n(327),backIn:n(328),backOut:n(329),bounceInOut:n(330),bounceIn:n(331),bounceOut:n(129),circInOut:n(332),circIn:n(333),circOut:n(334),cubicInOut:n(335),cubicIn:n(336),cubicOut:n(337),elasticInOut:n(338),elasticIn:n(339),elasticOut:n(340),expoInOut:n(341),expoIn:n(342),expoOut:n(343),linear:n(345),quadInOut:n(346),quadIn:n(347),quadOut:n(348),quartInOut:n(349),quartIn:n(350),quartOut:n(351),quintInOut:n(352),quintIn:n(353),quintOut:n(354),sineInOut:n(355),sineIn:n(356),sineOut:n(357)}},function(t,e,n){function r(t){return t}t.exports=r},function(t,e,n){function r(t){return t/=.5,1>t?.5*t*t:(t--,-.5*(t*(t-2)-1))}t.exports=r},function(t,e,n){function r(t){return t*t}t.exports=r},function(t,e,n){function r(t){return-t*(t-2)}t.exports=r},function(t,e,n){function r(t){return.5>t?8*Math.pow(t,4):-8*Math.pow(t-1,4)+1}t.exports=r},function(t,e,n){function r(t){return Math.pow(t,4)}t.exports=r},function(t,e,n){function r(t){return Math.pow(t-1,3)*(1-t)+1}t.exports=r},function(t,e,n){function r(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}t.exports=r},function(t,e,n){function r(t){return t*t*t*t*t}t.exports=r},function(t,e,n){function r(t){return--t*t*t*t*t+1}t.exports=r},function(t,e,n){function r(t){return-.5*(Math.cos(Math.PI*t)-1)}t.exports=r},function(t,e,n){function r(t){return 1-Math.cos(t*Math.PI/2)}t.exports=r},function(t,e,n){function r(t){return Math.sin(t*Math.PI/2)}t.exports=r},function(t,e,n){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){function r(t,e){return t.time-e.time}function i(t,e){return this instanceof i?(this.frames=t||[],void(e||this.sort())):new i(t,e)}var o=n(236),a=n(361),s=n(360),u=[0,0,0];i.prototype.nearestIndex=function(t,e){e="number"==typeof e?e:Number.MAX_VALUE;for(var n=Number.MAX_VALUE,r=-1,i=0;i<this.frames.length;i++){var o=Math.abs(this.frames[i].time-t);n>o&&e>=o&&(n=o,r=i)}return r},i.prototype.nearest=function(t,e){var n=this.nearestIndex(t,e);return-1===n?null:this.frames[n]},i.prototype.get=function(t){return this.nearest(t,0)},i.prototype.getIndex=function(t){return this.nearestIndex(t,0)},i.prototype.value=function(t,e){var n=this.interpolation(t);if(-1===n[0]||-1===n[1])return null;var r=this.frames[n[0]],i=this.frames[n[1]],a=n[2];return"function"==typeof e?e(r,i,a):o(r.value,i.value,a)},i.prototype.interpolation=function(t){if(0===this.frames.length)return s(u,-1,-1,0);for(var e=-1,n=this.frames.length-1;n>=0;n--)if(t>=this.frames[n].time){e=n;break}if(-1===e||e===this.frames.length-1)return 0>e&&(e=0),s(u,e,e,0);var r=this.frames[e],i=this.frames[e+1];t=Math.max(r.time,Math.min(t,i.time));var o=a(r.time,i.time,t);return s(u,e,e+1,o)},i.prototype.next=function(t){if(this.frames.length<1)return null;for(var e=-1,n=0;n<this.frames.length;n++)if(t<this.frames[n].time){e=n;break}return-1===e?null:this.frames[e]},i.prototype.previous=function(t){if(this.frames.length<1)return null;for(var e=-1,n=this.frames.length-1;n>=0;n--)if(t>this.frames[n].time){e=n;break}return-1===e?null:this.frames[e]},i.prototype.add=function(t){this.frames.push(t),this.sort()},i.prototype.splice=function(t,e,n){this.frames.splice.apply(this.frames,arguments),arguments.length>2&&this.sort()},i.prototype.sort=function(){this.frames.sort(r)},i.prototype.clear=function(){this.frames.length=0},Object.defineProperty(i.prototype,"count",{get:function(){return this.frames.length}}),t.exports=i},function(t,e,n){function r(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}t.exports=r},function(t,e,n){t.exports=function(t,e,n){return(n-t)/(e-t)}},function(t,e,n){function r(t,e,n){return t*(1-n)+e*n}t.exports=r},function(t,e,n){function r(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}t.exports=r},function(t,e,n){function r(t){return this instanceof r?(this.keyframes=i(),this.value=null,this.name="",void(t&&this.load(t))):new r(t)}var i=n(359),o=n(363);r.prototype.dispose=function(){this.keyframes.clear()},r.prototype["export"]=function(){return o(this,{keyframes:this.keyframes.frames})},r.prototype.load=function(t){if(this.dispose(),t)for(var e in t)t.hasOwnProperty(e)&&("keyframes"===e?this.keyframes.frames=t.keyframes:this[e]=t[e])},t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){Object.defineProperty(t,e,{get:function(){var t=n.call(this);return Object.defineProperty(this,e,{value:t,enumerable:!!r,writable:!0}),t},set:function(t){return Object.defineProperty(this,e,{value:t,enumerable:!!r,writable:!0}),t},enumerable:!!r,configurable:!0})}t.exports=r},function(t,e,n){t.exports=function(){function t(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function e(t,e,n,r,i,o){this.message=t,this.expected=e,this.found=n,this.offset=r,this.line=i,this.column=o,this.name="SyntaxError"}function n(t){function n(){return t.substring(gt,vt)}function r(e){function n(e,n,r){var i,o;for(i=n;r>i;i++)o=t.charAt(i),"\n"===o?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return yt!==e&&(yt>e&&(yt=0,bt={line:1,column:1,seenCR:!1}),n(bt,yt,e),yt=e),bt}function i(t){_t>vt||(vt>_t&&(_t=vt,wt=[]),wt.push(t))}function o(n,i,o){function a(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function s(t,e){function n(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}var r,i,o,a=new Array(t.length);for(o=0;o<t.length;o++)a[o]=t[o].description;return r=t.length>1?a.slice(0,-1).join(", ")+" or "+a[t.length-1]:a[0],i=e?'"'+n(e)+'"':"end of input","Expected "+r+" but "+i+" found."}var u=r(o),c=o<t.length?t.charAt(o):null;return null!==i&&a(i),new e(null!==n?n:s(i,c),i,c,o,u.line,u.column)}function a(){var t;return t=s()}function s(){var e,n,r,o,a,s,c,l;if(e=vt,n=u(),n!==x){for(r=[],o=vt,a=g(),a!==x?(t.substr(vt,2)===S?(s=S,vt+=2):(s=x,0===xt&&i(A)),s!==x?(c=g(),c!==x?(l=u(),l!==x?(a=[a,s,c,l],o=a):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C);o!==x;)r.push(o),o=vt,a=g(),a!==x?(t.substr(vt,2)===S?(s=S,vt+=2):(s=x,0===xt&&i(A)),s!==x?(c=g(),c!==x?(l=u(),l!==x?(a=[a,s,c,l],o=a):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C);r!==x?(gt=e,n=k(n,r),e=n):(vt=e,e=C)}else vt=e,e=C;return e}function u(){var e,n,r,o,a,s,u,l;if(e=vt,n=c(),n!==x){for(r=[],o=vt,a=g(),a!==x?(t.substr(vt,2)===O?(s=O,vt+=2):(s=x,0===xt&&i(j)),s!==x?(u=g(),u!==x?(l=c(),l!==x?(a=[a,s,u,l],o=a):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C);o!==x;)r.push(o),o=vt,a=g(),a!==x?(t.substr(vt,2)===O?(s=O,vt+=2):(s=x,0===xt&&i(j)),s!==x?(u=g(),u!==x?(l=c(),l!==x?(a=[a,s,u,l],o=a):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C);r!==x?(gt=e,n=k(n,r),e=n):(vt=e,e=C)}else vt=e,e=C;return e}function c(){var e,n,r,o,a,s,u,c;if(e=vt,n=l(),n!==x){for(r=[],o=vt,a=g(),a!==x?(43===t.charCodeAt(vt)?(s=M,vt++):(s=x,0===xt&&i(R)),s===x&&(45===t.charCodeAt(vt)?(s=N,vt++):(s=x,0===xt&&i(P))),s!==x?(u=g(),u!==x?(c=l(),c!==x?(a=[a,s,u,c],o=a):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C);o!==x;)r.push(o),o=vt,a=g(),a!==x?(43===t.charCodeAt(vt)?(s=M,vt++):(s=x,0===xt&&i(R)),s===x&&(45===t.charCodeAt(vt)?(s=N,vt++):(s=x,0===xt&&i(P))),s!==x?(u=g(),u!==x?(c=l(),c!==x?(a=[a,s,u,c],o=a):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C);r!==x?(gt=e,n=k(n,r),e=n):(vt=e,e=C)}else vt=e,e=C;return e}function l(){var e,n,r,o,a,s,u,c;if(e=vt,n=f(),n!==x){for(r=[],o=vt,a=g(),a!==x?(42===t.charCodeAt(vt)?(s=I,vt++):(s=x,0===xt&&i(D)),s===x&&(47===t.charCodeAt(vt)?(s=L,vt++):(s=x,0===xt&&i(F)),s===x&&(37===t.charCodeAt(vt)?(s=B,vt++):(s=x,0===xt&&i(U)))),s!==x?(u=g(),u!==x?(c=f(),c!==x?(a=[a,s,u,c],o=a):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C);o!==x;)r.push(o),o=vt,a=g(),a!==x?(42===t.charCodeAt(vt)?(s=I,vt++):(s=x,0===xt&&i(D)),s===x&&(47===t.charCodeAt(vt)?(s=L,vt++):(s=x,0===xt&&i(F)),s===x&&(37===t.charCodeAt(vt)?(s=B,vt++):(s=x,0===xt&&i(U)))),s!==x?(u=g(),u!==x?(c=f(),c!==x?(a=[a,s,u,c],o=a):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C)):(vt=o,o=C);r!==x?(gt=e,n=k(n,r),e=n):(vt=e,e=C)}else vt=e,e=C;return e}function f(){var e,n,r,o,a,u;return e=vt,40===t.charCodeAt(vt)?(n=q,vt++):(n=x,0===xt&&i(V)),n!==x?(r=g(),r!==x?(o=s(),o!==x?(a=g(),a!==x?(41===t.charCodeAt(vt)?(u=W,vt++):(u=x,0===xt&&i(G)),u!==x?(gt=e,n=H(o),e=n):(vt=e,e=C)):(vt=e,e=C)):(vt=e,e=C)):(vt=e,e=C)):(vt=e,e=C),e===x&&(e=vt,33===t.charCodeAt(vt)?(n=z,vt++):(n=x,0===xt&&i(Y)),n!==x?(r=f(),r!==x?(gt=e,n=$(r),e=n):(vt=e,e=C)):(vt=e,e=C),e===x&&(e=h(),e===x&&(e=v()))),e}function h(){var e,n,r,o,a;return xt++,e=vt,45===t.charCodeAt(vt)?(n=N,vt++):(n=x,0===xt&&i(P)),n===x&&(n=J),n!==x?(r=m(),r!==x?(o=d(),o===x&&(o=J),o!==x?(a=p(),a===x&&(a=J),a!==x?(gt=e,n=K(),e=n):(vt=e,e=C)):(vt=e,e=C)):(vt=e,e=C)):(vt=e,e=C),xt--,e===x&&(n=x,0===xt&&i(X)),e}function p(){var e,n,r,o,a;if(e=vt,Q.test(t.charAt(vt))?(n=t.charAt(vt),vt++):(n=x,0===xt&&i(Z)),n!==x)if(45===t.charCodeAt(vt)?(r=N,vt++):(r=x,0===xt&&i(P)),r===x&&(43===t.charCodeAt(vt)?(r=M,vt++):(r=x,0===xt&&i(R))),r===x&&(r=J),r!==x){if(o=[],tt.test(t.charAt(vt))?(a=t.charAt(vt),vt++):(a=x,0===xt&&i(et)),a!==x)for(;a!==x;)o.push(a),tt.test(t.charAt(vt))?(a=t.charAt(vt),vt++):(a=x,0===xt&&i(et));else o=C;o!==x?(n=[n,r,o],e=n):(vt=e,e=C)}else vt=e,e=C;else vt=e,e=C;return e}function d(){var e,n,r,o;if(e=vt,46===t.charCodeAt(vt)?(n=nt,vt++):(n=x,0===xt&&i(rt)),n!==x){if(r=[],tt.test(t.charAt(vt))?(o=t.charAt(vt),vt++):(o=x,0===xt&&i(et)),o!==x)for(;o!==x;)r.push(o),tt.test(t.charAt(vt))?(o=t.charAt(vt),vt++):(o=x,0===xt&&i(et));else r=C;r!==x?(n=[n,r],e=n):(vt=e,e=C)}else vt=e,e=C;return e}function m(){var e,n,r,o;if(48===t.charCodeAt(vt)?(e=it,vt++):(e=x,0===xt&&i(ot)),e===x)if(e=vt,at.test(t.charAt(vt))?(n=t.charAt(vt),vt++):(n=x,0===xt&&i(st)),n!==x){for(r=[],tt.test(t.charAt(vt))?(o=t.charAt(vt),vt++):(o=x,0===xt&&i(et));o!==x;)r.push(o),tt.test(t.charAt(vt))?(o=t.charAt(vt),vt++):(o=x,0===xt&&i(et));r!==x?(n=[n,r],e=n):(vt=e,e=C)}else vt=e,e=C;return e}function v(){var e,n,r,o;if(e=vt,n=[],ut.test(t.charAt(vt))?(r=t.charAt(vt),vt++):(r=x,0===xt&&i(ct)),r!==x)for(;r!==x;)n.push(r),ut.test(t.charAt(vt))?(r=t.charAt(vt),vt++):(r=x,0===xt&&i(ct));else n=C;if(n!==x){for(r=[],lt.test(t.charAt(vt))?(o=t.charAt(vt),vt++):(o=x,0===xt&&i(ft));o!==x;)r.push(o),lt.test(t.charAt(vt))?(o=t.charAt(vt),vt++):(o=x,0===xt&&i(ft));r!==x?(gt=e,n=ht(),e=n):(vt=e,e=C)}else vt=e,e=C;return e}function g(){var e,n;for(xt++,e=[],dt.test(t.charAt(vt))?(n=t.charAt(vt),vt++):(n=x,0===xt&&i(mt));n!==x;)e.push(n),dt.test(t.charAt(vt))?(n=t.charAt(vt),vt++):(n=x,0===xt&&i(mt));return xt--,e===x&&(n=x,0===xt&&i(pt)),e}function y(t){var e=t[1],n=t[3];return" "+e+" "+n}function b(t,e){return t+e.map(y).join("")}var _,w=arguments.length>1?arguments[1]:{},x={},E={expr:a},T=a,C=x,S="||",A={type:"literal",value:"||",description:'"||"'},k=function(t,e){return b(t,e)},O="&&",j={type:"literal",value:"&&",description:'"&&"'},M="+",R={type:"literal",value:"+",description:'"+"'},N="-",P={type:"literal",value:"-",description:'"-"'},I="*",D={type:"literal",value:"*",description:'"*"'},L="/",F={type:"literal",value:"/",description:'"/"'},B="%",U={type:"literal",value:"%",description:'"%"'},q="(",V={type:"literal",value:"(",description:'"("'},W=")",G={type:"literal",value:")",description:'")"'},H=function(t){return"("+t+")"},z="!",Y={type:"literal",value:"!",description:'"!"'},$=function(t){return"!"+t},X={type:"other",description:"number"},J=null,K=function(){return n()},Q=/^[eE]/,Z={type:"class",value:"[eE]",description:"[eE]"},tt=/^[0-9]/,et={type:"class",value:"[0-9]",description:"[0-9]"},nt=".",rt={type:"literal",value:".",description:'"."'},it="0",ot={type:"literal",value:"0",description:'"0"'},at=/^[1-9]/,st={type:"class",value:"[1-9]",description:"[1-9]"},ut=/^[a-zA-Z]/,ct={type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},lt=/^[a-zA-Z0-9_]/,ft={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},ht=function(){return"get("+JSON.stringify(n())+")"},pt={type:"other",description:"whitespace"},dt=/^[ \t\n\r]/,mt={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},vt=0,gt=0,yt=0,bt={line:1,column:1,seenCR:!1},_t=0,wt=[],xt=0;if("startRule"in w){if(!(w.startRule in E))throw new Error("Can't start parsing from rule \""+w.startRule+'".');T=E[w.startRule]}if(_=T(),_!==x&&vt===t.length)return _;throw _!==x&&vt<t.length&&i({type:"end",description:"end of input"}),o(null,wt,_t)}return t(e,Error),{SyntaxError:e,parse:n}}()},function(t,e,n){"use strict";var r=n(6),i=r.PropTypes,o=r.createClass({displayName:"Icon",propTypes:{name:i.string.isRequired,size:i.oneOf(["lg","2x","3x","4x","5x"]),rotate:i.oneOf(["90","180","270"]),flip:i.oneOf(["horizontal","vertical"]),fixedWidth:i.bool,spin:i.bool,stack:r.PropTypes.oneOf(["1x","2x"]),inverse:r.PropTypes.bool},render:function(){var t=this.props,e=t.name,n=t.size,i=t.rotate,o=t.flip,a=t.spin,s=t.fixedWidth,u=t.stack,c=t.inverse,l=t.className,f=function(t,e){var n={},r=Object.prototype.hasOwnProperty;if(null==t)throw new TypeError;for(var i in t)r.call(t,i)&&!r.call(e,i)&&(n[i]=t[i]);return n}(t,{name:1,size:1,rotate:1,flip:1,spin:1,fixedWidth:1,stack:1,inverse:1,className:1}),h="fa fa-"+e;return n&&(h+=" fa-"+n),i&&(h+=" fa-rotate-"+i),o&&(h+=" fa-flip-"+o),s&&(h+=" fa-fw"),a&&(h+=" fa-spin"),u&&(h+=" fa-stack-"+u),c&&(l+=" fa-inverse"),l&&(h+=" "+l),r.createElement("span",r.__spread({},f,{className:h}))}});t.exports=o},function(t,e,n){"use strict";function r(t){var e=!1;try{t.appendChild(s),e=s.parentNode==t}catch(n){return!1}finally{try{t.removeChild(s)}catch(n){}}return e}function i(t){return"number"==typeof t&&isNaN(t)}function o(t){return s&&t&&1===t.nodeType&&r(t)}var a=n(274),s="undefined"!=typeof document&&document.createElement("div");t.exports=function u(t,e){if(a.isMatcher(t))return t.test(e);if("object"!=typeof t||"object"!=typeof e)return i(t)&&i(e)?!0:t===e;if(o(t)||o(e))return t===e;if(t===e)return!0;if(null===t&&null!==e||null!==t&&null===e)return!1;if(t instanceof RegExp&&e instanceof RegExp)return t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline;var n=Object.prototype.toString.call(t);if(n!==Object.prototype.toString.call(e))return!1;if("[object Date]"===n)return t.valueOf()===e.valueOf();var r,s=0,c=0;if("[object Array]"==n&&t.length!==e.length)return!1;for(r in t){if(s+=1,!(r in e))return!1;if(!u(t[r],e[r]))return!1}for(r in e)c+=1;return s==c}},function(t,e,n){"use strict";var r=n(671),i=r.configure({quoteStrings:!1,limitChildrenCount:250});t.exports=function(){return i.ascii.apply(i,arguments)}},function(t,e,n){var r=n(311);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){var r=n(312);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){var r=n(313);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){var r=n(314);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){var r=n(315);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){var r=n(316);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){var r=n(317);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){var r=n(318);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){var r=n(319);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){var r=n(320);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){var r=n(321);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){var r=n(322);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){var r=n(323);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){"use strict";function r(t,e,n,r){this.resolve=t,this.fn=e,this.self=n||null,this.args=r}t.exports=function(e){function n(t,e){function n(e,n,s){if(t){t--;var u=new i(function(t){t(e.apply(n,s))});return u.then(o,o),u}return new i(function(t){a.push(new r(t,e,n,s))})}function o(){if(t++,a.length){var e=a.shift();e.resolve(n(e.fn,e.self,e.args))}}var a=[];if("function"==typeof t&&"number"==typeof e){var s=e;e=t,t=s}return"function"==typeof e?function(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);return n(e,this,t)}:function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);return n(t,this,e)}}var i;if("number"==typeof arguments[0]||"number"==typeof arguments[1]){if(i=t.exports.Promise,"function"!=typeof i)throw new Error("You must provide a Promise polyfill for this library to work in older environments");return n(arguments[0],arguments[1])}return i=e,n},"function"==typeof Promise&&(t.exports.Promise=Promise)},function(t,e,n){t.exports=n.p+"f7c2b4b747b1a225eb8dee034134a1b0.eot"},function(t,e,n){t.exports=n.p+"f7c2b4b747b1a225eb8dee034134a1b0.eot"},function(t,e,n){t.exports=n.p+"2980083682e94d33a66eef2e7d612519.svg"},function(t,e,n){t.exports=n.p+"706450d7bba6374ca02fe167d86685cb.ttf"},function(t,e,n){t.exports=n.p+"97493d3f11c0a3bd5cbd959f5d19b699.woff2"},function(t,e,n){t.exports=n.p+"d9ee23d59d0e0e727b51368b458a0bff.woff"},function(t,e,n){(function(e){"use strict";function r(){this._listeners={}}var i=n(29),o=n(122),a=n(28);"undefined"==typeof e.EventTarget&&(e.EventTarget=function(){throw new TypeError("Illegal constructor")}),i.inherits(r,e.EventTarget),r.prototype.addEventListener=function(t,e){var n=new o(this,"addEventListener",[{name:"type",type:"string"},{name:"listener",type:"function"}]);n.validateArguments(arguments,function(t){throw new TypeError(n.form+"; "+t)}),this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(e)},r.prototype.removeEventListener=function(t,e){var n=new o(this,"addEventListener",[{name:"type",type:"string"},{name:"listener",type:"function"}]);n.validateArguments(arguments,function(t){throw new TypeError(n.form+"; "+t)}),this._listeners[t]=this._listeners[t]||[];var r=this._listeners[t].indexOf(e);-1!==r&&this._listeners[t].splice(r,1)},r.prototype.dispatchEvent=function(t){var e=new o(this,"addEventListener",[{name:"event",type:"Event"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)});var n=t.type;return"function"==typeof this["on"+n]&&this["on"+n].call(this,t),this.$listeners(n).forEach(function(e){e.call(this,t)},this),!0},r.prototype.$listeners=function(t){return(this._listeners[t]||[]).slice()},t.exports=a.EventTarget=r}).call(e,function(){return this}())},function(t,e,n){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,i="/"===a.charAt(0))}return e=n(r(e.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+e||"."},e.normalize=function(t){var i=e.isAbsolute(t),o="/"===a(t,-1);return t=n(r(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;a>u;u++)if(i[u]!==o[u]){s=u;break}for(var c=[],u=s;u<i.length;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},e.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return 0>e&&(e=t.length+e),t.substr(e,n)}}).call(e,n(1))},function(t,e,n){t.exports=function(){return new Worker(n.p+"acab3fb8f4ca864922a9.worker.js")}},function(t,e,n){"use strict";function r(t,e,n){a(i({},"input.P1.keyboard."+t+"."+e,n)),c(e)}var i=function(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0})};e.setKeyCode=r,Object.defineProperty(e,"__esModule",{value:!0});var o=n(30).Action,a=n(130).setOptions,s=new o;e.selectKey=s;var u=new o;e.deselectKey=u;var c=new o;e.selectNextKey=c},function(t,e,n){"use strict";function r(){return Object.keys(c)}function i(t){return u.getItem(t)||c[t]}function o(t,e){u.setItem(t,e)}function a(){return u}function s(t){u=t}e.keys=r,e.get=i,e.set=o,e.getStorage=a,e.setStorage=s,Object.defineProperty(e,"__esModule",{value:!0});var u=localStorage,c={"player.P1.mode":"KB","input.P1.keyboard.BM.SC":"16","input.P1.keyboard.BM.SC2":"-1","input.P1.keyboard.BM.1":"90","input.P1.keyboard.BM.2":"83","input.P1.keyboard.BM.3":"88","input.P1.keyboard.BM.4":"68","input.P1.keyboard.BM.5":"67","input.P1.keyboard.BM.6":"70","input.P1.keyboard.BM.7":"86","input.P1.keyboard.KB.1":"83","input.P1.keyboard.KB.2":"68","input.P1.keyboard.KB.3":"70","input.P1.keyboard.KB.4":"32","input.P1.keyboard.KB.5":"74","input.P1.keyboard.KB.6":"75","input.P1.keyboard.KB.7":"76","player.P1.speed":"1.0","player.P1.scratch":"left","player.P1.panel":"center","player.P1.notes.mirror":"0","player.P1.notes.balance":"0","system.offset.audio-input":"0","system.offset.audio-visual":"0"};"off"===i("player.P1.scratch")&&o("player.P1.scratch","left")},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}},i=function(t){return t&&t.__esModule?t["default"]:t},o=i(n(78)),a=n(30).Store,s=r(n(263)),u=o.update(null,[s.startLoading.bus],function(t,e){return e}),c=o.update({loading:!0},[s.startLoading.bus],function(){return{loading:!0}},[s.finishLoading.bus],function(t,e){return{loading:!1,collection:e}},[s.errorLoading.bus],function(t,e){return{loading:!1,error:e}});t.exports=new a({server:u,collection:c})},function(t,e,n){"use strict";function r(t){var e=t.map(function(t){return t.server}),n=t.map(function(t){return t.collection}),r=n.map(function(t){var e=t.loading;return e}),o=h.constant([{title:"Custom Song",criteria:function(t){return t.custom}},{title:"Tutorial",criteria:function(t){return t.tutorial}},{title:"New Songs",criteria:function(t){return t.added&&Date.now()-Date.parse(t.added)<12096e5},sort:function(t){return t.added},reverse:!0},{title:"",criteria:function(){return!0}}]),u=h.update("",[m.setFilterText.bus],function(t,e){return e}),c=h.update([],[m.setCustomSong.bus],function(t,e){return[e]}),v=n.map(function(t){var e=t.collection;return f(e&&e.songs||[]).sortByAll([function(t){return f(t.charts).filter({keys:"7K"}).filter(function(t){return t.info.difficulty<5}).filter(function(t){return t.info.level>0}).map(function(t){return t.info.level}).min()},function(t){return t.bpm},function(t){return t.title.toLowerCase()}]).value()}).combine(c,function(t,e){return[].concat(l(e),l(t))}).combine(u,function(t,e){return t.filter(function(t){return i(t,e)})}),g=v.combine(o,function(t,e){return s(t,e)}),y=g.map(function(t){return f(t).map("songs").flatten().value()}),b=h.update(0,[m.selectChart.bus],function(t,e){return e.info.level}),_=h.update(null,[m.selectSong.bus],function(t,e){return e},[m.setCustomSong.bus],function(t,e){return e},[y.changes()],a),w=_.map(function(t){return t&&t.charts||[]}),x=w.map(function(t){return f(t).filter({keys:"7K"}).sortByAll(function(t){return t.info.difficulty>=5?1:0},function(t){return t.info.level}).value()}),E=b.map(function(t){return function(e){return f.min(e,function(e){return Math.abs(e.info.level-t)})}}),T=h.update(null,[m.selectChart.bus],function(t,e){return e},[x.changes(),E],a);return h.when([m.launchGame.bus,e,_,T],function(t,e,n,r){return{server:e,song:n,chart:r}}).onValue(function(t){return d.launch(t).done()}),new p({loading:r,server:e,songs:y,groups:g,song:_,charts:x,chart:T,filterText:u})}function i(t,e){return e?o(t.title,e)||o(t.artist,e)||o(t.genre,e):!0}function o(t,e){return String(t.toLowerCase()).indexOf(e.toLowerCase())>=0}function a(t,e,n){return e&&e.length&&-1===e.indexOf(t)?n?n(e):e[0]:t}function s(t,e){var n=e.map(function(t){return{input:t,output:{title:t.title,songs:[]}}}),r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,c=!0,l=!1,h=void 0;try{for(var p,d=n[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var m=p.value,v=m.input,g=m.output;if(v.criteria(u)){g.songs.push(u);break}}}catch(y){l=!0,h=y}finally{try{!c&&d["return"]&&d["return"]()}finally{if(l)throw h}}}}catch(y){i=!0,o=y}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}var b=!0,_=!1,w=void 0;try{for(var x,E=n[Symbol.iterator]();!(b=(x=E.next()).done);b=!0){var T=x.value,v=T.input,g=T.output;v.sort&&(g.songs=f.sortBy(g.songs,v.sort)),v.reverse&&g.songs.reverse()}}catch(y){_=!0,w=y}finally{try{!b&&E["return"]&&E["return"]()}finally{if(_)throw w}}return f(n).pluck("output").filter(function(t){return t.songs.length>0}).value()}var u=function(t){return t&&t.__esModule?t:{"default":t}},c=function(t){return t&&t.__esModule?t["default"]:t},l=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)};e.MusicSelectStoreFactory=r,Object.defineProperty(e,"__esModule",{value:!0});var f=c(n(12)),h=c(n(78)),p=n(30).Store,d=u(n(411)),m=u(n(277)),v=c(n(396));e["default"]=r(v)},function(t,e,n){"use strict";function r(t){return"left"===t.scratch?["SC","1","2","3","4","5","6","7"]:"right"===t.scratch?["1","2","3","4","5","6","7","SC"]:["1","2","3","4","5","6","7"]}function i(t){var e={},n=!0,r=!1,i=void 0;try{for(var o,a=["1","2","3","4","5","6","7","SC","SC2"][Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u="input.P1.keyboard."+t.mode+"."+s;e[s]=+t.options[u]||-1}}catch(c){r=!0,i=c}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}return e}function o(t){return u.capitalize(f(t))}var a=function(t){return t&&t.__esModule?t:{"default":t}},s=function(t){return t&&t.__esModule?t["default"]:t},u=s(n(12)),c=s(n(78)),l=n(30).Store,f=s(n(417)),h=s(n(238)),p=a(n(394)),d=h.map(r),m=h.map(i),v=h.map(function(t){return t.mode}),g=h.map(function(t){return t.scratch}),y=m.map(function(t){return u.mapValues(t,o)}),b=c.update(null,[p.selectKey.bus],function(t,e){return e},[p.deselectKey.bus],function(){return null},[p.selectNextKey.bus,d],function(t,e,n){var r=n.indexOf(e);return r+1>=n.length?null:n[r+1]});t.exports=new l({mode:v,texts:y,editing:b,scratch:g,keyCodes:m})},,,,,,function(t,e,n){"use strict";function r(t,e,n){var r=o.getName(t)+e;throw n.length&&(r+=" Received ["+c.call(n).join(", ")+"]"),
new Error(r)}function i(t,e,n,r,i,a){if("number"!=typeof a)throw new TypeError("Call id is not a number");var s=o.create(l);return s.proxy=t,s.thisValue=e,s.args=n,s.returnValue=r,s.exception=i,s.callId=a,s}var o=n(237),a=n(274),s=n(368),u=n(369),c=Array.prototype.slice,l={calledOn:function(t){return a.isMatcher(t)?t.test(this.thisValue):this.thisValue===t},calledWith:function(){for(var t=0,e=arguments.length;e>t;t+=1)if(!s(arguments[t],this.args[t]))return!1;return!0},calledWithMatch:function(){for(var t=0,e=arguments.length;e>t;t+=1){var n=this.args[t],r=arguments[t];if(!a(r).test(n))return!1}return!0},calledWithExactly:function(){return arguments.length==this.args.length&&this.calledWith.apply(this,arguments)},notCalledWith:function(){return!this.calledWith.apply(this,arguments)},notCalledWithMatch:function(){return!this.calledWithMatch.apply(this,arguments)},returned:function(t){return s(t,this.returnValue)},threw:function(t){return"undefined"!=typeof t&&this.exception?this.exception===t||this.exception.name===t:!!this.exception},calledWithNew:function(){return this.proxy.prototype&&this.thisValue instanceof this.proxy},calledBefore:function(t){return this.callId<t.callId},calledAfter:function(t){return this.callId>t.callId},callArg:function(t){this.args[t]()},callArgOn:function(t,e){this.args[t].apply(e)},callArgWith:function(t){this.callArgOnWith.apply(this,[t,null].concat(c.call(arguments,1)))},callArgOnWith:function(t,e){var n=c.call(arguments,2);this.args[t].apply(e,n)},"yield":function(){this.yieldOn.apply(this,[null].concat(c.call(arguments,0)))},yieldOn:function(t){for(var e=this.args,n=0,i=e.length;i>n;++n)if("function"==typeof e[n])return void e[n].apply(t,c.call(arguments,1));r(this.proxy," cannot yield since no callback was passed.",e)},yieldTo:function(t){this.yieldToOn.apply(this,[t,null].concat(c.call(arguments,1)))},yieldToOn:function(t,e){for(var n=this.args,i=0,o=n.length;o>i;++i)if(n[i]&&"function"==typeof n[i][t])return void n[i][t].apply(e,c.call(arguments,2));r(this.proxy," cannot yield to '"+t+"' since no callback was passed.",n)},toString:function(){for(var t=this.proxy.toString()+"(",e=[],n=0,r=this.args.length;r>n;++n)e.push(u(this.args[n]));return t=t+e.join(", ")+")","undefined"!=typeof this.returnValue&&(t+=" => "+u(this.returnValue)),this.exception&&(t+=" !"+this.exception.name,this.exception.message&&(t+="("+this.exception.message+")")),t}};l.invokeCallback=l["yield"],i.toString=l.toString,t.exports=i},function(module,exports,__webpack_require__){"use strict";function spy(t,e){if(!e&&"function"==typeof t)return spy.create(t);if(!t&&!e)return spy.create(function(){});var n=t[e];return wrapMethod(t,e,spy.create(n))}function matchingFake(t,e,n){if(t)for(var r=0,i=t.length;i>r;r++)if(t[r].matches(e,n))return t[r]}function incrementCallCount(){this.called=!0,this.callCount+=1,this.notCalled=!1,this.calledOnce=1==this.callCount,this.calledTwice=2==this.callCount,this.calledThrice=3==this.callCount}function createCallProperties(){this.firstCall=this.getCall(0),this.secondCall=this.getCall(1),this.thirdCall=this.getCall(2),this.lastCall=this.getCall(this.callCount-1),this.calledWithNew=!!(this.calledWithNew||this.lastCall&&this.lastCall.calledWithNew())}function createProxy(func){var p;return func.length?eval("p = (function proxy("+vars.substring(0,2*func.length-1)+") { return p.invoke(func, this, slice.call(arguments)); });"):p=function(){return p.invoke(func,this,slice.call(arguments))},p}function delegateToCalls(t,e,n,r){spyApi[t]=function(){if(!this.called)return r?r.apply(this,arguments):!1;for(var i,o=0,a=0,s=this.callCount;s>a;a+=1)if(i=this.getCall(a),i[n||t].apply(i,arguments)&&(o+=1,e))return!0;return o===this.callCount}}var timesInWords=__webpack_require__(407),wrapMethod=__webpack_require__(408),fn=__webpack_require__(237),extend=__webpack_require__(249),spyCall=__webpack_require__(404),deepEqual=__webpack_require__(368),format=__webpack_require__(369),push=Array.prototype.push,slice=Array.prototype.slice,callId=0,vars="a,b,c,d,e,f,g,h,i,j,k,l",uuid=0,spyApi={reset:function(){if(this.invoking){var t=new Error("Cannot reset Sinon function while invoking it. Move the call to .reset outside of the callback.");throw t.name="InvalidResetException",t}if(this.called=!1,this.notCalled=!0,this.calledOnce=!1,this.calledTwice=!1,this.calledThrice=!1,this.callCount=0,this.firstCall=null,this.secondCall=null,this.thirdCall=null,this.lastCall=null,this.calledWithNew=!1,this.args=[],this.returnValues=[],this.thisValues=[],this.exceptions=[],this.callIds=[],this.fakes)for(var e=0;e<this.fakes.length;e++)this.fakes[e].reset()},create:function(t){var e;"function"!=typeof t?t=function(){}:e=fn.getName(t);var n=createProxy(t);return extend(n,spy),delete n.create,extend(n,t),n.reset(),n.prototype=t.prototype,n.displayName=e||"spy",n.toString=fn.toString,n.instantiateFake=spy.create,n.id="spy#"+uuid++,n},invoke:function(t,e,n){var r,i,o=matchingFake(this.fakes,n);incrementCallCount.call(this),push.call(this.thisValues,e),push.call(this.args,n),push.call(this.callIds,callId++),createCallProperties.call(this);try{this.invoking=!0,i=o?o.invoke(t,e,n):(this.func||t).apply(e,n);var a=this.getCall(this.callCount-1);a.calledWithNew()&&"object"!=typeof i&&(i=e)}catch(s){r=s}finally{delete this.invoking}if(push.call(this.exceptions,r),push.call(this.returnValues,i),createCallProperties.call(this),void 0!==r)throw r;return i},named:function(t){return this.displayName=t,this},getCall:function(t){return 0>t||t>=this.callCount?null:spyCall(this,this.thisValues[t],this.args[t],this.returnValues[t],this.exceptions[t],this.callIds[t])},getCalls:function(){var t,e=[];for(t=0;t<this.callCount;t++)e.push(this.getCall(t));return e},calledBefore:function(t){return this.called?t.called?this.callIds[0]<t.callIds[t.callIds.length-1]:!0:!1},calledAfter:function(t){return this.called&&t.called?this.callIds[this.callCount-1]>t.callIds[t.callCount-1]:!1},withArgs:function(){var t=slice.call(arguments);if(this.fakes){var e=matchingFake(this.fakes,t,!0);if(e)return e}else this.fakes=[];var n=this,r=this.instantiateFake();r.matchingAguments=t,r.parent=this,push.call(this.fakes,r),r.withArgs=function(){return n.withArgs.apply(n,arguments)};for(var i=0;i<this.args.length;i++)r.matches(this.args[i])&&(incrementCallCount.call(r),push.call(r.thisValues,this.thisValues[i]),push.call(r.args,this.args[i]),push.call(r.returnValues,this.returnValues[i]),push.call(r.exceptions,this.exceptions[i]),push.call(r.callIds,this.callIds[i]));return createCallProperties.call(r),r},matches:function(t,e){var n=this.matchingAguments;return n.length<=t.length&&deepEqual(n,t.slice(0,n.length))?!e||n.length==t.length:void 0},printf:function(t){var e,n=this,r=slice.call(arguments,1);return(t||"").replace(/%(.)/g,function(t,i){if(e=spyApi.formatters[i],"function"==typeof e)return e.call(null,n,r);if(!isNaN(parseInt(i,10))){var o=r[i-1];return format(o)}return"%"+i})}};delegateToCalls("calledOn",!0),delegateToCalls("alwaysCalledOn",!1,"calledOn"),delegateToCalls("calledWith",!0),delegateToCalls("calledWithMatch",!0),delegateToCalls("alwaysCalledWith",!1,"calledWith"),delegateToCalls("alwaysCalledWithMatch",!1,"calledWithMatch"),delegateToCalls("calledWithExactly",!0),delegateToCalls("alwaysCalledWithExactly",!1,"calledWithExactly"),delegateToCalls("neverCalledWith",!1,"notCalledWith",function(){return!0}),delegateToCalls("neverCalledWithMatch",!1,"notCalledWithMatch",function(){return!0}),delegateToCalls("threw",!0),delegateToCalls("alwaysThrew",!1,"threw"),delegateToCalls("returned",!0),delegateToCalls("alwaysReturned",!1,"returned"),delegateToCalls("alwaysCalledWithNew",!1,"calledWithNew"),delegateToCalls("callArg",!1,"callArgWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgWith=spyApi.callArg,delegateToCalls("callArgOn",!1,"callArgOnWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgOnWith=spyApi.callArgOn,delegateToCalls("yield",!1,"yield",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),spyApi.invokeCallback=spyApi["yield"],delegateToCalls("yieldOn",!1,"yieldOn",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),delegateToCalls("yieldTo",!1,"yieldTo",function(t){throw new Error(this.toString()+" cannot yield to '"+t+"' since it was not yet invoked.")}),delegateToCalls("yieldToOn",!1,"yieldToOn",function(t){throw new Error(this.toString()+" cannot yield to '"+t+"' since it was not yet invoked.")}),spyApi.formatters={c:function(t){return timesInWords(t.callCount)},n:function(t){return t.toString()},C:function(t){for(var e=[],n=0,r=t.callCount;r>n;++n){var i="    "+t.getCall(n).toString();/\n/.test(e[n-1])&&(i="\n"+i),push.call(e,i)}return e.length>0?"\n"+e.join("\n"):""},t:function(t){for(var e=[],n=0,r=t.callCount;r>n;++n)push.call(e,format(t.thisValues[n]));return e.join(", ")},"*":function(t,e){for(var n=[],r=0,i=e.length;i>r;++r)push.call(n,format(e[r]));return n.join(", ")}},extend(spy,spyApi),module.exports=spy},function(t,e,n){"use strict";function r(t,e,n){if(n&&"function"!=typeof n)throw new TypeError("Custom stub should be function");var i;if(i=n?s(n):r.create(),!t&&void 0===e)return r.create();if(void 0===e&&"object"==typeof t){for(var o in t)"function"==typeof t[o]&&r(t,o);return t}return u(t,e,i)}function i(t){return t.defaultBehavior||o(t)||c.create(t)}function o(t){return t.parent&&a(t.parent)}function a(t){var e=t.behaviors[t.callCount-1];return e&&e.isPresent()?e:i(t)}var s=n(405),u=n(408),c=n(665),l=n(249),f=n(237),h=0,p={create:function(){var t=function(){return a(t).invoke(this,arguments)};t.id="stub#"+h++;var e=t;return t=s(t),t.func=e,l(t,r),t.instantiateFake=r.create,t.displayName="stub",t.toString=f.toString,t.defaultBehavior=null,t.behaviors=[],t},resetBehavior:function(){var t;if(this.defaultBehavior=null,this.behaviors=[],delete this.returnValue,delete this.returnArgAt,this.returnThis=!1,this.fakes)for(t=0;t<this.fakes.length;t++)this.fakes[t].resetBehavior()},onCall:function(t){return this.behaviors[t]||(this.behaviors[t]=c.create(this)),this.behaviors[t]},onFirstCall:function(){return this.onCall(0)},onSecondCall:function(){return this.onCall(1)},onThirdCall:function(){return this.onCall(2)}};for(var d in c)c.hasOwnProperty(d)&&!p.hasOwnProperty(d)&&"create"!=d&&"withArgs"!=d&&"invoke"!=d&&(p[d]=function(t){return function(){return this.defaultBehavior=this.defaultBehavior||c.create(this),this.defaultBehavior[t].apply(this.defaultBehavior,arguments),this}}(d));l(r,p),t.exports=r},function(t,e,n){"use strict";t.exports=function(t){switch(t){case 1:return"once";case 2:return"twice";case 3:return"thrice";default:return(t||0)+" times"}}},function(t,e,n){"use strict";function r(t,e){for(var n in e)o.call(t,n)||(t[n]=e[n])}function i(t){return"function"==typeof t||!!(t&&t.constructor&&t.call&&t.apply)}var o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){if(!t)throw new TypeError("Should wrap property of object");if("function"!=typeof n)throw new TypeError("Method wrapper should be function");var a,s=t[e];if(i(s)){if(s.restore&&s.restore.sinon)a=new TypeError("Attempted to wrap "+e+" which is already wrapped");else if(s.calledBefore){var u=s.returns?"stubbed":"spied on";a=new TypeError("Attempted to wrap "+e+" which is already "+u)}}else a=new TypeError("Attempted to wrap "+typeof s+" property "+e+" as function");if(a)throw s&&s.stackTrace&&(a.stack+="\n--------------\n"+s.stackTrace),a;var c=t.hasOwnProperty?t.hasOwnProperty(e):o.call(t,e);return t[e]=n,n.displayName=e,n.stackTrace=new Error("Stack Trace for original").stack,n.restore=function(){c||delete t[e],t[e]===n&&(t[e]=s)},n.restore.sinon=!0,r(n,s),n}},function(t,e,n){(function(e){"use strict";function r(t,e){this.type=t,this.target=i.defaults(e,null),this.timeStamp=Date.now()}var i=n(29),o=n(28);i.inherits(r,e.Event),"undefined"==typeof e.Event&&(e.Event=r),t.exports=o.Event=r}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){return""+t.md5+" "+[t.info.title].concat(a(t.info.subtitles)).join(" ")}function i(t,e){s("send","event","song","play",t.title),s("send","event","game","start",r(e),e.info.level)}function o(t,e,n){var i=n.player(n.game.players[0]);s("send","event","song","finish",t.title),s("send","event","game","finish",r(e),i.stats.score)}var a=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)};e.gameStart=i,e.gameFinish=o,Object.defineProperty(e,"__esModule",{value:!0});var s=window.ga||function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];console.log.apply(console,["[log]"].concat(e))}},function(t,e,n){"use strict";function r(t){var e=t.server,n=t.song,r=t.chart;return u(regeneratorRuntime.mark(function o(){var t,a,s,u,b,T,S,A,k,O,j,M,R;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(l.enabled&&!C()&&(t=/Safari/.test(navigator.userAgent)&&!/Chrom/.test(navigator.userAgent),t||l.request()),a=x.get(),s=a.options,u={},!n.resources){o.next=11;break}return u.assets=n.resources,o.next=8,n.resources.file(r.file);case 8:u.bms=o.sent,o.next=15;break;case 11:b=e.url+"/"+n.path+"/"+r.file,T=c(b,"assets/"),u.bms=new d(b),u.assets=new m(T);case 15:return u.options={audioInputLatency:+h.latency||0,tutorial:n.tutorial,players:[{speed:+s["player.P1.speed"]||1,autoplay:!1,placement:s["player.P1.panel"],scratch:a.scratch,input:{keyboard:E.get().keyCodes}}]},S=v.load(u),A=S.tasks,k=S.promise,O=f.createElement(y,{tasks:A,song:r.info}),o.next=22,p.push(O);case 22:return _.gameStart(n,r),o.next=25,k;case 25:return j=o.sent,o.next=28,p.display(new g(j.display));case 28:return j.start(),o.next=31,j.promise;case 31:if(M=o.sent,_.gameFinish(n,r,M),R=M.player(M.game.players[0]),w.setOptions({"player.P1.speed":R.speed}),!M.finished){o.next=38;break}return o.next=38,i(R,r);case 38:return j.destroy(),o.next=41,p.pop();case 41:case"end":return o.stop()}},o,this)}))}function i(t,e){return new Promise(function(n){var r=t.stats,i={result:{1:r.counts[1],2:r.counts[2],3:r.counts[3],4:r.counts[4],missed:r.counts[T],score:r.score,maxCombo:r.maxCombo,accuracy:r.accuracy,grade:o(r)},chart:e,onExit:n};p.display(f.createElement(b,i)).done()})}function o(t){var e=t.score;return 3e5>e?"F":35e4>e?"D":4e5>e?"C":45e4>e?"B":5e5>e?"A":"S"}var a=function(t){return t&&t.__esModule?t:{"default":t}},s=function(t){return t&&t.__esModule?t["default"]:t};e.launch=r,Object.defineProperty(e,"__esModule",{value:!0});var u=s(n(38)),c=n(123).resolve,l=s(n(419)),f=s(n(6)),h=s(n(132)),p=s(n(112)),d=s(n(295)),m=s(n(271)),v=a(n(289)),g=s(n(285)),y=s(n(294)),b=s(n(280)),_=a(n(410)),w=a(n(130)),x=s(n(238)),E=s(n(398)),T=n(53).MISSED,C=n(124).shouldDisableFullScreen},,,function(t,e,n){function r(t,e,n,r){var o={showHidden:e,seen:[],stylize:function(t){return t}};return i(o,t,"undefined"==typeof n?2:n)}function i(t,n,r){if(n&&"function"==typeof n.inspect&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var d=n.inspect(r);return"string"!=typeof d&&(d=i(t,d,r)),d}var b=o(t,n);if(b)return b;if(y(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion){var _=new XMLSerializer;return _.serializeToString(n)}var w="http://www.w3.org/1999/xhtml",x=document.createElementNS(w,"_");return x.appendChild(n.cloneNode(!1)),html=x.innerHTML.replace("><",">"+n.innerHTML+"<"),x.innerHTML="",html}catch(E){}}var T=g(n),C=t.showHidden?v(n):T;if(0===C.length||p(n)&&(1===C.length&&"stack"===C[0]||2===C.length&&"description"===C[0]&&"stack"===C[1])){if("function"==typeof n){var S=m(n),A=S?": "+S:"";return t.stylize("[Function"+A+"]","special")}if(f(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(h(n))return t.stylize(Date.prototype.toUTCString.call(n),"date");if(p(n))return a(n)}var k="",O=!1,j=["{","}"];if(l(n)&&(O=!0,j=["[","]"]),"function"==typeof n){var S=m(n),A=S?": "+S:"";k=" [Function"+A+"]"}if(f(n)&&(k=" "+RegExp.prototype.toString.call(n)),h(n)&&(k=" "+Date.prototype.toUTCString.call(n)),p(n))return a(n);if(0===C.length&&(!O||0==n.length))return j[0]+k+j[1];if(0>r)return f(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var M;return M=O?s(t,n,r,T,C):C.map(function(e){return u(t,n,r,T,e,O)}),t.seen.pop(),c(M,k,j)}function o(t,e){switch(typeof e){case"undefined":return t.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string");case"number":return 0===e&&1/e===-(1/0)?t.stylize("-0","number"):t.stylize(""+e,"number");case"boolean":return t.stylize(""+e,"boolean")}return null===e?t.stylize("null","null"):void 0}function a(t){return"["+Error.prototype.toString.call(t)+"]"}function s(t,e,n,r,i){for(var o=[],a=0,s=e.length;s>a;++a)o.push(Object.prototype.hasOwnProperty.call(e,String(a))?u(t,e,n,r,String(a),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(u(t,e,n,r,i,!0))}),o}function u(t,e,n,r,o,a){var s,u;if(e.__lookupGetter__&&(e.__lookupGetter__(o)?u=e.__lookupSetter__(o)?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):e.__lookupSetter__(o)&&(u=t.stylize("[Setter]","special"))),r.indexOf(o)<0&&(s="["+o+"]"),u||(t.seen.indexOf(e[o])<0?(u=null===n?i(t,e[o],null):i(t,e[o],n-1),u.indexOf("\n")>-1&&(u=a?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n"))):u=t.stylize("[Circular]","special")),"undefined"==typeof s){if(a&&o.match(/^\d+$/))return u;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+u}function c(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function l(t){return Array.isArray(t)||"object"==typeof t&&"[object Array]"===d(t)}function f(t){return"object"==typeof t&&"[object RegExp]"===d(t)}function h(t){return"object"==typeof t&&"[object Date]"===d(t)}function p(t){return"object"==typeof t&&"[object Error]"===d(t)}function d(t){return Object.prototype.toString.call(t)}var m=n(440),v=n(545),g=n(542);t.exports=r;var y=function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName}},,,function(t,e,n){e=t.exports=function(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return a[t];var n=String(t),o=r[n.toLowerCase()];if(o)return o;var o=i[n.toLowerCase()];return o?o:1===n.length?n.charCodeAt(0):void 0};var r=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"right click":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,escape:27,spc:32,pgup:33,pgdn:33,ins:45,del:46,cmd:91};/*!
	 * Programatically add the following
	 */
for(o=97;123>o;o++)r[String.fromCharCode(o)]=o-32;for(var o=48;58>o;o++)r[o-48]=o;for(o=1;13>o;o++)r["f"+o]=o+111;for(o=0;10>o;o++)r["numpad "+o]=o+96;var a=e.names=e.title={};for(o in r)a[r[o]]=o;for(var s in i)r[s]=i[s]},,function(t,e,n){/*!
	* screenfull
	* v2.0.0 - 2014-12-22
	* (c) Sindre Sorhus; MIT License
	*/
!function(){"use strict";var e="undefined"!=typeof t&&t.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,r=function(){for(var t,e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,i=n.length,o={};i>r;r++)if(t=n[r],t&&t[1]in document){for(r=0,e=t.length;e>r;r++)o[n[0][r]]=t[r];return o}return!1}(),i={request:function(t){var e=r.requestFullscreen;t=t||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?t[e]():t[e](n&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[r.exitFullscreen]()},toggle:function(t){this.isFullscreen?this.exit():this.request(t)},raw:r};return r?(Object.defineProperties(i,{isFullscreen:{get:function(){return!!document[r.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[r.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!document[r.fullscreenEnabled]}}}),void(e?t.exports=i:window.screenfull=i)):void(e?t.exports=!1:window.screenfull=!1)}()},,,function(t,e,n){"use strict";function r(t,e,n,r){i.defineAttribute(this,"sampleRate","readonly",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"length","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"duration","readonly",n/r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"numberOfChannels","readonly",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$name:{value:"AudioBuffer"},$context:{value:t}}),this._data=new Array(e);for(var o=0;e>o;o++)this._data[o]=new Float32Array(n)}var i=n(29),o=n(122),a=n(28),s=function(){throw new TypeError("Illegal constructor: use audioContext.createBuffer(numberOfChannels: number, length: number, sampleRate: number)")};i.inherits(r,s),r.exports=s,s.prototype.getChannelData=function(t){var e=new o(this,"getChannelData",[{name:"channel",type:"number"}]);return e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),e.assert(t>=0&&t<this._data.length,function(){throw new TypeError(e.form+"; channel index ("+t+") exceeds number of channels (#{"+this._data.length+"})")}),this._data[t]},r.prototype.toJSON=function(){var t={name:this.$name,sampleRate:this.sampleRate,length:this.length,duration:this.duration,numberOfChannels:this.numberOfChannels};return this.$context.VERBOSE_JSON&&(t.data=this._data.map(function(t){return Array.prototype.slice.call(t)})),t},t.exports=a.AudioBuffer=r},function(t,e,n){"use strict";function r(t){return/[aeiou]/i.test(t.charAt(0))?"an":"a"}t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r="";return t?(r+=t.constructor.name,e&&(r+="#"+e)):r+=e,r+="(",r+=n.map(function(t){return t.name+": "+t.type}).join(", "),r+=")"}function i(t,e){var n="";return t=t.replace(/^optional\s*/,"").trim(),n+="should be "+a(t)+" "+t+", ",n+="but got: "+s(e)}function o(t,e){return t.constructor.name+"#"+e}var a=n(423),s=n(746);t.exports={methodForm:r,shouldBeButGot:i,concat:o}},function(t,e,n){(function(e){"use strict";function n(t,n){switch(n){case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"number":return"number"==typeof t&&!isNaN(t);case"string":return"string"==typeof t;case"null":return null===t}if(/[A-Z]/.test(n.charAt(0))&&"function"==typeof e[n])return t instanceof e[n];var i=/^enum\s*{(.*?)}$/.exec(n);return i?r(t,i[1].split(",").map(function(t){return t.trim()})):!1}function r(t,e){return e.some(function(e){return/^\d+$/.test(e)?t===+e:t===e})}t.exports=function(t,e){return e.split("|").some(function(e){return n(t,e.trim())})}}).call(e,function(){return this}())},,,,,,,,,,,,function(t,e,n){(function(t){"use strict";function r(){i(),o(),a()}function i(){var e=document.createElement("div");e.id="mocha",document.body.appendChild(e),mocha.setup("bdd"),u.use(c),u.use(l),t.expect=u.expect,t.sinon=f}function o(){n(713)}function a(){var t=[];mocha.run().on("test end",function(t){t.err&&(console.log("%cFailed Spec: %c%s\n %c%s","color: black; font: 16px sans-serif","color: black; font: bold 16px sans-serif",t.title,"color: red; font: bold 1em sans-serif",t.err.message),console.error(t.err.stack))}).on("test end",function(e){t.push("passed"===e.state?{fullName:e.title,status:"passed"}:e.pending?{fullName:e.title,status:"pending"}:{fullName:e.title,status:"failed",failedExpectations:[{message:e.err.message,stack:e.err.stack}]})}).on("suite end",function(e){if(e.root){var n=window.__coverage__||null,r=JSON.stringify({specs:t,coverage:n}),i=new XMLHttpRequest;i.open("POST","/api/test",!0),i.setRequestHeader("Content-Type","application/json"),i.send(r)}})}var s=function(t){return t&&t.__esModule?t["default"]:t};e.main=r,Object.defineProperty(e,"__esModule",{value:!0}),n(660),n(706),n(708);var u=s(n(532)),c=s(n(531)),l=s(n(662)),f=s(n(663))}).call(e,function(){return this}())},,function(t,e,n){/*!
	 * Chai - getActual utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){return e.length>4?e[4]:t._obj}},function(t,e,n){/*!
	 * Chai - getName utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t){if(t.name)return t.name;var e=/^\s?function ([^(]*)\(/.exec(t);return e&&e[1]?e[1]:""}},function(t,e,n){/*!
	 * ## parsePath(path)
	 *
	 * Helper function used to parse string object
	 * paths. Use in conjunction with `_getPathValue`.
	 *
	 *      var parsed = parsePath('myobject.property.subprop');
	 *
	 * ### Paths:
	 *
	 * * Can be as near infinitely deep and nested
	 * * Arrays are also valid using the formal `myobject.document[3].property`.
	 * * Literal dots and brackets (not delimiter) must be backslash-escaped.
	 *
	 * @param {String} path
	 * @returns {Object} parsed
	 * @api private
	 */
function r(t){var e=t.replace(/([^\\])\[/g,"$1.["),n=e.match(/(\\\.|[^.]+?)+/g);return n.map(function(t){var e=/^\[(\d+)\]$/,n=e.exec(t);return n?{i:parseFloat(n[1])}:{p:t.replace(/\\([.\[\]])/g,"$1")}})}/*!
	 * ## _getPathValue(parsed, obj)
	 *
	 * Helper companion function for `.parsePath` that returns
	 * the value located at the parsed address.
	 *
	 *      var value = getPathValue(parsed, obj);
	 *
	 * @param {Object} parsed definition from `parsePath`.
	 * @param {Object} object to search against
	 * @param {Number} object to search against
	 * @returns {Object|Undefined} value
	 * @api private
	 */
function i(t,e,n){var r,i=e;n=void 0===n?t.length:n;for(var o=0,a=n;a>o;o++){var s=t[o];i?("undefined"!=typeof s.p?i=i[s.p]:"undefined"!=typeof s.i&&(i=i[s.i]),o==a-1&&(r=i)):r=void 0}return r}/*!
	 * Chai - getPathInfo utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var o=n(442);t.exports=function(t,e){var n=r(t),a=n[n.length-1],s={parent:n.length>1?i(n,e,n.length-1):e,name:a.p||a.i,value:i(n,e)};return s.exists=o(s.name,s.parent),s}},function(t,e,n){/*!
	 * Chai - hasProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(445),i={number:Number,string:String};t.exports=function(t,e){var n=r(e);return"null"===n||"undefined"===n?!1:(i[n]&&"object"!=typeof e&&(e=new i[n](e)),t in e)}},function(t,e,n){/*!
	 * Chai - flag utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(414),i=n(309);t.exports=function(t){var e=r(t),n=Object.prototype.toString.call(t);if(i.truncateThreshold&&e.length>=i.truncateThreshold){if("[object Function]"===n)return t.name&&""!==t.name?"[Function: "+t.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+t.length+") ]";if("[object Object]"===n){var o=Object.keys(t),a=o.length>2?o.splice(0,2).join(", ")+", ...":o.join(", ");return"{ Object ("+a+") }"}return e}return e}},function(t,e,n){/*!
	 * Chai - transferFlags utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){var r=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),n=3===arguments.length?n:!0;for(var i in r)(n||"object"!==i&&"ssfi"!==i&&"message"!=i)&&(e.__flags[i]=r[i])}},function(t,e,n){/*!
	 * Chai - type utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Detectable javascript natives
	 */
var r={"[object Arguments]":"arguments","[object Array]":"array","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object RegExp]":"regexp","[object String]":"string"};t.exports=function(t){var e=Object.prototype.toString.call(t);return r[e]?r[e]:null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}},,,,,,function(t,e,n){"use strict";function r(t){return t.fakes||(t.fakes=[]),t.fakes}function i(t,e){for(var n=r(t),i=0,o=n.length;o>i;i+=1)"function"==typeof n[i][e]&&n[i][e]()}function o(t){for(var e=r(t),n=0;n<e.length;)e.splice(n,1)}var a=n(405),s=n(406),u=n(454),c=[].push,l=Object.prototype.hasOwnProperty;t.exports={verify:function(){i(this,"verify")},restore:function(){i(this,"restore"),o(this)},reset:function(){i(this,"reset")},verifyAndRestore:function(){var t;try{this.verify()}catch(e){t=e}if(this.restore(),t)throw t},add:function(t){return c.call(r(this),t),t},spy:function(){return this.add(a.apply(null,arguments))},stub:function(t,e,n){if(e){var r=t[e];if("function"!=typeof r){if(!l.call(t,e))throw new TypeError("Cannot stub non-existent own property "+e);return t[e]=n,this.add({restore:function(){t[e]=r}})}}if(!e&&t&&"object"==typeof t){var i=s.apply(null,arguments);for(var o in i)"function"==typeof i[o]&&this.add(i[o]);return i}return this.add(s.apply(null,arguments))},mock:function(){return this.add(u.apply(null,arguments))},inject:function(t){var e=this;return t.spy=function(){return e.spy.apply(e,arguments)},t.stub=function(){return e.stub.apply(e,arguments)},t.mock=function(){return e.mock.apply(e,arguments)},t}}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty;e.defaultConfig={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},e.getConfig=function(t){var n={};t=t||{};var i=e.defaultConfig;for(var o in i)r.call(i,o)&&(n[o]=r.call(t,o)?t[o]:i[o]);return n}},function(t,e,n){"use strict";function r(t){var e="number"==typeof t.minCalls;return!e||t.callCount>=t.minCalls}function i(t){return"number"!=typeof t.maxCalls?!1:t.callCount===t.maxCalls}function o(t,e){return d&&d.isMatcher(t)?t.test(e):!0}function a(t){return 0==t?"never called":"called "+m(t)}function s(t){var e=t.minCalls,n=t.maxCalls;if("number"==typeof e&&"number"==typeof n){var r=m(e);return e!==n&&(r="at least "+r+" and at most "+m(n)),r}return"number"==typeof e?"at least "+m(e):"at most "+m(n)}var u=n(249),c=n(406),l=n(405),f=n(369),h=n(368),p=n(404),d=n(274),m=n(407),v=Array.prototype.push,g=Array.prototype.slice;t.exports={minCalls:1,maxCalls:1,create:function(e){var n=u(c(),t.exports);return delete n.create,n.method=e,n},invoke:function(t,e,n){return this.verifyCallAllowed(e,n),l.invoke.apply(this,arguments)},atLeast:function(t){if("number"!=typeof t)throw new TypeError("'"+t+"' is not number");return this.limitsSet||(this.maxCalls=null,this.limitsSet=!0),this.minCalls=t,this},atMost:function(t){if("number"!=typeof t)throw new TypeError("'"+t+"' is not number");return this.limitsSet||(this.minCalls=null,this.limitsSet=!0),this.maxCalls=t,this},never:function(){return this.exactly(0)},once:function(){return this.exactly(1)},twice:function(){return this.exactly(2)},thrice:function(){return this.exactly(3)},exactly:function(t){if("number"!=typeof t)throw new TypeError("'"+t+"' is not a number");return this.atLeast(t),this.atMost(t)},met:function(){return!this.failed&&r(this)},verifyCallAllowed:function(e,n){if(i(this)&&(this.failed=!0,t.exports.fail(this.method+" already called "+m(this.maxCalls))),"expectedThis"in this&&this.expectedThis!==e&&t.exports.fail(this.method+" called with "+e+" as thisValue, expected "+this.expectedThis),"expectedArguments"in this){n||t.exports.fail(this.method+" received no arguments, expected "+f(this.expectedArguments)),n.length<this.expectedArguments.length&&t.exports.fail(this.method+" received too few arguments ("+f(n)+"), expected "+f(this.expectedArguments)),this.expectsExactArgCount&&n.length!==this.expectedArguments.length&&t.exports.fail(this.method+" received too many arguments ("+f(n)+"), expected "+f(this.expectedArguments));for(var r=0,a=this.expectedArguments.length;a>r;r+=1)o(this.expectedArguments[r],n[r])||t.exports.fail(this.method+" received wrong arguments "+f(n)+", didn't match "+this.expectedArguments.toString()),h(this.expectedArguments[r],n[r])||t.exports.fail(this.method+" received wrong arguments "+f(n)+", expected "+f(this.expectedArguments))}},allowsCall:function(t,e){if(this.met()&&i(this))return!1;if("expectedThis"in this&&this.expectedThis!==t)return!1;if(!("expectedArguments"in this))return!0;if(e=e||[],e.length<this.expectedArguments.length)return!1;if(this.expectsExactArgCount&&e.length!=this.expectedArguments.length)return!1;for(var n=0,r=this.expectedArguments.length;r>n;n+=1){if(!o(this.expectedArguments[n],e[n]))return!1;if(!h(this.expectedArguments[n],e[n]))return!1}return!0},withArgs:function(){return this.expectedArguments=g.call(arguments),this},withExactArgs:function(){return this.withArgs.apply(this,arguments),this.expectsExactArgCount=!0,this},on:function(t){return this.expectedThis=t,this},toString:function(){var t=(this.expectedArguments||[]).slice();this.expectsExactArgCount||v.call(t,"[...]");var e=p.toString.call({proxy:this.method||"anonymous mock expectation",args:t}),n=e.replace(", [...","[, ...")+" "+s(this);return this.met()?"Expectation met: "+n:"Expected "+n+" ("+a(this.callCount)+")"},verify:function(){return this.met()?t.exports.pass(this.toString()):t.exports.fail(this.toString()),!0},pass:function(t){},fail:function(t){var e=new Error(t);throw e.name="ExpectationError",e}}},function(t,e,n){"use strict";function r(t){return t?r.create(t):o.create("Anonymous mock")}function i(t,e){if(t)for(var n=0,r=t.length;r>n;n+=1)e(t[n])}var o=n(453),a=n(249),s=n(408),u=n(404),c=Array.prototype.push;t.exports=a(r,{create:function(t){if(!t)throw new TypeError("object is null");var e=a({},r);return e.object=t,delete e.create,e},expects:function(t){if(!t)throw new TypeError("method is falsy");if(this.expectations||(this.expectations={},this.proxies=[]),!this.expectations[t]){this.expectations[t]=[];var e=this;s(this.object,t,function(){return e.invokeMethod(t,this,arguments)}),c.call(this.proxies,t)}var n=o.create(t);return c.call(this.expectations[t],n),n},restore:function(){var t=this.object;i(this.proxies,function(e){"function"==typeof t[e].restore&&t[e].restore()})},verify:function(){var t=this.expectations||{},e=[],n=[];return i(this.proxies,function(r){i(t[r],function(t){t.met()?c.call(n,t.toString()):c.call(e,t.toString())})}),this.restore(),e.length>0?o.fail(e.concat(n).join("\n")):n.length>0&&o.pass(e.concat(n).join("\n")),!0},invokeMethod:function(t,e,n){var r,i=this.expectations&&this.expectations[t],a=i&&i.length||0;for(r=0;a>r;r+=1)if(!i[r].met()&&i[r].allowsCall(e,n))return i[r].apply(e,n);var s,l=[],f=0;for(r=0;a>r;r+=1)i[r].allowsCall(e,n)?s=s||i[r]:f+=1,c.call(l,"    "+i[r].toString());return 0===f?s.apply(e,n):(l.unshift("Unexpected call: "+u.toString.call({proxy:t,args:n})),void o.fail(l.join("\n")))}})},function(t,e,n){"use strict";function r(t,e,n,r){r&&(!e.injectInto||n in e.injectInto?l.call(t.args,r):(e.injectInto[n]=r,t.injectedKeys.push(n)))}function i(e){var n=o.create(t.exports);return e.useFakeServer&&("object"==typeof e.useFakeServer&&(n.serverPrototype=e.useFakeServer),n.useFakeServer()),e.useFakeTimers&&("object"==typeof e.useFakeTimers?n.useFakeTimers.apply(n,e.useFakeTimers):n.useFakeTimers()),n}var o=n(237),a=n(249),s=n(451),u=n(670),c=n(274),l=[].push;t.exports=a(o.create(s),{useFakeTimers:function(){return this.clock=u.apply(null,arguments),this.add(this.clock)},serverPrototype:{},useFakeServer:function(){var t=this.serverPrototype||sinon.fakeServer;return t&&t.create?(this.server=t.create(),this.add(this.server)):null},inject:function(t){return s.inject.call(this,t),this.clock&&(t.clock=this.clock),this.server&&(t.server=this.server,t.requests=this.server.requests),t.match=c,t},restore:function(){s.restore.apply(this,arguments),this.restoreContext()},restoreContext:function(){if(this.injectedKeys){for(var t=0,e=this.injectedKeys.length;e>t;t++)delete this.injectInto[this.injectedKeys[t]];this.injectedKeys=[]}},create:function(e){if(!e)return o.create(t.exports);var n=i(e);n.args=n.args||[],n.injectedKeys=[],n.injectInto=e.injectInto;var a,s,u=n.inject({});if(e.properties)for(var c=0,l=e.properties.length;l>c;c++)a=e.properties[c],s=u[a]||"sandbox"==a&&n,r(n,e,a,s);else r(n,e,"sandbox",s);return n},match:c})},function(t,e,n){"use strict";function r(t){function e(){var e=i.getConfig(i.config);e.injectInto=e.injectIntoThis&&this||e.injectInto;var n,r,a=o(e),s=!1,u=Array.prototype.slice.call(arguments);if(u.length>0&&"function"==typeof u[arguments.length-1]){var c=u[arguments.length-1];u[arguments.length-1]=function(t){if(t)throw a.restore(),n;a.verifyAndRestore(),c(t)},s=!0}var l=u.concat(a.args);try{r=t.apply(this,l)}catch(f){n=f}if(!s){if("undefined"!=typeof n)throw a.restore(),n;a.verifyAndRestore()}return r}var n=typeof t;if("function"!==n)throw new TypeError("sinon.test needs to wrap a test function, got "+n);return t.length?function(t){return e.apply(this,arguments)}:e}var i=n(452),o=n(455).create;r.config={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},t.exports=r},function(t,e,n){"use strict";t.exports=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=Object.prototype.toString.call(t);return e.substring(8,e.length-1).toLowerCase()}},function(t,e,n){var r,i;(!0&&n(255)&&function(o){r=o,i="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==i&&(t.exports=i))}||"object"==typeof t&&function(e){t.exports=e()}||function(t){this.samsam=t()})(function(){function t(t){var e=t;return"number"==typeof t&&t!==e}function e(t){return f.toString.call(t).split(/[ \]]/)[1]}function n(t){if("Arguments"===e(t))return!0;if("object"!=typeof t||"number"!=typeof t.length||"Array"===e(t))return!1;if("function"==typeof t.callee)return!0;try{t[t.length]=6,delete t[t.length]}catch(n){return!0}return!1}function r(t){if(!t||1!==t.nodeType||!h)return!1;try{t.appendChild(h),t.removeChild(h)}catch(e){return!1}return!0}function i(t){var e,n=[];for(e in t)f.hasOwnProperty.call(t,e)&&n.push(e);return n}function o(t){return"function"==typeof t.getTime&&t.getTime()==t.valueOf()}function a(t){return 0===t&&1/t===-(1/0)}function s(e,n){return e===n||t(e)&&t(n)?0!==e||a(e)===a(n):void 0}function u(a,u){function c(t){return"object"!=typeof t||null===t||t instanceof Boolean||t instanceof Date||t instanceof Number||t instanceof RegExp||t instanceof String?!1:!0}function l(t,e){var n;for(n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var h=[],p=[],d=[],m=[],v={};return function g(a,u,y,b){var _=typeof a,w=typeof u;if(a===u||t(a)||t(u)||null==a||null==u||"object"!==_||"object"!==w)return s(a,u);if(r(a)||r(u))return!1;var x=o(a),E=o(u);if(!(!x&&!E||x&&E&&a.getTime()===u.getTime()))return!1;if(a instanceof RegExp&&u instanceof RegExp&&a.toString()!==u.toString())return!1;var T=e(a),C=e(u),S=i(a),A=i(u);if(n(a)||n(u)){if(a.length!==u.length)return!1}else if(_!==w||T!==C||S.length!==A.length)return!1;var k,O,j,M,R,N,P,I,D,L,F;for(O=0,j=S.length;j>O;O++){if(k=S[O],!f.hasOwnProperty.call(u,k))return!1;if(M=a[k],R=u[k],N=c(M),P=c(R),I=N?l(h,M):-1,D=P?l(p,R):-1,L=-1!==I?d[I]:y+"["+JSON.stringify(k)+"]",F=-1!==D?m[D]:b+"["+JSON.stringify(k)+"]",v[L+F])return!0;if(-1===I&&N&&(h.push(M),d.push(L)),-1===D&&P&&(p.push(R),m.push(F)),N&&P&&(v[L+F]=!0),!g(M,R,L,F))return!1}return!0}(a,u,"$1","$2")}function c(t,e){if(0===e.length)return!0;var n,r,i,o;for(n=0,r=t.length;r>n;++n)if(l(t[n],e[0])){for(i=0,o=e.length;o>i;++i)if(!l(t[n+i],e[i]))return!1;return!0}return!1}var l,f=Object.prototype,h="undefined"!=typeof document&&document.createElement("div");return l=function p(t,n){if(n&&"function"==typeof n.test)return n.test(t);if("function"==typeof n)return n(t)===!0;if("string"==typeof n){n=n.toLowerCase();var r="string"==typeof t||!!t;return r&&String(t).toLowerCase().indexOf(n)>=0}if("number"==typeof n)return n===t;if("boolean"==typeof n)return n===t;if("undefined"==typeof n)return"undefined"==typeof t;if(null===n)return null===t;if("Array"===e(t)&&"Array"===e(n))return c(t,n);if(n&&"object"==typeof n){if(n===t)return!0;var i;for(i in n){var o=t[i];if("undefined"==typeof o&&"function"==typeof t.getAttribute&&(o=t.getAttribute(i)),null===n[i]||"undefined"==typeof n[i]){if(o!==n[i])return!1}else if("undefined"==typeof o||!p(o,n[i]))return!1}return!0}throw new Error("Matcher was not a string, a number, a function, a boolean or an object")},{isArguments:n,isElement:r,isDate:o,isNegZero:a,identical:s,deepEqual:u,match:l,keys:i}})},function(t,e,n){"use strict";function r(){if(!(this instanceof r))throw new TypeError("Failed to construct 'AudioContext': Please use the 'new' operator");A.call(this);var t=new s(this),e=a.sampleRate,n=function(){return this._microCurrentTime/1e6},o=new u(this);i.defineAttribute(this,"destination","readonly",t,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"sampleRate","readonly",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"currentTime","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"listener","readonly",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$name:{value:"AudioContext"},$context:{value:this}}),this._microCurrentTime=0,this._processedSamples=0,this._tick=0}var i=n(29),o=n(122),a=n(28),s=n(460),u=n(461),c=n(422),l=n(716),f=n(728),h=n(731),p=n(730),d=n(737),m=n(715),v=n(725),g=n(722),y=n(718),b=n(738),_=n(735),w=n(721),x=n(720),E=n(719),T=n(723),C=n(734),S=n(736),A=n(390);n(729),n(727),i.inherits(r,A),r.WEB_AUDIO_TEST_API_VERSION=a.VERSION,r.prototype.createBuffer=function(t,e,n){var r=new o(this,null,[{name:"numberOfChannels",type:"number"},{name:"length",type:"number"},{name:"sampleRate",type:"number"}]);return r.validateArguments(arguments,function(t){throw new TypeError(r.form+"; "+t)}),new c(this,t,e,n)},r.prototype.decodeAudioData=function(t,e,n){var r=new o(this,"decodeAudioData",[{name:"audioData",type:"ArrayBuffer"},{name:"successCallback",type:"function"},{name:"errorCallback",type:"optional function"}]);r.validateArguments(arguments,function(t){throw new TypeError(r.form+"; "+t)}),e=i.defaults(e,i.NOP),n=i.defaults(n,i.NOP);var a=this;setTimeout(function(){a.DECODE_AUDIO_DATA_FAILED?n():e(a.DECODE_AUDIO_DATA_RESULT||new c(a,2,1024,a.sampleRate))},0)},r.prototype.createBufferSource=function(){return new l(this)},r.prototype.createMediaElementSource=function(t){var e=new o(this,"createMediaElementSource",[{name:"mediaElement",type:"HTMLMediaElement"}]);return e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),new f(this,t)},r.prototype.createMediaStreamSource=function(t){var e=new o(this,"createMediaStreamSource",[{name:"mediaStream",type:"MediaStream"}]);return e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),new h(this,t)},r.prototype.createMediaStreamDestination=function(){return new p(this)},r.prototype.createScriptProcessor=function(t,e,n){var r=new o(this,"createScriptProcessor",[{name:"bufferSize",type:"enum { 256, 512, 1024, 2048, 4096, 8192, 16384 }"},{name:"numberOfInputChannels",type:"optional number"},{name:"numberOfOutputChannels",type:"optional number"}]);return r.validateArguments(arguments,function(t){throw new TypeError(r.form+"; "+t)}),t=i.defaults(t,0),e=i.defaults(e,2),n=i.defaults(n,2),new d(this,t,e,n)},r.prototype.createAnalyser=function(){return new m(this)},r.prototype.createGain=function(){return new v(this)},r.prototype.createDelay=function(t){var e=new o(this,"createDelay",[{name:"maxDelayTime",type:"optional number"}]);return e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),t=i.defaults(t,1),new g(this,t)},r.prototype.createBiquadFilter=function(){return new y(this)},r.prototype.createWaveShaper=function(){return new b(this)},r.prototype.createPanner=function(){return new _(this)},r.prototype.createConvolver=function(){return new w(this)},r.prototype.createChannelSplitter=function(t){var e=new o(this,"createChannelSplitter",[{name:"numberOfOutputs",type:"optional number"}]);return e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),t=i.defaults(t,6),new x(this,t)},r.prototype.createChannelMerger=function(t){var e=new o(this,"createChannelMerger",[{name:"numberOfInputs",type:"optional number"}]);return e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),t=i.defaults(t,6),new E(this,t)},r.prototype.createDynamicsCompressor=function(){return new T(this)},r.prototype.createOscillator=function(){return new C(this)},r.prototype.createPeriodicWave=function(t,e){function n(t,e){return 4096<t.length?"length of "+e+" array ("+t.length+") exceeds allow maximum of 4096":void 0}var r=new o(this,"createPeriodicWave",[{name:"real",type:"Float32Array",validate:n},{name:"imag",type:"Float32Array",validate:n}]);return r.validateArguments(arguments,function(t){throw new TypeError(r.form+"; "+t)}),r.assert(t.length===e.length,function(){throw new TypeError(r.form+"; length of real array ("+t.length+") and length of imaginary array ("+e.length+") must match")}),new S(t,e)},r.prototype.toJSON=function(){return this.destination.toJSON([])},r.prototype.$process=function(t){this._process(i.toMicroseconds(t))},r.prototype.$processTo=function(t){t=i.toMicroseconds(t),this._microCurrentTime<t&&this._process(t-this._microCurrentTime)},r.prototype.$reset=function(){this._microCurrentTime=0,this._processedSamples=0,this.destination.$inputs.forEach(function(t){t.disconnect()})},r.prototype._process=function(t){for(var e=this._microCurrentTime+t;this._microCurrentTime<e;){var n=Math.min(this._microCurrentTime+1e3,e),r=Math.floor(n/1e6*this.sampleRate),i=r-this._processedSamples;this._microCurrentTime=n,this._processedSamples=r,this.destination.$process(i,++this._tick)}},t.exports=a.AudioContext=r},function(t,e,n){"use strict";function r(t){o.call(this,t,{name:"AudioDestinationNode",numberOfInputs:1,numberOfOutputs:0,channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"});var e=2;i.defineAttribute(this,"maxChannelCount","readonly",e,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(29),o=n(81),a=n(28),s=function(){throw new TypeError("Illegal constructor")};i.inherits(s,o),i.inherits(r,s),r.exports=s,t.exports=a.AudioDestinationNode=r},function(t,e,n){"use strict";function r(t){var e=1,n=343.3;i.defineAttribute(this,"dopplerFactor","number",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"speedOfSound","number",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$name:{value:"AudioListener"},$context:{value:t}})}var i=n(29),o=n(122),a=n(28),s=function(){throw new TypeError("Illegal constructor")};i.inherits(r,s),r.exports=s,s.prototype.setPosition=function(){var t=new o(this,"setPosition",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},s.prototype.setOrientation=function(){var t=new o(this,"setOrientation",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"},{name:"xUp",type:"number"},{name:"yUp",type:"number"},{name:"zUp",type:"number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},s.prototype.setVelocity=function(){var t=new o(this,"setVelocity",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},t.exports=a.AudioListener=r},function(t,e,n){"use strict";function r(t){return t.hasOwnProperty("$id")?t.$name+"#"+t.$id:t.$name}t.exports=r},function(t,e,n){"use strict";function r(t){var e=0;if("number"==typeof t)return e=Math.floor(1e3*t*1e3)||0,Math.max(i,Math.min(e,o));var n=/^([0-5]\d):([0-5]\d)\.(\d\d\d)$/.exec(t);return n?(e+=+n[1],e*=60,e+=+n[2],e*=1e3,e+=+n[3],e*=1e3,Math.max(i,Math.min(e,o))):e}var i=0,o=864e8;t.exports=r},,,,,function(t,e,n){"use strict";function r(t){return new Promise(function(e){var n=t.bus.onValue(function(t){n(),e({value:t})})})}var i=function(t){return t&&t.__esModule?t:{"default":t}},o=function(t){return t&&t.__esModule?t["default"]:t},a=o(n(38)),s=i(n(263));describe("CollectionActions",function(){describe("loadCollection(url)",function(){it("should load the collection",a.wrap(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.loadCollection("/spec/app/fixtures"),e=r(s.startLoading),n=r(s.finishLoading),t.next=5,e;case 5:return expect(t.sent.value).to.deep.equal({url:"/spec/app/fixtures"}),t.next=8,n;case 8:expect(t.sent.value.songs).to.be.an["instanceof"](Array);case 9:case"end":return t.stop()}},t,this)}))),it("should call errorLoading when cannot load",a.wrap(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.loadCollection("/spec/app/fixtures/nonexistant"),t.next=3,r(s.errorLoading);case 3:case"end":return t.stop()}},e,this)})))})})},function(t,e,n){(function(t){"use strict";var e=n(278).loadSongFromResources;describe("SongLoader",function(){function n(e){return Promise.resolve(new t(e).buffer)}var r={"01.bme":{read:function(){return n("#TITLE meow [NORMAL]\n#BPM 90\n#00111:01")}},"02.bms":{read:function(){return n("#TITLE meow [HYPER]\n#BPM 90\n#00111:01")}},"03.bml":{read:function(){return n("#TITLE meow [ANOTHER]\n#BPM 100\n#00111:01")}}},i={fileList:Promise.resolve(["01.bme","02.bms","03.bml"]),file:function(t){return Promise.resolve(r[t])}},o=void 0;before(function(){var t={onMessage:function(t){return console.log(t)}};return Promise.resolve(e(i,t)).tap(function(t){return o=t})}),it("should have correct title",function(){expect(o.title).to.equal("meow")}),it("should have correct number of charts",function(){expect(o.charts).to.have.length(3)}),it("should have resources key pointing to the resources",function(){expect(o.resources).to.equal(i)})})}).call(e,n(119).Buffer)},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}},i=function(t){return t&&t.__esModule?t["default"]:t},o=i(n(51)),a=i(n(12)),s=i(n(38)),u=n(397).MusicSelectStoreFactory,c=i(n(396)),l=r(n(263)),f=r(n(277));describe("MusicSelectStore",function(){var t=void 0,e=void 0,n="/spec/app/fixtures/index.json";before(s.wrap(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve(o.get(n));case 2:e=t.sent;case 3:case"end":return t.stop()}},r,this)}))),beforeEach(function(){t=u(c)}),describe("during loading",function(){beforeEach(function(){l.startLoading({url:n})}),it("loading should be true",function(){void expect(t.get().loading).to.be["true"]}),it("songs should be empty array",function(){expect(t.get().songs).to.deep.equal([])})}),describe("after loading",function(){beforeEach(function(){l.startLoading({url:n}),l.finishLoading(e)}),it("loading should be false",function(){void expect(t.get().loading).to.be["false"]}),describe("songs",function(){it("should be list of all songs",function(){expect(t.get().songs).to.have.length(e.songs.length)}),it("first song should be tutorial",function(){void expect(!!t.get().songs[0].tutorial).to.be["true"]}),it("selected song should be tutorial",function(){void expect(!!t.get().song.tutorial).to.be["true"]})}),it("should select first matching song+chart when filtered",function(){f.setFilterText("toki"),expect(t.get().songs[0].title).to.equal("Toki"),expect(t.get().song).to.equal(t.get().songs[0]),expect(t.get().chart.file).to.equal("toki_beginner7.bms")}),it("should set song when selected",function(){f.selectSong(a.find(t.get().songs,{title:"mom"})),expect(t.get().song.artist).to.equal("w_tre"),expect(t.get().chart.file).to.equal("mom_s1.bme")}),it("should select and set chart with nearby level",function(){f.selectSong(a.find(t.get().songs,{title:"mom"})),f.selectChart(a.find(t.get().song.charts,{file:"mom_s4.bme"})),expect(t.get().chart.info.level).to.equal(12),f.selectSong(a.find(t.get().songs,{title:"L"})),expect(t.get().chart.file).to.equal("L_[SPA](XEIR).bme")}),describe("groups",function(){it("there should be more than 1 group",function(){expect(t.get().groups.length).to.be.at.least(2)}),it("first group should be tutorial, having only one song",function(){expect(t.get().groups[0].title).to.equal("Tutorial"),expect(t.get().groups[0].songs).to.have.length(1)}),it("should eliminate empty groups",function(){f.setFilterText("wowwwwwwww"),void expect(t.get().groups).to.be.empty})}),describe("custom songs",function(){beforeEach(function(){f.setCustomSong({id:"meow",title:"meow!",artist:"lol",genre:"keyboard cat",bpm:123,custom:!0,charts:[{file:"01.bme",md5:"d41d8cd98f00b204e9800998ecf8427e",info:{title:"meow!",artist:"lol",genre:"keyboard cat",difficulty:2,level:1},noteCount:1,scratch:!0,keys:"7K"}]})}),it("should select the custom song",function(){expect(t.get().song.id).to.equal("meow")}),it("should display custom song at the top",function(){expect(t.get().songs[0].id).to.equal("meow")})})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(t){return t&&t.__esModule?t:{"default":t}},o=i(n(395)),a=r(n(238)),s=i(n(130));describe("OptionsStore",function(){var t=void 0,e=void 0;beforeEach(function(){t=o.getStorage(),e={},o.setStorage({getItem:function(t){return e[t]},setItem:function(t,n){e[t]=String(n)}}),s.reload()}),afterEach(function(){o.setStorage(t)}),it("should contains options",function(){e["player.P1.mode"]="KB",s.reload(),expect(a.get().options["player.P1.mode"]).to.equal("KB"),e["player.P1.mode"]="BM",s.reload(),expect(a.get().options["player.P1.mode"]).to.equal("BM")}),it("should allow setting options",function(){e["player.P1.mode"]="KB",s.reload(),expect(a.get().options["player.P1.mode"]).to.equal("KB"),s.setOptions({"player.P1.mode":"BM"}),expect(e["player.P1.mode"]).to.equal("BM"),expect(a.get().options["player.P1.mode"]).to.equal("BM")}),it("should allow setting mode",function(){s.setMode("BM"),expect(e["player.P1.mode"]).to.equal("BM"),s.setMode("KB"),expect(e["player.P1.mode"]).to.equal("KB")}),it("should allow setting scratch position",function(){s.setScratch("left"),expect(e["player.P1.mode"]).to.equal("BM"),expect(e["player.P1.scratch"]).to.equal("left"),expect(a.get().scratch).to.equal("left"),s.setScratch("right"),expect(e["player.P1.mode"]).to.equal("BM"),expect(e["player.P1.scratch"]).to.equal("right"),expect(a.get().scratch).to.equal("right"),s.setScratch("off"),expect(e["player.P1.mode"]).to.equal("KB"),expect(e["player.P1.scratch"]).to.equal("right"),expect(a.get().scratch).to.equal("off")})})},function(t,e,n){"use strict";var r=n(519).Cachier;describe("Cachier",function(){var t=void 0,e=0,n=function(t){return function(e){return function(){var n=function(r){var i=Promise.resolve().then(e);return r>=t?i:i["catch"](function(){return Promise.delay(100).then(function(){return n(r+1)})})};return n(1)}}};beforeEach(function(){return t=new r("test."+(new Date).getTime()+"."+ ++e)}),afterEach(n(3)(function(){return t.destroyDatabase()})),describe(".connection",function(){it("should be a promise which fullfill with the db connection",function(){return t.connection.then(function(t){expect(t.constructor+"").to.match(/DBDatabase/)})})}),describe("#save",function(){it("stores a blob",function(){var e=new Blob(["hello"]);return expect(t.save("wow",e)).to.eventually.be.ok}),it("rejects when key is invalid",function(){var e=new Blob(["hello"]);return expect(t.save(void 0,e)).to.be.rejected})}),describe("with a blob saved",function(){beforeEach(function(){var e=new Blob(["hello"]);return t.save("wow2",e,{name:"example1"}).delay(10)}),describe("#load",function(){it("should return the blob value",function(){return t.load("wow2").then(function(t){var e=t.blob,n=t.metadata;expect(e.size).to.equal(5),expect(n).to.deep.equal({name:"example1"})})})}),describe("#save",function(){it("should replace content with a new blob",function(){var e=new Blob(["world!"]);return t.save("wow2",e).delay(10).then(function(){return t.load("wow2")}).then(function(t){var e=t.blob,n=t.metadata;expect(e.size).to.equal(6),expect(n).to.equal(void 0)})})}),describe("#delete",function(){it("should remove the blob",function(){return t["delete"]("wow3").then(function(){return expect(t.load("wow3")).to.be.rejected})})})}),describe("#destroyDatabase",function(){it("may be called twice",function(){return t.destroyDatabase()})}),describe("without blob support in IndexedDB",function(){it("still works",function(){var e=new Blob(["hello"],{type:"text/plain"});return t._NO_BLOB=!0,t.save("wow4",e).delay(10).then(function(){return t.load("wow4")}).then(function(t){var e=t.blob;expect(e.size).to.equal(5),expect(e.type).to.equal("text/plain")})})})})},function(t,e,n){"use strict";describe("The specs",function(){it("runs",function(){expect({runs:!0}.runs).to.equal(!0)})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(267)),o=n(276).playerWithBMS;describe("PlayerAudio",function(){function t(t){e=t,r={playAuto:sinon.stub().returns({}),playNote:sinon.stub().returns({}),playFree:sinon.stub().returns({})},n=new i({player:e,waveFactory:r})}var e=void 0,n=void 0,r=void 0;it("should play autokeysounds on correct time",function(){t({notechart:{autos:[{time:1,keysound:"0x"},{time:2,keysound:"0y"},{time:2,keysound:"0z"}],notes:[]},options:{autosound:!1}}),n.update(0),expect(r.playAuto).to.have.callCount(0),n.update(1),expect(r.playAuto).to.have.callCount(1),expect(r.playAuto).to.have.been.calledWith("0x"),n.update(2),expect(r.playAuto).to.have.callCount(3)}),it("should play notes automatically when autosound is on",function(){t({notechart:{autos:[],notes:[{time:1,keysound:"0x"}]},options:{autosound:!0}}),n.update(1),expect(r.playNote).to.have.been.calledWith("0x")}),it("should not play notes automatically when autosound is off",function(){t({notechart:{autos:[],notes:[{time:1,keysound:"0x"}]},options:{}}),n.update(1),void expect(r.playNote).to.not.have.been.called}),it("should play notes ahead of time",function(){t({notechart:{autos:[{time:1,keysound:"0x"}],notes:[]},options:{}}),n.update(.999),expect(r.playAuto).to.have.been.calledWith("0x"),expect(r.playAuto.getCall(0).args[1]).to.be.closeTo(.001,1e-5)}),it("should play hit notes",function(){t(o()),n.update(.999,{notifications:{sounds:[{note:{keysound:"0x"},type:"hit",judgment:1}]},stats:{}}),expect(r.playNote).to.have.been.calledWith("0x")}),it("badly hit note should sound off-pitch",function(){t(o());var e={bad:sinon.stub()};r.playNote.returns(e),n.update(.999,{notifications:{sounds:[{note:{keysound:"0x"},type:"hit",judgment:4}]},stats:{}}),void expect(e.bad).to.have.been.called}),it("should work even without audio",function(){t(o()),r.playNote.returns(null),n.update(.999,{notifications:{sounds:[{note:{keysound:"0x"},type:"hit",judgment:4}]},stats:{}})}),it("should stop sound when broken",function(){t(o());var e={keysound:"0x"},i={stop:sinon.spy()};r.playNote.returns(i),n.update(.999,{notifications:{sounds:[{note:e,type:"hit"}]},stats:{}}),n.update(1.1,{notifications:{sounds:[{note:e,type:"break"}]},stats:{}}),void expect(i.stop).to.have.been.called}),it("should play sounds when hitting blank space",function(){t(o()),n.update(.999,{notifications:{sounds:[{note:{keysound:"0x"},type:"free"}]},stats:{}}),expect(r.playFree).to.have.been.calledWith("0x")}),it("should play hit note once",function(){
t(o());var e={keysound:"0x"};n.update(.999,{notifications:{sounds:[{note:e,type:"hit"}]},stats:{}}),n.update(1,{notifications:{sounds:[{note:e,type:"hit"}]},stats:{}}),expect(r.playNote).to.have.callCount(1)})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(268));describe("WaveFactory",function(){var t=void 0,e=void 0,n=void 0,r=void 0,o=void 0;beforeEach(function(){t={},e={play:sinon.stub()},n={"wow.wav":e},r={"0z":"wow.wav"},o=new i(t,n,r)}),describe("playAuto",function(){it("should play an autokeysound",function(){o.playAuto("0z",.1),expect(e.play).to.have.been.calledWith(.1)})}),describe("playNote",function(){it("should play the keysound",function(){o.playNote("0z",.1),expect(e.play).to.have.been.calledWith(.1)}),it("should stop old sound",function(){var t={stop:sinon.spy()};return e.play.returns(t),o.playNote("0z",0),o.playNote("0z",0),Promise.delay(0).then(function(){return expect(t.stop).to.have.callCount(1)})})}),describe("playFree",function(){it("should play the keysound",function(){o.playFree("0z"),void expect(e.play).to.have.been.called})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(228));describe("NoteArea",function(){it("allows querying the visible note from a list of notes",function(){var t=[{position:1,column:"A"},{position:2,column:"A"},{position:3,column:"A"},{position:4,column:"A"},{position:5,column:"A"},{position:6,column:"A"},{position:10,end:{position:12},column:"B"},{position:11,column:"C"}],e=new i(t,[]);expect(e.getVisibleNotes(1.5,3.5)).to.have.length(2),expect(e.getVisibleNotes(2.5,3.5,1)).to.have.length(2),expect(e.getVisibleNotes(-1,7)).to.have.length(6),expect(e.getVisibleNotes(8,10.1)).to.have.length(1),expect(e.getVisibleNotes(8,10.1)).to.have.length(1),expect(e.getVisibleNotes(8,14)).to.have.length(2),expect(e.getVisibleNotes(11.5,14)).to.have.length(1),expect(e.getVisibleNotes(12.5,14)).to.have.length(0)}),it("allows querying barlines",function(){var t=new i([],[{beat:0,position:0},{beat:4,position:4},{beat:7,position:7}]);expect(t.getVisibleBarLines(1.5,4.5)).to.have.length(1)})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(229)),o=n(276),a=o.tap,s=o.notechart,u=o.playerWithBMS;describe("PlayerDisplay",function(){function t(t){o=new i(t)}function e(t,e,n){c=o.update(t,e,n)}function n(){return{speed:1,input:{get:function(){return{value:0,changed:!1}}},notifications:{judgments:[]},getNoteStatus:sinon.stub().returns("unjudged"),getNoteJudgment:sinon.stub().returns(0),stats:{score:0}}}function r(t){return Object.assign(n(),t)}var o=void 0,c=void 0;it("reacts to input",function(){var n=function(t){return r({input:new Map(t)})};t({notechart:s(),columns:["wow"],options:{placement:"center",scratch:"left"}}),e(555,.5,n([["wow",{value:0,changed:!1}]])),expect(c.wow_active).to.equal(0),e(557,2.5,n([["wow",{value:1,changed:!0}]])),expect(c.wow_active).to.equal(1),expect(c.wow_down).to.equal(557),e(558,3.5,n([["wow",{value:0,changed:!0}]])),expect(c.wow_active).to.equal(0),expect(c.wow_up).to.equal(558)}),describe("with note",function(){beforeEach(function(){t(u("#BPM 60\n#00111:11"))}),it("displays unjudged notes",function(){e(3.95,3.95,n()),expect(c.note_1).to.have.length(1)}),it("hides judged notes",function(){var t=a(n(),function(t){return t.getNoteStatus.returns("judged")});e(3.95,3.95,t),void expect(c.note_1).to.be.empty})}),describe("with long note",function(){beforeEach(function(){t(u("#BPM 60\n#00151:1111"))}),it("displays unjudged long notes",function(){e(3.95,3.95,n()),expect(c.longnote_1).to.have.length(1),void expect(c.longnote_1[0].active).to.be["false"],void expect(c.longnote_1[0].missed).to.be["false"]}),it("displays holding long notes",function(){var t=a(n(),function(t){return t.getNoteJudgment.returns(1)});e(3.95,3.95,t),void expect(c.longnote_1[0].active).to.be["true"]}),it("displays holding long notes event it is bad",function(){var t=a(n(),function(t){return t.getNoteJudgment.returns(4)});e(3.95,3.95,t),void expect(c.longnote_1[0].active).to.be["true"]}),it("displays missed long notes",function(){var t=n();t.getNoteJudgment.returns(-1),t.getNoteStatus.returns("judged"),e(3.95,3.95,t),void expect(c.longnote_1[0].missed).to.be["true"]})}),describe("with notification",function(){beforeEach(function(){t(u())}),it("sets judgment time",function(){var t={judgment:1,delta:0,combo:123,column:"SC"};e(12,34,r({notifications:{judgments:[t]}})),expect(c.judge_1).to.equal(12)}),it("sets judgment missed time",function(){var t={judgment:-1,delta:0,combo:0,column:"SC"};e(12,34,r({notifications:{judgments:[t]}})),expect(c.judge_missed).to.equal(12)}),it("sets combo",function(){var t={judgment:1,delta:0,combo:123,column:"SC"};e(12,34,r({notifications:{judgments:[t]}})),expect(c.combo).to.equal(123)}),it("sets note explode time",function(){var t={judgment:1,delta:0,combo:123,column:"SC"};e(12,34,r({notifications:{judgments:[t]}})),expect(c.SC_explode).to.equal(12)}),it("does not set note explode time if missed",function(){var t={judgment:-1,delta:0,combo:123,column:"SC"};e(12,34,r({notifications:{judgments:[t]}})),void expect(c.SC_explode).to.be.empty})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(135));describe("GameInput",function(){var t=void 0,e=void 0;beforeEach(function(){t=new i,e={out:{},get:function(){return this.out}},t.use(e)}),it("should return control with default value of 0",function(){expect(t.get("wow").value).to.equal(0)}),describe("Control#value",function(){it("should return control with correct value",function(){e.out={wow:-1},t.update(),expect(t.get("wow").value).to.equal(-1)})}),describe("Control#changed",function(){it("should return changed state between last update",function(){t.update(),expect(t.get("wow").changed).to.equal(!1),e.out={wow:0},t.update(),expect(t.get("wow").changed).to.equal(!1),e.out={wow:-1},t.update(),expect(t.get("wow").changed).to.equal(!0),e.out={wow:1},t.update(),expect(t.get("wow").changed).to.equal(!0),e.out={wow:1},t.update(),expect(t.get("wow").changed).to.equal(!1),t.update(),expect(t.get("wow").changed).to.equal(!1),e.out={wow:0},t.update(),expect(t.get("wow").changed).to.equal(!0)})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(23)),o=r(n(269));describe("TouchPlugin",function(){it("should get value when touching",function(){var t=new o({refs:{p1_1:new Set([{getBounds:function(){return new i.Rectangle(64,64,64,64)}}]),p1_2:new Set([{getBounds:function(){return new i.Rectangle(128,64,64,64)}}])},input:[{x:72,y:72,id:"touch1"},{x:32,y:32,id:"touch2"}]}),e=t.get();expect(e.p1_1).to.equal(1),expect(e.p1_2).to.equal(0)})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(270));xdescribe("SamplesLoader",function(){var t,e,n;beforeEach(function(){t={file:sinon.stub()},e={sample:sinon.stub()},n=new i(t,e)}),describe("#loadFiles",function(){it("should not include undecodable audio",function(){return t.file.returns(Promise.reject()),t.file.withArgs("a.wav").returns(Promise.resolve({read:function(){return Promise.resolve("ok1")}})),e.sample.withArgs("ok1").returns(Promise.reject(new Error(".."))),expect(n.loadFiles(["a.wav"])).to.eventually.deep.eq({})}),it("should try mp3",function(){return t.file.returns(Promise.reject()),t.file.withArgs("a.mp3").returns(Promise.resolve({read:function(){return Promise.resolve("ok1")}})),e.sample.withArgs("ok1").returns(Promise.resolve("ok2")),expect(n.loadFiles(["a.wav"])).to.eventually.deep.eq({"a.wav":"ok2"})}),it("should not include failed matches",function(){return t.file.returns(Promise.reject()),expect(n.loadFiles(["a.wav"])).to.eventually.deep.eq({})})})})},function(t,e,n){"use strict";var r=n(276).notechart;describe("Notechart",function(){describe(".fromBMSChart",function(){it("should work",function(){var t=r("#00116:01\n#00101:02");expect(t.notes).to.have.length(1),expect(t.autos).to.have.length(1),expect(t.notes[0].beat).to.equal(4)}),it("should work with long notes",function(){var t=r("#00151:0101");expect(t.notes).to.have.length(1),expect(t.notes[0].beat).to.equal(4),expect(t.notes[0].end.beat).to.equal(6)})}),describe("scratch off",function(){it("should move scratch to autokeysounds",function(){var t=r("#00116:01\n#00101:02",{scratch:"off"});expect(t.notes).to.have.length(0),expect(t.autos).to.have.length(2)})}),describe("#samples",function(){it("should return an array of all used samples",function(){var t=r("#WAV0X wow.wav\n#00101:0x0x");expect(t.samples).to.deep.equal(["wow.wav"])})}),describe("#duration",function(){it("should return the duration of notechart",function(){var t=r("#00111:0101");expect(t.duration).to.equal(6)}),it("should work with long notes",function(){var t=r("#00151:0101");expect(t.duration).to.equal(6)})}),describe("#keysounds",function(){it("should return an object of all keysounds",function(){var t=r("#WAV0X wow.wav\n#WAV0Y wow.wav\n#WAV0Z foon.wav\n#00101:0x0x0y0y0Z0Z");expect(t.keysounds).to.deep.equal({"0x":"wow.wav","0y":"wow.wav","0z":"foon.wav"})})}),describe("#barLines",function(){it("should return the list of beat with barlines",function(){var t=r("#00111:0001\n#00102:0.75");expect(t.barLines).to.deep.equal([{beat:0,position:0},{beat:4,position:4},{beat:7,position:7}])}),it("should consider long notes",function(){var t=r("#00151:0001\n#00251:0001");expect(t.barLines).to.deep.equal([{beat:0,position:0},{beat:4,position:4},{beat:8,position:8},{beat:12,position:12}])})}),describe("#secondsToBeat",function(){it("should convert seconds to beat",function(){var t=r("#BPM 120");expect(t.secondsToBeat(1)).to.equal(2)})}),describe("#secondsToPosition",function(){it("should convert seconds to position",function(){var t=r("#BPM 120");expect(t.secondsToPosition(1)).to.equal(2)})}),describe("#columns",function(){it("should return columns in notechart",function(){var t=r("#00111:11");expect(t.columns).to.deep.equal(["SC","1","2","3","4","5","6","7"])})}),describe("#info",function(){it("normal note should have 1 combo",function(){var t=r("#00111:11");expect(t.info(t.notes[0]).combos).to.equal(1)}),it("long note should have 2 combos",function(){var t=r("#00151:1111");expect(t.info(t.notes[0]).combos).to.equal(2)})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(231)),o=r(n(136)),a=r(n(135)),s=n(276).notechart;describe("PlayerState",function(){it("updates the input",function(){var t=new i({number:1,columns:["wow"],notechart:s(""),options:{speed:1}}),e={get:function(t){return{name:t}}};t.update(0,e),expect(t.input.get("wow").name).to.equal("p1_wow")}),describe("with player and chart",function(){function t(t){var e=void 0===arguments[1]?{speed:1}:arguments[1];n=s(t),r=new o(n,1,e),u=new i(r),c=new a,l={},c.use({get:function(){return l}})}function e(t,e){l=e,c.update(),u.update(t,c)}var n=void 0,r=void 0,u=void 0,c=void 0,l=void 0;describe("node judging",function(){it("judges notes",function(){t("\n          #BPM 120\n          #00111:0101\n        ");var r=n.notes[0].column;expect(u.getNoteStatus(n.notes[0])).to.equal("unjudged"),expect(u.stats.combo).to.equal(0),expect(u.stats.poor).to.equal(!1),expect(u.stats.totalCombo).to.equal(2),void expect(u.notifications.judgments).to.be.empty,e(1.999,{}),expect(u.getNoteStatus(n.notes[0])).to.equal("unjudged"),e(2,{p1_1:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteJudgment(n.notes[0])).to.equal(1),expect(u.getNoteStatus(n.notes[1])).to.equal("unjudged"),expect(u.notifications.judgments[0]).to.deep.equal({judgment:1,combo:1,delta:0,column:r}),expect(u.stats.poor).to.equal(!1),e(2.1,{p1_1:0}),e(5,{p1_1:0}),expect(u.getNoteStatus(n.notes[1])).to.equal("judged"),expect(u.getNoteJudgment(n.notes[1])).to.equal(-1),expect(u.notifications.judgments[0]).to.deep.equal({judgment:-1,combo:0,delta:2,column:r}),expect(u.stats.poor).to.equal(!0)}),it("judges multiple notes in different column",function(){t("\n          #BPM 120\n          #00111:01\n          #00112:01\n        "),e(2,{p1_1:1,p1_2:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteStatus(n.notes[1])).to.equal("judged")}),it("judges single note from one column at a time",function(){t("\n          #BPM 480\n          #00111:01010100000000000000000000000000\n        "),e(.531,{p1_1:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteStatus(n.notes[1])).to.equal("unjudged"),expect(u.getNoteStatus(n.notes[2])).to.equal("unjudged"),e(.531,{p1_1:0}),e(.531,{p1_1:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteStatus(n.notes[1])).to.equal("judged"),expect(u.getNoteStatus(n.notes[2])).to.equal("unjudged"),e(.531,{p1_1:0}),e(.531,{p1_1:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteStatus(n.notes[1])).to.equal("judged"),expect(u.getNoteStatus(n.notes[2])).to.equal("judged"),expect(u.getNoteJudgment(n.notes[0])).to.gt(1),expect(u.getNoteJudgment(n.notes[1])).to.eq(1),expect(u.getNoteJudgment(n.notes[2])).to.gt(1)}),it("leaves note unjudged when bad and there are closer note",function(){t("\n          #BPM 120\n          #00111:01010100000000000000000000000000\n        "),e(2.125,{p1_1:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("unjudged"),expect(u.getNoteStatus(n.notes[1])).to.equal("judged"),expect(u.getNoteStatus(n.notes[2])).to.equal("unjudged")}),describe("with long note",function(){var r=void 0;beforeEach(function(){t("\n            #BPM 120\n            #00151:0101\n          "),r=n.notes[0]}),it("judges long note",function(){e(2,{p1_1:1}),expect(u.getNoteStatus(r)).to.equal("active"),expect(u.getNoteJudgment(r)).to.equal(1),expect(u.notifications.judgments[0].judgment).to.equal(1),e(3,{p1_1:0}),expect(u.getNoteStatus(r)).to.equal("judged"),expect(u.getNoteJudgment(r)).to.equal(1),expect(u.notifications.judgments[0].judgment).to.equal(1)}),it("judges missed long note",function(){e(2.3,{p1_1:1}),expect(u.getNoteStatus(r)).to.equal("judged"),expect(u.getNoteJudgment(r)).to.equal(-1)}),it("judges long note lifted too fast as missed",function(){e(2,{p1_1:1}),e(2.01,{p1_1:0}),expect(u.getNoteStatus(r)).to.equal("judged"),expect(u.getNoteJudgment(r)).to.equal(-1)}),it("judges long note lifted too slow as missed",function(){e(2,{p1_1:1}),e(4,{p1_1:1}),expect(u.getNoteStatus(r)).to.equal("judged"),expect(u.getNoteJudgment(r)).to.equal(-1),expect(u.notifications.judgments[0]).to.deep.equal({judgment:-1,combo:0,delta:1,column:r.column})})}),describe("with long scratch note",function(){var r=void 0;beforeEach(function(){t("\n            #BPM 120\n            #00156:0101\n          "),r=n.notes[0]}),it("ends automatically",function(){e(2,{p1_SC:1}),expect(u.getNoteStatus(r)).to.equal("active"),expect(u.getNoteJudgment(r)).to.equal(1),expect(u.notifications.judgments[0].judgment).to.equal(1),e(4,{p1_SC:1}),expect(u.getNoteStatus(r)).to.equal("judged"),expect(u.getNoteJudgment(r)).to.equal(1),expect(u.notifications.judgments[0].judgment).to.equal(1)})}),describe("with long scratch note next to each other",function(){beforeEach(function(){t("\n#BPM 120\n#00156:0100000000000000000000000000000000000000000000000000000000000001\n#00256:0100000000000000000000000000000000000000000000000000000000000001\n          ")}),it("should switch to next one on change",function(){e(2,{p1_SC:1}),e(4,{p1_SC:-1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteStatus(n.notes[1])).to.equal("active")})}),describe("sound notifications",function(){it("notifies of note hit",function(){t("\n            #BPM 120\n            #00111:0102\n          "),e(2,{p1_1:1}),expect(u.notifications.sounds[0].note).to.equal(n.notes[0]),expect(u.notifications.sounds[0].type).to.equal("hit")}),it("should notify missed notes as break",function(){t("\n            #BPM 120\n            #00111:01\n          "),e(5,{p1_1:0}),expect(u.notifications.sounds[0].note).to.equal(n.notes[0]),expect(u.notifications.sounds[0].type).to.equal("break")}),it("notifies of free keysound hit",function(){t("\n            #BPM 60\n            #00111:01\n            #00211:02\n          "),e(4,{p1_1:1}),e(4,{p1_1:0}),e(4,{p1_1:1}),expect(u.notifications.sounds[0].note).to.equal(n.notes[0]),expect(u.notifications.sounds[0].type).to.equal("free"),e(4,{p1_1:0}),void expect(u.notifications.sounds).to.be.empty,e(5,{p1_1:1}),expect(u.notifications.sounds[0].note).to.equal(n.notes[0]),e(5,{p1_1:0}),e(6.5,{p1_1:1}),expect(u.notifications.sounds[0].note).to.equal(n.notes[0]),e(6.5,{p1_1:0}),e(7.5,{p1_1:1}),expect(u.notifications.sounds[0].note).to.equal(n.notes[1])})})}),describe("speed",function(){it("infers speed from player",function(){t("",{speed:2}),expect(u.speed).to.equal(2)}),it("updates speed on dedicated buttons",function(){t("",{speed:2}),e(1,{p1_speedup:1}),expect(u.speed).to.equal(2.5),e(1.2,{p1_speedup:0,p1_speeddown:1}),expect(u.speed).to.equal(2)}),it("supports fine-grained speed modifications",function(){t("",{speed:2}),e(1,{p1_speedup:1,select:1}),expect(u.speed).to.equal(2.1)}),it("supports pinching to zoom",function(){t("",{speed:2}),e(1,{p1_pinch:300}),e(1.2,{p1_pinch:450}),expect(u.speed).to.equal(3)})}),describe("finish",function(){it("should become true when song is finished",function(){t("#00111:0101"),expect(u.finished).to.equal(!1),e(4,{}),expect(u.finished).to.equal(!1),e(16,{}),expect(u.finished).to.equal(!0)})})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(232)),o=n(276).notechart;describe("PlayerStats",function(){describe("#score",function(){it("returns the score",function(){var t=new i(o("#00111:1111111111"));expect(t.score).to.equal(0),t.handleJudgment(1),t.handleJudgment(1),t.handleJudgment(1),t.handleJudgment(1),t.handleJudgment(1),expect(t.score).to.equal(555555)})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}},i=function(t){return t&&t.__esModule?t["default"]:t},o=i(n(111)),a=r(n(75));describe("ProgressFormatters",function(){describe("BYTES_FORMATTER",function(){it("should return blank for indeterminate",function(){var t=new o;expect(a.BYTES_FORMATTER(t)).to.equal("")}),it("should format as human readable size",function(){var t=new o;t.report(1,1024),expect(a.BYTES_FORMATTER(t)).to.equal("1b / 1kb")})}),describe("EXTRA_FORMATTER",function(){it("should just use the extra",function(){var t=new o;t.report(1,1024,"one.wav"),expect(a.EXTRA_FORMATTER(t)).to.equal("one.wav")})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(111));describe("Progress",function(){describe("#watch",function(){it("should report current progress when watched",function(){var t=new i,e=sinon.spy();t.report(1,10),t.watch(e),expect(e).to.have.callCount(1),expect(e).to.have.been.calledWith(t)})}),describe("#toString",function(){it("should return blank string when no progress",function(){var t=new i;expect(t.toString()).to.equal("")}),it("should return a string representation of the progress",function(){var t=new i;t.report(1,10),expect(t.toString()).to.equal("1 / 10")}),it("should use a formatter",function(){var t=new i;t.report(1,10),t.formatter=function(t){return t.progress+""},expect(t.toString()).to.equal("0.1")})}),describe("#report",function(){it("should fire to all watchers",function(){var t=new i,e=sinon.spy();t.report(1,10),t.report(2,10),t.watch(e),t.report(3,10),t.report(4,10),expect(e).to.have.callCount(3)}),it("should return a function to unsubscribe",function(){var t=new i,e=sinon.spy();t.report(1,10),t.report(2,10);var n=t.watch(e);t.report(3,10),n(),t.report(4,10),expect(e).to.have.callCount(2)})}),describe("#progress",function(){it("returns progress in fraction",function(){var t=new i;t.report(1,10),expect(t.progress).to.equal(.1)}),it("returns null in unavailable",function(){var t=new i;expect(t.progress).to.equal(null)})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}},i=function(t){return t&&t.__esModule?t["default"]:t},o=i(n(111)),a=r(n(76));describe("ProgressUtils",function(){describe(".fixed",function(){it("should report for fixed number of items",function(){var t=new o,e=a.fixed(10,t);expect(t.current).to.equal(0),expect(t.total).to.equal(10),e("wow"),expect(t.current).to.equal(1),expect(t.total).to.equal(10),expect(t.extra).to.equal("wow")})}),describe(".wrapPromise",function(){it("should report number of fulfilled promises",function(){var t=new o,e=a.wrapPromise(t,function(t){return t}),n=(e(new Promise(function(){})),e(Promise.resolve(1))),r=(e(Promise.reject(new Error("no"))),e(Promise.resolve(3)));return Promise.all([n,r]).then(function(){expect(t.current).to.equal(2),expect(t.total).to.equal(4)})})}),describe(".bind",function(){it("should bind from one progress to another",function(){var t=new o,e=new o;t.report(10,20),a.bind(t,e),expect(e.current).to.equal(10),expect(e.total).to.equal(20),t.report(15,25),expect(e.current).to.equal(15),expect(e.total).to.equal(25)})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(271));describe("BemusePackageResources",function(){describe("#file",function(){var t;beforeEach(function(){t=new i("/spec/resources/fixtures/a/")}),it("returns a file",function(){return expect(t.file("do.mp3")).to.be.fulfilled}),it("rejects if file not found",function(){return expect(t.file("wow.mp3")).to.be.rejected}),it("can be read",function(){return expect(t.file("mi.mp3").then(function(t){return t.read()}).then(function(t){return t.byteLength})).to.eventually.eq(30093)}),it("cannot read if not bemuse file",function(){return t=new i("/spec/resources/fixtures/b/"),expect(t.file("do.mp3").then(function(t){return t.read()})).to.be.rejected}),it("data is correct",function(){return t.file("mi.mp3").then(function(t){return t.read()}).then(function(t){return new Uint8Array(t)}).then(function(t){expect([t[0],t[1],t[2]]).to.deep.equal([255,251,144])})})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(83));n(740),describe("SamplingMaster",function(){var t=void 0,e=void 0;before(function(){WebAudioTestAPI.use()}),beforeEach(function(){t=new AudioContext,e=new i(t)}),describe("#unmute",function(){it("unmutes the audio",function(){var n=t.createGain();sinon.stub(t,"createGain").returns(n),sinon.spy(n,"connect"),sinon.spy(n,"disconnect"),e.unmute(),void expect(t.createGain).to.have.been.called,void expect(n.connect).to.have.been.called,void expect(n.disconnect).to.have.been.called})}),describe("#sample",function(){it("should coerce blob",function(){return e.sample(new Blob([]))}),it("should coerce array buffer",function(){return e.sample(new ArrayBuffer(0))}),it("should reject when decoding failed",function(){return t.DECODE_AUDIO_DATA_FAILED=!0,expect(e.sample(new ArrayBuffer(0))["finally"](function(){return t.DECODE_AUDIO_DATA_FAILED=!1})).to.be.rejected}),describe("#play",function(){var n=void 0,r=void 0,i=void 0;beforeEach(function(){return r=t.createBufferSource(),i=t.createBuffer(1,44100,44100),r.buffer=i,sinon.stub(t,"createBufferSource").returns(r),sinon.spy(r,"start"),e.sample(new Blob([])).then(function(t){return n=t})}),it("should play a buffer source",function(){n.play(),void expect(t.createBufferSource).to.have.been.called,expect(r.start).to.have.been.calledWith(0)}),it("should play a buffer source with delay",function(){t.$processTo(1),n.play(20),void expect(t.createBufferSource).to.have.been.called,expect(r.start).to.have.been.calledWith(21)}),void function(){try{return new Event("wat").type="customevent",it}catch(t){return it.skip}}()("should call #stop when playing finished",function(){var e=n.play();sinon.spy(e,"stop"),t.$processTo(1.5),void expect(e.stop).to.have.been.called}),describe("#stop",function(){it("should stop the buffer source",function(){var t=n.play();sinon.spy(r,"stop"),t.stop(),void expect(r.stop).to.have.been.called}),it("can be called multiple times",function(){var t=n.play();sinon.spy(r,"stop"),t.stop(),t.stop(),t.stop(),void expect(r.stop).to.have.been.calledOnce}),it("should call #onstop",function(){var t=n.play();t.onstop=sinon.spy(),t.stop(),void expect(t.onstop).to.have.been.called})}),describe("#bad",function(){it("should change pitch of sound",function(){var t=n.play();t.bad(),expect(r.playbackRate.value).not.to.equal(1)})})})}),describe("#destroy",function(){var t=void 0;beforeEach(function(){return e.sample(new Blob([])).then(function(e){return t=e})}),it("should stop all samples",function(){var n=t.play(),r=t.play(),i=t.play();sinon.spy(n,"stop"),sinon.spy(r,"stop"),sinon.spy(i,"stop"),e.destroy(),void expect(n.stop).to.have.been.called,void expect(r.stop).to.have.been.called,void expect(i.stop).to.have.been.called}),it("can no longer create samples",function(){return e.destroy(),expect(e.sample(new Blob([]))).to.be.rejected}),it("only destroys once",function(){var n=t.play();sinon.spy(n,"destroy"),e.destroy(),e.destroy(),expect(n.destroy).to.have.callCount(1)})}),after(function(){WebAudioTestAPI.unuse()})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(82));describe("Scintillator Expression",function(){describe("()",function(){it("should parse",function(){var t=new i("a+b");expect(t({a:1,b:5})).to.equal(6)})}),describe("#constant",function(){it("should be false when containing variables",function(){var t=new i("a+b");void expect(t.constant).to.be["false"]}),it("should be true when only contains number",function(){var t=new i("-1.25");void expect(t.constant).to.be["true"]})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=n(272),o=i._compile,a=i._attrs,s=i.Animation,u=r(n(51)),c=function(t){return u(u.parseXML(t).documentElement)};describe("Scintillator::Animation",function(){describe("_attrs",function(){it("lists all attributes of an element",function(){var t=c('<keyframe t="0" x="10" y="30" />')[0];expect(a(t)).to.deep.equal({t:"0",x:"10",y:"30"})})}),describe("_compile",function(){it("compiles animation into keyframes",function(){var t=c('<animation>\n        <keyframe t="0" x="10" y="30" />\n        <keyframe t="2" x="20" />\n        <keyframe t="5" x="15" y="20" />\n      </animation>');expect(o(t)).to.deep.equal({on:"",data:[{name:"x",keyframes:[{time:0,value:10,ease:"linear"},{time:2,value:20,ease:"linear"},{time:5,value:15,ease:"linear"}]},{name:"y",keyframes:[{time:0,value:30,ease:"linear"},{time:5,value:20,ease:"linear"}]}]})}),it("throws when there is no time",function(){var t=c("<animation>\n        <keyframe />\n      </animation>");expect(function(){return o(t)}).to["throw"](Error)})}),describe("#_properties",function(){it("should return a set of properties",function(){var t=s.compile(null,c('<group>\n        <animation>\n          <keyframe t="0" x="10" />\n          <keyframe t="1" x="20" />\n        </animation>\n        <animation>\n          <keyframe t="0" y="10" />\n          <keyframe t="1" y="20" />\n        </animation>\n      </group>'));expect(Array.from(t._properties)).to.deep.equal(["x","y"])})}),describe("#_events",function(){it("list distinct events",function(){var t=s.compile(null,c('<group>\n        <animation />\n        <animation />\n        <animation on="exit" />\n        <animation on="exit" />\n      </group>'));expect(t._events).to.deep.equal(["","exit"])})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}},i=function(t){return t&&t.__esModule?t["default"]:t},o=i(n(38)),a=r(n(131)),s=function(t){return"/spec/scintillator/fixtures/"+t};describe("Scintillator",function(){describe("#load",function(){it("should load skin and return skin node",o.wrap(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("bare.xml"));case 2:e=t.sent,expect(e.width).to.equal(123),expect(e.height).to.equal(456);case 5:case"end":return t.stop()}},t,this)}))),it("should reject if invalid",function(){return expect(a.load(s("invalid_tag.xml"))).to.be.rejected})}),describe("Context",function(){it("should instantiate and able to destroy",o.wrap(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("bare.xml"));case 2:e=t.sent,n=new a.Context(e),n.render({}),n.destroy();case 6:case"end":return t.stop()}},t,this)}))),describe("#input",function(){function t(t,e,n){r.view.dispatchEvent(new MouseEvent("mouse"+t,{clientX:e,clientY:n}))}function e(t,e,n){var i=new Event("touch"+t);i.touches=e,i.changedTouches=n,r.view.dispatchEvent(i)}var n=void 0,r=void 0;beforeEach(o.wrap(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("bare.xml"));case 2:n=t.sent,r=new a.Context(n),r.render({}),r.view.style.position="fixed",r.view.style.top="0",r.view.style.left="0",document.body.appendChild(r.view);case 9:case"end":return t.stop()}},i,this)}))),afterEach(function(){r.destroy(),document.body.removeChild(r.view)}),it("should report touches/mouse inside the region",function(){t("move",10,10),t("down",10,10),expect(r.input).to.deep.equal([{x:10,y:10,id:"mouse"}]);var n={identifier:1,clientX:80,clientY:80};e("start",[n],[n]),expect(r.input).to.deep.equal([{x:10,y:10,id:"mouse"},{x:80,y:80,id:"touch1"}]),t("move",20,20),expect(r.input).to.deep.equal([{x:20,y:20,id:"mouse"},{x:80,y:80,id:"touch1"}]),t("up",10,10),expect(r.input).to.deep.equal([{x:80,y:80,id:"touch1"}]),e("end",[],[n]),expect(r.input).to.deep.equal([])})}),describe("#refs",function(){it("should be a set of refs to the display object",o.wrap(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("refs.xml"));case 2:e=t.sent,n=new a.Context(e),n.render({}),expect(Array.from(n.refs.a)[0]).to.equal(n.stage.children[0]),n.destroy();case 7:case"end":return t.stop()}},t,this)})))})}),describe("Expressions",function(){it("should be parsed and processed",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("expr_basic.xml"));case 2:e=t.sent,n=new a.Context(e),n.render({}),r=n.stage,expect(r.children[0].x).to.equal(6),expect(r.children[0].y).to.equal(7),n.destroy();case 9:case"end":return t.stop()}},t,this)}))),it("should support variables",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("expr_variables.xml"));case 2:t=e.sent,n=new a.Context(t),r=n.stage,n.render({a:4,b:3}),expect(r.children[0].x).to.equal(7),expect(r.children[0].y).to.equal(12),n.render({a:10,b:20}),expect(r.children[0].x).to.equal(30),expect(r.children[0].y).to.equal(200),n.destroy();case 12:case"end":return e.stop()}},e,this)})))}),describe("SpriteNode",function(){it("should allow setting sprite frame",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("sprite_attrs.xml"));case 2:e=t.sent,n=new a.Context(e),r=n.stage,n.render({}),i=r.children[0].texture.frame,expect(i.width).to.equal(10),expect(i.height).to.equal(11),expect(i.x).to.equal(12),expect(i.y).to.equal(13),n.destroy();case 12:case"end":return t.stop()}},t,this)}))),it("should allow setting visibility, width, height",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("sprite_attrs.xml"));case 2:t=e.sent,n=new a.Context(t),r=n.stage,n.render({}),i=r.children[0],expect(i.width).to.equal(3),expect(i.height).to.equal(1),
expect(i.visible).to.equal(!1),n.destroy();case 11:case"end":return e.stop()}},e,this)}))),it("should reject if blend mode is invalid",function(){return expect(a.load(s("sprite_invalid_blend.xml"))).to.be.rejected})}),describe("TextNode",function(){it("should display text",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("text.xml"));case 2:e=t.sent,n=new a.Context(e),r=n.stage,n.render({}),i=r.children[0].children[0],expect(i.text).to.equal("Hello world"),n.destroy();case 9:case"end":return t.stop()}},t,this)}))),it("should center text",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("text_center.xml"));case 2:t=e.sent,n=new a.Context(t),r=n.stage,n.render({}),i=r.children[0].children[0],expect(i.x).to.be.lessThan(0),n.destroy();case 9:case"end":return e.stop()}},e,this)}))),it("should support data interpolation",o.wrap(regeneratorRuntime.mark(function n(){var t,e,r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.load(s("text_interpolation.xml"));case 2:t=n.sent,e=new a.Context(t),r=e.stage,e.render({lol:"wow"}),i=r.children[0].children[0],expect(i.text).to.equal("Hello world wow"),e.destroy();case 9:case"end":return n.stop()}},n,this)})))}),describe("IfNode",function(){it("should display child when correct value",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("expr_if.xml"));case 2:e=t.sent,n=new a.Context(e),r=n.stage,n.render({a:"b"}),expect(r.children[0].children).to.have.length(1),n.destroy();case 8:case"end":return t.stop()}},t,this)}))),it("should not display child when correct value",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("expr_if.xml"));case 2:t=e.sent,n=new a.Context(t),r=n.stage,n.render({a:"x"}),expect(r.children[0].children).to.have.length(0),n.destroy();case 8:case"end":return e.stop()}},e,this)})))}),describe("ObjectNode",function(){it("should display children",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("expr_object.xml"));case 2:e=t.sent,n=new a.Context(e),r=n.stage,n.render({notes:[]}),expect(r.children[0].children).to.have.length(0),n.render({notes:[{key:"a",y:20}]}),expect(r.children[0].children).to.have.length(1),n.render({notes:[{key:"a",y:20},{key:"b",y:10}]}),expect(r.children[0].children).to.have.length(2),n.render({notes:[{key:"b",y:10}]}),expect(r.children[0].children).to.have.length(1),n.destroy();case 14:case"end":return t.stop()}},t,this)}))),it("should update same array with content changed",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("expr_object.xml"));case 2:t=e.sent,n=new a.Context(t),r=n.stage,i=[],n.render({notes:i}),expect(r.children[0].children).to.have.length(0),i.push({key:"a",y:20}),n.render({notes:i}),expect(r.children[0].children).to.have.length(1),n.destroy();case 12:case"end":return e.stop()}},e,this)}))),it("should let children get value from item",o.wrap(regeneratorRuntime.mark(function n(){var t,e,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.load(s("expr_object_var.xml"));case 2:t=n.sent,e=new a.Context(t),r=e.stage,e.render({notes:[]}),e.render({notes:[{key:"a",y:20}]}),expect(r.children[0].children[0].y).to.equal(20),e.render({notes:[{key:"a",y:20},{key:"b",y:10}]}),expect(r.children[0].children[0].y).to.equal(20),e.render({notes:[{key:"b",y:10}]}),expect(r.children[0].children[0].y).to.equal(10),e.destroy();case 13:case"end":return n.stop()}},n,this)})))}),describe("GroupNode",function(){it("should allow masking",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("group_mask.xml"));case 2:e=t.sent,n=new a.Context(e),r=n.stage,i=r.children[0].mask,expect(i).not.to.equal(null),n.destroy();case 8:case"end":return t.stop()}},t,this)})))}),describe("AnimationNode",function(){it("should allow animations",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("animation.xml"));case 2:e=t.sent,n=new a.Context(e),r=n.stage.children[0],n.render({t:0}),expect(r.x).to.equal(10),expect(r.y).to.equal(0),n.render({t:.5}),expect(r.x).to.equal(15),expect(r.y).to.equal(1),n.render({t:1}),expect(r.x).to.equal(20),expect(r.y).to.equal(2),n.destroy();case 15:case"end":return t.stop()}},t,this)}))),it("should allow animations on different events",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.load(s("animation.xml"));case 2:t=e.sent,n=new a.Context(t),r=n.stage.children[0],n.render({t:.5,exitEvent:.5}),expect(r.x).to.equal(50),expect(r.y).to.equal(0),n.render({t:1,exitEvent:.5}),expect(r.x).to.equal(60),expect(r.y).to.equal(50),n.render({t:1.5,exitEvent:.5}),expect(r.x).to.equal(70),expect(r.y).to.equal(100),n.destroy();case 15:case"end":return e.stop()}},e,this)}))),it("should allow animations on different value",o.wrap(regeneratorRuntime.mark(function n(){var t,e,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.load(s("animation_timekey.xml"));case 2:t=n.sent,e=new a.Context(t),r=e.stage.children[0],e.render({t:0,x:.5}),expect(r.x).to.equal(15);case 7:case"end":return n.stop()}},n,this)})))}),describe("defs",function(){it("should allow reuse of skin nodes",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load(s("defs.xml"));case 2:e=t.sent,n=new a.Context(e),n.render({}),r=n.stage,expect(r.children[0].x).to.equal(6),expect(r.children[0].y).to.equal(7),expect(r.children[1].x).to.equal(6),expect(r.children[1].y).to.equal(7),n.destroy();case 11:case"end":return t.stop()}},t,this)})))})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(113));describe("download",function(){it("resolves with correct type",function(){return expect(i("/spec/utils/fixtures/download/hello.txt").as("text")).to.eventually.match(/hello world/)}),it("rejects for 404",function(){return expect(i("/nonexistant").as("blob")).to.be.rejected}),it("rejects for bad url",function(){return expect(i("file:///nonexistant").as("blob")).to.be.rejected}),it("rejects for XHR error",function(){var t=sinon.stub(XMLHttpRequest.prototype,"send",function(){this.onerror(new Error("..."))});return expect(i("/spec/download/fixtures/hello.txt").as("blob")["finally"](function(){return t.restore()})).to.be.rejected})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(308));describe("Observable",function(){describe("stateless mode",function(){it("should call watchers",function(){var t=sinon.spy(),e=sinon.spy(),n=new i,r=n.watch(t);void expect(t).not.to.have.been.called,n.notify("1"),expect(t).to.have.been.calledWith("1"),n.watch(e),void expect(e).not.to.have.been.called,n.notify("2"),expect(t).to.have.been.calledWith("2"),expect(e).to.have.been.calledWith("2"),r(),n.notify("3"),expect(t).not.to.have.been.calledWith("3"),expect(e).to.have.been.calledWith("3")})}),describe("stateful mode",function(){it("should have value",function(){var t=new i("0");expect(t.value).to.equal("0")}),it("should call watchers",function(){var t=sinon.spy(),e=sinon.spy(),n=new i("0"),r=n.watch(t);expect(t).to.have.been.calledWith("0"),n.value="1",expect(t).to.have.been.calledWith("1"),n.watch(e),expect(e).to.have.been.calledWith("1"),n.value="2",expect(t).to.have.been.calledWith("2"),expect(e).to.have.been.calledWith("2"),r(),n.value="3",expect(t).not.to.have.been.calledWith("3"),expect(e).to.have.been.calledWith("3")})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(77));describe("readBlob",function(){it("rejects when cannot read blob",function(){var t=new Blob(["hello world"]),e=sinon.stub(FileReader.prototype,"readAsText",function(){this.onerror(new Error("..."))});return expect(i(t).as("text")["finally"](function(){return e.restore()})).to.be.rejected}),it("resolves with correct type",function(){var t=new Blob(["hello world"]);return expect(i(t).as("text")).to.eventually.equal("hello world")})})},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function r(t){function e(){return new Promise(function(e,n){var r=o.open(t,1);r.onupgradeneeded=function(t){var r=t.target.result,i=r.createObjectStore("cachier",{keyPath:"_id"});i.transaction.oncomplete=function(){e(r)},i.transaction.onerror=function(){n(new Error("Cannot upgrade database!"))}},r.onerror=function(){n(new Error("Cannot request database!"))},r.onsuccess=function(t){var n=t.target.result;e(n)}})}function n(t){return new Promise(function(e,n){t.onerror=function(){n(new Error("IndexedDB Error: "+t.error))},t.onblocked=function(){console.log(t),n(new Error("IndexedDB Blocked: "+t))},t.onsuccess=function(t){e(t)}})}function r(t){return new Promise(function(e,n){var r=new FileReader;r.onload=function(){e({buffer:r.result,type:t.type})},r.onerror=function(){n(new Error("Unable to convert blob to object!"))},r.readAsArrayBuffer(t)})}function i(t){return t instanceof Blob?t:t.buffer?new Blob([t.buffer],{type:t.type}):void 0}var o=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,a=e();return t=t||"cachier",{connection:a,save:function(t,e,i){var o=!!this._NO_BLOB;return a.then(function(a){return Promise.resolve().then(function(){if(o)throw new Error("Requested non-Blob storing mode");var r=a.transaction("cachier","readwrite").objectStore("cachier").put({_id:t,blob:e,metadata:i});return n(r)})["catch"](function(){return console.log("Cannot store as blob, store as data-URL instead."),r(e).then(function(e){var r=a.transaction("cachier","readwrite").objectStore("cachier").put({_id:t,blob:e,metadata:i});return n(r)})})})},load:function(t){return a.then(function(e){var r=e.transaction("cachier").objectStore("cachier").get(t);return n(r).then(function(){var t=r.result;return{blob:i(t.blob),metadata:t.metadata}})})},"delete":function(t){return a.then(function(e){var r=e.transaction("cachier","readwrite").objectStore("cachier")["delete"](t);return n(r)})},destroyDatabase:function(){return a?a.then(function(t){t.close()}).then(function(){var e=o.deleteDatabase(t);return n(e)}).tap(function(){a=null}):Promise.resolve()}}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=new r,e.Cachier=r},,,,,,,,,,,,function(t,e,n){!function(){"use strict";function e(t,n){function r(t){return"function"==typeof t.always&&"function"==typeof t.done&&"function"==typeof t.fail&&"function"==typeof t.pipe&&"function"==typeof t.progress&&"function"==typeof t.state}function i(t){if("function"!=typeof t._obj.then)throw new TypeError(n.inspect(t._obj)+" is not a thenable.");if(r(t._obj))throw new TypeError("Chai as Promised is incompatible with jQuery's thenables, sorry! Please use a Promises/A+ compatible library (see http://promisesaplus.com/).")}function o(t,e){n.addMethod(h.prototype,t,function(){return i(this),e.apply(this,arguments)})}function a(t,e){n.addProperty(h.prototype,t,function(){return i(this),e.apply(this,arguments)})}function s(t,e){t.then(function(){e()},e)}function u(t,e,n){t.assert(!0,null,e,n.expected,n.actual)}function c(t,e,n){t.assert(!1,e,null,n.expected,n.actual)}function l(t){return"function"==typeof t.then?t:t._obj}function f(t,r,i){if(!n.flag(r,"eventually"))return t.apply(r,i);var o=l(r).then(function(t){return r._obj=t,n.flag(r,"eventually",!1),i?e.transformAsserterArgs(i):i}).then(function(e){return t.apply(r,e),r._obj});e.transferPromiseness(r,o)}var h=t.Assertion,p=t.assert,d=Object.getOwnPropertyNames(h.prototype),m={};d.forEach(function(t){m[t]=Object.getOwnPropertyDescriptor(h.prototype,t)}),a("fulfilled",function(){var t=this,n=l(t).then(function(e){return t._obj=e,u(t,"expected promise not to be fulfilled but it was fulfilled with #{act}",{actual:e}),e},function(e){c(t,"expected promise to be fulfilled but it was rejected with #{act}",{actual:e})});e.transferPromiseness(t,n)}),a("rejected",function(){var t=this,n=l(t).then(function(e){return t._obj=e,c(t,"expected promise to be rejected but it was fulfilled with #{act}",{actual:e}),e},function(e){return u(t,"expected promise not to be rejected but it was rejected with #{act}",{actual:e}),e});e.transferPromiseness(t,n)}),o("rejectedWith",function(t,r){var i=null,o=null;t instanceof RegExp||"string"==typeof t?(r=t,t=null):t&&t instanceof Error?(i=t,t=null,r=null):"function"==typeof t?o=(new t).name:t=null;var a=this,s=l(a).then(function(e){var n=null,s=null;if(t)n="expected promise to be rejected with #{exp} but it was fulfilled with #{act}",s=o;else if(r){var u=r instanceof RegExp?"matching":"including";n="expected promise to be rejected with an error "+u+" #{exp} but it was fulfilled with #{act}",s=r}else i&&(n="expected promise to be rejected with #{exp} but it was fulfilled with #{act}",s=i);a._obj=e,c(a,n,{expected:s,actual:e})},function(e){t&&a.assert(e instanceof t,"expected promise to be rejected with #{exp} but it was rejected with #{act}","expected promise not to be rejected with #{exp} but it was rejected with #{act}",o,e);var s="object"===n.type(e)&&"message"in e?e.message:""+e;r&&null!==s&&void 0!==s&&(r instanceof RegExp&&a.assert(r.test(s),"expected promise to be rejected with an error matching #{exp} but got #{act}","expected promise not to be rejected with an error matching #{exp}",r,s),"string"==typeof r&&a.assert(-1!==s.indexOf(r),"expected promise to be rejected with an error including #{exp} but got #{act}","expected promise not to be rejected with an error including #{exp}",r,s)),i&&a.assert(e===i,"expected promise to be rejected with #{exp} but it was rejected with #{act}","expected promise not to be rejected with #{exp}",i,e)});e.transferPromiseness(a,s)}),a("eventually",function(){n.flag(this,"eventually",!0)}),o("notify",function(t){s(l(this),t)}),o("become",function(t){return this.eventually.deep.equal(t)});var v=d.filter(function(t){return"assert"!==t&&"function"==typeof m[t].value});v.forEach(function(t){h.overwriteMethod(t,function(t){return function(){f(t,this,arguments)}})});var g=d.filter(function(t){return"_obj"!==t&&"function"==typeof m[t].get});g.forEach(function(t){var e=m[t],n=!1;try{n="function"==typeof e.get.call({})}catch(r){}n?h.addChainableMethod(t,function(){function t(){return e.get.call(n).apply(n,arguments)}var n=this;f(t,this,arguments)},function(){var t=e.get;f(t,this)}):h.overwriteProperty(t,function(t){return function(){f(t,this)}})});var y=Object.getOwnPropertyNames(p).filter(function(t){return"function"==typeof p[t]});p.isFulfilled=function(t,e){return new h(t,e).to.be.fulfilled},p.isRejected=function(t,e,n){"string"==typeof e&&(n=e,e=void 0);var r=new h(t,n);return void 0!==e?r.to.be.rejectedWith(e):r.to.be.rejected},p.becomes=function(t,e,n){return p.eventually.deepEqual(t,e,n)},p.doesNotBecome=function(t,e,n){return p.eventually.notDeepEqual(t,e,n)},p.eventually={},y.forEach(function(e){p.eventually[e]=function(r){var i,o=Array.prototype.slice.call(arguments,1),a=arguments[p[e].length-1];"string"==typeof a&&(i=function(e){throw new t.AssertionError(a+"\n\nOriginal reason: "+n.inspect(e))});var u=r.then(function(t){return p[e].apply(p,[t].concat(o))},i);return u.notify=function(t){s(u,t)},u}})}t.exports=e,e.transferPromiseness=function(t,e){t.then=e.then.bind(e)},e.transformAsserterArgs=function(t){return t}}()},function(t,e,n){t.exports=n(533)},function(t,e,n){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=[],e=t.exports={};/*!
	 * Chai version
	 */
e.version="2.3.0",/*!
	 * Assertion Error
	 */
e.AssertionError=n(551);/*!
	 * Utils for plugins (not exported)
	 */
var i=n(546);e.use=function(t){return~r.indexOf(t)||(t(this,i),r.push(t)),this},/*!
	 * Utility Functions
	 */
e.util=i;/*!
	 * Configuration
	 */
var o=n(309);e.config=o;/*!
	 * Primary `Assertion` prototype
	 */
var a=n(534);e.use(a);/*!
	 * Core Assertions
	 */
var s=n(535);e.use(s);/*!
	 * Expect interface
	 */
var u=n(537);e.use(u);/*!
	 * Should interface
	 */
var c=n(538);e.use(c);/*!
	 * Assert interface
	 */
var l=n(536);e.use(l)},function(t,e,n){/*!
	 * chai
	 * http://chaijs.com
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(309);t.exports=function(t,e){/*!
	   * Assertion Constructor
	   *
	   * Creates object for chaining.
	   *
	   * @api private
	   */
function n(t,e,n){o(this,"ssfi",n||arguments.callee),o(this,"object",t),o(this,"message",e)}/*!
	   * Module dependencies.
	   */
var i=t.AssertionError,o=e.flag;/*!
	   * Module export.
	   */
t.Assertion=n,Object.defineProperty(n,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=t}}),Object.defineProperty(n,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=t}}),n.addProperty=function(t,n){e.addProperty(this.prototype,t,n)},n.addMethod=function(t,n){e.addMethod(this.prototype,t,n)},n.addChainableMethod=function(t,n,r){e.addChainableMethod(this.prototype,t,n,r)},n.overwriteProperty=function(t,n){e.overwriteProperty(this.prototype,t,n)},n.overwriteMethod=function(t,n){e.overwriteMethod(this.prototype,t,n)},n.overwriteChainableMethod=function(t,n,r){e.overwriteChainableMethod(this.prototype,t,n,r)},/*!
	   * ### .assert(expression, message, negateMessage, expected, actual)
	   *
	   * Executes an expression and check expectations. Throws AssertionError for reporting if test doesn't pass.
	   *
	   * @name assert
	   * @param {Philosophical} expression to be tested
	   * @param {String or Function} message or function that returns message to display if expression fails
	   * @param {String or Function} negatedMessage or function that returns negatedMessage to display if negated expression fails
	   * @param {Mixed} expected value (remember to check for negation)
	   * @param {Mixed} actual (optional) will default to `this.obj`
	   * @param {Boolean} showDiff (optional) when set to `true`, assert will display a diff in addition to the message if expression fails
	   * @api private
	   */
n.prototype.assert=function(t,n,a,s,u,c){var l=e.test(this,arguments);if(!0!==c&&(c=!1),!0!==r.showDiff&&(c=!1),!l){var n=e.getMessage(this,arguments),f=e.getActual(this,arguments);throw new i(n,{actual:f,expected:s,showDiff:c},r.includeStack?this.assert:o(this,"ssfi"))}},/*!
	   * ### ._obj
	   *
	   * Quick reference to stored `actual` value for plugin developers.
	   *
	   * @api private
	   */
Object.defineProperty(n.prototype,"_obj",{get:function(){return o(this,"object")},set:function(t){o(this,"object",t)}})}},function(t,e,n){/*!
	 * chai
	 * http://chaijs.com
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){function n(t,n){n&&T(this,"message",n),t=t.toLowerCase();var r=T(this,"object"),i=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";this.assert(t===e.type(r),"expected #{this} to be "+i+t,"expected #{this} not to be "+i+t)}function r(){T(this,"contains",!0)}function i(t,n){n&&T(this,"message",n);var r=T(this,"object"),i=!1;if("array"===e.type(r)&&"object"===e.type(t)){for(var o in r)if(e.eql(r[o],t)){i=!0;break}}else if("object"===e.type(t)){if(!T(this,"negate")){for(var a in t)new E(r).property(a,t[a]);return}var s={};for(var a in t)s[a]=r[a];i=e.eql(s,t)}else i=r&&~r.indexOf(t);this.assert(i,"expected #{this} to include "+e.inspect(t),"expected #{this} to not include "+e.inspect(t))}function o(){var t=T(this,"object"),e=Object.prototype.toString.call(t);this.assert("[object Arguments]"===e,"expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}function a(t,e){e&&T(this,"message",e);var n=T(this,"object");return T(this,"deep")?this.eql(t):void this.assert(t===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}function s(t,n){n&&T(this,"message",n),this.assert(e.eql(t,T(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}function u(t,e){e&&T(this,"message",e);var n=T(this,"object");if(T(this,"doLength")){new E(n,e).to.have.property("length");var r=n.length;this.assert(r>t,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",t,r)}else this.assert(n>t,"expected #{this} to be above "+t,"expected #{this} to be at most "+t)}function c(t,e){e&&T(this,"message",e);var n=T(this,"object");if(T(this,"doLength")){new E(n,e).to.have.property("length");var r=n.length;this.assert(r>=t,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to have a length below #{exp}",t,r)}else this.assert(n>=t,"expected #{this} to be at least "+t,"expected #{this} to be below "+t)}function l(t,e){e&&T(this,"message",e);var n=T(this,"object");if(T(this,"doLength")){new E(n,e).to.have.property("length");var r=n.length;this.assert(t>r,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",t,r)}else this.assert(t>n,"expected #{this} to be below "+t,"expected #{this} to be at least "+t)}function f(t,e){e&&T(this,"message",e);var n=T(this,"object");if(T(this,"doLength")){new E(n,e).to.have.property("length");var r=n.length;this.assert(t>=r,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to have a length above #{exp}",t,r)}else this.assert(t>=n,"expected #{this} to be at most "+t,"expected #{this} to be above "+t)}function h(t,n){n&&T(this,"message",n);var r=e.getName(t);this.assert(T(this,"object")instanceof t,"expected #{this} to be an instance of "+r,"expected #{this} to not be an instance of "+r)}function p(t,n){n&&T(this,"message",n);var r=T(this,"object");this.assert(r.hasOwnProperty(t),"expected #{this} to have own property "+e.inspect(t),"expected #{this} to not have own property "+e.inspect(t))}function d(t,n,r){"string"==typeof n&&(r=n,n=null),r&&T(this,"message",r);var i=T(this,"object"),o=Object.getOwnPropertyDescriptor(Object(i),t);o&&n?this.assert(e.eql(n,o),"expected the own property descriptor for "+e.inspect(t)+" on #{this} to match "+e.inspect(n)+", got "+e.inspect(o),"expected the own property descriptor for "+e.inspect(t)+" on #{this} to not match "+e.inspect(n),n,o,!0):this.assert(o,"expected #{this} to have an own property descriptor for "+e.inspect(t),"expected #{this} to not have an own property descriptor for "+e.inspect(t)),T(this,"object",o)}function m(){T(this,"doLength",!0)}function v(t,e){e&&T(this,"message",e);var n=T(this,"object");new E(n,e).to.have.property("length");var r=n.length;this.assert(r==t,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",t,r)}function g(t){var n,r=T(this,"object"),i=!0,o="keys must be given single argument of Array|Object|String, or multiple String arguments";switch(e.type(t)){case"array":if(arguments.length>1)throw new Error(o);break;case"object":if(arguments.length>1)throw new Error(o);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}if(!t.length)throw new Error("keys required");var a=Object.keys(r),s=t,u=t.length,c=T(this,"any"),l=T(this,"all");if(c||l||(l=!0),c){var f=s.filter(function(t){return~a.indexOf(t)});i=f.length>0}if(l&&(i=t.every(function(t){return~a.indexOf(t)}),T(this,"negate")||T(this,"contains")||(i=i&&t.length==a.length)),u>1){t=t.map(function(t){return e.inspect(t)});var h=t.pop();l&&(n=t.join(", ")+", and "+h),c&&(n=t.join(", ")+", or "+h)}else n=e.inspect(t[0]);n=(u>1?"keys ":"key ")+n,n=(T(this,"contains")?"contain ":"have ")+n,this.assert(i,"expected #{this} to "+n,"expected #{this} to not "+n,s.slice(0).sort(),a.sort(),!0)}function y(t,n,r){r&&T(this,"message",r);var i=T(this,"object");new E(i,r).is.a("function");var o=!1,a=null,s=null,u=null;0===arguments.length?(n=null,t=null):t&&(t instanceof RegExp||"string"==typeof t)?(n=t,t=null):t&&t instanceof Error?(a=t,t=null,n=null):"function"==typeof t?(s=t.prototype.name||t.name,"Error"===s&&t!==Error&&(s=(new t).name)):t=null;try{i()}catch(c){if(a)return this.assert(c===a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}",a instanceof Error?a.toString():a,c instanceof Error?c.toString():c),T(this,"object",c),this;if(t&&(this.assert(c instanceof t,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp} but #{act} was thrown",s,c instanceof Error?c.toString():c),!n))return T(this,"object",c),this;var l="object"===e.type(c)&&"message"in c?c.message:""+c;if(null!=l&&n&&n instanceof RegExp)return this.assert(n.exec(l),"expected #{this} to throw error matching #{exp} but got #{act}","expected #{this} to throw error not matching #{exp}",n,l),T(this,"object",c),this;if(null!=l&&n&&"string"==typeof n)return this.assert(~l.indexOf(n),"expected #{this} to throw error including #{exp} but got #{act}","expected #{this} to throw error not including #{act}",n,l),T(this,"object",c),this;o=!0,u=c}var f="",h=null!==s?s:a?"#{exp}":"an error";o&&(f=" but #{act} was thrown"),this.assert(o===!0,"expected #{this} to throw "+h+f,"expected #{this} to not throw "+h+f,a instanceof Error?a.toString():a,u instanceof Error?u.toString():u),T(this,"object",u)}function b(t,e,n){return t.every(function(t){return n?e.some(function(e){return n(t,e)}):-1!==e.indexOf(t)})}function _(t,e,n){n&&T(this,"message",n);var r=T(this,"object");new E(t,n).to.have.property(e),new E(r).is.a("function");var i=t[e];r(),this.assert(i!==t[e],"expected ."+e+" to change","expected ."+e+" to not change")}function w(t,e,n){n&&T(this,"message",n);var r=T(this,"object");new E(t,n).to.have.property(e),new E(r).is.a("function");var i=t[e];r(),this.assert(t[e]-i>0,"expected ."+e+" to increase","expected ."+e+" to not increase")}function x(t,e,n){n&&T(this,"message",n);var r=T(this,"object");new E(t,n).to.have.property(e),new E(r).is.a("function");var i=t[e];r(),this.assert(t[e]-i<0,"expected ."+e+" to decrease","expected ."+e+" to not decrease")}var E=t.Assertion,T=(Object.prototype.toString,e.flag);["to","be","been","is","and","has","have","with","that","which","at","of","same"].forEach(function(t){E.addProperty(t,function(){return this})}),E.addProperty("not",function(){T(this,"negate",!0)}),E.addProperty("deep",function(){T(this,"deep",!0)}),E.addProperty("any",function(){T(this,"any",!0),T(this,"all",!1)}),E.addProperty("all",function(){T(this,"all",!0),T(this,"any",!1)}),E.addChainableMethod("an",n),E.addChainableMethod("a",n),E.addChainableMethod("include",i,r),E.addChainableMethod("contain",i,r),E.addChainableMethod("contains",i,r),E.addChainableMethod("includes",i,r),E.addProperty("ok",function(){this.assert(T(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),E.addProperty("true",function(){this.assert(!0===T(this,"object"),"expected #{this} to be true","expected #{this} to be false",this.negate?!1:!0)}),E.addProperty("false",function(){this.assert(!1===T(this,"object"),"expected #{this} to be false","expected #{this} to be true",this.negate?!0:!1)}),E.addProperty("null",function(){this.assert(null===T(this,"object"),"expected #{this} to be null","expected #{this} not to be null")}),E.addProperty("undefined",function(){this.assert(void 0===T(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")}),E.addProperty("exist",function(){this.assert(null!=T(this,"object"),"expected #{this} to exist","expected #{this} to not exist")}),E.addProperty("empty",function(){var t=T(this,"object"),e=t;Array.isArray(t)||"string"==typeof object?e=t.length:"object"==typeof t&&(e=Object.keys(t).length),this.assert(!e,"expected #{this} to be empty","expected #{this} not to be empty")}),E.addProperty("arguments",o),E.addProperty("Arguments",o),E.addMethod("equal",a),E.addMethod("equals",a),E.addMethod("eq",a),E.addMethod("eql",s),E.addMethod("eqls",s),E.addMethod("above",u),E.addMethod("gt",u),E.addMethod("greaterThan",u),E.addMethod("least",c),E.addMethod("gte",c),E.addMethod("below",l),E.addMethod("lt",l),E.addMethod("lessThan",l),E.addMethod("most",f),E.addMethod("lte",f),E.addMethod("within",function(t,e,n){n&&T(this,"message",n);var r=T(this,"object"),i=t+".."+e;if(T(this,"doLength")){new E(r,n).to.have.property("length");var o=r.length;this.assert(o>=t&&e>=o,"expected #{this} to have a length within "+i,"expected #{this} to not have a length within "+i)}else this.assert(r>=t&&e>=r,"expected #{this} to be within "+i,"expected #{this} to not be within "+i)}),E.addMethod("instanceof",h),E.addMethod("instanceOf",h),E.addMethod("property",function(t,n,r){r&&T(this,"message",r);var i=!!T(this,"deep"),o=i?"deep property ":"property ",a=T(this,"negate"),s=T(this,"object"),u=i?e.getPathInfo(t,s):null,c=i?u.exists:e.hasProperty(t,s),l=i?u.value:s[t];if(a&&void 0!==n){if(void 0===l)throw r=null!=r?r+": ":"",new Error(r+e.inspect(s)+" has no "+o+e.inspect(t))}else this.assert(c,"expected #{this} to have a "+o+e.inspect(t),"expected #{this} to not have "+o+e.inspect(t));void 0!==n&&this.assert(n===l,"expected #{this} to have a "+o+e.inspect(t)+" of #{exp}, but got #{act}","expected #{this} to not have a "+o+e.inspect(t)+" of #{act}",n,l),T(this,"object",l)}),E.addMethod("ownProperty",p),E.addMethod("haveOwnProperty",p),E.addMethod("ownPropertyDescriptor",d),E.addMethod("haveOwnPropertyDescriptor",d),E.addChainableMethod("length",v,m),E.addMethod("lengthOf",v),E.addMethod("match",function(t,e){e&&T(this,"message",e);var n=T(this,"object");this.assert(t.exec(n),"expected #{this} to match "+t,"expected #{this} not to match "+t)}),E.addMethod("string",function(t,n){n&&T(this,"message",n);var r=T(this,"object");new E(r,n).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+e.inspect(t),"expected #{this} to not contain "+e.inspect(t))}),E.addMethod("keys",g),E.addMethod("key",g),E.addMethod("throw",y),E.addMethod("throws",y),E.addMethod("Throw",y),E.addMethod("respondTo",function(t,n){n&&T(this,"message",n);var r=T(this,"object"),i=T(this,"itself"),o="function"!==e.type(r)||i?r[t]:r.prototype[t];this.assert("function"==typeof o,"expected #{this} to respond to "+e.inspect(t),"expected #{this} to not respond to "+e.inspect(t))}),E.addProperty("itself",function(){T(this,"itself",!0)}),E.addMethod("satisfy",function(t,n){n&&T(this,"message",n);var r=T(this,"object"),i=t(r);this.assert(i,"expected #{this} to satisfy "+e.objDisplay(t),"expected #{this} to not satisfy"+e.objDisplay(t),this.negate?!1:!0,i)}),E.addMethod("closeTo",function(t,n,r){r&&T(this,"message",r);var i=T(this,"object");if(new E(i,r).is.a("number"),"number"!==e.type(t)||"number"!==e.type(n))throw new Error("the arguments to closeTo must be numbers");this.assert(Math.abs(i-t)<=n,"expected #{this} to be close to "+t+" +/- "+n,"expected #{this} not to be close to "+t+" +/- "+n)}),E.addMethod("members",function(t,n){n&&T(this,"message",n);var r=T(this,"object");new E(r).to.be.an("array"),new E(t).to.be.an("array");var i=T(this,"deep")?e.eql:void 0;return T(this,"contains")?this.assert(b(t,r,i),"expected #{this} to be a superset of #{act}","expected #{this} to not be a superset of #{act}",r,t):void this.assert(b(r,t,i)&&b(t,r,i),"expected #{this} to have the same members as #{act}","expected #{this} to not have the same members as #{act}",r,t)}),E.addChainableMethod("change",_),E.addChainableMethod("changes",_),E.addChainableMethod("increase",w),E.addChainableMethod("increases",w),E.addChainableMethod("decrease",x),E.addChainableMethod("decreases",x)}},function(t,e,n){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){/*!
	   * Chai dependencies.
	   */
var n=t.Assertion,r=e.flag,i=t.assert=function(e,r){var i=new n(null,null,t.assert);i.assert(e,r,"[ negation message unavailable ]")};i.fail=function(e,n,r,o){throw r=r||"assert.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:o},i.fail)},i.ok=function(t,e){new n(t,e).is.ok},i.notOk=function(t,e){new n(t,e).is.not.ok},i.equal=function(t,e,o){var a=new n(t,o,i.equal);a.assert(e==r(a,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t)},i.notEqual=function(t,e,o){var a=new n(t,o,i.notEqual);a.assert(e!=r(a,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t)},i.strictEqual=function(t,e,r){new n(t,r).to.equal(e)},i.notStrictEqual=function(t,e,r){new n(t,r).to.not.equal(e)},i.deepEqual=function(t,e,r){new n(t,r).to.eql(e)},i.notDeepEqual=function(t,e,r){new n(t,r).to.not.eql(e)},i.isAbove=function(t,e,r){new n(t,r).to.be.above(e)},i.isBelow=function(t,e,r){new n(t,r).to.be.below(e)},i.isTrue=function(t,e){new n(t,e).is["true"]},i.isFalse=function(t,e){new n(t,e).is["false"]},i.isNull=function(t,e){new n(t,e).to.equal(null)},i.isNotNull=function(t,e){new n(t,e).to.not.equal(null)},i.isUndefined=function(t,e){new n(t,e).to.equal(void 0)},i.isDefined=function(t,e){new n(t,e).to.not.equal(void 0)},i.isFunction=function(t,e){new n(t,e).to.be.a("function")},i.isNotFunction=function(t,e){new n(t,e).to.not.be.a("function")},i.isObject=function(t,e){new n(t,e).to.be.a("object")},i.isNotObject=function(t,e){new n(t,e).to.not.be.a("object")},i.isArray=function(t,e){new n(t,e).to.be.an("array")},i.isNotArray=function(t,e){new n(t,e).to.not.be.an("array")},i.isString=function(t,e){new n(t,e).to.be.a("string")},i.isNotString=function(t,e){new n(t,e).to.not.be.a("string")},i.isNumber=function(t,e){new n(t,e).to.be.a("number")},i.isNotNumber=function(t,e){new n(t,e).to.not.be.a("number")},i.isBoolean=function(t,e){new n(t,e).to.be.a("boolean")},i.isNotBoolean=function(t,e){new n(t,e).to.not.be.a("boolean")},i.typeOf=function(t,e,r){new n(t,r).to.be.a(e)},i.notTypeOf=function(t,e,r){new n(t,r).to.not.be.a(e)},i.instanceOf=function(t,e,r){new n(t,r).to.be.instanceOf(e)},i.notInstanceOf=function(t,e,r){new n(t,r).to.not.be.instanceOf(e)},i.include=function(t,e,r){new n(t,r,i.include).include(e)},i.notInclude=function(t,e,r){new n(t,r,i.notInclude).not.include(e)},i.match=function(t,e,r){new n(t,r).to.match(e)},i.notMatch=function(t,e,r){new n(t,r).to.not.match(e)},i.property=function(t,e,r){new n(t,r).to.have.property(e)},i.notProperty=function(t,e,r){new n(t,r).to.not.have.property(e)},i.deepProperty=function(t,e,r){new n(t,r).to.have.deep.property(e)},i.notDeepProperty=function(t,e,r){new n(t,r).to.not.have.deep.property(e)},i.propertyVal=function(t,e,r,i){new n(t,i).to.have.property(e,r)},i.propertyNotVal=function(t,e,r,i){new n(t,i).to.not.have.property(e,r)},i.deepPropertyVal=function(t,e,r,i){new n(t,i).to.have.deep.property(e,r)},i.deepPropertyNotVal=function(t,e,r,i){new n(t,i).to.not.have.deep.property(e,r)},i.lengthOf=function(t,e,r){new n(t,r).to.have.length(e)},i.Throw=function(t,e,i,o){("string"==typeof e||e instanceof RegExp)&&(i=e,e=null);var a=new n(t,o).to.Throw(e,i);return r(a,"object")},i.doesNotThrow=function(t,e,r){"string"==typeof e&&(r=e,e=null),new n(t,r).to.not.Throw(e)},i.operator=function(t,i,o,a){var s;switch(i){case"==":s=t==o;break;case"===":s=t===o;break;case">":s=t>o;break;case">=":s=t>=o;break;case"<":s=o>t;break;case"<=":s=o>=t;break;case"!=":s=t!=o;break;case"!==":s=t!==o;break;default:throw new Error('Invalid operator "'+i+'"')}var u=new n(s,a);u.assert(!0===r(u,"object"),"expected "+e.inspect(t)+" to be "+i+" "+e.inspect(o),"expected "+e.inspect(t)+" to not be "+i+" "+e.inspect(o))},i.closeTo=function(t,e,r,i){new n(t,i).to.be.closeTo(e,r)},i.sameMembers=function(t,e,r){new n(t,r).to.have.same.members(e)},i.sameDeepMembers=function(t,e,r){new n(t,r).to.have.same.deep.members(e)},i.includeMembers=function(t,e,r){new n(t,r).to.include.members(e)},i.changes=function(t,e,r){new n(t).to.change(e,r)},i.doesNotChange=function(t,e,r){new n(t).to.not.change(e,r)},i.increases=function(t,e,r){new n(t).to.increase(e,r)},i.doesNotIncrease=function(t,e,r){new n(t).to.not.increase(e,r)},i.decreases=function(t,e,r){new n(t).to.decrease(e,r)},i.doesNotDecrease=function(t,e,r){new n(t).to.not.decrease(e,r)},/*!
	   * Undocumented / untested
	   */
i.ifError=function(t,e){new n(t,e).to.not.be.ok},/*!
	   * Aliases.
	   */
function o(t,e){return i[e]=i[t],o}("Throw","throw")("Throw","throws")}},function(t,e,n){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){t.expect=function(e,n){return new t.Assertion(e,n)},t.expect.fail=function(e,n,r,i){throw r=r||"expect.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:i},t.expect.fail)}}},function(t,e,n){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){function n(){function e(){return this instanceof String||this instanceof Number||this instanceof Boolean?new r(this.valueOf(),null,e):new r(this,null,e)}function n(t){Object.defineProperty(this,"should",{value:t,enumerable:!0,configurable:!0,writable:!0})}Object.defineProperty(Object.prototype,"should",{set:n,get:e,configurable:!0});var i={};return i.fail=function(e,n,r,o){throw r=r||"should.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:o},i.fail)},i.equal=function(t,e,n){new r(t,n).to.equal(e)},i.Throw=function(t,e,n,i){new r(t,i).to.Throw(e,n)},i.exist=function(t,e){new r(t,e).to.exist},i.not={},i.not.equal=function(t,e,n){new r(t,n).to.not.equal(e)},i.not.Throw=function(t,e,n,i){new r(t,i).to.not.Throw(e,n)},i.not.exist=function(t,e){new r(t,e).to.not.exist},i["throw"]=i.Throw,i.not["throw"]=i.not.Throw,i}var r=t.Assertion;t.should=n,t.Should=n}},function(t,e,n){/*!
	 * Chai - addChainingMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependencies
	 */
var r=n(444),i=n(310),o=n(309),a="__proto__"in Object,s=/^(?:length|name|arguments|caller)$/,u=Function.prototype.call,c=Function.prototype.apply;t.exports=function(t,e,n,l){"function"!=typeof l&&(l=function(){});var f={method:n,chainingBehavior:l};t.__methods||(t.__methods={}),t.__methods[e]=f,Object.defineProperty(t,e,{get:function(){f.chainingBehavior.call(this);var e=function h(){var t=i(this,"ssfi");t&&o.includeStack===!1&&i(this,"ssfi",h);var e=f.method.apply(this,arguments);return void 0===e?this:e};if(a){var n=e.__proto__=Object.create(this);n.call=u,n.apply=c}else{var l=Object.getOwnPropertyNames(t);l.forEach(function(n){if(!s.test(n)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r)}})}return r(this,e),e},configurable:!0})}},function(t,e,n){/*!
	 * Chai - addMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(309),i=n(310);t.exports=function(t,e,n){t[e]=function(){var o=i(this,"ssfi");o&&r.includeStack===!1&&i(this,"ssfi",t[e]);var a=n.apply(this,arguments);return void 0===a?this:a}}},function(t,e,n){/*!
	 * Chai - addProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){Object.defineProperty(t,e,{get:function(){var t=n.call(this);return void 0===t?this:t},configurable:!0})}},function(t,e,n){/*!
	 * Chai - getEnumerableProperties utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t){var e=[];for(var n in t)e.push(n);return e}},function(t,e,n){/*!
	 * Chai - message composition utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(310),i=n(439),o=(n(414),n(443));t.exports=function(t,e){var n=r(t,"negate"),a=r(t,"object"),s=e[3],u=i(t,e),c=n?e[2]:e[1],l=r(t,"message");return"function"==typeof c&&(c=c()),c=c||"",c=c.replace(/#{this}/g,o(a)).replace(/#{act}/g,o(u)).replace(/#{exp}/g,o(s)),l?l+": "+c:c}},function(t,e,n){/*!
	 * Chai - getPathValue utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * @see https://github.com/logicalparadox/filtr
	 * MIT Licensed
	 */
var r=n(441);t.exports=function(t,e){var n=r(t,e);return n.value}},function(t,e,n){/*!
	 * Chai - getProperties utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t){function e(t){-1===n.indexOf(t)&&n.push(t)}for(var n=Object.getOwnPropertyNames(subject),r=Object.getPrototypeOf(subject);null!==r;)Object.getOwnPropertyNames(r).forEach(e),r=Object.getPrototypeOf(r);return n}},function(t,e,n){/*!
	 * chai
	 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Main exports
	 */
var e=t.exports={};/*!
	 * test utility
	 */
e.test=n(550),/*!
	 * type utility
	 */
e.type=n(445),/*!
	 * message utility
	 */
e.getMessage=n(543),/*!
	 * actual utility
	 */
e.getActual=n(439),/*!
	 * Inspect util
	 */
e.inspect=n(414),/*!
	 * Object Display util
	 */
e.objDisplay=n(443),/*!
	 * Flag utility
	 */
e.flag=n(310),/*!
	 * Flag transferring utility
	 */
e.transferFlags=n(444),/*!
	 * Deep equal utility
	 */
e.eql=n(552),/*!
	 * Deep path value
	 */
e.getPathValue=n(544),/*!
	 * Deep path info
	 */
e.getPathInfo=n(441),/*!
	 * Check if a property exists
	 */
e.hasProperty=n(442),/*!
	 * Function name
	 */
e.getName=n(440),/*!
	 * add Property
	 */
e.addProperty=n(541),/*!
	 * add Method
	 */
e.addMethod=n(540),/*!
	 * overwrite Property
	 */
e.overwriteProperty=n(549),/*!
	 * overwrite Method
	 */
e.overwriteMethod=n(548),/*!
	 * Add a chainable method
	 */
e.addChainableMethod=n(539),/*!
	 * Overwrite chainable method
	 */
e.overwriteChainableMethod=n(547)},function(t,e,n){/*!
	 * Chai - overwriteChainableMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n,r){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=function(){var t=r(o).call(this);return void 0===t?this:t};var a=i.method;i.method=function(){var t=n(a).apply(this,arguments);return void 0===t?this:t}}},function(t,e,n){/*!
	 * Chai - overwriteMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){var r=t[e],i=function(){return this};r&&"function"==typeof r&&(i=r),t[e]=function(){var t=n(i).apply(this,arguments);return void 0===t?this:t}}},function(t,e,n){/*!
	 * Chai - overwriteProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e),i=function(){};r&&"function"==typeof r.get&&(i=r.get),Object.defineProperty(t,e,{get:function(){var t=n(i).call(this);return void 0===t?this:t},configurable:!0})}},function(t,e,n){/*!
	 * Chai - test utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(310);t.exports=function(t,e){var n=r(t,"negate"),i=e[0];return n?!i:i}},function(t,e,n){/*!
	 * assertion-error
	 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
	 * MIT Licensed
	 */
/*!
	 * Return a function that will copy properties from
	 * one object to another excluding any originally
	 * listed. Returned function will create a new `{}`.
	 *
	 * @param {String} excluded properties ...
	 * @return {Function}
	 */
function r(){function t(t,n){Object.keys(n).forEach(function(r){~e.indexOf(r)||(t[r]=n[r])})}var e=[].slice.call(arguments);return function(){for(var e=[].slice.call(arguments),n=0,r={};n<e.length;n++)t(r,e[n]);return r}}function i(t,e,n){var i=r("name","message","stack","constructor","toJSON"),o=i(e||{});this.message=t||"Unspecified AssertionError",this.showDiff=!1;for(var a in o)this[a]=o[a];n=n||arguments.callee,n&&Error.captureStackTrace&&Error.captureStackTrace(this,n)}/*!
	 * Primary Exports
	 */
t.exports=i,/*!
	 * Inherit from Error.prototype
	 */
i.prototype=Object.create(Error.prototype),/*!
	 * Statically set name
	 */
i.prototype.name="AssertionError",/*!
	 * Ensure correct constructor
	 */
i.prototype.constructor=i,i.prototype.toJSON=function(t){var e=r("constructor","toJSON","stack"),n=e({name:this.name},this);return!1!==t&&this.stack&&(n.stack=this.stack),n}},function(t,e,n){t.exports=n(553)},function(t,e,n){function r(t,e,n){return i(t,e)?!0:"date"===m(t)?a(t,e):"regexp"===m(t)?s(t,e):d.isBuffer(t)?f(t,e):"arguments"===m(t)?u(t,e,n):o(t,e)?"object"!==m(t)&&"object"!==m(e)&&"array"!==m(t)&&"array"!==m(e)?i(t,e):p(t,e,n):!1}/*!
	 * Strict (egal) equality test. Ensures that NaN always
	 * equals NaN and `-0` does not equal `+0`.
	 *
	 * @param {Mixed} a
	 * @param {Mixed} b
	 * @return {Boolean} equal match
	 */
function i(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}/*!
	 * Compare the types of two given objects and
	 * return if they are equal. Note that an Array
	 * has a type of `array` (not `object`) and arguments
	 * have a type of `arguments` (not `array`/`object`).
	 *
	 * @param {Mixed} a
	 * @param {Mixed} b
	 * @return {Boolean} result
	 */
function o(t,e){return m(t)===m(e)}/*!
	 * Compare two Date objects by asserting that
	 * the time values are equal using `saveValue`.
	 *
	 * @param {Date} a
	 * @param {Date} b
	 * @return {Boolean} result
	 */
function a(t,e){return"date"!==m(e)?!1:i(t.getTime(),e.getTime())}/*!
	 * Compare two regular expressions by converting them
	 * to string and checking for `sameValue`.
	 *
	 * @param {RegExp} a
	 * @param {RegExp} b
	 * @return {Boolean} result
	 */
function s(t,e){return"regexp"!==m(e)?!1:i(t.toString(),e.toString())}/*!
	 * Assert deep equality of two `arguments` objects.
	 * Unfortunately, these must be sliced to arrays
	 * prior to test to ensure no bad behavior.
	 *
	 * @param {Arguments} a
	 * @param {Arguments} b
	 * @param {Array} memoize (optional)
	 * @return {Boolean} result
	 */
function u(t,e,n){return"arguments"!==m(e)?!1:(t=[].slice.call(t),e=[].slice.call(e),r(t,e,n))}/*!
	 * Get enumerable properties of a given object.
	 *
	 * @param {Object} a
	 * @return {Array} property names
	 */
function c(t){var e=[];for(var n in t)e.push(n);return e}/*!
	 * Simple equality for flat iterable objects
	 * such as Arrays or Node.js buffers.
	 *
	 * @param {Iterable} a
	 * @param {Iterable} b
	 * @return {Boolean} result
	 */
function l(t,e){if(t.length!==e.length)return!1;for(var n=0,r=!0;n<t.length;n++)if(t[n]!==e[n]){r=!1;break}return r}/*!
	 * Extension to `iterableEqual` specifically
	 * for Node.js Buffers.
	 *
	 * @param {Buffer} a
	 * @param {Mixed} b
	 * @return {Boolean} result
	 */
function f(t,e){return d.isBuffer(e)?l(t,e):!1}/*!
	 * Block for `objectEqual` ensuring non-existing
	 * values don't get in.
	 *
	 * @param {Mixed} object
	 * @return {Boolean} result
	 */
function h(t){return null!==t&&void 0!==t}/*!
	 * Recursively check the equality of two objects.
	 * Once basic sameness has been established it will
	 * defer to `deepEqual` for each enumerable key
	 * in the object.
	 *
	 * @param {Mixed} a
	 * @param {Mixed} b
	 * @return {Boolean} result
	 */
function p(t,e,n){if(!h(t)||!h(e))return!1;if(t.prototype!==e.prototype)return!1;var i;if(n){for(i=0;i<n.length;i++)if(n[i][0]===t&&n[i][1]===e||n[i][0]===e&&n[i][1]===t)return!0}else n=[];try{var o=c(t),a=c(e)}catch(s){return!1}if(o.sort(),a.sort(),!l(o,a))return!1;n.push([t,e]);var u;for(i=o.length-1;i>=0;i--)if(u=o[i],!r(t[u],e[u],n))return!1;return!0}/*!
	 * deep-eql
	 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependencies
	 */
var d,m=n(554);try{d=n(119).Buffer}catch(v){d={},d.isBuffer=function(){return!1}}/*!
	 * Primary Export
	 */
t.exports=r},function(t,e,n){t.exports=n(555)},function(t,e,n){function r(t){var e=Object.prototype.toString.call(t);return o[e]?o[e]:null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}function i(){this.tests={}}/*!
	 * type-detect
	 * Copyright(c) 2013 jake luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Primary Exports
	 */
var e=t.exports=r,o={"[object Array]":"array","[object RegExp]":"regexp","[object Function]":"function","[object Arguments]":"arguments","[object Date]":"date"};e.Library=i,i.prototype.of=r,i.prototype.define=function(t,e){return 1===arguments.length?this.tests[t]:(this.tests[t]=e,this)},i.prototype.test=function(t,e){if(e===r(t))return!0;var n=this.tests[e];if(n&&"regexp"===r(n))return n.test(t);if(n&&"function"===r(n))return n(t);throw new ReferenceError('Type test "'+e+'" not defined or invalid.')}},function(t,e,n){e=t.exports=n(8)(),e.push([t.id,"@charset \"utf-8\";body{margin:0}#mocha{font:20px/1.5 \"Helvetica Neue\",Helvetica,Arial,sans-serif;margin:60px 50px}#mocha ul,#mocha li{margin:0;padding:0}#mocha ul{list-style:none}#mocha h2{margin:0}#mocha h1{margin:15px 0 0;font-size:1em;font-weight:200}#mocha h1 a{text-decoration:none;color:inherit}#mocha h1 a:hover{text-decoration:underline}#mocha .suite .suite h1{margin-top:0;font-size:.8em}#mocha .hidden{display:none}#mocha h2{font-size:12px;font-weight:400;cursor:pointer}#mocha .suite,#mocha .test{margin-left:15px}#mocha .test{overflow:hidden}#mocha .test.pending:hover h2::after{content:'(pending)';font-family:arial,sans-serif}#mocha .test.pass.medium .duration{background:#c09853}#mocha .test.pass.slow .duration{background:#b94a48}#mocha .test.pass::before{content:'';font-size:12px;display:block;float:left;margin-right:5px;color:#00d6b2}#mocha .test.pass .duration{font-size:9px;margin-left:5px;padding:2px 5px;color:#fff;box-shadow:inset 0 1px 1px rgba(0,0,0,.2);border-radius:5px}#mocha .test.pass.fast .duration{display:none}#mocha .test.pending{color:#0b97c4}#mocha .test.pending::before{content:'';color:#0b97c4}#mocha .test.fail{color:#c00}#mocha .test.fail pre{color:#000}#mocha .test.fail::before{content:'';font-size:12px;display:block;float:left;margin-right:5px;color:#c00}#mocha .test pre.error{color:#c00;max-height:300px;overflow:auto}#mocha .test pre{display:block;float:left;clear:left;font:12px/1.5 monaco,monospace;margin:5px;padding:15px;border:1px solid #eee;max-width:calc(100% - 42px);word-wrap:break-word;border-bottom-color:#ddd;-webkit-border-radius:3px;-webkit-box-shadow:0 1px 3px #eee;-moz-border-radius:3px;-moz-box-shadow:0 1px 3px #eee;border-radius:3px}#mocha .test h2{position:relative}#mocha .test a.replay{position:absolute;top:3px;right:0;text-decoration:none;vertical-align:middle;display:block;width:15px;height:15px;line-height:15px;text-align:center;background:#eee;font-size:15px;border-radius:15px;transition:opacity 200ms;opacity:.3;color:#888}#mocha .test:hover a.replay{opacity:1}#mocha-report.pass .test.fail,#mocha-report.fail .test.pass,#mocha-report.pending .test.pass,#mocha-report.pending .test.fail{display:none}#mocha-report.pending .test.pass.pending{display:block}#mocha-error{color:#c00;font-size:1.5em;font-weight:100;letter-spacing:1px}#mocha-stats{position:fixed;top:15px;right:10px;font-size:12px;margin:0;color:#888;z-index:1}#mocha-stats .progress{float:right;padding-top:0}#mocha-stats em{color:#000}#mocha-stats a{text-decoration:none;color:inherit}#mocha-stats a:hover{border-bottom:1px solid #eee}#mocha-stats li{display:inline-block;margin:0 5px;list-style:none;padding-top:11px}#mocha-stats canvas{width:40px;height:40px}#mocha code .comment{color:#ddd}#mocha code .init{color:#2f6fad}#mocha code .string{color:#5890ad}#mocha code .keyword{color:#8a6343}#mocha code .number{color:#2f6fad}@media screen and (max-device-width:480px){#mocha{margin:60px 0}#mocha #stats{position:absolute}}",""])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){e=t.exports=n(8)(),e.push([t.id,"#mocha-stats em{color:#fff}",""])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){t.exports=function(t){"function"==typeof execScript?execScript(t):eval.call(null,t)}},function(t,e,n){n(659)(n(661))},function(t,e,n){t.exports=";(function(){\n\n// CommonJS require()\n\nfunction require(p){\n    var path = require.resolve(p)\n      , mod = require.modules[path];\n    if (!mod) throw new Error('failed to require \"' + p + '\"');\n    if (!mod.exports) {\n      mod.exports = {};\n      mod.call(mod.exports, mod, mod.exports, require.relative(path));\n    }\n    return mod.exports;\n  }\n\nrequire.modules = {};\n\nrequire.resolve = function (path){\n    var orig = path\n      , reg = path + '.js'\n      , index = path + '/index.js';\n    return require.modules[reg] && reg\n      || require.modules[index] && index\n      || orig;\n  };\n\nrequire.register = function (path, fn){\n    require.modules[path] = fn;\n  };\n\nrequire.relative = function (parent) {\n    return function(p){\n      if ('.' != p.charAt(0)) return require(p);\n\n      var path = parent.split('/')\n        , segs = p.split('/');\n      path.pop();\n\n      for (var i = 0; i < segs.length; i++) {\n        var seg = segs[i];\n        if ('..' == seg) path.pop();\n        else if ('.' != seg) path.push(seg);\n      }\n\n      return require(path.join('/'));\n    };\n  };\n\n\nrequire.register(\"browser/debug.js\", function(module, exports, require){\nmodule.exports = function(type){\n  return function(){\n  }\n};\n\n}); // module: browser/debug.js\n\nrequire.register(\"browser/diff.js\", function(module, exports, require){\n/* See LICENSE file for terms of use */\n\n/*\n * Text diff implementation.\n *\n * This library supports the following APIS:\n * JsDiff.diffChars: Character by character diff\n * JsDiff.diffWords: Word (as defined by \\b regex) diff which ignores whitespace\n * JsDiff.diffLines: Line based diff\n *\n * JsDiff.diffCss: Diff targeted at CSS content\n *\n * These methods are based on the implementation proposed in\n * \"An O(ND) Difference Algorithm and its Variations\" (Myers, 1986).\n * http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.4.6927\n */\nvar JsDiff = (function() {\n  /*jshint maxparams: 5*/\n  function clonePath(path) {\n    return { newPos: path.newPos, components: path.components.slice(0) };\n  }\n  function removeEmpty(array) {\n    var ret = [];\n    for (var i = 0; i < array.length; i++) {\n      if (array[i]) {\n        ret.push(array[i]);\n      }\n    }\n    return ret;\n  }\n  function escapeHTML(s) {\n    var n = s;\n    n = n.replace(/&/g, '&amp;');\n    n = n.replace(/</g, '&lt;');\n    n = n.replace(/>/g, '&gt;');\n    n = n.replace(/\"/g, '&quot;');\n\n    return n;\n  }\n\n  var Diff = function(ignoreWhitespace) {\n    this.ignoreWhitespace = ignoreWhitespace;\n  };\n  Diff.prototype = {\n      diff: function(oldString, newString) {\n        // Handle the identity case (this is due to unrolling editLength == 0\n        if (newString === oldString) {\n          return [{ value: newString }];\n        }\n        if (!newString) {\n          return [{ value: oldString, removed: true }];\n        }\n        if (!oldString) {\n          return [{ value: newString, added: true }];\n        }\n\n        newString = this.tokenize(newString);\n        oldString = this.tokenize(oldString);\n\n        var newLen = newString.length, oldLen = oldString.length;\n        var maxEditLength = newLen + oldLen;\n        var bestPath = [{ newPos: -1, components: [] }];\n\n        // Seed editLength = 0\n        var oldPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n        if (bestPath[0].newPos+1 >= newLen && oldPos+1 >= oldLen) {\n          return bestPath[0].components;\n        }\n\n        for (var editLength = 1; editLength <= maxEditLength; editLength++) {\n          for (var diagonalPath = -1*editLength; diagonalPath <= editLength; diagonalPath+=2) {\n            var basePath;\n            var addPath = bestPath[diagonalPath-1],\n                removePath = bestPath[diagonalPath+1];\n            oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n            if (addPath) {\n              // No one else is going to attempt to use this value, clear it\n              bestPath[diagonalPath-1] = undefined;\n            }\n\n            var canAdd = addPath && addPath.newPos+1 < newLen;\n            var canRemove = removePath && 0 <= oldPos && oldPos < oldLen;\n            if (!canAdd && !canRemove) {\n              bestPath[diagonalPath] = undefined;\n              continue;\n            }\n\n            // Select the diagonal that we want to branch from. We select the prior\n            // path whose position in the new string is the farthest from the origin\n            // and does not pass the bounds of the diff graph\n            if (!canAdd || (canRemove && addPath.newPos < removePath.newPos)) {\n              basePath = clonePath(removePath);\n              this.pushComponent(basePath.components, oldString[oldPos], undefined, true);\n            } else {\n              basePath = clonePath(addPath);\n              basePath.newPos++;\n              this.pushComponent(basePath.components, newString[basePath.newPos], true, undefined);\n            }\n\n            var oldPos = this.extractCommon(basePath, newString, oldString, diagonalPath);\n\n            if (basePath.newPos+1 >= newLen && oldPos+1 >= oldLen) {\n              return basePath.components;\n            } else {\n              bestPath[diagonalPath] = basePath;\n            }\n          }\n        }\n      },\n\n      pushComponent: function(components, value, added, removed) {\n        var last = components[components.length-1];\n        if (last && last.added === added && last.removed === removed) {\n          // We need to clone here as the component clone operation is just\n          // as shallow array clone\n          components[components.length-1] =\n            {value: this.join(last.value, value), added: added, removed: removed };\n        } else {\n          components.push({value: value, added: added, removed: removed });\n        }\n      },\n      extractCommon: function(basePath, newString, oldString, diagonalPath) {\n        var newLen = newString.length,\n            oldLen = oldString.length,\n            newPos = basePath.newPos,\n            oldPos = newPos - diagonalPath;\n        while (newPos+1 < newLen && oldPos+1 < oldLen && this.equals(newString[newPos+1], oldString[oldPos+1])) {\n          newPos++;\n          oldPos++;\n\n          this.pushComponent(basePath.components, newString[newPos], undefined, undefined);\n        }\n        basePath.newPos = newPos;\n        return oldPos;\n      },\n\n      equals: function(left, right) {\n        var reWhitespace = /\\S/;\n        if (this.ignoreWhitespace && !reWhitespace.test(left) && !reWhitespace.test(right)) {\n          return true;\n        } else {\n          return left === right;\n        }\n      },\n      join: function(left, right) {\n        return left + right;\n      },\n      tokenize: function(value) {\n        return value;\n      }\n  };\n\n  var CharDiff = new Diff();\n\n  var WordDiff = new Diff(true);\n  var WordWithSpaceDiff = new Diff();\n  WordDiff.tokenize = WordWithSpaceDiff.tokenize = function(value) {\n    return removeEmpty(value.split(/(\\s+|\\b)/));\n  };\n\n  var CssDiff = new Diff(true);\n  CssDiff.tokenize = function(value) {\n    return removeEmpty(value.split(/([{}:;,]|\\s+)/));\n  };\n\n  var LineDiff = new Diff();\n  LineDiff.tokenize = function(value) {\n    var retLines = [],\n        lines = value.split(/^/m);\n\n    for(var i = 0; i < lines.length; i++) {\n      var line = lines[i],\n          lastLine = lines[i - 1];\n\n      // Merge lines that may contain windows new lines\n      if (line == '\\n' && lastLine && lastLine[lastLine.length - 1] === '\\r') {\n        retLines[retLines.length - 1] += '\\n';\n      } else if (line) {\n        retLines.push(line);\n      }\n    }\n\n    return retLines;\n  };\n\n  return {\n    Diff: Diff,\n\n    diffChars: function(oldStr, newStr) { return CharDiff.diff(oldStr, newStr); },\n    diffWords: function(oldStr, newStr) { return WordDiff.diff(oldStr, newStr); },\n    diffWordsWithSpace: function(oldStr, newStr) { return WordWithSpaceDiff.diff(oldStr, newStr); },\n    diffLines: function(oldStr, newStr) { return LineDiff.diff(oldStr, newStr); },\n\n    diffCss: function(oldStr, newStr) { return CssDiff.diff(oldStr, newStr); },\n\n    createPatch: function(fileName, oldStr, newStr, oldHeader, newHeader) {\n      var ret = [];\n\n      ret.push('Index: ' + fileName);\n      ret.push('===================================================================');\n      ret.push('--- ' + fileName + (typeof oldHeader === 'undefined' ? '' : '\\t' + oldHeader));\n      ret.push('+++ ' + fileName + (typeof newHeader === 'undefined' ? '' : '\\t' + newHeader));\n\n      var diff = LineDiff.diff(oldStr, newStr);\n      if (!diff[diff.length-1].value) {\n        diff.pop();   // Remove trailing newline add\n      }\n      diff.push({value: '', lines: []});   // Append an empty value to make cleanup easier\n\n      function contextLines(lines) {\n        return lines.map(function(entry) { return ' ' + entry; });\n      }\n      function eofNL(curRange, i, current) {\n        var last = diff[diff.length-2],\n            isLast = i === diff.length-2,\n            isLastOfType = i === diff.length-3 && (current.added !== last.added || current.removed !== last.removed);\n\n        // Figure out if this is the last line for the given file and missing NL\n        if (!/\\n$/.test(current.value) && (isLast || isLastOfType)) {\n          curRange.push('\\\\ No newline at end of file');\n        }\n      }\n\n      var oldRangeStart = 0, newRangeStart = 0, curRange = [],\n          oldLine = 1, newLine = 1;\n      for (var i = 0; i < diff.length; i++) {\n        var current = diff[i],\n            lines = current.lines || current.value.replace(/\\n$/, '').split('\\n');\n        current.lines = lines;\n\n        if (current.added || current.removed) {\n          if (!oldRangeStart) {\n            var prev = diff[i-1];\n            oldRangeStart = oldLine;\n            newRangeStart = newLine;\n\n            if (prev) {\n              curRange = contextLines(prev.lines.slice(-4));\n              oldRangeStart -= curRange.length;\n              newRangeStart -= curRange.length;\n            }\n          }\n          curRange.push.apply(curRange, lines.map(function(entry) { return (current.added?'+':'-') + entry; }));\n          eofNL(curRange, i, current);\n\n          if (current.added) {\n            newLine += lines.length;\n          } else {\n            oldLine += lines.length;\n          }\n        } else {\n          if (oldRangeStart) {\n            // Close out any changes that have been output (or join overlapping)\n            if (lines.length <= 8 && i < diff.length-2) {\n              // Overlapping\n              curRange.push.apply(curRange, contextLines(lines));\n            } else {\n              // end the range and output\n              var contextSize = Math.min(lines.length, 4);\n              ret.push(\n                  '@@ -' + oldRangeStart + ',' + (oldLine-oldRangeStart+contextSize)\n                  + ' +' + newRangeStart + ',' + (newLine-newRangeStart+contextSize)\n                  + ' @@');\n              ret.push.apply(ret, curRange);\n              ret.push.apply(ret, contextLines(lines.slice(0, contextSize)));\n              if (lines.length <= 4) {\n                eofNL(ret, i, current);\n              }\n\n              oldRangeStart = 0;  newRangeStart = 0; curRange = [];\n            }\n          }\n          oldLine += lines.length;\n          newLine += lines.length;\n        }\n      }\n\n      return ret.join('\\n') + '\\n';\n    },\n\n    applyPatch: function(oldStr, uniDiff) {\n      var diffstr = uniDiff.split('\\n');\n      var diff = [];\n      var remEOFNL = false,\n          addEOFNL = false;\n\n      for (var i = (diffstr[0][0]==='I'?4:0); i < diffstr.length; i++) {\n        if(diffstr[i][0] === '@') {\n          var meh = diffstr[i].split(/@@ -(\\d+),(\\d+) \\+(\\d+),(\\d+) @@/);\n          diff.unshift({\n            start:meh[3],\n            oldlength:meh[2],\n            oldlines:[],\n            newlength:meh[4],\n            newlines:[]\n          });\n        } else if(diffstr[i][0] === '+') {\n          diff[0].newlines.push(diffstr[i].substr(1));\n        } else if(diffstr[i][0] === '-') {\n          diff[0].oldlines.push(diffstr[i].substr(1));\n        } else if(diffstr[i][0] === ' ') {\n          diff[0].newlines.push(diffstr[i].substr(1));\n          diff[0].oldlines.push(diffstr[i].substr(1));\n        } else if(diffstr[i][0] === '\\\\') {\n          if (diffstr[i-1][0] === '+') {\n            remEOFNL = true;\n          } else if(diffstr[i-1][0] === '-') {\n            addEOFNL = true;\n          }\n        }\n      }\n\n      var str = oldStr.split('\\n');\n      for (var i = diff.length - 1; i >= 0; i--) {\n        var d = diff[i];\n        for (var j = 0; j < d.oldlength; j++) {\n          if(str[d.start-1+j] !== d.oldlines[j]) {\n            return false;\n          }\n        }\n        Array.prototype.splice.apply(str,[d.start-1,+d.oldlength].concat(d.newlines));\n      }\n\n      if (remEOFNL) {\n        while (!str[str.length-1]) {\n          str.pop();\n        }\n      } else if (addEOFNL) {\n        str.push('');\n      }\n      return str.join('\\n');\n    },\n\n    convertChangesToXML: function(changes){\n      var ret = [];\n      for ( var i = 0; i < changes.length; i++) {\n        var change = changes[i];\n        if (change.added) {\n          ret.push('<ins>');\n        } else if (change.removed) {\n          ret.push('<del>');\n        }\n\n        ret.push(escapeHTML(change.value));\n\n        if (change.added) {\n          ret.push('</ins>');\n        } else if (change.removed) {\n          ret.push('</del>');\n        }\n      }\n      return ret.join('');\n    },\n\n    // See: http://code.google.com/p/google-diff-match-patch/wiki/API\n    convertChangesToDMP: function(changes){\n      var ret = [], change;\n      for ( var i = 0; i < changes.length; i++) {\n        change = changes[i];\n        ret.push([(change.added ? 1 : change.removed ? -1 : 0), change.value]);\n      }\n      return ret;\n    }\n  };\n})();\n\nif (typeof module !== 'undefined') {\n    module.exports = JsDiff;\n}\n\n}); // module: browser/diff.js\n\nrequire.register(\"browser/escape-string-regexp.js\", function(module, exports, require){\n'use strict';\n\nvar matchOperatorsRe = /[|\\\\{}()[\\]^$+*?.]/g;\n\nmodule.exports = function (str) {\n  if (typeof str !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n\n  return str.replace(matchOperatorsRe,  '\\\\$&');\n};\n\n}); // module: browser/escape-string-regexp.js\n\nrequire.register(\"browser/events.js\", function(module, exports, require){\n/**\n * Module exports.\n */\n\nexports.EventEmitter = EventEmitter;\n\n/**\n * Check if `obj` is an array.\n */\n\nfunction isArray(obj) {\n  return '[object Array]' == {}.toString.call(obj);\n}\n\n/**\n * Event emitter constructor.\n *\n * @api public\n */\n\nfunction EventEmitter(){};\n\n/**\n * Adds a listener.\n *\n * @api public\n */\n\nEventEmitter.prototype.on = function (name, fn) {\n  if (!this.$events) {\n    this.$events = {};\n  }\n\n  if (!this.$events[name]) {\n    this.$events[name] = fn;\n  } else if (isArray(this.$events[name])) {\n    this.$events[name].push(fn);\n  } else {\n    this.$events[name] = [this.$events[name], fn];\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n/**\n * Adds a volatile listener.\n *\n * @api public\n */\n\nEventEmitter.prototype.once = function (name, fn) {\n  var self = this;\n\n  function on () {\n    self.removeListener(name, on);\n    fn.apply(this, arguments);\n  };\n\n  on.listener = fn;\n  this.on(name, on);\n\n  return this;\n};\n\n/**\n * Removes a listener.\n *\n * @api public\n */\n\nEventEmitter.prototype.removeListener = function (name, fn) {\n  if (this.$events && this.$events[name]) {\n    var list = this.$events[name];\n\n    if (isArray(list)) {\n      var pos = -1;\n\n      for (var i = 0, l = list.length; i < l; i++) {\n        if (list[i] === fn || (list[i].listener && list[i].listener === fn)) {\n          pos = i;\n          break;\n        }\n      }\n\n      if (pos < 0) {\n        return this;\n      }\n\n      list.splice(pos, 1);\n\n      if (!list.length) {\n        delete this.$events[name];\n      }\n    } else if (list === fn || (list.listener && list.listener === fn)) {\n      delete this.$events[name];\n    }\n  }\n\n  return this;\n};\n\n/**\n * Removes all listeners for an event.\n *\n * @api public\n */\n\nEventEmitter.prototype.removeAllListeners = function (name) {\n  if (name === undefined) {\n    this.$events = {};\n    return this;\n  }\n\n  if (this.$events && this.$events[name]) {\n    this.$events[name] = null;\n  }\n\n  return this;\n};\n\n/**\n * Gets all listeners for a certain event.\n *\n * @api public\n */\n\nEventEmitter.prototype.listeners = function (name) {\n  if (!this.$events) {\n    this.$events = {};\n  }\n\n  if (!this.$events[name]) {\n    this.$events[name] = [];\n  }\n\n  if (!isArray(this.$events[name])) {\n    this.$events[name] = [this.$events[name]];\n  }\n\n  return this.$events[name];\n};\n\n/**\n * Emits an event.\n *\n * @api public\n */\n\nEventEmitter.prototype.emit = function (name) {\n  if (!this.$events) {\n    return false;\n  }\n\n  var handler = this.$events[name];\n\n  if (!handler) {\n    return false;\n  }\n\n  var args = [].slice.call(arguments, 1);\n\n  if ('function' == typeof handler) {\n    handler.apply(this, args);\n  } else if (isArray(handler)) {\n    var listeners = handler.slice();\n\n    for (var i = 0, l = listeners.length; i < l; i++) {\n      listeners[i].apply(this, args);\n    }\n  } else {\n    return false;\n  }\n\n  return true;\n};\n\n}); // module: browser/events.js\n\nrequire.register(\"browser/fs.js\", function(module, exports, require){\n\n}); // module: browser/fs.js\n\nrequire.register(\"browser/glob.js\", function(module, exports, require){\n\n}); // module: browser/glob.js\n\nrequire.register(\"browser/path.js\", function(module, exports, require){\n\n}); // module: browser/path.js\n\nrequire.register(\"browser/progress.js\", function(module, exports, require){\n/**\n * Expose `Progress`.\n */\n\nmodule.exports = Progress;\n\n/**\n * Initialize a new `Progress` indicator.\n */\n\nfunction Progress() {\n  this.percent = 0;\n  this.size(0);\n  this.fontSize(11);\n  this.font('helvetica, arial, sans-serif');\n}\n\n/**\n * Set progress size to `n`.\n *\n * @param {Number} n\n * @return {Progress} for chaining\n * @api public\n */\n\nProgress.prototype.size = function(n){\n  this._size = n;\n  return this;\n};\n\n/**\n * Set text to `str`.\n *\n * @param {String} str\n * @return {Progress} for chaining\n * @api public\n */\n\nProgress.prototype.text = function(str){\n  this._text = str;\n  return this;\n};\n\n/**\n * Set font size to `n`.\n *\n * @param {Number} n\n * @return {Progress} for chaining\n * @api public\n */\n\nProgress.prototype.fontSize = function(n){\n  this._fontSize = n;\n  return this;\n};\n\n/**\n * Set font `family`.\n *\n * @param {String} family\n * @return {Progress} for chaining\n */\n\nProgress.prototype.font = function(family){\n  this._font = family;\n  return this;\n};\n\n/**\n * Update percentage to `n`.\n *\n * @param {Number} n\n * @return {Progress} for chaining\n */\n\nProgress.prototype.update = function(n){\n  this.percent = n;\n  return this;\n};\n\n/**\n * Draw on `ctx`.\n *\n * @param {CanvasRenderingContext2d} ctx\n * @return {Progress} for chaining\n */\n\nProgress.prototype.draw = function(ctx){\n  try {\n    var percent = Math.min(this.percent, 100)\n      , size = this._size\n      , half = size / 2\n      , x = half\n      , y = half\n      , rad = half - 1\n      , fontSize = this._fontSize;\n\n    ctx.font = fontSize + 'px ' + this._font;\n\n    var angle = Math.PI * 2 * (percent / 100);\n    ctx.clearRect(0, 0, size, size);\n\n    // outer circle\n    ctx.strokeStyle = '#9f9f9f';\n    ctx.beginPath();\n    ctx.arc(x, y, rad, 0, angle, false);\n    ctx.stroke();\n\n    // inner circle\n    ctx.strokeStyle = '#eee';\n    ctx.beginPath();\n    ctx.arc(x, y, rad - 1, 0, angle, true);\n    ctx.stroke();\n\n    // text\n    var text = this._text || (percent | 0) + '%'\n      , w = ctx.measureText(text).width;\n\n    ctx.fillText(\n        text\n      , x - w / 2 + 1\n      , y + fontSize / 2 - 1);\n  } catch (ex) {} //don't fail if we can't render progress\n  return this;\n};\n\n}); // module: browser/progress.js\n\nrequire.register(\"browser/tty.js\", function(module, exports, require){\nexports.isatty = function(){\n  return true;\n};\n\nexports.getWindowSize = function(){\n  if ('innerHeight' in global) {\n    return [global.innerHeight, global.innerWidth];\n  } else {\n    // In a Web Worker, the DOM Window is not available.\n    return [640, 480];\n  }\n};\n\n}); // module: browser/tty.js\n\nrequire.register(\"context.js\", function(module, exports, require){\n/**\n * Expose `Context`.\n */\n\nmodule.exports = Context;\n\n/**\n * Initialize a new `Context`.\n *\n * @api private\n */\n\nfunction Context(){}\n\n/**\n * Set or get the context `Runnable` to `runnable`.\n *\n * @param {Runnable} runnable\n * @return {Context}\n * @api private\n */\n\nContext.prototype.runnable = function(runnable){\n  if (0 == arguments.length) return this._runnable;\n  this.test = this._runnable = runnable;\n  return this;\n};\n\n/**\n * Set test timeout `ms`.\n *\n * @param {Number} ms\n * @return {Context} self\n * @api private\n */\n\nContext.prototype.timeout = function(ms){\n  if (arguments.length === 0) return this.runnable().timeout();\n  this.runnable().timeout(ms);\n  return this;\n};\n\n/**\n * Set test timeout `enabled`.\n *\n * @param {Boolean} enabled\n * @return {Context} self\n * @api private\n */\n\nContext.prototype.enableTimeouts = function (enabled) {\n  this.runnable().enableTimeouts(enabled);\n  return this;\n};\n\n\n/**\n * Set test slowness threshold `ms`.\n *\n * @param {Number} ms\n * @return {Context} self\n * @api private\n */\n\nContext.prototype.slow = function(ms){\n  this.runnable().slow(ms);\n  return this;\n};\n\n/**\n * Mark a test as skipped.\n *\n * @return {Context} self\n * @api private\n */\n\nContext.prototype.skip = function(){\n    this.runnable().skip();\n    return this;\n};\n\n/**\n * Inspect the context void of `._runnable`.\n *\n * @return {String}\n * @api private\n */\n\nContext.prototype.inspect = function(){\n  return JSON.stringify(this, function(key, val){\n    if ('_runnable' == key) return;\n    if ('test' == key) return;\n    return val;\n  }, 2);\n};\n\n}); // module: context.js\n\nrequire.register(\"hook.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Runnable = require('./runnable');\n\n/**\n * Expose `Hook`.\n */\n\nmodule.exports = Hook;\n\n/**\n * Initialize a new `Hook` with the given `title` and callback `fn`.\n *\n * @param {String} title\n * @param {Function} fn\n * @api private\n */\n\nfunction Hook(title, fn) {\n  Runnable.call(this, title, fn);\n  this.type = 'hook';\n}\n\n/**\n * Inherit from `Runnable.prototype`.\n */\n\nfunction F(){};\nF.prototype = Runnable.prototype;\nHook.prototype = new F;\nHook.prototype.constructor = Hook;\n\n\n/**\n * Get or set the test `err`.\n *\n * @param {Error} err\n * @return {Error}\n * @api public\n */\n\nHook.prototype.error = function(err){\n  if (0 == arguments.length) {\n    var err = this._error;\n    this._error = null;\n    return err;\n  }\n\n  this._error = err;\n};\n\n}); // module: hook.js\n\nrequire.register(\"interfaces/bdd.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test')\n  , utils = require('../utils')\n  , escapeRe = require('browser/escape-string-regexp');\n\n/**\n * BDD-style interface:\n *\n *      describe('Array', function(){\n *        describe('#indexOf()', function(){\n *          it('should return -1 when not present', function(){\n *\n *          });\n *\n *          it('should return the index when present', function(){\n *\n *          });\n *        });\n *      });\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('pre-require', function(context, file, mocha){\n\n    var common = require('./common')(suites, context);\n\n    context.before = common.before;\n    context.after = common.after;\n    context.beforeEach = common.beforeEach;\n    context.afterEach = common.afterEach;\n    context.run = mocha.options.delay && common.runWithSuite(suite);\n    /**\n     * Describe a \"suite\" with the given `title`\n     * and callback `fn` containing nested suites\n     * and/or tests.\n     */\n\n    context.describe = context.context = function(title, fn){\n      var suite = Suite.create(suites[0], title);\n      suite.file = file;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n      return suite;\n    };\n\n    /**\n     * Pending describe.\n     */\n\n    context.xdescribe =\n    context.xcontext =\n    context.describe.skip = function(title, fn){\n      var suite = Suite.create(suites[0], title);\n      suite.pending = true;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n    };\n\n    /**\n     * Exclusive suite.\n     */\n\n    context.describe.only = function(title, fn){\n      var suite = context.describe(title, fn);\n      mocha.grep(suite.fullTitle());\n      return suite;\n    };\n\n    /**\n     * Describe a specification or test-case\n     * with the given `title` and callback `fn`\n     * acting as a thunk.\n     */\n\n    context.it = context.specify = function(title, fn){\n      var suite = suites[0];\n      if (suite.pending) fn = null;\n      var test = new Test(title, fn);\n      test.file = file;\n      suite.addTest(test);\n      return test;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.it.only = function(title, fn){\n      var test = context.it(title, fn);\n      var reString = '^' + escapeRe(test.fullTitle()) + '$';\n      mocha.grep(new RegExp(reString));\n      return test;\n    };\n\n    /**\n     * Pending test case.\n     */\n\n    context.xit =\n    context.xspecify =\n    context.it.skip = function(title){\n      context.it(title);\n    };\n\n  });\n};\n\n}); // module: interfaces/bdd.js\n\nrequire.register(\"interfaces/common.js\", function(module, exports, require){\n/**\n * Functions common to more than one interface\n * @module lib/interfaces/common\n */\n\n'use strict';\n\nmodule.exports = function (suites, context) {\n\n  return {\n    /**\n     * This is only present if flag --delay is passed into Mocha.  It triggers\n     * root suite execution.  Returns a function which runs the root suite.\n     */\n    runWithSuite: function runWithSuite(suite) {\n      return function run() {\n        suite.run();\n      };\n    },\n\n    /**\n     * Execute before running tests.\n     */\n    before: function (name, fn) {\n      suites[0].beforeAll(name, fn);\n    },\n\n    /**\n     * Execute after running tests.\n     */\n    after: function (name, fn) {\n      suites[0].afterAll(name, fn);\n    },\n\n    /**\n     * Execute before each test case.\n     */\n    beforeEach: function (name, fn) {\n      suites[0].beforeEach(name, fn);\n    },\n\n    /**\n     * Execute after each test case.\n     */\n    afterEach: function (name, fn) {\n      suites[0].afterEach(name, fn);\n    },\n\n    test: {\n      /**\n       * Pending test case.\n       */\n      skip: function (title) {\n        context.test(title);\n      }\n    }\n  }\n};\n\n}); // module: interfaces/common.js\n\nrequire.register(\"interfaces/exports.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test');\n\n/**\n * TDD-style interface:\n *\n *     exports.Array = {\n *       '#indexOf()': {\n *         'should return -1 when the value is not present': function(){\n *\n *         },\n *\n *         'should return the correct index when the value is present': function(){\n *\n *         }\n *       }\n *     };\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('require', visit);\n\n  function visit(obj, file) {\n    var suite;\n    for (var key in obj) {\n      if ('function' == typeof obj[key]) {\n        var fn = obj[key];\n        switch (key) {\n          case 'before':\n            suites[0].beforeAll(fn);\n            break;\n          case 'after':\n            suites[0].afterAll(fn);\n            break;\n          case 'beforeEach':\n            suites[0].beforeEach(fn);\n            break;\n          case 'afterEach':\n            suites[0].afterEach(fn);\n            break;\n          default:\n            var test = new Test(key, fn);\n            test.file = file;\n            suites[0].addTest(test);\n        }\n      } else {\n        suite = Suite.create(suites[0], key);\n        suites.unshift(suite);\n        visit(obj[key]);\n        suites.shift();\n      }\n    }\n  }\n};\n\n}); // module: interfaces/exports.js\n\nrequire.register(\"interfaces/index.js\", function(module, exports, require){\nexports.bdd = require('./bdd');\nexports.tdd = require('./tdd');\nexports.qunit = require('./qunit');\nexports.exports = require('./exports');\n\n}); // module: interfaces/index.js\n\nrequire.register(\"interfaces/qunit.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test')\n  , escapeRe = require('browser/escape-string-regexp')\n  , utils = require('../utils');\n\n/**\n * QUnit-style interface:\n *\n *     suite('Array');\n *\n *     test('#length', function(){\n *       var arr = [1,2,3];\n *       ok(arr.length == 3);\n *     });\n *\n *     test('#indexOf()', function(){\n *       var arr = [1,2,3];\n *       ok(arr.indexOf(1) == 0);\n *       ok(arr.indexOf(2) == 1);\n *       ok(arr.indexOf(3) == 2);\n *     });\n *\n *     suite('String');\n *\n *     test('#length', function(){\n *       ok('foo'.length == 3);\n *     });\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('pre-require', function(context, file, mocha){\n\n    var common = require('./common')(suites, context);\n\n    context.before = common.before;\n    context.after = common.after;\n    context.beforeEach = common.beforeEach;\n    context.afterEach = common.afterEach;\n    context.run = mocha.options.delay && common.runWithSuite(suite);\n    /**\n     * Describe a \"suite\" with the given `title`.\n     */\n\n    context.suite = function(title){\n      if (suites.length > 1) suites.shift();\n      var suite = Suite.create(suites[0], title);\n      suite.file = file;\n      suites.unshift(suite);\n      return suite;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.suite.only = function(title, fn){\n      var suite = context.suite(title, fn);\n      mocha.grep(suite.fullTitle());\n    };\n\n    /**\n     * Describe a specification or test-case\n     * with the given `title` and callback `fn`\n     * acting as a thunk.\n     */\n\n    context.test = function(title, fn){\n      var test = new Test(title, fn);\n      test.file = file;\n      suites[0].addTest(test);\n      return test;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.test.only = function(title, fn){\n      var test = context.test(title, fn);\n      var reString = '^' + escapeRe(test.fullTitle()) + '$';\n      mocha.grep(new RegExp(reString));\n    };\n\n    context.test.skip = common.test.skip;\n\n  });\n};\n\n}); // module: interfaces/qunit.js\n\nrequire.register(\"interfaces/tdd.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test')\n  , escapeRe = require('browser/escape-string-regexp')\n  , utils = require('../utils');\n\n/**\n * TDD-style interface:\n *\n *      suite('Array', function(){\n *        suite('#indexOf()', function(){\n *          suiteSetup(function(){\n *\n *          });\n *\n *          test('should return -1 when not present', function(){\n *\n *          });\n *\n *          test('should return the index when present', function(){\n *\n *          });\n *\n *          suiteTeardown(function(){\n *\n *          });\n *        });\n *      });\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('pre-require', function(context, file, mocha){\n\n    var common = require('./common')(suites, context);\n\n    context.setup = common.beforeEach;\n    context.teardown = common.afterEach;\n    context.suiteSetup = common.before;\n    context.suiteTeardown = common.after;\n    context.run = mocha.options.delay && common.runWithSuite(suite);\n    /**\n     * Describe a \"suite\" with the given `title`\n     * and callback `fn` containing nested suites\n     * and/or tests.\n     */\n\n    context.suite = function(title, fn){\n      var suite = Suite.create(suites[0], title);\n      suite.file = file;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n      return suite;\n    };\n\n    /**\n     * Pending suite.\n     */\n    context.suite.skip = function(title, fn) {\n      var suite = Suite.create(suites[0], title);\n      suite.pending = true;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.suite.only = function(title, fn){\n      var suite = context.suite(title, fn);\n      mocha.grep(suite.fullTitle());\n    };\n\n    /**\n     * Describe a specification or test-case\n     * with the given `title` and callback `fn`\n     * acting as a thunk.\n     */\n\n    context.test = function(title, fn){\n      var suite = suites[0];\n      if (suite.pending) fn = null;\n      var test = new Test(title, fn);\n      test.file = file;\n      suite.addTest(test);\n      return test;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.test.only = function(title, fn){\n      var test = context.test(title, fn);\n      var reString = '^' + escapeRe(test.fullTitle()) + '$';\n      mocha.grep(new RegExp(reString));\n    };\n\n    context.test.skip = common.test.skip;\n  });\n};\n\n}); // module: interfaces/tdd.js\n\nrequire.register(\"mocha.js\", function(module, exports, require){\n/*!\n * mocha\n * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\n\nvar path = require('browser/path')\n  , escapeRe = require('browser/escape-string-regexp')\n  , utils = require('./utils');\n\n/**\n * Expose `Mocha`.\n */\n\nexports = module.exports = Mocha;\n\n/**\n * To require local UIs and reporters when running in node.\n */\n\nif (typeof process !== 'undefined' && typeof process.cwd === 'function') {\n  var join = path.join\n    , cwd = process.cwd();\n  module.paths.push(cwd, join(cwd, 'node_modules'));\n}\n\n/**\n * Expose internals.\n */\n\nexports.utils = utils;\nexports.interfaces = require('./interfaces');\nexports.reporters = require('./reporters');\nexports.Runnable = require('./runnable');\nexports.Context = require('./context');\nexports.Runner = require('./runner');\nexports.Suite = require('./suite');\nexports.Hook = require('./hook');\nexports.Test = require('./test');\n\n/**\n * Return image `name` path.\n *\n * @param {String} name\n * @return {String}\n * @api private\n */\n\nfunction image(name) {\n  return __dirname + '/../images/' + name + '.png';\n}\n\n/**\n * Setup mocha with `options`.\n *\n * Options:\n *\n *   - `ui` name \"bdd\", \"tdd\", \"exports\" etc\n *   - `reporter` reporter instance, defaults to `mocha.reporters.spec`\n *   - `globals` array of accepted globals\n *   - `timeout` timeout in milliseconds\n *   - `bail` bail on the first test failure\n *   - `slow` milliseconds to wait before considering a test slow\n *   - `ignoreLeaks` ignore global leaks\n *   - `fullTrace` display the full stack-trace on failing\n *   - `grep` string or regexp to filter tests with\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Mocha(options) {\n  options = options || {};\n  this.files = [];\n  this.options = options;\n  if (options.grep) this.grep(new RegExp(options.grep));\n  if (options.fgrep) this.grep(options.fgrep);\n  this.suite = new exports.Suite('', new exports.Context);\n  this.ui(options.ui);\n  this.bail(options.bail);\n  this.reporter(options.reporter, options.reporterOptions);\n  if (null != options.timeout) this.timeout(options.timeout);\n  this.useColors(options.useColors);\n  if (options.enableTimeouts !== null) this.enableTimeouts(options.enableTimeouts);\n  if (options.slow) this.slow(options.slow);\n\n  this.suite.on('pre-require', function (context) {\n    exports.afterEach = context.afterEach || context.teardown;\n    exports.after = context.after || context.suiteTeardown;\n    exports.beforeEach = context.beforeEach || context.setup;\n    exports.before = context.before || context.suiteSetup;\n    exports.describe = context.describe || context.suite;\n    exports.it = context.it || context.test;\n    exports.setup = context.setup || context.beforeEach;\n    exports.suiteSetup = context.suiteSetup || context.before;\n    exports.suiteTeardown = context.suiteTeardown || context.after;\n    exports.suite = context.suite || context.describe;\n    exports.teardown = context.teardown || context.afterEach;\n    exports.test = context.test || context.it;\n    exports.run = context.run;\n  });\n}\n\n/**\n * Enable or disable bailing on the first failure.\n *\n * @param {Boolean} [bail]\n * @api public\n */\n\nMocha.prototype.bail = function(bail){\n  if (0 == arguments.length) bail = true;\n  this.suite.bail(bail);\n  return this;\n};\n\n/**\n * Add test `file`.\n *\n * @param {String} file\n * @api public\n */\n\nMocha.prototype.addFile = function(file){\n  this.files.push(file);\n  return this;\n};\n\n/**\n * Set reporter to `reporter`, defaults to \"spec\".\n *\n * @param {String|Function} reporter name or constructor\n * @param {Object} reporterOptions optional options\n * @api public\n */\nMocha.prototype.reporter = function(reporter, reporterOptions){\n  if ('function' == typeof reporter) {\n    this._reporter = reporter;\n  } else {\n    reporter = reporter || 'spec';\n    var _reporter;\n    try { _reporter = require('./reporters/' + reporter); } catch (err) {}\n    if (!_reporter) try { _reporter = require(reporter); } catch (err) {\n      err.message.indexOf('Cannot find module') !== -1\n        ? console.warn('\"' + reporter + '\" reporter not found')\n        : console.warn('\"' + reporter + '\" reporter blew up with error:\\n' + err.stack);\n    }\n    if (!_reporter && reporter === 'teamcity')\n      console.warn('The Teamcity reporter was moved to a package named ' +\n        'mocha-teamcity-reporter ' +\n        '(https://npmjs.org/package/mocha-teamcity-reporter).');\n    if (!_reporter) throw new Error('invalid reporter \"' + reporter + '\"');\n    this._reporter = _reporter;\n  }\n  this.options.reporterOptions = reporterOptions;\n  return this;\n};\n\n/**\n * Set test UI `name`, defaults to \"bdd\".\n *\n * @param {String} bdd\n * @api public\n */\n\nMocha.prototype.ui = function(name){\n  name = name || 'bdd';\n  this._ui = exports.interfaces[name];\n  if (!this._ui) try { this._ui = require(name); } catch (err) {}\n  if (!this._ui) throw new Error('invalid interface \"' + name + '\"');\n  this._ui = this._ui(this.suite);\n  return this;\n};\n\n/**\n * Load registered files.\n *\n * @api private\n */\n\nMocha.prototype.loadFiles = function(fn){\n  var self = this;\n  var suite = this.suite;\n  var pending = this.files.length;\n  this.files.forEach(function(file){\n    file = path.resolve(file);\n    suite.emit('pre-require', global, file, self);\n    suite.emit('require', require(file), file, self);\n    suite.emit('post-require', global, file, self);\n    --pending || (fn && fn());\n  });\n};\n\n/**\n * Enable growl support.\n *\n * @api private\n */\n\nMocha.prototype._growl = function(runner, reporter) {\n  var notify = require('growl');\n\n  runner.on('end', function(){\n    var stats = reporter.stats;\n    if (stats.failures) {\n      var msg = stats.failures + ' of ' + runner.total + ' tests failed';\n      notify(msg, { name: 'mocha', title: 'Failed', image: image('error') });\n    } else {\n      notify(stats.passes + ' tests passed in ' + stats.duration + 'ms', {\n          name: 'mocha'\n        , title: 'Passed'\n        , image: image('ok')\n      });\n    }\n  });\n};\n\n/**\n * Add regexp to grep, if `re` is a string it is escaped.\n *\n * @param {RegExp|String} re\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.grep = function(re){\n  this.options.grep = 'string' == typeof re\n    ? new RegExp(escapeRe(re))\n    : re;\n  return this;\n};\n\n/**\n * Invert `.grep()` matches.\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.invert = function(){\n  this.options.invert = true;\n  return this;\n};\n\n/**\n * Ignore global leaks.\n *\n * @param {Boolean} ignore\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.ignoreLeaks = function(ignore){\n  this.options.ignoreLeaks = !!ignore;\n  return this;\n};\n\n/**\n * Enable global leak checking.\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.checkLeaks = function(){\n  this.options.ignoreLeaks = false;\n  return this;\n};\n\n/**\n * Display long stack-trace on failing\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.fullTrace = function() {\n  this.options.fullStackTrace = true;\n  return this;\n};\n\n/**\n * Enable growl support.\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.growl = function(){\n  this.options.growl = true;\n  return this;\n};\n\n/**\n * Ignore `globals` array or string.\n *\n * @param {Array|String} globals\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.globals = function(globals){\n  this.options.globals = (this.options.globals || []).concat(globals);\n  return this;\n};\n\n/**\n * Emit color output.\n *\n * @param {Boolean} colors\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.useColors = function(colors){\n  if (colors !== undefined) {\n    this.options.useColors = colors;\n  }\n  return this;\n};\n\n/**\n * Use inline diffs rather than +/-.\n *\n * @param {Boolean} inlineDiffs\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.useInlineDiffs = function(inlineDiffs) {\n  this.options.useInlineDiffs = arguments.length && inlineDiffs != undefined\n  ? inlineDiffs\n  : false;\n  return this;\n};\n\n/**\n * Set the timeout in milliseconds.\n *\n * @param {Number} timeout\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.timeout = function(timeout){\n  this.suite.timeout(timeout);\n  return this;\n};\n\n/**\n * Set slowness threshold in milliseconds.\n *\n * @param {Number} slow\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.slow = function(slow){\n  this.suite.slow(slow);\n  return this;\n};\n\n/**\n * Enable timeouts.\n *\n * @param {Boolean} enabled\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.enableTimeouts = function(enabled) {\n  this.suite.enableTimeouts(arguments.length && enabled !== undefined\n    ? enabled\n    : true);\n  return this\n};\n\n/**\n * Makes all tests async (accepting a callback)\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.asyncOnly = function(){\n  this.options.asyncOnly = true;\n  return this;\n};\n\n/**\n * Disable syntax highlighting (in browser).\n * @returns {Mocha}\n * @api public\n */\nMocha.prototype.noHighlighting = function() {\n  this.options.noHighlighting = true;\n  return this;\n};\n\n/**\n * Delay root suite execution.\n * @returns {Mocha}\n * @api public\n */\nMocha.prototype.delay = function delay() {\n  this.options.delay = true;\n  return this;\n};\n\n/**\n * Run tests and invoke `fn()` when complete.\n *\n * @param {Function} fn\n * @return {Runner}\n * @api public\n */\nMocha.prototype.run = function(fn){\n  if (this.files.length) this.loadFiles();\n  var suite = this.suite;\n  var options = this.options;\n  options.files = this.files;\n  var runner = new exports.Runner(suite, options.delay);\n  var reporter = new this._reporter(runner, options);\n  runner.ignoreLeaks = false !== options.ignoreLeaks;\n  runner.fullStackTrace = options.fullStackTrace;\n  runner.asyncOnly = options.asyncOnly;\n  if (options.grep) runner.grep(options.grep, options.invert);\n  if (options.globals) runner.globals(options.globals);\n  if (options.growl) this._growl(runner, reporter);\n  if (options.useColors !== undefined) {\n    exports.reporters.Base.useColors = options.useColors;\n  }\n  exports.reporters.Base.inlineDiffs = options.useInlineDiffs;\n\n  function done(failures) {\n      if (reporter.done) {\n          reporter.done(failures, fn);\n      } else fn && fn(failures);\n  }\n\n  return runner.run(done);\n};\n\n}); // module: mocha.js\n\nrequire.register(\"ms.js\", function(module, exports, require){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options){\n  options = options || {};\n  if ('string' == typeof val) return parse(val);\n  return options['long'] ? longFormat(val) : shortFormat(val);\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  var match = /^((?:\\d+)?\\.?\\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(str);\n  if (!match) return;\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 's':\n      return n * s;\n    case 'ms':\n      return n;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction shortFormat(ms) {\n  if (ms >= d) return Math.round(ms / d) + 'd';\n  if (ms >= h) return Math.round(ms / h) + 'h';\n  if (ms >= m) return Math.round(ms / m) + 'm';\n  if (ms >= s) return Math.round(ms / s) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction longFormat(ms) {\n  return plural(ms, d, 'day')\n    || plural(ms, h, 'hour')\n    || plural(ms, m, 'minute')\n    || plural(ms, s, 'second')\n    || ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) return;\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n}); // module: ms.js\n\nrequire.register(\"pending.js\", function(module, exports, require){\n\n/**\n * Expose `Pending`.\n */\n\nmodule.exports = Pending;\n\n/**\n * Initialize a new `Pending` error with the given message.\n *\n * @param {String} message\n */\n\nfunction Pending(message) {\n    this.message = message;\n}\n\n}); // module: pending.js\n\nrequire.register(\"reporters/base.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar tty = require('browser/tty')\n  , diff = require('browser/diff')\n  , ms = require('../ms')\n  , utils = require('../utils')\n  , supportsColor = process.env ? require('supports-color') : null;\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Check if both stdio streams are associated with a tty.\n */\n\nvar isatty = tty.isatty(1) && tty.isatty(2);\n\n/**\n * Expose `Base`.\n */\n\nexports = module.exports = Base;\n\n/**\n * Enable coloring by default, except in the browser interface.\n */\n\nexports.useColors = process.env\n  ? (supportsColor || (process.env.MOCHA_COLORS !== undefined))\n  : false;\n\n/**\n * Inline diffs instead of +/-\n */\n\nexports.inlineDiffs = false;\n\n/**\n * Default color map.\n */\n\nexports.colors = {\n    'pass': 90\n  , 'fail': 31\n  , 'bright pass': 92\n  , 'bright fail': 91\n  , 'bright yellow': 93\n  , 'pending': 36\n  , 'suite': 0\n  , 'error title': 0\n  , 'error message': 31\n  , 'error stack': 90\n  , 'checkmark': 32\n  , 'fast': 90\n  , 'medium': 33\n  , 'slow': 31\n  , 'green': 32\n  , 'light': 90\n  , 'diff gutter': 90\n  , 'diff added': 42\n  , 'diff removed': 41\n};\n\n/**\n * Default symbol map.\n */\n\nexports.symbols = {\n  ok: '',\n  err: '',\n  dot: ''\n};\n\n// With node.js on Windows: use symbols available in terminal default fonts\nif ('win32' == process.platform) {\n  exports.symbols.ok = '\\u221A';\n  exports.symbols.err = '\\u00D7';\n  exports.symbols.dot = '.';\n}\n\n/**\n * Color `str` with the given `type`,\n * allowing colors to be disabled,\n * as well as user-defined color\n * schemes.\n *\n * @param {String} type\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nvar color = exports.color = function(type, str) {\n  if (!exports.useColors) return String(str);\n  return '\\u001b[' + exports.colors[type] + 'm' + str + '\\u001b[0m';\n};\n\n/**\n * Expose term window size, with some\n * defaults for when stderr is not a tty.\n */\n\nexports.window = {\n  width: isatty\n    ? process.stdout.getWindowSize\n      ? process.stdout.getWindowSize(1)[0]\n      : tty.getWindowSize()[1]\n    : 75\n};\n\n/**\n * Expose some basic cursor interactions\n * that are common among reporters.\n */\n\nexports.cursor = {\n  hide: function(){\n    isatty && process.stdout.write('\\u001b[?25l');\n  },\n\n  show: function(){\n    isatty && process.stdout.write('\\u001b[?25h');\n  },\n\n  deleteLine: function(){\n    isatty && process.stdout.write('\\u001b[2K');\n  },\n\n  beginningOfLine: function(){\n    isatty && process.stdout.write('\\u001b[0G');\n  },\n\n  CR: function(){\n    if (isatty) {\n      exports.cursor.deleteLine();\n      exports.cursor.beginningOfLine();\n    } else {\n      process.stdout.write('\\r');\n    }\n  }\n};\n\n/**\n * Outut the given `failures` as a list.\n *\n * @param {Array} failures\n * @api public\n */\n\nexports.list = function(failures){\n  console.log();\n  failures.forEach(function(test, i){\n    // format\n    var fmt = color('error title', '  %s) %s:\\n')\n      + color('error message', '     %s')\n      + color('error stack', '\\n%s\\n');\n\n    // msg\n    var err = test.err\n      , message = err.message || ''\n      , stack = err.stack || message\n      , index = stack.indexOf(message)\n      , actual = err.actual\n      , expected = err.expected\n      , escape = true;\n    if (index === -1) {\n      msg = message;\n    } else {\n      index += message.length;\n      msg = stack.slice(0, index);\n      // remove msg from stack\n      stack = stack.slice(index + 1);\n    }\n\n    // uncaught\n    if (err.uncaught) {\n      msg = 'Uncaught ' + msg;\n    }\n    // explicitly show diff\n    if (err.showDiff !== false && sameType(actual, expected)\n        && expected !== undefined) {\n\n      if ('string' !== typeof actual) {\n        escape = false;\n        err.actual = actual = utils.stringify(actual);\n        err.expected = expected = utils.stringify(expected);\n      }\n\n      fmt = color('error title', '  %s) %s:\\n%s') + color('error stack', '\\n%s\\n');\n      var match = message.match(/^([^:]+): expected/);\n      msg = '\\n      ' + color('error message', match ? match[1] : msg);\n\n      if (exports.inlineDiffs) {\n        msg += inlineDiff(err, escape);\n      } else {\n        msg += unifiedDiff(err, escape);\n      }\n    }\n\n    // indent stack trace\n    stack = stack.replace(/^/gm, '  ');\n\n    console.log(fmt, (i + 1), test.fullTitle(), msg, stack);\n  });\n};\n\n/**\n * Initialize a new `Base` reporter.\n *\n * All other reporters generally\n * inherit from this reporter, providing\n * stats such as test duration, number\n * of tests passed / failed etc.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Base(runner) {\n  var self = this\n    , stats = this.stats = { suites: 0, tests: 0, passes: 0, pending: 0, failures: 0 }\n    , failures = this.failures = [];\n\n  if (!runner) return;\n  this.runner = runner;\n\n  runner.stats = stats;\n\n  runner.on('start', function(){\n    stats.start = new Date;\n  });\n\n  runner.on('suite', function(suite){\n    stats.suites = stats.suites || 0;\n    suite.root || stats.suites++;\n  });\n\n  runner.on('test end', function(test){\n    stats.tests = stats.tests || 0;\n    stats.tests++;\n  });\n\n  runner.on('pass', function(test){\n    stats.passes = stats.passes || 0;\n\n    var medium = test.slow() / 2;\n    test.speed = test.duration > test.slow()\n      ? 'slow'\n      : test.duration > medium\n        ? 'medium'\n        : 'fast';\n\n    stats.passes++;\n  });\n\n  runner.on('fail', function(test, err){\n    stats.failures = stats.failures || 0;\n    stats.failures++;\n    test.err = err;\n    failures.push(test);\n  });\n\n  runner.on('end', function(){\n    stats.end = new Date;\n    stats.duration = new Date - stats.start;\n  });\n\n  runner.on('pending', function(){\n    stats.pending++;\n  });\n}\n\n/**\n * Output common epilogue used by many of\n * the bundled reporters.\n *\n * @api public\n */\n\nBase.prototype.epilogue = function(){\n  var stats = this.stats;\n  var tests;\n  var fmt;\n\n  console.log();\n\n  // passes\n  fmt = color('bright pass', ' ')\n    + color('green', ' %d passing')\n    + color('light', ' (%s)');\n\n  console.log(fmt,\n    stats.passes || 0,\n    ms(stats.duration));\n\n  // pending\n  if (stats.pending) {\n    fmt = color('pending', ' ')\n      + color('pending', ' %d pending');\n\n    console.log(fmt, stats.pending);\n  }\n\n  // failures\n  if (stats.failures) {\n    fmt = color('fail', '  %d failing');\n\n    console.log(fmt, stats.failures);\n\n    Base.list(this.failures);\n    console.log();\n  }\n\n  console.log();\n};\n\n/**\n * Pad the given `str` to `len`.\n *\n * @param {String} str\n * @param {String} len\n * @return {String}\n * @api private\n */\n\nfunction pad(str, len) {\n  str = String(str);\n  return Array(len - str.length + 1).join(' ') + str;\n}\n\n\n/**\n * Returns an inline diff between 2 strings with coloured ANSI output\n *\n * @param {Error} Error with actual/expected\n * @return {String} Diff\n * @api private\n */\n\nfunction inlineDiff(err, escape) {\n  var msg = errorDiff(err, 'WordsWithSpace', escape);\n\n  // linenos\n  var lines = msg.split('\\n');\n  if (lines.length > 4) {\n    var width = String(lines.length).length;\n    msg = lines.map(function(str, i){\n      return pad(++i, width) + ' |' + ' ' + str;\n    }).join('\\n');\n  }\n\n  // legend\n  msg = '\\n'\n    + color('diff removed', 'actual')\n    + ' '\n    + color('diff added', 'expected')\n    + '\\n\\n'\n    + msg\n    + '\\n';\n\n  // indent\n  msg = msg.replace(/^/gm, '      ');\n  return msg;\n}\n\n/**\n * Returns a unified diff between 2 strings\n *\n * @param {Error} Error with actual/expected\n * @return {String} Diff\n * @api private\n */\n\nfunction unifiedDiff(err, escape) {\n  var indent = '      ';\n  function cleanUp(line) {\n    if (escape) {\n      line = escapeInvisibles(line);\n    }\n    if (line[0] === '+') return indent + colorLines('diff added', line);\n    if (line[0] === '-') return indent + colorLines('diff removed', line);\n    if (line.match(/\\@\\@/)) return null;\n    if (line.match(/\\\\ No newline/)) return null;\n    else return indent + line;\n  }\n  function notBlank(line) {\n    return line != null;\n  }\n  var msg = diff.createPatch('string', err.actual, err.expected);\n  var lines = msg.split('\\n').splice(4);\n  return '\\n      '\n         + colorLines('diff added',   '+ expected') + ' '\n         + colorLines('diff removed', '- actual')\n         + '\\n\\n'\n         + lines.map(cleanUp).filter(notBlank).join('\\n');\n}\n\n/**\n * Return a character diff for `err`.\n *\n * @param {Error} err\n * @return {String}\n * @api private\n */\n\nfunction errorDiff(err, type, escape) {\n  var actual   = escape ? escapeInvisibles(err.actual)   : err.actual;\n  var expected = escape ? escapeInvisibles(err.expected) : err.expected;\n  return diff['diff' + type](actual, expected).map(function(str){\n    if (str.added) return colorLines('diff added', str.value);\n    if (str.removed) return colorLines('diff removed', str.value);\n    return str.value;\n  }).join('');\n}\n\n/**\n * Returns a string with all invisible characters in plain text\n *\n * @param {String} line\n * @return {String}\n * @api private\n */\nfunction escapeInvisibles(line) {\n    return line.replace(/\\t/g, '<tab>')\n               .replace(/\\r/g, '<CR>')\n               .replace(/\\n/g, '<LF>\\n');\n}\n\n/**\n * Color lines for `str`, using the color `name`.\n *\n * @param {String} name\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction colorLines(name, str) {\n  return str.split('\\n').map(function(str){\n    return color(name, str);\n  }).join('\\n');\n}\n\n/**\n * Check that a / b have the same type.\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Boolean}\n * @api private\n */\n\nfunction sameType(a, b) {\n  a = Object.prototype.toString.call(a);\n  b = Object.prototype.toString.call(b);\n  return a == b;\n}\n\n}); // module: reporters/base.js\n\nrequire.register(\"reporters/doc.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils');\n\n/**\n * Expose `Doc`.\n */\n\nexports = module.exports = Doc;\n\n/**\n * Initialize a new `Doc` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Doc(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , total = runner.total\n    , indents = 2;\n\n  function indent() {\n    return Array(indents).join('  ');\n  }\n\n  runner.on('suite', function(suite){\n    if (suite.root) return;\n    ++indents;\n    console.log('%s<section class=\"suite\">', indent());\n    ++indents;\n    console.log('%s<h1>%s</h1>', indent(), utils.escape(suite.title));\n    console.log('%s<dl>', indent());\n  });\n\n  runner.on('suite end', function(suite){\n    if (suite.root) return;\n    console.log('%s</dl>', indent());\n    --indents;\n    console.log('%s</section>', indent());\n    --indents;\n  });\n\n  runner.on('pass', function(test){\n    console.log('%s  <dt>%s</dt>', indent(), utils.escape(test.title));\n    var code = utils.escape(utils.clean(test.fn.toString()));\n    console.log('%s  <dd><pre><code>%s</code></pre></dd>', indent(), code);\n  });\n\n  runner.on('fail', function(test, err){\n    console.log('%s  <dt class=\"error\">%s</dt>', indent(), utils.escape(test.title));\n    var code = utils.escape(utils.clean(test.fn.toString()));\n    console.log('%s  <dd class=\"error\"><pre><code>%s</code></pre></dd>', indent(), code);\n    console.log('%s  <dd class=\"error\">%s</dd>', indent(), utils.escape(err));\n  });\n}\n\n}); // module: reporters/doc.js\n\nrequire.register(\"reporters/dot.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , color = Base.color;\n\n/**\n * Expose `Dot`.\n */\n\nexports = module.exports = Dot;\n\n/**\n * Initialize a new `Dot` matrix test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Dot(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , width = Base.window.width * .75 | 0\n    , n = -1;\n\n  runner.on('start', function(){\n    process.stdout.write('\\n');\n  });\n\n  runner.on('pending', function(test){\n    if (++n % width == 0) process.stdout.write('\\n  ');\n    process.stdout.write(color('pending', Base.symbols.dot));\n  });\n\n  runner.on('pass', function(test){\n    if (++n % width == 0) process.stdout.write('\\n  ');\n    if ('slow' == test.speed) {\n      process.stdout.write(color('bright yellow', Base.symbols.dot));\n    } else {\n      process.stdout.write(color(test.speed, Base.symbols.dot));\n    }\n  });\n\n  runner.on('fail', function(test, err){\n    if (++n % width == 0) process.stdout.write('\\n  ');\n    process.stdout.write(color('fail', Base.symbols.dot));\n  });\n\n  runner.on('end', function(){\n    console.log();\n    self.epilogue();\n  });\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nDot.prototype = new F;\nDot.prototype.constructor = Dot;\n\n\n}); // module: reporters/dot.js\n\nrequire.register(\"reporters/html-cov.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar JSONCov = require('./json-cov')\n  , fs = require('browser/fs');\n\n/**\n * Expose `HTMLCov`.\n */\n\nexports = module.exports = HTMLCov;\n\n/**\n * Initialize a new `JsCoverage` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction HTMLCov(runner) {\n  var jade = require('jade')\n    , file = __dirname + '/templates/coverage.jade'\n    , str = fs.readFileSync(file, 'utf8')\n    , fn = jade.compile(str, { filename: file })\n    , self = this;\n\n  JSONCov.call(this, runner, false);\n\n  runner.on('end', function(){\n    process.stdout.write(fn({\n        cov: self.cov\n      , coverageClass: coverageClass\n    }));\n  });\n}\n\n/**\n * Return coverage class for `n`.\n *\n * @return {String}\n * @api private\n */\n\nfunction coverageClass(n) {\n  if (n >= 75) return 'high';\n  if (n >= 50) return 'medium';\n  if (n >= 25) return 'low';\n  return 'terrible';\n}\n\n}); // module: reporters/html-cov.js\n\nrequire.register(\"reporters/html.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils')\n  , Progress = require('../browser/progress')\n  , escape = utils.escape;\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Expose `HTML`.\n */\n\nexports = module.exports = HTML;\n\n/**\n * Stats template.\n */\n\nvar statsTemplate = '<ul id=\"mocha-stats\">'\n  + '<li class=\"progress\"><canvas width=\"40\" height=\"40\"></canvas></li>'\n  + '<li class=\"passes\"><a href=\"#\">passes:</a> <em>0</em></li>'\n  + '<li class=\"failures\"><a href=\"#\">failures:</a> <em>0</em></li>'\n  + '<li class=\"duration\">duration: <em>0</em>s</li>'\n  + '</ul>';\n\n/**\n * Initialize a new `HTML` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction HTML(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , total = runner.total\n    , stat = fragment(statsTemplate)\n    , items = stat.getElementsByTagName('li')\n    , passes = items[1].getElementsByTagName('em')[0]\n    , passesLink = items[1].getElementsByTagName('a')[0]\n    , failures = items[2].getElementsByTagName('em')[0]\n    , failuresLink = items[2].getElementsByTagName('a')[0]\n    , duration = items[3].getElementsByTagName('em')[0]\n    , canvas = stat.getElementsByTagName('canvas')[0]\n    , report = fragment('<ul id=\"mocha-report\"></ul>')\n    , stack = [report]\n    , progress\n    , ctx\n    , root = document.getElementById('mocha');\n\n  if (canvas.getContext) {\n    var ratio = window.devicePixelRatio || 1;\n    canvas.style.width = canvas.width;\n    canvas.style.height = canvas.height;\n    canvas.width *= ratio;\n    canvas.height *= ratio;\n    ctx = canvas.getContext('2d');\n    ctx.scale(ratio, ratio);\n    progress = new Progress;\n  }\n\n  if (!root) return error('#mocha div missing, add it to your document');\n\n  // pass toggle\n  on(passesLink, 'click', function(){\n    unhide();\n    var name = /pass/.test(report.className) ? '' : ' pass';\n    report.className = report.className.replace(/fail|pass/g, '') + name;\n    if (report.className.trim()) hideSuitesWithout('test pass');\n  });\n\n  // failure toggle\n  on(failuresLink, 'click', function(){\n    unhide();\n    var name = /fail/.test(report.className) ? '' : ' fail';\n    report.className = report.className.replace(/fail|pass/g, '') + name;\n    if (report.className.trim()) hideSuitesWithout('test fail');\n  });\n\n  root.appendChild(stat);\n  root.appendChild(report);\n\n  if (progress) progress.size(40);\n\n  runner.on('suite', function(suite){\n    if (suite.root) return;\n\n    // suite\n    var url = self.suiteURL(suite);\n    var el = fragment('<li class=\"suite\"><h1><a href=\"%s\">%s</a></h1></li>', url, escape(suite.title));\n\n    // container\n    stack[0].appendChild(el);\n    stack.unshift(document.createElement('ul'));\n    el.appendChild(stack[0]);\n  });\n\n  runner.on('suite end', function(suite){\n    if (suite.root) return;\n    stack.shift();\n  });\n\n  runner.on('fail', function(test, err){\n    if ('hook' == test.type) runner.emit('test end', test);\n  });\n\n  runner.on('test end', function(test){\n    // TODO: add to stats\n    var percent = stats.tests / this.total * 100 | 0;\n    if (progress) progress.update(percent).draw(ctx);\n\n    // update stats\n    var ms = new Date - stats.start;\n    text(passes, stats.passes);\n    text(failures, stats.failures);\n    text(duration, (ms / 1000).toFixed(2));\n\n    // test\n    if ('passed' == test.state) {\n      var url = self.testURL(test);\n      var el = fragment('<li class=\"test pass %e\"><h2>%e<span class=\"duration\">%ems</span> <a href=\"%s\" class=\"replay\"></a></h2></li>', test.speed, test.title, test.duration, url);\n    } else if (test.pending) {\n      var el = fragment('<li class=\"test pass pending\"><h2>%e</h2></li>', test.title);\n    } else {\n      var el = fragment('<li class=\"test fail\"><h2>%e <a href=\"%e\" class=\"replay\"></a></h2></li>', test.title, self.testURL(test));\n      var str = test.err.stack || test.err.toString();\n\n      // FF / Opera do not add the message\n      if (!~str.indexOf(test.err.message)) {\n        str = test.err.message + '\\n' + str;\n      }\n\n      // <=IE7 stringifies to [Object Error]. Since it can be overloaded, we\n      // check for the result of the stringifying.\n      if ('[object Error]' == str) str = test.err.message;\n\n      // Safari doesn't give you a stack. Let's at least provide a source line.\n      if (!test.err.stack && test.err.sourceURL && test.err.line !== undefined) {\n        str += \"\\n(\" + test.err.sourceURL + \":\" + test.err.line + \")\";\n      }\n\n      el.appendChild(fragment('<pre class=\"error\">%e</pre>', str));\n    }\n\n    // toggle code\n    // TODO: defer\n    if (!test.pending) {\n      var h2 = el.getElementsByTagName('h2')[0];\n\n      on(h2, 'click', function(){\n        pre.style.display = 'none' == pre.style.display\n          ? 'block'\n          : 'none';\n      });\n\n      var pre = fragment('<pre><code>%e</code></pre>', utils.clean(test.fn.toString()));\n      el.appendChild(pre);\n      pre.style.display = 'none';\n    }\n\n    // Don't call .appendChild if #mocha-report was already .shift()'ed off the stack.\n    if (stack[0]) stack[0].appendChild(el);\n  });\n}\n\n/**\n * Makes a URL, preserving querystring (\"search\") parameters.\n * @param {string} s\n * @returns {string} your new URL\n */\nvar makeUrl = function makeUrl(s) {\n  var search = window.location.search;\n\n  // Remove previous grep query parameter if present\n  if (search) {\n    search = search.replace(/[?&]grep=[^&\\s]*/g, '').replace(/^&/, '?');\n  }\n\n  return window.location.pathname + (search ? search + '&' : '?' ) + 'grep=' + encodeURIComponent(s);\n};\n\n/**\n * Provide suite URL\n *\n * @param {Object} [suite]\n */\nHTML.prototype.suiteURL = function(suite){\n  return makeUrl(suite.fullTitle());\n};\n\n/**\n * Provide test URL\n *\n * @param {Object} [test]\n */\n\nHTML.prototype.testURL = function(test){\n  return makeUrl(test.fullTitle());\n};\n\n/**\n * Display error `msg`.\n */\n\nfunction error(msg) {\n  document.body.appendChild(fragment('<div id=\"mocha-error\">%s</div>', msg));\n}\n\n/**\n * Return a DOM fragment from `html`.\n */\n\nfunction fragment(html) {\n  var args = arguments\n    , div = document.createElement('div')\n    , i = 1;\n\n  div.innerHTML = html.replace(/%([se])/g, function(_, type){\n    switch (type) {\n      case 's': return String(args[i++]);\n      case 'e': return escape(args[i++]);\n    }\n  });\n\n  return div.firstChild;\n}\n\n/**\n * Check for suites that do not have elements\n * with `classname`, and hide them.\n */\n\nfunction hideSuitesWithout(classname) {\n  var suites = document.getElementsByClassName('suite');\n  for (var i = 0; i < suites.length; i++) {\n    var els = suites[i].getElementsByClassName(classname);\n    if (0 == els.length) suites[i].className += ' hidden';\n  }\n}\n\n/**\n * Unhide .hidden suites.\n */\n\nfunction unhide() {\n  var els = document.getElementsByClassName('suite hidden');\n  for (var i = 0; i < els.length; ++i) {\n    els[i].className = els[i].className.replace('suite hidden', 'suite');\n  }\n}\n\n/**\n * Set `el` text to `str`.\n */\n\nfunction text(el, str) {\n  if (el.textContent) {\n    el.textContent = str;\n  } else {\n    el.innerText = str;\n  }\n}\n\n/**\n * Listen on `event` with callback `fn`.\n */\n\nfunction on(el, event, fn) {\n  if (el.addEventListener) {\n    el.addEventListener(event, fn, false);\n  } else {\n    el.attachEvent('on' + event, fn);\n  }\n}\n\n}); // module: reporters/html.js\n\nrequire.register(\"reporters/index.js\", function(module, exports, require){\nexports.Base = require('./base');\nexports.Dot = require('./dot');\nexports.Doc = require('./doc');\nexports.TAP = require('./tap');\nexports.JSON = require('./json');\nexports.HTML = require('./html');\nexports.List = require('./list');\nexports.Min = require('./min');\nexports.Spec = require('./spec');\nexports.Nyan = require('./nyan');\nexports.XUnit = require('./xunit');\nexports.Markdown = require('./markdown');\nexports.Progress = require('./progress');\nexports.Landing = require('./landing');\nexports.JSONCov = require('./json-cov');\nexports.HTMLCov = require('./html-cov');\nexports.JSONStream = require('./json-stream');\n\n}); // module: reporters/index.js\n\nrequire.register(\"reporters/json-cov.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base');\n\n/**\n * Expose `JSONCov`.\n */\n\nexports = module.exports = JSONCov;\n\n/**\n * Initialize a new `JsCoverage` reporter.\n *\n * @param {Runner} runner\n * @param {Boolean} output\n * @api public\n */\n\nfunction JSONCov(runner, output) {\n  var self = this\n    , output = 1 == arguments.length ? true : output;\n\n  Base.call(this, runner);\n\n  var tests = []\n    , failures = []\n    , passes = [];\n\n  runner.on('test end', function(test){\n    tests.push(test);\n  });\n\n  runner.on('pass', function(test){\n    passes.push(test);\n  });\n\n  runner.on('fail', function(test){\n    failures.push(test);\n  });\n\n  runner.on('end', function(){\n    var cov = global._$jscoverage || {};\n    var result = self.cov = map(cov);\n    result.stats = self.stats;\n    result.tests = tests.map(clean);\n    result.failures = failures.map(clean);\n    result.passes = passes.map(clean);\n    if (!output) return;\n    process.stdout.write(JSON.stringify(result, null, 2 ));\n  });\n}\n\n/**\n * Map jscoverage data to a JSON structure\n * suitable for reporting.\n *\n * @param {Object} cov\n * @return {Object}\n * @api private\n */\n\nfunction map(cov) {\n  var ret = {\n      instrumentation: 'node-jscoverage'\n    , sloc: 0\n    , hits: 0\n    , misses: 0\n    , coverage: 0\n    , files: []\n  };\n\n  for (var filename in cov) {\n    var data = coverage(filename, cov[filename]);\n    ret.files.push(data);\n    ret.hits += data.hits;\n    ret.misses += data.misses;\n    ret.sloc += data.sloc;\n  }\n\n  ret.files.sort(function(a, b) {\n    return a.filename.localeCompare(b.filename);\n  });\n\n  if (ret.sloc > 0) {\n    ret.coverage = (ret.hits / ret.sloc) * 100;\n  }\n\n  return ret;\n}\n\n/**\n * Map jscoverage data for a single source file\n * to a JSON structure suitable for reporting.\n *\n * @param {String} filename name of the source file\n * @param {Object} data jscoverage coverage data\n * @return {Object}\n * @api private\n */\n\nfunction coverage(filename, data) {\n  var ret = {\n    filename: filename,\n    coverage: 0,\n    hits: 0,\n    misses: 0,\n    sloc: 0,\n    source: {}\n  };\n\n  data.source.forEach(function(line, num){\n    num++;\n\n    if (data[num] === 0) {\n      ret.misses++;\n      ret.sloc++;\n    } else if (data[num] !== undefined) {\n      ret.hits++;\n      ret.sloc++;\n    }\n\n    ret.source[num] = {\n        source: line\n      , coverage: data[num] === undefined\n        ? ''\n        : data[num]\n    };\n  });\n\n  ret.coverage = ret.hits / ret.sloc * 100;\n\n  return ret;\n}\n\n/**\n * Return a plain-object representation of `test`\n * free of cyclic properties etc.\n *\n * @param {Object} test\n * @return {Object}\n * @api private\n */\n\nfunction clean(test) {\n  return {\n      title: test.title\n    , fullTitle: test.fullTitle()\n    , duration: test.duration\n  }\n}\n\n}); // module: reporters/json-cov.js\n\nrequire.register(\"reporters/json-stream.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , color = Base.color;\n\n/**\n * Expose `List`.\n */\n\nexports = module.exports = List;\n\n/**\n * Initialize a new `List` test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction List(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , total = runner.total;\n\n  runner.on('start', function(){\n    console.log(JSON.stringify(['start', { total: total }]));\n  });\n\n  runner.on('pass', function(test){\n    console.log(JSON.stringify(['pass', clean(test)]));\n  });\n\n  runner.on('fail', function(test, err){\n    test = clean(test);\n    test.err = err.message;\n    console.log(JSON.stringify(['fail', test]));\n  });\n\n  runner.on('end', function(){\n    process.stdout.write(JSON.stringify(['end', self.stats]));\n  });\n}\n\n/**\n * Return a plain-object representation of `test`\n * free of cyclic properties etc.\n *\n * @param {Object} test\n * @return {Object}\n * @api private\n */\n\nfunction clean(test) {\n  return {\n      title: test.title\n    , fullTitle: test.fullTitle()\n    , duration: test.duration\n  }\n}\n\n}); // module: reporters/json-stream.js\n\nrequire.register(\"reporters/json.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `JSON`.\n */\n\nexports = module.exports = JSONReporter;\n\n/**\n * Initialize a new `JSON` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction JSONReporter(runner) {\n  var self = this;\n  Base.call(this, runner);\n\n  var tests = []\n    , pending = []\n    , failures = []\n    , passes = [];\n\n  runner.on('test end', function(test){\n    tests.push(test);\n  });\n\n  runner.on('pass', function(test){\n    passes.push(test);\n  });\n\n  runner.on('fail', function(test){\n    failures.push(test);\n  });\n\n  runner.on('pending', function(test){\n    pending.push(test);\n  });\n\n  runner.on('end', function(){\n    var obj = {\n      stats: self.stats,\n      tests: tests.map(clean),\n      pending: pending.map(clean),\n      failures: failures.map(clean),\n      passes: passes.map(clean)\n    };\n\n    runner.testResults = obj;\n\n    process.stdout.write(JSON.stringify(obj, null, 2));\n  });\n}\n\n/**\n * Return a plain-object representation of `test`\n * free of cyclic properties etc.\n *\n * @param {Object} test\n * @return {Object}\n * @api private\n */\n\nfunction clean(test) {\n  return {\n    title: test.title,\n    fullTitle: test.fullTitle(),\n    duration: test.duration,\n    err: errorJSON(test.err || {})\n  }\n}\n\n/**\n * Transform `error` into a JSON object.\n * @param {Error} err\n * @return {Object}\n */\n\nfunction errorJSON(err) {\n  var res = {};\n  Object.getOwnPropertyNames(err).forEach(function(key) {\n    res[key] = err[key];\n  }, err);\n  return res;\n}\n\n}); // module: reporters/json.js\n\nrequire.register(\"reporters/landing.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `Landing`.\n */\n\nexports = module.exports = Landing;\n\n/**\n * Airplane color.\n */\n\nBase.colors.plane = 0;\n\n/**\n * Airplane crash color.\n */\n\nBase.colors['plane crash'] = 31;\n\n/**\n * Runway color.\n */\n\nBase.colors.runway = 90;\n\n/**\n * Initialize a new `Landing` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Landing(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , width = Base.window.width * .75 | 0\n    , total = runner.total\n    , stream = process.stdout\n    , plane = color('plane', '')\n    , crashed = -1\n    , n = 0;\n\n  function runway() {\n    var buf = Array(width).join('-');\n    return '  ' + color('runway', buf);\n  }\n\n  runner.on('start', function(){\n    stream.write('\\n\\n\\n  ');\n    cursor.hide();\n  });\n\n  runner.on('test end', function(test){\n    // check if the plane crashed\n    var col = -1 == crashed\n      ? width * ++n / total | 0\n      : crashed;\n\n    // show the crash\n    if ('failed' == test.state) {\n      plane = color('plane crash', '');\n      crashed = col;\n    }\n\n    // render landing strip\n    stream.write('\\u001b['+(width+1)+'D\\u001b[2A');\n    stream.write(runway());\n    stream.write('\\n  ');\n    stream.write(color('runway', Array(col).join('')));\n    stream.write(plane)\n    stream.write(color('runway', Array(width - col).join('') + '\\n'));\n    stream.write(runway());\n    stream.write('\\u001b[0m');\n  });\n\n  runner.on('end', function(){\n    cursor.show();\n    console.log();\n    self.epilogue();\n  });\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nLanding.prototype = new F;\nLanding.prototype.constructor = Landing;\n\n\n}); // module: reporters/landing.js\n\nrequire.register(\"reporters/list.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `List`.\n */\n\nexports = module.exports = List;\n\n/**\n * Initialize a new `List` test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction List(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , n = 0;\n\n  runner.on('start', function(){\n    console.log();\n  });\n\n  runner.on('test', function(test){\n    process.stdout.write(color('pass', '    ' + test.fullTitle() + ': '));\n  });\n\n  runner.on('pending', function(test){\n    var fmt = color('checkmark', '  -')\n      + color('pending', ' %s');\n    console.log(fmt, test.fullTitle());\n  });\n\n  runner.on('pass', function(test){\n    var fmt = color('checkmark', '  '+Base.symbols.dot)\n      + color('pass', ' %s: ')\n      + color(test.speed, '%dms');\n    cursor.CR();\n    console.log(fmt, test.fullTitle(), test.duration);\n  });\n\n  runner.on('fail', function(test, err){\n    cursor.CR();\n    console.log(color('fail', '  %d) %s'), ++n, test.fullTitle());\n  });\n\n  runner.on('end', self.epilogue.bind(self));\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nList.prototype = new F;\nList.prototype.constructor = List;\n\n\n}); // module: reporters/list.js\n\nrequire.register(\"reporters/markdown.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils');\n\n/**\n * Constants\n */\n\nvar SUITE_PREFIX = '$';\n\n/**\n * Expose `Markdown`.\n */\n\nexports = module.exports = Markdown;\n\n/**\n * Initialize a new `Markdown` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Markdown(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , level = 0\n    , buf = '';\n\n  function title(str) {\n    return Array(level).join('#') + ' ' + str;\n  }\n\n  function indent() {\n    return Array(level).join('  ');\n  }\n\n  function mapTOC(suite, obj) {\n    var ret = obj,\n        key = SUITE_PREFIX + suite.title;\n    obj = obj[key] = obj[key] || { suite: suite };\n    suite.suites.forEach(function(suite){\n      mapTOC(suite, obj);\n    });\n    return ret;\n  }\n\n  function stringifyTOC(obj, level) {\n    ++level;\n    var buf = '';\n    var link;\n    for (var key in obj) {\n      if ('suite' == key) continue;\n      if (key !== SUITE_PREFIX) {\n        link = ' - [' + key.substring(1) + ']';\n        link += '(#' + utils.slug(obj[key].suite.fullTitle()) + ')\\n';\n        buf += Array(level).join('  ') + link;\n      }\n      buf += stringifyTOC(obj[key], level);\n    }\n    return buf;\n  }\n\n  function generateTOC(suite) {\n    var obj = mapTOC(suite, {});\n    return stringifyTOC(obj, 0);\n  }\n\n  generateTOC(runner.suite);\n\n  runner.on('suite', function(suite){\n    ++level;\n    var slug = utils.slug(suite.fullTitle());\n    buf += '<a name=\"' + slug + '\"></a>' + '\\n';\n    buf += title(suite.title) + '\\n';\n  });\n\n  runner.on('suite end', function(suite){\n    --level;\n  });\n\n  runner.on('pass', function(test){\n    var code = utils.clean(test.fn.toString());\n    buf += test.title + '.\\n';\n    buf += '\\n```js\\n';\n    buf += code + '\\n';\n    buf += '```\\n\\n';\n  });\n\n  runner.on('end', function(){\n    process.stdout.write('# TOC\\n');\n    process.stdout.write(generateTOC(runner.suite));\n    process.stdout.write(buf);\n  });\n}\n\n}); // module: reporters/markdown.js\n\nrequire.register(\"reporters/min.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base');\n\n/**\n * Expose `Min`.\n */\n\nexports = module.exports = Min;\n\n/**\n * Initialize a new `Min` minimal test reporter (best used with --watch).\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Min(runner) {\n  Base.call(this, runner);\n\n  runner.on('start', function(){\n    // clear screen\n    process.stdout.write('\\u001b[2J');\n    // set cursor position\n    process.stdout.write('\\u001b[1;3H');\n  });\n\n  runner.on('end', this.epilogue.bind(this));\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nMin.prototype = new F;\nMin.prototype.constructor = Min;\n\n\n}); // module: reporters/min.js\n\nrequire.register(\"reporters/nyan.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base');\n\n/**\n * Expose `Dot`.\n */\n\nexports = module.exports = NyanCat;\n\n/**\n * Initialize a new `Dot` matrix test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction NyanCat(runner) {\n  Base.call(this, runner);\n  var self = this\n    , stats = this.stats\n    , width = Base.window.width * .75 | 0\n    , rainbowColors = this.rainbowColors = self.generateColors()\n    , colorIndex = this.colorIndex = 0\n    , numerOfLines = this.numberOfLines = 4\n    , trajectories = this.trajectories = [[], [], [], []]\n    , nyanCatWidth = this.nyanCatWidth = 11\n    , trajectoryWidthMax = this.trajectoryWidthMax = (width - nyanCatWidth)\n    , scoreboardWidth = this.scoreboardWidth = 5\n    , tick = this.tick = 0\n    , n = 0;\n\n  runner.on('start', function(){\n    Base.cursor.hide();\n    self.draw();\n  });\n\n  runner.on('pending', function(test){\n    self.draw();\n  });\n\n  runner.on('pass', function(test){\n    self.draw();\n  });\n\n  runner.on('fail', function(test, err){\n    self.draw();\n  });\n\n  runner.on('end', function(){\n    Base.cursor.show();\n    for (var i = 0; i < self.numberOfLines; i++) write('\\n');\n    self.epilogue();\n  });\n}\n\n/**\n * Draw the nyan cat\n *\n * @api private\n */\n\nNyanCat.prototype.draw = function(){\n  this.appendRainbow();\n  this.drawScoreboard();\n  this.drawRainbow();\n  this.drawNyanCat();\n  this.tick = !this.tick;\n};\n\n/**\n * Draw the \"scoreboard\" showing the number\n * of passes, failures and pending tests.\n *\n * @api private\n */\n\nNyanCat.prototype.drawScoreboard = function(){\n  var stats = this.stats;\n\n  function draw(type, n) {\n    write(' ');\n    write(Base.color(type, n));\n    write('\\n');\n  }\n\n  draw('green', stats.passes);\n  draw('fail', stats.failures);\n  draw('pending', stats.pending);\n  write('\\n');\n\n  this.cursorUp(this.numberOfLines);\n};\n\n/**\n * Append the rainbow.\n *\n * @api private\n */\n\nNyanCat.prototype.appendRainbow = function(){\n  var segment = this.tick ? '_' : '-';\n  var rainbowified = this.rainbowify(segment);\n\n  for (var index = 0; index < this.numberOfLines; index++) {\n    var trajectory = this.trajectories[index];\n    if (trajectory.length >= this.trajectoryWidthMax) trajectory.shift();\n    trajectory.push(rainbowified);\n  }\n};\n\n/**\n * Draw the rainbow.\n *\n * @api private\n */\n\nNyanCat.prototype.drawRainbow = function(){\n  var self = this;\n\n  this.trajectories.forEach(function(line, index) {\n    write('\\u001b[' + self.scoreboardWidth + 'C');\n    write(line.join(''));\n    write('\\n');\n  });\n\n  this.cursorUp(this.numberOfLines);\n};\n\n/**\n * Draw the nyan cat\n *\n * @api private\n */\n\nNyanCat.prototype.drawNyanCat = function() {\n  var self = this;\n  var startWidth = this.scoreboardWidth + this.trajectories[0].length;\n  var dist = '\\u001b[' + startWidth + 'C';\n  var padding = '';\n\n  write(dist);\n  write('_,------,');\n  write('\\n');\n\n  write(dist);\n  padding = self.tick ? '  ' : '   ';\n  write('_|' + padding + '/\\\\_/\\\\ ');\n  write('\\n');\n\n  write(dist);\n  padding = self.tick ? '_' : '__';\n  var tail = self.tick ? '~' : '^';\n  var face;\n  write(tail + '|' + padding + this.face() + ' ');\n  write('\\n');\n\n  write(dist);\n  padding = self.tick ? ' ' : '  ';\n  write(padding + '\"\"  \"\" ');\n  write('\\n');\n\n  this.cursorUp(this.numberOfLines);\n};\n\n/**\n * Draw nyan cat face.\n *\n * @return {String}\n * @api private\n */\n\nNyanCat.prototype.face = function() {\n  var stats = this.stats;\n  if (stats.failures) {\n    return '( x .x)';\n  } else if (stats.pending) {\n    return '( o .o)';\n  } else if(stats.passes) {\n    return '( ^ .^)';\n  } else {\n    return '( - .-)';\n  }\n};\n\n/**\n * Move cursor up `n`.\n *\n * @param {Number} n\n * @api private\n */\n\nNyanCat.prototype.cursorUp = function(n) {\n  write('\\u001b[' + n + 'A');\n};\n\n/**\n * Move cursor down `n`.\n *\n * @param {Number} n\n * @api private\n */\n\nNyanCat.prototype.cursorDown = function(n) {\n  write('\\u001b[' + n + 'B');\n};\n\n/**\n * Generate rainbow colors.\n *\n * @return {Array}\n * @api private\n */\n\nNyanCat.prototype.generateColors = function(){\n  var colors = [];\n\n  for (var i = 0; i < (6 * 7); i++) {\n    var pi3 = Math.floor(Math.PI / 3);\n    var n = (i * (1.0 / 6));\n    var r = Math.floor(3 * Math.sin(n) + 3);\n    var g = Math.floor(3 * Math.sin(n + 2 * pi3) + 3);\n    var b = Math.floor(3 * Math.sin(n + 4 * pi3) + 3);\n    colors.push(36 * r + 6 * g + b + 16);\n  }\n\n  return colors;\n};\n\n/**\n * Apply rainbow to the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nNyanCat.prototype.rainbowify = function(str){\n  if (!Base.useColors)\n    return str;\n  var color = this.rainbowColors[this.colorIndex % this.rainbowColors.length];\n  this.colorIndex += 1;\n  return '\\u001b[38;5;' + color + 'm' + str + '\\u001b[0m';\n};\n\n/**\n * Stdout helper.\n */\n\nfunction write(string) {\n  process.stdout.write(string);\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nNyanCat.prototype = new F;\nNyanCat.prototype.constructor = NyanCat;\n\n\n}); // module: reporters/nyan.js\n\nrequire.register(\"reporters/progress.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `Progress`.\n */\n\nexports = module.exports = Progress;\n\n/**\n * General progress bar color.\n */\n\nBase.colors.progress = 90;\n\n/**\n * Initialize a new `Progress` bar test reporter.\n *\n * @param {Runner} runner\n * @param {Object} options\n * @api public\n */\n\nfunction Progress(runner, options) {\n  Base.call(this, runner);\n\n  var self = this\n    , options = options || {}\n    , stats = this.stats\n    , width = Base.window.width * .50 | 0\n    , total = runner.total\n    , complete = 0\n    , max = Math.max\n    , lastN = -1;\n\n  // default chars\n  options.open = options.open || '[';\n  options.complete = options.complete || '';\n  options.incomplete = options.incomplete || Base.symbols.dot;\n  options.close = options.close || ']';\n  options.verbose = false;\n\n  // tests started\n  runner.on('start', function(){\n    console.log();\n    cursor.hide();\n  });\n\n  // tests complete\n  runner.on('test end', function(){\n    complete++;\n    var incomplete = total - complete\n      , percent = complete / total\n      , n = width * percent | 0\n      , i = width - n;\n\n    if (lastN === n && !options.verbose) {\n      // Don't re-render the line if it hasn't changed\n      return;\n    }\n    lastN = n;\n\n    cursor.CR();\n    process.stdout.write('\\u001b[J');\n    process.stdout.write(color('progress', '  ' + options.open));\n    process.stdout.write(Array(n).join(options.complete));\n    process.stdout.write(Array(i).join(options.incomplete));\n    process.stdout.write(color('progress', options.close));\n    if (options.verbose) {\n      process.stdout.write(color('progress', ' ' + complete + ' of ' + total));\n    }\n  });\n\n  // tests are complete, output some stats\n  // and the failures if any\n  runner.on('end', function(){\n    cursor.show();\n    console.log();\n    self.epilogue();\n  });\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nProgress.prototype = new F;\nProgress.prototype.constructor = Progress;\n\n\n}); // module: reporters/progress.js\n\nrequire.register(\"reporters/spec.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `Spec`.\n */\n\nexports = module.exports = Spec;\n\n/**\n * Initialize a new `Spec` test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Spec(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , indents = 0\n    , n = 0;\n\n  function indent() {\n    return Array(indents).join('  ')\n  }\n\n  runner.on('start', function(){\n    console.log();\n  });\n\n  runner.on('suite', function(suite){\n    ++indents;\n    console.log(color('suite', '%s%s'), indent(), suite.title);\n  });\n\n  runner.on('suite end', function(suite){\n    --indents;\n    if (1 == indents) console.log();\n  });\n\n  runner.on('pending', function(test){\n    var fmt = indent() + color('pending', '  - %s');\n    console.log(fmt, test.title);\n  });\n\n  runner.on('pass', function(test){\n    if ('fast' == test.speed) {\n      var fmt = indent()\n        + color('checkmark', '  ' + Base.symbols.ok)\n        + color('pass', ' %s');\n      cursor.CR();\n      console.log(fmt, test.title);\n    } else {\n      var fmt = indent()\n        + color('checkmark', '  ' + Base.symbols.ok)\n        + color('pass', ' %s')\n        + color(test.speed, ' (%dms)');\n      cursor.CR();\n      console.log(fmt, test.title, test.duration);\n    }\n  });\n\n  runner.on('fail', function(test, err){\n    cursor.CR();\n    console.log(indent() + color('fail', '  %d) %s'), ++n, test.title);\n  });\n\n  runner.on('end', self.epilogue.bind(self));\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nSpec.prototype = new F;\nSpec.prototype.constructor = Spec;\n\n\n}); // module: reporters/spec.js\n\nrequire.register(\"reporters/tap.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `TAP`.\n */\n\nexports = module.exports = TAP;\n\n/**\n * Initialize a new `TAP` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction TAP(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , n = 1\n    , passes = 0\n    , failures = 0;\n\n  runner.on('start', function(){\n    var total = runner.grepTotal(runner.suite);\n    console.log('%d..%d', 1, total);\n  });\n\n  runner.on('test end', function(){\n    ++n;\n  });\n\n  runner.on('pending', function(test){\n    console.log('ok %d %s # SKIP -', n, title(test));\n  });\n\n  runner.on('pass', function(test){\n    passes++;\n    console.log('ok %d %s', n, title(test));\n  });\n\n  runner.on('fail', function(test, err){\n    failures++;\n    console.log('not ok %d %s', n, title(test));\n    if (err.stack) console.log(err.stack.replace(/^/gm, '  '));\n  });\n\n  runner.on('end', function(){\n    console.log('# tests ' + (passes + failures));\n    console.log('# pass ' + passes);\n    console.log('# fail ' + failures);\n  });\n}\n\n/**\n * Return a TAP-safe title of `test`\n *\n * @param {Object} test\n * @return {String}\n * @api private\n */\n\nfunction title(test) {\n  return test.fullTitle().replace(/#/g, '');\n}\n\n}); // module: reporters/tap.js\n\nrequire.register(\"reporters/xunit.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils')\n  , fs = require('browser/fs')\n  , escape = utils.escape;\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Expose `XUnit`.\n */\n\nexports = module.exports = XUnit;\n\n/**\n * Initialize a new `XUnit` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction XUnit(runner, options) {\n  Base.call(this, runner);\n  var stats = this.stats\n    , tests = []\n    , self = this;\n\n  if (options.reporterOptions && options.reporterOptions.output) {\n      if (! fs.createWriteStream) {\n          throw new Error('file output not supported in browser');\n      }\n      self.fileStream = fs.createWriteStream(options.reporterOptions.output);\n  }\n\n  runner.on('pending', function(test){\n    tests.push(test);\n  });\n\n  runner.on('pass', function(test){\n    tests.push(test);\n  });\n\n  runner.on('fail', function(test){\n    tests.push(test);\n  });\n\n  runner.on('end', function(){\n    self.write(tag('testsuite', {\n        name: 'Mocha Tests'\n      , tests: stats.tests\n      , failures: stats.failures\n      , errors: stats.failures\n      , skipped: stats.tests - stats.failures - stats.passes\n      , timestamp: (new Date).toUTCString()\n      , time: (stats.duration / 1000) || 0\n    }, false));\n\n    tests.forEach(function(t) { self.test(t); });\n    self.write('</testsuite>');\n  });\n}\n\n/**\n * Override done to close the stream (if it's a file).\n */\nXUnit.prototype.done = function(failures, fn) {\n    if (this.fileStream) {\n        this.fileStream.end(function() {\n            fn(failures);\n        });\n    } else {\n        fn(failures);\n    }\n};\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nXUnit.prototype = new F;\nXUnit.prototype.constructor = XUnit;\n\n\n/**\n * Write out the given line\n */\nXUnit.prototype.write = function(line) {\n    if (this.fileStream) {\n        this.fileStream.write(line + '\\n');\n    } else {\n        console.log(line);\n    }\n};\n\n/**\n * Output tag for the given `test.`\n */\n\nXUnit.prototype.test = function(test, ostream) {\n  var attrs = {\n      classname: test.parent.fullTitle()\n    , name: test.title\n    , time: (test.duration / 1000) || 0\n  };\n\n  if ('failed' == test.state) {\n    var err = test.err;\n    this.write(tag('testcase', attrs, false, tag('failure', {}, false, cdata(escape(err.message) + \"\\n\" + err.stack))));\n  } else if (test.pending) {\n    this.write(tag('testcase', attrs, false, tag('skipped', {}, true)));\n  } else {\n    this.write(tag('testcase', attrs, true) );\n  }\n};\n\n/**\n * HTML tag helper.\n */\n\nfunction tag(name, attrs, close, content) {\n  var end = close ? '/>' : '>'\n    , pairs = []\n    , tag;\n\n  for (var key in attrs) {\n    pairs.push(key + '=\"' + escape(attrs[key]) + '\"');\n  }\n\n  tag = '<' + name + (pairs.length ? ' ' + pairs.join(' ') : '') + end;\n  if (content) tag += content + '</' + name + end;\n  return tag;\n}\n\n/**\n * Return cdata escaped CDATA `str`.\n */\n\nfunction cdata(str) {\n  return '<![CDATA[' + escape(str) + ']]>';\n}\n\n}); // module: reporters/xunit.js\n\nrequire.register(\"runnable.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar EventEmitter = require('browser/events').EventEmitter\n  , debug = require('browser/debug')('mocha:runnable')\n  , Pending = require('./pending')\n  , milliseconds = require('./ms')\n  , utils = require('./utils');\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Object#toString().\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Expose `Runnable`.\n */\n\nmodule.exports = Runnable;\n\n/**\n * Initialize a new `Runnable` with the given `title` and callback `fn`.\n *\n * @param {String} title\n * @param {Function} fn\n * @api private\n */\n\nfunction Runnable(title, fn) {\n  this.title = title;\n  this.fn = fn;\n  this.async = fn && fn.length;\n  this.sync = ! this.async;\n  this._timeout = 2000;\n  this._slow = 75;\n  this._enableTimeouts = true;\n  this.timedOut = false;\n  this._trace = new Error('done() called multiple times')\n}\n\n/**\n * Inherit from `EventEmitter.prototype`.\n */\n\nfunction F(){};\nF.prototype = EventEmitter.prototype;\nRunnable.prototype = new F;\nRunnable.prototype.constructor = Runnable;\n\n\n/**\n * Set & get timeout `ms`.\n *\n * @param {Number|String} ms\n * @return {Runnable|Number} ms or self\n * @api private\n */\n\nRunnable.prototype.timeout = function(ms){\n  if (0 == arguments.length) return this._timeout;\n  if (ms === 0) this._enableTimeouts = false;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('timeout %d', ms);\n  this._timeout = ms;\n  if (this.timer) this.resetTimeout();\n  return this;\n};\n\n/**\n * Set & get slow `ms`.\n *\n * @param {Number|String} ms\n * @return {Runnable|Number} ms or self\n * @api private\n */\n\nRunnable.prototype.slow = function(ms){\n  if (0 === arguments.length) return this._slow;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('timeout %d', ms);\n  this._slow = ms;\n  return this;\n};\n\n/**\n * Set and & get timeout `enabled`.\n *\n * @param {Boolean} enabled\n * @return {Runnable|Boolean} enabled or self\n * @api private\n */\n\nRunnable.prototype.enableTimeouts = function(enabled){\n  if (arguments.length === 0) return this._enableTimeouts;\n  debug('enableTimeouts %s', enabled);\n  this._enableTimeouts = enabled;\n  return this;\n};\n\n/**\n * Halt and mark as pending.\n *\n * @api private\n */\n\nRunnable.prototype.skip = function(){\n    throw new Pending();\n};\n\n/**\n * Return the full title generated by recursively\n * concatenating the parent's full title.\n *\n * @return {String}\n * @api public\n */\n\nRunnable.prototype.fullTitle = function(){\n  return this.parent.fullTitle() + ' ' + this.title;\n};\n\n/**\n * Clear the timeout.\n *\n * @api private\n */\n\nRunnable.prototype.clearTimeout = function(){\n  clearTimeout(this.timer);\n};\n\n/**\n * Inspect the runnable void of private properties.\n *\n * @return {String}\n * @api private\n */\n\nRunnable.prototype.inspect = function(){\n  return JSON.stringify(this, function(key, val){\n    if ('_' == key[0]) return;\n    if ('parent' == key) return '#<Suite>';\n    if ('ctx' == key) return '#<Context>';\n    return val;\n  }, 2);\n};\n\n/**\n * Reset the timeout.\n *\n * @api private\n */\n\nRunnable.prototype.resetTimeout = function(){\n  var self = this;\n  var ms = this.timeout() || 1e9;\n\n  if (!this._enableTimeouts) return;\n  this.clearTimeout();\n  this.timer = setTimeout(function(){\n    if (!self._enableTimeouts) return;\n    self.callback(new Error('timeout of ' + ms + 'ms exceeded. Ensure the done() callback is being called in this test.'));\n    self.timedOut = true;\n  }, ms);\n};\n\n/**\n * Whitelist these globals for this test run\n *\n * @api private\n */\nRunnable.prototype.globals = function(arr){\n  var self = this;\n  this._allowedGlobals = arr;\n};\n\n/**\n * Run the test and invoke `fn(err)`.\n *\n * @param {Function} fn\n * @api private\n */\n\nRunnable.prototype.run = function(fn){\n  var self = this\n    , start = new Date\n    , ctx = this.ctx\n    , finished\n    , emitted;\n\n  // Some times the ctx exists but it is not runnable\n  if (ctx && ctx.runnable) ctx.runnable(this);\n\n  // called multiple times\n  function multiple(err) {\n    if (emitted) return;\n    emitted = true;\n    self.emit('error', err || new Error('done() called multiple times; stacktrace may be inaccurate'));\n  }\n\n  // finished\n  function done(err) {\n    var ms = self.timeout();\n    if (self.timedOut) return;\n    if (finished) return multiple(err || self._trace);\n\n    // Discard the resolution if this test has already failed asynchronously\n    if (self.state) return;\n\n    self.clearTimeout();\n    self.duration = new Date - start;\n    finished = true;\n    if (!err && self.duration > ms && self._enableTimeouts) err = new Error('timeout of ' + ms + 'ms exceeded. Ensure the done() callback is being called in this test.');\n    fn(err);\n  }\n\n  // for .resetTimeout()\n  this.callback = done;\n\n  // explicit async with `done` argument\n  if (this.async) {\n    this.resetTimeout();\n\n    try {\n      this.fn.call(ctx, function(err){\n        if (err instanceof Error || toString.call(err) === \"[object Error]\") return done(err);\n        if (null != err) {\n          if (Object.prototype.toString.call(err) === '[object Object]') {\n            return done(new Error('done() invoked with non-Error: ' + JSON.stringify(err)));\n          } else {\n            return done(new Error('done() invoked with non-Error: ' + err));\n          }\n        }\n        done();\n      });\n    } catch (err) {\n      done(utils.getError(err));\n    }\n    return;\n  }\n\n  if (this.asyncOnly) {\n    return done(new Error('--async-only option in use without declaring `done()`'));\n  }\n\n  // sync or promise-returning\n  try {\n    if (this.pending) {\n      done();\n    } else {\n      callFn(this.fn);\n    }\n  } catch (err) {\n    done(utils.getError(err));\n  }\n\n  function callFn(fn) {\n    var result = fn.call(ctx);\n    if (result && typeof result.then === 'function') {\n      self.resetTimeout();\n      result\n        .then(function() {\n          done()\n        },\n        function(reason) {\n          done(reason || new Error('Promise rejected with no or falsy reason'))\n        });\n    } else {\n      done();\n    }\n  }\n};\n\n}); // module: runnable.js\n\nrequire.register(\"runner.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar EventEmitter = require('browser/events').EventEmitter\n  , debug = require('browser/debug')('mocha:runner')\n  , Pending = require('./pending')\n  , Test = require('./test')\n  , utils = require('./utils')\n  , filter = utils.filter\n  , keys = utils.keys\n  , type = utils.type\n  , stringify = utils.stringify\n  , stackFilter = utils.stackTraceFilter();\n\n/**\n * Non-enumerable globals.\n */\n\nvar globals = [\n  'setTimeout',\n  'clearTimeout',\n  'setInterval',\n  'clearInterval',\n  'XMLHttpRequest',\n  'Date',\n  'setImmediate',\n  'clearImmediate'\n];\n\n/**\n * Expose `Runner`.\n */\n\nmodule.exports = Runner;\n\n/**\n * Initialize a `Runner` for the given `suite`.\n *\n * Events:\n *\n *   - `start`  execution started\n *   - `end`  execution complete\n *   - `suite`  (suite) test suite execution started\n *   - `suite end`  (suite) all tests (and sub-suites) have finished\n *   - `test`  (test) test execution started\n *   - `test end`  (test) test completed\n *   - `hook`  (hook) hook execution started\n *   - `hook end`  (hook) hook complete\n *   - `pass`  (test) test passed\n *   - `fail`  (test, err) test failed\n *   - `pending`  (test) test pending\n *\n * @param {Suite} suite Root suite\n * @param {boolean} [delay] Whether or not to delay execution of root suite\n *   until ready.\n * @api public\n */\n\nfunction Runner(suite, delay) {\n  var self = this;\n  this._globals = [];\n  this._abort = false;\n  this._delay = delay;\n  this.suite = suite;\n  this.total = suite.total();\n  this.failures = 0;\n  this.on('test end', function(test){ self.checkGlobals(test); });\n  this.on('hook end', function(hook){ self.checkGlobals(hook); });\n  this.grep(/.*/);\n  this.globals(this.globalProps().concat(extraGlobals()));\n}\n\n/**\n * Wrapper for setImmediate, process.nextTick, or browser polyfill.\n *\n * @param {Function} fn\n * @api private\n */\n\nRunner.immediately = global.setImmediate || process.nextTick;\n\n/**\n * Inherit from `EventEmitter.prototype`.\n */\n\nfunction F(){};\nF.prototype = EventEmitter.prototype;\nRunner.prototype = new F;\nRunner.prototype.constructor = Runner;\n\n\n/**\n * Run tests with full titles matching `re`. Updates runner.total\n * with number of tests matched.\n *\n * @param {RegExp} re\n * @param {Boolean} invert\n * @return {Runner} for chaining\n * @api public\n */\n\nRunner.prototype.grep = function(re, invert){\n  debug('grep %s', re);\n  this._grep = re;\n  this._invert = invert;\n  this.total = this.grepTotal(this.suite);\n  return this;\n};\n\n/**\n * Returns the number of tests matching the grep search for the\n * given suite.\n *\n * @param {Suite} suite\n * @return {Number}\n * @api public\n */\n\nRunner.prototype.grepTotal = function(suite) {\n  var self = this;\n  var total = 0;\n\n  suite.eachTest(function(test){\n    var match = self._grep.test(test.fullTitle());\n    if (self._invert) match = !match;\n    if (match) total++;\n  });\n\n  return total;\n};\n\n/**\n * Return a list of global properties.\n *\n * @return {Array}\n * @api private\n */\n\nRunner.prototype.globalProps = function() {\n  var props = utils.keys(global);\n\n  // non-enumerables\n  for (var i = 0; i < globals.length; ++i) {\n    if (~utils.indexOf(props, globals[i])) continue;\n    props.push(globals[i]);\n  }\n\n  return props;\n};\n\n/**\n * Allow the given `arr` of globals.\n *\n * @param {Array} arr\n * @return {Runner} for chaining\n * @api public\n */\n\nRunner.prototype.globals = function(arr){\n  if (0 == arguments.length) return this._globals;\n  debug('globals %j', arr);\n  this._globals = this._globals.concat(arr);\n  return this;\n};\n\n/**\n * Check for global variable leaks.\n *\n * @api private\n */\n\nRunner.prototype.checkGlobals = function(test){\n  if (this.ignoreLeaks) return;\n  var ok = this._globals;\n\n  var globals = this.globalProps();\n  var leaks;\n\n  if (test) {\n    ok = ok.concat(test._allowedGlobals || []);\n  }\n\n  if(this.prevGlobalsLength == globals.length) return;\n  this.prevGlobalsLength = globals.length;\n\n  leaks = filterLeaks(ok, globals);\n  this._globals = this._globals.concat(leaks);\n\n  if (leaks.length > 1) {\n    this.fail(test, new Error('global leaks detected: ' + leaks.join(', ') + ''));\n  } else if (leaks.length) {\n    this.fail(test, new Error('global leak detected: ' + leaks[0]));\n  }\n};\n\n/**\n * Fail the given `test`.\n *\n * @param {Test} test\n * @param {Error} err\n * @api private\n */\n\nRunner.prototype.fail = function(test, err) {\n  ++this.failures;\n  test.state = 'failed';\n\n  if (!(err instanceof Error)) {\n    err = new Error('the ' + type(err) + ' ' + stringify(err) + ' was thrown, throw an Error :)');\n  }\n\n  err.stack = (this.fullStackTrace || !err.stack)\n    ? err.stack\n    : stackFilter(err.stack);\n\n  this.emit('fail', test, err);\n};\n\n/**\n * Fail the given `hook` with `err`.\n *\n * Hook failures work in the following pattern:\n * - If bail, then exit\n * - Failed `before` hook skips all tests in a suite and subsuites,\n *   but jumps to corresponding `after` hook\n * - Failed `before each` hook skips remaining tests in a\n *   suite and jumps to corresponding `after each` hook,\n *   which is run only once\n * - Failed `after` hook does not alter\n *   execution order\n * - Failed `after each` hook skips remaining tests in a\n *   suite and subsuites, but executes other `after each`\n *   hooks\n *\n * @param {Hook} hook\n * @param {Error} err\n * @api private\n */\n\nRunner.prototype.failHook = function(hook, err){\n  this.fail(hook, err);\n  if (this.suite.bail()) {\n    this.emit('end');\n  }\n};\n\n/**\n * Run hook `name` callbacks and then invoke `fn()`.\n *\n * @param {String} name\n * @param {Function} function\n * @api private\n */\n\nRunner.prototype.hook = function(name, fn){\n  var suite = this.suite\n    , hooks = suite['_' + name]\n    , self = this\n    , timer;\n\n  function next(i) {\n    var hook = hooks[i];\n    if (!hook) return fn();\n    self.currentRunnable = hook;\n\n    hook.ctx.currentTest = self.test;\n\n    self.emit('hook', hook);\n\n    hook.on('error', function(err){\n      self.failHook(hook, err);\n    });\n\n    hook.run(function(err){\n      hook.removeAllListeners('error');\n      var testError = hook.error();\n      if (testError) self.fail(self.test, testError);\n      if (err) {\n        if (err instanceof Pending) {\n          suite.pending = true;\n        } else {\n          self.failHook(hook, err);\n\n          // stop executing hooks, notify callee of hook err\n          return fn(err);\n        }\n      }\n      self.emit('hook end', hook);\n      delete hook.ctx.currentTest;\n      next(++i);\n    });\n  }\n\n  Runner.immediately(function(){\n    next(0);\n  });\n};\n\n/**\n * Run hook `name` for the given array of `suites`\n * in order, and callback `fn(err, errSuite)`.\n *\n * @param {String} name\n * @param {Array} suites\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.hooks = function(name, suites, fn){\n  var self = this\n    , orig = this.suite;\n\n  function next(suite) {\n    self.suite = suite;\n\n    if (!suite) {\n      self.suite = orig;\n      return fn();\n    }\n\n    self.hook(name, function(err){\n      if (err) {\n        var errSuite = self.suite;\n        self.suite = orig;\n        return fn(err, errSuite);\n      }\n\n      next(suites.pop());\n    });\n  }\n\n  next(suites.pop());\n};\n\n/**\n * Run hooks from the top level down.\n *\n * @param {String} name\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.hookUp = function(name, fn){\n  var suites = [this.suite].concat(this.parents()).reverse();\n  this.hooks(name, suites, fn);\n};\n\n/**\n * Run hooks from the bottom up.\n *\n * @param {String} name\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.hookDown = function(name, fn){\n  var suites = [this.suite].concat(this.parents());\n  this.hooks(name, suites, fn);\n};\n\n/**\n * Return an array of parent Suites from\n * closest to furthest.\n *\n * @return {Array}\n * @api private\n */\n\nRunner.prototype.parents = function(){\n  var suite = this.suite\n    , suites = [];\n  while (suite = suite.parent) suites.push(suite);\n  return suites;\n};\n\n/**\n * Run the current test and callback `fn(err)`.\n *\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.runTest = function(fn){\n  var test = this.test\n    , self = this;\n\n  if (this.asyncOnly) test.asyncOnly = true;\n\n  try {\n    test.on('error', function(err){\n      self.fail(test, err);\n    });\n    test.run(fn);\n  } catch (err) {\n    fn(err);\n  }\n};\n\n/**\n * Run tests in the given `suite` and invoke\n * the callback `fn()` when complete.\n *\n * @param {Suite} suite\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.runTests = function(suite, fn){\n  var self = this\n    , tests = suite.tests.slice()\n    , test;\n\n\n  function hookErr(err, errSuite, after) {\n    // before/after Each hook for errSuite failed:\n    var orig = self.suite;\n\n    // for failed 'after each' hook start from errSuite parent,\n    // otherwise start from errSuite itself\n    self.suite = after ? errSuite.parent : errSuite;\n\n    if (self.suite) {\n      // call hookUp afterEach\n      self.hookUp('afterEach', function(err2, errSuite2) {\n        self.suite = orig;\n        // some hooks may fail even now\n        if (err2) return hookErr(err2, errSuite2, true);\n        // report error suite\n        fn(errSuite);\n      });\n    } else {\n      // there is no need calling other 'after each' hooks\n      self.suite = orig;\n      fn(errSuite);\n    }\n  }\n\n  function next(err, errSuite) {\n    // if we bail after first err\n    if (self.failures && suite._bail) return fn();\n\n    if (self._abort) return fn();\n\n    if (err) return hookErr(err, errSuite, true);\n\n    // next test\n    test = tests.shift();\n\n    // all done\n    if (!test) return fn();\n\n    // grep\n    var match = self._grep.test(test.fullTitle());\n    if (self._invert) match = !match;\n    if (!match) return next();\n\n    // pending\n    if (test.pending) {\n      self.emit('pending', test);\n      self.emit('test end', test);\n      return next();\n    }\n\n    // execute test and hook(s)\n    self.emit('test', self.test = test);\n    self.hookDown('beforeEach', function(err, errSuite){\n\n      if (suite.pending) {\n        self.emit('pending', test);\n        self.emit('test end', test);\n        return next();\n      }\n      if (err) return hookErr(err, errSuite, false);\n\n      self.currentRunnable = self.test;\n      self.runTest(function(err){\n        test = self.test;\n\n        if (err) {\n          if (err instanceof Pending) {\n            self.emit('pending', test);\n          } else {\n            self.fail(test, err);\n          }\n          self.emit('test end', test);\n\n          if (err instanceof Pending) {\n            return next();\n          }\n\n          return self.hookUp('afterEach', next);\n        }\n\n        test.state = 'passed';\n        self.emit('pass', test);\n        self.emit('test end', test);\n        self.hookUp('afterEach', next);\n      });\n    });\n  }\n\n  this.next = next;\n  next();\n};\n\n/**\n * Run the given `suite` and invoke the\n * callback `fn()` when complete.\n *\n * @param {Suite} suite\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.runSuite = function(suite, fn){\n  var total = this.grepTotal(suite)\n    , self = this\n    , i = 0;\n\n  debug('run suite %s', suite.fullTitle());\n\n  if (!total) return fn();\n\n  this.emit('suite', this.suite = suite);\n\n  function next(errSuite) {\n    if (errSuite) {\n      // current suite failed on a hook from errSuite\n      if (errSuite == suite) {\n        // if errSuite is current suite\n        // continue to the next sibling suite\n        return done();\n      } else {\n        // errSuite is among the parents of current suite\n        // stop execution of errSuite and all sub-suites\n        return done(errSuite);\n      }\n    }\n\n    if (self._abort) return done();\n\n    var curr = suite.suites[i++];\n    if (!curr) return done();\n    self.runSuite(curr, next);\n  }\n\n  function done(errSuite) {\n    self.suite = suite;\n    self.hook('afterAll', function(){\n      self.emit('suite end', suite);\n      fn(errSuite);\n    });\n  }\n\n  this.hook('beforeAll', function(err){\n    if (err) return done();\n    self.runTests(suite, next);\n  });\n};\n\n/**\n * Handle uncaught exceptions.\n *\n * @param {Error} err\n * @api private\n */\n\nRunner.prototype.uncaught = function(err){\n  if (err) {\n    debug('uncaught exception %s', err !== function () {\n      return this;\n    }.call(err) ? err : ( err.message || err ));\n  } else {\n    debug('uncaught undefined exception');\n    err = utils.undefinedError();\n  }\n  err.uncaught = true;\n\n  var runnable = this.currentRunnable;\n  if (!runnable) return;\n\n  runnable.clearTimeout();\n\n  // Ignore errors if complete\n  if (runnable.state) return;\n  this.fail(runnable, err);\n\n  // recover from test\n  if ('test' == runnable.type) {\n    this.emit('test end', runnable);\n    this.hookUp('afterEach', this.next);\n    return;\n  }\n\n  // bail on hooks\n  this.emit('end');\n};\n\n/**\n * Run the root suite and invoke `fn(failures)`\n * on completion.\n *\n * @param {Function} fn\n * @return {Runner} for chaining\n * @api public\n */\n\nRunner.prototype.run = function(fn){\n  var self = this,\n    rootSuite = this.suite;\n\n  fn = fn || function(){};\n\n  function uncaught(err){\n    self.uncaught(err);\n  }\n\n  function start() {\n    self.emit('start');\n    self.runSuite(rootSuite, function(){\n      debug('finished running');\n      self.emit('end');\n    });\n  }\n\n  debug('start');\n\n  // callback\n  this.on('end', function(){\n    debug('end');\n    process.removeListener('uncaughtException', uncaught);\n    fn(self.failures);\n  });\n\n  // uncaught exception\n  process.on('uncaughtException', uncaught);\n\n  if (this._delay) {\n    // for reporters, I guess.\n    // might be nice to debounce some dots while we wait.\n    this.emit('waiting', rootSuite);\n    rootSuite.once('run', start);\n  }\n  else {\n    start();\n  }\n\n  return this;\n};\n\n/**\n * Cleanly abort execution\n *\n * @return {Runner} for chaining\n * @api public\n */\nRunner.prototype.abort = function(){\n  debug('aborting');\n  this._abort = true;\n};\n\n/**\n * Filter leaks with the given globals flagged as `ok`.\n *\n * @param {Array} ok\n * @param {Array} globals\n * @return {Array}\n * @api private\n */\n\nfunction filterLeaks(ok, globals) {\n  return filter(globals, function(key){\n    // Firefox and Chrome exposes iframes as index inside the window object\n    if (/^d+/.test(key)) return false;\n\n    // in firefox\n    // if runner runs in an iframe, this iframe's window.getInterface method not init at first\n    // it is assigned in some seconds\n    if (global.navigator && /^getInterface/.test(key)) return false;\n\n    // an iframe could be approached by window[iframeIndex]\n    // in ie6,7,8 and opera, iframeIndex is enumerable, this could cause leak\n    if (global.navigator && /^\\d+/.test(key)) return false;\n\n    // Opera and IE expose global variables for HTML element IDs (issue #243)\n    if (/^mocha-/.test(key)) return false;\n\n    var matched = filter(ok, function(ok){\n      if (~ok.indexOf('*')) return 0 == key.indexOf(ok.split('*')[0]);\n      return key == ok;\n    });\n    return matched.length == 0 && (!global.navigator || 'onerror' !== key);\n  });\n}\n\n/**\n * Array of globals dependent on the environment.\n *\n * @return {Array}\n * @api private\n */\n\nfunction extraGlobals() {\n if (typeof(process) === 'object' &&\n     typeof(process.version) === 'string') {\n\n   var nodeVersion = process.version.split('.').reduce(function(a, v) {\n     return a << 8 | v;\n   });\n\n   // 'errno' was renamed to process._errno in v0.9.11.\n\n   if (nodeVersion < 0x00090B) {\n     return ['errno'];\n   }\n }\n\n return [];\n}\n\n}); // module: runner.js\n\nrequire.register(\"suite.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar EventEmitter = require('browser/events').EventEmitter\n  , debug = require('browser/debug')('mocha:suite')\n  , milliseconds = require('./ms')\n  , utils = require('./utils')\n  , Hook = require('./hook');\n\n/**\n * Expose `Suite`.\n */\n\nexports = module.exports = Suite;\n\n/**\n * Create a new `Suite` with the given `title`\n * and parent `Suite`. When a suite with the\n * same title is already present, that suite\n * is returned to provide nicer reporter\n * and more flexible meta-testing.\n *\n * @param {Suite} parent\n * @param {String} title\n * @return {Suite}\n * @api public\n */\n\nexports.create = function(parent, title){\n  var suite = new Suite(title, parent.ctx);\n  suite.parent = parent;\n  if (parent.pending) suite.pending = true;\n  title = suite.fullTitle();\n  parent.addSuite(suite);\n  return suite;\n};\n\n/**\n * Initialize a new `Suite` with the given\n * `title` and `ctx`.\n *\n * @param {String} title\n * @param {Context} ctx\n * @api private\n */\n\nfunction Suite(title, parentContext) {\n  this.title = title;\n  var context = function() {};\n  context.prototype = parentContext;\n  this.ctx = new context();\n  this.suites = [];\n  this.tests = [];\n  this.pending = false;\n  this._beforeEach = [];\n  this._beforeAll = [];\n  this._afterEach = [];\n  this._afterAll = [];\n  this.root = !title;\n  this._timeout = 2000;\n  this._enableTimeouts = true;\n  this._slow = 75;\n  this._bail = false;\n  this.delayed = false;\n}\n\n/**\n * Inherit from `EventEmitter.prototype`.\n */\n\nfunction F(){};\nF.prototype = EventEmitter.prototype;\nSuite.prototype = new F;\nSuite.prototype.constructor = Suite;\n\n\n/**\n * Return a clone of this `Suite`.\n *\n * @return {Suite}\n * @api private\n */\n\nSuite.prototype.clone = function(){\n  var suite = new Suite(this.title);\n  debug('clone');\n  suite.ctx = this.ctx;\n  suite.timeout(this.timeout());\n  suite.enableTimeouts(this.enableTimeouts());\n  suite.slow(this.slow());\n  suite.bail(this.bail());\n  return suite;\n};\n\n/**\n * Set timeout `ms` or short-hand such as \"2s\".\n *\n * @param {Number|String} ms\n * @return {Suite|Number} for chaining\n * @api private\n */\n\nSuite.prototype.timeout = function(ms){\n  if (0 == arguments.length) return this._timeout;\n  if (ms.toString() === '0') this._enableTimeouts = false;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('timeout %d', ms);\n  this._timeout = parseInt(ms, 10);\n  return this;\n};\n\n/**\n  * Set timeout `enabled`.\n  *\n  * @param {Boolean} enabled\n  * @return {Suite|Boolean} self or enabled\n  * @api private\n  */\n\nSuite.prototype.enableTimeouts = function(enabled){\n  if (arguments.length === 0) return this._enableTimeouts;\n  debug('enableTimeouts %s', enabled);\n  this._enableTimeouts = enabled;\n  return this;\n};\n\n/**\n * Set slow `ms` or short-hand such as \"2s\".\n *\n * @param {Number|String} ms\n * @return {Suite|Number} for chaining\n * @api private\n */\n\nSuite.prototype.slow = function(ms){\n  if (0 === arguments.length) return this._slow;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('slow %d', ms);\n  this._slow = ms;\n  return this;\n};\n\n/**\n * Sets whether to bail after first error.\n *\n * @param {Boolean} bail\n * @return {Suite|Number} for chaining\n * @api private\n */\n\nSuite.prototype.bail = function(bail){\n  if (0 == arguments.length) return this._bail;\n  debug('bail %s', bail);\n  this._bail = bail;\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` before running tests.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.beforeAll = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"before all\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._beforeAll.push(hook);\n  this.emit('beforeAll', hook);\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` after running tests.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.afterAll = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"after all\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._afterAll.push(hook);\n  this.emit('afterAll', hook);\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` before each test case.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.beforeEach = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"before each\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._beforeEach.push(hook);\n  this.emit('beforeEach', hook);\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` after each test case.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.afterEach = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"after each\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._afterEach.push(hook);\n  this.emit('afterEach', hook);\n  return this;\n};\n\n/**\n * Add a test `suite`.\n *\n * @param {Suite} suite\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.addSuite = function(suite){\n  suite.parent = this;\n  suite.timeout(this.timeout());\n  suite.enableTimeouts(this.enableTimeouts());\n  suite.slow(this.slow());\n  suite.bail(this.bail());\n  this.suites.push(suite);\n  this.emit('suite', suite);\n  return this;\n};\n\n/**\n * Add a `test` to this suite.\n *\n * @param {Test} test\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.addTest = function(test){\n  test.parent = this;\n  test.timeout(this.timeout());\n  test.enableTimeouts(this.enableTimeouts());\n  test.slow(this.slow());\n  test.ctx = this.ctx;\n  this.tests.push(test);\n  this.emit('test', test);\n  return this;\n};\n\n/**\n * Return the full title generated by recursively\n * concatenating the parent's full title.\n *\n * @return {String}\n * @api public\n */\n\nSuite.prototype.fullTitle = function(){\n  if (this.parent) {\n    var full = this.parent.fullTitle();\n    if (full) return full + ' ' + this.title;\n  }\n  return this.title;\n};\n\n/**\n * Return the total number of tests.\n *\n * @return {Number}\n * @api public\n */\n\nSuite.prototype.total = function(){\n  return utils.reduce(this.suites, function(sum, suite){\n    return sum + suite.total();\n  }, 0) + this.tests.length;\n};\n\n/**\n * Iterates through each suite recursively to find\n * all tests. Applies a function in the format\n * `fn(test)`.\n *\n * @param {Function} fn\n * @return {Suite}\n * @api private\n */\n\nSuite.prototype.eachTest = function(fn){\n  utils.forEach(this.tests, fn);\n  utils.forEach(this.suites, function(suite){\n    suite.eachTest(fn);\n  });\n  return this;\n};\n\n/**\n * This will run the root suite if we happen to be running in delayed mode.\n */\nSuite.prototype.run = function run() {\n  if (this.root) {\n    this.emit('run');\n  }\n};\n\n}); // module: suite.js\n\nrequire.register(\"test.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Runnable = require('./runnable');\n\n/**\n * Expose `Test`.\n */\n\nmodule.exports = Test;\n\n/**\n * Initialize a new `Test` with the given `title` and callback `fn`.\n *\n * @param {String} title\n * @param {Function} fn\n * @api private\n */\n\nfunction Test(title, fn) {\n  Runnable.call(this, title, fn);\n  this.pending = !fn;\n  this.type = 'test';\n}\n\n/**\n * Inherit from `Runnable.prototype`.\n */\n\nfunction F(){};\nF.prototype = Runnable.prototype;\nTest.prototype = new F;\nTest.prototype.constructor = Test;\n\n\n}); // module: test.js\n\nrequire.register(\"utils.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar fs = require('browser/fs')\n  , path = require('browser/path')\n  , basename = path.basename\n  , exists = fs.existsSync || path.existsSync\n  , glob = require('browser/glob')\n  , join = path.join\n  , debug = require('browser/debug')('mocha:watch');\n\n/**\n * Ignored directories.\n */\n\nvar ignore = ['node_modules', '.git'];\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {String} html\n * @return {String}\n * @api private\n */\n\nexports.escape = function(html){\n  return String(html)\n    .replace(/&/g, '&amp;')\n    .replace(/\"/g, '&quot;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n};\n\n/**\n * Array#forEach (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @param {Object} scope\n * @api private\n */\n\nexports.forEach = function(arr, fn, scope){\n  for (var i = 0, l = arr.length; i < l; i++)\n    fn.call(scope, arr[i], i);\n};\n\n/**\n * Array#map (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @param {Object} scope\n * @api private\n */\n\nexports.map = function(arr, fn, scope){\n  var result = [];\n  for (var i = 0, l = arr.length; i < l; i++)\n    result.push(fn.call(scope, arr[i], i, arr));\n  return result;\n};\n\n/**\n * Array#indexOf (<=IE8)\n *\n * @parma {Array} arr\n * @param {Object} obj to find index of\n * @param {Number} start\n * @api private\n */\n\nexports.indexOf = function(arr, obj, start){\n  for (var i = start || 0, l = arr.length; i < l; i++) {\n    if (arr[i] === obj)\n      return i;\n  }\n  return -1;\n};\n\n/**\n * Array#reduce (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @param {Object} initial value\n * @api private\n */\n\nexports.reduce = function(arr, fn, val){\n  var rval = val;\n\n  for (var i = 0, l = arr.length; i < l; i++) {\n    rval = fn(rval, arr[i], i, arr);\n  }\n\n  return rval;\n};\n\n/**\n * Array#filter (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @api private\n */\n\nexports.filter = function(arr, fn){\n  var ret = [];\n\n  for (var i = 0, l = arr.length; i < l; i++) {\n    var val = arr[i];\n    if (fn(val, i, arr)) ret.push(val);\n  }\n\n  return ret;\n};\n\n/**\n * Object.keys (<=IE8)\n *\n * @param {Object} obj\n * @return {Array} keys\n * @api private\n */\n\nexports.keys = Object.keys || function(obj) {\n  var keys = []\n    , has = Object.prototype.hasOwnProperty; // for `window` on <=IE8\n\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      keys.push(key);\n    }\n  }\n\n  return keys;\n};\n\n/**\n * Watch the given `files` for changes\n * and invoke `fn(file)` on modification.\n *\n * @param {Array} files\n * @param {Function} fn\n * @api private\n */\n\nexports.watch = function(files, fn){\n  var options = { interval: 100 };\n  files.forEach(function(file){\n    debug('file %s', file);\n    fs.watchFile(file, options, function(curr, prev){\n      if (prev.mtime < curr.mtime) fn(file);\n    });\n  });\n};\n\n/**\n * Array.isArray (<=IE8)\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\nvar isArray = Array.isArray || function (obj) {\n  return '[object Array]' == {}.toString.call(obj);\n};\n\n/**\n * @description\n * Buffer.prototype.toJSON polyfill\n * @type {Function}\n */\nif(typeof Buffer !== 'undefined' && Buffer.prototype) {\n  Buffer.prototype.toJSON = Buffer.prototype.toJSON || function () {\n    return Array.prototype.slice.call(this, 0);\n  };\n}\n\n/**\n * Ignored files.\n */\n\nfunction ignored(path){\n  return !~ignore.indexOf(path);\n}\n\n/**\n * Lookup files in the given `dir`.\n *\n * @return {Array}\n * @api private\n */\n\nexports.files = function(dir, ext, ret){\n  ret = ret || [];\n  ext = ext || ['js'];\n\n  var re = new RegExp('\\\\.(' + ext.join('|') + ')$');\n\n  fs.readdirSync(dir)\n    .filter(ignored)\n    .forEach(function(path){\n      path = join(dir, path);\n      if (fs.statSync(path).isDirectory()) {\n        exports.files(path, ext, ret);\n      } else if (path.match(re)) {\n        ret.push(path);\n      }\n    });\n\n  return ret;\n};\n\n/**\n * Compute a slug from the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nexports.slug = function(str){\n  return str\n    .toLowerCase()\n    .replace(/ +/g, '-')\n    .replace(/[^-\\w]/g, '');\n};\n\n/**\n * Strip the function definition from `str`,\n * and re-indent for pre whitespace.\n */\n\nexports.clean = function(str) {\n  str = str\n    .replace(/\\r\\n?|[\\n\\u2028\\u2029]/g, \"\\n\").replace(/^\\uFEFF/, '')\n    .replace(/^function *\\(.*\\)\\s*{|\\(.*\\) *=> *{?/, '')\n    .replace(/\\s+\\}$/, '');\n\n  var spaces = str.match(/^\\n?( *)/)[1].length\n    , tabs = str.match(/^\\n?(\\t*)/)[1].length\n    , re = new RegExp('^\\n?' + (tabs ? '\\t' : ' ') + '{' + (tabs ? tabs : spaces) + '}', 'gm');\n\n  str = str.replace(re, '');\n\n  return exports.trim(str);\n};\n\n/**\n * Trim the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nexports.trim = function(str){\n  return str.replace(/^\\s+|\\s+$/g, '');\n};\n\n/**\n * Parse the given `qs`.\n *\n * @param {String} qs\n * @return {Object}\n * @api private\n */\n\nexports.parseQuery = function(qs){\n  return exports.reduce(qs.replace('?', '').split('&'), function(obj, pair){\n    var i = pair.indexOf('=')\n      , key = pair.slice(0, i)\n      , val = pair.slice(++i);\n\n    obj[key] = decodeURIComponent(val);\n    return obj;\n  }, {});\n};\n\n/**\n * Highlight the given string of `js`.\n *\n * @param {String} js\n * @return {String}\n * @api private\n */\n\nfunction highlight(js) {\n  return js\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\\/\\/(.*)/gm, '<span class=\"comment\">//$1</span>')\n    .replace(/('.*?')/gm, '<span class=\"string\">$1</span>')\n    .replace(/(\\d+\\.\\d+)/gm, '<span class=\"number\">$1</span>')\n    .replace(/(\\d+)/gm, '<span class=\"number\">$1</span>')\n    .replace(/\\bnew[ \\t]+(\\w+)/gm, '<span class=\"keyword\">new</span> <span class=\"init\">$1</span>')\n    .replace(/\\b(function|new|throw|return|var|if|else)\\b/gm, '<span class=\"keyword\">$1</span>')\n}\n\n/**\n * Highlight the contents of tag `name`.\n *\n * @param {String} name\n * @api private\n */\n\nexports.highlightTags = function(name) {\n  var code = document.getElementById('mocha').getElementsByTagName(name);\n  for (var i = 0, len = code.length; i < len; ++i) {\n    code[i].innerHTML = highlight(code[i].innerHTML);\n  }\n};\n\n/**\n * If a value could have properties, and has none, this function is called, which returns\n * a string representation of the empty value.\n *\n * Functions w/ no properties return `'[Function]'`\n * Arrays w/ length === 0 return `'[]'`\n * Objects w/ no properties return `'{}'`\n * All else: return result of `value.toString()`\n *\n * @param {*} value Value to inspect\n * @param {string} [type] The type of the value, if known.\n * @returns {string}\n */\nvar emptyRepresentation = function emptyRepresentation(value, type) {\n  type = type || exports.type(value);\n\n  switch(type) {\n    case 'function':\n      return '[Function]';\n    case 'object':\n      return '{}';\n    case 'array':\n      return '[]';\n    default:\n      return value.toString();\n  }\n};\n\n/**\n * Takes some variable and asks `{}.toString()` what it thinks it is.\n * @param {*} value Anything\n * @example\n * type({}) // 'object'\n * type([]) // 'array'\n * type(1) // 'number'\n * type(false) // 'boolean'\n * type(Infinity) // 'number'\n * type(null) // 'null'\n * type(new Date()) // 'date'\n * type(/foo/) // 'regexp'\n * type('type') // 'string'\n * type(global) // 'global'\n * @api private\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString\n * @returns {string}\n */\nexports.type = function type(value) {\n  if (typeof Buffer !== 'undefined' && Buffer.isBuffer(value)) {\n    return 'buffer';\n  }\n  return Object.prototype.toString.call(value)\n    .replace(/^\\[.+\\s(.+?)\\]$/, '$1')\n    .toLowerCase();\n};\n\n/**\n * @summary Stringify `value`.\n * @description Different behavior depending on type of value.\n * - If `value` is undefined or null, return `'[undefined]'` or `'[null]'`, respectively.\n * - If `value` is not an object, function or array, return result of `value.toString()` wrapped in double-quotes.\n * - If `value` is an *empty* object, function, or array, return result of function\n *   {@link emptyRepresentation}.\n * - If `value` has properties, call {@link exports.canonicalize} on it, then return result of\n *   JSON.stringify().\n *\n * @see exports.type\n * @param {*} value\n * @return {string}\n * @api private\n */\n\nexports.stringify = function(value) {\n  var type = exports.type(value);\n\n  if (!~exports.indexOf(['object', 'array', 'function'], type)) {\n    if(type != 'buffer') {\n      return jsonStringify(value);\n    }\n    var json = value.toJSON();\n    // Based on the toJSON result\n    return jsonStringify(json.data && json.type ? json.data : json, 2)\n      .replace(/,(\\n|$)/g, '$1');\n  }\n\n  for (var prop in value) {\n    if (Object.prototype.hasOwnProperty.call(value, prop)) {\n      return jsonStringify(exports.canonicalize(value), 2).replace(/,(\\n|$)/g, '$1');\n    }\n  }\n\n  return emptyRepresentation(value, type);\n};\n\n/**\n * @description\n * like JSON.stringify but more sense.\n * @param {Object}  object\n * @param {Number=} spaces\n * @param {number=} depth\n * @returns {*}\n * @private\n */\nfunction jsonStringify(object, spaces, depth) {\n  if(typeof spaces == 'undefined') return _stringify(object);  // primitive types\n\n  depth = depth || 1;\n  var space = spaces * depth\n    , str = isArray(object) ? '[' : '{'\n    , end = isArray(object) ? ']' : '}'\n    , length = object.length || exports.keys(object).length\n    , repeat = function(s, n) { return new Array(n).join(s); }; // `.repeat()` polyfill\n\n  function _stringify(val) {\n    switch (exports.type(val)) {\n      case 'null':\n      case 'undefined':\n        val = '[' + val + ']';\n        break;\n      case 'array':\n      case 'object':\n        val = jsonStringify(val, spaces, depth + 1);\n        break;\n      case 'boolean':\n      case 'regexp':\n      case 'number':\n        val = val === 0 && (1/val) === -Infinity // `-0`\n          ? '-0'\n          : val.toString();\n        break;\n      case 'date':\n        val = '[Date: ' + val.toISOString() + ']';\n        break;\n      case 'buffer':\n        var json = val.toJSON();\n        // Based on the toJSON result\n        json = json.data && json.type ? json.data : json;\n        val = '[Buffer: ' + jsonStringify(json, 2, depth + 1) + ']';\n        break;\n      default:\n        val = (val == '[Function]' || val == '[Circular]')\n          ? val\n          : '\"' + val + '\"'; //string\n    }\n    return val;\n  }\n\n  for(var i in object) {\n    if(!object.hasOwnProperty(i)) continue;        // not my business\n    --length;\n    str += '\\n ' + repeat(' ', space)\n      + (isArray(object) ? '' : '\"' + i + '\": ') // key\n      +  _stringify(object[i])                   // value\n      + (length ? ',' : '');                     // comma\n  }\n\n  return str + (str.length != 1                    // [], {}\n    ? '\\n' + repeat(' ', --space) + end\n    : end);\n}\n\n/**\n * Return if obj is a Buffer\n * @param {Object} arg\n * @return {Boolean}\n * @api private\n */\nexports.isBuffer = function (arg) {\n  return typeof Buffer !== 'undefined' && Buffer.isBuffer(arg);\n};\n\n/**\n * @summary Return a new Thing that has the keys in sorted order.  Recursive.\n * @description If the Thing...\n * - has already been seen, return string `'[Circular]'`\n * - is `undefined`, return string `'[undefined]'`\n * - is `null`, return value `null`\n * - is some other primitive, return the value\n * - is not a primitive or an `Array`, `Object`, or `Function`, return the value of the Thing's `toString()` method\n * - is a non-empty `Array`, `Object`, or `Function`, return the result of calling this function again.\n * - is an empty `Array`, `Object`, or `Function`, return the result of calling `emptyRepresentation()`\n *\n * @param {*} value Thing to inspect.  May or may not have properties.\n * @param {Array} [stack=[]] Stack of seen values\n * @return {(Object|Array|Function|string|undefined)}\n * @see {@link exports.stringify}\n * @api private\n */\n\nexports.canonicalize = function(value, stack) {\n  var canonicalizedObj,\n    type = exports.type(value),\n    prop,\n    withStack = function withStack(value, fn) {\n      stack.push(value);\n      fn();\n      stack.pop();\n    };\n\n  stack = stack || [];\n\n  if (exports.indexOf(stack, value) !== -1) {\n    return '[Circular]';\n  }\n\n  switch(type) {\n    case 'undefined':\n    case 'buffer':\n    case 'null':\n      canonicalizedObj = value;\n      break;\n    case 'array':\n      withStack(value, function () {\n        canonicalizedObj = exports.map(value, function (item) {\n          return exports.canonicalize(item, stack);\n        });\n      });\n      break;\n    case 'function':\n      for (prop in value) {\n        canonicalizedObj = {};\n        break;\n      }\n      if (!canonicalizedObj) {\n        canonicalizedObj = emptyRepresentation(value, type);\n        break;\n      }\n    /* falls through */\n    case 'object':\n      canonicalizedObj = canonicalizedObj || {};\n      withStack(value, function () {\n        exports.forEach(exports.keys(value).sort(), function (key) {\n          canonicalizedObj[key] = exports.canonicalize(value[key], stack);\n        });\n      });\n      break;\n    case 'date':\n    case 'number':\n    case 'regexp':\n    case 'boolean':\n      canonicalizedObj = value;\n      break;\n    default:\n      canonicalizedObj = value.toString();\n  }\n\n  return canonicalizedObj;\n};\n\n/**\n * Lookup file names at the given `path`.\n */\nexports.lookupFiles = function lookupFiles(path, extensions, recursive) {\n  var files = [];\n  var re = new RegExp('\\\\.(' + extensions.join('|') + ')$');\n\n  if (!exists(path)) {\n    if (exists(path + '.js')) {\n      path += '.js';\n    } else {\n      files = glob.sync(path);\n      if (!files.length) throw new Error(\"cannot resolve path (or pattern) '\" + path + \"'\");\n      return files;\n    }\n  }\n\n  try {\n    var stat = fs.statSync(path);\n    if (stat.isFile()) return path;\n  }\n  catch (ignored) {\n    return;\n  }\n\n  fs.readdirSync(path).forEach(function(file) {\n    file = join(path, file);\n    try {\n      var stat = fs.statSync(file);\n      if (stat.isDirectory()) {\n        if (recursive) {\n          files = files.concat(lookupFiles(file, extensions, recursive));\n        }\n        return;\n      }\n    }\n    catch (ignored) {\n      return;\n    }\n    if (!stat.isFile() || !re.test(file) || basename(file)[0] === '.') return;\n    files.push(file);\n  });\n\n  return files;\n};\n\n/**\n * Generate an undefined error with a message warning the user.\n *\n * @return {Error}\n */\n\nexports.undefinedError = function() {\n  return new Error('Caught undefined error, did you throw without specifying what?');\n};\n\n/**\n * Generate an undefined error if `err` is not defined.\n *\n * @param {Error} err\n * @return {Error}\n */\n\nexports.getError = function(err) {\n  return err || exports.undefinedError();\n};\n\n\n/**\n * @summary\n * This Filter based on `mocha-clean` module.(see: `github.com/rstacruz/mocha-clean`)\n * @description\n * When invoking this function you get a filter function that get the Error.stack as an input,\n * and return a prettify output.\n * (i.e: strip Mocha, node_modules, bower and componentJS from stack trace).\n * @returns {Function}\n */\n\nexports.stackTraceFilter = function() {\n  var slash = '/'\n    , is = typeof document === 'undefined'\n      ? { node: true }\n      : { browser: true }\n    , cwd = is.node\n      ? process.cwd() + slash\n      : location.href.replace(/\\/[^\\/]*$/, '/');\n\n  function isNodeModule (line) {\n    return (~line.indexOf('node_modules'));\n  }\n\n  function isMochaInternal (line) {\n    return (~line.indexOf('node_modules' + slash + 'mocha'))  ||\n      (~line.indexOf('components' + slash + 'mochajs'))       ||\n      (~line.indexOf('components' + slash + 'mocha'));\n  }\n\n  // node_modules, bower, componentJS\n  function isBrowserModule(line) {\n    return (~line.indexOf('node_modules')) ||\n      (~line.indexOf('components'));\n  }\n\n  function isNodeInternal (line) {\n    return (~line.indexOf('(timers.js:')) ||\n      (~line.indexOf('(events.js:'))      ||\n      (~line.indexOf('(node.js:'))        ||\n      (~line.indexOf('(module.js:'))      ||\n      (~line.indexOf('GeneratorFunctionPrototype.next (native)')) ||\n      false\n  }\n\n  return function(stack) {\n    stack = stack.split('\\n');\n\n    stack = exports.reduce(stack, function(list, line) {\n      if (is.node && (isNodeModule(line) ||\n        isMochaInternal(line) ||\n        isNodeInternal(line)))\n        return list;\n\n      if (is.browser && (isBrowserModule(line)))\n        return list;\n\n      // Clean up cwd(absolute)\n      list.push(line.replace(cwd, ''));\n      return list;\n    }, []);\n\n    return stack.join('\\n');\n  }\n};\n}); // module: utils.js\n// The global object is \"self\" in Web Workers.\nvar global = (function() { return this; })();\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date;\nvar setTimeout = global.setTimeout;\nvar setInterval = global.setInterval;\nvar clearTimeout = global.clearTimeout;\nvar clearInterval = global.clearInterval;\n\n/**\n * Node shims.\n *\n * These are meant only to allow\n * mocha.js to run untouched, not\n * to allow running node code in\n * the browser.\n */\n\nvar process = {};\nprocess.exit = function(status){};\nprocess.stdout = {};\n\nvar uncaughtExceptionHandlers = [];\n\nvar originalOnerrorHandler = global.onerror;\n\n/**\n * Remove uncaughtException listener.\n * Revert to original onerror handler if previously defined.\n */\n\nprocess.removeListener = function(e, fn){\n  if ('uncaughtException' == e) {\n    if (originalOnerrorHandler) {\n      global.onerror = originalOnerrorHandler;\n    } else {\n      global.onerror = function() {};\n    }\n    var i = Mocha.utils.indexOf(uncaughtExceptionHandlers, fn);\n    if (i != -1) { uncaughtExceptionHandlers.splice(i, 1); }\n  }\n};\n\n/**\n * Implements uncaughtException listener.\n */\n\nprocess.on = function(e, fn){\n  if ('uncaughtException' == e) {\n    global.onerror = function(err, url, line){\n      fn(new Error(err + ' (' + url + ':' + line + ')'));\n      return true;\n    };\n    uncaughtExceptionHandlers.push(fn);\n  }\n};\n\n/**\n * Expose mocha.\n */\n\nvar Mocha = global.Mocha = require('mocha'),\n    mocha = global.mocha = new Mocha({ reporter: 'html' });\n\n// The BDD UI is registered by default, but no UI will be functional in the\n// browser without an explicit call to the overridden `mocha.ui` (see below).\n// Ensure that this default UI does not expose its methods to the global scope.\nmocha.suite.removeAllListeners('pre-require');\n\nvar immediateQueue = []\n  , immediateTimeout;\n\nfunction timeslice() {\n  var immediateStart = new Date().getTime();\n  while (immediateQueue.length && (new Date().getTime() - immediateStart) < 100) {\n    immediateQueue.shift()();\n  }\n  if (immediateQueue.length) {\n    immediateTimeout = setTimeout(timeslice, 0);\n  } else {\n    immediateTimeout = null;\n  }\n}\n\n/**\n * High-performance override of Runner.immediately.\n */\n\nMocha.Runner.immediately = function(callback) {\n  immediateQueue.push(callback);\n  if (!immediateTimeout) {\n    immediateTimeout = setTimeout(timeslice, 0);\n  }\n};\n\n/**\n * Function to allow assertion libraries to throw errors directly into mocha.\n * This is useful when running tests in a browser because window.onerror will\n * only receive the 'message' attribute of the Error.\n */\nmocha.throwError = function(err) {\n  Mocha.utils.forEach(uncaughtExceptionHandlers, function (fn) {\n    fn(err);\n  });\n  throw err;\n};\n\n/**\n * Override ui to ensure that the ui functions are initialized.\n * Normally this would happen in Mocha.prototype.loadFiles.\n */\n\nmocha.ui = function(ui){\n  Mocha.prototype.ui.call(this, ui);\n  this.suite.emit('pre-require', global, null, this);\n  return this;\n};\n\n/**\n * Setup mocha with the given setting options.\n */\n\nmocha.setup = function(opts){\n  if ('string' == typeof opts) opts = { ui: opts };\n  for (var opt in opts) this[opt](opts[opt]);\n  return this;\n};\n\n/**\n * Run mocha, returning the Runner.\n */\n\nmocha.run = function(fn){\n  var options = mocha.options;\n  mocha.globals('location');\n\n  var query = Mocha.utils.parseQuery(global.location.search || '');\n  if (query.grep) mocha.grep(new RegExp(query.grep));\n  if (query.fgrep) mocha.grep(query.fgrep);\n  if (query.invert) mocha.invert();\n\n  return Mocha.prototype.run.call(mocha, function(err){\n    // The DOM Document is not available in Web Workers.\n    var document = global.document;\n    if (document && document.getElementById('mocha') && options.noHighlighting !== true) {\n      Mocha.utils.highlightTags('code');\n    }\n    if (fn) fn(err);\n  });\n};\n\n/**\n * Expose the process shim.\n */\n\nMocha.process = process;\n})();\n";

},function(t,e,n){!function(e){"use strict";t.exports=e}(function(t,e){"use strict";function n(t){return"function"==typeof t&&"function"==typeof t.getCall&&"function"==typeof t.calledWithExactly}function r(t){return 1===t?"once":2===t?"twice":3===t?"thrice":(t||0)+" times"}function i(t){return t&&n(t.proxy)}function o(t){if(!n(t._obj)&&!i(t._obj))throw new TypeError(e.inspect(t._obj)+" is not a spy or a call to a spy!")}function a(t,e,r,i,o){function a(e){return t.printf.apply(t,e)}var s=i?"always have ":"have ";return r=r||"",n(t.proxy)&&(t=t.proxy),{affirmative:function(){return a(["expected %n to "+s+e+r].concat(o))},negative:function(){return a(["expected %n to not "+s+e].concat(o))}}}function s(n,r,i){e.addProperty(t.Assertion.prototype,n,function(){o(this);var t=a(this._obj,r,i,!1);this.assert(this._obj[n],t.affirmative,t.negative)})}function u(n,i,s){e.addMethod(t.Assertion.prototype,n,function(t){o(this);var e=a(this._obj,i,s,!1,[r(t)]);this.assert(this._obj[n]===t,e.affirmative,e.negative)})}function c(t,n,r){return function(){o(this);var i="always"+t[0].toUpperCase()+t.substring(1),s=e.flag(this,"always")&&"function"==typeof this._obj[i],u=s?i:t,c=a(this._obj,n,r,s,p.call(arguments));this.assert(this._obj[u].apply(this._obj,arguments),c.affirmative,c.negative)}}function l(n,r,i){var o=c(n,r,i);e.addProperty(t.Assertion.prototype,n,o)}function f(n,r,i,o){var a=c(r,i,o);e.addMethod(t.Assertion.prototype,n,a)}function h(t,e,n){f(t,t,e,n)}var p=Array.prototype.slice;e.addProperty(t.Assertion.prototype,"always",function(){e.flag(this,"always",!0)}),s("called","been called"," at least once, but it was never called"),u("callCount","been called exactly %1",", but it was called %c%C"),s("calledOnce","been called exactly once",", but it was called %c%C"),s("calledTwice","been called exactly twice",", but it was called %c%C"),s("calledThrice","been called exactly thrice",", but it was called %c%C"),l("calledWithNew","been called with new"),h("calledBefore","been called before %1"),h("calledAfter","been called after %1"),h("calledOn","been called with %1 as this",", but it was called with %t instead"),h("calledWith","been called with arguments %*","%C"),h("calledWithExactly","been called with exact arguments %*","%C"),h("calledWithMatch","been called with arguments matching %*","%C"),h("returned","returned %1"),f("thrown","threw","thrown %1")})},function(t,e,n){"use strict";e.spy=n(405),e.stub=n(406),e.spyCall=n(404),e.mock=n(454),e.expectation=n(453),e.collection=n(451),e.sandbox=n(455),e.createStubInstance=n(666),e.match=n(274);var r=n(368);e.match.equal=r;var i=n(667);e.log=i.log,e.logError=i.logError,e.restore=n(668),e.format=n(369),e.assert=n(664),e.test=n(456),e.testCase=n(669);var o=n(237);e.wrapMethod=n(408),e.deepEqual=n(368),e.extend=n(249),e.functionToString=o.toString,e.create=o.create;var a=n(452);e.getConfig=a.getConfig,e.defaultConfig=a.defaultConfig,e.timesInWords=n(407),e.typeOf=n(457)},function(t,e,n){(function(e){"use strict";function r(t){for(var e=1,n=t.length;n>e;e++)if(!t[e-1].calledBefore(t[e])||!t[e].called)return!1;return!0}function i(t){return t.sort(function(t,e){var n=t.getCall(0),r=e.getCall(0),i=n&&n.callId||-1,o=r&&r.callId||-1;return o>i?-1:1})}function o(){for(var t,e=0,n=arguments.length;n>e;++e)t=arguments[e],t||c.fail("fake is not a spy"),"function"!=typeof t&&c.fail(t+" is not a function"),"function"!=typeof t.getCall&&c.fail(t+" is not stubbed")}function a(t,e){t=t||d;var n=t.fail||c.fail;n.call(t,e)}function s(t,e,n){2==arguments.length&&(n=e,e=t),c[t]=function(r){o(r);var i=p.call(arguments,1),s=!1;s="function"==typeof e?!e(r):"function"==typeof r[e]?!r[e].apply(r,i):!r[e],s?a(this,r.printf.apply(r,[n].concat(i))):c.pass(t)}}function u(t,e){return!t||/^fail/.test(e)?e:t+e.slice(0,1).toUpperCase()+e.slice(1)}var c,l=n(407),f=n(274),h=n(369),p=Array.prototype.slice,d="undefined"==typeof e?window:e;c={failException:"AssertError",fail:function(t){var e=new Error(t);throw e.name=this.failException||c.failException,e},pass:function(t){},callOrder:function(){o.apply(null,arguments);var t="",e="";if(r(arguments))c.pass("callOrder");else{try{t=[].join.call(arguments,", ");for(var n=p.call(arguments),s=n.length;s;)n[--s].called||n.splice(s,1);e=i(n).join(", ")}catch(u){}a(this,"expected "+t+" to be called in order but were called as "+e)}},callCount:function(t,e){if(o(t),t.callCount!=e){var n="expected %n to be called "+l(e)+" but was called %c%C";a(this,t.printf(n))}else c.pass("callCount")},expose:function(t,e){if(!t)throw new TypeError("target is null or undefined");var n=e||{},r="undefined"==typeof n.prefix&&"assert"||n.prefix,i="undefined"==typeof n.includeFail||!!n.includeFail;for(var o in this)"expose"==o||!i&&/^(fail)/.test(o)||(t[u(r,o)]=this[o]);return t},match:function(t,e){var n=f(e);if(n.test(t))c.pass("match");else{var r=["expected value to match","    expected = "+h(e),"    actual = "+h(t)];a(this,r.join("\n"))}}},s("called","expected %n to have been called at least once but was never called"),s("notCalled",function(t){return!t.called},"expected %n to not have been called but was called %c%C"),s("calledOnce","expected %n to be called once but was called %c%C"),s("calledTwice","expected %n to be called twice but was called %c%C"),s("calledThrice","expected %n to be called thrice but was called %c%C"),s("calledOn","expected %n to be called with %1 as this but was called with %t"),s("alwaysCalledOn","expected %n to always be called with %1 as this but was called with %t"),s("calledWithNew","expected %n to be called with new"),s("alwaysCalledWithNew","expected %n to always be called with new"),s("calledWith","expected %n to be called with arguments %*%C"),s("calledWithMatch","expected %n to be called with match %*%C"),s("alwaysCalledWith","expected %n to always be called with arguments %*%C"),s("alwaysCalledWithMatch","expected %n to always be called with match %*%C"),s("calledWithExactly","expected %n to be called with exact arguments %*%C"),s("alwaysCalledWithExactly","expected %n to always be called with exact arguments %*%C"),s("neverCalledWith","expected %n to never be called with arguments %*%C"),s("neverCalledWithMatch","expected %n to never be called with match %*%C"),s("threw","%n did not throw exception%C"),s("alwaysThrew","%n did not always throw exception%C"),t.exports=c}).call(e,function(){return this}())},function(t,e,n){(function(e,r){"use strict";function i(t,e){return"string"==typeof t?(this.exception=new Error(e||""),this.exception.name=t):t?this.exception=t:this.exception=new Error("Error"),this}function o(t,e){var n=t.callArgAt;if(0>n){for(var r=t.callArgProp,i=0,o=e.length;o>i;++i){if(!r&&"function"==typeof e[i])return e[i];if(r&&e[i]&&"function"==typeof e[i][r])return e[i][r]}return null}return e[n]}function a(t,e,n){if(t.callArgAt<0){var r;return r=t.callArgProp?u.getName(t.stub)+" expected to yield to '"+t.callArgProp+"', but no object with such a property was passed.":u.getName(t.stub)+" expected to yield, but no callback was passed.",n.length>0&&(r+=" Received ["+f.call(n,", ")+"]"),r}return"argument at index "+t.callArgAt+" is not a function: "+e}function s(t,e){if("number"==typeof t.callArgAt){var n=o(t,e);if("function"!=typeof n)throw new TypeError(a(t,n,e));t.callbackAsync?h(function(){n.apply(t.callbackContext,t.callbackArguments)}):n.apply(t.callbackContext,t.callbackArguments)}}var u=n(237),c=n(249),l=Array.prototype.slice,f=Array.prototype.join,h=function(){return"object"==typeof e&&"function"==typeof e.nextTick?e.nextTick:"function"==typeof r?r:function(t){setTimeout(t,0)}}(),p={create:function(t){var e=c({},p);return delete e.create,e.stub=t,e},isPresent:function(){return"number"==typeof this.callArgAt||this.exception||"number"==typeof this.returnArgAt||this.returnThis||this.returnValueDefined},invoke:function(t,e){if(s(this,e),this.exception)throw this.exception;return"number"==typeof this.returnArgAt?e[this.returnArgAt]:this.returnThis?t:this.returnValue},onCall:function(t){return this.stub.onCall(t)},onFirstCall:function(){return this.stub.onFirstCall()},onSecondCall:function(){return this.stub.onSecondCall()},onThirdCall:function(){return this.stub.onThirdCall()},withArgs:function(){throw new Error('Defining a stub by invoking "stub.onCall(...).withArgs(...)" is not supported. Use "stub.withArgs(...).onCall(...)" to define sequential behavior for calls with certain arguments.')},callsArg:function(t){if("number"!=typeof t)throw new TypeError("argument index is not number");return this.callArgAt=t,this.callbackArguments=[],this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgOn:function(t,e){if("number"!=typeof t)throw new TypeError("argument index is not number");if("object"!=typeof e)throw new TypeError("argument context is not an object");return this.callArgAt=t,this.callbackArguments=[],this.callbackContext=e,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgWith:function(t){if("number"!=typeof t)throw new TypeError("argument index is not number");return this.callArgAt=t,this.callbackArguments=l.call(arguments,1),this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgOnWith:function(t,e){if("number"!=typeof t)throw new TypeError("argument index is not number");if("object"!=typeof e)throw new TypeError("argument context is not an object");return this.callArgAt=t,this.callbackArguments=l.call(arguments,2),this.callbackContext=e,this.callArgProp=void 0,this.callbackAsync=!1,this},yields:function(){return this.callArgAt=-1,this.callbackArguments=l.call(arguments,0),this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},yieldsOn:function(t){if("object"!=typeof t)throw new TypeError("argument context is not an object");return this.callArgAt=-1,this.callbackArguments=l.call(arguments,1),this.callbackContext=t,this.callArgProp=void 0,this.callbackAsync=!1,this},yieldsTo:function(t){return this.callArgAt=-1,this.callbackArguments=l.call(arguments,1),this.callbackContext=void 0,this.callArgProp=t,this.callbackAsync=!1,this},yieldsToOn:function(t,e){if("object"!=typeof e)throw new TypeError("argument context is not an object");return this.callArgAt=-1,this.callbackArguments=l.call(arguments,2),this.callbackContext=e,this.callArgProp=t,this.callbackAsync=!1,this},"throws":i,throwsException:i,returns:function(t){return this.returnValue=t,this.returnValueDefined=!0,this},returnsArg:function(t){if("number"!=typeof t)throw new TypeError("argument index is not number");return this.returnArgAt=t,this},returnsThis:function(){return this.returnThis=!0,this}};for(var d in p)p.hasOwnProperty(d)&&d.match(/^(callsArg|yields)/)&&!d.match(/Async/)&&(p[d+"Async"]=function(t){return function(){var e=this[t].apply(this,arguments);return this.callbackAsync=!0,e}}(d));t.exports=p}).call(e,n(1),n(275).setImmediate)},function(t,e,n){"use strict";var r=n(237),i=n(406);t.exports=function(t){if("function"!=typeof t)throw new TypeError("The constructor should be a function.");return i(r.create(t.prototype))}},function(t,e,n){"use strict";function r(){}function i(t,e){var n=t+" threw exception: ";r(n+"["+e.name+"] "+e.message),e.stack&&r(e.stack),i.setTimeout(function(){throw e.message=n+e.message,e},0)}var o=setTimeout;i.setTimeout=function(t,e){o(t,e)},e.log=r,e.logError=i},function(t,e,n){"use strict";function r(t){return"function"==typeof t&&"function"==typeof t.restore&&t.restore.sinon}t.exports=function(t){if(null!==t&&"object"==typeof t)for(var e in t)r(t[e])&&t[e].restore();else r(t)&&t.restore()}},function(t,e,n){"use strict";function r(t,e,n){return function(){e&&e.apply(this,arguments);var r,i;try{i=t.apply(this,arguments)}catch(o){r=o}if(n&&n.apply(this,arguments),r)throw r;return i}}function i(t,e){if(!t||"object"!=typeof t)throw new TypeError("sinon.testCase needs an object with test functions");e=e||"test";var n,i,a,s=new RegExp("^"+e),u={},c=t.setUp,l=t.tearDown;for(n in t)if(t.hasOwnProperty(n)){if(i=t[n],/^(setUp|tearDown)$/.test(n))continue;"function"==typeof i&&s.test(n)?(a=i,(c||l)&&(a=r(i,c,l)),u[n]=o(a)):u[n]=t[n]}return u}var o=n(456);t.exports=i},function(t,e,n){"use strict";var r=n(672);t.exports=function(){var t,e=Array.prototype.slice.call(arguments);t="string"==typeof e[0]?0:e.shift();var n=r.install(t||0,e);return n.restore=n.uninstall,n}},function(t,e,n){var r,i,o;(function(a){(!0&&n(255)&&function(a){i=[n(458)],r=a,o="function"==typeof r?r.apply(e,i):r,!(void 0!==o&&(t.exports=o))}||"object"==typeof t&&function(e){t.exports=e(n(458))}||function(t){this.formatio=t(this.samsam)})(function(t){"use strict";function e(t){if(!t)return"";if(t.displayName)return t.displayName;if(t.name)return t.name;var e=t.toString().match(/function\s+([^\(]+)/m);return e&&e[1]||""}function n(t,n){var r,i,o=e(n&&n.constructor),a=t.excludeConstructors||s.excludeConstructors||[];for(r=0,i=a.length;i>r;++r){if("string"==typeof a[r]&&a[r]===o)return"";if(a[r].test&&a[r].test(o))return""}return o}function r(t,e){if("object"!=typeof t)return!1;var n,r;for(n=0,r=e.length;r>n;++n)if(e[n]===t)return!0;return!1}function i(e,n,o,a){if("string"==typeof n){if(0===n.length)return"(empty string)";var s=e.quoteStrings,c="boolean"!=typeof s||s;return o||c?'"'+n+'"':n}if("function"==typeof n&&!(n instanceof RegExp))return i.func(n);if(o=o||[],r(n,o))return"[Circular]";if("[object Array]"===Object.prototype.toString.call(n))return i.array.call(e,n,o);if(!n)return String(1/n===-(1/0)?"-0":n);if(t.isElement(n))return i.element(n);if("function"==typeof n.toString&&n.toString!==Object.prototype.toString)return n.toString();var l,f;for(l=0,f=u.length;f>l;l++)if(n===u[l].object)return u[l].value;return i.object.call(e,n,o,a)}function o(t){for(var e in t)this[e]=t[e]}var s={excludeConstructors:["Object",/^.$/],quoteStrings:!0,limitChildrenCount:0},u=(Object.prototype.hasOwnProperty,[]);return"undefined"!=typeof a&&u.push({object:a,value:"[object global]"}),"undefined"!=typeof document&&u.push({object:document,value:"[object HTMLDocument]"}),"undefined"!=typeof window&&u.push({object:window,value:"[object Window]"}),i.func=function(t){return"function "+e(t)+"() {}"},i.array=function(t,e){e=e||[],e.push(t);var n,r,o=[];for(r=this.limitChildrenCount>0?Math.min(this.limitChildrenCount,t.length):t.length,n=0;r>n;++n)o.push(i(this,t[n],e));return r<t.length&&o.push("[... "+(t.length-r)+" more elements]"),"["+o.join(", ")+"]"},i.object=function(e,o,a){o=o||[],o.push(e),a=a||0;var s,u,c,l,f,h,p=[],d=t.keys(e).sort(),m=3;for(h=this.limitChildrenCount>0?Math.min(this.limitChildrenCount,d.length):d.length,l=0;h>l;++l)s=d[l],c=e[s],u=r(c,o)?"[Circular]":i(this,c,o,a+2),u=(/\s/.test(s)?'"'+s+'"':s)+": "+u,m+=u.length,p.push(u);var v=n(this,e),g=v?"["+v+"] ":"",y="";for(l=0,f=a;f>l;++l)y+=" ";return h<d.length&&p.push("[... "+(d.length-h)+" more elements]"),m+a>80?g+"{\n  "+y+p.join(",\n  "+y)+"\n"+y+"}":g+"{ "+p.join(", ")+" }"},i.element=function(t){var e,n,r,i,o,a=t.tagName.toLowerCase(),s=t.attributes,u=[];for(r=0,i=s.length;i>r;++r)e=s.item(r),n=e.nodeName.toLowerCase().replace("html:",""),o=e.nodeValue,("contenteditable"!==n||"inherit"!==o)&&o&&u.push(n+'="'+o+'"');var c="<"+a+(u.length>0?" ":""),l=t.innerHTML||"";l.length>20&&(l=l.substr(0,20)+"[...]");var f=c+u.join(" ")+">"+l+"</"+a+">";return f.replace(/ contentEditable="inherit"/,"")},o.prototype={functionName:e,configure:function(t){return new o(t)},constructorName:function(t){return n(this,t)},ascii:function(t,e,n){return i(this,t,e,n)}},o.prototype})}).call(e,function(){return this}())},function(module,exports,__webpack_require__){(function(setImmediate,clearImmediate,global){/**
	 * @author Christian Johansen (christian@cjohansen.no) and contributors
	 * @license BSD
	 *
	 * Copyright (c) 2010-2014 Christian Johansen
	 */
"use strict";function parseTime(t){if(!t)return 0;var e,n=t.split(":"),r=n.length,i=r,o=0;if(r>3||!/^(\d\d:){0,2}\d\d?$/.test(t))throw new Error("tick only understands numbers and 'h:m:s'");for(;i--;){if(e=parseInt(n[i],10),e>=60)throw new Error("Invalid time "+t);o+=e*Math.pow(60,r-i-1)}return 1e3*o}function getEpoch(t){if(!t)return 0;if("function"==typeof t.getTime)return t.getTime();if("number"==typeof t)return t;throw new TypeError("now should be milliseconds since UNIX epoch")}function inRange(t,e,n){return n&&n.callAt>=t&&n.callAt<=e}function mirrorDateProperties(t,e){e.now?t.now=function(){return t.clock.now}:delete t.now,e.toSource?t.toSource=function(){return e.toSource()}:delete t.toSource,t.toString=function(){return e.toString()},t.prototype=e.prototype,t.parse=e.parse,t.UTC=e.UTC,t.prototype.toUTCString=e.prototype.toUTCString;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function createDate(){function t(e,n,r,i,o,a,s){switch(arguments.length){case 0:return new NativeDate(t.clock.now);case 1:return new NativeDate(e);case 2:return new NativeDate(e,n);case 3:return new NativeDate(e,n,r);case 4:return new NativeDate(e,n,r,i);case 5:return new NativeDate(e,n,r,i,o);case 6:return new NativeDate(e,n,r,i,o,a);default:return new NativeDate(e,n,r,i,o,a,s)}}return mirrorDateProperties(t,NativeDate)}function addTimer(t,e){if("undefined"==typeof e.func)throw new Error("Callback must be provided to timer calls");return t.timers||(t.timers={}),e.id=id++,e.createdAt=t.now,e.callAt=t.now+(e.delay||0),t.timers[e.id]=e,addTimerReturnsObject?{id:e.id,ref:function(){},unref:function(){}}:e.id}function firstTimerInRange(t,e,n){var r=t.timers,i=null;for(var o in r)inRange(e,n,r[o])&&(!i||~compareTimers(i,r[o]))&&(i=r[o]);return i}function compareTimers(t,e){return t.callAt<e.callAt?-1:t.callAt>e.callAt?1:t.immediate&&!e.immediate?-1:!t.immediate&&e.immediate?1:t.createdAt<e.createdAt?-1:t.createdAt>e.createdAt?1:t.id<e.id?-1:t.id>e.id?1:void 0}function callTimer(clock,timer){"number"==typeof timer.interval?clock.timers[timer.id].callAt+=timer.interval:delete clock.timers[timer.id];try{"function"==typeof timer.func?timer.func.apply(null,timer.args):eval(timer.func)}catch(e){var exception=e}if(clock.timers[timer.id]){if(exception)throw exception}else if(exception)throw exception}function uninstall(t,e){for(var n,r=0,i=t.methods.length;i>r;r++)if(n=t.methods[r],e[n].hadOwnProperty)e[n]=t["_"+n];else try{delete e[n]}catch(o){}t.methods=[]}function hijackMethod(t,e,n){if(n[e].hadOwnProperty=Object.prototype.hasOwnProperty.call(t,e),n["_"+e]=t[e],"Date"==e){var r=mirrorDateProperties(n[e],t[e]);t[e]=r}else{t[e]=function(){return n[e].apply(n,arguments)};for(var i in n[e])n[e].hasOwnProperty(i)&&(t[e][i]=n[e][i])}t[e].clock=n}var timeoutResult=setTimeout(function(){},0),addTimerReturnsObject="object"==typeof timeoutResult;clearTimeout(timeoutResult);var NativeDate=Date,id=1,timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setImmediate:"undefined"!=typeof setImmediate?setImmediate:void 0,clearImmediate:"undefined"!=typeof clearImmediate?clearImmediate:void 0,setInterval:setInterval,clearInterval:clearInterval,Date:Date},keys=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};exports.timers=timers;var createClock=exports.createClock=function(t){var e={now:getEpoch(t),timeouts:{},Date:createDate()};return e.Date.clock=e,e.setTimeout=function(t,n){return addTimer(e,{func:t,args:Array.prototype.slice.call(arguments,2),delay:n})},e.clearTimeout=function(t){t&&(e.timers||(e.timers=[]),"object"==typeof t&&(t=t.id),t in e.timers&&delete e.timers[t])},e.setInterval=function(t,n){return addTimer(e,{func:t,args:Array.prototype.slice.call(arguments,2),delay:n,interval:n})},e.clearInterval=function(t){e.clearTimeout(t)},e.setImmediate=function(t){return addTimer(e,{func:t,args:Array.prototype.slice.call(arguments,1),immediate:!0})},e.clearImmediate=function(t){e.clearTimeout(t)},e.tick=function(t){t="number"==typeof t?t:parseTime(t);for(var n,r=e.now,i=e.now+t,o=e.now,a=firstTimerInRange(e,r,i);a&&i>=r;){if(e.timers[a.id]){r=e.now=a.callAt;try{callTimer(e,a)}catch(s){n=n||s}}a=firstTimerInRange(e,o,i),o=r}if(e.now=i,n)throw n;return e.now},e.reset=function(){e.timers={}},e};exports.install=function(t,e,n){"number"==typeof t&&(n=e,e=t,t=null),t||(t=global);var r=createClock(e);r.uninstall=function(){uninstall(r,t)},r.methods=n||[],0===r.methods.length&&(r.methods=keys(timers));for(var i=0,o=r.methods.length;o>i;i++)hijackMethod(t,r.methods[i],r);return r}}).call(exports,__webpack_require__(275).setImmediate,__webpack_require__(275).clearImmediate,function(){return this}())},function(t,e,n){var r=n(556);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r=n(588);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},function(t,e,n){var r=n(673);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},,function(t,e,n){var r=n(705);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{})},,,,,function(t,e,n){n(468),n(469),n(470),n(471),n(472),n(473),n(474),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484),n(485),n(486),n(487),n(488),n(489),n(490),n(491),n(492),n(493),n(494)},,function(t,e,n){"use strict";function r(t){s.call(this,t,{name:"AnalyserNode",numberOfInputs:1,numberOfOutputs:1,channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers"});var e=2048,n=function(){return this.fftSize>>1},r=-100,o=30,a=.8;i.defineAttribute(this,"fftSize",u,e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"frequencyBinCount","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"minDecibels","number",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"maxDecibels","number",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"smoothingTimeConstant","number",a,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(29),o=n(122),a=n(28),s=n(81),u="enum { 32, 64, 128, 256, 512, 1024, 2048 }",c=function(){throw new TypeError("Illegal constructor: use audioContext.createAnalyser()")};i.inherits(c,s),i.inherits(r,c),r.exports=c,r.jsonAttrs=["fftSize","minDecibels","maxDecibels","smoothingTimeConstant"],c.prototype.getFloatFrequencyData=function(){var t=new o(this,"getFloatFrequencyData",[{name:"array",type:"Float32Array"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},c.prototype.getByteFrequencyData=function(){var t=new o(this,"getByteFrequencyData",[{name:"array",type:"Uint8Array"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},c.prototype.getByteTimeDomainData=function(){var t=new o(this,"getByteTimeDomainData",[{name:"array",type:"Uint8Array"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},t.exports=a.AnalyserNode=r},function(t,e,n){"use strict";function r(t){s.call(this,t,{name:"AudioBufferSourceNode",numberOfInputs:0,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var e=null,n=new u(this,"playbackRate",1,0,1024),r=!1,o=0,a=0,c=null;i.defineAttribute(this,"buffer","AudioBuffer|null",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"playbackRate","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"loop","boolean",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"loopStart","number",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"loopEnd","number",a,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"onended","function|null",c,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$state:{get:function(){return this.$stateAtTime(this.context.currentTime)}}}),this._startTime=1/0,this._stopTime=1/0,this._firedOnEnded=!1}var i=n(29),o=n(122),a=n(28),s=n(81),u=n(254),c=n(409),l=function(){throw new TypeError("Illegal constructor: use audioContext.createBufferSource()")};i.inherits(l,s),i.inherits(r,l),r.exports=l,r.jsonAttrs=["buffer","playbackRate","loop","loopStart","loopEnd"],l.prototype.start=function(t){var e=new o(this,"start",[{name:"when",type:"optional number"},{name:"offset",type:"optional number"},{name:"duration",type:"optional number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),e.assert(this._startTime===1/0,function(){throw new Error(e.form+"; cannot start more than once")}),this._startTime=i.defaults(t,0)},l.prototype.stop=function(t){var e=new o(this,"stop",[{name:"when",type:"optional number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),e.assert(this._startTime!==1/0,function(){throw new Error(e.form+"; cannot call stop without calling start first")}),e.assert(this._stopTime===1/0,function(){throw new Error(e.form+"; cannot stop more than once")}),this._stopTime=t},r.prototype.$stateAtTime=function(t){if(t=i.toSeconds(t),this._startTime===1/0)return"UNSCHEDULED";if(t<this._startTime)return"SCHEDULED";var e=this._stopTime;return!this.loop&&this.buffer&&(e=Math.min(e,this._startTime+this.buffer.duration)),e>t?"PLAYING":"FINISHED"},r.prototype._process=function(){this._firedOnEnded||"FINISHED"!==this.$stateAtTime(this.context.currentTime)||(this.dispatchEvent(new c("ended",this)),this._firedOnEnded=!0)},t.exports=a.AudioBufferSourceNode=r},function(t,e,n){"use strict";function r(t){a.call(this,"audioprocess",t),Object.defineProperties(this,{$name:{value:"AudioProcessingEvent"},$node:{value:t}})}var i=n(29),o=n(28),a=n(409),s=function(){throw new TypeError("Illegal constructor")};i.inherits(s,a),i.inherits(r,s),r.exports=s,t.exports=o.AudioProcessingEvent=r},function(t,e,n){"use strict";function r(t){s.call(this,t,{name:"BiquadFilterNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var e="lowpass",n=new u(this,"frequency",350,10,t.sampleRate/2),r=new u(this,"detune",0,-4800,4800),o=new u(this,"Q",1,1e-4,1e3),a=new u(this,"gain",0,-40,40);i.defineAttribute(this,"type",c,e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"frequency","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"detune","readonly",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"Q","readonly",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"gain","readonly",a,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(29),o=n(122),a=n(28),s=n(81),u=n(254),c="enum { lowpass, highpass, bandpass, lowshelf, highshelf, peaking, notch, allpass }",l=function(){throw new TypeError("Illegal constructor: use audioContext.createBiquadFilter()")};i.inherits(l,s),i.inherits(r,l),r.exports=l,r.jsonAttrs=["type","frequency","detune","Q","gain"],l.prototype.getFrequencyResponse=function(){var t=new o(this,"getFrequencyResponse",[{name:"frequencyHz",type:"Float32Array"},{name:"magResponse",type:"Float32Array"},{name:"phaseResponse",type:"Float32Array"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},t.exports=a.BiquadFilterNode=r},function(t,e,n){"use strict";function r(t,e){a.call(this,t,{name:"ChannelMergerNode",numberOfInputs:e,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"})}var i=n(29),o=n(28),a=n(81),s=function(){throw new TypeError("Illegal constructor: use audioContext.createChannelMerger([numberOfInputs: number])")};i.inherits(s,a),i.inherits(r,s),r.exports=s,t.exports=o.ChannelMergerNode=r},function(t,e,n){"use strict";function r(t,e){a.call(this,t,{name:"ChannelSplitterNode",numberOfInputs:1,numberOfOutputs:e,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"})}var i=n(29),o=n(28),a=n(81),s=function(){throw new TypeError("Illegal constructor: use audioContext.createChannelSplitter([numberOfOutputs: number])")};i.inherits(s,a),i.inherits(r,s),r.exports=s,t.exports=o.ChannelSplitterNode=r},function(t,e,n){"use strict";function r(t){a.call(this,t,{name:"ConvolverNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers"});var e=null,n=!0;i.defineAttribute(this,"buffer","AudioBuffer|null",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"normalize","boolean",n,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(29),o=n(28),a=n(81),s=function(){throw new TypeError("Illegal constructor: use audioContext.createConvolver()")};i.inherits(s,a),i.inherits(r,s),r.exports=s,r.jsonAttrs=["normalize"],t.exports=o.ConvolverNode=r},function(t,e,n){"use strict";function r(t,e){a.call(this,t,{name:"DelayNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var n=new s(this,"delayTime",0,0,e);i.defineAttribute(this,"delayTime","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$maxDelayTime:{value:e}})}var i=n(29),o=n(28),a=n(81),s=n(254),u=function(){throw new TypeError("Illegal constructor: use audioContext.createDelay([maxDelayTime: number])")};i.inherits(u,a),i.inherits(r,u),r.exports=u,r.jsonAttrs=["delayTime"],t.exports=o.DelayNode=r},function(t,e,n){"use strict";function r(t){a.call(this,t,{name:"DynamicsCompressorNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"});var e=new s(this,"threshold",-24,-100,0),n=new s(this,"knee",30,0,40),r=new s(this,"ratio",12,1,20),o=new s(this,"reduction",0,-20,0),u=new s(this,"attack",.003,0,1),c=new s(this,"release",.25,0,1);i.defineAttribute(this,"threshold","readonly",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"knee","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"ratio","readonly",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"reduction","readonly",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"attack","readonly",u,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"release","readonly",c,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(29),o=n(28),a=n(81),s=n(254),u=function(){throw new TypeError("Illegal constructor: use audioContext.createDynamicsCompressor()")};i.inherits(u,a),i.inherits(r,u),r.exports=u,r.jsonAttrs=["threshold","knee","ratio","reduction","attack","release"],t.exports=o.DynamicsCompressorNode=r},function(t,e,n){(function(e){"use strict";function r(){}var i=n(29),o=n(28),a=n(390);"undefined"==typeof e.Element&&(e.Element=function(){throw new TypeError("Illegal constructor")},i.inherits(e.Element,a)),i.inherits(r,e.Element),t.exports=o.Element=r}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){a.call(this,t,{name:"GainNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var e=new s(this,"gain",1,0,1);i.defineAttribute(this,"gain","readonly",e,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(29),o=n(28),a=n(81),s=n(254),u=function(){throw new TypeError("Illegal constructor: use audioContext.createGain()")};i.inherits(u,a),i.inherits(r,u),r.exports=u,r.jsonAttrs=["gain"],t.exports=o.GainNode=r},function(t,e,n){(function(e){"use strict";function r(){}var i=n(29),o=n(28),a=n(724);"undefined"==typeof e.HTMLElement&&(e.HTMLElement=function(){throw new TypeError("Illegal constructor")},i.inherits(e.HTMLElement,a)),i.inherits(r,e.HTMLElement),t.exports=o.HTMLElement=r}).call(e,function(){return this}())},function(t,e,n){(function(e){"use strict";function r(){}var i=n(29),o=n(28),a=n(726);"undefined"==typeof e.HTMLMediaElement&&(e.HTMLMediaElement=function(){throw new TypeError("Illegal constructor")},i.inherits(e.HTMLMediaElement,a)),i.inherits(r,e.HTMLMediaElement),t.exports=o.HTMLMediaElement=r}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){a.call(this,t,{name:"MediaElementAudioSourceNode",numberOfInputs:0,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"})}var i=n(29),o=n(28),a=n(81),s=function(){throw new TypeError("Illegal constructor: use audioContext.createMediaElementSource(mediaElement: HTMLMediaElement)")};i.inherits(s,a),i.inherits(r,s),r.exports=s,t.exports=o.MediaElementAudioSourceNode=r},function(t,e,n){(function(e){"use strict";function r(){}var i=n(29),o=n(28),a=n(390);"undefined"==typeof e.MediaStream&&(e.MediaStream=function(){throw new TypeError("Illegal constructor")},i.inherits(e.MediaStream,a)),i.inherits(r,e.MediaStream),t.exports=o.MediaStream=r}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){a.call(this,t,{name:"MediaStreamAudioDestinationNode",numberOfInputs:1,numberOfOutputs:0,channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"})}var i=n(29),o=n(28),a=n(81),s=function(){throw new TypeError("Illegal constructor: use audioContext.createMediaStreamDestination()")};i.inherits(s,a),i.inherits(r,s),r.exports=s,t.exports=o.MediaStreamAudioDestinationNode=r},function(t,e,n){"use strict";function r(t){a.call(this,t,{name:"MediaStreamAudioSourceNode",numberOfInputs:0,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"})}var i=n(29),o=n(28),a=n(81),s=function(){throw new TypeError("Illegal constructor: use audioContext.createMediaStreamSource(mediaStream: MediaStream)")};i.inherits(s,a),i.inherits(r,s),r.exports=s,t.exports=o.MediaStreamAudioSourceNode=r},function(t,e,n){"use strict";function r(t){a.call(this,"complete",t),Object.defineProperties(this,{$name:{value:"OfflineAudioCompletionEvent"},$node:{value:t}})}var i=n(29),o=n(28),a=n(409),s=function(){throw new TypeError("Illegal constructor")};i.inherits(s,a),i.inherits(r,s),r.exports=s,t.exports=o.OfflineAudioCompletionEvent=r},function(t,e,n){"use strict";function r(t,e,n){if(!(this instanceof r))throw new TypeError("Failed to construct 'AudioContext': Please use the 'new' operator");f.call(this);var a=new o(this,null,[{name:"numberOfChannels",type:"number"},{name:"length",type:"number"},{name:"sampleRate",type:"number"}]);a.validateArguments(arguments,function(t){throw new TypeError(a.form+"; "+t)});var s=new c(this),u=function(){return this._microCurrentTime/1e6},h=new l(this),p=null;i.defineAttribute(this,"destination","readonly",s,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"sampleRate","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"currentTime","readonly",u,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"listener","readonly",h,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"oncomplete","function|null",p,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$name:{value:"OfflineAudioContext"},$context:{value:this}}),this._microCurrentTime=0,this._processedSamples=0,this._tick=0,this._numberOfChannels=t,this._length=e,this._rendering=!1}var i=n(29),o=n(122),a=n(28),s=n(459),u=n(422),c=n(460),l=n(461),f=n(390),h=n(732);i.inherits(r,s),r.prototype.startRendering=function(){var t=new o(this,"startRendering",[]);t.assert(!this._rendering,function(){throw Error(t.form+"; must only be called one time")}),this._rendering=!0},r.prototype._process=function(t){if(this._rendering&&!(this._length<=this._processedSamples)){for(var e=this._microCurrentTime+t;this._microCurrentTime<e;){var n=Math.min(this._microCurrentTime+1e3,e),r=Math.floor(n/1e6*this.sampleRate),i=r-this._processedSamples;if(this.destination.$process(i,++this._tick),this._microCurrentTime=n,this._processedSamples=r,this._length<=this._processedSamples)break}if(this._length<=this._processedSamples){var o=new h(this);o.renderedBuffer=new u(this,this._numberOfChannels,this._length,this.sampleRate),this.dispatchEvent(o)}}},t.exports=a.OfflineAudioContext=r},function(t,e,n){"use strict";function r(t){s.call(this,t,{name:"OscillatorNode",numberOfInputs:0,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var e="sine",n=new u(this,"frequency",440,0,1e5),r=new u(this,"detune",0,-4800,4800),o=null;Object.defineProperty(this,"type",{get:function(){return this._custom?"custom":this._type},set:function(t){if(!i.typeCheck(t,l)){var e="";throw e+="type ",e+=i.formatter.shouldBeButGot(l,t),new TypeError(i.formatter.concat(this,e))}this._type=t},enumerable:!0}),i.defineAttribute(this,"frequency","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"detune","readonly",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"onended","function|null",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$state:{get:function(){return this.$stateAtTime(this.context.currentTime)}},$custom:{get:function(){return this._custom}}}),this._type=e,this._custom=null,this._startTime=1/0,this._stopTime=1/0,this._firedOnEnded=!1}var i=n(29),o=n(122),a=n(28),s=n(81),u=n(254),c=n(409),l="enum { sine, square, sawtooth, triangle }",f=function(){throw new TypeError("Illegal constructor: use audioContext.createOscillator()")};i.inherits(f,s),i.inherits(r,f),r.exports=f,r.jsonAttrs=["type","frequency","detune"],f.prototype.start=function(t){var e=new o(this,"start",[{name:"when",type:"optional number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),e.assert(this._startTime===1/0,function(){throw new Error(e.form+"; cannot start more than once")}),this._startTime=i.defaults(t,0)},f.prototype.stop=function(t){var e=new o(this,"stop",[{name:"when",type:"optional number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),e.assert(this._startTime!==1/0,function(){throw new Error(e.form+"; cannot call stop without calling start first")}),e.assert(this._stopTime===1/0,function(){throw new Error(e.form+"; cannot stop more than once")}),this._stopTime=i.defaults(t,0)},f.prototype.setPeriodicWave=function(t){var e=new o(this,"setPeriodicWave",[{name:"periodicWave",type:"PeriodicWave"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),this._type="custom",this._custom=t},r.prototype.$stateAtTime=function(t){return t=i.toSeconds(t),this._startTime===1/0?"UNSCHEDULED":t<this._startTime?"SCHEDULED":t<this._stopTime?"PLAYING":"FINISHED"},r.prototype._process=function(){this._firedOnEnded||"FINISHED"!==this.$stateAtTime(this.context.currentTime)||(this.dispatchEvent(new c("ended",this)),this._firedOnEnded=!0)},t.exports=a.OscillatorNode=r},function(t,e,n){"use strict";function r(t){s.call(this,t,{name:"PannerNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers"});var e="HRTF",n="inverse",r=1,o=1e4,a=1,l=360,f=360,h=0;i.defineAttribute(this,"panningModel",u,e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"distanceModel",c,n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"refDistance","number",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"maxDistance","number",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"rolloffFactor","number",a,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"coneInnerAngle","number",l,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"coneOuterAngle","number",f,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"coneOuterGain","number",h,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(29),o=n(122),a=n(28),s=n(81),u="enum { equalpower, HRTF }",c="enum { linear, inverse, exponential }",l=function(){throw new TypeError("Illegal constructor: use audioContext.createPanner()")};i.inherits(l,s),i.inherits(r,l),r.exports=l,r.jsonAttrs=["panningModel","distanceModel","refDistance","maxDistance","rolloffFactor","coneInnerAngle","coneOuterAngle","coneOuterGain"],l.prototype.setPosition=function(){var t=new o(this,"setPosition",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},l.prototype.setOrientation=function(){var t=new o(this,"setOrientation",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},l.prototype.setVelocity=function(){var t=new o(this,"setVelocity",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},t.exports=a.PannerNode=r},function(t,e,n){"use strict";function r(t,e){Object.defineProperties(this,{$name:{value:"PeriodicWave"},$real:{value:t},$imag:{value:e}})}var i=n(29),o=n(28),a=function(){throw new TypeError("Illegal constructor")};i.inherits(r,a),r.exports=a,t.exports=o.PeriodicWave=r},function(t,e,n){"use strict";function r(t,e,n,r){a.call(this,t,{name:"ScriptProcessorNode",numberOfInputs:1,numberOfOutputs:1,channelCount:n,channelCountMode:"max",channelInterpretation:"speakers"});var o=null;i.defineAttribute(this,"numberOfInputChannels","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"numberOfOutputChannels","readonly",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"bufferSize","readonly",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"onaudioprocess","function|null",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),this._numSamples=0}var i=n(29),o=n(28),a=n(81),s=n(422),u=n(717),c=function(){throw new TypeError("Illegal constructor: use audioContext.createScriptProcessor(bufferSize: number, [numberOfInputChannels: number], [numberOfOutputChannels: number])")};i.inherits(c,a),i.inherits(r,c),r.exports=c,r.prototype._process=function(t){if(this._numSamples-=t,this._numSamples<=0){this._numSamples+=this.bufferSize;var e=new u(this);e.playbackTime=this.context.currentTime+this.bufferSize/this.context.sampleRate,e.inputBuffer=new s(this.context,this.numberOfInputChannels,this.bufferSize,this.context.sampleRate),e.outputBuffer=new s(this.context,this.numberOfOutputChannels,this.bufferSize,this.context.sampleRate),this.dispatchEvent(e)}},t.exports=o.ScriptProcessorNode=r},function(t,e,n){"use strict";function r(t){a.call(this,t,{name:"WaveShaperNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var e=null,n="none";i.defineAttribute(this,"curve","Float32Array|null",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"oversample",s,n,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(29),o=n(28),a=n(81),s="enum { none, 2x, 4x }",u=function(){throw new TypeError("Illegal constructor: use audioContext.createWaveShaper()")};i.inherits(u,a),i.inherits(r,u),r.exports=u,r.jsonAttrs=["oversample"],t.exports=o.WaveShaperNode=r},function(t,e,n){(function(e){"use strict";var n={};n.AnalyserNode=e.AnalyserNode,n.AudioBuffer=e.AudioBuffer,n.AudioBufferSourceNode=e.AudioBufferSourceNode,n.AudioContext=e.AudioContext||e.webkitAudioContext,n.AudioDestinationNode=e.AudioDestinationNode,n.AudioListener=e.AudioListener,n.AudioNode=e.AudioNode,n.AudioParam=e.AudioParam,n.AudioProcessingEvent=e.AudioProcessingEvent,n.BiquadFilterNode=e.BiquadFilterNode,n.ChannelMergerNode=e.ChannelMergerNode,n.ChannelSplitterNode=e.ChannelSplitterNode,n.ConvolverNode=e.ConvolverNode,n.DelayNode=e.DelayNode,n.DynamicsCompressorNode=e.DynamicsCompressorNode,n.GainNode=e.GainNode,n.MediaElementAudioSourceNode=e.MediaElementAudioSourceNode,n.MediaStreamAudioDestinationNode=e.MediaStreamAudioDestinationNode,n.MediaStreamAudioSourceNode=e.MediaStreamAudioSourceNode,n.OfflineAudioCompletionEvent=e.OfflineAudioCompletionEvent,n.OfflineAudioContext=e.OfflineAudioContext||e.webkitOfflineAudioContext,n.OscillatorNode=e.OscillatorNode,n.PannerNode=e.PannerNode,n.PeriodicWave=e.PeriodicWave,n.ScriptProcessorNode=e.ScriptProcessorNode,n.WaveShaperNode=e.WaveShaperNode,t.exports=n}).call(e,function(){return this}())},function(t,e,n){(function(e){"use strict";if(!e.WEB_AUDIO_TEST_API_IGNORE){n(459),n(733);var r=n(28);r.use(),t.exports=e.WebAudioTestAPI=r}}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t,e){e=e.filter(function(e,n){return!(/^optional/.test(e)&&t.length<=n)}),e=e.map(function(t){return t.replace(/^optional\s*/,"")});for(var n=0,r=e.length;r>n;n++)if(!i(t[n],e[n]))return n;return-1}var i=n(425);t.exports=r},function(t,e,n){"use strict";function r(t,e){return"undefined"!=typeof t?t:e}t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r,a){var s={enumerable:!0};"function"==typeof r?(n="readonly",s.get=r):s.get=function(){return r},"readonly"===n?s.set=function(){a.call(t,e+" is readonly")}:s.set=function(s){i(s,n)?r=s:a.call(t,e+" "+o.shouldBeButGot(n,s))},Object.defineProperty(t,e,s)}var i=n(425),o=n(424);t.exports=r},function(t,e,n){"use strict";function r(t,e){e&&(t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}t.exports=r},function(t,e,n){"use strict";function r(t){return t+=1,{1:"1st",2:"2nd",3:"3rd"}[t]||t+"th"}t.exports=r},function(t,e,n){"use strict";function r(t){if(!t)return String(t);var e=typeof t;if("number"===e||"boolean"===e)return String(t);if("string"===e)return"'"+t+"'";if(Array.isArray(t))return"[ "+t.map(r).join(", ")+" ]";if(t.constructor==={}.constructor)return"{ "+Object.keys(t).map(function(e){return e+": "+r(t[e])}).join(", ")+"}";var n=t.constructor.name||Object.prototype.toString.call(t).slice(8,-1);return i(n)+" "+n}var i=n(423);t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r;return n=n||[],-1!==n.indexOf(t)?"<circular:"+i(t)+">":(n.push(t),r=e(t,n),n.pop(),r)}var i=n(462);t.exports=r},function(t,e,n){"use strict";function r(t){return i(t)/1e6}var i=n(463);t.exports=r}]);
//# sourceMappingURL=testMode-6aea3de2be8821cdd765.js.map