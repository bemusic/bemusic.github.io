(this.webpackJsonp=this.webpackJsonp||[]).push([[19],{146:function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return c}),t.d(n,"d",function(){return h});var r=t(165),i=t(105),a=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var s=.001,u=document.createElement("audio");function c(e){return"probably"===u.canPlayType(e)}var f=function(){function e(n){o(this,e),this._audioContext=n||r.a,this._samples=[],this._groups=[],this._instances=new Set,this._destination=this._audioContext.destination}return a(e,[{key:"unmute",value:function(){h(this._audioContext)}},{key:"destroy",value:function(){if(!this._destroyed){this._destroyed=!0;var e=!0,n=!1,t=void 0;try{for(var r,i=this._samples[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(e){n=!0,t=e}finally{try{!e&&i.return&&i.return()}finally{if(n)throw t}}var a=!0,o=!1,s=void 0;try{for(var u,c=this._instances[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){u.value.destroy()}}catch(e){o=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw s}}this._samples=null,this._instances=null}}},{key:"decode",value:function(e){var n=this;return this._coerceToArrayBuffer(e).then(function(e){return n._decodeAudio(e)})}},{key:"sample",value:function(e){var n=this;return(e.numberOfChannels?Promise.resolve(e):n.decode(e)).then(function(e){if(n._destroyed)throw new Error("SamplingMaster already destroyed!");var t=new d(n,e);return n._samples.push(t),t})}},{key:"group",value:function(e){var n=new l(this,e);return this._groups.push(n),n}},{key:"_coerceToArrayBuffer",value:function(e){return e instanceof ArrayBuffer?Promise.resolve(e):Object(i.a)(e).as("arraybuffer")}},{key:"_decodeAudio",value:function(e){var n=this;return new Promise(function(t,r){n.audioContext.decodeAudioData(e,function(e){t(e)},function(e){r(new Error("Unable to decode audio: "+e))})})}},{key:"_startPlaying",value:function(e){this._instances.add(e)}},{key:"_stoppedPlaying",value:function(e){this._instances.delete(e)}},{key:"audioContext",get:function(){return this._audioContext}},{key:"destination",get:function(){return this._destination}}]),e}(),l=function(){function e(n){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).volume;o(this,e),this._master=n,this._gain=this._master.audioContext.createGain(),null!=t&&(this._gain.gain.value=t),this._gain.connect(this._master.destination)}return a(e,[{key:"destroy",value:function(){this._gain.disconnect(),this._gain=null}},{key:"destination",get:function(){return this._gain}}]),e}(),d=function(){function e(n,t){o(this,e),this._master=n,this._buffer=t}return a(e,[{key:"play",value:function(e,n){return new p(this._master,this._buffer,e,n)}},{key:"destroy",value:function(){this._master=null,this._buffer=null}}]),e}(),p=function(){function e(n,t,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};o(this,e),r=r||0,this._master=n;var u=n.audioContext,c=u.createBufferSource();c.buffer=t,c.onended=function(){return i.stop()};var f=u.createGain();c.connect(f);var l=a.node||a.group&&a.group.destination||n.destination;f.connect(l),this._source=c,this._gain=this.TEST_node=f;var d=r?Math.max(0,u.currentTime+r):0,p=a.start||0,h=p>0,v=!1;if(h&&f.gain.setValueAtTime(0,0),void 0!==a.end){var m=Math.max(a.end-p,0);c.start(d,p,m+s),v=u.currentTime+r+m}else c.start(d,p);h&&(f.gain.setValueAtTime(0,u.currentTime+r),f.gain.linearRampToValueAtTime(1,u.currentTime+r+s)),!1!==v&&(f.gain.setValueAtTime(1,v),f.gain.linearRampToValueAtTime(0,v+s)),this._master._startPlaying(this)}return a(e,[{key:"stop",value:function(){this._source&&(this._source.stop(0),this._source.disconnect(),this._gain.disconnect(),this._source=null,this._gain=null,this._master._stoppedPlaying(this),this.onstop&&this.onstop())}},{key:"bad",value:function(){this._source&&(this._source.playbackRate.value=Math.random()<.5?Math.pow(2,1/24):Math.pow(2,-1/24))}},{key:"destroy",value:function(){this.stop()}}]),e}();function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a,n=e.createGain(),t=e.createOscillator();t.frequency.value=440,t.start(e.currentTime+.1),t.stop(e.currentTime+.1),n.connect(e.destination),n.disconnect();try{e.resume()}catch(e){console.error("[sampling-master] Cannot resume AudioContext",e)}}n.c=f},1530:function(e,n,t){t(5);e.exports=function(e){var n=[];return n.push('<div class="jukebox"><div class="jukebox--overlay"></div><div class="jukebox--inner"><h1>BMS Jukebox</h1><p class="jukebox--status js-log">Waiting for BMS file...</p><p>Google Chrome: Drag a BMS folder into this box.</p><p>Firefox, Safari: Select all files (BMS+sounds) and drag into this box.</p><button class="js-play">Click Here to Play</button><div class="js-sampler jukebox--sampler"></div></div></div>'),n.join("")}},1531:function(e,n,t){(e.exports=t(1)(!1)).push([e.i,".jukebox--overlay {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: rgba(139, 134, 133, 0.5);\n}\n\n.jukebox--inner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  border: 2px solid #8b8685;\n  background: #252423;\n  padding: 12px;\n}\n\n.jukebox--sampler {\n  background: #090807;\n  padding: 9px;\n  border: 1px solid #8b8685;\n  margin-top: 10px;\n  height: 192px;\n  width: 40em;\n  overflow: auto;\n}\n\n.jukebox--sampler span {\n  font-size: 12px;\n  opacity: 1;\n  transition: 0.5s opacity;\n}\n\n.jukebox--sampler span.is-off {\n  color: #8b8685;\n  opacity: 0;\n}\n\n.jukebox h1 {\n  margin: 0 0 20px;\n  font: 30px Helvetica Neue, Helvetica, sans-serif;\n}\n\n.jukebox p {\n  margin: 10px 0 0;\n}\n\n.jukebox .jukebox--status {\n  color: #8b8685;\n  font-style: italic;\n  margin-bottom: 20px;\n}\n\n.jukebox button {\n  display: block;\n  box-sizing: border-box;\n  width: 100%;\n  background: #090807;\n  color: #7f3;\n  cursor: pointer;\n  border: 1px solid #8b8685;\n  padding: 8px;\n  font: bold 15px verdana, sans-serif;\n  margin-top: 18px;\n}\n",""])},1532:function(e,n,t){var r=t(1531);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};t(0)(r,i);r.locals&&(e.exports=r.locals)},1533:function(e,n,t){"use strict";t.r(n),function(e){t.d(n,"main",function(){return p});t(1532);var r=t(70),i=t.n(r),a=t(110),o=t(328),s=t(146),u=t(78),c=t.n(u),f=t(165),l=t(1530),d=t.n(l);function p(n){i()(n).text("Technical Demo!").on("click",function t(){r=i()(d()()).appendTo("body"),r.find(".js-play").hide(),r.on("dragover",function(){return!1}).on("drop",function(n){n.preventDefault();var t=new o.a(n.originalEvent);return function(n,t){var r=new s.c(f.a),o=t.find(".js-log"),u=t.find(".js-play").hide(),l=t.find(".js-sampler");function d(e){o.text(e)}function p(e,t){var i={},a=[],o=0,s=function(e){var s,u=e.keysound;u in i||(i[u]=null,a.push((s=t.headers.get("wav"+u),"string"!=typeof s?Promise.reject(new Error("Empty name")):n.file(s).catch(function(){return n.file(s.replace(/\.\w+$/,".ogg"))}).catch(function(){return n.file(s.replace(/\.\w+$/,".mp3"))}).catch(function(){return n.file(s.replace(/\.\w+$/,".wav"))}).then(function(e){return e.read()})).then(function(e){return r.sample(e)}).then(function(e){return i[u]=e}).catch(function(e){return console.error("Unable to load "+u+": "+e)}).tap(function(){return d("[loaded "+ ++o+"/"+a.length+" samples]")})))},u=!0,c=!1,f=void 0;try{for(var l,p=e.all()[Symbol.iterator]();!(u=(l=p.next()).done);u=!0){var h=l.value;s(h)}}catch(e){c=!0,f=e}finally{try{!u&&p.return&&p.return()}finally{if(c)throw f}}return Promise.all(a).then(function(){return i})}c()(regeneratorRuntime.mark(function t(){var o,s,c,f,h,v,m,y,b,x;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d("Loading file list"),t.next=3,n.fileList;case 3:return o=t.sent,d("Loading "+(s=o.filter(function(e){return e.match(/\.(?:bms|bme|bml|pms)$/i)})[0])),t.next=8,n.file(s);case 8:return t.next=10,t.sent.read();case 10:return c=t.sent,f=e.from(new Uint8Array(c)),t.next=14,Promise.promisify(a.Reader.readAsync)(f);case 14:return h=t.sent,v=a.Compiler.compile(h).chart,m=a.Timing.fromBMSChart(v),y=a.Notes.fromBMSChart(v),b=a.SongInfo.fromBMSChart(v),i()("<pre wrap></pre>").text(JSON.stringify(b,null,2)).appendTo(l),d("Loading samples"),t.next=23,p(y,v);case 23:return x=t.sent,d("Click the button to play!"),t.next=27,new Promise(function(e){u.show(),u.on("click",function(){e(),u.hide()})});case 27:!function(){r.unmute();var e=function(e){setTimeout(function(){var n=x[e.keysound];if(n){var t=i()("<span></span>").text("["+e.keysound+"] ").appendTo(l),r=n.play();l[0].scrollTop=l[0].scrollHeight,r.onstop=function(){t.addClass("is-off")}}else console.log("warn: unknown sample "+e.keysound)},1e3*m.beatToSeconds(e.beat))},n=!0,t=!1,a=void 0;try{for(var o,s=y.all()[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;e(u)}}catch(e){t=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(t)throw a}}}();case 28:case"end":return t.stop()}},t,this)})).done()}(t,r),!1});var r;i()(n).off("click",t);i()(n).hide();return!1})}}.call(this,t(275).Buffer)},165:function(e,n,t){"use strict";var r=t(260),i=t.n(r);n.a=i()({latencyHint:"interaction"})},328:function(e,n,t){"use strict";var r=t(118),i=t(78),a=t.n(i),o=t(105),s=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();function u(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function c(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var f=function(){function e(n){c(this,e),this._files=function(e){var n=[];return a()(regeneratorRuntime.mark(function r(){var a,o,s,u,c,f,l,d,p,h,v;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.dataTransfer.items){r.next=29;break}a=!0,o=!1,s=void 0,r.prev=4,u=Array.from(e.dataTransfer.items)[Symbol.iterator]();case 6:if(a=(c=u.next()).done){r.next=13;break}return f=c.value,r.next=10,t(f);case 10:a=!0,r.next=6;break;case 13:r.next=19;break;case 15:r.prev=15,r.t0=r.catch(4),o=!0,s=r.t0;case 19:r.prev=19,r.prev=20,!a&&u.return&&u.return();case 22:if(r.prev=22,!o){r.next=25;break}throw s;case 25:return r.finish(22);case 26:return r.finish(19);case 27:r.next=49;break;case 29:if(!e.dataTransfer.files){r.next=49;break}for(l=!0,d=!1,p=void 0,r.prev=33,h=Array.from(e.dataTransfer.files)[Symbol.iterator]();!(l=(v=h.next()).done);l=!0)i(v.value);r.next=41;break;case 37:r.prev=37,r.t1=r.catch(33),d=!0,p=r.t1;case 41:r.prev=41,r.prev=42,!l&&h.return&&h.return();case 44:if(r.prev=44,!d){r.next=47;break}throw p;case 47:return r.finish(44);case 48:return r.finish(41);case 49:return r.abrupt("return",n);case 50:case"end":return r.stop()}},r,this,[[4,15,19,27],[20,,22,26],[33,37,41,49],[42,,44,48]])}));function t(e){return a()(regeneratorRuntime.mark(function n(){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=e.webkitGetAsEntry&&e.webkitGetAsEntry())){n.next=6;break}return n.next=4,r(t);case 4:n.next=8;break;case 6:i(e.getAsFile&&e.getAsFile());case 8:case"end":return n.stop()}},n,this)}))}function r(e){return e.isFile?function(e){return new Promise(function(n,t){e.file(n,t)}).tap(function(e){i(e)})}(e):e.isDirectory?(n=e,a()(regeneratorRuntime.mark(function e(){var t,i,a,o,s,c,f,l,d,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],i=n.createReader(),a=function(){return new Promise(function(e,n){i.readEntries(e,n)})};case 3:return e.next=5,a();case 5:if((o=e.sent)&&0!==o.length){e.next=8;break}return e.abrupt("break",11);case 8:t.push.apply(t,u(Array.from(o)));case 9:e.next=3;break;case 11:s=!0,c=!1,f=void 0,e.prev=14,l=t[Symbol.iterator]();case 16:if(s=(d=l.next()).done){e.next=23;break}return p=d.value,e.next=20,r(p);case 20:s=!0,e.next=16;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(14),c=!0,f=e.t0;case 29:e.prev=29,e.prev=30,!s&&l.return&&l.return();case 32:if(e.prev=32,!c){e.next=35;break}throw f;case 35:return e.finish(32);case 36:return e.finish(29);case 37:case"end":return e.stop()}},e,this,[[14,25,29,37],[30,,32,36]])}))):void 0;var n}function i(e){e&&n.push({name:e.name,file:e})}}(n)}return s(e,[{key:"file",value:function(e){return this._files.then(function(n){var t=!0,r=!1,i=void 0;try{for(var a,o=n[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;if(s.name.toLowerCase()===e.toLowerCase())return new l(s.file)}}catch(e){r=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw i}}throw new Error("unable to find "+e)})}},{key:"fileList",get:function(){return Promise.resolve(this._files.map(function(e){return e.name}))}}]),e}(),l=function(){function e(n){c(this,e),this._file=n}return s(e,[{key:"read",value:function(e){return r.a(e,Object(o.a)(this._file).as("arraybuffer"))}},{key:"resolveUrl",value:function(){return Promise.resolve(URL.createObjectURL(this._file))}},{key:"name",get:function(){return this._file.name}}]),e}();n.a=f},58:function(e,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}}]);
//# sourceMappingURL=comingSoonDemo-57a96f79222a6f9a59f4.js.map