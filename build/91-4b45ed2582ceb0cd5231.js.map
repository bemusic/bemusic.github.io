{"version":3,"file":"build/91-4b45ed2582ceb0cd5231.js","mappings":"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","sources":["file://webpack/runtime/chunk loaded","file://webpack/runtime/startup chunk dependencies","file:///home/runner/work/bemuse/bemuse/bemuse/src/bootstrap/index.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/custom-song-loader/song-loader.worker.js","file:///home/runner/work/bemuse/bemuse/packages/bemuse-indexer/lib/bms-bga.js","file:///home/runner/work/bemuse/bemuse/packages/bemuse-indexer/lib/bmson-bga.js","file:///home/runner/work/bemuse/bemuse/packages/bemuse-indexer/lib/bpm-info.js","file:///home/runner/work/bemuse/bemuse/packages/bemuse-indexer/lib/duration.js","file:///home/runner/work/bemuse/bemuse/packages/bemuse-indexer/lib/index.js","file:///home/runner/work/bemuse/bemuse/packages/bemuse-indexer/lib/keys.js","file:///home/runner/work/bemuse/bemuse/packages/bemuse-indexer/lib/lcs.js","file://webpack/bootstrap","file://webpack/runtime/compat get default export","file://webpack/runtime/define property getters","file://webpack/runtime/ensure chunk","file://webpack/runtime/get javascript chunk filename","file://webpack/runtime/global","file://webpack/runtime/hasOwnProperty shorthand","file://webpack/runtime/node module decorator","file://webpack/runtime/publicPath","file://webpack/runtime/importScripts chunk loading","file://webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var next = __webpack_require__.x;\n__webpack_require__.x = function() {\n\treturn Promise.all([602,604,452,946,742,982,959].map(__webpack_require__.e, __webpack_require__)).then(next);\n};","/* eslint-disable no-extend-native */\nimport 'whatwg-fetch'\n\nimport debug from 'debug'\n\n/**\n * An instance of `debug`. Used for debugging.\n */\nglobal.DEBUG = debug\n","import 'bemuse/bootstrap'\n\nimport * as indexer from 'bemuse-indexer'\n\n/* global FileReaderSync */\nif (\n  typeof FileReader === 'undefined' &&\n  typeof FileReaderSync !== 'undefined'\n) {\n  // Need to shim FileReader so that bemuse-chardet works.\n  global.FileReader = function FileReaderShim() {\n    const reader = new FileReaderSync()\n    return {\n      readAsText(blob, enc) {\n        try {\n          this.result = reader.readAsText(blob, enc)\n          this.onload()\n        } catch (e) {\n          this.onerror(e)\n        }\n      },\n    }\n  }\n}\n\naddEventListener('message', function ({ data }) {\n  const files = data.files.map(convertBuffer)\n  postMessage({ type: 'started' })\n  function onProgress(current, total, file) {\n    postMessage({ type: 'progress', current, total, file })\n  }\n  indexer\n    .getSongInfo(files, { onProgress })\n    .then(function (song) {\n      song.warnings.forEach(function (warning) {\n        if (global.console && console.warn) {\n          console.warn(warning)\n        }\n      })\n      postMessage({ type: 'result', song: song })\n    })\n    .catch(function (e) {\n      console.error('CAUGHT', e)\n    })\n})\n\nfunction convertBuffer(file) {\n  file.data = Buffer.from(new Uint8Array(file.data))\n  return file\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getBmsBga = void 0;\nfunction getBmsBga(chart, options) {\n    var getFile = function (object) {\n        return chart.headers.get('bmp' + object.value);\n    };\n    var bgaObjects = chart.objects\n        .all()\n        .filter(function (o) { return o.channel === '04' && isVideoFile(getFile(o)); });\n    if (bgaObjects.length === 0)\n        return undefined;\n    var object = bgaObjects[0];\n    var timing = options.timing;\n    var beat = chart.measureToBeat(object.measure, object.fraction);\n    var offset = timing.beatToSeconds(beat);\n    var file = getFile(object);\n    if (!file)\n        return undefined;\n    return { file: file, offset: offset };\n}\nexports.getBmsBga = getBmsBga;\nfunction isVideoFile(path) {\n    if (!path)\n        return false;\n    return /\\.(?:mpg|mpeg|avi|wmv|ogv|webm|ogm|mov|mp4|mkv|flv|m4v)$/i.test(path);\n}\n//# sourceMappingURL=bms-bga.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getBmsonBga = void 0;\nvar bmson = __importStar(require(\"bmson\"));\nfunction getBmsonBga(object, options) {\n    if (!object.bga)\n        return undefined;\n    if (!object.bga.bga_events)\n        return undefined;\n    if (!object.bga.bga_header)\n        return undefined;\n    if (!object.bga.bga_header.length)\n        return undefined;\n    if (object.bga.bga_events.length !== 1)\n        return undefined;\n    var mapping = {};\n    object.bga.bga_header.forEach(function (bgaHeader) {\n        mapping[bgaHeader.id] = bgaHeader.name;\n    });\n    var event = object.bga.bga_events[0];\n    var file = mapping[event.id];\n    if (!file)\n        return undefined;\n    var timing = options.timing;\n    var beatForPulse = bmson.beatForPulseForBmson(object);\n    var offset = timing.beatToSeconds(beatForPulse(event.y));\n    return { file: file, offset: offset };\n}\nexports.getBmsonBga = getBmsonBga;\n//# sourceMappingURL=bmson-bga.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getBpmInfo = void 0;\nvar lodash_1 = __importDefault(require(\"lodash\"));\nfunction getBpmInfo(notes, timing) {\n    var maxBeat = (0, lodash_1.default)(notes.all()).map('beat').max() || 0;\n    var beats = (0, lodash_1.default)(timing.getEventBeats())\n        .concat([0, maxBeat])\n        .sortBy()\n        .uniq()\n        .filter(function (beat) { return beat <= maxBeat; })\n        .value();\n    var data = [];\n    for (var i = 0; i + 1 < beats.length; i++) {\n        var length_1 = timing.beatToSeconds(beats[i + 1]) - timing.beatToSeconds(beats[i]);\n        var bpm = timing.bpmAtBeat(beats[i]);\n        data.push([bpm, length_1]);\n    }\n    var getPercentile = percentile(data);\n    return {\n        init: timing.bpmAtBeat(0),\n        min: getPercentile(2),\n        median: getPercentile(50),\n        max: getPercentile(98),\n    };\n}\nexports.getBpmInfo = getBpmInfo;\nfunction percentile(data) {\n    data = lodash_1.default.sortBy(data, 0);\n    var total = lodash_1.default.sumBy(data, '1');\n    return function (percentileNo) {\n        var current = 0;\n        for (var i = 0; i < data.length; i++) {\n            current += data[i][1];\n            if (current / total >= percentileNo / 100)\n                return data[i][0];\n        }\n        return 0;\n    };\n}\n//# sourceMappingURL=bpm-info.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getDuration = void 0;\nvar lodash_1 = __importDefault(require(\"lodash\"));\nfunction getDuration(notes, timing) {\n    var maxBeat = (0, lodash_1.default)(notes.all()).map('beat').max() || 0;\n    return timing.beatToSeconds(maxBeat);\n}\nexports.getDuration = getDuration;\n//# sourceMappingURL=duration.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports._getSongVideoFromCharts = exports.getSongInfo = exports.getFileInfo = exports.extensions = void 0;\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar object_assign_1 = __importDefault(require(\"object-assign\"));\nvar invariant_1 = __importDefault(require(\"invariant\"));\nvar p_map_1 = __importDefault(require(\"p-map\"));\nvar bms_1 = require(\"bms\");\nvar bmson_1 = require(\"bmson\");\nvar crypto_1 = require(\"crypto\");\nvar path_1 = require(\"path\");\nvar bms_bga_1 = require(\"./bms-bga\");\nvar bmson_bga_1 = require(\"./bmson-bga\");\nvar bpm_info_1 = require(\"./bpm-info\");\nvar duration_1 = require(\"./duration\");\nvar keys_1 = require(\"./keys\");\nvar lcs_1 = require(\"./lcs\");\nvar _extensions = {};\nexports.extensions = _extensions;\n_extensions['.bms'] = function (source, meta) {\n    return __awaiter(this, void 0, void 0, function () {\n        var options, str, chart, info, notes, timing;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    options = bms_1.Reader.getReaderOptionsFromFilename(meta.name);\n                    return [4 /*yield*/, bms_1.Reader.readAsync(source, options)];\n                case 1:\n                    str = _a.sent();\n                    chart = bms_1.Compiler.compile(str).chart;\n                    info = bms_1.SongInfo.fromBMSChart(chart);\n                    notes = bms_1.Notes.fromBMSChart(chart);\n                    timing = bms_1.Timing.fromBMSChart(chart);\n                    return [2 /*return*/, {\n                            info: info,\n                            notes: notes,\n                            timing: timing,\n                            scratch: hasScratch(chart),\n                            keys: (0, keys_1.getKeys)(chart),\n                            bga: (0, bms_bga_1.getBmsBga)(chart, { timing: timing }),\n                        }];\n            }\n        });\n    });\n};\n_extensions['.bmson'] = function (source) {\n    return __awaiter(this, void 0, void 0, function () {\n        var string, object, info, ms, notes, timing, bga;\n        return __generator(this, function (_a) {\n            string = Buffer.from(source).toString('utf8');\n            object = JSON.parse(string);\n            info = (0, bmson_1.songInfoForBmson)(object);\n            ms = (0, bmson_1.musicalScoreForBmson)(object);\n            notes = ms.notes;\n            timing = ms.timing;\n            bga = (0, bmson_bga_1.getBmsonBga)(object, { timing: timing });\n            return [2 /*return*/, {\n                    info: info,\n                    notes: notes,\n                    timing: timing,\n                    scratch: (0, bmson_1.hasScratch)(object),\n                    keys: (0, bmson_1.keysForBmson)(object),\n                    bga: bga,\n                }];\n        });\n    });\n};\nfunction getFileInfo(data, meta, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var extensions, extension, md5, basis, info, notes, timing, count;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    options = options || {};\n                    (0, invariant_1.default)(typeof meta.name === 'string', 'meta.name must be a string');\n                    extensions = options.extensions || _extensions;\n                    extension = extensions[(0, path_1.extname)(meta.name).toLowerCase()] || extensions['.bms'];\n                    md5 = meta.md5 ||\n                        (function () {\n                            var hash = (0, crypto_1.createHash)('md5');\n                            hash.update(data);\n                            return hash.digest('hex');\n                        })();\n                    return [4 /*yield*/, extension(data, meta)];\n                case 1:\n                    basis = _a.sent();\n                    (0, invariant_1.default)(basis.info, 'basis.info must be a BMS.SongInfo');\n                    (0, invariant_1.default)(basis.notes, 'basis.notes must be a BMS.Notes');\n                    (0, invariant_1.default)(basis.timing, 'basis.timing must be a BMS.Timing');\n                    (0, invariant_1.default)(typeof basis.scratch === 'boolean', 'basis.scratch must be a boolean');\n                    (0, invariant_1.default)(typeof basis.keys === 'string', 'basis.keys must be a string');\n                    info = basis.info;\n                    notes = basis.notes;\n                    timing = basis.timing;\n                    count = notes.all().filter(noteIsPlayable).length;\n                    return [2 /*return*/, {\n                            md5: md5,\n                            info: info,\n                            noteCount: count,\n                            bpm: (0, bpm_info_1.getBpmInfo)(notes, timing),\n                            duration: (0, duration_1.getDuration)(notes, timing),\n                            scratch: basis.scratch,\n                            keys: basis.keys,\n                            bga: basis.bga,\n                        }];\n            }\n        });\n    });\n}\nvar _getFileInfo = getFileInfo;\nexports.getFileInfo = _getFileInfo;\nfunction getSongInfo(files, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var warnings, cache, extra, report, onError, processed, doGetFileInfo, results, charts, song;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    options = options || {};\n                    warnings = [];\n                    cache = options.cache || undefined;\n                    extra = options.extra || {};\n                    report = options.onProgress || function () { };\n                    onError = options.onError ||\n                        function (e, name) {\n                            if (global.console && console.error) {\n                                console.error('Error while parsing ' + name, e);\n                            }\n                        };\n                    processed = 0;\n                    doGetFileInfo = options.getFileInfo || getFileInfo;\n                    return [4 /*yield*/, (0, p_map_1.default)(files, function (file) {\n                            return __awaiter(this, void 0, void 0, function () {\n                                var name, fileData, hash, md5Hash, cached, meta, info, e_1;\n                                return __generator(this, function (_a) {\n                                    switch (_a.label) {\n                                        case 0:\n                                            name = file.name;\n                                            fileData = file.data;\n                                            hash = (0, crypto_1.createHash)('md5');\n                                            hash.update(fileData);\n                                            md5Hash = hash.digest('hex');\n                                            _a.label = 1;\n                                        case 1:\n                                            _a.trys.push([1, 6, 7, 8]);\n                                            return [4 /*yield*/, Promise.resolve(cache && cache.get(md5Hash))];\n                                        case 2:\n                                            cached = _a.sent();\n                                            if (!cached) return [3 /*break*/, 3];\n                                            return [2 /*return*/, [__assign(__assign({}, cached), { file: name })]];\n                                        case 3:\n                                            meta = { name: name, md5: md5Hash };\n                                            return [4 /*yield*/, Promise.resolve(doGetFileInfo(fileData, meta))];\n                                        case 4:\n                                            info = _a.sent();\n                                            if (cache)\n                                                cache.put(md5Hash, info);\n                                            return [2 /*return*/, [__assign(__assign({}, info), { file: name })]];\n                                        case 5: return [3 /*break*/, 8];\n                                        case 6:\n                                            e_1 = _a.sent();\n                                            onError(e_1, name);\n                                            warnings.push('Unable to parse ' + name + ': ' + e_1);\n                                            return [2 /*return*/, []];\n                                        case 7:\n                                            processed += 1;\n                                            report(processed, files.length, name);\n                                            return [7 /*endfinally*/];\n                                        case 8: return [2 /*return*/];\n                                    }\n                                });\n                            });\n                        }, { concurrency: 2 })];\n                case 1:\n                    results = _a.sent();\n                    charts = lodash_1.default.flatten(results);\n                    if (charts.length === 0) {\n                        warnings.push('No usable charts found!');\n                    }\n                    song = {\n                        title: common(charts, lodash_1.default.property('info.title')),\n                        artist: common(charts, lodash_1.default.property('info.artist')),\n                        genre: common(charts, lodash_1.default.property('info.genre')),\n                        bpm: median(charts, lodash_1.default.property('bpm.median')),\n                    };\n                    (0, object_assign_1.default)(song, getSongVideoFromCharts(charts));\n                    (0, object_assign_1.default)(song, extra);\n                    song.charts = charts;\n                    song.warnings = warnings;\n                    return [2 /*return*/, song];\n            }\n        });\n    });\n}\nvar _getSongInfo = getSongInfo;\nexports.getSongInfo = _getSongInfo;\nfunction getSongVideoFromCharts(charts) {\n    var result = {};\n    var chart = lodash_1.default.find(charts, 'bga');\n    if (chart) {\n        result.video_file = chart.bga.file;\n        result.video_offset = chart.bga.offset;\n    }\n    return result;\n}\nexports._getSongVideoFromCharts = getSongVideoFromCharts;\nfunction noteIsPlayable(note) {\n    return note.column !== undefined;\n}\nfunction hasScratch(chart) {\n    var objects = chart.objects.all();\n    for (var i = 0; i < objects.length; i++) {\n        var object = objects[i];\n        var channel = +object.channel;\n        if (channel >= 50 && channel <= 69)\n            channel -= 20;\n        if (channel === 16 || channel === 26)\n            return true;\n    }\n    return false;\n}\nfunction common(array, f) {\n    var longest = array.map(f).reduce(lcs_1.lcs, '');\n    return String(longest || f(array[0])).trim();\n}\nfunction median(array, f) {\n    var arr = (0, lodash_1.default)(array).map(f).sortBy().value();\n    return arr[Math.floor(arr.length / 2)];\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getKeys = void 0;\nfunction getKeys(chart) {\n    var objects = chart.objects.all();\n    var stat = {};\n    for (var i = 0; i < objects.length; i++) {\n        var object = objects[i];\n        var channel = +object.channel;\n        if (channel >= 50 && channel <= 69)\n            channel -= 40;\n        if (channel < 10)\n            continue;\n        if (channel > 29)\n            continue;\n        stat[channel] = (stat[channel] || 0) + 1;\n    }\n    var channels = Object.keys(stat).map(function (ch) {\n        return +ch;\n    });\n    if (channels.length === 0)\n        return 'empty';\n    if (channels.some(isSecondPlayer)) {\n        return stat[18] || stat[19] || stat[28] || stat[29] ? '14K' : '10K';\n    }\n    return stat[18] || stat[19] ? '7K' : '5K';\n    function isSecondPlayer(ch) {\n        return ch >= 20 && ch <= 29;\n    }\n}\nexports.getKeys = getKeys;\n//# sourceMappingURL=keys.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.lcp = exports.lcs = void 0;\nfunction lcs(a, b) {\n    var max = '';\n    for (var i = 0; i < a.length; i++) {\n        for (var j = 0; j < b.length; j++) {\n            var cur = lcp(a, i, b, j);\n            if (cur.length > max.length)\n                max = cur;\n        }\n    }\n    return max;\n}\nexports.lcs = lcs;\nfunction lcp(a, i, b, j) {\n    var m = Math.min(a.length - i, b.length - j);\n    var k = 0;\n    for (; k < m; k++) {\n        if (a[k + i].toLowerCase() !== b[k + j].toLowerCase())\n            break;\n    }\n    return a.substr(i, k);\n}\nexports.lcp = lcp;\n//# sourceMappingURL=lcs.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = function() {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [602,604,452,946,742,982,959], function() { return __webpack_require__(68331); })\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"build/\" + chunkId + \"-\" + {\"452\":\"42747e820bdd07d9061d\",\"602\":\"e0b23b8c0e09305cb2bf\",\"604\":\"832ca5eece724d219b8f\",\"742\":\"a3bf12701c2c3136a435\",\"946\":\"3fc3c6fe5d233bac730d\",\"959\":\"19c5d6d83de512283f4b\",\"982\":\"4d1e7adfa50c116e581a\"}[chunkId] + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t91: 1\n};\n\n// importScripts chunk loading\nvar installChunk = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = this[\"webpackChunk\"] = this[\"webpackChunk\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["deferred","next","g","DEBUG","convertBuffer","file","data","Buffer","from","Uint8Array","FileReader","FileReaderSync","reader","readAsText","blob","enc","this","result","onload","e","onerror","addEventListener","files","map","postMessage","type","onProgress","current","total","then","song","warnings","forEach","warning","console","warn","catch","error","Object","defineProperty","exports","value","getBmsBga","chart","options","getFile","object","headers","get","bgaObjects","objects","all","filter","o","channel","path","test","length","timing","beat","measureToBeat","measure","fraction","offset","beatToSeconds","__createBinding","create","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","__setModuleDefault","v","__importStar","mod","prototype","hasOwnProperty","call","getBmsonBga","bmson","bga","bga_events","bga_header","mapping","bgaHeader","id","name","event","beatForPulse","beatForPulseForBmson","y","__importDefault","getBpmInfo","lodash_1","notes","maxBeat","default","max","beats","getEventBeats","concat","sortBy","uniq","i","length_1","bpm","bpmAtBeat","push","getPercentile","sumBy","percentileNo","percentile","init","min","median","getDuration","__assign","assign","t","s","n","arguments","p","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","done","__generator","body","f","_","label","sent","trys","ops","verb","Symbol","iterator","op","TypeError","pop","_getSongVideoFromCharts","getSongInfo","getFileInfo","extensions","object_assign_1","invariant_1","p_map_1","bms_1","bmson_1","crypto_1","path_1","bms_bga_1","bmson_bga_1","bpm_info_1","duration_1","keys_1","lcs_1","_extensions","meta","extension","md5","basis","info","count","_a","extname","toLowerCase","hash","createHash","update","digest","scratch","keys","noteIsPlayable","noteCount","duration","source","str","Reader","getReaderOptionsFromFilename","readAsync","Compiler","compile","SongInfo","fromBMSChart","Notes","Timing","hasScratch","getKeys","string","ms","toString","JSON","parse","songInfoForBmson","musicalScoreForBmson","keysForBmson","_getFileInfo","_getSongInfo","cache","extra","report","onError","processed","doGetFileInfo","results","charts","fileData","md5Hash","cached","e_1","put","concurrency","flatten","title","common","property","artist","genre","array","arr","Math","floor","getSongVideoFromCharts","find","video_file","video_offset","note","column","longest","reduce","lcs","String","trim","stat","channels","ch","some","lcp","a","b","j","substr","cur","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","loaded","__webpack_modules__","x","__webpack_exports__","O","chunkIds","fn","priority","notFulfilled","Infinity","every","key","splice","r","getter","d","definition","chunkId","promises","u","globalThis","Function","window","obj","prop","nmd","paths","children","installedChunks","importScripts","chunkLoadingGlobal","parentChunkLoadingFunction","bind","moreModules","runtime"],"sourceRoot":""}