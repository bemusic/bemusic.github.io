(this.webpackJsonp=this.webpackJsonp||[]).push([[7],{157:function(e,t,n){"use strict";t.a=document.querySelector("#scene-root")},2026:function(e,t,n){"use strict";n.r(t);var r=n(606),o=n(157),a=n(28),u=n.n(a),i=n(63),l=n(519),c=n(2),s=n(387),f=n(34),d=n.n(f),y=n(986),p=n(29),b=n.n(p),m=n(305),v=n(987),h=n(518),g=n(520);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j={ingame:function(e){return Object(h.a)(Object(g.a)(e))},added:function(e){return[{title:"Sorted by added date",songs:d.a.reverse(d.a.sortBy(e,_))}]}},_=function(e){return e.added||(e.initial?"0000-00-00":"9999-99-99")};function P(e){var t=function(e){var t=[],n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.push({keys:r,message:e})};e.unreleased&&n("Not released","unreleased"),e.readme||n("No README file found","README.md"),e.replaygain||n("No replay gain","replaygain"),e.artist_url||n("No artist URL","artist_url"),e.added||e.initial||n("No added date","added"),e.song_url||e.youtube_url||e.long_url||n("No song/YouTube/long URL","song_url","long_url","youtube_url"),e.bms_url||e.exclusive||n("No download URL","bms_url"),e.bmssearch_id||e.exclusive||n("No BMS search ID","bmssearch_id"),e.charts.filter(function(e){return"5K"===e.keys}).length||n("No 5-key charts","5key");var r=!0,o=!1,a=void 0;try{for(var u,i=Object(m.a)(e.charts)[Symbol.iterator]();!(r=(u=i.next()).done);r=!0){var l=u.value;l.info.subtitles.length||n("Missing subtitle","chart_names "+l.file)}}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return t}(e);return t.length?u.a.createElement("div",null,t.map(function(e,t){return u.a.createElement("div",{key:t},e.keys.map(function(e){return u.a.createElement("code",{key:e,style:{fontFamily:"Ubuntu Mono",marginRight:"2",padding:3,fontSize:"0.8em",background:"#755"}},e)}),e.message)})):null}var T=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=S(this,O(t).call(this,e))).state={sort:n.props.initialSort||Object.keys(j)[0],previewUrl:null,previewEnabled:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,u.a.Component),function(e,t,n){t&&w(e.prototype,t),n&&w(e,n)}(t,[{key:"renderTable",value:function(){return u.a.createElement("table",{style:{borderSpacing:4}},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{colSpan:4},this.renderSorter()," · ",this.renderPreview())),u.a.createElement("tr",null,u.a.createElement("th",null,"id"),u.a.createElement("th",null,"song"),u.a.createElement("th",null,"warnings"))),u.a.createElement("tbody",null,this.renderRows()))}},{key:"renderSorter",value:function(){for(var e=this,t=[],n=Object.keys(j),r=function(){var r=n[o];t.push(u.a.createElement("button",{key:r,onClick:function(){e.setState({sort:r})}},r))},o=0;o<n.length;o++)r();return u.a.createElement("span",null,u.a.createElement("strong",null,"Sort by:")," ",t)}},{key:"renderPreview",value:function(){var e=this,t=u.a.createElement("button",{onClick:function(){e.setState(function(e){return{previewEnabled:!e.previewEnabled}})}},this.state.previewEnabled?"disable":"enable");return u.a.createElement("span",null,u.a.createElement("strong",null,"Music preview:")," ",t,this.state.previewEnabled&&u.a.createElement(y.a,{url:this.state.previewUrl}))}},{key:"renderRows",value:function(){var e=this,t=j[this.state.sort](this.props.data.songs),r=[],o=!0,a=!1,i=void 0;try{for(var l,c=t[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value;r.push(u.a.createElement("tr",{key:s.title},u.a.createElement("th",{colSpan:4},s.title)));var f=!0,d=!1,y=void 0;try{for(var p,b=function(){var t=p.value;r.push(u.a.createElement("tr",{key:t.id},u.a.createElement("td",null,u.a.createElement("strong",{onClick:function(){prompt("","vim '".concat(t.id,"/README.md'"))}},u.a.createElement("code",{style:{fontFamily:"Ubuntu Mono"}},t.id)),u.a.createElement("br",null),u.a.createElement("span",{style:{color:"#8b8685"}},t.added)),u.a.createElement("td",{style:{textAlign:"center",background:"#353433"}},u.a.createElement("span",{style:{color:"#8b8685"},onClick:function(){var n=Object(v.a)(e.props.url,t);e.setState({previewUrl:n})}},t.genre),u.a.createElement("br",null),u.a.createElement("strong",{onClick:function(){console.log(t),alert(n(114).inspect(t))}},t.title),u.a.createElement("br",null),t.artist),u.a.createElement("td",null,P(t))))},m=s.songs[Symbol.iterator]();!(f=(p=m.next()).done);f=!0)b()}catch(e){d=!0,y=e}finally{try{f||null==m.return||m.return()}finally{if(d)throw y}}}}catch(e){a=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw i}}return r}},{key:"renderMessage",value:function(e){return u.a.createElement("div",{style:{textAlign:"center"}},e)}},{key:"render",value:function(){if(!this.props.data)return this.renderMessage("No data");try{return this.renderTable()}catch(e){return this.renderMessage("Error: ".concat(e))}}}]),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(T,"propTypes",{data:b.a.object,url:b.a.string,initialSort:b.a.string});var x=T;function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=A(this,R(t).call(this,e))).state={url:c.a.server||s.a,status:"Loading"},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,u.a.Component),function(e,t,n){t&&C(e.prototype,t),n&&C(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;Object(s.b)(this.state.url).then(function(t){e.setState({status:"Load completed",data:t})}).catch(function(t){e.setState({status:"Load error: "+t})})}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("header",{style:{textAlign:"center"}},u.a.createElement("h1",null,"Bemuse collection viewer"),u.a.createElement("div",null,this.state.url,u.a.createElement("br",null),this.state.status)),u.a.createElement("div",{style:{padding:20}},u.a.createElement(x,{data:this.state.data&&Object(l.a)(this.state.data),url:this.state.url,initialSort:c.a.sort})))}}]),t}();function U(){r.d(),Object(i.render)(u.a.createElement(N,null),o.a)}n.d(t,"main",function(){return U})},219:function(e,t,n){"use strict";t.a=function(e){return"7K"===e.keys||"5K"===e.keys}},305:function(e,t,n){"use strict";var r=n(34),o=n.n(r),a=n(219);t.a=function(e){return o()(e).filter(a.a).orderBy([function(e){return e.info.difficulty>=5?1:0},function(e){return e.keys},function(e){return e.info.level}]).value()}},387:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r="https://music.bemuse.ninja/live";function o(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fetch;return(void 0===n?e.fetch:n)(t+"/index.json").then(function(e){return e.json()})}}).call(this,n(36))},518:function(e,t,n){"use strict";var r=n(34),o=n.n(r),a=[{title:"Custom Song",criteria:function(e){return e.custom}},{title:"Tutorial",criteria:function(e){return e.tutorial}},{title:"Unreleased",criteria:function(e){return e.unreleased}},{title:"Recently Added Songs",criteria:function(e){return e.added&&Date.now()-Date.parse(e.added)<5184e6},sort:function(e){return e.added},reverse:!0},{title:"☆",criteria:function(){return!0}}];t.a=function(e){var t=a.map(function(e){return{input:e,output:{title:e.title,songs:[]}}}),n=!0,r=!1,u=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var c=i.value,s=!0,f=!1,d=void 0;try{for(var y,p=t[Symbol.iterator]();!(s=(y=p.next()).done);s=!0){var b=y.value,m=b.input,v=b.output;if(m.criteria(c)){v.songs.push(c);break}}}catch(e){f=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(f)throw d}}}}catch(e){r=!0,u=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw u}}var h=!0,g=!1,E=void 0;try{for(var w,S=t[Symbol.iterator]();!(h=(w=S.next()).done);h=!0){var O=w.value;m=O.input,v=O.output,m.sort&&(v.songs=o.a.sortBy(v.songs,m.sort)),m.reverse&&v.songs.reverse()}}catch(e){g=!0,E=e}finally{try{h||null==S.return||S.return()}finally{if(g)throw E}}return o()(t).map("output").filter(function(e){return e.songs.length>0}).value()}},519:function(e,t,n){"use strict";var r=n(95),o=n.n(r);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=o()({songs:o.a.map(function(e){e.chart_names&&(e=o()({charts:o.a.map(function(t){var n=e.chart_names[t.file];return n?o()({info:{subtitles:function(e){return a(e).concat([n])}}},t):t})},e));return e})});t.a=u},520:function(e,t,n){"use strict";var r=n(34),o=n.n(r),a=n(219);t.a=function(e){return o.a.orderBy(e,[function(e){return o()(e.charts).filter(a.a).filter(function(e){return e.info.difficulty<5}).filter(function(e){return e.info.level>0}).map(function(e){return e.info.level}).min()},function(e){return e.bpm},function(e){return e.title.toLowerCase()}])}},606:function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return l}),n.d(t,"e",function(){return c});var r=null;function o(){return r||(r=function(){var e=!1,t=null,r=!1,o=!1,a={},u=new Audio(n(974));u.preload="auto",u.loop=!0,u.oncanplaythrough=function(){r=!0,c()},u.load();var i=document.createElement("audio");i.src=n(975),i.volume=.5,i.load();var l=s(u,.5,function(e){0===e&&o&&(o=!1,u.pause())});function c(){if(e){for(var n=null,i=Object.keys(a),c=0;c<i.length;c++){var s=i[c],f=a[s];s===t?f.loaded&&(f.play(),n=f):f.stop()}if(n)l.fadeTo(0,1);else if(l.fadeTo(.4,.5),r&&!o){o=!0;try{u.play()}catch(e){console.warn("Cannot play background music")}}}else{o&&(l.fadeTo(0,100),o=!1,u.pause());for(var d=Object.keys(a),y=0;y<d.length;y++){var p=d[y],b=a[p];b.destroy()}}}return{enable:function(){e||(e=!0,c())},disable:function(){e&&(e=!1,c())},go:function(){if(e){i.currentTime=0;try{i.play()}catch(e){console.warn("Cannot play go sound.")}}},preview:function(e){t!==e&&(t=e,e&&!a[e]&&(a[e]=function(e){var t=document.createElement("audio");t.src=e;var n=!1,r=s(t,1,function(n){0===n&&(t.pause(),delete a[e],c())}),o={loaded:!1,play:function(){if(!n)try{t.play(),n=!0}catch(e){console.warn("Cannot play",t.src)}r.fadeTo(1,2)},stop:function(){r.fadeTo(0,4)},destroy:function(){t.pause(),delete a[e],c()}};return t.oncanplaythrough=function(){o.loaded=!0,c()},t.onended=function(){delete a[e],c()},t.load(),o}(e)),c())}}}())}function a(){o()}function u(){return o().enable()}function i(){return o().disable()}function l(){return o().go()}function c(e){return o().preview(e)}function s(e,t,n){var r,o=0,a=0,u=!1;function i(){return(Date.now()-r)/1e3}function l(){return o>t?Math.min(o,t+i()*a):o<t?Math.max(o,t-i()*a):o}function c(){u=!1;var t=l();e.volume=t,t===o?n&&n(o):u||(u=!0,requestAnimationFrame(c))}return e.volume=t,{fadeTo:function(e,n){o===e&&n===a||(t=l(),o=e,a=n,r=Date.now(),c())}}}},974:function(e,t,n){e.exports=n.p+"354b30433269481d2f132496a0d13f64.ogg"},975:function(e,t,n){e.exports=n.p+"38fbcad5f2b14ca6ffc359446f7ec455.ogg"},986:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(28),o=n.n(r),a=n(29),u=n.n(a),i=n(606);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}i.d();var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,f(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,o.a.Component),function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(t,[{key:"componentDidMount",value:function(){i.b(),i.e(this.props.url),addEventListener("message",this.handleMessage)}},{key:"componentWillUnmount",value:function(){i.a(),removeEventListener("message",this.handleMessage)}},{key:"componentWillReceiveProps",value:function(e){i.e(e.url)}},{key:"render",value:function(){return null}},{key:"handleMessage",value:function(e){var t=e.data;"calibration-started"===t.type?i.a():"calibration-closed"===t.type&&i.b()}}]),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(y,"propTypes",{url:u.a.string})},987:function(e,t,n){"use strict";t.a=function(e,t){return t?t.tutorial?null:e+"/"+t.path+"/_bemuse_preview.mp3":null}}}]);
//# sourceMappingURL=music-7f17a662f97e4df21410.js.map