(this.webpackJsonp=this.webpackJsonp||[]).push([[15],{124:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Expression=Expression;var _debug=__webpack_require__(160),_debug2=_interopRequireDefault(_debug),_parser=__webpack_require__(590),_parser2=_interopRequireDefault(_parser);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var log=(0,_debug2.default)("scintillator:expression");function createFunction(code){var fn=eval("(function(get) { return "+code+" })");return fn.displayName="("+code+")",fn.constant=!!/^[-0-9.]+$/.test(code),fn}function Expression(e){log("parsing %s",e);var t=_parser2.default.parse(e);log("parsed %s => %s",e,t);var n=createFunction(t),r=void 0;return(r=n.constant?n:function(e){return n(function(t){return e[t]})}).constant=n.constant,r}exports.default=Expression},187:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayObject=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(55)),i=l(n(81)),a=l(n(80)),u=l(n(124)),c=l(n(494));function l(e){return e&&e.__esModule?e:{default:e}}var f=[{name:"x",default:"0",apply:function(e,t){return e.x=t}},{name:"y",default:"0",apply:function(e,t){return e.y=t}},{name:"scale-x",default:"1",apply:function(e,t){return e.scale.x=t}},{name:"scale-y",default:"1",apply:function(e,t){return e.scale.y=t}},{name:"alpha",default:"1",apply:function(e,t){return e.alpha=t}},{name:"width",apply:function(e,t){return e.width=t}},{name:"height",apply:function(e,t){return e.height=t}},{name:"visible",apply:function(e,t){return e.visible=t}}],s=t.DisplayObject=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"compile",value:function(e,t){this._animation=c.default.compile(e,t),this._bindings=[];var n=!0,r=!1,i=void 0;try{for(var a,l=f[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=a.value,h=t.attr(s.name)||s.default;if(h){var p=new u.default(h),d=this._animation.prop(s.name,p);this._bindings.push({getter:d,apply:s.apply})}}}catch(e){r=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw i}}this.blendMode=function(e){if("normal"===e)return o.BLEND_MODES.NORMAL;if("screen"===e)return o.BLEND_MODES.SCREEN;throw new Error("Invalid blend mode: "+e)}(t.attr("blend")||"normal"),this.ref=t.attr("ref")||null}},{key:"instantiate",value:function(e,t){var n=this,r=t.object,o=[],i=null;r.blendMode=this.blendMode;for(var u=0;u<this._bindings.length;u++){var c=this._bindings[u];o.push([c.getter,c.apply.bind(null,r)])}return this.ref&&(e.ref(this.ref,r),i=function(){return e.unref(n.ref,r)}),new a.default({bindings:o,onDestroy:i})}}]),t}();t.default=s},263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseFrame=function(e){var t=e.match(/^(\d+)x(\d+)\+(\d+)\+(\d+)$/);return t?new r.Rectangle(+t[3],+t[4],+t[1],+t[2]):null};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(55))},494:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Animation=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t._compile=f,t._attrs=s;var o=u(n(43)),i=u(n(76)),a=u(n(589));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return Object.assign({},e,{data:(0,a.default)(e.data)})},l=t.Animation=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._timeKey=n||"t",this._properties=(0,o.default)(t).map(function(e){return o.default.map(e.data,"name")}).flatten().thru(function(e){return new Set(e)}).value(),this._animations=o.default.map(t,c),this._events=o.default.uniq(o.default.map(t,"on"))}return r(e,[{key:"prop",value:function(e,t){var n=this;return this._properties.has(e)?function(r){var o=n._getAnimation(r);return o.hasOwnProperty(e)?o[e]:t(r)}:t}},{key:"_getAnimation",value:function(e){var t=(0,o.default)(this._events).filter(function(t){return""===t||t in e}).maxBy(function(t){return e[t]||0}),n=e[this._timeKey]-(e[t]||0),r=this._animations.filter(function(e){return e.on===t}).map(function(e){return e.data.values(n)});return Object.assign.apply(Object,[{}].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r)))}}],[{key:"compile",value:function(t,n){var r=Array.from(n.children("animation"));return new e(o.default.map(r,function(e){return f((0,i.default)(e))}),n.attr("t")||"t")}}]),e}();function f(e){var t=o.default.map(Array.from(e.children("keyframe")),s),n={},r=!0,i=!1,a=void 0;try{for(var u,c=t[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var l=u.value,f=+l.t,h=l.ease||"linear";if(isNaN(f))throw new Error('Expected keyframe to have "t" attribute');for(var p in l)if("t"!==p&&"ease"!==p){var d=+l[p];(n[p]||(n[p]={name:p,keyframes:[]})).keyframes.push({time:f,value:d,ease:h})}}}catch(e){i=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw a}}return{on:e.attr("on")||"",data:o.default.values(n)}}function s(e){return(0,o.default)(e.attributes).map(function(e){return[e.name.toLowerCase(),e.value]}).fromPairs().value()}t.default=l},495:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=t.load=void 0,t.getSkinUrl=function(){return"touch3d"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).displayMode?"/skins/default/skin_touch3d.xml":window.innerWidth<window.innerHeight?"/skins/default/skin_touch.xml":"/skins/default/skin_screen.xml"};var r=n(594),o=n(593);t.load=o.load,t.Context=r.Context},545:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resources=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(43),a=(r=i)&&r.__esModule?r:{default:r};var u=t.Resources=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._map={}}return o(e,[{key:"add",value:function(e,t){this._map[e]=t}},{key:"get",value:function(e){if(!(e in this._map))throw new Error("Not registered: "+e);return this._map[e]}},{key:"urls",get:function(){return a.default.values(this._map)}}]),e}();t.default=u},546:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextNode=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(55)),i=l(n(81)),a=l(n(80)),u=l(n(187)),c=l(n(124));function l(e){return e&&e.__esModule?e:{default:e}}var f=t.TextNode=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"compile",value:function(e,t){this.font=t.attr("font"),this.text=t.attr("text"),this.data=new c.default(t.attr("data")||"0"),this.display=u.default.compile(e,t),this.ttf=!t.attr("font-src"),this.fill=t.attr("fill"),this.align="left"===t.attr("align")?0:"right"===t.attr("align")?1:.5}},{key:"instantiate",value:function(e,t){var n=this,r=void 0;r=this.ttf?new o.Text(this.text,{font:this.font,fill:this.fill}):new o.extras.BitmapText(this.text,{font:this.font});var i=new o.Container;return i.addChild(r),new a.default({context:e,parent:t,object:i,concerns:[this.display],bindings:[[this.data,function(e){r.text=n.text.replace("%s",e),r.updateText(),r.x=r.width*-n.align}]]})}}]),t}();t.default=f},547:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpriteNode=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(55)),i=l(n(187)),a=l(n(80)),u=l(n(81)),c=n(263);function l(e){return e&&e.__esModule?e:{default:e}}var f=t.SpriteNode=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),r(t,[{key:"compile",value:function(e,t){this.url=e.resources.get(t.attr("image")),this.display=i.default.compile(e,t),this.frame=(0,c.parseFrame)(t.attr("frame")||""),this.anchorX=+t.attr("anchor-x")||0,this.anchorY=+t.attr("anchor-y")||0}},{key:"instantiate",value:function(e,t){var n=new o.Sprite(this.getTexture());return n.anchor.x=this.anchorX,n.anchor.y=this.anchorY,new a.default({context:e,object:n,parent:t,concerns:[this.display]})}},{key:"getTexture",value:function(){if(this._texture)return this._texture;var e=o.SCALE_MODES.NEAREST,t=o.BaseTexture.fromImage(this.url,void 0,e),n=new o.Texture(t,this.frame);return this._texture=n,n}}]),t}();t.default=f},548:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkinRootNode=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(55)),i=u(n(80)),a=u(n(81));function u(e){return e&&e.__esModule?e:{default:e}}var c=t.SkinRootNode=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"compile",value:function(e,t){this.children=e.compileChildren(t),this.width=+t.attr("width"),this.height=+t.attr("height"),this.data=t.data()}},{key:"instantiate",value:function(e){var t=new o.Stage(591879);return new i.default({context:e,object:t,children:this.children})}}]),t}();t.default=c},549:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectNode=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(55)),i=c(n(124)),a=c(n(80)),u=c(n(81));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return{instantiate:function(r,o){var i=new Map,u=[];return function(){for(var e,i=0;i<n;i++)(e=t.instantiate(r,o.object)).detach(),u.push(e)}(),new a.default({context:r,onData:function(t){!function(e){var t,n,r,o=new Set(i.keys());e||(e=[]);for(var a=0;a<e.length;a++)n=e[a],t=n.key,i.has(t)?r=i.get(t):(r=c(),i.set(t,r)),r.push(n),o.delete(t);var l=!0,f=!1,s=void 0;try{for(var h,p=o[Symbol.iterator]();!(l=(h=p.next()).done);l=!0)t=h.value,(r=i.get(t)).detach(),i.delete(t),u.push(r)}catch(e){f=!0,s=e}finally{try{!l&&p.return&&p.return()}finally{if(f)throw s}}}(e(t))}});function c(){var e=u.pop();return e?e.attachTo(o.object):e=t.instantiate(r,o.object),e}}}}var f=t.ObjectNode=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),r(t,[{key:"compile",value:function(e,t){if(this.children=e.compileChildren(t),1!==this.children.length)throw new Error("Expected exactly 1 children, "+this.children.length+" given");this.pool=+t.attr("pool")||1,this.key=new i.default(t.attr("key"))}},{key:"instantiate",value:function(e,t){var n=new o.ParticleContainer(null,{position:!0,alpha:!0}),r=new l(this.key,this.children[0],this.pool);return new a.default({context:e,parent:t,object:n,concerns:[r]})}}]),t}();t.default=f},550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IfNode=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(55)),i=c(n(81)),a=c(n(80)),u=c(n(124));function c(e){return e&&e.__esModule?e:{default:e}}var l=t.IfNode=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"compile",value:function(e,t){var n=e.compileChildren(t);if(1!==n.length)throw new Error("Expected exactly 1 children, "+n.length+" found");this.child=n[0],this.key=new u.default(t.attr("key")),this.value=String(t.attr("value"))}},{key:"instantiate",value:function(e,t){var n=new o.Container,r=this.key,i=this.value,u=this.child,c=null;return new a.default({context:e,parent:t,object:n,onData:function(t){String(r(t))===i?(null===c&&(c=u.instantiate(e,n)),c.push(t)):null!==c&&(c.destroy(),c=null)}})}}]),t}();t.default=l},590:function(e,t,n){"use strict";function r(e,t,n,o){this.message=e,this.expected=t,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(r,Error),r.buildMessage=function(e,t){var n={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}return"Expected "+function(e){var t,r,o,i=new Array(e.length);for(t=0;t<e.length;t++)i[t]=(o=e[t],n[o.type](o));if(i.sort(),i.length>0){for(t=1,r=1;t<i.length;t++)i[t-1]!==i[t]&&(i[r]=i[t],r++);i.length=r}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(e)+" but "+function(e){return e?'"'+o(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:r,parse:function(e,t){t=void 0!==t?t:{};var n,o={},i={expr:fe},a=fe,u="||",c=re("||",!1),l=function(e,t){return function(e,t){return e+t.map(be).join("")}(e,t)},f="&&",s=re("&&",!1),h="+",p=re("+",!1),d="-",v=re("-",!1),y="*",b=re("*",!1),_="/",m=re("/",!1),w="%",g=re("%",!1),x="(",O=re("(",!1),j=")",k=re(")",!1),A=function(e){return"("+e+")"},E="!",C=re("!",!1),P=function(e){return"!"+e},M=ie("number"),S=function(){return ne()},T=/^[eE]/,N=oe(["e","E"],!1,!1),R=/^[0-9]/,D=oe([["0","9"]],!1,!1),L=".",F=re(".",!1),I="0",q=re("0",!1),B=/^[1-9]/,z=oe([["1","9"]],!1,!1),G=/^[a-zA-Z]/,X=oe([["a","z"],["A","Z"]],!1,!1),Z=/^[a-zA-Z0-9_]/,J=oe([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),U=function(){return"get("+JSON.stringify(ne())+")"},Y=ie("whitespace"),K=/^[ \t\n\r]/,$=oe([" ","\t","\n","\r"],!1,!1),H=0,W=0,Q=[{line:1,column:1}],V=0,ee=[],te=0;if("startRule"in t){if(!(t.startRule in i))throw new Error("Can't start parsing from rule \""+t.startRule+'".');a=i[t.startRule]}function ne(){return e.substring(W,H)}function re(e,t){return{type:"literal",text:e,ignoreCase:t}}function oe(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function ie(e){return{type:"other",description:e}}function ae(t){var n,r=Q[t];if(r)return r;for(n=t-1;!Q[n];)n--;for(r={line:(r=Q[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Q[t]=r,r}function ue(e,t){var n=ae(e),r=ae(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function ce(e){H<V||(H>V&&(V=H,ee=[]),ee.push(e))}function le(e,t,n){return new r(r.buildMessage(e,t),e,t,n)}function fe(){return se()}function se(){var t,n,r,i,a,f,s,h;if(t=H,(n=he())!==o){for(r=[],i=H,(a=ye())!==o?(e.substr(H,2)===u?(f=u,H+=2):(f=o,0===te&&ce(c)),f!==o&&(s=ye())!==o&&(h=he())!==o?i=a=[a,f,s,h]:(H=i,i=o)):(H=i,i=o);i!==o;)r.push(i),i=H,(a=ye())!==o?(e.substr(H,2)===u?(f=u,H+=2):(f=o,0===te&&ce(c)),f!==o&&(s=ye())!==o&&(h=he())!==o?i=a=[a,f,s,h]:(H=i,i=o)):(H=i,i=o);r!==o?(W=t,t=n=l(n,r)):(H=t,t=o)}else H=t,t=o;return t}function he(){var t,n,r,i,a,u,c,h;if(t=H,(n=pe())!==o){for(r=[],i=H,(a=ye())!==o?(e.substr(H,2)===f?(u=f,H+=2):(u=o,0===te&&ce(s)),u!==o&&(c=ye())!==o&&(h=pe())!==o?i=a=[a,u,c,h]:(H=i,i=o)):(H=i,i=o);i!==o;)r.push(i),i=H,(a=ye())!==o?(e.substr(H,2)===f?(u=f,H+=2):(u=o,0===te&&ce(s)),u!==o&&(c=ye())!==o&&(h=pe())!==o?i=a=[a,u,c,h]:(H=i,i=o)):(H=i,i=o);r!==o?(W=t,t=n=l(n,r)):(H=t,t=o)}else H=t,t=o;return t}function pe(){var t,n,r,i,a,u,c,f;if(t=H,(n=de())!==o){for(r=[],i=H,(a=ye())!==o?(43===e.charCodeAt(H)?(u=h,H++):(u=o,0===te&&ce(p)),u===o&&(45===e.charCodeAt(H)?(u=d,H++):(u=o,0===te&&ce(v))),u!==o&&(c=ye())!==o&&(f=de())!==o?i=a=[a,u,c,f]:(H=i,i=o)):(H=i,i=o);i!==o;)r.push(i),i=H,(a=ye())!==o?(43===e.charCodeAt(H)?(u=h,H++):(u=o,0===te&&ce(p)),u===o&&(45===e.charCodeAt(H)?(u=d,H++):(u=o,0===te&&ce(v))),u!==o&&(c=ye())!==o&&(f=de())!==o?i=a=[a,u,c,f]:(H=i,i=o)):(H=i,i=o);r!==o?(W=t,t=n=l(n,r)):(H=t,t=o)}else H=t,t=o;return t}function de(){var t,n,r,i,a,u,c,f;if(t=H,(n=ve())!==o){for(r=[],i=H,(a=ye())!==o?(42===e.charCodeAt(H)?(u=y,H++):(u=o,0===te&&ce(b)),u===o&&(47===e.charCodeAt(H)?(u=_,H++):(u=o,0===te&&ce(m)),u===o&&(37===e.charCodeAt(H)?(u=w,H++):(u=o,0===te&&ce(g)))),u!==o&&(c=ye())!==o&&(f=ve())!==o?i=a=[a,u,c,f]:(H=i,i=o)):(H=i,i=o);i!==o;)r.push(i),i=H,(a=ye())!==o?(42===e.charCodeAt(H)?(u=y,H++):(u=o,0===te&&ce(b)),u===o&&(47===e.charCodeAt(H)?(u=_,H++):(u=o,0===te&&ce(m)),u===o&&(37===e.charCodeAt(H)?(u=w,H++):(u=o,0===te&&ce(g)))),u!==o&&(c=ye())!==o&&(f=ve())!==o?i=a=[a,u,c,f]:(H=i,i=o)):(H=i,i=o);r!==o?(W=t,t=n=l(n,r)):(H=t,t=o)}else H=t,t=o;return t}function ve(){var t,n,r,i,a;return t=H,40===e.charCodeAt(H)?(n=x,H++):(n=o,0===te&&ce(O)),n!==o&&(r=ye())!==o&&(i=se())!==o&&ye()!==o?(41===e.charCodeAt(H)?(a=j,H++):(a=o,0===te&&ce(k)),a!==o?(W=t,t=n=A(i)):(H=t,t=o)):(H=t,t=o),t===o&&(t=H,33===e.charCodeAt(H)?(n=E,H++):(n=o,0===te&&ce(C)),n!==o&&(r=ve())!==o?(W=t,t=n=P(r)):(H=t,t=o),t===o&&(t=function(){var t,n,r,i;return te++,t=H,45===e.charCodeAt(H)?(n=d,H++):(n=o,0===te&&ce(v)),n===o&&(n=null),n!==o&&function(){var t,n,r,i;if(48===e.charCodeAt(H)?(t=I,H++):(t=o,0===te&&ce(q)),t===o)if(t=H,B.test(e.charAt(H))?(n=e.charAt(H),H++):(n=o,0===te&&ce(z)),n!==o){for(r=[],R.test(e.charAt(H))?(i=e.charAt(H),H++):(i=o,0===te&&ce(D));i!==o;)r.push(i),R.test(e.charAt(H))?(i=e.charAt(H),H++):(i=o,0===te&&ce(D));r!==o?t=n=[n,r]:(H=t,t=o)}else H=t,t=o;return t}()!==o?((r=function(){var t,n,r,i;if(t=H,46===e.charCodeAt(H)?(n=L,H++):(n=o,0===te&&ce(F)),n!==o){if(r=[],R.test(e.charAt(H))?(i=e.charAt(H),H++):(i=o,0===te&&ce(D)),i!==o)for(;i!==o;)r.push(i),R.test(e.charAt(H))?(i=e.charAt(H),H++):(i=o,0===te&&ce(D));else r=o;r!==o?t=n=[n,r]:(H=t,t=o)}else H=t,t=o;return t}())===o&&(r=null),r!==o?((i=function(){var t,n,r,i,a;if(t=H,T.test(e.charAt(H))?(n=e.charAt(H),H++):(n=o,0===te&&ce(N)),n!==o)if(45===e.charCodeAt(H)?(r=d,H++):(r=o,0===te&&ce(v)),r===o&&(43===e.charCodeAt(H)?(r=h,H++):(r=o,0===te&&ce(p))),r===o&&(r=null),r!==o){if(i=[],R.test(e.charAt(H))?(a=e.charAt(H),H++):(a=o,0===te&&ce(D)),a!==o)for(;a!==o;)i.push(a),R.test(e.charAt(H))?(a=e.charAt(H),H++):(a=o,0===te&&ce(D));else i=o;i!==o?t=n=[n,r,i]:(H=t,t=o)}else H=t,t=o;else H=t,t=o;return t}())===o&&(i=null),i!==o?(W=t,n=S(),t=n):(H=t,t=o)):(H=t,t=o)):(H=t,t=o),te--,t===o&&(n=o,0===te&&ce(M)),t}())===o&&(t=function(){var t,n,r,i;if(t=H,n=[],G.test(e.charAt(H))?(r=e.charAt(H),H++):(r=o,0===te&&ce(X)),r!==o)for(;r!==o;)n.push(r),G.test(e.charAt(H))?(r=e.charAt(H),H++):(r=o,0===te&&ce(X));else n=o;if(n!==o){for(r=[],Z.test(e.charAt(H))?(i=e.charAt(H),H++):(i=o,0===te&&ce(J));i!==o;)r.push(i),Z.test(e.charAt(H))?(i=e.charAt(H),H++):(i=o,0===te&&ce(J));r!==o?(W=t,n=U(),t=n):(H=t,t=o)}else H=t,t=o;return t}())),t}function ye(){var t,n;for(te++,t=[],K.test(e.charAt(H))?(n=e.charAt(H),H++):(n=o,0===te&&ce($));n!==o;)t.push(n),K.test(e.charAt(H))?(n=e.charAt(H),H++):(n=o,0===te&&ce($));return te--,t===o&&(n=o,0===te&&ce(Y)),t}function be(e){return" "+e[1]+" "+e[3]}if((n=a())!==o&&H===e.length)return n;throw n!==o&&H<e.length&&ce({type:"end"}),le(ee,V<e.length?e.charAt(V):null,V<e.length?ue(V,V+1):ue(V,V))}}},591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GroupNode=t.Mask=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(55)),i=l(n(81)),a=l(n(80)),u=l(n(187)),c=n(263);function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=t.Mask=function(){function e(t){f(this,e),this._frame=t}return r(e,[{key:"instantiate",value:function(e,t){var n=new o.Graphics;return n.beginFill(),n.drawShape(this._frame),n.endFill(),t.object.mask=n,new a.default({context:e,object:n,parent:t.object})}}]),e}(),h=t.GroupNode=function(e){function t(){return f(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"compile",value:function(e,t){this.children=e.compileChildren(t),this.display=u.default.compile(e,t);var n=(0,c.parseFrame)(t.attr("mask")||"");n&&(this.mask=new s(n))}},{key:"instantiate",value:function(e,t){var n=new o.Container,r=[this.display];return this.mask&&r.push(this.mask),new a.default({context:e,object:n,parent:t,concerns:r,children:this.children})}}]),t}();t.default=h},592:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=h(n(76)),i=h(n(160)),a=h(n(591)),u=h(n(550)),c=h(n(549)),l=h(n(548)),f=h(n(547)),s=h(n(546));function h(e){return e&&e.__esModule?e:{default:e}}var p=(0,i.default)("scintillator:compiler"),d={skin:l.default,sprite:f.default,group:a.default,object:c.default,text:s.default,if:u.default},v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,t),this._defs=new Map}return r(e,[{key:"compile",value:function(t){var n=t[0].nodeName;p("compiling",t[0]);var r=e.getNodeClass(n);if(!r)throw new Error("Invalid node name: "+n);return r.compile(this,t)}},{key:"compileChildren",value:function(t){var n=[],r=!0,i=!1,a=void 0;try{for(var u,c=Array.from(t.children())[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var l=u.value,f=l.nodeName;if("defs"===f)this.compileDefs((0,o.default)(l));else if("use"===f)n.push(this.getDef(l.getAttribute("def")));else{e.getNodeClass(f)&&n.push(this.compile((0,o.default)(l)))}}}catch(e){i=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw a}}return n}},{key:"compileDefs",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=Array.from(e.children())[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var u=i.value,c=u.getAttribute("id");if(!c)throw new Error("A def should have an id: "+u.nodeName);this._defs.set(c,this.compile((0,o.default)(u)))}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}},{key:"getDef",value:function(e){var t=this._defs.get(e);if(!t)throw new Error("Cannot find def: "+e);return t}}],[{key:"getNodeClass",value:function(e){return d[e]}}]),e}();t.default=v},593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.load=function(e,t){return(0,i.default)(regeneratorRuntime.mark(function n(){var r,i,a,c,s,d,v,y,b,_,m,w,g,x,O,j,k,A,E,C,P,M,S;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return h("load XML from %s",e),n.next=3,T=e,Promise.resolve(o.default.ajax({url:T,dataType:"xml"})).then(function(e){return(0,o.default)(e.documentElement)});case 3:for(r=n.sent,i=new f.default,a=new Set,c=!0,s=!1,d=void 0,n.prev=9,v=Array.from(r.find("[image]"))[Symbol.iterator]();!(c=(y=v.next()).done);c=!0)b=y.value,a.add((0,o.default)(b).attr("image"));n.next=17;break;case 13:n.prev=13,n.t0=n.catch(9),s=!0,d=n.t0;case 17:n.prev=17,n.prev=18,!c&&v.return&&v.return();case 20:if(n.prev=20,!s){n.next=23;break}throw d;case 23:return n.finish(20);case 24:return n.finish(17);case 25:for(_=!0,m=!1,w=void 0,n.prev=28,g=Array.from(r.find("[font-src]"))[Symbol.iterator]();!(_=(x=g.next()).done);_=!0)O=x.value,a.add((0,o.default)(O).attr("font-src"));n.next=36;break;case 32:n.prev=32,n.t1=n.catch(28),m=!0,w=n.t1;case 36:n.prev=36,n.prev=37,!_&&g.return&&g.return();case 39:if(n.prev=39,!m){n.next=42;break}throw w;case 42:return n.finish(39);case 43:return n.finish(36);case 44:for(j=!0,k=!1,A=void 0,n.prev=47,E=a[Symbol.iterator]();!(j=(C=E.next()).done);j=!0)P=C.value,M=u.default.resolve(e,P),i.add(P,M);n.next=55;break;case 51:n.prev=51,n.t2=n.catch(47),k=!0,A=n.t2;case 55:n.prev=55,n.prev=56,!j&&E.return&&E.return();case 58:if(n.prev=58,!k){n.next=61;break}throw A;case 61:return n.finish(58);case 62:return n.finish(55);case 63:return n.next=65,p(i,t);case 65:return h("compiling"),S=new l.default({resources:i}).compile(r),n.abrupt("return",S);case 68:case"end":return n.stop()}var T},n,this,[[9,13,17,25],[18,,20,24],[28,32,36,44],[37,,39,43],[47,51,55,63],[56,,58,62]])}))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(55)),o=s(n(76)),i=s(n(88)),a=s(n(160)),u=s(n(190)),c=n(89),l=s(n(592)),f=s(n(545));function s(e){return e&&e.__esModule?e:{default:e}}var h=(0,a.default)("scintillator:loader");function p(e,t){return h("loading resources"),new Promise(function(n){if(0===e.urls.length)return n();var o=new r.loaders.Loader,i=!0,a=!1,u=void 0;try{for(var l,f=e.urls[Symbol.iterator]();!(i=(l=f.next()).done);i=!0){var s=l.value;o.add(s,s)}}catch(e){a=!0,u=e}finally{try{!i&&f.return&&f.return()}finally{if(a)throw u}}o.once("complete",function(){h("resources finished loading"),n()}),t&&(t.formatter=c.PERCENTAGE_FORMATTER,o.once("complete",function(){t.report(100,100)}),o.on("progress",function(){t.report(o.progress,100)})),o.load()})}},594:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(55));function i(e,t){return o.utils.canUseNewCanvasBlendModes=function(){return!0},new o.CanvasRenderer(e,t,{transparent:!0})}var a=t.Context=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refs={},this._skin=t,this._instance=t.instantiate(this),this._renderer=i(t.width,t.height),this.stage=this._instance.object,this.view=this._renderer.view,this.skinData=t.data,this._setupInteractivity()}return r(e,[{key:"render",value:function(e){this._instance.push(e),this._renderer.render(this.stage)}},{key:"destroy",value:function(){this._instance.destroy(),this._instance=null,this._teardownInteractivity()}},{key:"ref",value:function(e,t){(this.refs[e]||(this.refs[e]=new Set)).add(t)}},{key:"unref",value:function(e,t){var n=this.refs[e];n&&n.delete(t)}},{key:"_setupInteractivity",value:function(){var e=this,t=null,n=[],r=function(e){t=e},o=function(e){t=t&&e},i=function(){t=null},a=function(e){n=[].slice.call(e.touches)},u=this.view,c=this._skin.width,l=this._skin.height;function f(e,t,n){return{x:(t.clientX-n.left)/n.width*c,y:(t.clientY-n.top)/n.height*l,id:e}}u.addEventListener("mousedown",r,!1),u.addEventListener("mousemove",o,!1),u.addEventListener("mouseup",i,!1),u.addEventListener("touchstart",a,!1),u.addEventListener("touchmove",a,!1),u.addEventListener("touchend",a,!1),this._teardownInteractivity=function(){u.removeEventListener("mousedown",r,!1),u.removeEventListener("mousemove",o,!1),u.removeEventListener("mouseup",i,!1),u.removeEventListener("touchstart",a,!1),u.removeEventListener("touchmove",a,!1),u.removeEventListener("touchend",a,!1)},this._input={get:function(){var r=[],o=e.view.getBoundingClientRect();t&&r.push(f("mouse",t,o));for(var i=0;i<n.length;i++){var a=n[i];r.push(f("touch"+a.identifier,a,o))}return r}}}},{key:"input",get:function(){return this._input.get()}}]),e}();t.default=a},80:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Instance=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(6),a=(r=i)&&r.__esModule?r:{default:r};function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c=t.Instance=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._context=t.context,this._object=t.object,this._children=t.children,this._bindings=[],this._concerns=[],this.onData=new a.default(t.onData),this.onDestroy=new a.default(t.onDestroy),t.bindings){var n=!0,r=!1,o=void 0;try{for(var i,c=t.bindings[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var l=i.value;this.bind.apply(this,u(l))}}catch(e){r=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}}if(t.concerns){var f=!0,s=!1,h=void 0;try{for(var p,d=t.concerns[Symbol.iterator]();!(f=(p=d.next()).done);f=!0){var v=p.value;this._concerns.push(v.instantiate(this._context,this))}}catch(e){s=!0,h=e}finally{try{!f&&d.return&&d.return()}finally{if(s)throw h}}}if(t.children){var y=!0,b=!1,_=void 0;try{for(var m,w=t.children[Symbol.iterator]();!(y=(m=w.next()).done);y=!0){var g=m.value;this._concerns.push(g.instantiate(this._context,this._object))}}catch(e){b=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(b)throw _}}}t.onCreate&&new a.default(t.onCreate).call(),t.parent&&this.attachTo(t.parent)}return o(e,[{key:"bind",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o,i=(r=t.pop(),o=void 0,function(e){o!==e&&(o=e,r(e))});1===t.length&&t[0].constant?i(t[0]()):this._bindings.push(function(e){for(var n=0;n<t.length;n++)e=t[n](e);i(e)})}},{key:"attachTo",value:function(e){this._parent=e,this._parent.addChild(this._object)}},{key:"detach",value:function(){this._parent&&(this._parent.removeChild(this._object),this._parent=null)}},{key:"push",value:function(e){var t;for(t=0;t<this._bindings.length;t++)this._bindings[t](e);for(t=0;t<this._concerns.length;t++)this._concerns[t].push(e);this.onData.call(e)}},{key:"destroy",value:function(){this.detach();for(var e=0;e<this._concerns.length;e++)this._concerns[e].destroy();this.onDestroy.call(),this._concerns=null,this._bindings=null,this._parent=null,this._object=null}},{key:"object",get:function(){return this._object}},{key:"parent",get:function(){return this._parent}}]),e}();t.default=c},81:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=t.SkinNode=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"compile",value:function(e,t){var n=new this;return n.compile(e,t),n}}]),e}();t.default=o}}]);
//# sourceMappingURL=gameEngine~playground~test-f76e86a7706d0fbc5012.js.map