(this.webpackJsonp=this.webpackJsonp||[]).push([[18],{113:function(e,t,n){"use strict";function r(e){return{as:function(t){return new Promise(function(n,r){var a=new FileReader;switch(a.onload=function(){n(a.result)},a.onerror=function(){r(new Error("Unable to read from Blob"))},t){case"arraybuffer":a.readAsArrayBuffer(e);break;case"text":a.readAsText(e)}})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.readBlob=r,t.default=r},126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixed=function(e,t){if(!t)return function(){};var n=0;return t.report(0,e),function(r){return t.report(++n,e,r)}},t.atomic=function(e,t){return e?Promise.resolve(t).tap(function(t){t&&t.byteLength?(e.formatter=r.BYTES_FORMATTER,e.report(t.byteLength,t.byteLength)):e.report(1,1)}):t},t.wrapPromise=function(e,t){var n=0,r=0;return function(){return e.report(n,++r),Promise.resolve(t.apply(this,arguments)).tap(function(){return e.report(++n,r)})}},t.bind=function(e,t){return e.watch(function(){return t.report(e.current,e.total,e.extra)})},t.simultaneous=function(e){var t=[],n=void 0,r=void 0;function a(){n&&e.report(n.current,n.total,n.extra),t.length>0&&(!n||n.progress>=1)&&function(e){if(n===e)return;r&&(r(),r=null);(n=e)&&(r=n.watch(a))}(t.shift())}return{add:function(e){t.push(e),a()}}};var r=n(89)},150:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingMaster=t.FADE_LENGTH=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.canPlay=function(e){return"probably"===c.canPlayType(e)},t.unmuteAudio=h;var a=o(n(172)),i=o(n(113));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=t.FADE_LENGTH=.001,c=document.createElement("audio");var f=t.SamplingMaster=function(){function e(t){u(this,e),this._audioContext=t||a.default,this._samples=[],this._groups=[],this._instances=new Set,this._destination=this._audioContext.destination}return r(e,[{key:"unmute",value:function(){h(this._audioContext)}},{key:"destroy",value:function(){if(!this._destroyed){this._destroyed=!0;var e=!0,t=!1,n=void 0;try{for(var r,a=this._samples[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){r.value.destroy()}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}var i=!0,o=!1,u=void 0;try{for(var s,c=this._instances[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){s.value.destroy()}}catch(e){o=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw u}}this._samples=null,this._instances=null}}},{key:"decode",value:function(e){var t=this;return this._coerceToArrayBuffer(e).then(function(e){return t._decodeAudio(e)})}},{key:"sample",value:function(e){var t=this;return(e.numberOfChannels?Promise.resolve(e):t.decode(e)).then(function(e){if(t._destroyed)throw new Error("SamplingMaster already destroyed!");var n=new d(t,e);return t._samples.push(n),n})}},{key:"group",value:function(e){var t=new l(this,e);return this._groups.push(t),t}},{key:"_coerceToArrayBuffer",value:function(e){return e instanceof ArrayBuffer?Promise.resolve(e):(0,i.default)(e).as("arraybuffer")}},{key:"_decodeAudio",value:function(e){var t=this;return new Promise(function(n,r){t.audioContext.decodeAudioData(e,function(e){n(e)},function(e){r(new Error("Unable to decode audio: "+e))})})}},{key:"_startPlaying",value:function(e){this._instances.add(e)}},{key:"_stoppedPlaying",value:function(e){this._instances.delete(e)}},{key:"audioContext",get:function(){return this._audioContext}},{key:"destination",get:function(){return this._destination}}]),e}(),l=function(){function e(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).volume;u(this,e),this._master=t,this._gain=this._master.audioContext.createGain(),null!=n&&(this._gain.gain.value=n),this._gain.connect(this._master.destination)}return r(e,[{key:"destroy",value:function(){this._gain.disconnect(),this._gain=null}},{key:"destination",get:function(){return this._gain}}]),e}(),d=function(){function e(t,n){u(this,e),this._master=t,this._buffer=n}return r(e,[{key:"play",value:function(e,t){return new p(this._master,this._buffer,e,t)}},{key:"destroy",value:function(){this._master=null,this._buffer=null}}]),e}(),p=function(){function e(t,n,r){var a=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};u(this,e),r=r||0,this._master=t;var o=t.audioContext,c=o.createBufferSource();c.buffer=n,c.onended=function(){return a.stop()};var f=o.createGain();c.connect(f);var l=i.node||i.group&&i.group.destination||t.destination;f.connect(l),this._source=c,this._gain=this.TEST_node=f;var d=r?Math.max(0,o.currentTime+r):0,p=i.start||0,h=p>0,v=!1;if(h&&f.gain.setValueAtTime(0,0),void 0!==i.end){var m=Math.max(i.end-p,0);c.start(d,p,m+s),v=o.currentTime+r+m}else c.start(d,p);h&&(f.gain.setValueAtTime(0,o.currentTime+r),f.gain.linearRampToValueAtTime(1,o.currentTime+r+s)),!1!==v&&(f.gain.setValueAtTime(1,v),f.gain.linearRampToValueAtTime(0,v+s)),this._master._startPlaying(this)}return r(e,[{key:"stop",value:function(){this._source&&(this._source.stop(0),this._source.disconnect(),this._gain.disconnect(),this._source=null,this._gain=null,this._master._stoppedPlaying(this),this.onstop&&this.onstop())}},{key:"bad",value:function(){this._source&&(this._source.playbackRate.value=Math.random()<.5?Math.pow(2,1/24):Math.pow(2,-1/24))}},{key:"destroy",value:function(){this.stop()}}]),e}();function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.default,t=e.createGain(),n=e.createOscillator();n.frequency.value=440,n.start(e.currentTime+.1),n.stop(e.currentTime+.1),t.connect(e.destination),t.disconnect();try{e.resume()}catch(e){console.error("[sampling-master] Cannot resume AudioContext",e)}}t.default=f},1567:function(e,t,n){n(2);e.exports=function(e){var t=[];return t.push('<div class="jukebox"><div class="jukebox--overlay"></div><div class="jukebox--inner"><h1>BMS Jukebox</h1><p class="jukebox--status js-log">Waiting for BMS file...</p><p>Google Chrome: Drag a BMS folder into this box.</p><p>Firefox, Safari: Select all files (BMS+sounds) and drag into this box.</p><button class="js-play">Click Here to Play</button><div class="js-sampler jukebox--sampler"></div></div></div>'),t.join("")}},1568:function(e,t,n){(e.exports=n(1)(!1)).push([e.i,".jukebox--overlay {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: rgba(139, 134, 133, 0.5);\n}\n\n.jukebox--inner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  border: 2px solid #8b8685;\n  background: #252423;\n  padding: 12px;\n}\n\n.jukebox--sampler {\n  background: #090807;\n  padding: 9px;\n  border: 1px solid #8b8685;\n  margin-top: 10px;\n  height: 192px;\n  width: 40em;\n  overflow: auto;\n}\n\n.jukebox--sampler span {\n  font-size: 12px;\n  opacity: 1;\n  -webkit-transition: 0.5s opacity;\n  transition: 0.5s opacity;\n}\n\n.jukebox--sampler span.is-off {\n  color: #8b8685;\n  opacity: 0;\n}\n\n.jukebox h1 {\n  margin: 0 0 20px;\n  font: 30px Helvetica Neue, Helvetica, sans-serif;\n}\n\n.jukebox p {\n  margin: 10px 0 0;\n}\n\n.jukebox .jukebox--status {\n  color: #8b8685;\n  font-style: italic;\n  margin-bottom: 20px;\n}\n\n.jukebox button {\n  display: block;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  width: 100%;\n  background: #090807;\n  color: #7f3;\n  cursor: pointer;\n  border: 1px solid #8b8685;\n  padding: 8px;\n  font: bold 15px verdana, sans-serif;\n  margin-top: 18px;\n}\n",""])},1569:function(e,t,n){var r=n(1568);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,a);r.locals&&(e.exports=r.locals)},1570:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.main=function(e){function t(){var e=(0,r.default)((0,p.default)()).appendTo("body");e.find(".js-play").hide(),e.on("dragover",function(){return!1}).on("drop",function(t){t.preventDefault();var n=new i.default(t.originalEvent);return v(n,e),!1})}(0,r.default)(e).text("Technical Demo!").on("click",function n(){t();(0,r.default)(e).off("click",n);(0,r.default)(e).hide();return!1})},n(1569);var r=h(n(76)),a=h(n(615)),i=h(n(318)),o=h(n(610)),u=h(n(617)),s=h(n(150)),c=h(n(608)),f=h(n(609)),l=h(n(88)),d=h(n(172)),p=h(n(1567));function h(e){return e&&e.__esModule?e:{default:e}}function v(t,n){var i=new s.default(d.default),p=n.find(".js-log"),h=n.find(".js-play").hide(),v=n.find(".js-sampler");function m(){return new Promise(function(e){h.show();h.on("click",function(){e();h.hide()})})}function y(e){p.text(e)}function b(e,t){var n={};var r=[];var a=0;var o=function e(o){var u=o.keysound;if(!(u in n)){n[u]=null;r.push(x(t.headers.get("wav"+u)).then(function(e){return i.sample(e)}).then(function(e){return n[u]=e}).catch(function(e){return console.error("Unable to load "+u+": "+e)}).tap(function(){return y("[loaded "+ ++a+"/"+r.length+" samples]")}))}};var u=true;var s=false;var c=undefined;try{for(var f=e.all()[Symbol.iterator](),l;!(u=(l=f.next()).done);u=true){var d=l.value;o(d)}}catch(e){s=true;c=e}finally{try{if(!u&&f.return){f.return()}}finally{if(s){throw c}}}return Promise.all(r).then(function(){return n})}function x(e){return"string"!=typeof e?Promise.reject(new Error("Empty name")):t.file(e).catch(function(){return t.file(e.replace(/\.\w+$/,".ogg"))}).catch(function(){return t.file(e.replace(/\.\w+$/,".mp3"))}).catch(function(){return t.file(e.replace(/\.\w+$/,".wav"))}).then(function(e){return e.read()})}(0,l.default)(regeneratorRuntime.mark(function n(){var s,l,d,p,h,x,_,g,k,w;return regeneratorRuntime.wrap(function n(T){while(1){switch(T.prev=T.next){case 0:y("Loading file list");T.next=3;return t.fileList;case 3:s=T.sent;l=s.filter(function(e){return e.match(/\.(?:bms|bme|bml|pms)$/i)})[0];y("Loading "+l);T.next=8;return t.file(l);case 8:T.next=10;return T.sent.read();case 10:d=T.sent;p=e.from(new Uint8Array(d));T.next=14;return Promise.promisify(u.default.readAsync)(p);case 14:h=T.sent;x=a.default.compile(h).chart;_=f.default.fromBMSChart(x);g=o.default.fromBMSChart(x);k=c.default.fromBMSChart(x);(0,r.default)("<pre wrap></pre>").text(JSON.stringify(k,null,2)).appendTo(v);y("Loading samples");T.next=23;return b(g,x);case 23:w=T.sent;y("Click the button to play!");T.next=27;return m();case 27:void function(){i.unmute();var e=function e(t){setTimeout(function(){var e=w[t.keysound];if(!e){console.log("warn: unknown sample "+t.keysound);return}var n=(0,r.default)("<span></span>").text("["+t.keysound+"] ").appendTo(v);var a=e.play();v[0].scrollTop=v[0].scrollHeight;a.onstop=function(){n.addClass("is-off")}},_.beatToSeconds(t.beat)*1e3)};var t=true;var n=false;var a=undefined;try{for(var o=g.all()[Symbol.iterator](),u;!(t=(u=o.next()).done);t=true){var s=u.value;e(s)}}catch(e){n=true;a=e}finally{try{if(!t&&o.return){o.return()}}finally{if(n){throw a}}}return false}();case 28:case"end":return T.stop()}}},n,this)})).done()}}).call(this,n(272).Buffer)},172:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(256),i=(r=a)&&r.__esModule?r:{default:r};t.default=(0,i.default)({latencyHint:"interaction"})},318:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileResource=t.DndResources=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(126)),i=u(n(88)),o=u(n(113));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=t.DndResources=function(){function e(t){c(this,e),this._files=function(e){var t=[];return(0,i.default)(regeneratorRuntime.mark(function r(){var i,o,u,s,c,f,l,d,p,h,v;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.dataTransfer.items){r.next=29;break}i=!0,o=!1,u=void 0,r.prev=4,s=Array.from(e.dataTransfer.items)[Symbol.iterator]();case 6:if(i=(c=s.next()).done){r.next=13;break}return f=c.value,r.next=10,n(f);case 10:i=!0,r.next=6;break;case 13:r.next=19;break;case 15:r.prev=15,r.t0=r.catch(4),o=!0,u=r.t0;case 19:r.prev=19,r.prev=20,!i&&s.return&&s.return();case 22:if(r.prev=22,!o){r.next=25;break}throw u;case 25:return r.finish(22);case 26:return r.finish(19);case 27:r.next=49;break;case 29:if(!e.dataTransfer.files){r.next=49;break}for(l=!0,d=!1,p=void 0,r.prev=33,h=Array.from(e.dataTransfer.files)[Symbol.iterator]();!(l=(v=h.next()).done);l=!0)a(v.value);r.next=41;break;case 37:r.prev=37,r.t1=r.catch(33),d=!0,p=r.t1;case 41:r.prev=41,r.prev=42,!l&&h.return&&h.return();case 44:if(r.prev=44,!d){r.next=47;break}throw p;case 47:return r.finish(44);case 48:return r.finish(41);case 49:return r.abrupt("return",t);case 50:case"end":return r.stop()}},r,this,[[4,15,19,27],[20,,22,26],[33,37,41,49],[42,,44,48]])}));function n(e){return(0,i.default)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.webkitGetAsEntry&&e.webkitGetAsEntry())){t.next=6;break}return t.next=4,r(n);case 4:t.next=8;break;case 6:a(e.getAsFile&&e.getAsFile());case 8:case"end":return t.stop()}},t,this)}))}function r(e){return e.isFile?function(e){return new Promise(function(t,n){e.file(t,n)}).tap(function(e){a(e)})}(e):e.isDirectory?(t=e,(0,i.default)(regeneratorRuntime.mark(function e(){var n,a,i,o,u,c,f,l,d,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=t.createReader(),i=function(){return new Promise(function(e,t){a.readEntries(e,t)})};case 3:return e.next=5,i();case 5:if((o=e.sent)&&0!==o.length){e.next=8;break}return e.abrupt("break",11);case 8:n.push.apply(n,s(Array.from(o)));case 9:e.next=3;break;case 11:u=!0,c=!1,f=void 0,e.prev=14,l=n[Symbol.iterator]();case 16:if(u=(d=l.next()).done){e.next=23;break}return p=d.value,e.next=20,r(p);case 20:u=!0,e.next=16;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(14),c=!0,f=e.t0;case 29:e.prev=29,e.prev=30,!u&&l.return&&l.return();case 32:if(e.prev=32,!c){e.next=35;break}throw f;case 35:return e.finish(32);case 36:return e.finish(29);case 37:case"end":return e.stop()}},e,this,[[14,25,29,37],[30,,32,36]])}))):void 0;var t}function a(e){e&&t.push({name:e.name,file:e})}}(t)}return r(e,[{key:"file",value:function(e){return this._files.then(function(t){var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value;if(u.name.toLowerCase()===e.toLowerCase())return new l(u.file)}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}throw new Error("unable to find "+e)})}},{key:"fileList",get:function(){return Promise.resolve(this._files.map(function(e){return e.name}))}}]),e}(),l=t.FileResource=function(){function e(t){c(this,e),this._file=t}return r(e,[{key:"read",value:function(e){return a.atomic(e,(0,o.default)(this._file).as("arraybuffer"))}},{key:"resolveUrl",value:function(){return Promise.resolve(URL.createObjectURL(this._file))}},{key:"name",get:function(){return this._file.name}}]),e}();t.default=f},89:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXTRA_FORMATTER=t.PERCENTAGE_FORMATTER=t.BYTES_FORMATTER=void 0;var r,a=n(341),i=(r=a)&&r.__esModule?r:{default:r};var o=function(e){return function(t){return null!==t.progress?e(t):""}};t.BYTES_FORMATTER=o(function(e){return(0,i.default)(e.current)+" / "+(0,i.default)(e.total)}),t.PERCENTAGE_FORMATTER=o(function(e){return(e.current/e.total*100).toFixed(1)+"%"}),t.EXTRA_FORMATTER=o(function(e){return e.extra+""})}}]);
//# sourceMappingURL=comingSoonDemo-9720546481607ef6b110.js.map