{"version":3,"file":"build/959-de0c91874fbc59fe4e37.js","mappings":"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","sources":["file:///home/runner/work/bemuse/bemuse/packages/bmson/lib/index.js","file:///home/runner/work/bemuse/bemuse/packages/bmson/lib/legacy.js","file:///home/runner/work/bemuse/bemuse/packages/bmson/lib/types.js","file:///home/runner/work/bemuse/bemuse/packages/bmson/lib/utils.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.keysForBmson = exports.hasScratch = exports.beatForPulseForBmson = exports._slicesForNotesAndTiming = exports.musicalScoreForBmson = exports.timingInfoForBmson = exports.barLinesForBmson = exports.songInfoForBmson = void 0;\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar BMS = __importStar(require(\"bms\"));\nvar legacy = __importStar(require(\"./legacy\"));\nvar utils = __importStar(require(\"./utils\"));\n__exportStar(require(\"./types\"), exports);\n/**\n * Returns a BMS.SongInfo corresponding to this BMS file.\n */\nfunction songInfoForBmson(bmson) {\n    var bmsonInfo = bmson.info;\n    var info = {};\n    if (bmsonInfo.title)\n        info.title = bmsonInfo.title;\n    if (bmsonInfo.artist)\n        info.artist = bmsonInfo.artist;\n    if (bmsonInfo.genre)\n        info.genre = bmsonInfo.genre;\n    if (bmsonInfo.level)\n        info.level = bmsonInfo.level;\n    info.subtitles = getSubtitles();\n    if (bmsonInfo.subartists)\n        info.subartists = bmsonInfo.subartists;\n    return new BMS.SongInfo(info);\n    function getSubtitles() {\n        if (!bmson.version)\n            return ['Warning: legacy bmson'];\n        var subtitles = [];\n        if (bmsonInfo.chart_name && typeof bmsonInfo.chart_name === 'string') {\n            subtitles.push(bmsonInfo.chart_name);\n        }\n        if (bmsonInfo.subtitle && typeof bmsonInfo.subtitle === 'string') {\n            subtitles.push.apply(subtitles, __spreadArray([], __read(bmsonInfo.subtitle.split('\\n')), false));\n        }\n        return subtitles;\n    }\n}\nexports.songInfoForBmson = songInfoForBmson;\n/**\n * Returns the barlines as an array of beats.\n */\nfunction barLinesForBmson(bmson) {\n    if (!bmson.version)\n        return legacy.barLinesForBmson(bmson);\n    var beatForPulse = beatForPulseForBmson(bmson);\n    var lines = bmson.lines;\n    return (0, lodash_1.default)(lines)\n        .map(function (_a) {\n        var y = _a.y;\n        return beatForPulse(y);\n    })\n        .sortBy()\n        .value();\n}\nexports.barLinesForBmson = barLinesForBmson;\n/**\n * Returns the information to be passed to BMS.Timing constructor\n * in order to generate the timing data represented by the `bmson` object.\n * @param {Bmson} bmson\n */\nfunction timingInfoForBmson(bmson) {\n    if (!bmson.version)\n        return legacy.timingInfoForBmson(bmson);\n    var beatForPulse = beatForPulseForBmson(bmson);\n    return {\n        initialBPM: bmson.info.init_bpm,\n        actions: __spreadArray(__spreadArray([], __read((bmson.bpm_events || []).map(function (_a) {\n            var y = _a.y, bpm = _a.bpm;\n            return ({\n                type: 'bpm',\n                beat: beatForPulse(y),\n                bpm: bpm,\n            });\n        })), false), __read((bmson.stop_events || []).map(function (_a) {\n            var y = _a.y, duration = _a.duration;\n            return ({\n                type: 'stop',\n                beat: beatForPulse(y),\n                stopBeats: beatForPulse(Math.floor(duration)),\n            });\n        })), false),\n    };\n}\nexports.timingInfoForBmson = timingInfoForBmson;\n/**\n * Returns the timing data represented by the `bmson` object.\n * @param {Bmson} bmson\n */\nfunction timingForBmson(bmson) {\n    var _a = timingInfoForBmson(bmson), initialBPM = _a.initialBPM, actions = _a.actions;\n    return new BMS.Timing(initialBPM, actions);\n}\n/**\n * Returns the musical score (comprised of BMS.Notes and BMS.Keysounds).\n * @param {Bmson} bmson\n */\nfunction musicalScoreForBmson(bmson, options) {\n    if (options === void 0) { options = {}; }\n    var timing = timingForBmson(bmson);\n    var _a = notesDataAndKeysoundsDataForBmsonAndTiming(bmson, timing, options), notes = _a.notes, keysounds = _a.keysounds;\n    return {\n        /**\n         * The {BMS.Timing} object for this musical score.\n         */\n        timing: timing,\n        /**\n         * A {BMS.Notes} representing notes inside the bmson notechart.\n         */\n        notes: new BMS.Notes(notes),\n        /**\n         * A {BMS.Keysounds} representing mapping between keysound in the\n         * `notes` field to the actual keysound file name.\n         */\n        keysounds: new BMS.Keysounds(keysounds),\n    };\n}\nexports.musicalScoreForBmson = musicalScoreForBmson;\nfunction soundChannelsForBmson(bmson) {\n    return bmson.version\n        ? bmson.sound_channels\n        : bmson.soundChannel;\n}\nfunction notesDataAndKeysoundsDataForBmsonAndTiming(bmson, timing, options) {\n    var e_1, _a, e_2, _b;\n    var nextKeysoundNumber = 1;\n    var beatForPulse = beatForPulseForBmson(bmson);\n    var notes = [];\n    var keysounds = {};\n    var soundChannels = soundChannelsForBmson(bmson);\n    if (soundChannels) {\n        try {\n            for (var soundChannels_1 = __values(soundChannels), soundChannels_1_1 = soundChannels_1.next(); !soundChannels_1_1.done; soundChannels_1_1 = soundChannels_1.next()) {\n                var _c = soundChannels_1_1.value, name_1 = _c.name, soundChannelNotes = _c.notes;\n                var sortedNotes = lodash_1.default.sortBy(soundChannelNotes, 'y');\n                var keysoundNumber = nextKeysoundNumber++;\n                var keysoundId = lodash_1.default.padStart('' + keysoundNumber, 4, '0');\n                var slices = utils.slicesForNotesAndTiming(soundChannelNotes, timing, {\n                    beatForPulse: beatForPulse,\n                });\n                keysounds[keysoundId] = name_1;\n                try {\n                    for (var sortedNotes_1 = (e_2 = void 0, __values(sortedNotes)), sortedNotes_1_1 = sortedNotes_1.next(); !sortedNotes_1_1.done; sortedNotes_1_1 = sortedNotes_1.next()) {\n                        var _d = sortedNotes_1_1.value, x = _d.x, y = _d.y, l = _d.l;\n                        var note = {\n                            column: getColumn(x, options),\n                            beat: beatForPulse(y),\n                            keysound: keysoundId,\n                            endBeat: undefined,\n                        };\n                        if (l > 0) {\n                            note.endBeat = beatForPulse(y + l);\n                        }\n                        var slice = slices.get(y);\n                        if (slice) {\n                            Object.assign(note, slice);\n                            notes.push(note);\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (sortedNotes_1_1 && !sortedNotes_1_1.done && (_b = sortedNotes_1.return)) _b.call(sortedNotes_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (soundChannels_1_1 && !soundChannels_1_1.done && (_a = soundChannels_1.return)) _a.call(soundChannels_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    return { notes: notes, keysounds: keysounds };\n}\nvar legacy_1 = require(\"./legacy\");\nObject.defineProperty(exports, \"_slicesForNotesAndTiming\", { enumerable: true, get: function () { return legacy_1._slicesForNotesAndTiming; } });\nfunction beatForPulseForBmson(bmson) {\n    if (!bmson.version)\n        return legacy.beatForLoc;\n    var resolution = (bmson.info && bmson.info.resolution) || 240;\n    return function (y) { return y / resolution; };\n}\nexports.beatForPulseForBmson = beatForPulseForBmson;\nfunction getColumn(x, options) {\n    switch (x) {\n        case 1:\n            return '1';\n        case 2:\n            return '2';\n        case 3:\n            return '3';\n        case 4:\n            return '4';\n        case 5:\n            return '5';\n        case 6:\n            return '6';\n        case 7:\n            return '7';\n        case 8:\n            return 'SC';\n    }\n    if (options.double) {\n        switch (x) {\n            case 9:\n                return '8';\n            case 10:\n                return '9';\n            case 11:\n                return '10';\n            case 12:\n                return '11';\n            case 13:\n                return '12';\n            case 14:\n                return '13';\n            case 15:\n                return '14';\n            case 16:\n                return 'SC2';\n        }\n    }\n    return undefined;\n}\n/**\n * Checks if there is a scratch in a bmson file\n */\nfunction hasScratch(bmson) {\n    var e_3, _a, e_4, _b;\n    var soundChannels = soundChannelsForBmson(bmson);\n    if (soundChannels) {\n        try {\n            for (var soundChannels_2 = __values(soundChannels), soundChannels_2_1 = soundChannels_2.next(); !soundChannels_2_1.done; soundChannels_2_1 = soundChannels_2.next()) {\n                var notes = soundChannels_2_1.value.notes;\n                try {\n                    for (var notes_1 = (e_4 = void 0, __values(notes)), notes_1_1 = notes_1.next(); !notes_1_1.done; notes_1_1 = notes_1.next()) {\n                        var x = notes_1_1.value.x;\n                        if (x === 8 || x === 18)\n                            return true;\n                    }\n                }\n                catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                finally {\n                    try {\n                        if (notes_1_1 && !notes_1_1.done && (_b = notes_1.return)) _b.call(notes_1);\n                    }\n                    finally { if (e_4) throw e_4.error; }\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (soundChannels_2_1 && !soundChannels_2_1.done && (_a = soundChannels_2.return)) _a.call(soundChannels_2);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    }\n    return false;\n}\nexports.hasScratch = hasScratch;\n/**\n * Checks the key mode for a bmson file\n */\nfunction keysForBmson(bmson) {\n    var e_5, _a, e_6, _b;\n    var soundChannels = soundChannelsForBmson(bmson);\n    var hasKeys = false;\n    var hasSecondPlayer = false;\n    var hasDeluxeKeys = false;\n    if (soundChannels) {\n        try {\n            for (var soundChannels_3 = __values(soundChannels), soundChannels_3_1 = soundChannels_3.next(); !soundChannels_3_1.done; soundChannels_3_1 = soundChannels_3.next()) {\n                var notes = soundChannels_3_1.value.notes;\n                try {\n                    for (var notes_2 = (e_6 = void 0, __values(notes)), notes_2_1 = notes_2.next(); !notes_2_1.done; notes_2_1 = notes_2.next()) {\n                        var x = notes_2_1.value.x;\n                        hasKeys = true;\n                        if (x >= 11 && x <= 20)\n                            hasSecondPlayer = true;\n                        if (x === 6 || x === 7 || x === 16 || x === 17)\n                            hasDeluxeKeys = true;\n                    }\n                }\n                catch (e_6_1) { e_6 = { error: e_6_1 }; }\n                finally {\n                    try {\n                        if (notes_2_1 && !notes_2_1.done && (_b = notes_2.return)) _b.call(notes_2);\n                    }\n                    finally { if (e_6) throw e_6.error; }\n                }\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (soundChannels_3_1 && !soundChannels_3_1.done && (_a = soundChannels_3.return)) _a.call(soundChannels_3);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n    }\n    if (!hasKeys)\n        return 'empty';\n    if (hasSecondPlayer) {\n        return hasDeluxeKeys ? '14K' : '10K';\n    }\n    else {\n        return hasDeluxeKeys ? '7K' : '5K';\n    }\n}\nexports.keysForBmson = keysForBmson;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports._slicesForNotesAndTiming = exports.beatForLoc = exports.timingInfoForBmson = exports.barLinesForBmson = void 0;\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar utils = __importStar(require(\"./utils\"));\nfunction barLinesForBmson(bmson) {\n    var lines = bmson.lines;\n    return (0, lodash_1.default)(lines)\n        .map(function (_a) {\n        var y = _a.y;\n        return beatForLoc(y);\n    })\n        .sortBy()\n        .value();\n}\nexports.barLinesForBmson = barLinesForBmson;\nfunction timingInfoForBmson(bmson) {\n    return {\n        initialBPM: bmson.info.initBPM,\n        actions: __spreadArray(__spreadArray([], __read((bmson.bpmNotes || []).map(function (_a) {\n            var y = _a.y, v = _a.v;\n            return ({\n                type: 'bpm',\n                beat: beatForLoc(y),\n                bpm: v,\n            });\n        })), false), __read((bmson.stopNotes || []).map(function (_a) {\n            var y = _a.y, v = _a.v;\n            return ({\n                type: 'stop',\n                beat: beatForLoc(y),\n                stopBeats: beatForLoc(Math.floor(v)),\n            });\n        })), false),\n    };\n}\nexports.timingInfoForBmson = timingInfoForBmson;\nfunction beatForLoc(y) {\n    return y / 240;\n}\nexports.beatForLoc = beatForLoc;\nfunction slicesForNotesAndTiming(notes, timing) {\n    return utils.slicesForNotesAndTiming(notes, timing, {\n        beatForPulse: beatForLoc,\n    });\n}\nexports._slicesForNotesAndTiming = slicesForNotesAndTiming;\n//# sourceMappingURL=legacy.js.map","\"use strict\";\n/* eslint camelcase: off */\n/* REASON: These snake case names are specified in bmson’s spec. */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=types.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.slicesForNotesAndTiming = void 0;\nvar lodash_1 = __importDefault(require(\"lodash\"));\n/**\n * Takes the notes for a certain `soundChannel` and returns instructions\n * on how to slice the keysound file, given the `y` position of a note.\n *\n * @param notes An {Array} of `notes` inside `bmson.soundChannel[i]`\n * @param timing The {BMS.Timing} object that corresponds to the bmson\n * @param options An {Object} of options with the following keys:\n *  * `beatForPulse` A {Function} used to resolve beat for a given pulse number\n * @returns an ES6 {Map} that maps `y` position of the note to an SoundSlice\n */\nfunction slicesForNotesAndTiming(notes, timing, options) {\n    var e_1, _a, e_2, _b;\n    var beatForPulse = options.beatForPulse;\n    var all = new Set();\n    var play = new Set();\n    var restart = new Set();\n    try {\n        for (var notes_1 = __values(notes), notes_1_1 = notes_1.next(); !notes_1_1.done; notes_1_1 = notes_1.next()) {\n            var _c = notes_1_1.value, x = _c.x, y = _c.y, c = _c.c;\n            all.add(y);\n            if (x) {\n                play.add(y);\n            }\n            if (!c) {\n                restart.add(y);\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (notes_1_1 && !notes_1_1.done && (_a = notes_1.return)) _a.call(notes_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    var result = new Map();\n    var soundTime = null;\n    var mustAdd = true;\n    var tʹ;\n    var lastAdded;\n    try {\n        for (var _d = __values(lodash_1.default.sortBy(__spreadArray([], __read(all), false))), _e = _d.next(); !_e.done; _e = _d.next()) {\n            var y = _e.value;\n            var t = timing.beatToSeconds(beatForPulse(y));\n            if (soundTime === null || restart.has(y)) {\n                soundTime = 0;\n            }\n            else {\n                soundTime += t - tʹ;\n            }\n            var shouldAdd = mustAdd || play.has(y) || restart.has(y);\n            if (shouldAdd) {\n                if (lastAdded && !restart.has(y)) {\n                    lastAdded.keysoundEnd = soundTime;\n                }\n                var obj = { keysoundStart: soundTime, keysoundEnd: undefined };\n                result.set(y, obj);\n                lastAdded = obj;\n            }\n            mustAdd = play.has(y);\n            tʹ = t;\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_e && !_e.done && (_b = _d.return)) _b.call(_d);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return result;\n}\nexports.slicesForNotesAndTiming = slicesForNotesAndTiming;\n//# sourceMappingURL=utils.js.map"],"names":["__createBinding","this","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","__exportStar","exports","p","__read","n","Symbol","iterator","r","e","i","ar","next","done","push","error","__spreadArray","to","from","pack","arguments","length","l","Array","slice","concat","__values","s","TypeError","__importDefault","keysForBmson","hasScratch","beatForPulseForBmson","_slicesForNotesAndTiming","musicalScoreForBmson","timingInfoForBmson","barLinesForBmson","songInfoForBmson","lodash_1","BMS","legacy","utils","bmson","version","beatForPulse","initialBPM","info","init_bpm","actions","bpm_events","map","_a","y","bpm","type","beat","stop_events","duration","stopBeats","Math","floor","soundChannelsForBmson","sound_channels","soundChannel","bmsonInfo","title","artist","genre","level","subtitles","chart_name","subtitle","apply","split","getSubtitles","subartists","SongInfo","lines","default","sortBy","options","timing","Timing","timingForBmson","e_1","e_2","_b","nextKeysoundNumber","notes","keysounds","soundChannels","soundChannels_1","soundChannels_1_1","_c","name_1","name","soundChannelNotes","sortedNotes","keysoundNumber","keysoundId","padStart","slices","slicesForNotesAndTiming","sortedNotes_1","sortedNotes_1_1","_d","x","note","column","getColumn","keysound","endBeat","assign","e_2_1","return","e_1_1","notesDataAndKeysoundsDataForBmsonAndTiming","Notes","Keysounds","legacy_1","beatForLoc","resolution","double","e_3","e_4","soundChannels_2","soundChannels_2_1","notes_1","notes_1_1","e_4_1","e_3_1","e_5","e_6","hasKeys","hasSecondPlayer","hasDeluxeKeys","soundChannels_3","soundChannels_3_1","notes_2","notes_2_1","e_6_1","e_5_1","initBPM","bpmNotes","stopNotes","all","Set","play","restart","c","add","lastAdded","Map","soundTime","mustAdd","_e","t","beatToSeconds","has","keysoundEnd","obj","keysoundStart","set"],"sourceRoot":""}