{"version":3,"file":"build/test-0f663210e0a0186afd81.js","mappings":"4EAAA,IAAIA,EAAM,CACT,qCAAsC,MACtC,mCAAoC,MACpC,yCAA0C,MAC1C,wCAAyC,MACzC,iCAAkC,MAClC,+CAAgD,MAChD,6CAA8C,MAC9C,wCAAyC,KACzC,iCAAkC,MAClC,gCAAiC,MACjC,qCAAsC,MACtC,oCAAqC,MACrC,oCAAqC,MACrC,+BAAgC,GAChC,mCAAoC,MACpC,wCAAyC,MACzC,6BAA8B,MAC9B,oCAAqC,MACrC,2BAA4B,KAC5B,wCAAyC,MACzC,oCAAqC,MACrC,oCAAqC,MACrC,+CAAgD,MAChD,mCAAoC,MACpC,6BAA8B,MAC9B,8BAA+B,MAC/B,yBAA0B,MAC1B,gCAAiC,MACjC,2BAA4B,MAC5B,2BAA4B,MAC5B,qCAAsC,MACtC,0BAA2B,MAC3B,kCAAmC,MACnC,gCAAiC,MACjC,0CAA2C,MAC3C,+BAAgC,MAChC,kDAAmD,MACnD,2BAA4B,MAC5B,6BAA8B,IAC9B,6BAA8B,MAC9B,4BAA6B;AAI9B,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF;AAC/B,OAAOG,EAAoBF,EAC5B,CACA,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM;AAEjD,MADAK,EAAEE,KAAO,mBACHF,CACP,CACA,OAAOP,EAAIE,EACZ,CACAD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,EACpB,EACAC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,K;mCC3DhBY,E,MAA0B,GAA4B;AAE1DA,EAAwBC,KAAK,CAACH,EAAOV,GAAI,gXAAiX,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,gDAAgD,MAAQ,GAAG,SAAW,kNAAkN,eAAiB,CAAC,iXAAiX,WAAa,MAE7lC,K,oBCPA,SAASc,EAAoBf,GAC5B,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM;AAEjD,MADAK,EAAEE,KAAO,mBACHF,CACP,CACAU,EAAoBP,KAAO,WAAa,MAAO,EAAI,EACnDO,EAAoBL,QAAUK,EAC9BA,EAAoBd,GAAK,MACzBU,EAAOC,QAAUG,C;;ACWjB,IAAgBC,IAWd,OAVA,IAAqC,kBAApBA,EAAQC,QAAuB,6BAChD,IACkC,iBAAzBD,EAAQE,aACf,iCAEF,IACqC,iBAA5BF,EAAQG,gBACf,oCAEF,IAAqC,iBAApBH,EAAQI,QAAsB,4BAC3CJ,EAAQC,QAsBd,UAAsB,QACpBG,EAAO,gBACPD,EAAe,UACfE,IAMA,MAAMC,EAAiB,EAAIC,KAAKC,IAAIH,GAC9BI,EAAwB,IAAcL,EAAWE,EACjDJ,EAAe,UACnB,UAAQ,EAAG,KAAKpB,KAAK4B,GAAMA,EAAI,MAC9BC,GAAUJ,KAAKC,IAAIL,EAAkBM,EAAuBE;AAE/D,MAAO,CACLC,kBACE,OAAOV,CACT,EACAW,iBAAiBC,GAAgB,UAAEC,EAAS,aAAEC,IAC5CD,EAAUD,GACNA,EAAeG,QAAQ,KAAOf,EAAae,QAAQ,IACrDD,EAAaT,KAAKW,MAAMT,EAAuBK,GAEnD,EAEJ,CA/CWK,CAAa,CAClBhB,gBAAiBH,EAAQG,gBACzBC,QAASJ,EAAQI,QACjBC,UAAWL,EAAQK,WAAa,KAOdH,EAJEF,EAAQE,aAKzB,CACLU,kBACE,OAAOV,CACT,EACAW,iBAAiBC,GAAgB,UAAEC,IACjCA,EAAUD,EACZ;AAPJ,IAAwBZ,CAFvB,C;;;AC9BD,MAEMkB,EAAuC,CAC3CC,IAAMC,IAC+C,EAErDC,UAAYD,IACiD,EAE7DE,YAAa;AAGf,MAAMC,EAAN,cACU,KAAA3C,IAAM,IAAI4C,GAYpB,CAXEC,UAAUC,GACR,OAAOC,KAAK/C,IAAIgD,IAAIF,EACtB,CAEAD,UAAUC,EAAaG,GACrBF,KAAK/C,IAAIkD,IAAIJ,EAAKG,EACpB,CAEAJ,UAAUC,GACRC,KAAK/C,IAAImD,OAAOL,EAClB,EAGF,MAAMM,EAAoB,CACxB,aAAc,2CACd,YAAa,2CAGTC,EAAoB,CACxB,aAAc,2CACd,YAAa;AAGfC,GAAG,uDAAuDT,UACxD,MAAMU,EAAqB,CAAEH,QAAOC,SAC9BG,EAAS,IAAIC;MACbD,EAAOE,UAAUH,SACjBC,EAAOG,YAAWd,MAAOe,IAC7BC,OAAOD,EAAME,mBAAmBC,IAAIC,GAAGC,OAAM,EAAK,UAG9CT,EAAOU,aACPV,EAAOG,YAAWd,MAAOe,IAC7BC,OAAOD,EAAMO,OAAOH,GAAGI,KAAKC,OAAO,EAAE,GACrC,IAGJf,GAAG,0BAA0BT,UAC3B,MAAMU,EAAqB,CAAEH,SACvBI,EAAS,IAAIC;MACbD,EAAOE,UAAUH,SACjBC,EAAOU,aACPV,EAAOG,YAAWd,MAAOe,IAC7BC,OAAOD,EAAMO,OAAOH,GAAGI,KAAKC,OAAO,EAAE,IAGvCd,EAAc,MAAIF,QACZG,EAAOU,aACPV,EAAOG,YAAWd,MAAOe,IAC7BC,OAAOD,EAAMO,OAAOH,GAAGI,KAAKC,OAAO,EAAE,GACrC,IAGJf,GAAG,2BAA2BT,UAC5B,MAAMU,EAAqB,CAAEH,QAAOC,SAC9BG,EAAS,IAAIC;MACbD,EAAOE,UAAUH,SACjBC,EAAOU,aACPV,EAAOG,YAAWd,MAAOe,IAC7BC,OAAOD,EAAMO,OAAOH,GAAGI,KAAKC,OAAO,EAAE,WAGhCd,EAAc,YACfC,EAAOU,aACPV,EAAOG,YAAWd,MAAOe,IAC7BC,OAAOD,EAAMO,OAAOH,GAAGI,KAAKC,OAAO,EAAE,GACrC;AAEJ,MAAMZ,EAGJa,cAFQ,KAAAC,QAAU,IAAI5B,EAGpBI,KAAKwB,QAAU,IAAI5B,CACrB,CAEAE,gBAAgB2B,SACR,QACJzB,KAAKwB,QACLE,EAAoCD,GAExC,CAEA3B,mBACQ,QAAWE,KAAKwB,QAASjC,EACjC,CAEAO,iBAAiB6B,GACf,MAAMd,QAAc,QAAqBb,KAAKwB;AACzCV,OAAOD,GAAOG,IAAIC,GAAGC,WAAMU,SAC1BD,EAAEd,EACV,EAOF,SAASa,EACPD,GAEA,MAAO,CACLI,KAAM,YACNC,gBAAiBhC,SAAY,UAC7B,CAACiC,OAAOC,eAAgBlC,kBACtB,IAAK,MAAOmC,EAAM/B,KAAUtC,OAAOsE,QAAQT,GACpB,iBAAVvB,OACH,CAAC+B,EAAME,EAA+BF,EAAM/B,SAE5C,CAAC+B,EAAMP,EAAoCxB,GAGvD,EACAkC,mBAAoBtC,MAAOmC,IACzBnB,OAAOW,EAAKQ,IAAOhB,GAAGoB,GAAGC,GAAG,UACrBZ,EAAoCD,EAAKQ,KAElDM,cAAezC,MAAOmC,IACpBnB,OAAOW,EAAKQ,IAAOhB,GAAGoB,GAAGG,EAAE,UACpBL,EAA+BF,EAAMR,EAAKQ,KAGvD,CAEA,SAASE,EACPF,EACAR,GAEA,MAAO,CACLI,KAAM,OACNC,gBAAiBhC,SAAY,UAC7B2C,QAAS3C,UACP,MAAM4C,EAAO,IAAIC,KAAK,CAAClB,GAAO,CAAEmB,KAAM;AACtC,OAAOhF,OAAOiF,OAAOH,EAAM,CACzBT,OACAa,aAAc,GACd,EAGR,C;;;AC5JO,MAAMC,E,MAAM;AAMZ,SAASC,EAAUtF,EAAMS,EAAU,CAAC,GACzC,OAAO,IAAA8E,cALF,SAAevF,EAAO,IAC3B,OAAO,mBAAqBA,GAAMwF,KACpC,CAGsBA,CAAMxF,GAAOS,EACnC,CAEO,SAASgF,EAAczF,EAAMS,EAAU,CAAC,GAC7C,OAAO,IAAI,IAAO6E,EAAUtF,EAAMS,GAAU,EAAGA,EACjD,C;;;ACfAiF,SAAS,yBAAyB,KAChC7C,GAAG,mBAAmB,KACpBO,QAAO,QAAsB,mBAAmBG,GAAGC,MACjD,4BACD,IAEHX,GAAG,yBAAyB,KAC1BO,QAAO,QAAsB,wBAAwBG,GAAGC,MACtD,gCACD,IAEHX,GAAG,2BAA2B,KAC5BO,QAAO,QAAsB,uBAAuBG,GAAGC,MACrD,gCACD,IAEHX,GAAG,+BAA+B,KAChCO,QAAO,QAAsB,8BAA8BG,GAAGC,MAC5D,4BACD,GACD,G;;;ACnBJkC,SAAS,eAAe,KACtB7C,GAAG,uBAAuBT,UACxB,MAAMuD,QAAoB,OACxB,EAAQ,QACRC,GAAG,eACCC,QAAgB,OAAU,IAAIC,aAAgBH;AACpDvC,OAAOyC,EAAQE,UAAUxC,GAAGyC,QAAQ,mBAAqB,KAAM,GAC/D,G;;;uICCAvF,EAAU,CAAC;AAEfA,EAAQwF,kBAAoB,IAC5BxF,EAAQyF,cAAgB,IAElBzF,EAAQ0F,OAAS,SAAc,KAAM,QAE3C1F,EAAQ2F,OAAS,IACjB3F,EAAQ4F,mBAAqB;AAEhB,IAAI,IAAS5F;AAA1B,IAKO,EAAe,KAAW,WAAiB,gBAAiByD,ECf/D,EAAU,CAAC;AAEf,EAAQ+B,kBAAoB,IAC5B,EAAQC,cAAgB,IAElB,EAAQC,OAAS,SAAc,KAAM,QAE3C,EAAQC,OAAS,IACjB,EAAQC,mBAAqB;AAEhB,IAAI,EAAS,GAKJ,GAAW,UAAiB;ACjBlD,MATO,WACL,MAAMvC,EAAU;AAChB,IAAK,MAAMzB,KAAOyB,EAAQ7D,OACxByF,SAASrD,GAAK,KACZyB,EAAQzB,EAAI,GAGlB,E;ACMA,MARO,WACLiE,MAAMC,MAAM,OACZC,EAAA,OAAS,KACTA,EAAA,OAAS,KACT,EAAAC,EAAOrD,OAASoD,EAAA,UAChB,EAAAC,EAAOC,MAAQ,IACjB;ACAO,SAASC,KAOhB,WACE,MAAMC,EAAeC,SAASC,cAAc;AAC5CF,EAAalH,GAAK,QAClBmH,SAASE,KAAKC,YAAYJ,EAC5B,CAVEK,GACA,IACA,IAUF,WACE,MAAMC,EAAQ;AACdZ,MACGa,MACAC,GAAG,YAAY,SAA0BC,GACpCA,EAAKC,MACPC,QAAQzF,IACN,6BACA,sCACA,2CACAuF,EAAKG,MACL,wCACAH,EAAKC,IAAIG,SAEXF,QAAQG,MAAML,EAAKC,IAAIK,OAE3B,IACCP,GAAG,YAAY,SAAUC,GACL,WAAfA,EAAKlE,MACP+D,EAAM3G,KAAK,CACTqH,SAAUP,EAAKG,MACfK,OAAQ,WAEDR,EAAKS,QACdZ,EAAM3G,KAAK,CACTqH,SAAUP,EAAKG,MACfK,OAAQ,YAGVX,EAAM3G,KAAK,CACTqH,SAAUP,EAAKG,MACfK,OAAQ,SACRE,mBAAoB,CAClB,CAAEN,QAASJ,EAAKC,IAAIG,QAASE,MAAON,EAAKC,IAAIK,SAIrD,IACCP,GAAG,aAAa,SAAUY,GACrBA,EAAMC,OACJf,EAAMgB,MAAMC,GAAyB,WAAhBA,EAAKN,SAC5BhB,SAASuB,gBAAgBC,UAAUC,IAAI,oBAEvCzB,SAASuB,gBAAgBC,UAAUC,IAAI,oBAG7C,GACJ,CAxDEC,EACF,C;;;ACXA7C,SAAS,eAAe,WACtB7C,GAAG,kCAAkC,KACnC,QAAM,MACH2F,KAAK,KAAyB,yBAC9BC,IAAI,KAA4B,uBAAwB,CAAEtH,EAAG,KAC7DuH,KACC,KAA+B,wBAC/B,MACA,SAAY,MAElB7F,GAAG,uBAAuB,KACxB,QAAM,MACH2F,KAAK,KAAyB,yBAC9BC,IAAI,KAAyB,uBAAwB,IAAI1I,MAAM,WAC/D2I,KACC,KAA+B,wBAC/B,MACA,SAAY,KAjBI,G;;;ACDxBhD,SAAS,aAAa,WACpB7C,GAAG,iCAAiC,KAClC,QAAM,QAAyB6F,KAAK,MAAqB,SAAY,MACvE7F,GAAG,mDAAmD,KACpD,QAAM,QACH2F,KAAK,KAA4B,KACjCE,KAAK,MAAuB,SAAY,IACxCD,IAAI,MAAiB,QAAY,OACtC5F,GAAG,6CAA6C,KAC9C,QAAM,QACH2F,KAAK,KAA0B,IAAIzI,MAAM,OACzC2I,KAAK,MAAuB,SAAY,IACxCD,IAAI,MAAmB,SAAY,IACnCA,IAAI,KAAiBE,GAAc,QAAY,OAbhC;AAgBtB,MAAMA,EAAgBjB,GAAUA,EAAMD,O;;;ACjBtC/B,SAAS,mBAAmB,WAC1B7C,GAAG,sBAAsB,KACvB,QAAM,MACH6F,KAAK,MAA4B,QAAY,KAC7CD,IAAI,MAA2B,QAAY,OAEhD5F,GAAG,oCAAoC,KACrC,QAAM,MACH2F,KAAK,KAA+B,UACpCE,KAAK,MAA4B,QAAY,KAC7CD,IAAI,MAA2B,QAAY,YAEhD5F,GAAG,sDAAsD,KACvD,QAAM,MACH4F,IAAI,KAA+B,UACnCD,KAAK,MACLE,KAAK,MAA4B,QAAY,UAC7CD,IAAI,MAA2B,QAAY,YAEhD5F,GAAG,4CAA4C,KAC7C,QAAM,MACH2F,KAAK,KAAwB,SAC7BE,KAAK,MAA4B,QAAY,SAC7CD,IAAI,MAA2B,QAAY,UAvBtB,G;;;ACA5B/C,SAAS,kBAAkB,WACzB7C,GAAG,yBAAyB,KAC1B,QAAM,MACH2F,KAAK,KAA0B,UAC/BE,KACC,KAAsC,CACpC,CAAEhJ,GAAI,QAAS8H,MAAO,QACtB,CAAE9H,GAAI,QAAS8H,MAAO,iBAExB,QAAY,CAAE9H,GAAI,QAAS8H,MAAO,kBAExC3E,GAAG,sDAAsD,KACvD,QAAM,MACH2F,KAAK,KAA0B,UAC/BE,KACC,KAAsC,CACpC,CAAEhJ,GAAI,QAAS8H,MAAO,QACtB,CAAE9H,GAAI,QAAS8H,MAAO,kBAExB,QAAY,CAAE9H,GAAI,QAAS8H,MAAO,YAExC3E,GAAG,gCAAgC,KACjC,QAAM,MACH2F,KAAK,KAA2B,QAAS,aAAc,IACvDE,MAAMvF,GAAUA,EAAMyF,iBAAgB,QAAY,UAClDH,KAAKtF,GAAUA,EAAM0F,kBAAiB,QAAY,eAClDJ,KAAKtF,GAAUA,EAAM2F,qBAAoB,QAAY;AAE1D,MAAMC,GAAqB,QAAM,MAA6BN,IAC5D,KAA2B,QAAS,aAAc;AAEpD5F,GAAG,kCAAkC,IACnCkG,EAAmBL,KACjB,KAAwC,CACtC,CAAEM,KAAM,aAAcC,KAAM,CAAEC,MAAO,IACrC,CAAEF,KAAM,aAAcC,KAAM,CAAEC,MAAO,IACrC,CAAEF,KAAM,aAAcC,KAAM,CAAEC,MAAO,QAEvC,QAAY,CAAEF,KAAM,aAAcC,KAAM,CAAEC,MAAO,QAErDrG,GAAG,oEAAoE,IACrEkG,EAAmBL,KACjB,KAAwC,CACtC,CAAEM,KAAM,eAAgBC,KAAM,CAAEC,MAAO,IACvC,CAAEF,KAAM,eAAgBC,KAAM,CAAEC,MAAO,IACvC,CAAEF,KAAM,eAAgBC,KAAM,CAAEC,MAAO,QAEzC,QAAY,CAAEF,KAAM,eAAgBC,KAAM,CAAEC,MAAO,OA/C9B,G;;8CCH3B;AAAA;AAMA,MAAMC,EAAUC,GAAYjG,GAC1B,uBAA6BA,EAAOiG,GAChCC,EAAU;AAEhB3D,SAAS,WAAW,KAiLlB,SAAS4D,GAAe,MAAEC,EAAF,OAASC,EAAT,eAAiBC,IACvC5G,GAAG,eAAiB4G,GAAgB,MAClC,QAAM,gBAAsBf,KAAKa,GAAO,QAAYE,GAApD,IAEF5G,GAAG,kBAAkB,MACnB,QAAM,gBACH2F,KAAKgB,GACLd,KAAKa,GAAO,SAAaE,GAF5B,IAIF5G,GAAG,wBAAwB,MACzB,QAAM,gBACH2F,KAAKgB,GACLf,IAAIe,GACJd,KAAKa,GAAO,QAAYE,GAH3B,GAVqD,CAhLzD/D,SAAS,cAAc,KACrB7C,GAAG,sBAAsB,KAChB;AAAP,IAAO,gBAAuD,IAAvD,oDAAQ/B,UAAR,EAAkB,OAAE,uBAAwB,KAA1B,iCAAlB,oJAAP,IAEF+B,GAAG,yBAAyB,KACnB;AAAP,IAAO,gBAAwD,KAAxD,oDAAQ/B,UAAR,EAAkB,OAAE,uBAAwB,MAA1B,iCAAlB,uJAAP,IAEF+B,GAAG,0BAA0B,KACpB;AAAP,IAAO,oEAAQ/B,UAAR,EAAkB,OAAE,uBAAwB,OAA1B,iCAAlB,wBAAyD,OAAC,GAAD,qBAAzD,qIAAP,GADF,IAKF4E,SAAS,cAAc,KACrB7C,GAAG,sBAAsB,MACvB,QAAM,gBACH2F,KACCW,EACEE,EAAQK,mBAAmB,CAAEC,KAAM,KAAMtH,IAAK,IAAKuH,QAAS,SAG/DlB,KAAK,gBAAsB,KAAM,MAAM,QAAY,MANtD,IAQF7F,GAAG,+CAA+C,MAChD,QAAM,gBACH2F,KAAKW,EAAOE,EAAQQ,iBAAiB,CAAEF,KAAM,SAC7CjB,KAAK,mBAA0BoB,IACvB;AAAP,IAAO,gBAAiB,OAAjB,gBAAAA,EAAA,2BAAQ,GAAR,iHAAP,KAGJ,QAAM,gBACHtB,KAAKW,EAAOE,EAAQQ,iBAAiB,CAAEF,KAAM,SAC7CjB,KAAK,mBAA0BoB,IACvB;AAAP,IAAO,gBAAiB,OAAjB,gBAAAA,EAAA,2BAAQ,GAAR,iHAAP,GAHJ,IAMFpE,SAAS,+CAA+C,KACtD7C,GAAG,YAAY,KACN,YACA;AADP,IAAO,gBAAwC,QAAxC,oDAAQkH,cAAc,KAAM,QAA5B,0IACP,IAAO,gBAAyC,QAAzC,oDAAQA,cAAc,KAAM,SAA5B,0IAAP,IAEFlH,GAAG,SAAS,KACH,YACA,QACA;AAFP,IAAO,gBAAuC,MAAvC,oDAAQkH,cAAc,IAAK,QAA3B,uIACP,IAAO,gBAAwC,MAAxC,oDAAQA,cAAc,IAAK,SAA3B,wIACP,IAAO,gBAAsC,MAAtC,oDAAQA,cAAc,IAAK,OAA3B,qIAAP,IAEFlH,GAAG,iCAAiC,KAC3B,YACA;AADP,IAAO,gBAAsC,OAAtC,oDAAQkH,cAAc,IAAK,OAA3B,uIACP,IAAO,gBAAuC,OAAvC,oDAAQA,cAAc,IAAK,QAA3B,uIAAP,IAEFlH,GAAG,0BAA0B,KACpB;AAAP,IAAO,gBAAwC,OAAxC,oDAAQkH,cAAc,IAAK,SAA3B,wIAAP,IAEFlH,GAAG,8BAA8B,KACxB;AAAP,IAAO,gBAA0C,OAA1C,oDAAQkH,cAAc,MAAO,SAA7B,0IAAP,IAEFlH,GAAG,0BAA0B,KACpB;AAAP,IAAO,gBAAyC,MAAzC,oDAAQkH,cAAc,MAAO,QAA7B,wIAAP,GADF,GApBF,IA0BFrE,SAAS,SAAS,KAChB7C,GAAG,sBAAsB,MACvB,QAAM,gBACH2F,KAAKW,EAAOE,EAAQW,aAAa,CAAE5I,MAAO,QAC1CsH,KAAK,SAAe,QAAY,KAFnC,GADF,IAOFhD,SAAS,aAAa,KACpB7C,GAAG,mDAAmD,MACpD,QAAM,gBAAsB6F,KAAK,YAAkB,QAAY,MAA/D,GADF,IAKFhD,SAAS,oBAAoB,KAC3B7C,GAAG,oCAAoC,MACrC,QAAM,gBACH2F,KAAKW,EAAOE,EAAQY,wBAAwB,CAAEC,SAAU,UACxDxB,KAAK,mBAAyB,QAAY,QAC1CD,KAAKtF,IACG;AAAP,IAAO,gBAA4B,OAA5B,gBAAAA,EAAA,2BAAM,kBAAN,4HAAP,GAJJ,IAOFN,GAAG,8BAA8B,MAC/B,QAAM,gBACH2F,KAAKW,EAAOE,EAAQY,wBAAwB,CAAEC,SAAU,YACxDxB,KAAK,mBAAyB,QAAY,UAC1CD,KAAKtF,IACG;AAAP,IAAO,gBAA4B,OAA5B,gBAAAA,EAAA,2BAAM,kBAAN,6HAAP,GAJJ,IAOFN,GAAG,4DAA4D,MAC7D,QAAM,gBACH2F,KAAKW,EAAOE,EAAQY,wBAAwB,CAAEC,SAAU,YACxDzB,IAAIU,EAAOE,EAAQY,wBAAwB,CAAEC,SAAU,UACvDxB,KAAK,mBAAyB,QAAY,QAC1CD,KAAKtF,IACG,YACA;AADP,IAAO,gBAA4B,OAA5B,gBAAAA,EAAA,2BAAM,kBAAN,8HACP,IAAO,gBAA+B,UAA/B,gBAAAA,EAAA,2BAAM,qBAAN,mIAAP,GANJ,GADF,IAYFuC,SAAS,yBAAyB,KAChC4D,EAAe,CACbC,MAAO,gCACPC,OAAQL,EAAOE,EAAQc,gCACvBV,gBAAgB,GAHlB,IAOF/D,SAAS,iBAAiB,KACxB4D,EAAe,CACbC,MAAO,wBACPC,OAAQL,EAAOE,EAAQe,wBACvBX,gBAAgB,GAHlB,IAOF/D,SAAS,gBAAgB,KACvB4D,EAAe,CACbC,MAAO,iBACPC,OAAQL,EAAOE,EAAQgB,gBACvBZ,gBAAgB,GAHlB,IAOF/D,SAAS,6BAA6B,KACpC7C,GAAG,oCAAoC,MACrC,QAAM,gBAAsB6F,KAC1B,kBAAwB,YACxB,SAAY,GAFd,IAKF7F,GAAG,mCAAmC,MACpC,QAAM,gBACH2F,KAAKW,EAAOE,EAAQiB,YAAY,CAAEC,WAAY,cAC9C7B,KAAK,kBAAwB,YAAY,SAAY,GAFxD,GADF,IAOFhD,SAAS,sBAAsB,KAC7B7C,GAAG,iBAAiB,MAClB,QAAM,gBAAsB6F,KAC1B,qBACA,QAAY,GAFd,IAKF7F,GAAG,mBAAmB,MACpB,QAAM,gBACH2F,KACCW,EACEE,EAAQmB,2BAA2B,CACjCC,QAAS,OAId/B,KAAK,qBAA2B,QAAY,IAR/C,GADF,IAaFhD,SAAS,qBAAqB,KAC5B7C,GAAG,gEAAgE,MACjE,QAAM,gBACH2F,KACCW,EACEE,EAAQqB,yBAAyB,CAC/BC,WAAY,WAIjBjC,KAAK,mBAAyB,QAAY,QAR7C,GADF,GAauD,G;;mCC3L3D;AAAA;AAIAhD,SAAS,sBAAsB,WAC7BA,SAAS,iBAAiB,WACxB7C,GAAG,wCAAwC,KAOlC;AANP,MAAMjB,GAAe,OAAmB,CACtClB,SAAS,EACTC,aAAc,IACdC,gBAAiB,IACjBC,QAAS;AAEX,IAAO,gBAAmC,MAAnC,gBAAAe,EAAA,kCAAaP,kBAAb,6IAAP,IAEFwB,GAAG,wCAAwC,KAUlC,YACA;AAVP,MAAMjB,GAAe,OAAmB,CACtClB,SAAS,EACTC,aAAc,IACdC,gBAAiB,IACjBC,QAAS,MAELW,EAAYkF,MAAMkE,MAClBnJ,EAAeiF,MAAMkE;AAC3BhJ,EAAaN,iBAAiB,IAAK,CAAEE,YAAWC,iBAChD,IAAO,wBAAAD,EAAA,6BAAUqJ,WAAW,KAArB,6GACP,IAAO,mBAAC,MAAD,EAAC,MAAApJ,EAAA,+BAAaqJ,OAAb,wBAAD,uGAAP,GArBsB,IAyB1BpF,SAAS,gBAAgB,WACvB7C,GAAG,2CAA2C,KAOrC;AANP,MAAMjB,GAAe,OAAmB,CACtClB,SAAS,EACTC,aAAc,IACdC,gBAAiB,KACjBC,QAAS;AAEX,IAAO,gBAAmC,MAAnC,gBAAAe,EAAA,kCAAaP,kBAAb,6IAAP,IAEFwB,GAAG,sDAAsD,KAQhD;AAPP,MAAMjB,GAAe,OAAmB,CACtClB,SAAS,EACTC,aAAc,IACdC,gBAAiB,KACjBC,QAAS,IACTC,UAAW;AAEb,IAAO,gBAAmC,KAAnC,gBAAAc,EAAA,kCAAaP,kBAAb,6IAAP,IAEFwB,GAAG,sDAAsD,KAQhD;AAPP,MAAMjB,GAAe,OAAmB,CACtClB,SAAS,EACTC,aAAc,IACdC,gBAAiB,KACjBC,QAAS,IACTC,WAAY;AAEd,IAAO,gBAAmC,KAAnC,gBAAAc,EAAA,kCAAaP,kBAAb,6IAAP,IAEFwB,GAAG,qDAAqD,KAO/C;AANP,MAAMjB,GAAe,OAAmB,CACtClB,SAAS,EACTC,aAAc,IACdC,gBAAiB,IACjBC,QAAS;AAEX,IAAO,gBAAmC,MAAnC,gBAAAe,EAAA,kCAAaP,kBAAb,6IAAP,IAEFwB,GAAG,sDAAsD,KAOhD;AANP,MAAMjB,GAAe,OAAmB,CACtClB,SAAS,EACTC,aAAc,IACdC,gBAAiB,KACjBC,QAAS;AAEX,IAAO,gBAAmC,IAAnC,gBAAAe,EAAA,kCAAaP,kBAAb,6IAAP,IAEFwB,GAAG,sDAAsD,KAUhD,YACA;AAVP,MAAMjB,GAAe,OAAmB,CACtClB,SAAS,EACTC,aAAc,IACdC,gBAAiB,KACjBC,QAAS,MAELW,EAAYkF,MAAMkE,MAClBnJ,EAAeiF,MAAMkE;AAC3BhJ,EAAaN,iBAAiB,EAAG,CAAEE,YAAWC,iBAC9C,IAAO,wBAAAD,EAAA,6BAAUqJ,WAAW,GAArB,2GACP,IAAO,wBAAApJ,EAAA,6BAAaoJ,WAAW,KAAxB,+GAAP,IAEFhI,GAAG,6CAA6C,KAUvC,YACA;AAVP,MAAMjB,GAAe,OAAmB,CACtClB,SAAS,EACTC,aAAc,IACdC,gBAAiB,KACjBC,QAAS,MAELW,EAAYkF,MAAMkE,MAClBnJ,EAAeiF,MAAMkE;AAC3BhJ,EAAaN,iBAAiB,EAAG,CAAEE,YAAWC,iBAC9C,IAAO,wBAAAD,EAAA,6BAAUqJ,WAAW,GAArB,4GACP,IAAO,mBAAC,MAAD,EAAC,MAAApJ,EAAA,+BAAaqJ,OAAb,wBAAD,wGAAP,GAxEqB,GA1BI,G;;mCCJ/B;AAAA;AAIApF,SAAS,6BAA6B,WAGpC,MAAMhC,EAAQ,CACZ,gBACA,oBACA,UACA,gBACA,WAEIqH,EAAYC,GAASA;AAE3BnI,GAAG,yBAAyB,KAExB;AADF,IACE,gBACE,kBADF,kBAAiB,OAAEa,QAAOqH,WAAUvD,MAAO,iBAA1B,iCAAjB,kLADF,IAMF3E,GAAG,8BAA8B,KAE7B;AADF,IACE,gBACE,sBADF,kBAAiB,OAAEa,QAAOqH,WAAUvD,MAAO,qBAA1B,iCAAjB,0LADF,GApBkC,G;;mCCJtC;AAAA;AAIA9B,SAAS,yBAAyB,WAChC,MAAMuF,EAAsB,CAAC,GAAI;AACjCpI,GAAG,4BAA4B,KACtB;AAAP,IAAO,gBAA8C,IAA9C,kBAAY,OAAC,MAAD,gCAAZ,EAAqB,MAAAoI,EAAA,iCAArB,8IAAP,IAEFpI,GAAG,mBAAmB,KACb;AAAP,IAAO,gBAA6C,IAA7C,kBAAY,OAAC,KAAD,gCAAZ,EAAoB,MAAAoI,EAAA,iCAApB,8IAAP,IAEFpI,GAAG,oBAAoB,KACd;AAAP,IAAO,gBAA6C,IAA7C,kBAAY,OAAC,KAAD,gCAAZ,EAAoB,MAAAoI,EAAA,iCAApB,8IAAP,IAEFpI,GAAG,mBAAmB,KACb;AAAP,IAAO,gBAA+D,IAA/D,kBAAY,OAAC,IAAM,IAAM,IAAM,KAAnB,gCAAZ,EAAsC,MAAAoI,EAAA,iCAAtC,6JAAP,IAEFpI,GAAG,kCAAkC,KAC5B;AAAP,IAAO,gBAAoD,IAApD,kBAAY,OAAC,IAAM,IAAM,IAAM,KAAnB,gCAAZ,EAAsC,OAAC,GAAI,IAAL,iCAAtC,iJAAP,GAf8B,G;;;ACKlC6C,SAAS,cAAc,WACrBA,SAAS,oBAAoB,WAC3B,MAAMwF,GAAQ;AACdA,EAAMC,SACJ,sCAAkD,CAChDC,IAAK,YAGTF,EAAMC,SACJ,EAAAE,aAAA,4BAAyC,CACvC5K,QAAS,CACP,iBAAkB,KAClB,oBAAqB,WAI3ByK,EAAMC,SACJ,+BAA2C,CACzCC,IAAK,SACLrH,KAAM,CACJL,MAAO,CACL,CACE8D,MAAO,UACP9H,GAAI,UACJ4L,OAAQ,CACN,CACErL,KAAM,KACN+I,KAAM,uBACNC,KAAM,CAAEC,MAAO,KAEjB,CACEjJ,KAAM,KACN+I,KAAM,qBACNC,KAAM,CAAEC,MAAO,KAEjB,CACEjJ,KAAM,KACN+I,KAAM,sBACNC,KAAM,CAAEC,MAAO,MAIrB,CACE1B,MAAO,YACP9H,GAAI,YACJ4L,OAAQ,CACN,CACErL,KAAM,KACN+I,KAAM,qBACNC,KAAM,CAAEC,MAAO,IAEjB,CACEjJ,KAAM,KACN+I,KAAM,sBACNC,KAAM,CAAEC,MAAO,MAIrB,CACE1B,MAAO,WACP9H,GAAI,WACJ4L,OAAQ,CACN,CACErL,KAAM,KACN+I,KAAM,kCACNC,KAAM,CAAEC,MAAO,KAEjB,CACEjJ,KAAM,KACN+I,KAAM,kCACNC,KAAM,CAAEC,MAAO,YAS7BrG,GAAG,mDAAmD,KACpD,MAAMM,EAAQ+H,EAAMK;AACpBnI,QAAO,QAAmBD,GAAOqE,OAAOjE,GAAGC,MAAM,aACjDJ,QAAO,QAAoBD,GAAO6F,MAAMzF,GAAGC,MAAM,sBAAjD,GAjFyB,GADR,G;;;ACPvBkC,SAAS,cAAc,WACrB,SAAS8F,EAAOzJ,GACd,OAAO0J,QAAQtL,QAAQuL,EAAOC,KAAK5J,GAAMyJ,OADvB,CAIpB,SAASI,EAAgBC,GACvB,MAAO,CACLC,SAAUL,QAAQtL,QAAQD,OAAOD,KAAK4L,IACtC7C,KAAKzE,GACH,OAAOkH,QAAQtL,QAAQ0L,EAAMtH,GADtB,EAHiB,CAS9BmB,SAAS,kBAAkB,WACzB,MAAMqG,EAAYH,EAAgB,CAChC,SAAU,CACRI,OACE,OAAOR,EAAO,2CADZ,GAIN,SAAU,CACRQ,OACE,OAAOR,EAAO,0CADZ,GAIN,SAAU,CACRQ,OACE,OAAOR,EAAO,6CADZ;AAKR,IAAIR;AACJiB,QAAO7J,iBACL,MAAM3B,EAAU,CAAEyL,UAAYC,GAAQ5E,QAAQzF,IAAIqK,IAC5ChL,QAAU,OAAsB4K,EAAWtL;AACjDuK,EAAO7J,CAHG,IAKZ0B,GAAG,6BAA6B,WAC9BO,OAAO4H,EAAKxD,OAAOjE,GAAGC,MAAM,OADE,IAGhCX,GAAG,wCAAwC,WACzCO,OAAO4H,EAAKM,QAAQ/H,GAAGI,KAAKC,OAAO,EADM,IAG3Cf,GAAG,uDAAuD,WACxDO,OAAO4H,EAAKe,WAAWxI,GAAGC,MAAMuI,EADwB,GA9BjC,IAmC3BrG,SAAS,oBAAoB,WAC3B,MAAMqG,EAAYH,EAAgB,CAChC,WAAY,CACVI,OACE,OAAOR,EAAO,yCADZ;AAKR,IAAIR;AACJiB,QAAO7J,iBACL,MAAMjB,QAAU,OAAsB4K;AACtCf,EAAO7J,CAFG,IAIZ0B,GAAG,6BAA6B,WAC9BO,OAAO4H,EAAKxD,OAAOjE,GAAGC,MAAM,OADE,IAGhCX,GAAG,wCAAwC,WACzCO,OAAO4H,EAAKM,QAAQ/H,GAAGI,KAAKC,OAAO,EADM,GAhBhB,GAjDR,G;;;ACCvB8B,SAAS,eAAe,WACtB,IAAI0G,EACAC,EACAC;AAEJ,SAAS/F,EAAMgG,GACbH,EAASG,EACTD,EAAc,CACZE,SAAU9F,MAAM+F,OAAOC,QAAQ,CAAC,GAChCC,SAAUjG,MAAM+F,OAAOC,QAAQ,CAAC,GAChCE,SAAUlG,MAAM+F,OAAOC,QAAQ,CAAC,IAElCL,EAAQ,IAAI,IAAY,CAAED,SAAQE,eAPd,CAUtBzJ,GAAG,6CAA6C,WAC9C0D,EAAM,CACJjB,UAAW,CACTuH,MAAO,CACL,CAAEC,KAAM,EAAGC,SAAU,MACrB,CAAED,KAAM,EAAGC,SAAU,MACrB,CAAED,KAAM,EAAGC,SAAU,OAEvBC,MAAO,IAETvM,QAAS,CACPwM,WAAW,KAGfZ,EAAMlD,OAAO,GACb/F,OAAOkJ,EAAYE,UAAUjJ,GAAGI,KAAKuJ,UAAU,GAC/Cb,EAAMlD,OAAO,GACb/F,OAAOkJ,EAAYE,UAAUjJ,GAAGI,KAAKuJ,UAAU,GAC/C9J,OAAOkJ,EAAYE,UAAUjJ,GAAGI,KAAKwJ,KAAKC,gBAAgB,CACxDL,SAAU,OAEZV,EAAMlD,OAAO,GACb/F,OAAOkJ,EAAYE,UAAUjJ,GAAGI,KAAKuJ,UAAU,EAtBD,IAyBhDrK,GAAG,wDAAwD,WACzD0D,EAAM,CACJjB,UAAW,CACTuH,MAAO,GACPG,MAAO,CAAC,CAAEF,KAAM,EAAGC,SAAU,QAE/BtM,QAAS,CACPwM,WAAW,KAGfZ,EAAMlD,OAAO,GACb/F,OAAOkJ,EAAYK,UAAUpJ,GAAGI,KAAKwJ,KAAKC,gBAAgB,CACxDL,SAAU,MAZ6C,IAgB3DlK,GAAG,6DAA6D,WAC9D0D,EAAM,CACJjB,UAAW,CACTuH,MAAO,GACPG,MAAO,CAAC,CAAEF,KAAM,EAAGC,SAAU,QAE/BtM,QAAS,CAAC,IAEZ4L,EAAMlD,OAAO,GACR/F,OAAOkJ,EAAYK,UAAUpJ,GAAGD,IAAIK,KAAKwJ,KAAKrC,MATW,IAYhEjI,GAAG,mCAAmC,WACpC0D,EAAM,CACJjB,UAAW,CACTuH,MAAO,CAAC,CAAEC,KAAM,EAAGC,SAAU,OAC7BC,MAAO,IAETvM,QAAS,CAAC,IAEZ4L,EAAMlD,OAAO,MACb/F,OAAOkJ,EAAYE,UAAUjJ,GAAGI,KAAKwJ,KAAKC,gBAAgB,CACxDL,SAAU,OAEZ3J,OAAOkJ,EAAYE,SAASa,QAAQ,GAAGC,KAAK,IAAI/J,GAAGoB,GAAGqB,QAAQ,KAAO,KAZjC,IAetCnD,GAAG,yBAAyB,WAC1B0D,GAAM,WACN8F,EAAMlD,OAAO,KAAO,CAClBoE,cAAe,CACbC,OAAQ,CAAC,CAAEC,KAAM,CAAEV,SAAU,MAAQ7H,KAAM,MAAOwI,SAAU,KAE9DC,MAAO,CAAC,IAEVvK,OAAOkJ,EAAYK,UAAUpJ,GAAGI,KAAKwJ,KAAKC,gBAAgB,CACxDL,SAAU,MATc,IAa5BlK,GAAG,yCAAyC,WAC1C0D,GAAM;AACN,MAAMqH,EAAW,CACfC,IAAKnH,MAAM+F;AAEbH,EAAYK,SAASD,QAAQkB,GAC7BvB,EAAMlD,OAAO,KAAO,CAClBoE,cAAe,CACbC,OAAQ,CAAC,CAAEC,KAAM,CAAEV,SAAU,MAAQ7H,KAAM,MAAOwI,SAAU,KAE9DC,MAAO,CAAC,IAELvK,OAAOwK,EAASC,KAAKtK,GAAGI,KAAKwJ,KAAKrC,MAZG,IAe5CjI,GAAG,kCAAkC,WACnC0D,GAAM,WACN+F,EAAYK,SAASD,QAAQ,MAC7BL,EAAMlD,OAAO,KAAO,CAClBoE,cAAe,CACbC,OAAQ,CAAC,CAAEC,KAAM,CAAEV,SAAU,MAAQ7H,KAAM,MAAOwI,SAAU,KAE9DC,MAAO,CAAC,GAPyB,IAWrC9K,GAAG,iCAAiC,WAClC0D,GAAM;AACN,MAAMkH,EAAO,CAAEV,SAAU,MACnBa,EAAW,CAAEE,KAAMpH,MAAMkE;AAC/B0B,EAAYK,SAASD,QAAQkB,GAC7BvB,EAAMlD,OAAO,KAAO,CAClBoE,cAAe,CACbC,OAAQ,CAAC,CAAEC,KAAMA,EAAMvI,KAAM,SAE/ByI,MAAO,CAAC,IAEVtB,EAAMlD,OAAO,IAAK,CAChBoE,cAAe,CACbC,OAAQ,CAAC,CAAEC,KAAMA,EAAMvI,KAAM,WAE/ByI,MAAO,CAAC,IAELvK,OAAOwK,EAASE,MAAMvK,GAAGI,KAAKwJ,KAAKrC,MAjBN,IAoBpCjI,GAAG,+CAA+C,WAChD0D,GAAM,WACN8F,EAAMlD,OAAO,KAAO,CAClBoE,cAAe,CACbC,OAAQ,CAAC,CAAEC,KAAM,CAAEV,SAAU,MAAQ7H,KAAM,UAE7CyI,MAAO,CAAC,IAEVvK,OAAOkJ,EAAYM,UAAUrJ,GAAGI,KAAKwJ,KAAKC,gBAAgB,CACxDL,SAAU,MAToC,IAalDlK,GAAG,6BAA6B,WAC9B0D,GAAM;AACN,MAAMkH,EAAO,CAAEV,SAAU;AACzBV,EAAMlD,OAAO,KAAO,CAClBoE,cAAe,CACbC,OAAQ,CAAC,CAAEC,KAAMA,EAAMvI,KAAM,SAE/ByI,MAAO,CAAC,IAEVtB,EAAMlD,OAAO,EAAK,CAChBoE,cAAe,CACbC,OAAQ,CAAC,CAAEC,KAAMA,EAAMvI,KAAM,SAE/ByI,MAAO,CAAC,IAEVvK,OAAOkJ,EAAYK,UAAUpJ,GAAGI,KAAKuJ,UAAU,EAfjB,GA3JV,G;;;ACCxB,SAASa,EAAErO,GACT,MAAO,CAAEqN,SAAUrN,EADR,CAIbgG,SAAS,eAAe,WACtB,IAAIsI,EACAC,EACAC,EACA3O,EACA+M;AACJ6B,YAAW,WACTH,EAAS,CAAEI,MAAO1H,MAAM+F,QACxBwB,EAAS,CAAEI,KAAM3H,MAAM+F,QACvByB,EAAU,CAAE,UAAWD,GACvB1O,EAAM,CAAE,KAAM,WACd+M,EAAc,IAAI,IAAY0B,EAAQE,EAAS3O,EALtC,IAOXmG,SAAS,YAAY,WACnB7C,GAAG,+BAA+B,WAChCyJ,EAAYE,SAASuB,EAAE,MAAO,IAC9B3K,OAAO6K,EAAOI,MAAM9K,GAAGI,KAAKwJ,KAAKtC,WAAW,GAFZ,GADf,IAMrBnF,SAAS,YAAY,WACnB7C,GAAG,4BAA4B,WAC7ByJ,EAAYK,SAASoB,EAAE,MAAO,IAC9B3K,OAAO6K,EAAOI,MAAM9K,GAAGI,KAAKwJ,KAAKtC,WAAW,GAFf,IAI/BhI,GAAG,yBAAyB,WAC1B,MAAM+K,EAAW,CAAEE,KAAMpH,MAAMkE;AAI/B,OAHAqD,EAAOI,KAAK3B,QAAQkB,GACpBtB,EAAYK,SAASoB,EAAE,MAAO,GAC9BzB,EAAYK,SAASoB,EAAE,MAAO,GACvB,IAAM,GAAGrF,MAAK,IAAMtF,OAAOwK,EAASE,MAAMvK,GAAGI,KAAKuJ,UAAU,IALzC,GALT,IAarBxH,SAAS,YAAY,WACnB7C,GAAG,4BAA4B,WAC7ByJ,EAAYM,SAASmB,EAAE,OAClB3K,OAAO6K,EAAOI,MAAM9K,GAAGI,KAAKwJ,KAAKrC,MAFT,GADZ,GAhCC,G;;mCCRxB;AAAA;AAIApF,SAAS,qBAAqB,KAC5B7C,GAAG,6BAA6B,KAGvB,YACA,QACA;AAJP,MAAMyL,GAAQ,OAAS;AACvBA,EAAMnF,SACN,IAAO,iBAA0B,IAA1B,gBAAAmF,EAAA,kCAAMC,gBAAN,yHACP,IAAO,gBAAuB,IAAvB,gBAAAD,EAAA,kCAAME,aAAN,mHACP,IAAO,gBAAyB,IAAzB,gBAAAF,EAAA,kCAAMG,eAAN,oHAAP,GALF,IASF/I,SAAS,gBAAgB,KACvB,SAASa,EAAMmI,EAAkBC,GAC/B,MAAML,GAAQ,OAAS,SAChBM,EAAcC,GAAcF,EAE7BG,EAAc,CAAEnB,MADF,CAAEe,mBAAkBE,eAAcC;AAGtD,OADAP,EAAMnF,OAAO2F,GACNR,CANgC,CAQzCzL,GAAG,iDAAiD,KAE3C;AADP,MAAMyL,EAAQ/H,EAAM,OAAQ,CAAC,GAAI;AACjC,IAAO,wBAAA+H,EAAA,6BAAMC,gBAAN,2FAAP,IAEF1L,GAAG,yDAAyD,KAEnD;AADP,MAAMyL,EAAQ/H,EAAM,OAAQ,CAAC,GAAI;AACjC,IAAO,mBAAC,MAAD,EAAC,MAAA+H,EAAA,sCAAMC,gBAAN,wBAAD,4FAAP,IAEF7I,SAAS,WAAW,KAClB7C,GAAG,kBAAkB,KAEZ;AADP,MAAMyL,EAAQ/H,EAAM,OAAQ,CAAC,EAAG;AAChC,IAAO,gBAAuB,KAAvB,gBAAA+H,EAAA,kCAAME,aAAN,oHAAP,IAEF3L,GAAG,uDAAuD,KAEjD;AADP,MAAMyL,EAAQ/H,EAAM,OAAQ,CAAC,IAAK;AAClC,IAAO,gBAAuB,IAAvB,gBAAA+H,EAAA,kCAAME,aAAN,kHAAP,IAEF3L,GAAG,+CAA+C,KAEzC,YACA;AAFP,MAAMyL,EAAQ/H,EAAM,OAAQ,CAAC,IAAK;AAClC,IAAO,gCAAA+H,EAAA,kCAAME,aAAN,oBAAqB,EAArB,6FACP,IAAO,gCAAAF,EAAA,kCAAME,aAAN,oBAAqB,IAArB,+FAAP,IAEF3L,GAAG,sDAAsD,KAEhD;AADP,MAAMyL,EAAQ/H,EAAM,OAAQ,CAAC,IAAK;AAClC,IAAO,gBAAuB,IAAvB,gBAAA+H,EAAA,kCAAME,aAAN,kHAAP,GAFF,IAKF9I,SAAS,aAAa,KACpB7C,GAAG,iDAAiD,KAE3C;AADP,MAAMyL,EAAQ/H,EAAM,OAAQ,CAAC,GAAI;AACjC,IAAO,gBAAyB,IAAzB,gBAAA+H,EAAA,kCAAMG,eAAN,oHAAP,IAEF5L,GAAG,+CAA+C,KAEzC;AADP,MAAMyL,EAAQ/H,EAAM,OAAQ,CAAC,GAAI;AACjC,IAAO,gCAAA+H,EAAA,kCAAMG,eAAN,qBAAwB,IAAxB,kGAAP,IAEF5L,GAAG,qDAAqD,KAE/C;AADP,MAAMyL,EAAQ/H,EAAM,OAAQ,CAAC,GAAI;AACjC,IAAO,gBAAyB,IAAzB,gBAAA+H,EAAA,kCAAMG,eAAN,oHAAP,GAFF,IAKF/I,SAAS,SAAS,KAChB7C,GAAG,eAAe,KAET;AADP,MAAMyL,EAAQ/H,EAAM,OAAQ,CAAC,EAAG;AAChC,IAAO,gBAAqB,IAArB,gBAAA+H,EAAA,kCAAMS,WAAN,gHAAP,IAEFlM,GAAG,2DAA2D,KAErD;AADP,MAAMyL,EAAQ/H,EAAM,OAAQ,CAAC,IAAK;AAClC,IAAO,gBAAqB,IAArB,gBAAA+H,EAAA,kCAAMS,WAAN,gHAAP,IAEFlM,GAAG,mDAAmD,KAE7C;AADP,MAAMyL,EAAQ/H,EAAM,OAAQ,CAAC,IAAK;AAClC,IAAO,gCAAA+H,EAAA,kCAAMS,WAAN,oBAAmB,EAAnB,0FAAP,IAEFlM,GAAG,uDAAuD,KAEjD,YAEA;AAHP,MAAMmM,EAAWzI,EAAM,OAAQ,CAAC,IAAK;AACrC,IAAO,gCAAAyI,EAAA,kCAASD,WAAT,oBAAsB,EAAtB;AACP,MAAMT,EAAQ/H,EAAM,KAAQ,CAAC,IAAK;AAClC,IAAO,gBAAqB,IAArB,gBAAA+H,EAAA,kCAAMS,WAAN,gHAAP,GAJF,GAbF,G;;;AC9DFrJ,SAAS,YAAY,WACnB7C,GAAG,yDAAyD,WAC1D,MAUMoM,EAAO,IAAI,IAVH,CACZ,CAAE/E,SAAU,EAAGgF,OAAQ,KACvB,CAAEhF,SAAU,EAAGgF,OAAQ,KACvB,CAAEhF,SAAU,EAAGgF,OAAQ,KACvB,CAAEhF,SAAU,EAAGgF,OAAQ,KACvB,CAAEhF,SAAU,EAAGgF,OAAQ,KACvB,CAAEhF,SAAU,EAAGgF,OAAQ,KACvB,CAAEhF,SAAU,GAAIiF,IAAK,CAAEjF,SAAU,IAAMgF,OAAQ,KAC/C,CAAEhF,SAAU,GAAIgF,OAAQ,MAEO;AACjC9L,OAAO6L,EAAKG,gBAAgB,IAAK,MAAM7L,GAAGI,KAAKC,OAAO,GACtDR,OAAO6L,EAAKG,gBAAgB,IAAK,IAAK,IAAI7L,GAAGI,KAAKC,OAAO,GACzDR,OAAO6L,EAAKG,iBAAiB,EAAG,IAAI7L,GAAGI,KAAKC,OAAO,GACnDR,OAAO6L,EAAKG,gBAAgB,EAAG,OAAO7L,GAAGI,KAAKC,OAAO,GACrDR,OAAO6L,EAAKG,gBAAgB,EAAG,OAAO7L,GAAGI,KAAKC,OAAO,GACrDR,OAAO6L,EAAKG,gBAAgB,EAAG,KAAK7L,GAAGI,KAAKC,OAAO,GACnDR,OAAO6L,EAAKG,gBAAgB,KAAM,KAAK7L,GAAGI,KAAKC,OAAO,GACtDR,OAAO6L,EAAKG,gBAAgB,KAAM,KAAK7L,GAAGI,KAAKC,OAAO,EAnBI,IAsB5Df,GAAG,4BAA4B,WAC7B,MAAMoM,EAAO,IAAI,IACf,GACA,CACE,CAAEI,KAAM,EAAGnF,SAAU,GACrB,CAAEmF,KAAM,EAAGnF,SAAU,GACrB,CAAEmF,KAAM,EAAGnF,SAAU;AAGzB9G,OAAO6L,EAAKK,mBAAmB,IAAK,MAAM/L,GAAGI,KAAKC,OAAO,EAT5B,GAvBZ,G;;8CCFrB;AAAA;AAKA8B,SAAS,iBAAiB,WACxB,IAAI6J,EACAxL;AAEJ,SAASwC,EAAM6F,GACbmD,EAAU,IAAI,IAAcnD,EAAQ,CAAC,EADlB,CAIrB,SAASjD,EAAOqG,EAAIC,EAAItM,GACtBY,EAAOwL,EAAQpG,OAAOqG,EAAIC,EAAItM,EADH,CAqH7B,SAASuM,IACP,MAAO,CACLtO,MAAO,EACPuO,MAAO,CAAEpN,IAAK,KAAM,CAAGC,MAAO,EAAGoN,SAAS,KAC1CrC,cAAe,CAAEsC,UAAW,IAC5BC,cAAepJ,MAAM+F,OAAOC,QAAQ,YACpCqD,gBAAiBrJ,MAAM+F,OAAOC,QAAQ,GACtCiB,MAAO,CAAEqC,MAAO,GAPD,CAWnB,SAASC,EAAUC,GACjB,OAAOhQ,OAAOiF,OAAOuK,IAAcQ,EADZ,CA5HzBrN,GAAG,mBAAmB,WAab,YAGA,QACA,QAGA,QACA;AApBP,MAAMsN,EAAcC,GAAWH,EAAU,CAAEN,MAAO,IAAIxN,IAAIiO;AAE1D7J,EAAM,CACJjB,WAAW,UACX+K,QAAS,CAAC,OACV5P,QAAS,CACP6P,UAAW,SACXC,QAAS,UAIbpH,EAAO,IAAK,GAAKgH,EAAW,CAAC,CAAC,MAAO,CAAE3N,MAAO,EAAGoN,SAAS,OAC1D,IAAO,gBAAuB,IAAvB,gBAAA7L,EAAA,kKAEPoF,EAAO,IAAK,IAAKgH,EAAW,CAAC,CAAC,MAAO,CAAE3N,MAAO,EAAGoN,SAAS,OAC1D,IAAO,gBAAuB,IAAvB,gBAAA7L,EAAA,kKACP,IAAO,gBAAqB,MAArB,gBAAAA,EAAA,gKAEPoF,EAAO,IAAK,IAAKgH,EAAW,CAAC,CAAC,MAAO,CAAE3N,MAAO,EAAGoN,SAAS,OAC1D,IAAO,gBAAuB,IAAvB,gBAAA7L,EAAA,kKACP,IAAO,gBAAmB,MAAnB,gBAAAA,EAAA,2JArBa,IAwBtB2B,SAAS,aAAa,WACpByI,YAAW,WACT5H,GAAM,QAAc,sBADX,IAGX1D,GAAG,2BAA2B,WAErB;AADPsG,EAAO,KAAM,KAAMuG,KACnB,IAAO,gBAA0B,IAA1B,wBAAA3L,EAAA,oEAAeH,OAAf,8HAFqB,IAI9Bf,GAAG,sBAAsB,WAGhB;AADPsG,EAAO,KAAM,MADC,QAAIuG,KAAec,GAAMA,EAAEV,cAAcpD,QAAQ,aAE/D,IAAO,mBAAC,MAAD,EAAE,MAAF,EAAE,MAAF,EAAE,MAAA3I,EAAA,uFAAF,EAAoB,8CAAlB,+BAAsBH,OAAvB,wBAAD,6GAHgB,GARL,IAetB8B,SAAS,kBAAkB,WACzByI,YAAW,WACT5H,GAAM,QAAc,wBADX,IAGX1D,GAAG,gCAAgC,WAE1B,YACA,QACA;AAHPsG,EAAO,KAAM,KAAMuG,KACnB,IAAO,gBAA8B,IAA9B,wBAAA3L,EAAA,wEAAmBH,OAAnB,mIACP,IAAO,mBAAC,MAAD,EAAC,MAAD,EAAC,MAAD,EAAC,MAAAG,EAAA,8FAAmB,GAAnB,+BAAsB0M,OAAtB,wBAAD,6GACP,IAAO,mBAAC,MAAD,EAAC,MAAD,EAAC,MAAD,EAAC,MAAA1M,EAAA,8FAAmB,GAAnB,+BAAsB2M,OAAtB,wBAAD,4GAJ0B,IAMnC7N,GAAG,+BAA+B,WAGzB;AADPsG,EAAO,KAAM,MADC,QAAIuG,KAAec,GAAMA,EAAET,gBAAgBrD,QAAQ,MAEjE,IAAO,wCAAA3I,EAAA,4EAAmB,GAAnB,sBAAsB0M,OAAtB,2GAHyB,IAKlC5N,GAAG,+CAA+C,WAGzC;AADPsG,EAAO,KAAM,MADC,QAAIuG,KAAec,GAAMA,EAAET,gBAAgBrD,QAAQ,MAEjE,IAAO,wCAAA3I,EAAA,4EAAmB,GAAnB,sBAAsB0M,OAAtB,2GAHyC,IAKlD5N,GAAG,8BAA8B,WAKxB;AAJP,MAAMM,EAAQuM;AACdvM,EAAM4M,gBAAgBrD,SAAS,GAC/BvJ,EAAM2M,cAAcpD,QAAQ,UAC5BvD,EAAO,KAAM,KAAMhG,GACnB,IAAO,wCAAAY,EAAA,4EAAmB,GAAnB,sBAAsB2M,OAAtB,2GALwB,GApBR,IA6B3BhL,SAAS,qBAAqB,WAC5ByI,YAAW,WACT5H,GAAM,UADG,IAGX1D,GAAG,sBAAsB,WAGhB,YACA;AAFPsG,EAAO,GAAI,GAAI8G,EAAU,CAAE1C,cAAe,CAAEsC,UAAW,CAD1C,CAAEnC,SAAU,EAAGiD,MAAO,EAAGC,MAAO,IAAK1B,OAAQ,WAE1D,IAAO,gBAAoB,KAApB,gBAAAnL,EAAA,6JACP,IAAO,gBAAiC,KAAjC,gBAAAA,EAAA,sLAJgB,IAMzBlB,GAAG,mCAAmC,WAG7B,YACA;AAFPsG,EAAO,GAAI,GAAI8G,EAAU,CAAE1C,cAAe,CAAEsC,UAAW,CAD1C,CAAEnC,SAAU,EAAGiD,OAAQ,IAAMC,MAAO,IAAK1B,OAAQ,WAE9D,IAAO,gBAAoB,KAApB,gBAAAnL,EAAA,6JACP,IAAO,gBAAkC,KAAlC,gBAAAA,EAAA,yLAJ6B,IAMtClB,GAAG,kCAAkC,WAG5B,YACA;AAFPsG,EAAO,GAAI,GAAI8G,EAAU,CAAE1C,cAAe,CAAEsC,UAAW,CAD1C,CAAEnC,SAAU,EAAGiD,MAAO,IAAMC,MAAO,IAAK1B,OAAQ,WAE7D,IAAO,gBAAoB,KAApB,gBAAAnL,EAAA,8JACP,IAAO,gBAAiC,KAAjC,gBAAAA,EAAA,uLAJ4B,IAMrClB,GAAG,6BAA6B,WAGvB;AADPsG,EAAO,GAAI,GAAI8G,EAAU,CAAE1C,cAAe,CAAEsC,UAAW,CAD1C,CAAEnC,UAAW,EAAGiD,MAAO,EAAGC,MAAO,EAAG1B,OAAQ,WAEzD,IAAO,gBAAyB,KAAzB,gBAAAnL,EAAA,uKAHuB,IAKhClB,GAAG,cAAc,WAGR;AADPsG,EAAO,GAAI,GAAI8G,EAAU,CAAE1C,cAAe,CAAEsC,UAAW,CAD1C,CAAEnC,SAAU,EAAGiD,MAAO,EAAGC,MAAO,IAAK1B,OAAQ,WAE1D,IAAO,gBAAkB,MAAlB,gBAAAnL,EAAA,0JAHQ,IAKjBlB,GAAG,0BAA0B,WAGpB;AADPsG,EAAO,GAAI,GAAI8G,EAAU,CAAE1C,cAAe,CAAEsC,UAAW,CAD1C,CAAEnC,SAAU,EAAGiD,MAAO,EAAGC,MAAO,IAAK1B,OAAQ,WAE1D,IAAO,gBAAuB,KAAvB,gBAAAnL,EAAA,mKAHoB,IAK7BlB,GAAG,4CAA4C,WAGtC;AADPsG,EAAO,GAAI,GAAI8G,EAAU,CAAE1C,cAAe,CAAEsC,UAAW,CAD1C,CAAEnC,UAAW,EAAGiD,MAAO,EAAGC,MAAO,IAAK1B,OAAQ,WAE3D,IAAO,mBAAC,MAAD,EAAE,MAAF,EAAE,MAAF,EAAE,MAAAnL,EAAA,2FAAF,EAAwB,8CAAtB,+BAA0BH,OAA3B,wBAAD,kHAHsC,GArCnB,GAhFN,G;;;ACH1B8B,SAAS,aAAa,WACpB,IAAIiK,EACAkB;AAEJ1C,YAAW,WACTwB,EAAQ,IAAI,IACZkB,EAAS,CACPC,IAAK,CAAC,EACNvO,MACE,OAAOD,KAAKwO,GADX,GAILnB,EAAMoB,IAAIF,EARD,IAWXhO,GAAG,iDAAiD,WAClDO,OAAOuM,EAAMpN,IAAI,OAAOC,OAAOe,GAAGC,MAAM,EADU,IAIpDkC,SAAS,iBAAiB,WACxB7C,GAAG,4CAA4C,WAC7CgO,EAAOC,IAAM,CAAEE,KAAM,GACrBrB,EAAMxG,SACN/F,OAAOuM,EAAMpN,IAAI,OAAOC,OAAOe,GAAGC,OAAO,EAHI,GADvB,IAQ1BkC,SAAS,mBAAmB,WAC1B7C,GAAG,mDAAmD,WACpD8M,EAAMxG,SACN/F,OAAOuM,EAAMpN,IAAI,OAAOqN,SAASrM,GAAGC,OAAM,GAC1CqN,EAAOC,IAAM,CAAEE,IAAK,GACpBrB,EAAMxG,SACN/F,OAAOuM,EAAMpN,IAAI,OAAOqN,SAASrM,GAAGC,OAAM,GAC1CqN,EAAOC,IAAM,CAAEE,KAAM,GACrBrB,EAAMxG,SACN/F,OAAOuM,EAAMpN,IAAI,OAAOqN,SAASrM,GAAGC,OAAM,GAC1CqN,EAAOC,IAAM,CAAEE,IAAK,GACpBrB,EAAMxG,SACN/F,OAAOuM,EAAMpN,IAAI,OAAOqN,SAASrM,GAAGC,OAAM,GAC1CqN,EAAOC,IAAM,CAAEE,IAAK,GACpBrB,EAAMxG,SACN/F,OAAOuM,EAAMpN,IAAI,OAAOqN,SAASrM,GAAGC,OAAM,GAC1CmM,EAAMxG,SACN/F,OAAOuM,EAAMpN,IAAI,OAAOqN,SAASrM,GAAGC,OAAM,GAC1CqN,EAAOC,IAAM,CAAEE,IAAK,GACpBrB,EAAMxG,SACN/F,OAAOuM,EAAMpN,IAAI,OAAOqN,SAASrM,GAAGC,OAAM,EAnBU,GAD5B,GA3BR,G;;;ACCtBkC,SAAS,eAAe,WACtB7C,GAAG,kCAAkC,WACnC,MAeMkB,EAfW,IAAI,IAAY,CAC/BkN,SAAU,CAAC,EACXC,KAAM,CACJC,KAAM,IAAIC,IAAI,CACZ,CAAEC,UAAW,IAAM,IAAI,YAAe,GAAI,GAAI,GAAI,OAEpDC,KAAM,IAAIF,IAAI,CACZ,CAAEC,UAAW,IAAM,IAAI,YAAe,IAAK,GAAI,GAAI,QAGvD1B,MAAO,CACL,CAAExO,EAAG,GAAIoQ,EAAG,GAAI7R,GAAI,UACpB,CAAEyB,EAAG,GAAIoQ,EAAG,GAAI7R,GAAI,aAGF6C;AACtBa,OAAOW,EAAA,MAAcR,GAAGC,MAAM,GAC9BJ,OAAOW,EAAA,MAAcR,GAAGC,MAAM,EAlBK,GADf,G;;;ACAxBkC,SAAS,iBAAiB,KACxB7C,GAAG,qBAAqB,KACtB,MAAM2C,GAAQ,QAAU,gBAClBgM,GAAQ,QAAqBhM,EAAO,CAAEiM,UAAU;AACtDrO,QAAO,QAAU,KAAM,GAAIoO,IAAQjO,GAAGC,MAAM,EAA5C,IAEFX,GAAG,kBAAkB,KACnB,MAAM2C,GAAQ,QAAU,gBAClBgM,GAAQ,QAAqBhM,EAAO,CAAEiM,UAAU;AACtDrO,QAAO,QAAU,OAAQ,IAAKoO,IAAQjO,GAAGC,MAAM,EAA/C,GAHF,IAOFkC,SAAS,sBAAsB,KAC7B7C,GAAG,4BAA4B,KAC7B,MAAM2C,GAAQ,QAAU,gBAClBgM,GAAQ,QAAqBhM,EAAO,CAAC;AAC3CpC,QAAO,QAAS,EAAGoO,IAAQjO,GAAGC,MAAM,IAApC,IAEFX,GAAG,4BAA4B,KAC7B,MAAM2C,GAAQ,QAAU,gBAClBgM,GAAQ,QAAqBhM,EAAO,CAAC;AAC3CpC,QAAO,QAAS,EAAGoO,IAAQjO,GAAGC,MAAM,IAApC,IAEFX,GAAG,4BAA4B,KAC7B,MAAM2C,GAAQ,QAAU,gBAClBgM,GAAQ,QAAqBhM,EAAO,CAAC;AAC3CpC,QAAO,QAAS,EAAGoO,IAAQjO,GAAGC,MAAM,IAApC,IAEFX,GAAG,4BAA4B,KAC7B,MAAM2C,GAAQ,QAAU,gBAClBgM,GAAQ,QAAqBhM,EAAO,CAAC;AAC3CpC,QAAO,QAAS,EAAGoO,IAAQjO,GAAGC,MAAM,IAApC,IAEFX,GAAG,4BAA4B,KAC7B,MAAM2C,GAAQ,QAAU,gBAClBgM,GAAQ,QAAqBhM,EAAO,CAAC;AAC3CpC,QAAO,QAAS,EAAGoO,IAAQjO,GAAGC,MAAM,IAApC,IAEFX,GAAG,oCAAoC,KACrC,MAAM2C,GAAQ,QAAU,gBAClBgM,GAAQ,QAAqBhM,EAAO,CAAC;AAC3CpC,QAAO,QAAS,EAAGoO,IAAQjO,GAAGC,MAAM,GAApC,GAHF,IAOFkC,SAAS,eAAe,KACtB7C,GAAG,0CAA0C,KAC3C,MAAM2C,GAAQ,QAAU,mDAIlBgM,GAAQ,QAAqBhM,EAAO,CAAC;AAC3CpC,QAAO,QAAS,EAAGoO,IAAQjO,GAAGC,MAAM,GAApC,GANF,G;;mCClDF;AAAA;AAIAkC,SAAS,iBAAiB,WACxB,IAAIgM,EACA1D,EACA2D,EACAC;AAEJzD,YAAW,WACTuD,EAAS,CAAE1I,KAAMtC,MAAM+F,QACvBuB,EAAS,CAAE6D,OAAQnL,MAAM+F,OAAQwB,OAAQvH,MAAM+F,QAC/CmF,EAAgB,CAAEE,SAAU,KAAM,EAAOC,MAAOrL,MAAMkE,KAAI,UAC1D+G,EAAS,IAAI,IAAcD,EAAQ1D,EAAQ,CAAE4D,iBAJpC,IAOXlM,SAAS,cAAc,WACrB7C,GAAG,wCAAwC,WAQzC,OAPA6O,EAAO1I,KAAK0D,QAAQjB,QAAQuG,OAAO,IAAIjS,MAAM,mBAC7C2R,EAAO1I,KAAKiJ,SAAS,SAASvF,QAC5BjB,QAAQtL,QAAQ,CACd6L,KAAM,IAAMP,QAAQtL,QAAQ,UAGhC6N,EAAO6D,OAAOI,SAAS,OAAOvF,QAAQjB,QAAQuG,OAAO,IAAIjS,MAAM,QACxDqD,OAAOuO,EAAOO,UAAU,CAAC,WAAW3O,GAAG4O,WAAWC,KAAKC,GAAG,CAAC,EARzB,IAW3CxP,GAAG,gBAAgB,WASjB,OARA6O,EAAO1I,KAAK0D,QAAQjB,QAAQuG,OAAO,IAAIjS,MAAM,sBAC7C2R,EAAO1I,KAAKiJ,SAAS,SAASvF,QAC5BjB,QAAQtL,QAAQ,CACd6L,KAAM,IAAMP,QAAQtL,QAAQ,UAGhC6N,EAAO6D,OAAOI,SAAS,OAAOvF,QAAQjB,QAAQtL,QAAQ,QACtD6N,EAAOC,OAAOgE,SAAS,OAAOvF,QAAQjB,QAAQtL,QAAQ,QAC/CwR,EAAOO,UAAU,CAAC,UAAUxJ,MAAK,KAC/B,YACA;AADP,IAAO,gCAAAkJ,EAAA,6BAAcG,MAAd,sBAAoBO,WAApB,8GACP,IAAO,gCAAAV,EAAA,oCAAcG,MAAd,6BAAoBlH,WAAW,QAAS,OAAxC,6HAAP,GAXe,IAenBhI,GAAG,oBAAoB,WAQrB,OAPA6O,EAAO1I,KAAK0D,QAAQjB,QAAQuG,OAAO,IAAIjS,MAAM,qBAC7C6R,EAAcE,SAAYvN,GAAkB,aAATA,EACnCqN,EAAcrP,IAAOgC,IACnB,GAAa,aAATA,EAAqB,MAAO;AAChC,MAAM,IAAIxE,MAAM,oBAAhB,EAEFiO,EAAOC,OAAOgE,SAAS,UAAUvF,QAAQjB,QAAQtL,QAAQ,WAClDiD,OAAOuO,EAAOO,UAAU,CAAC,cAAc3O,GAAG4O,WAAWC,KAAKC,GAAG,CAClE,WAAY,UATO,IAavBxP,GAAG,kBAAkB,WASnB,OARA6O,EAAO1I,KAAK0D,QAAQjB,QAAQuG,OAAO,IAAIjS,MAAM,sBAC7C2R,EAAO1I,KAAKiJ,SAAS,SAASvF,QAC5BjB,QAAQtL,QAAQ,CACd6L,KAAM,IAAMP,QAAQtL,QAAQ,UAGhC6N,EAAO6D,OAAOI,SAAS,OAAOvF,QAAQjB,QAAQtL,QAAQ,QACtD6N,EAAOC,OAAOgE,SAAS,OAAOvF,QAAQjB,QAAQtL,QAAQ,QAC/CiD,OAAOuO,EAAOO,UAAU,CAAC,WAAW3O,GAAG4O,WAAWC,KAAKC,GAAG,CAC/D,QAAS,OAVQ,IAcrBxP,GAAG,qCAAqC,WAEtC,OADA6O,EAAO1I,KAAK0D,QAAQjB,QAAQuG,OAAO,IAAIjS,MAAM,eACtCqD,OAAOuO,EAAOO,UAAU,CAAC,WAAW3O,GAAG4O,WAAWC,KAAKC,GAAG,CAAC,EAF5B,GAtDnB,GAbC,G;;mECJ1B;AAAA;AAOA3M,SAAS,eAAe,WACtB7C,GAAG,qBAAqB,WAWf;AAVP,MAAMM,EAAQ,IAAI,IAAY,CAC5BoP,OAAQ,EACRlC,QAAS,CAAC,OACV/K,WAAW,QAAU,IACrB7E,QAAS,CAAEW,MAAO;AAKpB+B,EAAMgG,OAAO,EAHC,CACZ5G,IAAMgC,IAAD,CAAaA,WAGpB,IAAO,gBAAgC,WAAhC,gCAAApB,EAAA,gDAAMwM,MAAN,yCAAYpN,IAAI,OAAhB,2BAAuBgC,KAAvB,yIAXe,IAcxBmB,SAAS,yBAAyB,WAChC,IAAIF,EACA4G,EACAjJ,EACAwM,EACA6C;AAEJ,SAASjM,EAAMkM,EAAKhS,EAAU,CAAEW,MAAO,IACrCoE,GAAQ,QAAUiN,GAClBrG,EAAS,IAAI,IAAO5G,EAAO,EAAG/E,GAC9B0C,EAAQ,IAAI,IAAYiJ,GACxBuD,EAAQ,IAAI,IACZ6C,EAAU,CAAC,EACX7C,EAAMoB,IAAI,CAAExO,IAAK,IAAMiQ,GANiB,CAS1C,SAASE,EAAQ5F,EAAM6F,GACrBH,EAAUG,EACVhD,EAAMxG,SACNhG,EAAMgG,OAAO2D,EAAM6C,EAHG,CAMxBjK,SAAS,gBAAgB,WACvB7C,GAAG,gBAAgB,WAQJ,YACA,QACA,QACA,QACA,QAGA,QAGA,QACA,QACA,QACI,QAAkC,QAM5C,QAIM,QACA,QAAuC,QACnC,QAAkC,QAMtC;AAtCb0D,EAAM;AAKN,MAAM2I,EAAS1J,EAAMwH,MAAM,GAAGkC;AAE9B,UAAa,wBAAA/L,EAAA,6BAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,yCAAMwH,MAAN,kCAAY,GAAZ,4BAApB,kIAAqC,YAClD,UAAa,gCAAA7J,EAAA,6BAAMwK,MAAN,sBAAYiD,MAAZ,uGAAmB,GAChC,UAAa,gCAAAzN,EAAA,6BAAMwK,MAAN,sBAAYiF,KAAZ,2GAAkB,GAC/B,UAAa,gCAAAzP,EAAA,6BAAMwK,MAAN,sBAAYkB,WAAZ,4GAAwB,GACrC,UAAa,wCAAA1L,EAAA,oCAAMoK,cAAN,6BAAoBsC,UAApB,sBAA8BjM,OAA9B,0HAAsC,GAEnD8O,EAAQ,MAAO,CAAC,GAChB,UAAa,wBAAAvP,EAAA,6BAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,yCAAMwH,MAAN,kCAAY,GAAZ,4BAApB,kIAAqC,YAElD0F,EAAQ,EAAG,CAAEvB,KAAM,IACnB,UAAa,wBAAAhO,EAAA,6BAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,yCAAMwH,MAAN,kCAAY,GAAZ,4BAApB,gIAAqC,UAClD,UAAa,wBAAA7J,EAAA,6BAAM4M,gBAAN,EAAsB,MAAtB,EAAsB,MAAtB,EAAsB,MAAAvK,EAAA,yCAAMwH,MAAN,kCAAY,GAAZ,4BAAtB,2HAAuC,GACpD,UAAa,wBAAA7J,EAAA,6BAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,yCAAMwH,MAAN,kCAAY,GAAZ,4BAApB,kIAAqC,YAClD,cAAiB,wCAAA7J,EAAA,oCAAMoK,cAAN,6BAAoBsC,UAApB,sBAA8B,GAA9B,+JAAkC,iBACjDnC,SAAU,EACVkD,MAAO,EACPD,MAAO,EACPzB,UAJiD,gKAMnD,IAAO,mBAAC,MAAD,EAAC,MAAD,EAAC,MAAA/L,EAAA,sCAAMwK,MAAN,+BAAYiF,KAAZ,wBAAD,+FAEPF,EAAQ,IAAK,CAAEvB,KAAM,IACrBuB,EAAQ,EAAG,CAAEvB,KAAM,IACnB,UAAa,wBAAAhO,EAAA,6BAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,yCAAMwH,MAAN,kCAAY,GAAZ,4BAApB,gIAAqC,UAClD,UAAa,wBAAA7J,EAAA,6BAAM4M,gBAAN,EAAsB,MAAtB,EAAsB,MAAtB,EAAsB,MAAAvK,EAAA,yCAAMwH,MAAN,kCAAY,GAAZ,4BAAtB,4HAAuC,iBAAC,EAAD,6HACpD,cAAiB,wCAAA7J,EAAA,oCAAMoK,cAAN,6BAAoBsC,UAApB,sBAA8B,GAA9B,gKAAkC,iBACjDnC,SADiD,EACvC,OAAC,EAAD,kCACVkD,MAAO,EACPD,MAAO,EACPzB,UAJiD,iKAMnD,UAAa,gCAAA/L,EAAA,6BAAMwK,MAAN,sBAAYiF,KAAZ,0GAAkB,EAvCd,IA0CnB/P,GAAG,6CAA6C,WAQvC,YACA;AARP0D,EAAM,4EAMNmM,EAAQ,EAAG,CAAEvB,KAAM,EAAGG,KAAM,IAC5B,IAAO,gBAAwC,WAAxC,gBAAAnO,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,kJACP,IAAO,gBAAwC,WAAxC,gBAAA7J,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,iJATuC,IAYhDnK,GAAG,gDAAgD,WAO1C,YACA,QACA,QAGA,QACA,QACA,QAGA,QACA,QACA,QAEA,QACA,QACA;AAtBP0D,EAAM,qFAKNmM,EAAQ,KAAO,CAAEvB,KAAM,IACvB,IAAO,gBAAwC,WAAxC,gBAAAhO,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,mJACP,IAAO,gBAAwC,aAAxC,gBAAA7J,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,qJACP,IAAO,gBAAwC,aAAxC,gBAAA7J,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,qJACP0F,EAAQ,KAAO,CAAEvB,KAAM,IACvBuB,EAAQ,KAAO,CAAEvB,KAAM,IACvB,IAAO,gBAAwC,WAAxC,gBAAAhO,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,mJACP,IAAO,gBAAwC,WAAxC,gBAAA7J,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,mJACP,IAAO,gBAAwC,aAAxC,gBAAA7J,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,qJACP0F,EAAQ,KAAO,CAAEvB,KAAM,IACvBuB,EAAQ,KAAO,CAAEvB,KAAM,IACvB,IAAO,gBAAwC,WAAxC,gBAAAhO,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,mJACP,IAAO,gBAAwC,WAAxC,gBAAA7J,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,mJACP,IAAO,gBAAwC,WAAxC,gBAAA7J,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,mJAEP,IAAO,gCAAA7J,EAAA,kCAAM4M,gBAAN,EAAsB,MAAtB,EAAsB,MAAtB,EAAsB,MAAAvK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAAtB,oBAAwC,EAAxC,wHACP,IAAO,gBAA0C,IAA1C,gBAAA7J,EAAA,kCAAM4M,gBAAN,EAAsB,MAAtB,EAAsB,MAAtB,EAAsB,MAAAvK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAAtB,8IACP,IAAO,gCAAA7J,EAAA,kCAAM4M,gBAAN,EAAsB,MAAtB,EAAsB,MAAtB,EAAsB,MAAAvK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAAtB,oBAAwC,EAAxC,uHAvB0C,IA0BnDnK,GAAG,2DAA2D,WAOrD,YACA,QACA;AARP0D,EAAM,qFAKNmM,EAAQ,MAAO,CAAEvB,KAAM,IACvB,IAAO,gBAAwC,aAAxC,gBAAAhO,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,qJACP,IAAO,gBAAwC,WAAxC,gBAAA7J,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,mJACP,IAAO,gBAAwC,aAAxC,gBAAA7J,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,oJATqD,IAY9DnK,GAAG,8BAA8B,WAOxB;AANP0D,EAAM,uDAING,MAAMkE,IAAIzH,EAAMwK,MAAO,eACvB+E,EAAQ,KAAM,CAAEvB,KAAM,IACtB,IAAO,wCAAAhO,EAAA,2CAAMwK,MAAN,oCAAYkF,YAAZ,6BAAwBhI,WAAxB,EAAmC,WAAO,EAAP,4BAAnC,0HAPwB,IAUjChI,GAAG,qCAAqC,WAO/B;AANP0D,EAAM,uDAING,MAAMkE,IAAIzH,EAAMwK,MAAO,eACvB+E,EAAQ,EAAG,CAAEvB,KAAM,IACnB,IAAO,gBAAsC,IAAtC,gCAAAhO,EAAA,yCAAMwK,MAAN,kCAAYkF,YAAZ,2BAAwB3F,UAAxB,yIAP+B,IAUxCxH,SAAS,kBAAkB,WACzB,IAAI+H;AACJU,YAAW,WACT5H,EAAM,+DAINkH,EAAOjI,EAAMwH,MAAM,EALV,IAOXnK,GAAG,oBAAoB,WAEd,YACA,QACA,QAEA,QACA,QACA;AAPP6P,EAAQ,EAAG,CAAEvB,KAAM,IACnB,IAAO,gBAA8B,WAA9B,gBAAAhO,EAAA,kCAAM2M,cAAN,EAAoB,MAAArC,EAAA,iCAApB,yIACP,IAAO,gBAAgC,IAAhC,gBAAAtK,EAAA,kCAAM4M,gBAAN,EAAsB,MAAAtC,EAAA,iCAAtB,oIACP,IAAO,gBAA8C,IAA9C,wCAAAtK,EAAA,gDAAMoK,cAAN,yCAAoBsC,UAApB,kCAA8B,GAA9B,2BAAiCnC,SAAjC,kJACPgF,EAAQ,EAAG,CAAEvB,KAAM,IACnB,IAAO,gBAA8B,WAA9B,gBAAAhO,EAAA,kCAAM2M,cAAN,EAAoB,MAAArC,EAAA,iCAApB,yIACP,IAAO,gBAAgC,IAAhC,gBAAAtK,EAAA,kCAAM4M,gBAAN,EAAsB,MAAAtC,EAAA,iCAAtB,oIACP,IAAO,gBAA8C,IAA9C,wCAAAtK,EAAA,gDAAMoK,cAAN,yCAAoBsC,UAApB,kCAA8B,GAA9B,2BAAiCnC,SAAjC,iJARc,IAUvB7K,GAAG,2DAA2D,WAErD,YAEA;AAHP6P,EAAQ,EAAG,CAAEvB,KAAM,IACnB,IAAO,gBAA6B,IAA7B,wBAAAhO,EAAA,kCAAMwK,MAAN,2BAAYiB,aAAZ,iIACP8D,EAAQ,EAAG,CAAEvB,KAAM,IACnB,IAAO,gBAA6B,IAA7B,wBAAAhO,EAAA,kCAAMwK,MAAN,2BAAYiB,aAAZ,gIAJqD,IAM9D/L,GAAG,sBAAsB,WAIhB;AAHP6D,MAAMkE,IAAIzH,EAAMwK,MAAO,eACvB+E,EAAQ,EAAG,CAAEvB,KAAM,IACnBuB,EAAQ,EAAG,CAAEvB,KAAM,IACnB,IAAO,gBAAsC,IAAtC,gCAAAhO,EAAA,yCAAMwK,MAAN,kCAAYkF,YAAZ,2BAAwB3F,UAAxB,yIAJgB,IAMzBrK,GAAG,2BAA2B,WAErB,YACA;AAFP6P,EAAQ,IAAK,CAAEvB,KAAM,IACrB,IAAO,gBAA8B,WAA9B,gBAAAhO,EAAA,kCAAM2M,cAAN,EAAoB,MAAArC,EAAA,iCAApB,yIACP,IAAO,gCAAAtK,EAAA,kCAAM4M,gBAAN,EAAsB,MAAAtC,EAAA,iCAAtB,wBAAgC,OAAC,EAAD,qBAAhC,gHAHqB,IAK9B5K,GAAG,+CAA+C,WAEzC;AADP6P,EAAQ,IAAK,CAAEvB,KAAM,IACrB,IAAO,gBAA6B,IAA7B,wBAAAhO,EAAA,kCAAMwK,MAAN,2BAAYiB,aAAZ,gIAFyC,IAIlD/L,GAAG,8CAA8C,WAGxC,YACA,QACA;AAJP6P,EAAQ,EAAG,CAAEvB,KAAM,IACnBuB,EAAQ,KAAM,CAAEvB,KAAM,IACtB,IAAO,gBAA8B,WAA9B,gBAAAhO,EAAA,kCAAM2M,cAAN,EAAoB,MAAArC,EAAA,iCAApB,yIACP,IAAO,gCAAAtK,EAAA,kCAAM4M,gBAAN,EAAsB,MAAAtC,EAAA,iCAAtB,wBAAgC,OAAC,EAAD,qBAAhC,iHACP,IAAO,gBAA6B,IAA7B,wBAAAtK,EAAA,kCAAMwK,MAAN,2BAAYiB,aAAZ,gIALwC,IAOjD/L,GAAG,8BAA8B,WAGxB,YACA;AAHP6P,EAAQ,EAAG,CAAEvB,KAAM,IACnBuB,EAAQ,IAAK,CAAEvB,KAAM,IACrB,IAAO,gBAA8B,WAA9B,gBAAAhO,EAAA,kCAAM2M,cAAN,EAAoB,MAAArC,EAAA,iCAApB,yIACP,IAAO,gBAA6B,IAA7B,wBAAAtK,EAAA,kCAAMwK,MAAN,2BAAYiB,aAAZ,gIAJwB,IAMjC/L,GAAG,8CAA8C,WAGxC,YACA,QACU,QAAkC;AAJnD6P,EAAQ,EAAG,CAAEvB,KAAM,IACnBuB,EAAQ,EAAG,CAAEvB,KAAM,IACnB,IAAO,gBAA8B,WAA9B,gBAAAhO,EAAA,kCAAM2M,cAAN,EAAoB,MAAArC,EAAA,iCAApB,yIACP,IAAO,gCAAAtK,EAAA,kCAAM4M,gBAAN,EAAsB,MAAAtC,EAAA,iCAAtB,wBAAgC,OAAC,EAAD,qBAAhC,iHACP,cAAiB,wCAAAtK,EAAA,oCAAMoK,cAAN,6BAAoBsC,UAApB,sBAA8B,GAA9B,8KAAkC,iBACjDnC,SADiD,EACvC,OAAC,EAAD,kCACVkD,MAAO,EACPD,MAAO,EACPzB,OAJiD,EAIzC,MAJyC,EAIzC,MAAAzB,EAAA,yCAAKyB,OAAL,mCAJyC,8KALJ,GArDxB,IAmE3BxJ,SAAS,0BAA0B,WACjC,IAAI+H;AACJU,YAAW,WACT5H,EAAM,+DAINkH,EAAOjI,EAAMwH,MAAM,EALV,IAOXnK,GAAG,sBAAsB,WAEhB,YACA,QACA,QAEA,QACA,QACA;AAPP6P,EAAQ,EAAG,CAAEI,MAAO,IACpB,IAAO,gBAA8B,WAA9B,gBAAA3P,EAAA,kCAAM2M,cAAN,EAAoB,MAAArC,EAAA,iCAApB,yIACP,IAAO,gBAAgC,IAAhC,gBAAAtK,EAAA,kCAAM4M,gBAAN,EAAsB,MAAAtC,EAAA,iCAAtB,oIACP,IAAO,gBAA8C,IAA9C,wCAAAtK,EAAA,gDAAMoK,cAAN,yCAAoBsC,UAApB,kCAA8B,GAA9B,2BAAiCnC,SAAjC,kJACPgF,EAAQ,IAAK,CAAEI,MAAO,IACtB,IAAO,gBAA8B,WAA9B,gBAAA3P,EAAA,kCAAM2M,cAAN,EAAoB,MAAArC,EAAA,iCAApB,yIACP,IAAO,gBAAgC,IAAhC,gBAAAtK,EAAA,kCAAM4M,gBAAN,EAAsB,MAAAtC,EAAA,iCAAtB,oIACP,IAAO,gBAA8C,IAA9C,wCAAAtK,EAAA,gDAAMoK,cAAN,yCAAoBsC,UAApB,kCAA8B,GAA9B,2BAAiCnC,SAAjC,iJARgB,GATQ,IAqBnChI,SAAS,6CAA6C,WACpDyI,YAAW,WACT5H,EAAM,2KADG,IAOX1D,GAAG,uCAAuC,WAGjC,YACA;AAHP6P,EAAQ,EAAG,CAAEI,MAAO,IACpBJ,EAAQ,EAAG,CAAEI,OAAQ,IACrB,IAAO,gBAAwC,WAAxC,gBAAA3P,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,mJACP,IAAO,gBAAwC,WAAxC,gBAAA7J,EAAA,kCAAM2M,cAAN,EAAoB,MAApB,EAAoB,MAApB,EAAoB,MAAAtK,EAAA,8CAAMwH,MAAN,uCAAY,GAAZ,iCAApB,kJAJiC,GARU,IAgBtDtH,SAAS,uBAAuB,WAC9B7C,GAAG,wBAAwB,WAMlB,YACA;AANP0D,EAAM,+DAINmM,EAAQ,EAAG,CAAEvB,KAAM,IACnB,IAAO,wDAAAhO,EAAA,gDAAMoK,cAAN,yCAAoBC,OAApB,kCAA2B,GAA3B,2BAA8BC,KAA9B,wBAAuC,MAAvC,EAAuC,MAAvC,EAAuC,MAAAjI,EAAA,mCAAMwH,MAAN,4BAAY,GAAZ,qBAAvC,oIACP,IAAO,gBAAuC,QAAvC,wCAAA7J,EAAA,gDAAMoK,cAAN,yCAAoBC,OAApB,kCAA2B,GAA3B,2BAA8BtI,KAA9B,8IAPkB,IAS3BrC,GAAG,uCAAuC,WAMjC,YACA;AANP0D,EAAM,6DAINmM,EAAQ,EAAG,CAAEvB,KAAM,IACnB,IAAO,wDAAAhO,EAAA,gDAAMoK,cAAN,yCAAoBC,OAApB,kCAA2B,GAA3B,2BAA8BC,KAA9B,wBAAuC,MAAvC,EAAuC,MAAvC,EAAuC,MAAAjI,EAAA,mCAAMwH,MAAN,4BAAY,GAAZ,qBAAvC,oIACP,IAAO,gBAAuC,UAAvC,wCAAA7J,EAAA,gDAAMoK,cAAN,yCAAoBC,OAApB,kCAA2B,GAA3B,2BAA8BtI,KAA9B,gJAPiC,IAS1CrC,GAAG,iCAAiC,WAa3B,YACA,QAIA,QAIA,QAOA,QAKA;AAjCP0D,EAAM,mFAONmM,EAAQ,EAAG,CAAEvB,KAAM,IACnBuB,EAAQ,EAAG,CAAEvB,KAAM,IAGnBuB,EAAQ,EAAG,CAAEvB,KAAM,IACnB,IAAO,wDAAAhO,EAAA,gDAAMoK,cAAN,yCAAoBC,OAApB,kCAA2B,GAA3B,2BAA8BC,KAA9B,wBAAuC,MAAvC,EAAuC,MAAvC,EAAuC,MAAAjI,EAAA,mCAAMwH,MAAN,4BAAY,GAAZ,qBAAvC,oIACP,IAAO,gBAAuC,SAAvC,wCAAA7J,EAAA,gDAAMoK,cAAN,yCAAoBC,OAApB,kCAA2B,GAA3B,2BAA8BtI,KAA9B,gJAGPwN,EAAQ,EAAG,CAAEvB,KAAM,IACnB,IAAO,mBAAC,MAAD,EAAC,MAAD,EAAC,MAAD,EAAC,MAAAhO,EAAA,6CAAMoK,cAAN,sCAAoBC,OAApB,+BAA2B5J,OAA3B,wBAAD,iHAGP8O,EAAQ,EAAG,CAAEvB,KAAM,IACnB,IAAO,wDAAAhO,EAAA,gDAAMoK,cAAN,yCAAoBC,OAApB,kCAA2B,GAA3B,2BAA8BC,KAA9B,wBAAuC,MAAvC,EAAuC,MAAvC,EAAuC,MAAAjI,EAAA,mCAAMwH,MAAN,4BAAY,GAAZ,qBAAvC,oIAGP0F,EAAQ,EAAG,CAAEvB,KAAM,IAGnBuB,EAAQ,IAAK,CAAEvB,KAAM,IACrB,IAAO,wDAAAhO,EAAA,gDAAMoK,cAAN,yCAAoBC,OAApB,kCAA2B,GAA3B,2BAA8BC,KAA9B,wBAAuC,MAAvC,EAAuC,MAAvC,EAAuC,MAAAjI,EAAA,mCAAMwH,MAAN,4BAAY,GAAZ,qBAAvC,oIACP0F,EAAQ,IAAK,CAAEvB,KAAM,IAGrBuB,EAAQ,IAAK,CAAEvB,KAAM,IACrB,IAAO,wDAAAhO,EAAA,gDAAMoK,cAAN,yCAAoBC,OAApB,kCAA2B,GAA3B,2BAA8BC,KAA9B,wBAAuC,MAAvC,EAAuC,MAAvC,EAAuC,MAAAjI,EAAA,mCAAMwH,MAAN,4BAAY,GAAZ,qBAAvC,mIAlC2B,IAoCpCnK,GAAG,+FAA+F,WAWnF,YAIA;AAdb0D,EACE,mHAMA,CAAEnF,MAAO,EAAGkP,UAAW,OAEzBoC,EAAQ,EAAG,CAAEpB,KAAM,IACnB,UAAa,wCAAAnO,EAAA,oCAAMoK,cAAN,6BAAoBC,OAApB,sBAA2B5J,OAA3B,wHAAmC,GAChD8O,EAAQ,EAAG,CAAEpB,KAAM,IAEnBoB,EAAQ,EAAG,CAAEpB,KAAM,IACnB,UAAa,wCAAAnO,EAAA,oCAAMoK,cAAN,6BAAoBC,OAApB,sBAA2B5J,OAA3B,wHAAmC,GAChD8O,EAAQ,EAAG,CAAEpB,KAAM,GAhB6E,IAkBlGzO,GAAG,wDAAwD,WAW5C,YAIA;AAdb0D,EACE,mHAMA,CAAEnF,MAAO,EAAGkP,UAAW,SAEzBoC,EAAQ,EAAG,CAAEpB,KAAM,IACnB,UAAa,wCAAAnO,EAAA,oCAAMoK,cAAN,6BAAoBC,OAApB,sBAA2B5J,OAA3B,wHAAmC,GAChD8O,EAAQ,EAAG,CAAEpB,KAAM,IAEnBoB,EAAQ,EAAG,CAAEpB,KAAM,IACnB,UAAa,wCAAAnO,EAAA,oCAAMoK,cAAN,6BAAoBC,OAApB,sBAA2B5J,OAA3B,wHAAmC,GAChD8O,EAAQ,EAAG,CAAEpB,KAAM,GAhBsC,GAzE7B,GAzNT,IAuTzB5L,SAAS,SAAS,WAChB7C,GAAG,4BAA4B,WAEtB;AADP0D,EAAM,GAAI,CAAEnF,MAAO,IACnB,IAAO,gBAAgB,IAAhB,gBAAA+B,EAAA,2BAAM/B,MAAN,mHAFsB,IAI/ByB,GAAG,sCAAsC,WAGhC,YAEA;AAJP0D,EAAM,GAAI,CAAEnF,MAAO,IACnBsR,EAAQ,EAAK,CAAEK,WAAY,IAC3B,IAAO,gBAAgB,MAAhB,gBAAA5P,EAAA,2BAAM/B,MAAN,sHACPsR,EAAQ,IAAK,CAAEK,WAAY,EAAGC,aAAc,IAC5C,IAAO,gBAAgB,IAAhB,gBAAA7P,EAAA,2BAAM/B,MAAN,mHALgC,IAOzCyB,GAAG,6CAA6C,WAGvC;AAFP0D,EAAM,GAAI,CAAEnF,MAAO,IACnBsR,EAAQ,EAAK,CAAEK,WAAY,EAAGE,OAAQ,IACtC,IAAO,gBAAgB,MAAhB,gBAAA9P,EAAA,2BAAM/B,MAAN,qHAHuC,IAKhDyB,GAAG,6BAA6B,WAIvB;AAHP0D,EAAM,GAAI,CAAEnF,MAAO,IACnBsR,EAAQ,EAAK,CAAEQ,SAAU,MACzBR,EAAQ,IAAK,CAAEQ,SAAU,MACzB,IAAO,gBAAgB,IAAhB,gBAAA/P,EAAA,2BAAM/B,MAAN,mHAJuB,GAjBhB,IAyBlBsE,SAAS,UAAU,WACjB7C,GAAG,4CAA4C,WAEtC,YAEA,QAEA;AALP0D,EAAM,eACN,IAAO,iBAAmB,IAAnB,gBAAApD,EAAA,2BAAMgQ,SAAN,2HACPT,EAAQ,EAAK,CAAC,GACd,IAAO,iBAAmB,IAAnB,gBAAAvP,EAAA,2BAAMgQ,SAAN,2HACPT,EAAQ,GAAM,CAAC,GACf,IAAO,iBAAmB,IAAnB,gBAAAvP,EAAA,2BAAMgQ,SAAN,yHANsC,GAD9B,GAtWa,GAfZ,G;;8CCPxB;AAAA;AAKAzN,SAAS,eAAe,WACtB,MAAM0N,EAAiB,IAAM,IAAI,KAAY,QAAU,sBACjDC,EAAoB,IACxB,IAAI,KAAY,QAAU,UAAY,KAAKC,OAAO;AAEpD5N,SAAS,UAAU,WACjB7C,GAAG,qBAAqB,WAEf,YAMA;AAPP,MAAM8K,EAAQyF;AACd,IAAO,gBAAgB,IAAhB,gBAAAzF,EAAA,2BAAMqC,MAAN,mHACPrC,EAAM4F,eAAe,GACrB5F,EAAM4F,eAAe,GACrB5F,EAAM4F,eAAe,GACrB5F,EAAM4F,eAAe,GACrB5F,EAAM4F,eAAe,GACrB,IAAO,gBAAgB,SAAhB,gBAAA5F,EAAA,2BAAMqC,MAAN,uHARe,GADP,IAanBtK,SAAS,eAAe,WACtB7C,GAAG,qBAAqB,WAEf,YAIA;AALP,MAAM8K,EAAQ0F;AACd,IAAO,gBAAqB,IAArB,gBAAA1F,EAAA,2BAAM6F,WAAN;AACP,IAAK,IAAIC,EAAI,EAAGA,EAAI,IAAMA,IACxB9F,EAAM4F,eAAe;AAEvB,IAAO,gBAAqB,QAArB,gBAAA5F,EAAA,2BAAM6F,WAAN,2HANe,GADF,IAWxB9N,SAAS,0BAA0B,WACjC7C,GAAG,gCAAgC,WAE1B,YAGE;AAJT,MAAM8K,EAAQ0F;AACd,IAAO,gBAAgC,QAAhC,gBAAA1F,EAAA,2BAAM+F,sBAAN;AACP,IAAK,IAAID,EAAI,EAAGA,EAAI,IAAMA,IACxB9F,EAAM4F,eAAe,GACrB,IAAO,gBAAgC,QAAhC,gBAAA5F,EAAA,2BAAM+F,sBAAN,sIALwB,IAQnC7Q,GAAG,gCAAgC,WAE1B,YAEA,QAIA;AAPP,MAAM8K,EAAQyF;AACd,IAAO,gBAAgC,QAAhC,gBAAAzF,EAAA,2BAAM+F,sBAAN,uIACP/F,EAAM4F,gBAAgB,GACtB,IAAO,gCAAA5F,EAAA,2BAAM+F,sBAAN,oBAA8B,MAA9B;AACP,IAAK,IAAID,EAAI,EAAGA,EAAI,IAAKA,IACvB9F,EAAM4F,gBAAgB;AAExB,IAAO,gBAAgC,IAAhC,gBAAA5F,EAAA,2BAAM+F,sBAAN,kIAR0B,GATF,IAqBnChO,SAAS,qBAAqB,WAC5B7C,GAAG,iCAAiC,WAE3B,YAGE;AAJT,MAAM8K,EAAQ0F;AACd,IAAO,gBAA2B,SAA3B,gBAAA1F,EAAA,2BAAMe,iBAAN;AACP,IAAK,IAAI+E,EAAI,EAAGA,EAAI,IAAMA,IACxB9F,EAAM4F,eAAe,GACrB,IAAO,gBAA2B,SAA3B,gBAAA5F,EAAA,2BAAMe,iBAAN,kIALyB,IAQpC7L,GAAG,gCAAgC,WAE1B,YAEA,QACA,QAIA;AARP,MAAM8K,EAAQ0F;AACd,IAAO,gBAA2B,SAA3B,gBAAA1F,EAAA,2BAAMe,iBAAN,mIACPf,EAAM4F,gBAAgB,GACtB,IAAO,gCAAA5F,EAAA,2BAAMe,iBAAN,oBAAyB,OAAzB,6GACP,IAAO,gCAAAf,EAAA,2BAAMe,iBAAN,sBAAyB,MAAzB,EAAyB,MAAAf,EAAA,4BAAMqC,MAAN,qBAAzB;AACP,IAAK,IAAIyD,EAAI,EAAGA,EAAI,IAAKA,IACvB9F,EAAM4F,gBAAgB;AAExB,IAAO,gBAA2B,IAA3B,gBAAA5F,EAAA,2BAAMe,iBAAN,6HAT0B,GATP,IAsB9BhJ,SAAS,WAAW,WAClB7C,GAAG,sBAAsB,WACvB,MAAM8K,EAAQ,IAAI,KAAY,QAAU;AACxCA,EAAMkF,YAAY,MAClBlF,EAAMkF,YAAY,MAClBlF,EAAMkF,aAAa,MACnBzP,OAAOuK,EAAMgG,QAAQpQ,GAAG6O,KAAK5O,MAAM,CAAC,KAAO,MAAQ,MAL5B,GADP,IAUpBkC,SAAS,QAAQ,WACf7C,GAAG,mBAAmB,WACpB,MAAM8K,EAAQ,IAAI,KAAY,QAAU;AACxCvK,OAAOuK,EAAMqC,OAAOzM,GAAGC,MAAM,GAC7BmK,EAAM4F,eAAe,GACrB5F,EAAM4F,eAAe,GACrB5F,EAAM4F,eAAe,GACrB5F,EAAM4F,eAAe,GACrB5F,EAAM4F,eAAe,GACrB5F,EAAM4F,gBAAgB,GACtB5F,EAAM4F,gBAAgB,GACtBnQ,OAAOuK,EAAM7L,KAAKyB,GAAGC,MAAM,SAVP,GADP,GAlFK,G;;mCCLxB;AAAA;AAIAkC,SAAS,oBAAoB,WAsC3B,SAASa,IACP,MAAMwL,GAAQ;AACd,MAAO,CACL6B,UAAYC,GAAW9B,EAAM+B,cAAcD,GAC3C9B,MAAO,CAACgC,EAAWC,IAAgBjC,EAAMA,MAAMgC,EAAWC,GAC1DC,QAAS,IAAMlC,EAAMkC,UACrBnC,SAAWiC,GAAchC,EAAMD,SAASiC,GACxCxR,IAAMwR,GAAchC,EAAMxP,IAAIwR,GAPpB,CArCdlR,GAAG,gBAAgB,KAEV;AADP,MAAMqR,EAAU3N;AAChB,IAAO,wBAAA2N,EAAA,6BAAQD,UAAR,oGAAP,IAGFpR,GAAG,sCAAsC,KACvC,MAAMqR,EAAU3N;AAChB,YAAc,KACZ2N,EAAQnC,MAAM,SAAU,eAAxB,GADF,IAKFlP,GAAG,iCAAiC,KAI3B,YACA,QACA;AALP,MAAMqR,EAAU3N;AAChB2N,EAAQN,UAAU,WAClBM,EAAQnC,MAAM,SAAU,gBACxB,IAAO,mBAAC,MAAD,EAAC,MAAAmC,EAAA,sCAAQD,UAAR,wBAAD,uGACP,IAAO,iBAA+B,IAA/B,gBAAAC,EAAA,kCAAQpC,SAAS,UAAjB,4IACP,IAAO,gBAA0B,iBAA1B,gBAAAoC,EAAA,kCAAQ3R,IAAI,UAAZ,gJAAP,IAGFM,GAAG,uDAAuD,KAKjD;AAJP,MAAMqR,EAAU3N;AAChB2N,EAAQN,UAAU,WAClBM,EAAQnC,MAAM,SAAU,gBACxBmC,EAAQN,UAAU,WAClB,IAAO,mBAAC,MAAD,EAAC,MAAAM,EAAA,sCAAQD,UAAR,wBAAD,sGAAP,IAGFpR,GAAG,2BAA2B,KAKrB;AAJP,MAAMqR,EAAU3N;AAChB2N,EAAQN,UAAU,WAClBM,EAAQnC,MAAM,SAAU,gBACxBmC,EAAQN,UAAU,WAClB,IAAO,wBAAAM,EAAA,6BAAQD,UAAR,qGAAP,GAnCyB,G;;yDCJ7B;AAAA;AA0CAvO,SAAS,aAAa,WACpByI,YAAW,WACT7L,KAAK6R,OAtCT,WACE,MAAMC,EAAS,IAAI,EAAAC,aACbC,EAAW,GACXC,EAAO;AACb,MAAO,CACLC,iBAAiBjQ,EAAMkQ,GACrBL,EAAOhN,GAAG7C,EAAMkQ,EADa,EAG/BC,oBAAoBnQ,EAAMkQ,GACxBL,EAAOO,eAAepQ,EAAMkQ,EADI,EAGlCG,YAAYH,GAEV,OADAL,EAAOhN,GAAG,UAAWqN,GACdA,CAFW,EAIpBI,cAAcJ,GACZL,EAAOO,eAAe,UAAWF,EADb,EAGtBK,QAAQlL,GACNwK,EAAOW,KAAK,UAAW,CAAEC,MAAOpL,EAASqL,eAAgBV,GAD5C,EAGfW,MAAMtL,GACJwK,EAAOW,KAAK,QAAS,CAAEC,MAAOpL,EAASqL,eAAgBV,GAD5C,EAGbY,OACEf,EAAOW,KAAK,UADV,EAGJT,WACAc,UAAW,CACTC,cACE,OAAOf,CADE,GA7BE,CAsCDgB,GACdhT,KAAK,MAAQ,IAAI,IACjBA,KAAKqN,MAAQ,IAAI,KAAUrN,KAAK6R,OAAQ,CACtC,WAAU,IAAM7R,KAAK,QAEvBA,KAAKiT,KAAO,IAAIjI,KACdhL,KAAK,MAAMkT,KAAK,CACdzR,KAAMuJ,EACNmI,OAAQ,CAAE/V,GAAI,SAFhB,CAPO,IAcXgW,WAAU,WACRpT,KAAKqN,MAAMgG,SADH,IAIV9S,GAAG,iDAAiD,KAClD,MAAM+S,EAAc,CAClBpB,mBAAgB,EAChBE,sBAAmB,EACnBU,UAAW,CAAC;AAEA,IAAI,KAAUQ,EAC5B,IAGFlQ,SAAS,YAAY,WACnB7C,GAAG,oBAAoB,WAEd,YAEA;AAHPP,KAAK6R,OAAOW,QAAQ,IACpB,IAAO,gCAAAxS,KAAKqN,MAAL,oCAAWxG,SAAX,sBAAoB,IAApB,gGACP7G,KAAK6R,OAAOe,MAAM,IAClB,IAAO,mBAAC,MAAD,EAAC,MAAD,EAAC,MAAA5S,KAAKqN,MAAL,6CAAWxG,SAAX,+BAAoB,IAApB,wBAAD,gGAJc,IAMvBtG,GAAG,wBAAwB,WAClB,YACA;AADP,IAAO,gBAAkB,UAAlB,iBAAQ,MAAR,oHACP,IAAO,gBAAkB,MAAlB,iBAAQ,MAAR,+GAFkB,GAPR,IAarB6C,SAAS,WAAW,WAClB7C,GAAG,oBAAoB,WAOd,YACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA;AAdPP,KAAK6R,OAAOG,SAAS/T,KAAK,KAAM,CAC9BsV,MAAO,EACPrD,QAAS,CAAC,CAAC,EAAG,CAAEhQ,MAAO,KACvBsT,KAAM,CAAC,EAAG,IAAM;AAElB,MAAM/R,EAAOzB,KAAKqN,MAAMxG;AACxB,IAAO,mBAAC,MAAD,EAAC,MAAApF,EAAA,+BAAK,sBAAL,wBAAD,kGACP,IAAO,wBAAAA,EAAA,sBAAK,sBAAL,iGACP,IAAO,mBAAC,MAAD,EAAC,MAAAA,EAAA,+BAAK,oBAAL,wBAAD,gGACP,IAAO,mBAAC,MAAD,EAAC,MAAAA,EAAA,+BAAK,6BAAL,wBAAD,yGACP,IAAO,mBAAC,MAAD,EAAC,MAAAA,EAAA,+BAAK,6BAAL,wBAAD,yGACP,IAAO,wBAAAA,EAAA,sBAAK,6BAAL,wGACP,IAAO,mBAAC,MAAD,EAAC,MAAAA,EAAA,+BAAK,6BAAL,wBAAD,yGACP,IAAO,wBAAAA,EAAA,sBAAK,6BAAL,yGACP,IAAO,mBAAC,MAAD,EAAC,MAAAA,EAAA,+BAAK,6BAAL,wBAAD,yGAfc,GADL,IAoBpB2B,SAAS,QAAQ,WACf7C,GAAG,iBAAiB,WAEX,YAEA,QAEA,QAGL;AARFP,KAAKiT,KAAK,IAAM,GAAM,KACtB,IAAO,gCAAAjT,KAAKqN,MAAL,oCAAWxG,SAAX,sBAAoB,uBAApB,4HAA4C,WACnD7G,KAAKiT,KAAK,IAAM,GAAM,KACtB,IAAO,mBAAC,MAAD,EAAC,MAAD,EAAC,MAAAjT,KAAKqN,MAAL,6CAAWxG,SAAX,+BAAoB,uBAApB,wBAAD,8HAA6C,YACpD7G,KAAKiT,KAAK,IAAM,GAAM,KACtB,IAAO,gCAAAjT,KAAKqN,MAAL,oCAAWxG,SAAX,sBAAoB,uBAApB,4HAA4C,WACnD7G,KAAKiT,KAAK,IAAM,GAAM,GACtB,IACE,mBAAC,MAAD,EAAC,MAAD,EAAC,MAAAjT,KAAKqN,MAAL,6CAAWxG,SAAX,+BAAoB,uBAApB,wBAAD,2IACA,wBAVgB,IAapBtG,GAAG,sBAAsB,WAEhB,YACA,QAEA,QACA;AALPP,KAAKiT,KAAK,IAAM,IAAM,KACtB,IAAO,gCAAAjT,KAAKqN,MAAL,oCAAWxG,SAAX,sBAAoB,wBAApB,mHACP,IAAO,mBAAC,MAAD,EAAC,MAAD,EAAC,MAAA7G,KAAKqN,MAAL,6CAAWxG,SAAX,+BAAoB,0BAApB,wBAAD,sHACP7G,KAAKiT,KAAK,IAAM,IAAM,IACtB,IAAO,gCAAAjT,KAAKqN,MAAL,oCAAWxG,SAAX,sBAAoB,0BAApB,qHACP,IAAO,mBAAC,MAAD,EAAC,MAAD,EAAC,MAAA7G,KAAKqN,MAAL,6CAAWxG,SAAX,+BAAoB,wBAApB,wBAAD,mHANgB,IAQzBtG,GAAG,yBAAyB,WAEnB,YAEA;AAHPP,KAAKiT,KAAK,IAAM,GAAM,KACtB,IAAO,gCAAAjT,KAAKqN,MAAL,oCAAWxG,SAAX,sBAAoB,wBAApB,mHACP7G,KAAKiT,KAAK,IAAM,GAAM,GACtB,IAAO,mBAAC,MAAD,EAAC,MAAD,EAAC,MAAAjT,KAAKqN,MAAL,6CAAWxG,SAAX,+BAAoB,wBAApB,wBAAD,mHAJmB,IAM5BtG,GAAG,4BAA4B,WAEtB,YAEA;AAHPP,KAAKiT,KAAK,IAAM,EAAM,KACtB,IAAO,gCAAAjT,KAAKqN,MAAL,oCAAWxG,SAAX,sBAAoB,oBAApB,+GACP7G,KAAKiT,KAAK,IAAM,EAAM,GACtB,IAAO,mBAAC,MAAD,EAAC,MAAD,EAAC,MAAAjT,KAAKqN,MAAL,6CAAWxG,SAAX,+BAAoB,oBAApB,wBAAD,+GAJsB,IAM/BtG,GAAG,wBAAwB,WAClB,YACA,QACA,QACA,QACA;AAJP,IAAO,iCAAQ,wBAAR,6BAAgCkT,MAAM,MAAtC,mHACP,IAAO,iCAAQ,yBAAR,6BAAiCA,MAAM,WAAvC,0HACP,IAAO,iCAAQ,2BAAR,6BAAmCA,MAAM,UAAzC,0HACP,IAAO,iCAAQ,wBAAR,6BAAgCA,MAAM,WAAtC,wHACP,IAAO,iCAAQ,oBAAR,6BAA4BA,MAAM,OAAlC,+GALkB,GAlCZ,IA2CjBrQ,SAAS,QAAQ,WACf7C,GAAG,wBAAwB,WAQlB;AAPP,IAAImT;AACJ,MAAMC,GAAe,QAAK3T,KAAKqN,MAAOrN,KAAK6R,QAAQ+B,WAChD1T,GAAWwT,EAAOxT;AAGrBF,KAAK6R,OAAOW,QAAQ,IACpBxS,KAAK6R,OAAOgB,OACZ,IAAO,gBAAS,OAAT,QAAAa,EAAA,yGAEPC,EAAaE,aAVY,GADZ,IAejBzQ,SAAS,mBAAmB,WAC1B7C,GAAG,wBAAwB,WAcR,YAAQ;AAbzB,MAAM,EAAI,IAAI,IACRuR,EAAS,GACT6B,GAAe,QAAgB,GAAGC,WAAW1T,GACjD4R,EAAO7T,KAAKiC;AAEd,EAAEgT,KAAK,CAAE,IAAI,IACb,EAAEA,KAAK,CAAE,IAAI,IACb,EAAEA,KAAK,CAAE,IAAI,IACb,EAAEA,KAAK,CAAE,IAAI,IACb,EAAEA,KAAK,CAAE,IAAI,IACb,EAAEA,KAAK,CAAE,IAAI,IACb,EAAEA,KAAK,CAAE,IAAI,EAAM,IAAI,IACvB,EAAEA,KAAK,CAAE,IAAI,EAAM,IAAI,IACvB,cAAiB,gBAAApB,EAAA,wHAAQ,iBAAC,KAAM,KAAM,KAAM,KAAM,KAAM,MAA/B,yHACzB6B,EAAaE,aAfY,GADD,GAxHR,G;;;ACrCtBzQ,SAAS,oBAAoB,WAC3BA,SAAS,iBAAiB,WACxBA,SAAS,OAAO,WACd7C,GAAG,wDAAwD,WACzD,MAAMuT,EAAO,KAAc,OAA0B;AACrDhT,OAAOgT,GAAM7S,GAAG6O,KAAK5O,MAAM,KAF8B,GAD7C,IAMhBkC,SAAS,OAAO,WACd7C,GAAG,2BAA2B,WAC5B,MAAMwT,EAAM,KAAc,OAA0B;AAC/CjT,OAAOiT,GAAK9S,GAAGoB,GAAG2R,KAFK,GADhB,GAPQ,IAe1B5Q,SAAS,WAAW,WAClBA,SAAS,OAAO,WACd7C,GAAG,uCAAuC,WACxC,MAAM0T,EAAU,KAAc,IAAK,KAAqB,IAClDC,EAAU,KAAc,IAAK,KAAqB,IAClDrT,EAAQ,MACXsT,MAAMtT,GAAU,KAAiBA,EAAOoT,KACxCE,MAAMtT,GAAU,KAAiBA,EAAOqT,KACxChU;AACHY,OAAO,KAAcD,EAAO,KAAKX,OAAOe,GAAGC,MAAM,GACjDJ,OAAO,KAAcD,EAAO,KAAKX,OAAOe,GAAGC,MAAM,EART,GAD5B,IAYhBkC,SAAS,eAAe,WACtB7C,GAAG,+CAA+C,WAChD,MAAMuG,EAAS,KAAsB,CACnCtE,EAAG,KAAqB,GACxB6N,EAAG,KAAqB,KAEpBxP,EAAQ,UAAiBe,EAAWkF;AAC1ChG,OAAO,KAAcD,EAAO,KAAKX,OAAOe,GAAGC,MAAM,GACjDJ,OAAO,KAAcD,EAAO,KAAKX,OAAOe,GAAGC,MAAM,EAPD,GAD5B,GAbN,IA0BpBkC,SAAS,gBAAgB,WACvByI,YAAW,WACT,MAAM/E,EAAS,KAAsB,CACnCtE,EAAG,KAAqB,GACxB6N,EAAG,KAAqB,GACxB+D,EAAG,KACHC,EAAG;AAELrU,KAAKa,MAAQ,UAAiBe,EAAWkF,EAPhC,IASX1D,SAAS,OAAO,WACd7C,GAAG,qCAAqC,WACjCO,OAAO,KAAcd,KAAKa,MAAO,MAAMI,GAAGoB,GAAGiS,KAC7CxT,OAAO,KAAcd,KAAKa,MAAO,MAAMI,GAAGoB,GAAGiS,KAC7CxT,OAAO,KAAcd,KAAKa,MAAO,MAAMI,GAAGoB,GAAGiS,KAC7CxT,OAAO,KAAcd,KAAKa,MAAO,MAAMI,GAAGoB,GAAGiS,IAJZ,IAMxC/T,GAAG,wCAAwC,WACpCO,OAAO,KAAcd,KAAKa,MAAO,MAAMI,GAAGoB,GAAG2R,KADT,GAP7B,IAWhB5Q,SAAS,SAAS,WAChB7C,GAAG,0BAA0B,WAC3BP,KAAKa,MAAQ,KAAiBb,KAAKa,MAAO,QACrCC,OAAO,KAAcd,KAAKa,MAAO,MAAMI,GAAGoB,GAAG2R,KAFvB,GADb,GArBK,GA1CE,G;;6ECL7B;AAAA;AAMA,MAAMO,EAAO,WACX,MAAMC,EAAU9V,KAAK+V,MAAsB,MAAhB/V,KAAKgW,UAAkBC,SAAS;AAC3D,IAAIpB,EAAQ;AACZ,OAAO,WACL,MAAMmB,EAAShW,KAAK+V,MAAsB,MAAhB/V,KAAKgW,UAAkBC,SAAS;AAE1D,MACE,UAFWC,KAAKC,MAAMF,SAAS,IAI/B,IACAH,EACA,IACAE,EACA,OACGnB,GAAOoB,SAAS,GAXhB,CAHI;AAgXb,SAASG,EAAMnT,GACb,IAAIoT,EACAC,EAAU,IAAI7L,SAAStL,GAAakX,EAAWlX,IAC/CsT,EAAI;AAER,OADAxH,QAAO,KAAWoL,GAAlB,IACOpT,GAAE,CAACM,EAAMgT,KACdD,EAAUA,EAAQ5O,KAAK6O,GAAI,KACzB,MAAM,IAAIxX,MAAM,yBAAhB;AAEF,MAAMyX,EAAUF;AAChBzU,GAAG,KAAK4Q,MAAMlP,KAAQ,IAAMiT,GAA5B,GAVY,EA3VhB,SAAeC,GACb,MAAMC,EAAU,CACdnY,IAAK,IAAI4C,IACTwV,QAAQtV,GAAG;AACT,OAAwB,QAAjB,EAAAC,KAAK/C,IAAIgD,IAAIF,UAAI,QAAI,IADnB,EAGXuV,QAAQvV,EAAKG,GACXF,KAAK/C,IAAIkD,IAAIJ,EAAKG,EADF,EAGlBqV,WAAWxV,GACTC,KAAK/C,IAAImD,OAAOL,EADJ;AAKhB,SAASyV,IACP,OAAO,IAAI,IAAO,IAAI,IAAc,IAAKL,EAAsBC,YAD5C,CAIrBhS,SAAS,UAAU,WACjB,SAASqS,IACP,MAAO,CACLC,SAAUnB,IACVoB,SAAU,kBACVC,MAAO,QAAUrB,IAAQ,gBAJH,CAQ1BvU,KAAK6V,QAAQ,KAEbzS,SAAS,UAAU,WACjB,IAAI0S,EACAnP;AACJgD,QAAO,WACLmM,EAASN,GADJ,IAGPO,OAAM,WACJD,EAAS,IADL,IAGNnM,QAAO,WACLhD,EAAO8O,GADF,IAGPlV,GAAG,kBAAkB,WACnB,OAAOO,OAAOgV,EAAOE,OAAOrP,IAAO1F,GAAGoB,GAAG4T,SADtB,IAGrB1V,GAAG,qCAAqC,WACtC,OAAOO,OAAOgV,EAAOE,OAAOrP,IAAO1F,GAAGoB,GAAG6T,aAAazY,MADhB,GAfvB,IAoBnB2F,SAAS,aAAa,WACpB,IAAI0S;AACJnM,QAAO7J,gBACC0V,IAAeW,QAArB,IAEFtK,YAAW/L,UACTgW,EAASN,GAAT,IAEFpS,SAAS,SAAS,WAChB7C,GAAG,kBAAkB,SAAU6V,GAC7BN,EAAO,MAAMO,MAAK,UAASzC,WAAW0C,IAC7B;AAAP,IAAO,gBAAS,OAAT,QAAAA,EAAA,wGACPF,GAAM,GAHyB,GADnB,GARE,IAkBtBhT,SAAS,kBAAkB,WACzB,IAAI0S;AACJnM,QAAO,WACLmM,EAASN,GADJ,IAGPpS,SAAS,SAAS,WAChB7C,GAAG,2DAA2DT,iBAC5D,MAAM6G,EAAO8O;MAEPK,EAAOE,OAAOrP;AAEpB,MAAM2P,QAAa,OACjBR,EAAO,MAAMO,MAAK,QAAQE,KAAQA;AAEpCzV,OAAOwV,EAAKZ,UAAUzU,GAAGC,MAAMyF,EAAK+O;AAEpC,MAAMc,QAAkB,OACtBhB,IAAe,MAAMa,MAAK,QAAQE,KAAQA;AAE5CzV,OAAO0V,EAAUd,UAAUzU,GAAGC,MAAMyF,EAAK+O,SAbwB,GADnD,GALO,IAwB3BtS,SAAS,uBAAuB,WAC9B,IAAI0S;AACJ,MAAMnP,EAAO8O;AACb9L,QAAO,WAEL,OADAmM,EAASN,IACFM,EAAOE,OAAOrP,EAFhB,IAIPkF,YAAW,WACT,OAAOiK,EAAOW,MAAM9P,EADX,IAGXvD,SAAS,gBAAgB,WACvB7C,GAAG,oCAAoCT,iBAO9B;AANPgW,EAAOK;AAEP,MAAMG,QAAa,OACjBR,EAAO,MAAMO,MAAK,QAAQE,IAAOA,KAAIF,MAAK;AAG5C,IAAO,gBAAS,OAAT,QAAAC,EAAA,iHAPmC,GADrB,GAVK,IAuBhClT,SAAS,0BAA0B,WACjC,IAAI0S;AACJnM,QAAO,WACLmM,EAASN,GADJ;AAIP,MAAMkB,EAASnC,IAAQ,IACjBoC,EAAQlB,IACRmB,EAAQnB;AAEdX,GAAO+B,IACL,IAAIC;AACJD,EAAK,cAAc,WACjB,OAAOf,EAAOE,OAAOW,EADJ,IAGnBE,EAAK,6BAA6B/W,iBAChC,MAAMiX,QAAejB,EAAOkB,YAAY,CACtCC,IAAKP,EAAS,OACdQ,SAAU,KACVxJ,MAAO,OACPY,MAAO,IACP6I,MAAO,IACPC,MAAO,CAAC,IAAK,EAAG,EAAG,EAAG,KACtB5X,IAAK;AAEPsB,OAAOiW,EAAOM,YAAYpW,GAAGC,MAAM,GACnCJ,OAAOiW,EAAOO,WAAWrW,GAAGC,MAAM,GAClCJ,OAAOiW,EAAOQ,YAAYtW,GAAGoB,GAAGC,GAAGkV,WAAW5C,MAC9C9T,OAAOiW,EAAOU,MAAMxW,GAAGC,MAAM,GAC7B4V,EAAiBC,EAAOQ,UAda,IAgBvCV,EACE,iEACA/W,iBACE,MAAMiX,QAAejB,EAAOkB,YAAY,CACtCC,IAAKP,EAAS,OACdQ,SAAU,KACVxJ,MAAO,OACPY,MAAO,IACP6I,MAAO,IACPC,MAAO,CAAC,IAAK,EAAG,EAAG,EAAG,KACtB5X,IAAK;AAEPsB,OAAOiW,EAAOrJ,OAAOzM,GAAGC,MAAM,QAC9BJ,OAAOiW,EAAOzI,OAAOrN,GAAGC,MAAM,KAC9BJ,OAAOiW,EAAOM,YAAYpW,GAAGC,MAAM,GACnCJ,OAAOiW,EAAOO,WAAWrW,GAAGC,MAAM,GAClCJ,OAAOiW,EAAOQ,YAAYvW,IAAIC,GAAGoB,GAAGqV,MAAMZ,GAC1CA,EAAiBC,EAAOQ,UAfrB,IAkBPV,EAAK,uCAAuC/W,iBAC1C,MAAMiX,QAAejB,EAAOkB,YAAY,CACtCC,IAAKP,EAAS,OACdQ,SAAU,KACVxJ,MAAO,OACPY,MAAO,IACP6I,MAAO,IACPC,MAAO,CAAC,IAAK,EAAG,EAAG,EAAG,GACtB5X,IAAK;AAEPsB,OAAOiW,EAAOrJ,OAAOzM,GAAGC,MAAM,QAC9BJ,OAAOiW,EAAOzI,OAAOrN,GAAGC,MAAM,KAC9BJ,OAAOiW,EAAOM,YAAYpW,GAAGC,MAAM,GACnCJ,OAAOiW,EAAOO,WAAWrW,GAAGC,MAAM,GAClCJ,OAAOiW,EAAOQ,YAAYtW,GAAGoB,GAAGqV,MAAMZ,GACtChW,OAAOiW,EAAOY,YAAY1W,GAAGC,MAAMyV,EAAMjB,UACzCoB,EAAiBC,EAAOQ,UAhBuB,IAkBjDV,EAAK,6CAA6C/W,iBAChD,MAAMiX,QAAejB,EAAOkB,YAAY,CACtCC,IAAKP,EAAS,OACdQ,SAAU,KACVxJ,MAAO,OACPY,MAAO,IACP6I,MAAO,IACPC,MAAO,CAAC,IAAK,EAAG,EAAG,EAAG,KACtB5X,IAAK;AAEPsB,OAAOiW,EAAOrJ,OAAOzM,GAAGC,MAAM,QAC9BJ,OAAOiW,EAAOU,MAAMxW,GAAGC,MAAM,EAXwB,IAavD2V,EAAK,sBAAsB,WACzB,OAAOf,EAAOE,OAAOY,EADI,IAG3BC,EAAK,yBAAyB/W,iBAC5B,MAAMiX,QAAejB,EAAOkB,YAAY,CACtCC,IAAKP,EAAS,OACdQ,SAAU,KACVxJ,MAAO,OACPY,MAAO,IACP6I,MAAO,IACPC,MAAO,CAAC,IAAK,EAAG,EAAG,EAAG,KACtB5X,IAAK;AAEPsB,OAAOiW,EAAOrJ,OAAOzM,GAAGC,MAAM,QAC9BJ,OAAOiW,EAAOM,YAAYpW,GAAGC,MAAM,GACnCJ,OAAOiW,EAAOO,WAAWrW,GAAGC,MAAM,GAClCJ,OAAOiW,EAAOU,MAAMxW,GAAGC,MAAM,EAbI,GAAnC,GArF+B,IAuGnCkC,SAAS,kBAAkB,WACzB,IAAI0S;AACJnM,QAAO,WAEL,OADAmM,EAASN,IACFM,EAAOK,QAFT;AAKP,MAAMO,EAASnC,IAAQ,IACjBoC,EAAQlB,IACRmB,EAAQnB,IACRmC,EAAQnC;AAEdX,GAAO+B,IA0CL,IAAIgB;AAaJ,SAAS3R,EAAK4R,GACZ,OAAO,OAAeD,EAAQ,OAAOxB,MAAK,OAAOyB,IAD5B,CAtDvBjB,EAAK,oBAAoB,WACvB,OAAOf,EAAOE,OAAOW,EADE,IAGzBE,EAAK,oBAAoB,WACvB,OAAOf,EAAOkB,YAAY,CACxBC,IAAKP,EAAS,QACdQ,SAAU,KACVxJ,MAAO,OACPY,MAAO,IACP6I,MAAO,IACPC,MAAO,CAAC,EAAG,EAAG,IAAK,EAAG,GACtB5X,IAAK,IARgB,IAWzBqX,EAAK,oBAAoB,WACvB,OAAOf,EAAOE,OAAOY,EADE,IAGzBC,EAAK,oBAAoB,WACvB,OAAOf,EAAOkB,YAAY,CACxBC,IAAKP,EAAS,QACdQ,SAAU,KACVxJ,MAAO,OACPY,MAAO,IACP6I,MAAO,IACPC,MAAO,CAAC,IAAK,EAAG,EAAG,EAAG,GACtB5X,IAAK,IARgB,IAWzBqX,EAAK,0CAA0C/W,iBAC7C,MAAMiY,QAAejC,EAAOkC,WAAW,CACrCf,IAAKP,EAAS,QACdQ,SAAU;AAEZpW,OAAOiX,EAAOtW,MAAMR,GAAGI,KAAKC,OAAO,GACnCR,OAAOiX,EAAOtW,KAAK,GAAGgW,MAAMxW,GAAG8O,GAAG,GAClCjP,OAAOiX,EAAOtW,KAAK,GAAGgW,MAAMxW,GAAG8O,GAAG,EAPgB,IASpD8G,EAAK,cAAc,WACjB,OAAOf,EAAOK,QADG,IAKnBU,EAAK,8BAA8B,WACjCgB,EAAU/B,EAAOmC,QAAQ,CACvBhB,IAAKP,EAAS,QACdQ,SAAU,KACVxJ,MAAO,OACPY,MAAO,IACP6I,MAAO,IACPC,MAAO,CAAC,EAAG,IAAK,EAAG,EAAG,KACtB5X,IAAK,IAR0B,IAgBnCqX,EAAK,yCAAyC,WAC5C,OAAO3Q,GAAMrF,GAA2C,YAAjCA,EAAMqX,KAAKF,WAAWzS,QADD,IAG9CsR,EAAK,oCAAoC,WACvC,OAAO3Q,GACJrF,GACkC,cAAjCA,EAAMqX,KAAKF,WAAWzS,QACW,oBAAjC1E,EAAMqX,KAAKC,WAAW5S,SACxBa,MAAMvF,IACNC,OAAOD,EAAMY,MAAMR,GAAGI,KAAKC,OAAO,EAAlC,GANqC,IASzCuV,EAAK,oBAAoB,WACvB,OAAOf,EAAOE,OAAO4B,EADE,IAGzBf,EAAK,8BAA8B,WACjC,OAAO3Q,GAAMrF,GAA2C,YAAjCA,EAAMqX,KAAKC,WAAW5S,QADZ,IAGnCsR,EAAK,+BAA+B,WAClC,OAAO3Q,GACJrF,GAA2C,cAAjCA,EAAMqX,KAAKC,WAAW5S,SACjCa,MAAMvF,IACNC,OAAOD,EAAMqX,KAAKC,WAAWjY,MAAMuX,MAAMxW,GAAGC,MAAM,EAAlD,GAJgC,IAOpC2V,EAAK,mCAAmC,WACtC,OAAO3Q,GAAMrF,GAA2C,YAAjCA,EAAMqX,KAAKF,WAAWzS,QADP,IAGxCsR,EAAK,sCAAsC,WACzC,OAAO3Q,GACJrF,GAA2C,cAAjCA,EAAMqX,KAAKF,WAAWzS,SACjCa,MAAMvF,IACNC,OAAOD,EAAMY,MAAMR,GAAGI,KAAKC,OAAO,EAAlC,GAJuC,IAO3CuV,EAAK,8BAA8B,WACjCgB,EAAU/B,EAAOmC,QAAQ,CACvBhB,IAAKP,EAAS,QACdQ,SAAU,MAHqB,IAMnCL,EAAK,+BAA+B,WAClC,OAAO3Q,GACJrF,GACkC,cAAjCA,EAAMqX,KAAKF,WAAWzS,QACW,cAAjC1E,EAAMqX,KAAKC,WAAW5S,SACxBa,MAAK,SAAUvF,GACfC,OAAOD,EAAMY,MAAMR,GAAGI,KAAKC,OAAO,GAClCR,OAAOD,EAAMqX,KAAKC,WAAWjY,MAAMoX,WAAWrW,GAAGC,MAAM,EAFnC,GALY,IAUpC6U,OAAM,WACJD,EAAOK,QADH,GAAN,GA1HuB,GAvMV,GAlBc,CAFnCiC,CAAM,CAAEC,MAAM,G;;;ACtBdjV,SAAS,sBAAsB,WAC7BA,SAAS,mBAAmB,WAC1B7C,GAAG,yCAAyC,WAC1C,MAAM+X,EAAI,IAAI;AACdxX,OAAO,KAA2BwX,IAAIrX,GAAGC,MAAM,GAFL,IAI5CX,GAAG,wCAAwC,WACzC,MAAM+X,EAAI,IAAI;AACdA,EAAEC,OAAO,EAAG,MACZzX,OAAO,KAA2BwX,IAAIrX,GAAGC,MAAM,WAHN,GALjB,IAY5BkC,SAAS,mBAAmB,WAC1B7C,GAAG,6BAA6B,WAC9B,MAAM+X,EAAI,IAAI;AACdA,EAAEC,OAAO,EAAG,KAAM,WAClBzX,OAAO,KAA2BwX,IAAIrX,GAAGC,MAAM,UAHjB,GADN,GAbC,G;;;ACD/BkC,SAAS,YAAY,WACnBA,SAAS,UAAU,WACjB7C,GAAG,+CAA+C,WAChD,MAAM8L,EAAW,IAAI,IACf/D,EAAMlE,MAAMkE;AAClB+D,EAASkM,OAAO,EAAG,IACnBlM,EAASmM,MAAMlQ,GACfxH,OAAOwH,GAAKrH,GAAGI,KAAKuJ,UAAU,GAC9B9J,OAAOwH,GAAKrH,GAAGI,KAAKwJ,KAAKtC,WAAW8D,EANY,GADjC,IAWnBjJ,SAAS,aAAa,WACpB7C,GAAG,+CAA+C,WAChD,MAAM8L,EAAW,IAAI;AACrBvL,OAAOuL,EAASsI,YAAY1T,GAAGC,MAAM,GAFW,IAIlDX,GAAG,yDAAyD,WAC1D,MAAM8L,EAAW,IAAI;AACrBA,EAASkM,OAAO,EAAG,IACnBzX,OAAOuL,EAASsI,YAAY1T,GAAGC,MAAM,SAHqB,IAK5DX,GAAG,0BAA0B,WAC3B,MAAM8L,EAAW,IAAI;AACrBA,EAASkM,OAAO,EAAG,IACnBlM,EAASoM,UAAaH,GAAMA,EAAEjM,SAAW,GACzCvL,OAAOuL,EAASsI,YAAY1T,GAAGC,MAAM,MAJV,GAVT,IAkBtBkC,SAAS,WAAW,WAClB7C,GAAG,+BAA+B,WAChC,MAAM8L,EAAW,IAAI,IACf/D,EAAMlE,MAAMkE;AAClB+D,EAASkM,OAAO,EAAG,IACnBlM,EAASkM,OAAO,EAAG,IACnBlM,EAASmM,MAAMlQ,GACf+D,EAASkM,OAAO,EAAG,IACnBlM,EAASkM,OAAO,EAAG,IACnBzX,OAAOwH,GAAKrH,GAAGI,KAAKuJ,UAAU,EARE,IAUlCrK,GAAG,2CAA2C,WAC5C,MAAM8L,EAAW,IAAI,IACf/D,EAAMlE,MAAMkE;AAClB+D,EAASkM,OAAO,EAAG,IACnBlM,EAASkM,OAAO,EAAG;AACnB,MAAM1E,EAAcxH,EAASmM,MAAMlQ;AACnC+D,EAASkM,OAAO,EAAG,IACnB1E,IACAxH,EAASkM,OAAO,EAAG,IACnBzX,OAAOwH,GAAKrH,GAAGI,KAAKuJ,UAAU,EATc,GAX5B,IAwBpBxH,SAAS,aAAa,WACpB7C,GAAG,gCAAgC,WACjC,MAAM8L,EAAW,IAAI;AACrBA,EAASkM,OAAO,EAAG,IACnBzX,OAAOuL,EAASA,UAAUpL,GAAGC,MAAM,GAHF,IAKnCX,GAAG,+BAA+B,WAChC,MAAM8L,EAAW,IAAI;AACrBvL,OAAOuL,EAASA,UAAUpL,GAAGC,MAAM,KAFH,GANd,GAtDH,G;;;ACCrBkC,SAAS,iBAAiB,WACxBA,SAAS,UAAU,WACjB7C,GAAG,2CAA2C,WAC5C,MAAM8L,EAAW,IAAI,IACf+D,EAAU,KAAoB,GAAI/D;AACxCvL,OAAOuL,EAAS6I,SAASjU,GAAGC,MAAM,GAClCJ,OAAOuL,EAAS8K,OAAOlW,GAAGC,MAAM,IAChCkP,EAAQ,OACRtP,OAAOuL,EAAS6I,SAASjU,GAAGC,MAAM,GAClCJ,OAAOuL,EAAS8K,OAAOlW,GAAGC,MAAM,IAChCJ,OAAOuL,EAASqM,OAAOzX,GAAGC,MAAM,MARY,GAD7B,IAanBkC,SAAS,gBAAgB,WACvB7C,GAAG,8CAA8C,WAC/C,MAAM8L,EAAW,IAAI,IACf1K,EAAI,KAA0B0K,GAAW2I,GAAYA,IAErD3E,GADI1O,EAAE,IAAIwH,SAAQ,UACdxH,EAAEwH,QAAQtL,QAAQ,KAEtBwW,GADI1S,EAAEwH,QAAQuG,OAAO,IAAIjS,MAAM,QAC3BkE,EAAEwH,QAAQtL,QAAQ;AAG5B,OAAOsL,QAAQwP,IAAI,CAACtI,EAAGgE,IAAIjO,MAAK,KAC9BtF,OAAOuL,EAAS6I,SAASjU,GAAGC,MAAM,GAClCJ,OAAOuL,EAAS8K,OAAOlW,GAAGC,MAAM,EAAhC,GAX6C,GAD1B,IAiBzBkC,SAAS,SAAS,WAChB7C,GAAG,4CAA4C,WAC7C,MAAMiC,EAAI,IAAI,IACR6N,EAAI,IAAI;AACd7N,EAAE+V,OAAO,GAAI,IACb,KAAmB/V,EAAG6N,GACtBvP,OAAOuP,EAAE6E,SAASjU,GAAGC,MAAM,IAC3BJ,OAAOuP,EAAE8G,OAAOlW,GAAGC,MAAM,IACzBsB,EAAE+V,OAAO,GAAI,IACbzX,OAAOuP,EAAE6E,SAASjU,GAAGC,MAAM,IAC3BJ,OAAOuP,EAAE8G,OAAOlW,GAAGC,MAAM,GAToB,GAD/B,IAclBkC,SAAS,iBAAiB,WACxB7C,GAAG,gCAAgC,WACjC,MAAMiO,EAAM,IAAI,IACVoK,EAAe,KAA2BpK,GAC1ChM,EAAI,IAAI,IACR6N,EAAI,IAAI;AACduI,EAAa5S,IAAIxD,GACjBA,EAAE+V,OAAO,GAAI,IACbzX,OAAO0N,EAAI0G,SAASjU,GAAGC,MAAM,IAC7B0X,EAAa5S,IAAIqK,GACjBA,EAAEkI,OAAO,GAAI,IACbzX,OAAO0N,EAAI0G,SAASjU,GAAGC,MAAM,IAC7BsB,EAAE+V,OAAO,GAAI,IACbzX,OAAO0N,EAAI0G,SAASjU,GAAGC,MAAM,IAC7BsB,EAAE+V,OAAO,GAAI,IACbzX,OAAO0N,EAAI0G,SAASjU,GAAGC,MAAM,IAC7BmP,EAAEkI,OAAO,GAAI,IACbzX,OAAO0N,EAAI0G,SAASjU,GAAGC,MAAM,IAC7BmP,EAAEkI,OAAO,GAAI,IACbzX,OAAO0N,EAAI0G,SAASjU,GAAGC,MAAM,IAC7BJ,OAAO0N,EAAI2I,OAAOlW,GAAGC,MAAM,GAnBM,GADX,GA7CF,G;;mCCH1B;AAAA;AAIAkC,SAAS,0BAA0B,WACjCA,SAAS,SAAS,WAChB,IAAIqG;AAEJoC,YAAW,WACTpC,EAAY,IAAI,IACd,uCAFO,IAMXlJ,GAAG,kBAAkB,WACnB,OAAOO,OAAO2I,EAAU/C,KAAK,WAAWzF,GAAGoB,GAAG4T,SAD3B,IAIrB1V,GAAG,6BAA6B,WAC9B,OAAOO,OAAO2I,EAAU/C,KAAK,YAAYzF,GAAGoB,GAAGwW,QADjB,IAIhCtY,GAAG,eAAe,WAChB,OAAOO,OACL2I,EACG/C,KAAK,UACLN,MAAMM,GAASA,EAAKgD,SACpBtD,MAAM8C,GAAWA,EAAO4P,cAC3B7X,GAAG4O,WAAWE,GAAG,MANH,IASlBxP,GAAG,kBAAkB,WACnB,OAAOkJ,EACJ/C,KAAK,UACLN,MAAMM,GAASA,EAAKqS,eACpB3S,MAAM0C,IACE;AAAP,IAAO,gBAAe,WAAf,eAAOA,EAAP,0HAAP,GALe,IASrBvI,GAAG,kCAAkC,WAInC,OAHAkJ,EAAY,IAAI,IACd,wCAEK3I,OAAO2I,EAAU/C,KAAK,UAAUN,MAAMM,GAASA,EAAKgD,UAASzI,GAAGoB,GACpEwW,QALgC,IAQrCtY,GAAG,mBAAmB,WACpB,OAAOkJ,EACJ/C,KAAK,UACLN,MAAMM,GAASA,EAAKgD,SACpBtD,MAAM8C,GAAW,IAAI8P,WAAW9P,KAChC9C,MAAM6S,IACLnY,OAAO,CAACmY,EAAM,GAAIA,EAAM,GAAIA,EAAM,KAAKhY,GAAG6O,KAAK5O,MAAM,CACnD,IAAM,IAAM,KADd,GANgB,IAYtBX,GAAG,qBAAqB,WAQtB,OAPAkJ,EAAY,IAAI,IACd,uCACA,CACEyP,SAAU,uCACVC,gBAAiB,WAGd1P,EACJ/C,KAAK,YACLN,MAAMM,GAASA,EAAKgD,SACpBtD,MAAM8C,GAAW,IAAI8P,WAAW9P,KAChC9C,MAAM6S,IACLnY,OAAO,CAACmY,EAAM,GAAIA,EAAM,KAAKhY,GAAG6O,KAAK5O,MAAM,CAAC,IAAM,KAAlD,GAbkB,IAgBxBX,GAAG,2CAA2C,WAQ5C,OAPAkJ,EAAY,IAAI,IACd,mCACA,CACEyP,SAAU,uCACVC,gBAAiB,WAGdrY,OAAO2I,EAAU/C,KAAK,aAAazF,GAAGoB,GAAGwW,QARJ,GAvE9B,GADe,G;;mCCJnC;AAAA;AAIAzV,SAAS,eAAe,WACtB7C,GAAG,iDAAiD,WAIlD,OAHiB,IAAI,KACnB,gDAGCmJ,OACAtD,MAAM8C,GAAW,IAAI8P,WAAW9P,KAChC9C,MAAM6S,IACLnY,OAAO,CAACmY,EAAM,GAAIA,EAAM,KAAKhY,GAAG6O,KAAK5O,MAAM,CAAC,IAAM,KAAlD,GAR8C,IAWpDX,GAAG,6BAA6B,WAI9B,OAHiB,IAAI,KACnB,gDAEcwY,aAAa3S,MAAM0C,IAC1B;AAAP,IAAO,+BAAe/D,KAAf,EAAoB,MAAA+D,EAAA,4BAApB,8FAAP,GAL4B,IAQhCvI,GAAG,4DAA4D,WAItD;AAHP,MAAM6Y,EAAW,IAAI,KACnB;AAEF,IAAO,gBAAkB,aAAlB,gBAAAA,EAAA,2BAASnX,KAAT,oHAJsD,GApBzC,G;;;mCCJxB;AAAA;AAQAmB,SAAS,kBAAkB,WACzB,IAAI5B,EACAkK;AACJ/B,QAAO,KACL0P,gBAAgB5K,KAAhB,IAEF5C,YAAW,KACTrK,EAAU,IAAIgC,aACdkI,EAAS,IAAI,KAAelK,EAA5B,IAGF4B,SAAS,WAAW,WAClB7C,GAAG,qBAAqB,WACtB,MAAM+Y,EAAO9X,EAAQ+X;AACrBnV,MAAM+F,KAAK3I,EAAS,cAAc4I,QAAQkP,GAC1ClV,MAAMkE,IAAIgR,EAAM,WAChBlV,MAAMkE,IAAIgR,EAAM,cAChB5N,EAAO8N,SACF1Y,OAAOU,EAAQ+X,YAAYtY,GAAGI,KAAKwJ,KAAKrC,OACxC1H,OAAOwY,EAAKG,SAASxY,GAAGI,KAAKwJ,KAAKrC,OAClC1H,OAAOwY,EAAKI,YAAYzY,GAAGI,KAAKwJ,KAAKrC,MARpB,GADN,IAapBpF,SAAS,UAAU,WACjB7C,GAAG,+BAA+B,WAChC,MAAMuL,EAAQJ,EAAOI,MAAM,CAAE6N,OAAQ;AACrC7Y,OAAOgL,EAAM8N,YAAYN,KAAKpZ,OAAOe,GAAGC,MAAM,GAFd,IAIlCX,GAAG,mDAAmD,WACpD,MAAMuL,EAAQJ,EAAOI,QACf+N,EAAO/N,EAAM8N;AACd9Y,OAAO+Y,EAAKC,eAAepO,EAAOkO,cAAc3Y,GAAGoB,GAAGiS,KAC3DxI,EAAMiO,UACDjZ,OAAO+Y,EAAKC,eAAepO,EAAOkO,cAAc3Y,GAAGoB,GAAG2R,MACtDlT,OAAOgL,EAAM8N,aAAa3Y,GAAGoB,GAAG2X,IANe,GALrC,IAenB5W,SAAS,WAAW,WAClB7C,GAAG,2BAA2B,IACrBmL,EAAO6D,OAAO,IAAI5M,KAAK,KAAKyD,MAAMsL,IAChC;AAAP,IAAO,wBAAAA,EAAA,sBAAYuI,iBAAZ,kGAAP,KAHc,IAQpB7W,SAAS,WAAW,WAClB7C,GAAG,sBAAsB,WACvB,OAAOmL,EAAOC,OAAO,IAAIhJ,KAAK,IADP,IAGzBpC,GAAG,8BAA8B,WAC/B,OAAOmL,EAAOC,OAAO,IAAIuO,YAAY,GADN,IAGjC3Z,GAAG,iCAAiC,WAClC,OAAOmL,EAAO6D,OAAO,IAAI5M,KAAK,KAAKyD,MAAMsL,GAChChG,EAAOC,OAAO+F,IAFW,IAKpCnR,GAAG,sCAAsC,WAEvC,OADAiB,EAAQ2Y,0BAA2B,EAC5BrZ,OACL4K,EACGC,OAAO,IAAIuO,YAAY,IACvBE,SAAQ,IAAO5Y,EAAQ2Y,0BAA2B,KACrDlZ,GAAGoB,GAAGwW,QAN+B,IAQzCzV,SAAS,SAAS,WAChB,IAAIuI,EACA0O,EACAnR;AACJ2C,YAAW,WAMT,OALAwO,EAAe7Y,EAAQ8Y,qBACvBpR,EAAS1H,EAAQ+Y,aAAa,EAAG,MAAO,OACxCF,EAAanR,OAASA,EACtB9E,MAAM+F,KAAK3I,EAAS,sBAAsB4I,QAAQiQ,GAClDjW,MAAMkE,IAAI+R,EAAc,SACjB3O,EAAOC,OAAO,IAAIhJ,KAAK,KAAKyD,MAAM8H,GAAOvC,EAASuC,GANhD,IAQX3N,GAAG,+BAA+B,WAChCoL,EAAOI,OACFjL,OAAOU,EAAQ8Y,oBAAoBrZ,GAAGI,KAAKwJ,KAAKrC,OACrD1H,OAAOuZ,EAAaG,OAAOvZ,GAAGI,KAAKwJ,KAAKtC,WAAW,EAHnB,IAKlChI,GAAG,0CAA0C,WAC3CiB,EAAQiZ,WAAW,GACnB9O,EAAOI,KAAK,IACPjL,OAAOU,EAAQ8Y,oBAAoBrZ,GAAGI,KAAKwJ,KAAKrC,OACrD1H,OAAOuZ,EAAaG,OAAOvZ,GAAGI,KAAKwJ,KAAKtC,WAAW,GAJR,IAM7ChI,GAAG,4CAA4C,WAC7CoL,EAAOI,KAAK,EAAG,CAAEyO,MAAO,EAAG3N,SAAKjL,IAChCd,OAAOuZ,EAAaG,OAAOvZ,GAAGI,KAAKwJ,KAAKtC,WAAW,EAAG,EAFT,IAI/ChI,GAAG,yCAAyC,WAC1CoL,EAAOI,KAAK,EAAG,CAAEyO,MAAO,EAAG3N,IAAK,IAChC/L,OAAOuZ,EAAaG,OAAOvZ,GAAGI,KAAKwJ,KAAKtC,WACtC,EACA,EACA,EAAI,KALoC,IAQ5ChI,GAAG,0BAA0B,WAC3B,MAAMuL,EAAQJ,EAAOI,QACfR,EAAWK,EAAOI,KAAK,EAAG,CAAED;AAC7BhL,OAAOwK,EAASoP,UAAUZ,eAAehO,EAAM8N,cAAc3Y,GAAGoB,GAClEiS,IAJwB,IAWvB,WACJ,IAEE,OADA,IAAIqG,MAAM,OAAO/X,KAAO,cACjBrC,EACG,CAAV,MAAO/C,GAEP,OAAO+C,GAAGqa,IAFA,CAJR,IAQD,2CAA2C,WAC9C,MAAMtP,EAAWK,EAAOI;AACxB3H,MAAMkE,IAAIgD,EAAU,QACpB9J,EAAQiZ,WAAW,KACd3Z,OAAOwK,EAASE,MAAMvK,GAAGI,KAAKwJ,KAAKrC,MAJM,IAOhDpF,SAAS,SAAS,WAChB7C,GAAG,iCAAiC,WAClC,MAAM+K,EAAWK,EAAOI;AACxB3H,MAAMkE,IAAI+R,EAAc,QACxB/O,EAASE,OACJ1K,OAAOuZ,EAAa7O,MAAMvK,GAAGI,KAAKwJ,KAAKrC,MAJV,IAMpCjI,GAAG,gCAAgC,WACjC,MAAM+K,EAAWK,EAAOI;AACxB3H,MAAMkE,IAAI+R,EAAc,QACxB/O,EAASE,OACTF,EAASE,OACTF,EAASE,OACJ1K,OAAOuZ,EAAa7O,MAAMvK,GAAGI,KAAKwJ,KAAKmF,UANX,IAQnCzP,GAAG,uBAAuB,WACxB,MAAM+K,EAAWK,EAAOI;AACxBT,EAASuP,OAASzW,MAAMkE,MACxBgD,EAASE,OACJ1K,OAAOwK,EAASuP,QAAQ5Z,GAAGI,KAAKwJ,KAAKrC,MAJlB,GAfV,IAuBlBpF,SAAS,QAAQ,WACf7C,GAAG,gCAAgC,WAChBoL,EAAOI,OACfR,MACTzK,OAAOuZ,EAAaS,aAAa5a,OAAOc,IAAIC,GAAGC,MAAM,EAHpB,GADpB,GApFD,GApBA,IAkHpBkC,SAAS,YAAY,WACnB,IAAIuI;AACJE,YAAW,WACT,OAAOH,EAAOC,OAAO,IAAIhJ,KAAK,KAAKyD,MAAM8H,GAAOvC,EAASuC,GADhD,IAGX3N,GAAG,2BAA2B,WAC5B,MAAMiC,EAAImJ,EAAOI,OACXsE,EAAI1E,EAAOI,OACXqI,EAAIzI,EAAOI;AACjB3H,MAAMkE,IAAI9F,EAAG,QACb4B,MAAMkE,IAAI+H,EAAG,QACbjM,MAAMkE,IAAI8L,EAAG,QACb1I,EAAOqO,UACFjZ,OAAO0B,EAAEgJ,MAAMvK,GAAGI,KAAKwJ,KAAKrC,OAC5B1H,OAAOuP,EAAE7E,MAAMvK,GAAGI,KAAKwJ,KAAKrC,OAC5B1H,OAAOsT,EAAE5I,MAAMvK,GAAGI,KAAKwJ,KAAKrC,MAVL,IAY9BjI,GAAG,gCAAgC,WAEjC,OADAmL,EAAOqO,UACAjZ,OAAO4K,EAAOC,OAAO,IAAIhJ,KAAK,MAAM1B,GAAGoB,GAAGwW,QAFhB,IAInCtY,GAAG,sBAAsB,WACvB,MAAMiC,EAAImJ,EAAOI;AACjB3H,MAAMkE,IAAI9F,EAAG,WACbkJ,EAAOqO,UACPrO,EAAOqO,UACPjZ,OAAO0B,EAAEuX,SAAS9Y,GAAGI,KAAKuJ,UAAU,EALb,GArBN,IA8BrBmL,OAAM,KACJsD,gBAAgB0B,OAAhB,GAhMuB,G;;;ACN3B3X,SAAS,2BAA2B,WAClCA,SAAS,MAAM,WACb7C,GAAG,gBAAgB,WACjB,MAAMoB,EAAI,IAAI,IAAW;AACzBb,OAAOa,EAAE,CAAEa,EAAG,EAAG6N,EAAG,KAAMpP,GAAGC,MAAM,EAFlB,GADN,IAMfkC,SAAS,aAAa,WACpB7C,GAAG,6CAA6C,WAC9C,MAAMoB,EAAI,IAAI,IAAW;AACpBb,OAAOa,EAAEqZ,UAAU/Z,GAAGoB,GAAG2R,KAFgB,IAIhDzT,GAAG,4CAA4C,WAC7C,MAAMoB,EAAI,IAAI,IAAW;AACpBb,OAAOa,EAAEqZ,UAAU/Z,GAAGoB,GAAGiS,IAFe,GAL3B,GAPY,G;;;ACApC,MAAM2G,EAAWvU,GAAS,wCAAwCA;AAElEtD,SAAS,gBAAgB,WACvBA,SAAS,SAAS,WAChB7C,GAAG,yCAAyCT,iBAC1C,MAAMob,QAAa,OAAkBD,EAAQ;AAC7Cna,OAAOoa,EAAKC,OAAOla,GAAGC,MAAM,KAC5BJ,OAAOoa,EAAKE,QAAQna,GAAGC,MAAM,IAHkB,IAKjDX,GAAG,4BAA4B,WAC7B,OAAOO,OAAO,OAAkBma,EAAQ,qBAAqBha,GAAGoB,GAC7DwW,QAF0B,GANf,IAYlBzV,SAAS,WAAW,WAClB7C,GAAG,0CAA0CT,iBAC3C,MAAMob,QAAa,OAAkBD,EAAQ,aACvCzZ,EAAU,IAAI,UAAqB0Z;AACzC1Z,EAAQ6Z,OAAO,CAAC,GAChB7Z,EAAQuY,SAJwC,IAMlD3W,SAAS,UAAU,WACjB,IAAI8X,EACA1Z;AAcJ,SAAS8Z,EAAM1Y,EAAM/D,EAAGoQ,GACtBzN,EAAQ+Z,KAAKC,cACX,IAAIC,WAAW,QAAQ7Y,IAAQ,CAC7B8Y,QAAS7c,EACT8c,QAAS1M,IAJU,CAQzB,SAAS2M,EAAMhZ,EAAMiZ,EAASC,GAG5B,MAAMC,EAAQ,IAAIpB,MAAM,QAAQ/X;AAChCmZ,EAAMF,QAAUA,EAChBE,EAAMD,eAAiBA,EACvBta,EAAQ+Z,KAAKC,cAAcO,EANe,CArB5ClQ,YAAW/L,iBACTob,QAAa,OAAkBD,EAAQ,aACvCzZ,EAAU,IAAI,UAAqB0Z,GACnC1Z,EAAQ6Z,OAAO,CAAC,GAChB7Z,EAAQ+Z,KAAKS,MAAMpU,SAAW,QAC9BpG,EAAQ+Z,KAAKS,MAAMC,IAAM,IACzBza,EAAQ+Z,KAAKS,MAAME,KAAO,IAC1B3X,SAASE,KAAKC,YAAYlD,EAAQ+Z,KAPpB,IAShBnI,WAAU,WACR5R,EAAQuY,UACRxV,SAASE,KAAK0X,YAAY3a,EAAQ+Z,KAF1B,IAoBVhb,GAAG,iDAAiD,WAClD+a,EAAM,OAAQ,GAAI,IAClBA,EAAM,OAAQ,GAAI,IAClBxa,OAAOU,EAAQ6L,OAAOpM,GAAG6O,KAAK5O,MAAM,CAAC,CAAErC,EAAG,GAAIoQ,EAAG,GAAI7R,GAAI;AACzD,MAAMgf,EAAI,CAAEC,WAAY,EAAGX,QAAS,GAAIC,QAAS;AACjDC,EAAM,QAAS,CAACQ,GAAI,CAACA,IACrBtb,OAAOU,EAAQ6L,OAAOpM,GAAG6O,KAAK5O,MAAM,CAClC,CAAErC,EAAG,GAAIoQ,EAAG,GAAI7R,GAAI,SACpB,CAAEyB,EAAG,GAAIoQ,EAAG,GAAI7R,GAAI,YAEtBke,EAAM,OAAQ,GAAI,IAClBxa,OAAOU,EAAQ6L,OAAOpM,GAAG6O,KAAK5O,MAAM,CAClC,CAAErC,EAAG,GAAIoQ,EAAG,GAAI7R,GAAI,SACpB,CAAEyB,EAAG,GAAIoQ,EAAG,GAAI7R,GAAI,YAEtBke,EAAM,KAAM,GAAI,IAChBxa,OAAOU,EAAQ6L,OAAOpM,GAAG6O,KAAK5O,MAAM,CAAC,CAAErC,EAAG,GAAIoQ,EAAG,GAAI7R,GAAI,YACzDwe,EAAM,MAAO,GAAI,CAACQ,IAClBtb,OAAOU,EAAQ6L,OAAOpM,GAAG6O,KAAK5O,MAAM,GAlBc,GAhCnC,IAqDnBkC,SAAS,SAAS,WAChB7C,GAAG,iDAAiDT,iBAClD,MAAMob,QAAa,OAAkBD,EAAQ,aACvCzZ,EAAU,IAAI,UAAqB0Z;AACzC1Z,EAAQ6Z,OAAO,CAAC,GAChBva,OAAOwb,MAAMjT,KAAK7H,EAAQoN,KAAR,GAAmB,IAAI3N,GAAGC,MAC1CM,EAAQ+a,MAAMC,SAAS,IAEzBhb,EAAQuY,SAP+C,GADzC,GA5DA,IAyEpB3W,SAAS,eAAe,WACtB7C,GAAG,kCAAkCT,iBACnC,MAAMob,QAAa,OAAkBD,EAAQ,mBACvCzZ,EAAU,IAAI,UAAqB0Z;AACzC1Z,EAAQ6Z,OAAO,CAAC;AAChB,MAAMkB,EAAQ/a,EAAQ+a;AACtBzb,OAAOyb,EAAMC,SAAS,GAAG3d,GAAGoC,GAAGC,MAAM,GACrCJ,OAAOyb,EAAMC,SAAS,GAAGvN,GAAGhO,GAAGC,MAAM,GACrCM,EAAQuY,SAPgC,IAS1CxZ,GAAG,4BAA4BT,iBAC7B,MAAMob,QAAa,OAAkBD,EAAQ,uBACvCzZ,EAAU,IAAI,UAAqB0Z,GACnCqB,EAAQ/a,EAAQ+a;AACtB/a,EAAQ6Z,OAAO,CAAE7Y,EAAG,EAAG6N,EAAG,IAC1BvP,OAAOyb,EAAMC,SAAS,GAAG3d,GAAGoC,GAAGC,MAAM,GACrCJ,OAAOyb,EAAMC,SAAS,GAAGvN,GAAGhO,GAAGC,MAAM,IACrCM,EAAQ6Z,OAAO,CAAE7Y,EAAG,GAAI6N,EAAG,KAC3BvP,OAAOyb,EAAMC,SAAS,GAAG3d,GAAGoC,GAAGC,MAAM,IACrCJ,OAAOyb,EAAMC,SAAS,GAAGvN,GAAGhO,GAAGC,MAAM,KACrCM,EAAQuY,SAV0B,GAVd,IAwBxB3W,SAAS,cAAc,WACrB7C,GAAG,qCAAqCT,iBACtC,MAAMob,QAAa,OAAkBD,EAAQ,qBACvCzZ,EAAU,IAAI,UAAqB0Z,GACnCqB,EAAQ/a,EAAQ+a;AACtB/a,EAAQ6Z,OAAO,CAAC;AAChB,MAAMoB,EAAQF,EAAMC,SAAS,GAAGE,QAAQD;AACxC3b,OAAO2b,EAAMtB,OAAOla,GAAGC,MAAM,IAC7BJ,OAAO2b,EAAMrB,QAAQna,GAAGC,MAAM,IAC9BJ,OAAO2b,EAAM5d,GAAGoC,GAAGC,MAAM,IACzBJ,OAAO2b,EAAMxN,GAAGhO,GAAGC,MAAM,IACzBM,EAAQuY,SAVmC,IAY7CxZ,GAAG,kDAAkDT,iBACnD,MAAMob,QAAa,OAAkBD,EAAQ,qBACvCzZ,EAAU,IAAI,UAAqB0Z,GACnCqB,EAAQ/a,EAAQ+a;AACtB/a,EAAQ6Z,OAAO,CAAC;AAChB,MAAMsB,EAASJ,EAAMC,SAAS;AAC9B1b,OAAO6b,EAAOxB,OAAOla,GAAGC,MAAM,GAC9BJ,OAAO6b,EAAOvB,QAAQna,GAAGC,MAAM,GAC/BJ,OAAO6b,EAAOC,SAAS3b,GAAGC,OAAM,GAChCM,EAAQuY,SATgD,IAW1DxZ,GAAG,0CAA0C,WAC3C,OAAOO,OAAO,OAAkBma,EAAQ,8BAA8Bha,GACnEoB,GAAGwW,QAFqC,GAxBxB,IA8BvBzV,SAAS,YAAY,WACnB7C,GAAG,uBAAuBT,iBACxB,MAAMob,QAAa,OAAkBD,EAAQ,aACvCzZ,EAAU,IAAI,UAAqB0Z,GACnCqB,EAAQ/a,EAAQ+a;AACtB/a,EAAQ6Z,OAAO,CAAC;AAChB,MAAM5b,EAAO8c,EAAMC,SAAS,GAAGA,SAAS;AACxC1b,OAAOrB,EAAKA,MAAMwB,GAAGC,MAAM,eAC3BM,EAAQuY,SAPqB,IAS/BxZ,GAAG,sBAAsBT,iBACvB,MAAMob,QAAa,OAAkBD,EAAQ,oBACvCzZ,EAAU,IAAI,UAAqB0Z,GACnCqB,EAAQ/a,EAAQ+a;AACtB/a,EAAQ6Z,OAAO,CAAC;AAChB,MAAM5b,EAAO8c,EAAMC,SAAS,GAAGA,SAAS;AACxC1b,OAAOrB,EAAKZ,GAAGoC,GAAGoB,GAAGwa,SAAS,GAC9Brb,EAAQuY,SAPoB,IAS9BxZ,GAAG,qCAAqCT,iBACtC,MAAMob,QAAa,OAAkBD,EAAQ,2BACvCzZ,EAAU,IAAI,UAAqB0Z,GACnCqB,EAAQ/a,EAAQ+a;AACtB/a,EAAQ6Z,OAAO,CAAEyB,IAAK;AACtB,MAAMrd,EAAO8c,EAAMC,SAAS,GAAGA,SAAS;AACxC1b,OAAOrB,EAAKA,MAAMwB,GAAGC,MAAM,mBAC3BM,EAAQuY,SAPmC,GAnB1B,IA8BrB3W,SAAS,UAAU,WACjB,IAAI8X,EACA1Z,EACA+a;AACJ1Q,YAAW/L,iBACTob,QAAa,OAAkBD,EAAQ,gBACvCzZ,EAAU,IAAI,UAAqB0Z,GACnCqB,EAAQ/a,EAAQ+a,KAHF,IAKhBnJ,WAAU,WACR5R,EAAQuY,SADA,IAGVxZ,GAAG,2CAA2C,WAC5CiB,EAAQ6Z,OAAO,CAAE7Y,EAAG,MACpB1B,OAAOyb,EAAMC,SAAS,GAAGA,UAAUvb,GAAGI,KAAKC,OAAO,GAClDE,EAAQ6Z,OAAO,CAAE7Y,EAAG,MACpB1B,OAAOyb,EAAMC,SAAS,GAAGA,UAAUvb,GAAGI,KAAKC,OAAO,EAJN,GAZ7B,IAoBnB8B,SAAS,cAAc,WACrB7C,GAAG,2BAA2BT,iBAC5B,MAAMob,QAAa,OAAkBD,EAAQ,oBACvCzZ,EAAU,IAAI,UAAqB0Z,GACnCqB,EAAQ/a,EAAQ+a;AACtB/a,EAAQ6Z,OAAO,CAAE3Q,MAAO,KACxB5J,OAAOyb,EAAMC,SAAS,GAAGA,UAAUvb,GAAGI,KAAKC,OAAO,GAClDE,EAAQ6Z,OAAO,CAAE3Q,MAAO,CAAC,CAAE3K,IAAK,IAAKkP,EAAG,OACxCnO,OAAOyb,EAAMC,SAAS,GAAGA,UAAUvb,GAAGI,KAAKC,OAAO,GAClDE,EAAQ6Z,OAAO,CACb3Q,MAAO,CACL,CAAE3K,IAAK,IAAKkP,EAAG,IACf,CAAElP,IAAK,IAAKkP,EAAG,OAGnBnO,OAAOyb,EAAMC,SAAS,GAAGA,UAAUvb,GAAGI,KAAKC,OAAO,GAClDE,EAAQ6Z,OAAO,CAAE3Q,MAAO,CAAC,CAAE3K,IAAK,IAAKkP,EAAG,OACxCnO,OAAOyb,EAAMC,SAAS,GAAGA,UAAUvb,GAAGI,KAAKC,OAAO,GAClDE,EAAQuY,SAjByB,IAmBnCxZ,GAAG,iDAAiDT,iBAClD,MAAMob,QAAa,OAAkBD,EAAQ,oBACvCzZ,EAAU,IAAI,UAAqB0Z,GACnCqB,EAAQ/a,EAAQ+a,MAChB7R,EAAQ;AACdlJ,EAAQ6Z,OAAO,CAAE3Q,UACjB5J,OAAOyb,EAAMC,SAAS,GAAGA,UAAUvb,GAAGI,KAAKC,OAAO,GAClDoJ,EAAMzM,KAAK,CAAE8B,IAAK,IAAKkP,EAAG,KAC1BzN,EAAQ6Z,OAAO,CAAE3Q,UACjB5J,OAAOyb,EAAMC,SAAS,GAAGA,UAAUvb,GAAGI,KAAKC,OAAO,GAClDE,EAAQuY,SAV+C,IAYzDxZ,GAAG,2CAA2CT,iBAC5C,MAAMob,QAAa,OAAkBD,EAAQ,wBACvCzZ,EAAU,IAAI,UAAqB0Z,GACnCqB,EAAQ/a,EAAQ+a;AACtB/a,EAAQ6Z,OAAO,CAAE3Q,MAAO,KACxBlJ,EAAQ6Z,OAAO,CAAE3Q,MAAO,CAAC,CAAE3K,IAAK,IAAKkP,EAAG,OACxCnO,OAAOyb,EAAMC,SAAS,GAAGA,SAAS,GAAGvN,GAAGhO,GAAGC,MAAM,IACjDM,EAAQ6Z,OAAO,CACb3Q,MAAO,CACL,CAAE3K,IAAK,IAAKkP,EAAG,IACf,CAAElP,IAAK,IAAKkP,EAAG,OAGnBnO,OAAOyb,EAAMC,SAAS,GAAGA,SAAS,GAAGvN,GAAGhO,GAAGC,MAAM,IACjDM,EAAQ6Z,OAAO,CAAE3Q,MAAO,CAAC,CAAE3K,IAAK,IAAKkP,EAAG,OACxCnO,OAAOyb,EAAMC,SAAS,GAAGA,SAAS,GAAGvN,GAAGhO,GAAGC,MAAM,IACjDM,EAAQuY,SAhByC,GAhC9B,IAoDvB3W,SAAS,aAAa,WACpB7C,GAAG,wBAAwBT,iBACzB,MAAMob,QAAa,OAAkBD,EAAQ,mBACvCzZ,EAAU,IAAI,UAAqB0Z,GAEnC6B,EADQvb,EAAQ+a,MACHC,SAAS,GAAGO;AAC/Bjc,OAAOic,GAAM/b,IAAIC,GAAGC,MAAM,MAC1BM,EAAQuY,SANsB,GADZ,IAWtB3W,SAAS,iBAAiB,WACxB7C,GAAG,2BAA2BT,iBAC5B,MAAMob,QAAa,OAAkBD,EAAQ,kBACvCzZ,EAAU,IAAI,UAAqB0Z,GACnCpP,EAAQtK,EAAQ+a,MAAMC,SAAS;AACrChb,EAAQ6Z,OAAO,CAAEe,EAAG,IACpBtb,OAAOgL,EAAMjN,GAAGoC,GAAGC,MAAM,IACzBJ,OAAOgL,EAAMmD,GAAGhO,GAAGC,MAAM,GACzBM,EAAQ6Z,OAAO,CAAEe,EAAG,KACpBtb,OAAOgL,EAAMjN,GAAGoC,GAAGC,MAAM,IACzBJ,OAAOgL,EAAMmD,GAAGhO,GAAGC,MAAM,GACzBM,EAAQ6Z,OAAO,CAAEe,EAAG,IACpBtb,OAAOgL,EAAMjN,GAAGoC,GAAGC,MAAM,IACzBJ,OAAOgL,EAAMmD,GAAGhO,GAAGC,MAAM,GACzBM,EAAQuY,SAbyB,IAenCxZ,GAAG,+CAA+CT,iBAChD,MAAMob,QAAa,OAAkBD,EAAQ,kBACvCzZ,EAAU,IAAI,UAAqB0Z,GACnCpP,EAAQtK,EAAQ+a,MAAMC,SAAS;AACrChb,EAAQ6Z,OAAO,CAAEe,EAAG,GAAKY,UAAW,KACpClc,OAAOgL,EAAMjN,GAAGoC,GAAGC,MAAM,IACzBJ,OAAOgL,EAAMmD,GAAGhO,GAAGC,MAAM,GACzBM,EAAQ6Z,OAAO,CAAEe,EAAG,EAAGY,UAAW,KAClClc,OAAOgL,EAAMjN,GAAGoC,GAAGC,MAAM,IACzBJ,OAAOgL,EAAMmD,GAAGhO,GAAGC,MAAM,IACzBM,EAAQ6Z,OAAO,CAAEe,EAAG,IAAKY,UAAW,KACpClc,OAAOgL,EAAMjN,GAAGoC,GAAGC,MAAM,IACzBJ,OAAOgL,EAAMmD,GAAGhO,GAAGC,MAAM,KACzBM,EAAQuY,SAb6C,IAevDxZ,GAAG,8CAA8CT,iBAC/C,MAAMob,QAAa,OAAkBD,EAAQ,0BACvCzZ,EAAU,IAAI,UAAqB0Z,GACnCpP,EAAQtK,EAAQ+a,MAAMC,SAAS;AACrChb,EAAQ6Z,OAAO,CAAEe,EAAG,EAAGvd,EAAG,KAC1BiC,OAAOgL,EAAMjN,GAAGoC,GAAGC,MAAM,GAL2B,GA/B9B,IAwC1BkC,SAAS,QAAQ,WACf7C,GAAG,oCAAoCT,iBACrC,MAAMob,QAAa,OAAkBD,EAAQ,aACvCzZ,EAAU,IAAI,UAAqB0Z;AACzC1Z,EAAQ6Z,OAAO,CAAC;AAChB,MAAMkB,EAAQ/a,EAAQ+a;AACtBzb,OAAOyb,EAAMC,SAAS,GAAG3d,GAAGoC,GAAGC,MAAM,GACrCJ,OAAOyb,EAAMC,SAAS,GAAGvN,GAAGhO,GAAGC,MAAM,GACrCJ,OAAOyb,EAAMC,SAAS,GAAG3d,GAAGoC,GAAGC,MAAM,GACrCJ,OAAOyb,EAAMC,SAAS,GAAGvN,GAAGhO,GAAGC,MAAM,GACrCM,EAAQuY,SATkC,GAD7B,GArSM,G;;uDCJzB;AAAA;AAQA,MAAMkD,EAAQC,GAAQ,IAAE,aAAWA,GAAKpX;AAExC1C,SAAS,2BAA2B,WAClCA,SAAS,UAAU,WACjB7C,GAAG,sCAAsC,WACvC,MAAM2c,EAAMD,EAAK,oCAAoC;AACrDnc,QAAO,QAAOoc,IAAMjc,GAAG6O,KAAK5O,MAAM,CAAEkb,EAAG,IAAKvd,EAAG,KAAMoQ,EAAG,MAFjB,GADxB,IAOnB7L,SAAS,YAAY,WACnB7C,GAAG,qCAAqC,WACtC,MAAM2c,EAAMD,EAAK;AAKjBnc,QAAO,QAASoc,IAAMjc,GAAG6O,KAAK5O,MAAM,CAClC4D,GAAI,GACJrD,KAAM,CACJ,CACEQ,KAAM,IACNkb,UAAW,CACT,CAAE3S,KAAM,EAAGtK,MAAO,GAAIkd,KAAM,UAC5B,CAAE5S,KAAM,EAAGtK,MAAO,GAAIkd,KAAM,UAC5B,CAAE5S,KAAM,EAAGtK,MAAO,GAAIkd,KAAM,YAGhC,CACEnb,KAAM,IACNkb,UAAW,CACT,CAAE3S,KAAM,EAAGtK,MAAO,GAAIkd,KAAM,UAC5B,CAAE5S,KAAM,EAAGtK,MAAO,GAAIkd,KAAM,cArBE,IA2BxC7c,GAAG,gCAAgC,WACjC,MAAM2c,EAAMD,EAAK;AAGjBnc,QAAO,KAAM,QAASoc,KAAMjc,GAAGoc,MAAM5f,MAJJ,GA5BhB,IAoCrB2F,SAAS,gBAAgB,WACvB7C,GAAG,qCAAqC,WACtC,MAAM+c,EAAO,aACX,KACAL,EAAK;AAWPnc,OAAOwb,MAAMjT,KAAKiU,EAAKC,cAActc,GAAG6O,KAAK5O,MAAM,CAAC,IAAK,KAdnB,GADjB,IAmBzBkC,SAAS,SAAS,WAChB7C,GAAG,6CAA6C,WAUvC;AATP,MAAM+c,EAAO,aACX,KACAL,EAAK;AAOP,IAAO,gBAA+B,KAA/B,gBAAAK,EAAA,yCAAKE,KAAK,IAAV,GAAe,OAAEpB,EAAG,IAAL,iCAAf,+HAVuC,IAYhD7b,GAAG,4CAA4C,WActC,YACA;AAdP,MAAM+c,EAAO,aACX,KACAL,EAAK;AAWP,IAAO,gBAAuD,KAAvD,gBAAAK,EAAA,yCAAKE,KAAK,IAAV,GAAe,OAAEC,OAAQ,GAAKC,OAAQ,EAAGtB,EAAG,IAA7B,iCAAf,qJACP,IAAO,gBAAuD,MAAvD,gBAAAkB,EAAA,yCAAKE,KAAK,IAAV,GAAe,OAAEC,OAAQ,EAAGC,OAAQ,GAAKtB,EAAG,IAA7B,iCAAf,qJAfsC,GAb/B,IAgClBhZ,SAAS,YAAY,WACnB7C,GAAG,wBAAwB,WACzB,MAAM+c,EAAO,aACX,KACAL,EAAK;AAOPnc,OAAOwc,EAAKK,SAAS1c,GAAG6O,KAAK5O,MAAM,CAAC,GAAI,QAVf,GADR,GA/Fa,G;;;ACRpCkC,SAAS,YAAY,WACnB,MAAMjF,EAAU,CACdyf,cAAe,IAAM;AAGvBrd,GAAG,8BAA8B,WAC/B,OAAOO,QACL,OAAS,oDAAoDwC,GAAG,SAChErC,GAAG4O,WAAW4D,MAAM,cAHS,IAMjClT,GAAG,mBAAmB,WACpB,OAAOO,QAAO,OAAS,gBAAgBwC,GAAG,SAASrC,GAAGoB,GAAGwW,QADrC,IAItBtY,GAAG,uBAAuB,WACxB,OAAOO,QAAO,OAAS,sBAAuB3C,GAASmF,GAAG,SAASrC,GAAGoB,GACnEwW,QAFqB,IAK1BtY,GAAG,yBAAyB,WAC1B,MAAM4J,EAAO/F,MACV+F,KAAK0T,eAAeC,UAAW,QAC/BC,WAAU,WACT/d,KAAKge,QAAQ,IAAIvgB,MAAM,OADd;AAGb,OAAOqD,QACL,OAAS,yCAA0C3C,GAChDmF,GAAG,QACH8W,SAAQ,IAAMjQ,EAAK8T,aACtBhd,GAAGoB,GAAGwW,QAVkB,GApBT,G;;mCCFrB;AAAA;AAIAzV,SAAS,cAAc,KACrB7C,GAAG,uDAAuD,KACjD,YACA,QACA,QACA,QACA;AAJP,IAAO,gBAAkB,SAAlB,gBAAW,GAAX,uHACP,IAAO,gBAAkB,SAAlB,gBAAW,GAAX,uHACP,IAAO,gBAAmB,SAAnB,gBAAW,IAAX,wHACP,IAAO,gBAAoB,SAApB,gBAAW,KAAX,0HACP,IAAO,gBAAqB,UAArB,gBAAW,MAAX,2HAAP,GALF,G;;;ACHF6C,SAAS,cAAc,WACrBA,SAAS,kBAAkB,WACzB7C,GAAG,wBAAwB,WACzB,MAAM2d,EAAK9Z,MAAMkE,MACX6V,EAAK/Z,MAAMkE,MACX/K,EAAI,IAAI,IACRgZ,EAAIhZ,EAAEib,MAAM0F;AACbpd,OAAOod,GAAIld,IAAIC,GAAGI,KAAKwJ,KAAKrC,OACjCjL,EAAE6gB,OAAO,KACTtd,OAAOod,GAAIjd,GAAGI,KAAKwJ,KAAKtC,WAAW,KACnChL,EAAEib,MAAM2F,GACHrd,OAAOqd,GAAInd,IAAIC,GAAGI,KAAKwJ,KAAKrC,OACjCjL,EAAE6gB,OAAO,KACTtd,OAAOod,GAAIjd,GAAGI,KAAKwJ,KAAKtC,WAAW,KACnCzH,OAAOqd,GAAIld,GAAGI,KAAKwJ,KAAKtC,WAAW,KACnCgO,IACAhZ,EAAE6gB,OAAO,KACTtd,OAAOod,GAAIld,IAAIC,GAAGI,KAAKwJ,KAAKtC,WAAW,KACvCzH,OAAOqd,GAAIld,GAAGI,KAAKwJ,KAAKtC,WAAW,IAhBV,GADF,IAqB3BnF,SAAS,iBAAiB,WACxB7C,GAAG,qBAAqB,WACtB,MAAMhD,EAAI,IAAI,IAAW;AACzBuD,OAAOvD,EAAE2C,OAAOe,GAAGC,MAAM,IAFH,IAKxBX,GAAG,wBAAwB,WACzB,MAAM2d,EAAK9Z,MAAMkE,MACX6V,EAAK/Z,MAAMkE,MACX/K,EAAI,IAAI,IAAW,KACnBgZ,EAAIhZ,EAAEib,MAAM0F;AAClBpd,OAAOod,GAAIjd,GAAGI,KAAKwJ,KAAKtC,WAAW,KACnChL,EAAE2C,MAAQ,IACVY,OAAOod,GAAIjd,GAAGI,KAAKwJ,KAAKtC,WAAW,KACnChL,EAAEib,MAAM2F,GACRrd,OAAOqd,GAAIld,GAAGI,KAAKwJ,KAAKtC,WAAW,KACnChL,EAAE2C,MAAQ,IACVY,OAAOod,GAAIjd,GAAGI,KAAKwJ,KAAKtC,WAAW,KACnCzH,OAAOqd,GAAIld,GAAGI,KAAKwJ,KAAKtC,WAAW,KACnCgO,IACAhZ,EAAE2C,MAAQ,IACVY,OAAOod,GAAIld,IAAIC,GAAGI,KAAKwJ,KAAKtC,WAAW,KACvCzH,OAAOqd,GAAIld,GAAGI,KAAKwJ,KAAKtC,WAAW,IAhBV,GANH,GAtBL,G;;;ACAvBnF,SAAS,YAAY,WACnB7C,GAAG,iCAAiC,WAClC,MAAMmC,EAAO,IAAIC,KAAK,CAAC,gBACjBwH,EAAO/F,MACV+F,KAAKkU,WAAWP,UAAW,cAC3BC,WAAU,WACT/d,KAAKge,QAAQ,IAAIvgB,MAAM,OADd;AAGb,OAAOqD,QACL,OAAS4B,GACNY,GAAG,QACH8W,SAAQ,IAAMjQ,EAAK8T,aACtBhd,GAAGoB,GAAGwW,QAX0B,IAcpCtY,GAAG,8BAA8B,WAC/B,MAAMmC,EAAO,IAAIC,KAAK,CAAC;AACvB,OAAO7B,QAAO,OAAS4B,GAAMY,GAAG,SAASrC,GAAG4O,WAAW3O,MAAM,cAF9B,GAfd,G","sources":["file:///home/runner/work/bemuse/bemuse/bemuse/src|sync|/\\.spec\\.[jt]sx?$/","file:///home/runner/work/bemuse/bemuse/bemuse/src/test/support/mocha-overrides.css","file:///home/runner/work/bemuse/bemuse/common/temp/node_modules/.pnpm/power-assert-formatter@1.4.1/node_modules/power-assert-formatter/lib|sync","file:///home/runner/work/bemuse/bemuse/bemuse/src/app/interactors/createAutoVelocity.ts","file:///home/runner/work/bemuse/bemuse/bemuse/src/custom-folder/index.spec.ts","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/test-helpers/index.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/music-collection/index.spec.ts","file:///home/runner/work/bemuse/bemuse/bemuse/src/sampling-master/ogg.spec.ts","file:///home/runner/work/bemuse/bemuse/bemuse/src/test/support/mocha-overrides.css?[contenthash]","file:///home/runner/work/bemuse/bemuse/bemuse/src/test/support/mocha-overrides.css?[contenthash]*","file:///home/runner/work/bemuse/bemuse/bemuse/src/test/loadSpecs.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/test/prepareTestEnvironment.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/test/index.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/app/entities/Collections.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/app/entities/LoadState.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/app/entities/MusicSearchText.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/app/entities/MusicSelection.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/app/entities/Options.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/app/interactors/createAutoVelocity.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/app/interactors/findMatchingSong.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/app/interactors/getLR2Score.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/app/redux/ReduxState.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/custom-song-loader/index.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/audio/player-audio.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/audio/wave-factory.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/display/Gauge.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/display/note-area.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/display/player-display.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/input/index.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/input/touch-plugin.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/judgments.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/loaders/samples-loader.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/state/player-state.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/state/player-stats.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/keysound-cache/createKeysoundCache.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/omni-input/index.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/online/data-store.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/online/index.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/progress/formatters.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/progress/index.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/progress/utils.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/resources/bemuse-package.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/resources/url.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/sampling-master/index.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/scintillator/expression/index.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/scintillator/index.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/scintillator/nodes/concerns/animation.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/utils/download.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/utils/formatTime.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/utils/observable.spec.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/utils/read-blob.spec.js"],"sourcesContent":["var map = {\n\t\"./app/entities/Collections.spec.js\": 19613,\n\t\"./app/entities/LoadState.spec.js\": 57004,\n\t\"./app/entities/MusicSearchText.spec.js\": 19609,\n\t\"./app/entities/MusicSelection.spec.js\": 29633,\n\t\"./app/entities/Options.spec.js\": 77733,\n\t\"./app/interactors/createAutoVelocity.spec.js\": 11564,\n\t\"./app/interactors/findMatchingSong.spec.js\": 51880,\n\t\"./app/interactors/getLR2Score.spec.js\": 5173,\n\t\"./app/redux/ReduxState.spec.js\": 51583,\n\t\"./custom-folder/index.spec.ts\": 79632,\n\t\"./custom-song-loader/index.spec.js\": 99523,\n\t\"./game/audio/player-audio.spec.js\": 65615,\n\t\"./game/audio/wave-factory.spec.js\": 57267,\n\t\"./game/display/Gauge.spec.js\": 46,\n\t\"./game/display/note-area.spec.js\": 65186,\n\t\"./game/display/player-display.spec.js\": 25606,\n\t\"./game/input/index.spec.js\": 31477,\n\t\"./game/input/touch-plugin.spec.js\": 42856,\n\t\"./game/judgments.spec.js\": 5073,\n\t\"./game/loaders/samples-loader.spec.js\": 28261,\n\t\"./game/state/player-state.spec.js\": 76511,\n\t\"./game/state/player-stats.spec.js\": 84887,\n\t\"./keysound-cache/createKeysoundCache.spec.js\": 56399,\n\t\"./music-collection/index.spec.ts\": 28869,\n\t\"./omni-input/index.spec.js\": 25972,\n\t\"./online/data-store.spec.js\": 58898,\n\t\"./online/index.spec.js\": 85103,\n\t\"./progress/formatters.spec.js\": 80597,\n\t\"./progress/index.spec.js\": 90934,\n\t\"./progress/utils.spec.js\": 10403,\n\t\"./resources/bemuse-package.spec.js\": 42528,\n\t\"./resources/url.spec.js\": 47707,\n\t\"./sampling-master/index.spec.js\": 61062,\n\t\"./sampling-master/ogg.spec.ts\": 86973,\n\t\"./scintillator/expression/index.spec.js\": 26877,\n\t\"./scintillator/index.spec.js\": 82878,\n\t\"./scintillator/nodes/concerns/animation.spec.js\": 47532,\n\t\"./utils/download.spec.js\": 95869,\n\t\"./utils/formatTime.spec.js\": 357,\n\t\"./utils/observable.spec.js\": 12478,\n\t\"./utils/read-blob.spec.js\": 32686\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 58016;","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../common/temp/node_modules/.pnpm/css-loader@6.7.3_webpack@5.75.0/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../common/temp/node_modules/.pnpm/css-loader@6.7.3_webpack@5.75.0/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#mocha-stats em {\\n  color: white;\\n}\\n\\n.mocha-is-passing::before {\\n  content: '';\\n  display: block;\\n  background: #0c0;\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  height: 10px;\\n  left: 0;\\n}\\n\\n.mocha-is-failing::before {\\n  content: '';\\n  display: block;\\n  background: #c00;\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  height: 10px;\\n  left: 0;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./test/support/mocha-overrides.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,YAAY;AACd;;AAEA;EACE,WAAW;EACX,cAAc;EACd,gBAAgB;EAChB,eAAe;EACf,MAAM;EACN,QAAQ;EACR,YAAY;EACZ,OAAO;AACT;;AAEA;EACE,WAAW;EACX,cAAc;EACd,gBAAgB;EAChB,eAAe;EACf,MAAM;EACN,QAAQ;EACR,YAAY;EACZ,OAAO;AACT\",\"sourcesContent\":[\"#mocha-stats em {\\n  color: white;\\n}\\n\\n.mocha-is-passing::before {\\n  content: '';\\n  display: block;\\n  background: #0c0;\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  height: 10px;\\n  left: 0;\\n}\\n\\n.mocha-is-failing::before {\\n  content: '';\\n  display: block;\\n  background: #c00;\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  height: 10px;\\n  left: 0;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 73730;\nmodule.exports = webpackEmptyContext;","import _ from 'lodash'\nimport invariant from 'invariant'\ntype VelocityControllerOptions = {\n  enabled: boolean\n  initialSpeed: number\n  desiredLeadTime: number\n  songBPM: number\n  laneCover?: number\n}\ntype VelocityController = {\n  getInitialSpeed(): number\n  handleGameFinish(\n    finishingSpeed: number,\n    options: {\n      saveSpeed: (speed: number) => void\n      saveLeadTime: (speed: number) => void\n    }\n  ): void\n}\nexport default (options: VelocityControllerOptions): VelocityController => {\n  invariant(typeof options.enabled === 'boolean', 'enabled must be a boolean')\n  invariant(\n    typeof options.initialSpeed === 'number',\n    'initialSpeed must be a number'\n  )\n  invariant(\n    typeof options.desiredLeadTime === 'number',\n    'desiredLeadTime must be a number'\n  )\n  invariant(typeof options.songBPM === 'number', 'songBPM must be a number')\n  if (options.enabled) {\n    return autoVelocity({\n      desiredLeadTime: options.desiredLeadTime,\n      songBPM: options.songBPM,\n      laneCover: options.laneCover || 0,\n    })\n  } else {\n    return manualVelocity(options.initialSpeed)\n  }\n}\n\nfunction manualVelocity(initialSpeed: number): VelocityController {\n  return {\n    getInitialSpeed() {\n      return initialSpeed\n    },\n    handleGameFinish(finishingSpeed, { saveSpeed }) {\n      saveSpeed(finishingSpeed)\n    },\n  }\n}\n\nfunction autoVelocity({\n  songBPM,\n  desiredLeadTime,\n  laneCover,\n}: {\n  songBPM: number\n  desiredLeadTime: number\n  laneCover: number\n}): VelocityController {\n  const visiblePortion = 1 - Math.abs(laneCover)\n  const nominalSpeedLeadTime = ((60000 * 5) / songBPM) * visiblePortion\n  const initialSpeed = _.minBy(\n    _.range(1, 999).map((x) => x / 10),\n    (speed) => Math.abs(desiredLeadTime - nominalSpeedLeadTime / speed)\n  )!\n  return {\n    getInitialSpeed() {\n      return initialSpeed\n    },\n    handleGameFinish(finishingSpeed, { saveSpeed, saveLeadTime }) {\n      saveSpeed(finishingSpeed)\n      if (finishingSpeed.toFixed(1) !== initialSpeed.toFixed(1)) {\n        saveLeadTime(Math.round(nominalSpeedLeadTime / finishingSpeed))\n      }\n    },\n  }\n}\n","import {\n  CustomFolderContext,\n  CustomFolderScanIO,\n  getCustomFolderState,\n  scanFolder,\n  setCustomFolder,\n} from '.'\nimport { CustomFolderState } from './types'\n\nconst debugging = false\n\nconst mockFolderScanIO: CustomFolderScanIO = {\n  log: (text) => {\n    debugging && console.log('scanFolder: [log]', text)\n  },\n  setStatus: (text) => {\n    debugging && console.debug('scanFolder: [setStatus]', text)\n  },\n  updateState: () => {},\n}\n\nclass CustomFolderContextMock implements CustomFolderContext {\n  private map = new Map<string, CustomFolderState>()\n  async get(key: string) {\n    return this.map.get(key)\n  }\n\n  async set(key: string, value: CustomFolderState) {\n    this.map.set(key, value)\n  }\n\n  async del(key: string) {\n    this.map.delete(key)\n  }\n}\n\nconst song1: MockFolder = {\n  'normal.bms': '#TITLE meow [NORMAL]\\n#BPM 90\\n#00111:01',\n  'hyper.bms': '#TITLE meow [HYPER]\\n#BPM 90\\n#00111:01',\n}\n\nconst song2: MockFolder = {\n  'normal.bms': '#TITLE nyan [NORMAL]\\n#BPM 90\\n#00111:01',\n  'hyper.bms': '#TITLE nyan [HYPER]\\n#BPM 90\\n#00111:01',\n}\n\nit('allows setting custom folder and loading it in-game', async () => {\n  const folder: MockFolder = { song1, song2 }\n  const tester = new CustomFolderTestHarness()\n  await tester.setFolder(folder)\n  await tester.checkState(async (state) => {\n    expect(state.chartFilesScanned).not.to.equal(true)\n  })\n\n  await tester.scan()\n  await tester.checkState(async (state) => {\n    expect(state.songs).to.have.length(2)\n  })\n})\n\nit('can scan for new songs', async () => {\n  const folder: MockFolder = { song1 }\n  const tester = new CustomFolderTestHarness()\n  await tester.setFolder(folder)\n  await tester.scan()\n  await tester.checkState(async (state) => {\n    expect(state.songs).to.have.length(1)\n  })\n\n  folder['song2'] = song2\n  await tester.scan()\n  await tester.checkState(async (state) => {\n    expect(state.songs).to.have.length(2)\n  })\n})\n\nit('detects deleted folders', async () => {\n  const folder: MockFolder = { song1, song2 }\n  const tester = new CustomFolderTestHarness()\n  await tester.setFolder(folder)\n  await tester.scan()\n  await tester.checkState(async (state) => {\n    expect(state.songs).to.have.length(2)\n  })\n\n  delete folder['song1']\n  await tester.scan()\n  await tester.checkState(async (state) => {\n    expect(state.songs).to.have.length(1)\n  })\n})\nclass CustomFolderTestHarness {\n  private context = new CustomFolderContextMock()\n\n  constructor() {\n    this.context = new CustomFolderContextMock()\n  }\n\n  async setFolder(data: MockFolder) {\n    await setCustomFolder(\n      this.context,\n      createMockFileSystemDirectoryHandle(data)\n    )\n  }\n\n  async scan() {\n    await scanFolder(this.context, mockFolderScanIO)\n  }\n\n  async checkState(f: (state: CustomFolderState) => Promise<void>) {\n    const state = await getCustomFolderState(this.context)\n    void expect(state).not.to.equal(undefined)\n    await f(state!)\n  }\n}\n\ntype MockFolder = {\n  [name: string]: MockFolder | string\n}\n\nfunction createMockFileSystemDirectoryHandle(\n  data: MockFolder\n): FileSystemDirectoryHandle {\n  return {\n    kind: 'directory',\n    queryPermission: async () => 'granted',\n    [Symbol.asyncIterator]: async function* () {\n      for (const [name, value] of Object.entries(data)) {\n        if (typeof value === 'string') {\n          yield [name, createMockFileSystemFileHandle(name, value)] as const\n        } else {\n          yield [name, createMockFileSystemDirectoryHandle(value)] as const\n        }\n      }\n    },\n    getDirectoryHandle: async (name: string) => {\n      expect(data[name]).to.be.an('object')\n      return createMockFileSystemDirectoryHandle(data[name] as MockFolder)\n    },\n    getFileHandle: async (name: string) => {\n      expect(data[name]).to.be.a('string')\n      return createMockFileSystemFileHandle(name, data[name] as string)\n    },\n  } as any\n}\n\nfunction createMockFileSystemFileHandle(\n  name: string,\n  data: string\n): FileSystemFileHandle {\n  return {\n    kind: 'file',\n    queryPermission: async () => 'granted',\n    getFile: async () => {\n      const blob = new Blob([data], { type: 'text/plain' })\n      return Object.assign(blob, {\n        name,\n        lastModified: 1,\n      })\n    },\n  } as any\n}\n","import * as BMS from 'bms'\nimport { fromBMSChart } from 'bemuse-notechart/lib/loader/BMSNotechartLoader'\nimport Player from '../player'\nimport _ from 'lodash'\n\nexport const tap = _.tap\n\nexport function chart(code = '') {\n  return BMS.Compiler.compile(code).chart\n}\n\nexport function notechart(code, options = {}) {\n  return fromBMSChart(chart(code), options)\n}\n\nexport function playerWithBMS(code, options = {}) {\n  return new Player(notechart(code, options), 1, options)\n}\n","import { getServerIndexFileUrl } from '.'\n\ndescribe('getServerIndexFileUrl', () => {\n  it('adds index.json', () => {\n    expect(getServerIndexFileUrl('https://server')).to.equal(\n      'https://server/index.json'\n    )\n  })\n  it('allows subdirectories', () => {\n    expect(getServerIndexFileUrl('https://server/dir/')).to.equal(\n      'https://server/dir/index.json'\n    )\n  })\n  it('allows trailing slashes', () => {\n    expect(getServerIndexFileUrl('https://server/dir')).to.equal(\n      'https://server/dir/index.json'\n    )\n  })\n  it('allows trailing /index.json', () => {\n    expect(getServerIndexFileUrl('https://server/index.json')).to.equal(\n      'https://server/index.json'\n    )\n  })\n})\n","import download from 'bemuse/utils/download'\nimport { decodeOGG } from './ogg'\n\ndescribe('ogg decoder', () => {\n  it('can decode ogg file', async () => {\n    const arrayBuffer = await download(\n      require('./fixtures/guitar-slice-007.ogg')\n    ).as('arraybuffer')\n    const decoded = await decodeOGG(new AudioContext(), arrayBuffer)\n    expect(decoded.duration).to.closeTo(0.04510204081632653, 0.001)\n  })\n})\n","\n      import API from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../common/temp/node_modules/.pnpm/css-loader@6.7.3_webpack@5.75.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../../../../common/temp/node_modules/.pnpm/postcss-loader@7.0.2_webpack@5.75.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[6].use[2]!./mocha-overrides.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../common/temp/node_modules/.pnpm/css-loader@6.7.3_webpack@5.75.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../../../../common/temp/node_modules/.pnpm/postcss-loader@7.0.2_webpack@5.75.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[6].use[2]!./mocha-overrides.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/cjs.js!../../../../common/temp/node_modules/.pnpm/css-loader@6.7.3_webpack@5.75.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../../../../common/temp/node_modules/.pnpm/postcss-loader@7.0.2_webpack@5.75.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[6].use[2]!./mocha-overrides.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/cjs.js!../../../../common/temp/node_modules/.pnpm/css-loader@6.7.3_webpack@5.75.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../../../../common/temp/node_modules/.pnpm/postcss-loader@7.0.2_webpack@5.75.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[6].use[2]!./mocha-overrides.css\";\n       export default content && content.locals ? content.locals : undefined;\n","export function loadSpecs() {\n  const context = require.context('..', true, /\\.spec\\.[jt]sx?$/)\n  for (const key of context.keys()) {\n    describe(key, () => {\n      context(key)\n    })\n  }\n}\n\nexport default loadSpecs\n","import chai from 'chai'\nimport chaiAsPromised from 'chai-as-promised'\nimport sinonChai from 'sinon-chai'\nimport sinon from 'sinon'\n\nexport function prepareTestEnvironment() {\n  mocha.setup('bdd')\n  chai.use(chaiAsPromised)\n  chai.use(sinonChai)\n  global.expect = chai.expect\n  global.sinon = sinon\n}\n\nexport default prepareTestEnvironment\n","// This file boots up Mocha\n//\nimport 'script-loader!mocha/mocha.js'\nimport 'style-loader!mocha/mocha.css'\nimport 'style-loader!./support/mocha-overrides.css'\n\nimport loadSpecs from './loadSpecs'\nimport prepareTestEnvironment from './prepareTestEnvironment'\n\n/* eslint import/no-webpack-loader-syntax: off */\n\nexport function main() {\n  setupMocha()\n  prepareTestEnvironment()\n  loadSpecs()\n  runMocha()\n}\n\nfunction setupMocha() {\n  const mochaElement = document.createElement('div')\n  mochaElement.id = 'mocha'\n  document.body.appendChild(mochaElement)\n}\n\nfunction runMocha() {\n  const specs = []\n  mocha\n    .run()\n    .on('test end', function reportFailedSpec(test) {\n      if (test.err) {\n        console.log(\n          '%cFailed Spec: %c%s\\n %c%s',\n          'color: black; font: 16px sans-serif',\n          'color: black; font: bold 16px sans-serif',\n          test.title,\n          'color: red; font: bold 1em sans-serif',\n          test.err.message\n        )\n        console.error(test.err.stack)\n      }\n    })\n    .on('test end', function (test) {\n      if (test.state === 'passed') {\n        specs.push({\n          fullName: test.title,\n          status: 'passed',\n        })\n      } else if (test.pending) {\n        specs.push({\n          fullName: test.title,\n          status: 'pending',\n        })\n      } else {\n        specs.push({\n          fullName: test.title,\n          status: 'failed',\n          failedExpectations: [\n            { message: test.err.message, stack: test.err.stack },\n          ],\n        })\n      }\n    })\n    .on('suite end', function (suite) {\n      if (suite.root) {\n        if (specs.some((spec) => spec.status === 'failed')) {\n          document.documentElement.classList.add('mocha-is-failing')\n        } else {\n          document.documentElement.classList.add('mocha-is-passing')\n        }\n      }\n    })\n}\n","import * as Collections from './Collections'\nimport * as LoadState from './LoadState'\n\nimport { given, shouldEqual } from 'circumstance'\n\ndescribe('Collections', function () {\n  it('should receive collection data', () =>\n    given(Collections.initialState)\n      .when(Collections.beginLoading('https://test-server/'))\n      .and(Collections.completeLoading('https://test-server/', { x: 1 }))\n      .then(\n        Collections.getCollectionByUrl('https://test-server/'),\n        LoadState.isCompleted,\n        shouldEqual(true)\n      ))\n  it('should allow errors', () =>\n    given(Collections.initialState)\n      .when(Collections.beginLoading('https://test-server/'))\n      .and(Collections.errorLoading('https://test-server/', new Error('oh no')))\n      .then(\n        Collections.getCollectionByUrl('https://test-server/'),\n        LoadState.isError,\n        shouldEqual(true)\n      ))\n})\n","import * as LoadState from './LoadState'\n\nimport { given, shouldEqual } from 'circumstance'\n\ndescribe('LoadState', function () {\n  it('initLoading should be loading', () =>\n    given(LoadState.initLoading()).then(LoadState.isLoading, shouldEqual(true)))\n  it('completeWithValue should turn it into completed', () =>\n    given(LoadState.initLoading())\n      .when(LoadState.completeWithValue(99))\n      .then(LoadState.isCompleted, shouldEqual(true))\n      .and(LoadState.value, shouldEqual(99)))\n  it('errorWithReason should turn it into error', () =>\n    given(LoadState.initLoading())\n      .when(LoadState.errorWithReason(new Error('x')))\n      .then(LoadState.isCompleted, shouldEqual(false))\n      .and(LoadState.isError, shouldEqual(true))\n      .and(LoadState.error, errorMessage, shouldEqual('x')))\n})\n\nconst errorMessage = (error) => error.message\n","import * as MusicSearchText from './MusicSearchText'\nimport { given, shouldEqual } from 'circumstance'\n\ndescribe('MusicSearchText', function () {\n  it('is initially blank', () =>\n    given(MusicSearchText.initialState)\n      .then(MusicSearchText.searchText, shouldEqual(''))\n      .and(MusicSearchText.inputText, shouldEqual('')))\n\n  it('should set inputText when typing', () =>\n    given(MusicSearchText.initialState)\n      .when(MusicSearchText.handleTextType('hello'))\n      .then(MusicSearchText.searchText, shouldEqual(''))\n      .and(MusicSearchText.inputText, shouldEqual('hello')))\n\n  it('should copy inputText to searchText when debounced', () =>\n    given(MusicSearchText.initialState)\n      .and(MusicSearchText.handleTextType('hello'))\n      .when(MusicSearchText.handleDebounce)\n      .then(MusicSearchText.searchText, shouldEqual('hello'))\n      .and(MusicSearchText.inputText, shouldEqual('hello')))\n\n  it('should allow setting text, changing both', () =>\n    given(MusicSearchText.initialState)\n      .when(MusicSearchText.setText('meow'))\n      .then(MusicSearchText.searchText, shouldEqual('meow'))\n      .and(MusicSearchText.inputText, shouldEqual('meow')))\n})\n","import * as MusicSelection from './MusicSelection'\nimport { given, shouldEqual } from 'circumstance'\n\ndescribe('MusicSelection', function () {\n  it('allows selecting song', () =>\n    given(MusicSelection.initialState)\n      .when(MusicSelection.selectSong('song1'))\n      .then(\n        MusicSelection.selectedSongGivenSongs([\n          { id: 'song0', title: 'TEST' },\n          { id: 'song1', title: 'BY MY SIDE' },\n        ]),\n        shouldEqual({ id: 'song1', title: 'BY MY SIDE' })\n      ))\n  it('should fallback to avilaable song if not available', () =>\n    given(MusicSelection.initialState)\n      .when(MusicSelection.selectSong('song1'))\n      .then(\n        MusicSelection.selectedSongGivenSongs([\n          { id: 'song0', title: 'TEST' },\n          { id: 'song2', title: 'RUNNING OUT' },\n        ]),\n        shouldEqual({ id: 'song0', title: 'TEST' })\n      ))\n  it('should allow selecting chart', () =>\n    given(MusicSelection.initialState)\n      .when(MusicSelection.selectChart('song1', 'chart1.bml', 8))\n      .then((state) => state.selectedSongId, shouldEqual('song1'))\n      .and((state) => state.selectedChartId, shouldEqual('chart1.bml'))\n      .and((state) => state.selectedChartLevel, shouldEqual(8)))\n\n  const givenSelectedChart = given(MusicSelection.initialState).and(\n    MusicSelection.selectChart('song1', 'chart1.bml', 8)\n  )\n  it('selects the chart if available', () =>\n    givenSelectedChart.then(\n      MusicSelection.selectedChartGivenCharts([\n        { file: 'chart0.bml', info: { level: 1 } },\n        { file: 'chart1.bml', info: { level: 8 } },\n        { file: 'chart2.bml', info: { level: 12 } },\n      ]),\n      shouldEqual({ file: 'chart1.bml', info: { level: 8 } })\n    ))\n  it('selects chart with closest level if matching chart not available', () =>\n    givenSelectedChart.then(\n      MusicSelection.selectedChartGivenCharts([\n        { file: 'pattern0.bml', info: { level: 2 } },\n        { file: 'pattern1.bml', info: { level: 9 } },\n        { file: 'pattern2.bml', info: { level: 10 } },\n      ]),\n      shouldEqual({ file: 'pattern1.bml', info: { level: 9 } })\n    ))\n})\n","import * as Options from './Options'\n\nimport { given, shouldEqual } from 'circumstance'\n\nimport assert from 'assert'\n\nconst update = (action) => (state) =>\n  Options.optionsSlice.reducer(state, action)\nconst actions = Options.optionsSlice.actions\n\ndescribe('Options', () => {\n  describe('Lane cover', () => {\n    it('should be a number', () => {\n      assert(Options.laneCover({ 'player.P1.lane-cover': '0' }) === 0)\n    })\n    it('should be maximum 50%', () => {\n      assert(Options.laneCover({ 'player.P1.lane-cover': '99' }) === 0.5)\n    })\n    it('should be minimum -50%', () => {\n      assert(Options.laneCover({ 'player.P1.lane-cover': '-99' }) === -0.5)\n    })\n  })\n\n  describe('key config', () => {\n    it('can be set and get', () => {\n      given(Options.initialState)\n        .when(\n          update(\n            actions.CHANGE_KEY_MAPPING({ mode: 'KB', key: '4', keyCode: '65' })\n          )\n        )\n        .then(Options.getKeyMapping('KB', '4'), shouldEqual('65'))\n    })\n    it('can be retrieved for current mode by column', () => {\n      given(Options.initialState)\n        .when(update(actions.CHANGE_PLAY_MODE({ mode: 'KB' })))\n        .then(Options.keyboardMapping, (mapping) => {\n          assert(mapping['4'] === '32') // KB mode, 4th button is space.\n        })\n\n      given(Options.initialState)\n        .when(update(actions.CHANGE_PLAY_MODE({ mode: 'BM' })))\n        .then(Options.keyboardMapping, (mapping) => {\n          assert(mapping['4'] === '68') // BM mode, 4th button is D.\n        })\n    })\n    describe('key setting progression (in options screen)', () => {\n      it('SC  SC2', () => {\n        assert(Options.nextKeyToEdit('SC', 'left') === 'SC2')\n        assert(Options.nextKeyToEdit('SC', 'right') === 'SC2')\n      })\n      it('1  2', () => {\n        assert(Options.nextKeyToEdit('1', 'left') === '2')\n        assert(Options.nextKeyToEdit('1', 'right') === '2')\n        assert(Options.nextKeyToEdit('1', 'off') === '2')\n      })\n      it('7  done (scratch off / left)', () => {\n        assert(Options.nextKeyToEdit('7', 'off') === null)\n        assert(Options.nextKeyToEdit('7', 'left') === null)\n      })\n      it('7  SC (scratch right)', () => {\n        assert(Options.nextKeyToEdit('7', 'right') === 'SC')\n      })\n      it('SC2  done (scratch right)', () => {\n        assert(Options.nextKeyToEdit('SC2', 'right') === null)\n      })\n      it('SC2  1 (scratch left)', () => {\n        assert(Options.nextKeyToEdit('SC2', 'left') === '1')\n      })\n    })\n  })\n\n  describe('speed', () => {\n    it('can be set and get', () => {\n      given(Options.initialState)\n        .when(update(actions.CHANGE_SPEED({ speed: 4.5 })))\n        .then(Options.speed, shouldEqual(4.5))\n    })\n  })\n\n  describe('lead time', () => {\n    it('defaults to 1685 ms (initial speed of tutorial)', () => {\n      given(Options.initialState).then(Options.leadTime, shouldEqual(1685))\n    })\n  })\n\n  describe('scratch position', () => {\n    it('switches to keyboard mode if off', () => {\n      given(Options.initialState)\n        .when(update(actions.CHANGE_SCRATCH_POSITION({ position: 'off' })))\n        .then(Options.scratchPosition, shouldEqual('off'))\n        .and((state) => {\n          assert(state['player.P1.mode'] === 'KB')\n        })\n    })\n    it('switches to BMS mode if on', () => {\n      given(Options.initialState)\n        .when(update(actions.CHANGE_SCRATCH_POSITION({ position: 'right' })))\n        .then(Options.scratchPosition, shouldEqual('right'))\n        .and((state) => {\n          assert(state['player.P1.mode'] === 'BM')\n        })\n    })\n    it('remembers previous scratch position prior to turning off', () => {\n      given(Options.initialState)\n        .when(update(actions.CHANGE_SCRATCH_POSITION({ position: 'right' })))\n        .and(update(actions.CHANGE_SCRATCH_POSITION({ position: 'off' })))\n        .then(Options.scratchPosition, shouldEqual('off'))\n        .and((state) => {\n          assert(state['player.P1.mode'] === 'KB')\n          assert(state['player.P1.scratch'] === 'right')\n        })\n    })\n  })\n\n  describe('background animations', () => {\n    itCanBeToggled({\n      check: Options.isBackgroundAnimationsEnabled,\n      toggle: update(actions.TOGGLE_BACKGROUND_ANIMATIONS()),\n      defaultSetting: true,\n    })\n  })\n\n  describe('auto velocity', () => {\n    itCanBeToggled({\n      check: Options.isAutoVelocityEnabled,\n      toggle: update(actions.TOGGLE_AUTO_VELOCITY()),\n      defaultSetting: false,\n    })\n  })\n\n  describe('expert gauge', () => {\n    itCanBeToggled({\n      check: Options.isGaugeEnabled,\n      toggle: update(actions.TOGGLE_GAUGE()),\n      defaultSetting: false,\n    })\n  })\n\n  describe('new feature announcements', () => {\n    it('should track its acknowledgement', () => {\n      given(Options.initialState).then(\n        Options.hasAcknowledged('twitter'),\n        shouldEqual(false)\n      )\n    })\n    it('can be acknowledged by the user', () => {\n      given(Options.initialState)\n        .when(update(actions.ACKNOWLEDGE({ featureKey: 'twitter' })))\n        .then(Options.hasAcknowledged('twitter'), shouldEqual(true))\n    })\n  })\n\n  describe('auto/input latency', () => {\n    it('defaults to 0', () => {\n      given(Options.initialState).then(\n        Options.audioInputLatency,\n        shouldEqual(0)\n      )\n    })\n    it('can be adjusted', () => {\n      given(Options.initialState)\n        .when(\n          update(\n            actions.CHANGE_AUDIO_INPUT_LATENCY({\n              latency: 32,\n            })\n          )\n        )\n        .then(Options.audioInputLatency, shouldEqual(32))\n    })\n  })\n\n  describe('last used version', () => {\n    it('should be tracked so that it can display whats new dialog', () => {\n      given(Options.initialState)\n        .when(\n          update(\n            actions.UPDATE_LAST_SEEN_VERSION({\n              newVersion: '50.0',\n            })\n          )\n        )\n        .then(Options.lastSeenVersion, shouldEqual('50.0'))\n    })\n  })\n\n  function itCanBeToggled({ check, toggle, defaultSetting }) {\n    it('defaults to ' + defaultSetting, () => {\n      given(Options.initialState).then(check, shouldEqual(defaultSetting))\n    })\n    it('can be toggled', () => {\n      given(Options.initialState)\n        .when(toggle)\n        .then(check, shouldEqual(!defaultSetting))\n    })\n    it('can be toggled again', () => {\n      given(Options.initialState)\n        .when(toggle)\n        .and(toggle)\n        .then(check, shouldEqual(defaultSetting))\n    })\n  }\n})\n","import assert from 'assert'\n\nimport createAutoVelocity from './createAutoVelocity'\n\ndescribe('createAutoVelocity', function () {\n  describe('when disabled', function () {\n    it('initial speed should be from options', () => {\n      const autoVelocity = createAutoVelocity({\n        enabled: false,\n        initialSpeed: 3.8,\n        desiredLeadTime: 1000,\n        songBPM: 220,\n      })\n      assert(autoVelocity.getInitialSpeed() === 3.8)\n    })\n    it('should save speed after playing game', () => {\n      const autoVelocity = createAutoVelocity({\n        enabled: false,\n        initialSpeed: 3.8,\n        desiredLeadTime: 1000,\n        songBPM: 220,\n      })\n      const saveSpeed = sinon.spy()\n      const saveLeadTime = sinon.spy()\n      autoVelocity.handleGameFinish(2.4, { saveSpeed, saveLeadTime })\n      assert(saveSpeed.calledWith(2.4))\n      assert(!saveLeadTime.called)\n    })\n  })\n\n  describe('when enabled', function () {\n    it('initial speed should be from songs BPM', () => {\n      const autoVelocity = createAutoVelocity({\n        enabled: true,\n        initialSpeed: 3.8,\n        desiredLeadTime: 1200,\n        songBPM: 140,\n      })\n      assert(autoVelocity.getInitialSpeed() === 1.8)\n    })\n    it('should also take into consideration the lane cover', () => {\n      const autoVelocity = createAutoVelocity({\n        enabled: true,\n        initialSpeed: 3.8,\n        desiredLeadTime: 1200,\n        songBPM: 140,\n        laneCover: 0.5,\n      })\n      assert(autoVelocity.getInitialSpeed() === 0.9)\n    })\n    it('should also take into consideration the lane cover', () => {\n      const autoVelocity = createAutoVelocity({\n        enabled: true,\n        initialSpeed: 3.8,\n        desiredLeadTime: 1200,\n        songBPM: 140,\n        laneCover: -0.5,\n      })\n      assert(autoVelocity.getInitialSpeed() === 0.9)\n    })\n    it('initial speed should be from songs BPM [ANOTHER]', () => {\n      const autoVelocity = createAutoVelocity({\n        enabled: true,\n        initialSpeed: 3.8,\n        desiredLeadTime: 600,\n        songBPM: 162,\n      })\n      assert(autoVelocity.getInitialSpeed() === 3.1)\n    })\n    it('initial speed should be from songs BPM [TUTORIAL]', () => {\n      const autoVelocity = createAutoVelocity({\n        enabled: true,\n        initialSpeed: 3.8,\n        desiredLeadTime: 1685,\n        songBPM: 178,\n      })\n      assert(autoVelocity.getInitialSpeed() === 1.0)\n    })\n    it('should save speed and lead time after playing game', () => {\n      const autoVelocity = createAutoVelocity({\n        enabled: true,\n        initialSpeed: 3.8,\n        desiredLeadTime: 1685,\n        songBPM: 178,\n      })\n      const saveSpeed = sinon.spy()\n      const saveLeadTime = sinon.spy()\n      autoVelocity.handleGameFinish(3, { saveSpeed, saveLeadTime })\n      assert(saveSpeed.calledWith(3))\n      assert(saveLeadTime.calledWith(562))\n    })\n    it('should not save if speed remains the same', () => {\n      const autoVelocity = createAutoVelocity({\n        enabled: true,\n        initialSpeed: 3.8,\n        desiredLeadTime: 1685,\n        songBPM: 178,\n      })\n      const saveSpeed = sinon.spy()\n      const saveLeadTime = sinon.spy()\n      autoVelocity.handleGameFinish(1, { saveSpeed, saveLeadTime })\n      assert(saveSpeed.calledWith(1))\n      assert(!saveLeadTime.called)\n    })\n  })\n})\n","import assert from 'assert'\n\nimport findMatchingSong from './findMatchingSong'\n\ndescribe('selecting a song by title', function () {\n  // Using &song=... URL parameter, we can specify what song to be selected\n  // at the beginning\n  const songs = [\n    'DE/CON-STRUKT',\n    'Everyday evermore',\n    'Chicken',\n    'Piece of Mine',\n    'Goliath',\n  ]\n  const getTitle = (song) => song\n\n  it('finds a matching song', () => {\n    assert(\n      findMatchingSong({ songs, getTitle, title: 'DE/CON-STRUKT' }) ===\n        'DE/CON-STRUKT'\n    )\n  })\n\n  it('matches case-insensitively', () => {\n    assert(\n      findMatchingSong({ songs, getTitle, title: 'everyday evermore' }) ===\n        'Everyday evermore'\n    )\n  })\n})\n","import assert from 'assert'\n\nimport getLR2Score from './getLR2Score'\n\ndescribe('Calculating LR2 score', function () {\n  const LR2_NORMAL_TIMEGATE = [18, 40]\n  it('perfect great = 2 points', () => {\n    assert(getLR2Score([0.001], LR2_NORMAL_TIMEGATE) === 2)\n  })\n  it('great = 1 point', () => {\n    assert(getLR2Score([0.02], LR2_NORMAL_TIMEGATE) === 1)\n  })\n  it('other = 0 points', () => {\n    assert(getLR2Score([0.06], LR2_NORMAL_TIMEGATE) === 0)\n  })\n  it('sums the points', () => {\n    assert(getLR2Score([0.01, 0.02, 0.03, 0.05], LR2_NORMAL_TIMEGATE) === 4)\n  })\n  it('works with arbitrary timegates', () => {\n    assert(getLR2Score([0.01, 0.02, 0.03, 0.05], [35, 70]) === 7)\n  })\n})\n","import {\n  collectionsSlice,\n  selectSelectedChart,\n  selectSelectedSong,\n} from './ReduxState'\n\nimport configureStore from './configureStore'\nimport { optionsSlice } from '../entities/Options'\n\ndescribe('ReduxState', function () {\n  describe('integration test', function () {\n    const store = configureStore()\n    store.dispatch(\n      collectionsSlice.actions.COLLECTION_LOADING_BEGAN({\n        url: '/music',\n      })\n    )\n    store.dispatch(\n      optionsSlice.actions.LOADED_FROM_STORAGE({\n        options: {\n          'player.P1.mode': 'BM',\n          'player.P1.scratch': 'left',\n        },\n      })\n    )\n    store.dispatch(\n      collectionsSlice.actions.COLLECTION_LOADED({\n        url: '/music',\n        data: {\n          songs: [\n            {\n              title: 'Exargon',\n              id: 'exargon',\n              charts: [\n                {\n                  keys: '7K',\n                  file: 'exargon_7another.bms',\n                  info: { level: 12 },\n                },\n                {\n                  keys: '7K',\n                  file: 'exargon_7hyper.bms',\n                  info: { level: 10 },\n                },\n                {\n                  keys: '7K',\n                  file: 'exargon_7normal.bms',\n                  info: { level: 8 },\n                },\n              ],\n            },\n            {\n              title: 'Anhedonia',\n              id: 'anhedonia',\n              charts: [\n                {\n                  keys: '7K',\n                  file: '01_anhedonia_n.bms',\n                  info: { level: 6 },\n                },\n                {\n                  keys: '7K',\n                  file: '00_anhedonia_7b.bms',\n                  info: { level: 1 },\n                },\n              ],\n            },\n            {\n              title: 'Blooming',\n              id: 'blooming',\n              charts: [\n                {\n                  keys: '7K',\n                  file: 'Trish_Blooming_7key_Another.bms',\n                  info: { level: 11 },\n                },\n                {\n                  keys: '7K',\n                  file: 'Trish_Blooming_7key_Feeling.bms',\n                  info: { level: 13 },\n                },\n              ],\n            },\n          ],\n        },\n      })\n    )\n\n    it('should intially selected easiest song and chart', () => {\n      const state = store.getState()\n      expect(selectSelectedSong(state).title).to.equal('Anhedonia')\n      expect(selectSelectedChart(state).file).to.equal('00_anhedonia_7b.bms')\n    })\n  })\n})\n","import { loadSongFromResources } from './'\n\ndescribe('SongLoader', function () {\n  function buffer(text) {\n    return Promise.resolve(Buffer.from(text).buffer)\n  }\n\n  function createResources(files) {\n    return {\n      fileList: Promise.resolve(Object.keys(files)),\n      file(name) {\n        return Promise.resolve(files[name])\n      },\n    }\n  }\n\n  describe('with BMS files', function () {\n    const resources = createResources({\n      '01.bme': {\n        read() {\n          return buffer('#TITLE meow [NORMAL]\\n#BPM 90\\n#00111:01')\n        },\n      },\n      '02.bms': {\n        read() {\n          return buffer('#TITLE meow [HYPER]\\n#BPM 90\\n#00111:01')\n        },\n      },\n      '03.bml': {\n        read() {\n          return buffer('#TITLE meow [ANOTHER]\\n#BPM 100\\n#00111:01')\n        },\n      },\n    })\n    let song\n    before(async function () {\n      const options = { onMessage: (msg) => console.log(msg) }\n      const x = await loadSongFromResources(resources, options)\n      song = x\n    })\n    it('should have correct title', function () {\n      expect(song.title).to.equal('meow')\n    })\n    it('should have correct number of charts', function () {\n      expect(song.charts).to.have.length(3)\n    })\n    it('should have resources key pointing to the resources', function () {\n      expect(song.resources).to.equal(resources)\n    })\n  })\n\n  describe('with bmson files', function () {\n    const resources = createResources({\n      '01.bmson': {\n        read() {\n          return buffer('{\"info\":{\"title\":\"meow\",\"initBPM\":90}}')\n        },\n      },\n    })\n    let song\n    before(async function () {\n      const x = await loadSongFromResources(resources)\n      song = x\n    })\n    it('should have correct title', function () {\n      expect(song.title).to.equal('meow')\n    })\n    it('should have correct number of charts', function () {\n      expect(song.charts).to.have.length(1)\n    })\n  })\n})\n","import PlayerAudio from './player-audio'\nimport { playerWithBMS } from '../test-helpers'\n\ndescribe('PlayerAudio', function () {\n  let player\n  let audio\n  let waveFactory\n\n  function setup(_player) {\n    player = _player\n    waveFactory = {\n      playAuto: sinon.stub().returns({}),\n      playNote: sinon.stub().returns({}),\n      playFree: sinon.stub().returns({}),\n    }\n    audio = new PlayerAudio({ player, waveFactory })\n  }\n\n  it('should play autokeysounds on correct time', function () {\n    setup({\n      notechart: {\n        autos: [\n          { time: 1, keysound: '0x' },\n          { time: 2, keysound: '0y' },\n          { time: 2, keysound: '0z' },\n        ],\n        notes: [],\n      },\n      options: {\n        autosound: false,\n      },\n    })\n    audio.update(0)\n    expect(waveFactory.playAuto).to.have.callCount(0)\n    audio.update(1)\n    expect(waveFactory.playAuto).to.have.callCount(1)\n    expect(waveFactory.playAuto).to.have.been.calledWithMatch({\n      keysound: '0x',\n    })\n    audio.update(2)\n    expect(waveFactory.playAuto).to.have.callCount(3)\n  })\n\n  it('should play notes automatically when autosound is on', function () {\n    setup({\n      notechart: {\n        autos: [],\n        notes: [{ time: 1, keysound: '0x' }],\n      },\n      options: {\n        autosound: true,\n      },\n    })\n    audio.update(1)\n    expect(waveFactory.playNote).to.have.been.calledWithMatch({\n      keysound: '0x',\n    })\n  })\n\n  it('should not play notes automatically when autosound is off', function () {\n    setup({\n      notechart: {\n        autos: [],\n        notes: [{ time: 1, keysound: '0x' }],\n      },\n      options: {},\n    })\n    audio.update(1)\n    void expect(waveFactory.playNote).to.not.have.been.called\n  })\n\n  it('should play notes ahead of time', function () {\n    setup({\n      notechart: {\n        autos: [{ time: 1, keysound: '0x' }],\n        notes: [],\n      },\n      options: {},\n    })\n    audio.update(0.999)\n    expect(waveFactory.playAuto).to.have.been.calledWithMatch({\n      keysound: '0x',\n    })\n    expect(waveFactory.playAuto.getCall(0).args[1]).to.be.closeTo(0.001, 1e-5)\n  })\n\n  it('should play hit notes', function () {\n    setup(playerWithBMS())\n    audio.update(0.999, {\n      notifications: {\n        sounds: [{ note: { keysound: '0x' }, type: 'hit', judgment: 1 }],\n      },\n      stats: {},\n    })\n    expect(waveFactory.playNote).to.have.been.calledWithMatch({\n      keysound: '0x',\n    })\n  })\n\n  it('badly hit note should sound off-pitch', function () {\n    setup(playerWithBMS())\n    const instance = {\n      bad: sinon.stub(),\n    }\n    waveFactory.playNote.returns(instance)\n    audio.update(0.999, {\n      notifications: {\n        sounds: [{ note: { keysound: '0x' }, type: 'hit', judgment: 4 }],\n      },\n      stats: {},\n    })\n    void expect(instance.bad).to.have.been.called\n  })\n\n  it('should work even without audio', function () {\n    setup(playerWithBMS())\n    waveFactory.playNote.returns(null)\n    audio.update(0.999, {\n      notifications: {\n        sounds: [{ note: { keysound: '0x' }, type: 'hit', judgment: 4 }],\n      },\n      stats: {},\n    })\n  })\n\n  it('should stop sound when broken', function () {\n    setup(playerWithBMS())\n    const note = { keysound: '0x' }\n    const instance = { stop: sinon.spy() }\n    waveFactory.playNote.returns(instance)\n    audio.update(0.999, {\n      notifications: {\n        sounds: [{ note: note, type: 'hit' }],\n      },\n      stats: {},\n    })\n    audio.update(1.1, {\n      notifications: {\n        sounds: [{ note: note, type: 'break' }],\n      },\n      stats: {},\n    })\n    void expect(instance.stop).to.have.been.called\n  })\n\n  it('should play sounds when hitting blank space', function () {\n    setup(playerWithBMS())\n    audio.update(0.999, {\n      notifications: {\n        sounds: [{ note: { keysound: '0x' }, type: 'free' }],\n      },\n      stats: {},\n    })\n    expect(waveFactory.playFree).to.have.been.calledWithMatch({\n      keysound: '0x',\n    })\n  })\n\n  it('should play hit note once', function () {\n    setup(playerWithBMS())\n    const note = { keysound: '0x' }\n    audio.update(0.999, {\n      notifications: {\n        sounds: [{ note: note, type: 'hit' }],\n      },\n      stats: {},\n    })\n    audio.update(1.0, {\n      notifications: {\n        sounds: [{ note: note, type: 'hit' }],\n      },\n      stats: {},\n    })\n    expect(waveFactory.playNote).to.have.callCount(1)\n  })\n})\n","import delay from 'delay'\n\nimport WaveFactory from './wave-factory'\n\nfunction k(id) {\n  return { keysound: id }\n}\n\ndescribe('WaveFactory', function () {\n  let master\n  let sample\n  let samples\n  let map\n  let waveFactory\n  beforeEach(function () {\n    master = { group: sinon.stub() }\n    sample = { play: sinon.stub() }\n    samples = { 'wow.wav': sample }\n    map = { '0z': 'wow.wav' }\n    waveFactory = new WaveFactory(master, samples, map)\n  })\n  describe('playAuto', function () {\n    it('should play an autokeysound', function () {\n      waveFactory.playAuto(k('0z'), 0.1)\n      expect(sample.play).to.have.been.calledWith(0.1)\n    })\n  })\n  describe('playNote', function () {\n    it('should play the keysound', function () {\n      waveFactory.playNote(k('0z'), 0.1)\n      expect(sample.play).to.have.been.calledWith(0.1)\n    })\n    it('should stop old sound', function () {\n      const instance = { stop: sinon.spy() }\n      sample.play.returns(instance)\n      waveFactory.playNote(k('0z'), 0)\n      waveFactory.playNote(k('0z'), 0)\n      return delay(0).then(() => expect(instance.stop).to.have.callCount(1))\n    })\n  })\n  describe('playFree', function () {\n    it('should play the keysound', function () {\n      waveFactory.playFree(k('0z'))\n      void expect(sample.play).to.have.been.called\n    })\n  })\n})\n","import assert from 'assert'\n\nimport { getGauge } from './Gauge'\n\ndescribe('an inactive gauge', () => {\n  it('does not display anything', () => {\n    const gauge = getGauge('off')\n    gauge.update()\n    assert(gauge.shouldDisplay() === false)\n    assert(gauge.getPrimary() === 0)\n    assert(gauge.getSecondary() === 0)\n  })\n})\n\ndescribe('a hope gauge', () => {\n  function setup(maxPossibleScore, progress) {\n    const gauge = getGauge('hope')\n    const [numJudgments, totalCombo] = progress\n    const playerStats = { maxPossibleScore, numJudgments, totalCombo }\n    const playerState = { stats: playerStats }\n    gauge.update(playerState)\n    return gauge\n  }\n  it('should be displayed if user can attain A rank', () => {\n    const gauge = setup(450001, [50, 100])\n    assert(gauge.shouldDisplay())\n  })\n  it('should be hidden if user cannot attain A rank anymore', () => {\n    const gauge = setup(449999, [50, 100])\n    assert(!gauge.shouldDisplay())\n  })\n  describe('primary', () => {\n    it('starts at half', () => {\n      const gauge = setup(555555, [0, 100])\n      assert(gauge.getPrimary() === 0.5)\n    })\n    it('completely fills in if player finishes with 520000', () => {\n      const gauge = setup(555555, [100, 100])\n      assert(gauge.getPrimary() === 1)\n    })\n    it('is active if player can still attain S rank', () => {\n      const gauge = setup(500001, [100, 100])\n      assert(gauge.getPrimary() > 0)\n      assert(gauge.getPrimary() < 0.01)\n    })\n    it('is inactive if player cannot attain S rank anymore', () => {\n      const gauge = setup(499999, [100, 100])\n      assert(gauge.getPrimary() === 0)\n    })\n  })\n  describe('secondary', () => {\n    it('inactive while player still can attain S rank', () => {\n      const gauge = setup(500001, [40, 100])\n      assert(gauge.getSecondary() === 0)\n    })\n    it('active while player still can attain A rank', () => {\n      const gauge = setup(499999, [40, 100])\n      assert(gauge.getSecondary() >= 0.99)\n    })\n    it('zeroes out when user cannot attain A rank anymore', () => {\n      const gauge = setup(449999, [40, 100])\n      assert(gauge.getSecondary() === 0)\n    })\n  })\n  describe('extra', () => {\n    it('starts at 0', () => {\n      const gauge = setup(555555, [0, 100])\n      assert(gauge.getExtra() === 0)\n    })\n    it('is not activated if hoped score would not exceed 520000', () => {\n      const gauge = setup(519999, [100, 100])\n      assert(gauge.getExtra() === 0)\n    })\n    it('is activated if hoped score would exceed 520000', () => {\n      const gauge = setup(520001, [100, 100])\n      assert(gauge.getExtra() > 0)\n    })\n    it('completely fills in if player finishes with 540000', () => {\n      const preGauge = setup(539999, [100, 100])\n      assert(preGauge.getExtra() < 1)\n      const gauge = setup(540000, [100, 100])\n      assert(gauge.getExtra() === 1)\n    })\n  })\n})\n","import NoteArea from './note-area'\n\ndescribe('NoteArea', function () {\n  it('allows querying the visible note from a list of notes', function () {\n    const notes = [\n      { position: 1, column: 'A' },\n      { position: 2, column: 'A' },\n      { position: 3, column: 'A' },\n      { position: 4, column: 'A' },\n      { position: 5, column: 'A' },\n      { position: 6, column: 'A' },\n      { position: 10, end: { position: 12 }, column: 'B' },\n      { position: 11, column: 'C' },\n    ]\n    const area = new NoteArea(notes, [])\n    expect(area.getVisibleNotes(1.5, 3.5)).to.have.length(2)\n    expect(area.getVisibleNotes(2.5, 3.5, 1)).to.have.length(2)\n    expect(area.getVisibleNotes(-1, 7)).to.have.length(6)\n    expect(area.getVisibleNotes(8, 10.1)).to.have.length(1)\n    expect(area.getVisibleNotes(8, 10.1)).to.have.length(1)\n    expect(area.getVisibleNotes(8, 14)).to.have.length(2)\n    expect(area.getVisibleNotes(11.5, 14)).to.have.length(1)\n    expect(area.getVisibleNotes(12.5, 14)).to.have.length(0)\n  })\n\n  it('allows querying barlines', function () {\n    const area = new NoteArea(\n      [],\n      [\n        { beat: 0, position: 0 },\n        { beat: 4, position: 4 },\n        { beat: 7, position: 7 },\n      ]\n    )\n    expect(area.getVisibleBarLines(1.5, 4.5)).to.have.length(1)\n  })\n})\n","import assert from 'assert'\n\nimport PlayerDisplay from './player-display'\nimport { notechart, playerWithBMS, tap } from '../test-helpers'\n\ndescribe('PlayerDisplay', function () {\n  let display\n  let data\n\n  function setup(player) {\n    display = new PlayerDisplay(player, {})\n  }\n\n  function update(t1, t2, state) {\n    data = display.update(t1, t2, state)\n  }\n\n  it('reacts to input', function () {\n    const inputState = (inputs) => makeState({ input: new Map(inputs) })\n\n    setup({\n      notechart: notechart(),\n      columns: ['wow'],\n      options: {\n        placement: 'center',\n        scratch: 'left',\n      },\n    })\n\n    update(555, 0.5, inputState([['wow', { value: 0, changed: false }]]))\n    assert(data['wow_active'] === 0)\n\n    update(557, 2.5, inputState([['wow', { value: 1, changed: true }]]))\n    assert(data['wow_active'] === 1)\n    assert(data['wow_down'] === 557)\n\n    update(558, 3.5, inputState([['wow', { value: 0, changed: true }]]))\n    assert(data['wow_active'] === 0)\n    assert(data['wow_up'] === 558)\n  })\n\n  describe('with note', function () {\n    beforeEach(function () {\n      setup(playerWithBMS('#BPM 60\\n#00111:11'))\n    })\n    it('displays unjudged notes', function () {\n      update(3.95, 3.95, blankState())\n      assert(data['note_1'].length === 1)\n    })\n    it('hides judged notes', function () {\n      const state = tap(blankState(), (s) => s.getNoteStatus.returns('judged'))\n      update(3.95, 3.95, state)\n      assert(!(data['note_1'] || []).length)\n    })\n  })\n\n  describe('with long note', function () {\n    beforeEach(function () {\n      setup(playerWithBMS('#BPM 60\\n#00151:1111'))\n    })\n    it('displays unjudged long notes', function () {\n      update(3.95, 3.95, blankState())\n      assert(data['longnote_1'].length === 1)\n      assert(!data['longnote_1'][0].active)\n      assert(!data['longnote_1'][0].missed)\n    })\n    it('displays holding long notes', function () {\n      const state = tap(blankState(), (s) => s.getNoteJudgment.returns(1))\n      update(3.95, 3.95, state)\n      assert(data['longnote_1'][0].active)\n    })\n    it('displays holding long notes event it is bad', function () {\n      const state = tap(blankState(), (s) => s.getNoteJudgment.returns(4))\n      update(3.95, 3.95, state)\n      assert(data['longnote_1'][0].active)\n    })\n    it('displays missed long notes', function () {\n      const state = blankState()\n      state.getNoteJudgment.returns(-1)\n      state.getNoteStatus.returns('judged')\n      update(3.95, 3.95, state)\n      assert(data['longnote_1'][0].missed)\n    })\n  })\n\n  describe('with notification', function () {\n    beforeEach(function () {\n      setup(playerWithBMS())\n    })\n    it('sets judgment time', function () {\n      const info = { judgment: 1, delta: 0, combo: 123, column: 'SC' }\n      update(12, 34, makeState({ notifications: { judgments: [info] } }))\n      assert(data['judge_1'] === 12)\n      assert(data['judge_deviation_none'] === 12)\n    })\n    it('sets judgment deviation (early)', function () {\n      const info = { judgment: 2, delta: -0.03, combo: 123, column: 'SC' }\n      update(12, 34, makeState({ notifications: { judgments: [info] } }))\n      assert(data['judge_2'] === 12)\n      assert(data['judge_deviation_early'] === 12)\n    })\n    it('sets judgment deviation (late)', function () {\n      const info = { judgment: 2, delta: 0.03, combo: 123, column: 'SC' }\n      update(12, 34, makeState({ notifications: { judgments: [info] } }))\n      assert(data['judge_2'] === 12)\n      assert(data['judge_deviation_late'] === 12)\n    })\n    it('sets judgment missed time', function () {\n      const info = { judgment: -1, delta: 0, combo: 0, column: 'SC' }\n      update(12, 34, makeState({ notifications: { judgments: [info] } }))\n      assert(data['judge_missed'] === 12)\n    })\n    it('sets combo', function () {\n      const info = { judgment: 1, delta: 0, combo: 123, column: 'SC' }\n      update(12, 34, makeState({ notifications: { judgments: [info] } }))\n      assert(data['combo'] === 123)\n    })\n    it('sets note explode time', function () {\n      const info = { judgment: 1, delta: 0, combo: 123, column: 'SC' }\n      update(12, 34, makeState({ notifications: { judgments: [info] } }))\n      assert(data['SC_explode'] === 12)\n    })\n    it('does not set note explode time if missed', function () {\n      const info = { judgment: -1, delta: 0, combo: 123, column: 'SC' }\n      update(12, 34, makeState({ notifications: { judgments: [info] } }))\n      assert(!(data['SC_explode'] || []).length)\n    })\n  })\n\n  // Mock PlayerState\n  function blankState() {\n    return {\n      speed: 1,\n      input: { get: () => ({ value: 0, changed: false }) },\n      notifications: { judgments: [] },\n      getNoteStatus: sinon.stub().returns('unjudged'),\n      getNoteJudgment: sinon.stub().returns(0),\n      stats: { score: 0 },\n    }\n  }\n\n  function makeState(object) {\n    return Object.assign(blankState(), object)\n  }\n})\n","import GameInput from './'\n\ndescribe('GameInput', function () {\n  let input\n  let plugin\n\n  beforeEach(function () {\n    input = new GameInput()\n    plugin = {\n      out: {},\n      get() {\n        return this.out\n      },\n    }\n    input.use(plugin)\n  })\n\n  it('should return control with default value of 0', function () {\n    expect(input.get('wow').value).to.equal(0)\n  })\n\n  describe('Control#value', function () {\n    it('should return control with correct value', function () {\n      plugin.out = { wow: -1 }\n      input.update()\n      expect(input.get('wow').value).to.equal(-1)\n    })\n  })\n\n  describe('Control#changed', function () {\n    it('should return changed state between last update', function () {\n      input.update()\n      expect(input.get('wow').changed).to.equal(false)\n      plugin.out = { wow: 0 }\n      input.update()\n      expect(input.get('wow').changed).to.equal(false)\n      plugin.out = { wow: -1 }\n      input.update()\n      expect(input.get('wow').changed).to.equal(true)\n      plugin.out = { wow: 1 }\n      input.update()\n      expect(input.get('wow').changed).to.equal(true)\n      plugin.out = { wow: 1 }\n      input.update()\n      expect(input.get('wow').changed).to.equal(false)\n      input.update()\n      expect(input.get('wow').changed).to.equal(false)\n      plugin.out = { wow: 0 }\n      input.update()\n      expect(input.get('wow').changed).to.equal(true)\n    })\n  })\n})\n","import * as PIXI from 'pixi.js'\nimport TouchPlugin from './touch-plugin'\n\ndescribe('TouchPlugin', function () {\n  it('should get value when touching', function () {\n    const instance = new TouchPlugin({\n      skinData: {},\n      refs: {\n        p1_1: new Set([\n          { getBounds: () => new PIXI.Rectangle(64, 64, 64, 64) },\n        ]),\n        p1_2: new Set([\n          { getBounds: () => new PIXI.Rectangle(128, 64, 64, 64) },\n        ]),\n      },\n      input: [\n        { x: 72, y: 72, id: 'touch1' },\n        { x: 32, y: 32, id: 'touch2' },\n      ],\n    })\n    const data = instance.get()\n    expect(data['p1_1']).to.equal(1)\n    expect(data['p1_2']).to.equal(0)\n  })\n})\n","import { getJudgeForNotechart, judgeTime, timegate } from './judgments'\nimport { notechart } from './test-helpers'\n\ndescribe('tutorial song', () => {\n  it('beginning is easy', () => {\n    const chart = notechart('#PLAYLEVEL 0')\n    const judge = getJudgeForNotechart(chart, { tutorial: true })\n    expect(judgeTime(9.89, 10, judge)).to.equal(3)\n  })\n  it('ending is hard', () => {\n    const chart = notechart('#PLAYLEVEL 0')\n    const judge = getJudgeForNotechart(chart, { tutorial: true })\n    expect(judgeTime(109.89, 110, judge)).to.equal(4)\n  })\n})\n\ndescribe('beginner timegates', () => {\n  it('very easy applied to lv1', () => {\n    const chart = notechart('#PLAYLEVEL 1')\n    const judge = getJudgeForNotechart(chart, {})\n    expect(timegate(3, judge)).to.equal(0.18)\n  })\n  it('very easy applied to lv2', () => {\n    const chart = notechart('#PLAYLEVEL 2')\n    const judge = getJudgeForNotechart(chart, {})\n    expect(timegate(3, judge)).to.equal(0.18)\n  })\n  it('very easy applied to lv3', () => {\n    const chart = notechart('#PLAYLEVEL 3')\n    const judge = getJudgeForNotechart(chart, {})\n    expect(timegate(3, judge)).to.equal(0.16)\n  })\n  it('very easy applied to lv4', () => {\n    const chart = notechart('#PLAYLEVEL 4')\n    const judge = getJudgeForNotechart(chart, {})\n    expect(timegate(3, judge)).to.equal(0.14)\n  })\n  it('very easy applied to lv5', () => {\n    const chart = notechart('#PLAYLEVEL 5')\n    const judge = getJudgeForNotechart(chart, {})\n    expect(timegate(3, judge)).to.equal(0.12)\n  })\n  it('is not applied for more than lv6', () => {\n    const chart = notechart('#PLAYLEVEL 6')\n    const judge = getJudgeForNotechart(chart, {})\n    expect(timegate(3, judge)).to.equal(0.1)\n  })\n})\n\ndescribe('insane song', () => {\n  it('gets normal timing regardless of level', () => {\n    const chart = notechart(`\n      #PLAYLEVEL 1\n      #DIFFICULTY 5\n    `)\n    const judge = getJudgeForNotechart(chart, {})\n    expect(timegate(3, judge)).to.equal(0.1)\n  })\n})\n","import assert from 'assert'\n\nimport SamplesLoader from './samples-loader'\n\ndescribe('SamplesLoader', function () {\n  let assets\n  let master\n  let loader\n  let keysoundCache\n\n  beforeEach(function () {\n    assets = { file: sinon.stub() }\n    master = { decode: sinon.stub(), sample: sinon.stub() }\n    keysoundCache = { isCached: () => false, cache: sinon.spy(() => {}) }\n    loader = new SamplesLoader(assets, master, { keysoundCache })\n  })\n\n  describe('#loadFiles', function () {\n    it('should not include undecodable audio', function () {\n      assets.file.returns(Promise.reject(new Error('cannot decode')))\n      assets.file.withArgs('a.wav').returns(\n        Promise.resolve({\n          read: () => Promise.resolve('ok1'),\n        })\n      )\n      master.decode.withArgs('ok1').returns(Promise.reject(new Error('..')))\n      return expect(loader.loadFiles(['a.wav'])).to.eventually.deep.eq({})\n    })\n\n    it('should cache', function () {\n      assets.file.returns(Promise.reject(new Error('invalid filename')))\n      assets.file.withArgs('a.wav').returns(\n        Promise.resolve({\n          read: () => Promise.resolve('ok1'),\n        })\n      )\n      master.decode.withArgs('ok1').returns(Promise.resolve('ok2'))\n      master.sample.withArgs('ok2').returns(Promise.resolve('ok3'))\n      return loader.loadFiles(['a.wav']).then(() => {\n        assert(keysoundCache.cache.calledOnce)\n        assert(keysoundCache.cache.calledWith('a.wav', 'ok2'))\n      })\n    })\n\n    it('should use cache', function () {\n      assets.file.returns(Promise.reject(new Error('unexpected call')))\n      keysoundCache.isCached = (name) => name === 'name.wav'\n      keysoundCache.get = (name) => {\n        if (name === 'name.wav') return 'buffer'\n        throw new Error('expected name.wav')\n      }\n      master.sample.withArgs('buffer').returns(Promise.resolve('sample'))\n      return expect(loader.loadFiles(['name.wav'])).to.eventually.deep.eq({\n        'name.wav': 'sample',\n      })\n    })\n\n    it('should try mp3', function () {\n      assets.file.returns(Promise.reject(new Error('invalid filename')))\n      assets.file.withArgs('a.mp3').returns(\n        Promise.resolve({\n          read: () => Promise.resolve('ok1'),\n        })\n      )\n      master.decode.withArgs('ok1').returns(Promise.resolve('ok2'))\n      master.sample.withArgs('ok2').returns(Promise.resolve('ok3'))\n      return expect(loader.loadFiles(['a.wav'])).to.eventually.deep.eq({\n        'a.wav': 'ok3',\n      })\n    })\n\n    it('should not include failed matches', function () {\n      assets.file.returns(Promise.reject(new Error('i give up')))\n      return expect(loader.loadFiles(['a.wav'])).to.eventually.deep.eq({})\n    })\n  })\n})\n","import assert from 'assert'\n\nimport GameInput from '../input'\nimport Player from '../player'\nimport PlayerState from './player-state'\nimport { notechart } from '../test-helpers'\n\ndescribe('PlayerState', function () {\n  it('updates the input', function () {\n    const state = new PlayerState({\n      number: 1,\n      columns: ['wow'],\n      notechart: notechart(''),\n      options: { speed: 1 },\n    })\n    const input = {\n      get: (name) => ({ name }),\n    }\n    state.update(0, input)\n    assert(state.input.get('wow').name === 'p1_wow')\n  })\n\n  describe('with player and chart', function () {\n    let chart\n    let player\n    let state\n    let input\n    let buttons\n\n    function setup(bms, options = { speed: 1 }) {\n      chart = notechart(bms)\n      player = new Player(chart, 1, options)\n      state = new PlayerState(player)\n      input = new GameInput()\n      buttons = {}\n      input.use({ get: () => buttons })\n    }\n\n    function advance(time, b) {\n      buttons = b\n      input.update()\n      state.update(time, input)\n    }\n\n    describe('node judging', function () {\n      it('judges notes', function () {\n        setup(`\n          #BPM 120\n          #00111:0101\n        `)\n\n        const column = chart.notes[0].column\n\n        assert.equal(state.getNoteStatus(chart.notes[0]), 'unjudged')\n        assert.equal(state.stats.combo, 0)\n        assert.equal(state.stats.poor, false)\n        assert.equal(state.stats.totalCombo, 2)\n        assert.equal(state.notifications.judgments.length, 0)\n\n        advance(1.999, {})\n        assert.equal(state.getNoteStatus(chart.notes[0]), 'unjudged')\n\n        advance(2, { p1_1: 1 })\n        assert.equal(state.getNoteStatus(chart.notes[0]), 'judged')\n        assert.equal(state.getNoteJudgment(chart.notes[0]), 1)\n        assert.equal(state.getNoteStatus(chart.notes[1]), 'unjudged')\n        assert.deepEqual(state.notifications.judgments[0], {\n          judgment: 1,\n          combo: 1,\n          delta: 0,\n          column,\n        })\n        assert(!state.stats.poor)\n\n        advance(2.1, { p1_1: 0 })\n        advance(5, { p1_1: 0 })\n        assert.equal(state.getNoteStatus(chart.notes[1]), 'judged')\n        assert.equal(state.getNoteJudgment(chart.notes[1]), -1)\n        assert.deepEqual(state.notifications.judgments[0], {\n          judgment: -1,\n          combo: 0,\n          delta: 2,\n          column,\n        })\n        assert.equal(state.stats.poor, true)\n      })\n\n      it('judges multiple notes in different column', function () {\n        setup(`\n          #BPM 120\n          #00111:01\n          #00112:01\n        `)\n\n        advance(2, { p1_1: 1, p1_2: 1 })\n        assert(state.getNoteStatus(chart.notes[0]) === 'judged')\n        assert(state.getNoteStatus(chart.notes[1]) === 'judged')\n      })\n\n      it('judges single note from one column at a time', function () {\n        setup(`\n          #BPM 480\n          #00111:01010100000000000000000000000000\n        `)\n\n        advance(0.531, { p1_1: 1 })\n        assert(state.getNoteStatus(chart.notes[0]) === 'judged')\n        assert(state.getNoteStatus(chart.notes[1]) === 'unjudged')\n        assert(state.getNoteStatus(chart.notes[2]) === 'unjudged')\n        advance(0.531, { p1_1: 0 })\n        advance(0.531, { p1_1: 1 })\n        assert(state.getNoteStatus(chart.notes[0]) === 'judged')\n        assert(state.getNoteStatus(chart.notes[1]) === 'judged')\n        assert(state.getNoteStatus(chart.notes[2]) === 'unjudged')\n        advance(0.531, { p1_1: 0 })\n        advance(0.531, { p1_1: 1 })\n        assert(state.getNoteStatus(chart.notes[0]) === 'judged')\n        assert(state.getNoteStatus(chart.notes[1]) === 'judged')\n        assert(state.getNoteStatus(chart.notes[2]) === 'judged')\n\n        assert(state.getNoteJudgment(chart.notes[0]) > 1)\n        assert(state.getNoteJudgment(chart.notes[1]) === 1)\n        assert(state.getNoteJudgment(chart.notes[2]) > 1)\n      })\n\n      it('leaves note unjudged when bad and there are closer note', function () {\n        setup(`\n          #BPM 120\n          #00111:01010100000000000000000000000000\n        `)\n\n        advance(2.125, { p1_1: 1 })\n        assert(state.getNoteStatus(chart.notes[0]) === 'unjudged')\n        assert(state.getNoteStatus(chart.notes[1]) === 'judged')\n        assert(state.getNoteStatus(chart.notes[2]) === 'unjudged')\n      })\n\n      it('records delta when pressed', function () {\n        setup(`\n          #BPM 120\n          #00111:01\n        `)\n        sinon.spy(state.stats, 'handleDelta')\n        advance(2.01, { p1_1: 1 })\n        assert(state.stats.handleDelta.calledWith(2.01 - 2))\n      })\n\n      it('does not record delta when missed', function () {\n        setup(`\n          #BPM 120\n          #00111:01\n        `)\n        sinon.spy(state.stats, 'handleDelta')\n        advance(9, { p1_1: 1 })\n        assert(state.stats.handleDelta.callCount === 0)\n      })\n\n      describe('with long note', function () {\n        let note\n        beforeEach(function () {\n          setup(`\n            #BPM 120\n            #00151:0101\n          `)\n          note = chart.notes[0]\n        })\n        it('judges long note', function () {\n          advance(2, { p1_1: 1 })\n          assert(state.getNoteStatus(note) === 'active')\n          assert(state.getNoteJudgment(note) === 1)\n          assert(state.notifications.judgments[0].judgment === 1)\n          advance(3, { p1_1: 0 })\n          assert(state.getNoteStatus(note) === 'judged')\n          assert(state.getNoteJudgment(note) === 1)\n          assert(state.notifications.judgments[0].judgment === 1)\n        })\n        it('gives 2 discrete judgments, one for down and one for up', function () {\n          advance(2, { p1_1: 1 })\n          assert(state.stats.numJudgments === 1)\n          advance(3, { p1_1: 0 })\n          assert(state.stats.numJudgments === 2)\n        })\n        it('records delta once', function () {\n          sinon.spy(state.stats, 'handleDelta')\n          advance(2, { p1_1: 1 })\n          advance(3, { p1_1: 0 })\n          assert(state.stats.handleDelta.callCount === 1)\n        })\n        it('judges missed long note', function () {\n          advance(2.3, { p1_1: 1 })\n          assert(state.getNoteStatus(note) === 'judged')\n          assert(state.getNoteJudgment(note) === -1)\n        })\n        it('gives 2 missed judgment for missed longnote', function () {\n          advance(2.3, { p1_1: 1 })\n          assert(state.stats.numJudgments === 2)\n        })\n        it('judges long note lifted too fast as missed', function () {\n          advance(2, { p1_1: 1 })\n          advance(2.01, { p1_1: 0 })\n          assert(state.getNoteStatus(note) === 'judged')\n          assert(state.getNoteJudgment(note) === -1)\n          assert(state.stats.numJudgments === 2)\n        })\n        it('does not end automatically', function () {\n          advance(2, { p1_1: 1 })\n          advance(3.1, { p1_1: 1 })\n          assert(state.getNoteStatus(note) === 'active')\n          assert(state.stats.numJudgments === 1)\n        })\n        it('judges long note lifted too slow as missed', function () {\n          advance(2, { p1_1: 1 })\n          advance(4, { p1_1: 1 })\n          assert(state.getNoteStatus(note) === 'judged')\n          assert(state.getNoteJudgment(note) === -1)\n          assert.deepEqual(state.notifications.judgments[0], {\n            judgment: -1,\n            combo: 0,\n            delta: 1,\n            column: note.column,\n          })\n        })\n      })\n\n      describe('with long scratch note', function () {\n        let note\n        beforeEach(function () {\n          setup(`\n            #BPM 120\n            #00156:0101\n          `)\n          note = chart.notes[0]\n        })\n        it('ends automatically', function () {\n          advance(2, { p1_SC: 1 })\n          assert(state.getNoteStatus(note) === 'active')\n          assert(state.getNoteJudgment(note) === 1)\n          assert(state.notifications.judgments[0].judgment === 1)\n          advance(3.1, { p1_SC: 1 })\n          assert(state.getNoteStatus(note) === 'judged')\n          assert(state.getNoteJudgment(note) === 1)\n          assert(state.notifications.judgments[0].judgment === 1)\n        })\n      })\n\n      describe('with long scratch note next to each other', function () {\n        beforeEach(function () {\n          setup(`\n#BPM 120\n#00156:0100000000000000000000000000000000000000000000000000000000000001\n#00256:0100000000000000000000000000000000000000000000000000000000000001\n          `)\n        })\n        it('should switch to next one on change', function () {\n          advance(2, { p1_SC: 1 })\n          advance(4, { p1_SC: -1 })\n          assert(state.getNoteStatus(chart.notes[0]) === 'judged')\n          assert(state.getNoteStatus(chart.notes[1]) === 'active')\n        })\n      })\n\n      describe('sound notifications', function () {\n        it('notifies of note hit', function () {\n          setup(`\n            #BPM 120\n            #00111:0102\n          `)\n          advance(2, { p1_1: 1 })\n          assert(state.notifications.sounds[0].note === chart.notes[0])\n          assert(state.notifications.sounds[0].type === 'hit')\n        })\n        it('should notify missed notes as break', function () {\n          setup(`\n            #BPM 120\n            #00111:01\n          `)\n          advance(5, { p1_1: 0 })\n          assert(state.notifications.sounds[0].note === chart.notes[0])\n          assert(state.notifications.sounds[0].type === 'break')\n        })\n        it('notifies of free keysound hit', function () {\n          setup(`\n            #BPM 60\n            #00111:01\n            #00211:02\n          `)\n\n          // hit the first note\n          advance(4, { p1_1: 1 })\n          advance(4, { p1_1: 0 })\n\n          // hit the blank area\n          advance(4, { p1_1: 1 })\n          assert(state.notifications.sounds[0].note === chart.notes[0])\n          assert(state.notifications.sounds[0].type === 'free')\n\n          // release the button\n          advance(4, { p1_1: 0 })\n          assert(!state.notifications.sounds.length)\n\n          // try again\n          advance(5, { p1_1: 1 })\n          assert(state.notifications.sounds[0].note === chart.notes[0])\n\n          // release the button\n          advance(5, { p1_1: 0 })\n\n          // wait and try again.\n          advance(6.5, { p1_1: 1 })\n          assert(state.notifications.sounds[0].note === chart.notes[0])\n          advance(6.5, { p1_1: 0 })\n\n          // wait and try again. this time keysound should change\n          advance(7.5, { p1_1: 1 })\n          assert(state.notifications.sounds[0].note === chart.notes[1])\n        })\n        it('suppresses freestyle keysound when column is sandwiched between 2 adjacent notes in 3d mode', function () {\n          setup(\n            `\n              #BPM 60\n              #00111:01\n              #00212:02\n              #00113:02\n            `,\n            { speed: 1, placement: '3d' }\n          )\n          advance(1, { p1_2: 1 })\n          assert.equal(state.notifications.sounds.length, 1)\n          advance(1, { p1_2: 0 })\n\n          advance(4, { p1_2: 1 })\n          assert.equal(state.notifications.sounds.length, 0)\n          advance(4, { p1_2: 0 })\n        })\n        it('does not suppress freestyle keysound outside 3d mode', function () {\n          setup(\n            `\n              #BPM 60\n              #00111:01\n              #00212:02\n              #00113:02\n            `,\n            { speed: 1, placement: 'left' }\n          )\n          advance(1, { p1_2: 1 })\n          assert.equal(state.notifications.sounds.length, 1)\n          advance(1, { p1_2: 0 })\n\n          advance(4, { p1_2: 1 })\n          assert.equal(state.notifications.sounds.length, 1)\n          advance(4, { p1_2: 0 })\n        })\n      })\n    })\n\n    describe('speed', function () {\n      it('infers speed from player', function () {\n        setup('', { speed: 2 })\n        assert(state.speed === 2)\n      })\n      it('updates speed on dedicated buttons', function () {\n        setup('', { speed: 2 })\n        advance(1.0, { p1_speedup: 1 })\n        assert(state.speed === 2.5)\n        advance(1.2, { p1_speedup: 0, p1_speeddown: 1 })\n        assert(state.speed === 2)\n      })\n      it('supports fine-grained speed modifications', function () {\n        setup('', { speed: 2 })\n        advance(1.0, { p1_speedup: 1, select: 1 })\n        assert(state.speed === 2.1)\n      })\n      it('supports pinching to zoom', function () {\n        setup('', { speed: 2 })\n        advance(1.0, { p1_pinch: 300 })\n        advance(1.2, { p1_pinch: 450 })\n        assert(state.speed === 3)\n      })\n    })\n\n    describe('finish', function () {\n      it('should become true when song is finished', function () {\n        setup('#00111:0101')\n        assert(state.finished === false)\n        advance(4.0, {})\n        assert(state.finished === false)\n        advance(16.0, {})\n        assert(state.finished === true)\n      })\n    })\n  })\n})\n","import assert from 'assert'\n\nimport PlayerStats from './player-stats'\nimport { notechart } from '../test-helpers'\n\ndescribe('PlayerStats', function () {\n  const statsFor5Notes = () => new PlayerStats(notechart('#00111:1111111111'))\n  const statsFor1000Notes = () =>\n    new PlayerStats(notechart('#00111:' + '11'.repeat(1000)))\n\n  describe('#score', function () {\n    it('returns the score', function () {\n      const stats = statsFor5Notes()\n      assert(stats.score === 0)\n      stats.handleJudgment(1)\n      stats.handleJudgment(1)\n      stats.handleJudgment(1)\n      stats.handleJudgment(1)\n      stats.handleJudgment(1)\n      assert(stats.score === 555555)\n    })\n  })\n\n  describe('#comboScore', function () {\n    it('returns the score', function () {\n      const stats = statsFor1000Notes()\n      assert(stats.comboScore === 0)\n      for (let i = 0; i < 1000; i++) {\n        stats.handleJudgment(1)\n      }\n      assert(stats.comboScore === 55555)\n    })\n  })\n\n  describe('#maxPossibleComboScore', function () {\n    it('is always 55555 in best case', function () {\n      const stats = statsFor1000Notes()\n      assert(stats.maxPossibleComboScore === 55555)\n      for (let i = 0; i < 1000; i++) {\n        stats.handleJudgment(1)\n        assert(stats.maxPossibleComboScore === 55555)\n      }\n    })\n    it('decreases to 0 in worst case', function () {\n      const stats = statsFor5Notes()\n      assert(stats.maxPossibleComboScore === 55555)\n      stats.handleJudgment(-1)\n      assert(stats.maxPossibleComboScore < 55555)\n      for (let i = 0; i < 999; i++) {\n        stats.handleJudgment(-1)\n      }\n      assert(stats.maxPossibleComboScore === 0)\n    })\n  })\n\n  describe('#maxPossibleScore', function () {\n    it('is always 555555 in best case', function () {\n      const stats = statsFor1000Notes()\n      assert(stats.maxPossibleScore === 555555)\n      for (let i = 0; i < 1000; i++) {\n        stats.handleJudgment(1)\n        assert(stats.maxPossibleScore === 555555)\n      }\n    })\n    it('decreases to 0 in worst case', function () {\n      const stats = statsFor1000Notes()\n      assert(stats.maxPossibleScore === 555555)\n      stats.handleJudgment(-1)\n      assert(stats.maxPossibleScore < 555555)\n      assert(stats.maxPossibleScore > stats.score)\n      for (let i = 0; i < 999; i++) {\n        stats.handleJudgment(-1)\n      }\n      assert(stats.maxPossibleScore === 0)\n    })\n  })\n\n  describe('#deltas', function () {\n    it('returns the deltas', function () {\n      const stats = new PlayerStats(notechart('#00111:111111'))\n      stats.handleDelta(0.031)\n      stats.handleDelta(0.001)\n      stats.handleDelta(-0.031)\n      expect(stats.deltas).to.deep.equal([0.031, 0.001, -0.031])\n    })\n  })\n\n  describe('#log', function () {\n    it('returns the log', function () {\n      const stats = new PlayerStats(notechart('#00111:11111111111111'))\n      expect(stats.score).to.equal(0)\n      stats.handleJudgment(1)\n      stats.handleJudgment(1)\n      stats.handleJudgment(1)\n      stats.handleJudgment(2)\n      stats.handleJudgment(3)\n      stats.handleJudgment(-1)\n      stats.handleJudgment(-1)\n      expect(stats.log).to.equal('3ABC2M')\n    })\n  })\n})\n","import assert from 'assert'\n\nimport createKeysoundCache from './createKeysoundCache'\n\ndescribe('A keysound cache', function () {\n  it('starts empty', () => {\n    const harness = setup()\n    assert(harness.isEmpty())\n  })\n\n  it('is unusable until song is selected', () => {\n    const harness = setup()\n    assert.throws(() => {\n      harness.cache('sound1', 'AudioBuffer1')\n    })\n  })\n\n  it('can add keysound to the cache', () => {\n    const harness = setup()\n    harness.startSong('songId1')\n    harness.cache('sound1', 'AudioBuffer1')\n    assert(!harness.isEmpty())\n    assert(harness.isCached('sound1') === true)\n    assert(harness.get('sound1') === 'AudioBuffer1')\n  })\n\n  it('keeps keysounds in the cache if song did not change', () => {\n    const harness = setup()\n    harness.startSong('songId1')\n    harness.cache('sound1', 'AudioBuffer1')\n    harness.startSong('songId1')\n    assert(!harness.isEmpty())\n  })\n\n  it('clears when song change', () => {\n    const harness = setup()\n    harness.startSong('songId1')\n    harness.cache('sound1', 'AudioBuffer1')\n    harness.startSong('songId2')\n    assert(harness.isEmpty())\n  })\n\n  function setup() {\n    const cache = createKeysoundCache()\n    return {\n      startSong: (songId) => cache.receiveSongId(songId),\n      cache: (soundName, audioBuffer) => cache.cache(soundName, audioBuffer),\n      isEmpty: () => cache.isEmpty(),\n      isCached: (soundName) => cache.isCached(soundName),\n      get: (soundName) => cache.get(soundName),\n    }\n  }\n})\n","import { OmniInput, _keyForUpdate, getName, key } from './'\n\nimport { EventEmitter } from 'events'\nimport { Subject } from 'rxjs'\nimport assert from 'power-assert'\n\nfunction fakeWindow() {\n  const events = new EventEmitter()\n  const gamepads = []\n  const noop = () => {}\n  return {\n    addEventListener(name, callback) {\n      events.on(name, callback)\n    },\n    removeEventListener(name, callback) {\n      events.removeListener(name, callback)\n    },\n    setInterval(callback) {\n      events.on('timeout', callback)\n      return callback\n    },\n    clearInterval(callback) {\n      events.removeListener('timeout', callback)\n    },\n    keydown(keyCode) {\n      events.emit('keydown', { which: keyCode, preventDefault: noop })\n    },\n    keyup(keyCode) {\n      events.emit('keyup', { which: keyCode, preventDefault: noop })\n    },\n    tick() {\n      events.emit('timeout')\n    },\n    gamepads,\n    navigator: {\n      getGamepads() {\n        return gamepads\n      },\n    },\n  }\n}\n\ndescribe('OmniInput', function () {\n  beforeEach(function () {\n    this.window = fakeWindow()\n    this.midi = new Subject()\n    this.input = new OmniInput(this.window, {\n      getMidi: () => this.midi,\n    })\n    this.midi = (...args) => {\n      this.midi.next({\n        data: args,\n        target: { id: '1234' },\n      })\n    }\n  })\n\n  afterEach(function () {\n    this.input.dispose()\n  })\n\n  it('does not fail when browser support is limited', () => {\n    const basicWindow = {\n      addEventListener() {},\n      removeEventListener() {},\n      navigator: {},\n    }\n    const input = new OmniInput(basicWindow)\n    void input\n  })\n\n  describe('keyboard', function () {\n    it('recognizes input', function () {\n      this.window.keydown(32)\n      assert(this.input.update()['32'])\n      this.window.keyup(32)\n      assert(!this.input.update()['32'])\n    })\n    it('returns the key name', function () {\n      assert(getName('32') === 'Space')\n      assert(getName('65') === 'A')\n    })\n  })\n\n  describe('gamepad', function () {\n    it('recognizes input', function () {\n      this.window.gamepads.push(null, {\n        index: 1,\n        buttons: [{}, { value: 0.9 }],\n        axes: [0, 0.9, -0.9],\n      })\n      const data = this.input.update()\n      assert(!data['gamepad.1.button.0'])\n      assert(data['gamepad.1.button.1'])\n      assert(!data['gamepad.1.axis.0'])\n      assert(!data['gamepad.1.axis.0.positive'])\n      assert(!data['gamepad.1.axis.0.negative'])\n      assert(data['gamepad.1.axis.1.positive'])\n      assert(!data['gamepad.1.axis.1.negative'])\n      assert(data['gamepad.1.axis.2.negative'])\n      assert(!data['gamepad.1.axis.2.positive'])\n    })\n  })\n\n  describe('midi', function () {\n    it('handles notes', function () {\n      this.midi(0x92, 0x40, 0x7f)\n      assert(this.input.update()['midi.1234.2.note.64'], 'note on')\n      this.midi(0x82, 0x40, 0x7f)\n      assert(!this.input.update()['midi.1234.2.note.64'], 'note off')\n      this.midi(0x92, 0x40, 0x7f)\n      assert(this.input.update()['midi.1234.2.note.64'], 'note on')\n      this.midi(0x92, 0x40, 0x00)\n      assert(\n        !this.input.update()['midi.1234.2.note.64'],\n        'note off with note on'\n      )\n    })\n    it('handles pitch bend', function () {\n      this.midi(0xe1, 0x7f, 0x7f)\n      assert(this.input.update()['midi.1234.1.pitch.up'])\n      assert(!this.input.update()['midi.1234.1.pitch.down'])\n      this.midi(0xe1, 0x7f, 0x1f)\n      assert(this.input.update()['midi.1234.1.pitch.down'])\n      assert(!this.input.update()['midi.1234.1.pitch.up'])\n    })\n    it('handles sustain pedal', function () {\n      this.midi(0xbc, 0x40, 0x7f)\n      assert(this.input.update()['midi.1234.12.sustain'])\n      this.midi(0xbc, 0x40, 0x00)\n      assert(!this.input.update()['midi.1234.12.sustain'])\n    })\n    it('handles modulation lever', function () {\n      this.midi(0xbc, 0x01, 0x7f)\n      assert(this.input.update()['midi.1234.12.mod'])\n      this.midi(0xbc, 0x01, 0x00)\n      assert(!this.input.update()['midi.1234.12.mod'])\n    })\n    it('returns the key name', function () {\n      assert(getName('midi.1234.12.note.60').match(/C4/))\n      assert(getName('midi.1234.12.pitch.up').match(/Pitch\\+/))\n      assert(getName('midi.1234.12.pitch.down').match(/Pitch-/))\n      assert(getName('midi.1234.12.sustain').match(/Sustain/))\n      assert(getName('midi.1234.12.mod').match(/Mod/))\n    })\n  })\n\n  describe('key', function () {\n    it('should return events', function () {\n      let last\n      const subscription = key(this.input, this.window).subscribe(\n        (value) => (last = value)\n      )\n\n      this.window.keydown(32)\n      this.window.tick()\n      assert(last === '32')\n\n      subscription.unsubscribe()\n    })\n  })\n\n  describe('_keyForUpdate', function () {\n    it('should emit new keys', function () {\n      const  = new Subject()\n      const events = []\n      const subscription = _keyForUpdate().subscribe((value) =>\n        events.push(value)\n      )\n      .next({ 32: true })\n      .next({ 32: true })\n      .next({ 32: false })\n      .next({ 32: true })\n      .next({ 33: true })\n      .next({ 32: true })\n      .next({ 32: true, 35: true })\n      .next({ 31: true, 35: true })\n      assert.deepEqual(events, ['32', '32', '33', '32', '35', '31'])\n      subscription.unsubscribe()\n    })\n  })\n})\n","import * as DataStore from './data-store'\nimport * as Operations from './operations'\n\nimport _ from 'lodash'\n\ndescribe('Online DataStore', function () {\n  describe('initial state', function () {\n    describe('get', function () {\n      it('should return initial operation state when not exist', function () {\n        const item = DataStore.get(DataStore.initialState(), 'meow')\n        expect(item).to.deep.equal(Operations.INITIAL_OPERATION_STATE)\n      })\n    })\n    describe('has', function () {\n      it('has should return false', function () {\n        const has = DataStore.has(DataStore.initialState(), 'meow')\n        void expect(has).to.be.false\n      })\n    })\n  })\n\n  describe('reducer', function () {\n    describe('put', function () {\n      it('should transition state of a record', function () {\n        const action1 = DataStore.put('a', Operations.completed(1))\n        const action2 = DataStore.put('b', Operations.completed(2))\n        const state = _()\n          .thru((state) => DataStore.reduce(state, action1))\n          .thru((state) => DataStore.reduce(state, action2))\n          .value()\n        expect(DataStore.get(state, 'a').value).to.equal(1)\n        expect(DataStore.get(state, 'b').value).to.equal(2)\n      })\n    })\n    describe('putMultiple', function () {\n      it('should transition state of multiple records', function () {\n        const action = DataStore.putMultiple({\n          a: Operations.completed(1),\n          b: Operations.completed(2),\n        })\n        const state = DataStore.reduce(undefined, action)\n        expect(DataStore.get(state, 'a').value).to.equal(1)\n        expect(DataStore.get(state, 'b').value).to.equal(2)\n      })\n    })\n  })\n\n  describe('with records', function () {\n    beforeEach(function () {\n      const action = DataStore.putMultiple({\n        a: Operations.completed(1),\n        b: Operations.completed(2),\n        c: Operations.INITIAL_OPERATION_STATE,\n        d: Operations.loading(),\n      })\n      this.state = DataStore.reduce(undefined, action)\n    })\n    describe('has', function () {\n      it('has should return true if touched', function () {\n        void expect(DataStore.has(this.state, 'a')).to.be.true\n        void expect(DataStore.has(this.state, 'b')).to.be.true\n        void expect(DataStore.has(this.state, 'c')).to.be.true\n        void expect(DataStore.has(this.state, 'd')).to.be.true\n      })\n      it('has should return false if untouched', function () {\n        void expect(DataStore.has(this.state, 'e')).to.be.false\n      })\n    })\n    describe('clear', function () {\n      it('should clear the store', function () {\n        this.state = DataStore.reduce(this.state, DataStore.clear())\n        void expect(DataStore.has(this.state, 'a')).to.be.false\n      })\n    })\n  })\n})\n","import { filter, first, firstValueFrom } from 'rxjs'\n\nimport Online from '.'\nimport OnlineService from './scoreboard-system/OnlineService'\nimport assert from 'power-assert'\n\nconst uid = (function () {\n  const session = Math.floor(Math.random() * 65536).toString(16)\n  let index = 0\n  return function () {\n    const random = Math.floor(Math.random() * 65536).toString(16)\n    const time = Date.now().toString(16)\n    return (\n      'bemuse.' +\n      time +\n      '.' +\n      session +\n      '.' +\n      random +\n      '.' +\n      (++index).toString(16)\n    )\n  }\n})()\n\ntests({ fake: true })\n\nfunction tests(onlineServiceOptions) {\n  const storage = {\n    map: new Map(),\n    getItem(key) {\n      return this.map.get(key) ?? null\n    },\n    setItem(key, value) {\n      this.map.set(key, value)\n    },\n    removeItem(key) {\n      this.map.delete(key)\n    },\n  }\n\n  function createOnline() {\n    return new Online(new OnlineService({ ...onlineServiceOptions, storage }))\n  }\n\n  describe('Online', function () {\n    function createAccountInfo() {\n      return {\n        username: uid(),\n        password: 'wow_bemuse_test',\n        email: 'test+' + uid() + '@bemuse.ninja',\n      }\n    }\n\n    this.timeout(20000)\n\n    describe('signup', function () {\n      let online\n      let info\n      before(function () {\n        online = createOnline()\n      })\n      after(function () {\n        online = null\n      })\n      before(function () {\n        info = createAccountInfo()\n      })\n      it('should succeed', function () {\n        return expect(online.signUp(info)).to.be.fulfilled\n      })\n      it('should not allow duplicate signup', function () {\n        return expect(online.signUp(info)).to.be.rejectedWith(Error)\n      })\n    })\n\n    describe('initially', function () {\n      let online\n      before(async () => {\n        await createOnline().logOut()\n      })\n      beforeEach(async () => {\n        online = createOnline()\n      })\n      describe('user', function () {\n        it('should be null', function (done) {\n          online.user.pipe(first()).subscribe((user) => {\n            assert(user === null)\n            done()\n          })\n        })\n      })\n    })\n\n    describe('when signed up', function () {\n      let online\n      before(function () {\n        online = createOnline()\n      })\n      describe('user', function () {\n        it('should change to signed-up user, and also start with it', async function () {\n          const info = createAccountInfo()\n\n          await online.signUp(info)\n\n          const user = await firstValueFrom(\n            online.user.pipe(filter((u) => !!u))\n          )\n          expect(user.username).to.equal(info.username)\n\n          const firstUser = await firstValueFrom(\n            createOnline().user.pipe(filter((u) => !!u))\n          )\n          expect(firstUser.username).to.equal(info.username)\n        })\n      })\n    })\n\n    describe('with an active user', function () {\n      let online\n      const info = createAccountInfo()\n      before(function () {\n        online = createOnline()\n        return online.signUp(info)\n      })\n      beforeEach(function () {\n        return online.logIn(info)\n      })\n      describe('when log out', function () {\n        it('should change user back to null', async function () {\n          online.logOut()\n\n          const user = await firstValueFrom(\n            online.user.pipe(filter((u) => !u)).pipe(first())\n          )\n\n          assert(user === null)\n        })\n      })\n    })\n\n    describe('submitting high scores', function () {\n      let online\n      before(function () {\n        online = createOnline()\n      })\n\n      const prefix = uid() + '_'\n      const user1 = createAccountInfo()\n      const user2 = createAccountInfo()\n\n      steps((step) => {\n        let lastRecordedAt\n        step('sign up...', function () {\n          return online.signUp(user1)\n        })\n        step('records data successfully', async function () {\n          const record = await online.submitScore({\n            md5: prefix + 'song',\n            playMode: 'BM',\n            score: 123456,\n            combo: 123,\n            total: 456,\n            count: [122, 1, 0, 0, 333],\n            log: '',\n          })\n          expect(record.playNumber).to.equal(1)\n          expect(record.playCount).to.equal(1)\n          expect(record.recordedAt).to.be.an.instanceof(Date)\n          expect(record.rank).to.equal(1)\n          lastRecordedAt = record.recordedAt\n        })\n        step(\n          'does not update if old score is better, but update play count',\n          async function () {\n            const record = await online.submitScore({\n              md5: prefix + 'song',\n              playMode: 'BM',\n              score: 123210,\n              combo: 124,\n              total: 456,\n              count: [123, 1, 0, 0, 332],\n              log: '',\n            })\n            expect(record.score).to.equal(123456)\n            expect(record.combo).to.equal(123)\n            expect(record.playNumber).to.equal(1)\n            expect(record.playCount).to.equal(2)\n            expect(record.recordedAt).not.to.be.above(lastRecordedAt)\n            lastRecordedAt = record.recordedAt\n          }\n        )\n        step('updates data if new score is better', async function () {\n          const record = await online.submitScore({\n            md5: prefix + 'song',\n            playMode: 'BM',\n            score: 555555,\n            combo: 456,\n            total: 456,\n            count: [456, 0, 0, 0, 0],\n            log: '',\n          })\n          expect(record.score).to.equal(555555)\n          expect(record.combo).to.equal(456)\n          expect(record.playNumber).to.equal(3)\n          expect(record.playCount).to.equal(3)\n          expect(record.recordedAt).to.be.above(lastRecordedAt)\n          expect(record.playerName).to.equal(user1.username)\n          lastRecordedAt = record.recordedAt\n        })\n        step('different mode have different score board', async function () {\n          const record = await online.submitScore({\n            md5: prefix + 'song',\n            playMode: 'KB',\n            score: 123210,\n            combo: 124,\n            total: 456,\n            count: [123, 1, 0, 0, 332],\n            log: '',\n          })\n          expect(record.score).to.equal(123210)\n          expect(record.rank).to.equal(1)\n        })\n        step('as another user...', function () {\n          return online.signUp(user2)\n        })\n        step('saves a separate data', async function () {\n          const record = await online.submitScore({\n            md5: prefix + 'song',\n            playMode: 'BM',\n            score: 123210,\n            combo: 124,\n            total: 456,\n            count: [123, 1, 0, 0, 332],\n            log: '',\n          })\n          expect(record.score).to.equal(123210)\n          expect(record.playNumber).to.equal(1)\n          expect(record.playCount).to.equal(1)\n          expect(record.rank).to.equal(2)\n        })\n      })\n    })\n\n    describe('the scoreboard', function () {\n      let online\n      before(function () {\n        online = createOnline()\n        return online.logOut()\n      })\n\n      const prefix = uid() + '_'\n      const user1 = createAccountInfo()\n      const user2 = createAccountInfo()\n      const user3 = createAccountInfo()\n\n      steps((step) => {\n        step('sign up user1...', function () {\n          return online.signUp(user1)\n        })\n        step('submit score1...', function () {\n          return online.submitScore({\n            md5: prefix + 'song1',\n            playMode: 'BM',\n            score: 222222,\n            combo: 456,\n            total: 456,\n            count: [0, 0, 456, 0, 0],\n            log: '',\n          })\n        })\n        step('sign up user2...', function () {\n          return online.signUp(user2)\n        })\n        step('submit score2...', function () {\n          return online.submitScore({\n            md5: prefix + 'song1',\n            playMode: 'BM',\n            score: 555555,\n            combo: 456,\n            total: 456,\n            count: [456, 0, 0, 0, 0],\n            log: '',\n          })\n        })\n        step('scoreboard should return the top score', async function () {\n          const result = await online.scoreboard({\n            md5: prefix + 'song1',\n            playMode: 'BM',\n          })\n          expect(result.data).to.have.length(2)\n          expect(result.data[0].rank).to.eq(1)\n          expect(result.data[1].rank).to.eq(2)\n        })\n        step('log out...', function () {\n          return online.logOut()\n        })\n\n        let ranking\n        step('subscribe to scoreboard...', function () {\n          ranking = online.Ranking({\n            md5: prefix + 'song1',\n            playMode: 'BM',\n            score: 111111,\n            combo: 123,\n            total: 456,\n            count: [0, 123, 0, 0, 333],\n            log: '',\n          })\n        })\n\n        function when(predicate) {\n          return firstValueFrom(ranking.state.pipe(filter(predicate)))\n        }\n\n        step('should have scoreboard loading status', function () {\n          return when((state) => state.meta.scoreboard.status === 'loading')\n        })\n        step('no new score should be submitted', function () {\n          return when(\n            (state) =>\n              state.meta.scoreboard.status === 'completed' &&\n              state.meta.submission.status === 'unauthenticated'\n          ).then((state) => {\n            expect(state.data).to.have.length(2)\n          })\n        })\n        step('sign up user3...', function () {\n          return online.signUp(user3)\n        })\n        step('should start sending score', function () {\n          return when((state) => state.meta.submission.status === 'loading')\n        })\n        step('should finish sending score', function () {\n          return when(\n            (state) => state.meta.submission.status === 'completed'\n          ).then((state) => {\n            expect(state.meta.submission.value.rank).to.equal(3)\n          })\n        })\n        step('should start loading scoreboard', function () {\n          return when((state) => state.meta.scoreboard.status === 'loading')\n        })\n        step('should finish reloading scoreboard', function () {\n          return when(\n            (state) => state.meta.scoreboard.status === 'completed'\n          ).then((state) => {\n            expect(state.data).to.have.length(3)\n          })\n        })\n        step('resubscribe with read only', function () {\n          ranking = online.Ranking({\n            md5: prefix + 'song1',\n            playMode: 'BM',\n          })\n        })\n        step('should not submit new score', function () {\n          return when(\n            (state) =>\n              state.meta.scoreboard.status === 'completed' &&\n              state.meta.submission.status === 'completed'\n          ).then(function (state) {\n            expect(state.data).to.have.length(3)\n            expect(state.meta.submission.value.playCount).to.equal(1)\n          })\n        })\n        after(function () {\n          online.logOut()\n        })\n      })\n    })\n  })\n}\n\nfunction steps(f) {\n  let _resolve\n  let promise = new Promise((resolve) => (_resolve = resolve))\n  let i = 0\n  before(() => void _resolve())\n  return f((name, fn) => {\n    promise = promise.then(fn, () => {\n      throw new Error('Previous steps errored')\n    })\n    const current = promise\n    it(`${++i}. ${name}`, () => current)\n  })\n}\n","import * as Formatters from './formatters'\nimport { Progress } from './Progress'\n\ndescribe('ProgressFormatters', function () {\n  describe('BYTES_FORMATTER', function () {\n    it('should return blank for indeterminate', function () {\n      const p = new Progress()\n      expect(Formatters.BYTES_FORMATTER(p)).to.equal('')\n    })\n    it('should format as human readable size', function () {\n      const p = new Progress()\n      p.report(1, 1024)\n      expect(Formatters.BYTES_FORMATTER(p)).to.equal('1B / 1KB')\n    })\n  })\n\n  describe('EXTRA_FORMATTER', function () {\n    it('should just use the extra', function () {\n      const p = new Progress()\n      p.report(1, 1024, 'one.wav')\n      expect(Formatters.EXTRA_FORMATTER(p)).to.equal('one.wav')\n    })\n  })\n})\n","import { Progress } from './Progress'\n\ndescribe('Progress', function () {\n  describe('#watch', function () {\n    it('should report current progress when watched', function () {\n      const progress = new Progress()\n      const spy = sinon.spy()\n      progress.report(1, 10)\n      progress.watch(spy)\n      expect(spy).to.have.callCount(1)\n      expect(spy).to.have.been.calledWith(progress)\n    })\n  })\n\n  describe('#toString', function () {\n    it('should return blank string when no progress', function () {\n      const progress = new Progress()\n      expect(progress.toString()).to.equal('')\n    })\n    it('should return a string representation of the progress', function () {\n      const progress = new Progress()\n      progress.report(1, 10)\n      expect(progress.toString()).to.equal('1 / 10')\n    })\n    it('should use a formatter', function () {\n      const progress = new Progress()\n      progress.report(1, 10)\n      progress.formatter = (p) => p.progress + ''\n      expect(progress.toString()).to.equal('0.1')\n    })\n  })\n\n  describe('#report', function () {\n    it('should fire to all watchers', function () {\n      const progress = new Progress()\n      const spy = sinon.spy()\n      progress.report(1, 10)\n      progress.report(2, 10)\n      progress.watch(spy)\n      progress.report(3, 10)\n      progress.report(4, 10)\n      expect(spy).to.have.callCount(3)\n    })\n    it('should return a function to unsubscribe', function () {\n      const progress = new Progress()\n      const spy = sinon.spy()\n      progress.report(1, 10)\n      progress.report(2, 10)\n      const unsubscribe = progress.watch(spy)\n      progress.report(3, 10)\n      unsubscribe()\n      progress.report(4, 10)\n      expect(spy).to.have.callCount(2)\n    })\n  })\n\n  describe('#progress', function () {\n    it('returns progress in fraction', function () {\n      const progress = new Progress()\n      progress.report(1, 10)\n      expect(progress.progress).to.equal(1 / 10)\n    })\n    it('returns null in unavailable', function () {\n      const progress = new Progress()\n      expect(progress.progress).to.equal(null)\n    })\n  })\n})\n","import { Progress } from './Progress'\nimport * as ProgressUtils from './utils'\n\ndescribe('ProgressUtils', function () {\n  describe('.fixed', function () {\n    it('should report for fixed number of items', function () {\n      const progress = new Progress()\n      const advance = ProgressUtils.fixed(10, progress)\n      expect(progress.current).to.equal(0)\n      expect(progress.total).to.equal(10)\n      advance('wow')\n      expect(progress.current).to.equal(1)\n      expect(progress.total).to.equal(10)\n      expect(progress.extra).to.equal('wow')\n    })\n  })\n\n  describe('.wrapPromise', function () {\n    it('should report number of fulfilled promises', function () {\n      const progress = new Progress()\n      const f = ProgressUtils.wrapPromise(progress, (promise) => promise)\n      const a = f(new Promise(() => {}))\n      const b = f(Promise.resolve(1))\n      const c = f(Promise.reject(new Error('no')))\n      const d = f(Promise.resolve(3))\n      void a\n      void c\n      return Promise.all([b, d]).then(() => {\n        expect(progress.current).to.equal(2)\n        expect(progress.total).to.equal(4)\n      })\n    })\n  })\n\n  describe('.bind', function () {\n    it('should bind from one progress to another', function () {\n      const a = new Progress()\n      const b = new Progress()\n      a.report(10, 20)\n      ProgressUtils.bind(a, b)\n      expect(b.current).to.equal(10)\n      expect(b.total).to.equal(20)\n      a.report(15, 25)\n      expect(b.current).to.equal(15)\n      expect(b.total).to.equal(25)\n    })\n  })\n\n  describe('.simultaneous', function () {\n    it('should report in fifo manner', function () {\n      const out = new Progress()\n      const simultaneous = ProgressUtils.simultaneous(out)\n      const a = new Progress()\n      const b = new Progress()\n      simultaneous.add(a)\n      a.report(10, 20)\n      expect(out.current).to.equal(10)\n      simultaneous.add(b)\n      b.report(11, 30)\n      expect(out.current).to.equal(10)\n      a.report(15, 20)\n      expect(out.current).to.equal(15)\n      a.report(20, 20)\n      expect(out.current).to.equal(11)\n      b.report(21, 30)\n      expect(out.current).to.equal(21)\n      b.report(30, 30)\n      expect(out.current).to.equal(30)\n      expect(out.total).to.equal(30)\n    })\n  })\n})\n","import assert from 'assert'\n\nimport BemusePackageResources from './bemuse-package'\n\ndescribe('BemusePackageResources', function () {\n  describe('#file', function () {\n    let resources\n\n    beforeEach(function () {\n      resources = new BemusePackageResources(\n        '/base/src/resources/test-fixtures/a/'\n      )\n    })\n\n    it('returns a file', function () {\n      return expect(resources.file('do.mp3')).to.be.fulfilled\n    })\n\n    it('rejects if file not found', function () {\n      return expect(resources.file('wow.mp3')).to.be.rejected\n    })\n\n    it('can be read', function () {\n      return expect(\n        resources\n          .file('mi.mp3')\n          .then((file) => file.read())\n          .then((buffer) => buffer.byteLength)\n      ).to.eventually.eq(30093)\n    })\n\n    it('can obtain url', function () {\n      return resources\n        .file('mi.mp3')\n        .then((file) => file.resolveUrl())\n        .then((url) => {\n          assert(typeof url === 'string')\n        })\n    })\n\n    it('cannot read if not bemuse file', function () {\n      resources = new BemusePackageResources(\n        '/base/src/resources/test-fixtures/b/'\n      )\n      return expect(resources.file('do.mp3').then((file) => file.read())).to.be\n        .rejected\n    })\n\n    it('data is correct', function () {\n      return resources\n        .file('mi.mp3')\n        .then((file) => file.read())\n        .then((buffer) => new Uint8Array(buffer))\n        .then((array) => {\n          expect([array[0], array[1], array[2]]).to.deep.equal([\n            0xff, 0xfb, 0x90,\n          ])\n        })\n    })\n\n    it('supports fallback', function () {\n      resources = new BemusePackageResources(\n        '/base/src/resources/test-fixtures/a/',\n        {\n          fallback: '/base/src/resources/test-fixtures/f/',\n          fallbackPattern: /\\.txt$/,\n        }\n      )\n      return resources\n        .file('meow.txt')\n        .then((file) => file.read())\n        .then((buffer) => new Uint8Array(buffer))\n        .then((array) => {\n          expect([array[0], array[1]]).to.deep.equal([0x68, 0x69])\n        })\n    })\n    it('supports fallback only with the pattern', function () {\n      resources = new BemusePackageResources(\n        '/base/spec/resources/fixtures/a/',\n        {\n          fallback: '/base/src/resources/test-fixtures/f/',\n          fallbackPattern: /\\.txt$/,\n        }\n      )\n      return expect(resources.file('meow.dat')).to.be.rejected\n    })\n  })\n})\n","import assert from 'assert'\n\nimport URLResource from './url'\n\ndescribe('URLResource', function () {\n  it('can download a resource from an arbitrary URL', function () {\n    const resource = new URLResource(\n      '/base/src/resources/test-fixtures/f/meow.txt'\n    )\n    return resource\n      .read()\n      .then((buffer) => new Uint8Array(buffer))\n      .then((array) => {\n        expect([array[0], array[1]]).to.deep.equal([0x68, 0x69])\n      })\n  })\n  it('can retrieve back the URL', function () {\n    const resource = new URLResource(\n      '/base/src/resources/test-fixtures/f/meow.txt'\n    )\n    return resource.resolveUrl().then((url) => {\n      assert(/\\/meow\\.txt$/.test(url))\n    })\n  })\n  it('has a name, which is only the file name without the path', function () {\n    const resource = new URLResource(\n      '/base/src/resources/test-fixtures/f/meow.txt'\n    )\n    assert(resource.name === 'meow.txt')\n  })\n})\n","/* global AudioContext, WebAudioTestAPI */\n\nimport 'web-audio-test-api'\n\nimport assert from 'assert'\n\nimport SamplingMaster, { FADE_LENGTH } from './'\n\ndescribe('SamplingMaster', function () {\n  let context\n  let master\n  before(() => {\n    WebAudioTestAPI.use()\n  })\n  beforeEach(() => {\n    context = new AudioContext()\n    master = new SamplingMaster(context)\n  })\n\n  describe('#unmute', function () {\n    it('unmutes the audio', function () {\n      const gain = context.createGain()\n      sinon.stub(context, 'createGain').returns(gain)\n      sinon.spy(gain, 'connect')\n      sinon.spy(gain, 'disconnect')\n      master.unmute()\n      void expect(context.createGain).to.have.been.called\n      void expect(gain.connect).to.have.been.called\n      void expect(gain.disconnect).to.have.been.called\n    })\n  })\n\n  describe('#group', function () {\n    it('has a destination with gain', function () {\n      const group = master.group({ volume: 0.5 })\n      expect(group.destination.gain.value).to.equal(0.5)\n    })\n    it('connect upon construct, disconnect upon destroy', function () {\n      const group = master.group()\n      const node = group.destination\n      void expect(node.$isConnectedTo(master.destination)).to.be.true\n      group.destroy()\n      void expect(node.$isConnectedTo(master.destination)).to.be.false\n      void expect(group.destination).to.be.null\n    })\n  })\n\n  describe('#decode', function () {\n    it('returns an audio buffer', () => {\n      return master.decode(new Blob([])).then((audioBuffer) => {\n        assert(audioBuffer.numberOfChannels)\n      })\n    })\n  })\n\n  describe('#sample', function () {\n    it('should coerce blob', function () {\n      return master.sample(new Blob([]))\n    })\n    it('should coerce array buffer', function () {\n      return master.sample(new ArrayBuffer(0))\n    })\n    it('should support an audiobuffer', function () {\n      return master.decode(new Blob([])).then((audioBuffer) => {\n        return master.sample(audioBuffer)\n      })\n    })\n    it('should reject when decoding failed', function () {\n      context.DECODE_AUDIO_DATA_FAILED = true\n      return expect(\n        master\n          .sample(new ArrayBuffer(0))\n          .finally(() => (context.DECODE_AUDIO_DATA_FAILED = false))\n      ).to.be.rejected\n    })\n    describe('#play', function () {\n      let sample\n      let bufferSource\n      let buffer\n      beforeEach(function () {\n        bufferSource = context.createBufferSource()\n        buffer = context.createBuffer(1, 44100, 44100)\n        bufferSource.buffer = buffer\n        sinon.stub(context, 'createBufferSource').returns(bufferSource)\n        sinon.spy(bufferSource, 'start')\n        return master.sample(new Blob([])).then((s) => (sample = s))\n      })\n      it('should play a buffer source', function () {\n        sample.play()\n        void expect(context.createBufferSource).to.have.been.called\n        expect(bufferSource.start).to.have.been.calledWith(0)\n      })\n      it('should play a buffer source with delay', function () {\n        context.$processTo(1)\n        sample.play(20)\n        void expect(context.createBufferSource).to.have.been.called\n        expect(bufferSource.start).to.have.been.calledWith(21)\n      })\n      it('should play a buffer slice (without end)', function () {\n        sample.play(0, { start: 1, end: undefined })\n        expect(bufferSource.start).to.have.been.calledWith(0, 1)\n      })\n      it('should play a buffer slice (with end)', function () {\n        sample.play(0, { start: 1, end: 3 })\n        expect(bufferSource.start).to.have.been.calledWith(\n          0,\n          1,\n          2 + FADE_LENGTH\n        )\n      })\n      it('should play to a group', function () {\n        const group = master.group()\n        const instance = sample.play(0, { group })\n        void expect(instance.TEST_node.$isConnectedTo(group.destination)).to.be\n          .true\n      })\n\n      // HACK: only enable this test case when Event#type can be set after\n      // being constructed. If this isn't true, WebAudioTestAPI will cause\n      // an error due to how its own Event is implemented.\n      // https://github.com/mohayonao/web-audio-test-api/issues/18\n      void (function () {\n        try {\n          new Event('wat').type = 'customevent'\n          return it\n        } catch (e) {\n          void e\n          return it.skip\n        }\n      })()('should call #stop when playing finished', function () {\n        const instance = sample.play()\n        sinon.spy(instance, 'stop')\n        context.$processTo(1.5)\n        void expect(instance.stop).to.have.been.called\n      })\n\n      describe('#stop', function () {\n        it('should stop the buffer source', function () {\n          const instance = sample.play()\n          sinon.spy(bufferSource, 'stop')\n          instance.stop()\n          void expect(bufferSource.stop).to.have.been.called\n        })\n        it('can be called multiple times', function () {\n          const instance = sample.play()\n          sinon.spy(bufferSource, 'stop')\n          instance.stop()\n          instance.stop()\n          instance.stop()\n          void expect(bufferSource.stop).to.have.been.calledOnce\n        })\n        it('should call #onstop', function () {\n          const instance = sample.play()\n          instance.onstop = sinon.spy()\n          instance.stop()\n          void expect(instance.onstop).to.have.been.called\n        })\n      })\n\n      describe('#bad', function () {\n        it('should change pitch of sound', function () {\n          const instance = sample.play()\n          instance.bad()\n          expect(bufferSource.playbackRate.value).not.to.equal(1)\n        })\n      })\n    })\n  })\n\n  describe('#destroy', function () {\n    let sample\n    beforeEach(function () {\n      return master.sample(new Blob([])).then((s) => (sample = s))\n    })\n    it('should stop all samples', function () {\n      const a = sample.play()\n      const b = sample.play()\n      const c = sample.play()\n      sinon.spy(a, 'stop')\n      sinon.spy(b, 'stop')\n      sinon.spy(c, 'stop')\n      master.destroy()\n      void expect(a.stop).to.have.been.called\n      void expect(b.stop).to.have.been.called\n      void expect(c.stop).to.have.been.called\n    })\n    it('can no longer create samples', function () {\n      master.destroy()\n      return expect(master.sample(new Blob([]))).to.be.rejected\n    })\n    it('only destroys once', function () {\n      const a = sample.play()\n      sinon.spy(a, 'destroy')\n      master.destroy()\n      master.destroy()\n      expect(a.destroy).to.have.callCount(1)\n    })\n  })\n\n  after(() => {\n    WebAudioTestAPI.unuse()\n  })\n})\n","import Expression from 'bemuse/scintillator/expression'\n\ndescribe('Scintillator Expression', function () {\n  describe('()', function () {\n    it('should parse', function () {\n      const f = new Expression('a+b')\n      expect(f({ a: 1, b: 5 })).to.equal(6)\n    })\n  })\n  describe('#constant', function () {\n    it('should be false when containing variables', function () {\n      const f = new Expression('a+b')\n      void expect(f.constant).to.be.false\n    })\n    it('should be true when only contains number', function () {\n      const f = new Expression('-1.25')\n      void expect(f.constant).to.be.true\n    })\n  })\n})\n","import * as Scintillator from './'\n\nconst fixture = (file) => `/base/src/scintillator/test-fixtures/${file}`\n\ndescribe('Scintillator', function () {\n  describe('#load', function () {\n    it('should load skin and return skin node', async function () {\n      const skin = await Scintillator.load(fixture('bare.xml'))\n      expect(skin.width).to.equal(123)\n      expect(skin.height).to.equal(456)\n    })\n    it('should reject if invalid', function () {\n      return expect(Scintillator.load(fixture('invalid_tag.xml'))).to.be\n        .rejected\n    })\n  })\n\n  describe('Context', function () {\n    it('should instantiate and able to destroy', async function () {\n      const skin = await Scintillator.load(fixture('bare.xml'))\n      const context = new Scintillator.Context(skin)\n      context.render({})\n      context.destroy()\n    })\n    describe('#input', function () {\n      let skin\n      let context\n      beforeEach(async function () {\n        skin = await Scintillator.load(fixture('bare.xml'))\n        context = new Scintillator.Context(skin)\n        context.render({})\n        context.view.style.position = 'fixed'\n        context.view.style.top = '0'\n        context.view.style.left = '0'\n        document.body.appendChild(context.view)\n      })\n      afterEach(function () {\n        context.destroy()\n        document.body.removeChild(context.view)\n      })\n      function mouse(type, x, y) {\n        context.view.dispatchEvent(\n          new MouseEvent(`mouse${type}`, {\n            clientX: x,\n            clientY: y,\n          })\n        )\n      }\n      function touch(type, touches, changedTouches) {\n        // since TouchEvent is damn complicated, we resort to using a custom\n        // event that imitates a touch event.\n        const event = new Event(`touch${type}`)\n        event.touches = touches\n        event.changedTouches = changedTouches\n        context.view.dispatchEvent(event)\n      }\n      it('should report touches/mouse inside the region', function () {\n        mouse('move', 10, 10)\n        mouse('down', 10, 10)\n        expect(context.input).to.deep.equal([{ x: 10, y: 10, id: 'mouse' }])\n        const t = { identifier: 1, clientX: 80, clientY: 80 }\n        touch('start', [t], [t])\n        expect(context.input).to.deep.equal([\n          { x: 10, y: 10, id: 'mouse' },\n          { x: 80, y: 80, id: 'touch1' },\n        ])\n        mouse('move', 20, 20)\n        expect(context.input).to.deep.equal([\n          { x: 20, y: 20, id: 'mouse' },\n          { x: 80, y: 80, id: 'touch1' },\n        ])\n        mouse('up', 10, 10)\n        expect(context.input).to.deep.equal([{ x: 80, y: 80, id: 'touch1' }])\n        touch('end', [], [t])\n        expect(context.input).to.deep.equal([])\n      })\n    })\n    describe('#refs', function () {\n      it('should be a set of refs to the display object', async function () {\n        const skin = await Scintillator.load(fixture('refs.xml'))\n        const context = new Scintillator.Context(skin)\n        context.render({})\n        expect(Array.from(context.refs['a'])[0]).to.equal(\n          context.stage.children[0]\n        )\n        context.destroy()\n      })\n    })\n  })\n\n  describe('Expressions', function () {\n    it('should be parsed and processed', async function () {\n      const skin = await Scintillator.load(fixture('expr_basic.xml'))\n      const context = new Scintillator.Context(skin)\n      context.render({})\n      const stage = context.stage\n      expect(stage.children[0].x).to.equal(6)\n      expect(stage.children[0].y).to.equal(7)\n      context.destroy()\n    })\n    it('should support variables', async function () {\n      const skin = await Scintillator.load(fixture('expr_variables.xml'))\n      const context = new Scintillator.Context(skin)\n      const stage = context.stage\n      context.render({ a: 4, b: 3 })\n      expect(stage.children[0].x).to.equal(7)\n      expect(stage.children[0].y).to.equal(12)\n      context.render({ a: 10, b: 20 })\n      expect(stage.children[0].x).to.equal(30)\n      expect(stage.children[0].y).to.equal(200)\n      context.destroy()\n    })\n  })\n\n  describe('SpriteNode', function () {\n    it('should allow setting sprite frame', async function () {\n      const skin = await Scintillator.load(fixture('sprite_attrs.xml'))\n      const context = new Scintillator.Context(skin)\n      const stage = context.stage\n      context.render({})\n      const frame = stage.children[0].texture.frame\n      expect(frame.width).to.equal(10)\n      expect(frame.height).to.equal(11)\n      expect(frame.x).to.equal(12)\n      expect(frame.y).to.equal(13)\n      context.destroy()\n    })\n    it('should allow setting visibility, width, height', async function () {\n      const skin = await Scintillator.load(fixture('sprite_attrs.xml'))\n      const context = new Scintillator.Context(skin)\n      const stage = context.stage\n      context.render({})\n      const sprite = stage.children[0]\n      expect(sprite.width).to.equal(3)\n      expect(sprite.height).to.equal(1)\n      expect(sprite.visible).to.equal(false)\n      context.destroy()\n    })\n    it('should reject if blend mode is invalid', function () {\n      return expect(Scintillator.load(fixture('sprite_invalid_blend.xml'))).to\n        .be.rejected\n    })\n  })\n\n  describe('TextNode', function () {\n    it('should display text', async function () {\n      const skin = await Scintillator.load(fixture('text.xml'))\n      const context = new Scintillator.Context(skin)\n      const stage = context.stage\n      context.render({})\n      const text = stage.children[0].children[0]\n      expect(text.text).to.equal('Hello world')\n      context.destroy()\n    })\n    it('should center text', async function () {\n      const skin = await Scintillator.load(fixture('text_center.xml'))\n      const context = new Scintillator.Context(skin)\n      const stage = context.stage\n      context.render({})\n      const text = stage.children[0].children[0]\n      expect(text.x).to.be.lessThan(0)\n      context.destroy()\n    })\n    it('should support data interpolation', async function () {\n      const skin = await Scintillator.load(fixture('text_interpolation.xml'))\n      const context = new Scintillator.Context(skin)\n      const stage = context.stage\n      context.render({ lol: 'wow' })\n      const text = stage.children[0].children[0]\n      expect(text.text).to.equal('Hello world wow')\n      context.destroy()\n    })\n  })\n\n  describe('IfNode', function () {\n    let skin\n    let context\n    let stage\n    beforeEach(async function () {\n      skin = await Scintillator.load(fixture('expr_if.xml'))\n      context = new Scintillator.Context(skin)\n      stage = context.stage\n    })\n    afterEach(function () {\n      context.destroy()\n    })\n    it('should display child when correct value', function () {\n      context.render({ a: 'b' })\n      expect(stage.children[0].children).to.have.length(1)\n      context.render({ a: 'x' })\n      expect(stage.children[0].children).to.have.length(0)\n    })\n  })\n\n  describe('ObjectNode', function () {\n    it('should display children', async function () {\n      const skin = await Scintillator.load(fixture('expr_object.xml'))\n      const context = new Scintillator.Context(skin)\n      const stage = context.stage\n      context.render({ notes: [] })\n      expect(stage.children[0].children).to.have.length(0)\n      context.render({ notes: [{ key: 'a', y: 20 }] })\n      expect(stage.children[0].children).to.have.length(1)\n      context.render({\n        notes: [\n          { key: 'a', y: 20 },\n          { key: 'b', y: 10 },\n        ],\n      })\n      expect(stage.children[0].children).to.have.length(2)\n      context.render({ notes: [{ key: 'b', y: 10 }] })\n      expect(stage.children[0].children).to.have.length(1)\n      context.destroy()\n    })\n    it('should update same array with content changed', async function () {\n      const skin = await Scintillator.load(fixture('expr_object.xml'))\n      const context = new Scintillator.Context(skin)\n      const stage = context.stage\n      const notes = []\n      context.render({ notes })\n      expect(stage.children[0].children).to.have.length(0)\n      notes.push({ key: 'a', y: 20 })\n      context.render({ notes })\n      expect(stage.children[0].children).to.have.length(1)\n      context.destroy()\n    })\n    it('should let children get value from item', async function () {\n      const skin = await Scintillator.load(fixture('expr_object_var.xml'))\n      const context = new Scintillator.Context(skin)\n      const stage = context.stage\n      context.render({ notes: [] })\n      context.render({ notes: [{ key: 'a', y: 20 }] })\n      expect(stage.children[0].children[0].y).to.equal(20)\n      context.render({\n        notes: [\n          { key: 'a', y: 20 },\n          { key: 'b', y: 10 },\n        ],\n      })\n      expect(stage.children[0].children[0].y).to.equal(20)\n      context.render({ notes: [{ key: 'b', y: 10 }] })\n      expect(stage.children[0].children[0].y).to.equal(10)\n      context.destroy()\n    })\n  })\n\n  describe('GroupNode', function () {\n    it('should allow masking', async function () {\n      const skin = await Scintillator.load(fixture('group_mask.xml'))\n      const context = new Scintillator.Context(skin)\n      const stage = context.stage\n      const mask = stage.children[0].mask\n      expect(mask).not.to.equal(null)\n      context.destroy()\n    })\n  })\n\n  describe('AnimationNode', function () {\n    it('should allow animations', async function () {\n      const skin = await Scintillator.load(fixture('animation.xml'))\n      const context = new Scintillator.Context(skin)\n      const group = context.stage.children[0]\n      context.render({ t: 0 })\n      expect(group.x).to.equal(10)\n      expect(group.y).to.equal(0)\n      context.render({ t: 0.5 })\n      expect(group.x).to.equal(15)\n      expect(group.y).to.equal(1)\n      context.render({ t: 1 })\n      expect(group.x).to.equal(20)\n      expect(group.y).to.equal(2)\n      context.destroy()\n    })\n    it('should allow animations on different events', async function () {\n      const skin = await Scintillator.load(fixture('animation.xml'))\n      const context = new Scintillator.Context(skin)\n      const group = context.stage.children[0]\n      context.render({ t: 0.5, exitEvent: 0.5 })\n      expect(group.x).to.equal(50)\n      expect(group.y).to.equal(0)\n      context.render({ t: 1, exitEvent: 0.5 })\n      expect(group.x).to.equal(60)\n      expect(group.y).to.equal(50)\n      context.render({ t: 1.5, exitEvent: 0.5 })\n      expect(group.x).to.equal(70)\n      expect(group.y).to.equal(100)\n      context.destroy()\n    })\n    it('should allow animations on different value', async function () {\n      const skin = await Scintillator.load(fixture('animation_timekey.xml'))\n      const context = new Scintillator.Context(skin)\n      const group = context.stage.children[0]\n      context.render({ t: 0, x: 0.5 })\n      expect(group.x).to.equal(15)\n    })\n  })\n\n  describe('defs', function () {\n    it('should allow reuse of skin nodes', async function () {\n      const skin = await Scintillator.load(fixture('defs.xml'))\n      const context = new Scintillator.Context(skin)\n      context.render({})\n      const stage = context.stage\n      expect(stage.children[0].x).to.equal(6)\n      expect(stage.children[0].y).to.equal(7)\n      expect(stage.children[1].x).to.equal(6)\n      expect(stage.children[1].y).to.equal(7)\n      context.destroy()\n    })\n  })\n})\n","import $ from 'jquery'\nimport assert from 'assert'\nimport {\n  Animation,\n  _attrs,\n  _compile,\n} from 'bemuse/scintillator/nodes/concerns/animation'\n\nconst $xml = (xml) => $($.parseXML(xml).documentElement)\n\ndescribe('Scintillator::Animation', function () {\n  describe('_attrs', function () {\n    it('lists all attributes of an element', function () {\n      const xml = $xml('<keyframe t=\"0\" x=\"10\" y=\"30\" />')[0]\n      expect(_attrs(xml)).to.deep.equal({ t: '0', x: '10', y: '30' })\n    })\n  })\n\n  describe('_compile', function () {\n    it('compiles animation into keyframes', function () {\n      const xml = $xml(`<animation>\n        <keyframe t=\"0\" x=\"10\" y=\"30\" />\n        <keyframe t=\"2\" x=\"20\" />\n        <keyframe t=\"5\" x=\"15\" y=\"20\" />\n      </animation>`)\n      expect(_compile(xml)).to.deep.equal({\n        on: '',\n        data: [\n          {\n            name: 'x',\n            keyframes: [\n              { time: 0, value: 10, ease: 'linear' },\n              { time: 2, value: 20, ease: 'linear' },\n              { time: 5, value: 15, ease: 'linear' },\n            ],\n          },\n          {\n            name: 'y',\n            keyframes: [\n              { time: 0, value: 30, ease: 'linear' },\n              { time: 5, value: 20, ease: 'linear' },\n            ],\n          },\n        ],\n      })\n    })\n    it('throws when there is no time', function () {\n      const xml = $xml(`<animation>\n        <keyframe />\n      </animation>`)\n      expect(() => _compile(xml)).to.throw(Error)\n    })\n  })\n\n  describe('#_properties', function () {\n    it('should return a set of properties', function () {\n      const anim = Animation.compile(\n        null,\n        $xml(`<group>\n        <animation>\n          <keyframe t=\"0\" x=\"10\" />\n          <keyframe t=\"1\" x=\"20\" />\n        </animation>\n        <animation>\n          <keyframe t=\"0\" y=\"10\" />\n          <keyframe t=\"1\" y=\"20\" />\n        </animation>\n      </group>`)\n      )\n      expect(Array.from(anim._properties)).to.deep.equal(['x', 'y'])\n    })\n  })\n\n  describe('#prop', function () {\n    it('should return the function for given prop', function () {\n      const anim = Animation.compile(\n        null,\n        $xml(`<group>\n        <animation>\n          <keyframe t=\"0\" x=\"10\" />\n          <keyframe t=\"1\" x=\"20\" />\n        </animation>\n      </group>`)\n      )\n      assert(anim.prop('x')({ t: 0.4 }) === 14)\n    })\n    it('should choose animation that occurs last', function () {\n      const anim = Animation.compile(\n        null,\n        $xml(`<group>\n        <animation on=\"event1\">\n          <keyframe t=\"0\" x=\"10\" />\n          <keyframe t=\"1\" x=\"20\" />\n        </animation>\n        <animation on=\"event2\">\n          <keyframe t=\"0\" x=\"100\" />\n          <keyframe t=\"1\" x=\"200\" />\n        </animation>\n      </group>`)\n      )\n      assert(anim.prop('x')({ event1: 0.2, event2: 0, t: 0.4 }) === 12)\n      assert(anim.prop('x')({ event1: 0, event2: 0.2, t: 0.4 }) === 120)\n    })\n  })\n\n  describe('#_events', function () {\n    it('list distinct events', function () {\n      const anim = Animation.compile(\n        null,\n        $xml(`<group>\n        <animation />\n        <animation />\n        <animation on=\"exit\" />\n        <animation on=\"exit\" />\n      </group>`)\n      )\n      expect(anim._events).to.deep.equal(['', 'exit'])\n    })\n  })\n})\n","import download from 'bemuse/utils/download'\n\ndescribe('download', function () {\n  const options = {\n    getRetryDelay: () => 0,\n  }\n\n  it('resolves with correct type', function () {\n    return expect(\n      download('/base/src/utils/test-fixtures/download/hello.txt').as('text')\n    ).to.eventually.match(/hello world/)\n  })\n\n  it('rejects for 404', function () {\n    return expect(download('/nonexistant').as('blob')).to.be.rejected\n  })\n\n  it('rejects for bad url', function () {\n    return expect(download('file:///nonexistant', options).as('blob')).to.be\n      .rejected\n  })\n\n  it('rejects for XHR error', function () {\n    const stub = sinon\n      .stub(XMLHttpRequest.prototype, 'send')\n      .callsFake(function () {\n        this.onerror(new Error('...'))\n      })\n    return expect(\n      download('/base/spec/download/fixtures/hello.txt', options)\n        .as('blob')\n        .finally(() => stub.restore())\n    ).to.be.rejected\n  })\n})\n","import assert from 'assert'\n\nimport formatTime from './formatTime'\n\ndescribe('formatTime', () => {\n  it('should format the time using minutes:seconds format', () => {\n    assert(formatTime(0) === '0:00')\n    assert(formatTime(1) === '0:01')\n    assert(formatTime(11) === '0:11')\n    assert(formatTime(111) === '1:51')\n    assert(formatTime(1111) === '18:31')\n  })\n})\n","import Observable from './observable'\n\ndescribe('Observable', function () {\n  describe('stateless mode', function () {\n    it('should call watchers', function () {\n      const s1 = sinon.spy()\n      const s2 = sinon.spy()\n      const o = new Observable()\n      const u = o.watch(s1)\n      void expect(s1).not.to.have.been.called\n      o.notify('1')\n      expect(s1).to.have.been.calledWith('1')\n      o.watch(s2)\n      void expect(s2).not.to.have.been.called\n      o.notify('2')\n      expect(s1).to.have.been.calledWith('2')\n      expect(s2).to.have.been.calledWith('2')\n      u()\n      o.notify('3')\n      expect(s1).not.to.have.been.calledWith('3')\n      expect(s2).to.have.been.calledWith('3')\n    })\n  })\n\n  describe('stateful mode', function () {\n    it('should have value', function () {\n      const o = new Observable('0')\n      expect(o.value).to.equal('0')\n    })\n\n    it('should call watchers', function () {\n      const s1 = sinon.spy()\n      const s2 = sinon.spy()\n      const o = new Observable('0')\n      const u = o.watch(s1)\n      expect(s1).to.have.been.calledWith('0')\n      o.value = '1'\n      expect(s1).to.have.been.calledWith('1')\n      o.watch(s2)\n      expect(s2).to.have.been.calledWith('1')\n      o.value = '2'\n      expect(s1).to.have.been.calledWith('2')\n      expect(s2).to.have.been.calledWith('2')\n      u()\n      o.value = '3'\n      expect(s1).not.to.have.been.calledWith('3')\n      expect(s2).to.have.been.calledWith('3')\n    })\n  })\n})\n","import readBlob from './read-blob'\n\ndescribe('readBlob', function () {\n  it('rejects when cannot read blob', function () {\n    const blob = new Blob(['hello world'])\n    const stub = sinon\n      .stub(FileReader.prototype, 'readAsText')\n      .callsFake(function () {\n        this.onerror(new Error('...'))\n      })\n    return expect(\n      readBlob(blob)\n        .as('text')\n        .finally(() => stub.restore())\n    ).to.be.rejected\n  })\n\n  it('resolves with correct type', function () {\n    const blob = new Blob(['hello world'])\n    return expect(readBlob(blob).as('text')).to.eventually.equal('hello world')\n  })\n})\n"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","___CSS_LOADER_EXPORT___","push","webpackEmptyContext","options","enabled","initialSpeed","desiredLeadTime","songBPM","laneCover","visiblePortion","Math","abs","nominalSpeedLeadTime","x","speed","getInitialSpeed","handleGameFinish","finishingSpeed","saveSpeed","saveLeadTime","toFixed","round","autoVelocity","mockFolderScanIO","log","text","setStatus","updateState","CustomFolderContextMock","Map","async","key","this","get","value","set","delete","song1","song2","it","folder","tester","CustomFolderTestHarness","setFolder","checkState","state","expect","chartFilesScanned","not","to","equal","scan","songs","have","length","constructor","context","data","createMockFileSystemDirectoryHandle","f","undefined","kind","queryPermission","Symbol","asyncIterator","name","entries","createMockFileSystemFileHandle","getDirectoryHandle","be","an","getFileHandle","a","getFile","blob","Blob","type","assign","lastModified","tap","notechart","fromBMSChart","chart","playerWithBMS","describe","arrayBuffer","as","decoded","AudioContext","duration","closeTo","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","mocha","setup","chai","g","sinon","main","mochaElement","document","createElement","body","appendChild","setupMocha","specs","run","on","test","err","console","title","message","error","stack","fullName","status","pending","failedExpectations","suite","root","some","spec","documentElement","classList","add","runMocha","when","and","then","errorMessage","selectedSongId","selectedChartId","selectedChartLevel","givenSelectedChart","file","info","level","update","action","actions","itCanBeToggled","check","toggle","defaultSetting","CHANGE_KEY_MAPPING","mode","keyCode","CHANGE_PLAY_MODE","mapping","nextKeyToEdit","CHANGE_SPEED","CHANGE_SCRATCH_POSITION","position","TOGGLE_BACKGROUND_ANIMATIONS","TOGGLE_AUTO_VELOCITY","TOGGLE_GAUGE","ACKNOWLEDGE","featureKey","CHANGE_AUDIO_INPUT_LATENCY","latency","UPDATE_LAST_SEEN_VERSION","newVersion","spy","calledWith","called","getTitle","song","LR2_NORMAL_TIMEGATE","store","dispatch","url","optionsSlice","charts","getState","buffer","Promise","Buffer","from","createResources","files","fileList","resources","read","before","onMessage","msg","player","audio","waveFactory","_player","playAuto","stub","returns","playNote","playFree","autos","time","keysound","notes","autosound","callCount","been","calledWithMatch","getCall","args","notifications","sounds","note","judgment","stats","instance","bad","stop","k","master","sample","samples","beforeEach","group","play","gauge","shouldDisplay","getPrimary","getSecondary","maxPossibleScore","progress","numJudgments","totalCombo","playerState","getExtra","preGauge","area","column","end","getVisibleNotes","beat","getVisibleBarLines","display","t1","t2","blankState","input","changed","judgments","getNoteStatus","getNoteJudgment","score","makeState","object","inputState","inputs","columns","placement","scratch","s","active","missed","delta","combo","plugin","out","use","wow","skinData","refs","p1_1","Set","getBounds","p1_2","y","judge","tutorial","assets","loader","keysoundCache","decode","isCached","cache","reject","withArgs","loadFiles","eventually","deep","eq","calledOnce","number","buttons","bms","advance","b","poor","handleDelta","p1_SC","p1_speedup","p1_speeddown","select","p1_pinch","finished","statsFor5Notes","statsFor1000Notes","repeat","handleJudgment","comboScore","i","maxPossibleComboScore","deltas","startSong","songId","receiveSongId","soundName","audioBuffer","isEmpty","harness","window","events","EventEmitter","gamepads","noop","addEventListener","callback","removeEventListener","removeListener","setInterval","clearInterval","keydown","emit","which","preventDefault","keyup","tick","navigator","getGamepads","fakeWindow","midi","next","target","afterEach","dispose","basicWindow","index","axes","match","last","subscription","subscribe","unsubscribe","item","has","false","action1","action2","thru","c","d","true","uid","session","floor","random","toString","Date","now","steps","_resolve","promise","fn","current","onlineServiceOptions","storage","getItem","setItem","removeItem","createOnline","createAccountInfo","username","password","email","timeout","online","after","signUp","fulfilled","rejectedWith","logOut","done","pipe","user","u","firstUser","logIn","prefix","user1","user2","step","lastRecordedAt","record","submitScore","md5","playMode","total","count","playNumber","playCount","recordedAt","instanceof","rank","above","playerName","user3","ranking","predicate","result","scoreboard","Ranking","meta","submission","tests","fake","p","report","watch","formatter","extra","all","simultaneous","rejected","byteLength","resolveUrl","Uint8Array","array","fallback","fallbackPattern","resource","WebAudioTestAPI","gain","createGain","unmute","connect","disconnect","volume","destination","node","$isConnectedTo","destroy","null","numberOfChannels","ArrayBuffer","DECODE_AUDIO_DATA_FAILED","finally","bufferSource","createBufferSource","createBuffer","start","$processTo","TEST_node","Event","skip","onstop","playbackRate","unuse","constant","fixture","skin","width","height","render","mouse","view","dispatchEvent","MouseEvent","clientX","clientY","touch","touches","changedTouches","event","style","top","left","removeChild","t","identifier","Array","stage","children","frame","texture","sprite","visible","lessThan","lol","mask","exitEvent","$xml","xml","keyframes","ease","throw","anim","_properties","prop","event1","event2","_events","getRetryDelay","XMLHttpRequest","prototype","callsFake","onerror","restore","s1","s2","notify","FileReader"],"sourceRoot":""}