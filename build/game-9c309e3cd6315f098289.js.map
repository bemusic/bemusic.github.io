{"version":3,"file":"build/game-9c309e3cd6315f098289.js","mappings":"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","sources":["file:///home/runner/work/bemuse/bemuse/common/temp/node_modules/.pnpm/aggregate-error@3.1.0/node_modules/aggregate-error/index.js","file:///home/runner/work/bemuse/bemuse/common/temp/node_modules/.pnpm/clean-stack@2.2.0/node_modules/clean-stack/index.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/ui/GameShellScene.scss","file:///home/runner/work/bemuse/bemuse/common/temp/node_modules/.pnpm/indent-string@4.0.0/node_modules/indent-string/index.js","file:///home/runner/work/bemuse/bemuse/common/temp/node_modules/.pnpm/p-map@4.0.0/node_modules/p-map/index.js","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/ui/GameShellScene.scss?[contenthash]","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/ui/GameShellScene.tsx","file:///home/runner/work/bemuse/bemuse/bemuse/src/game/index.js"],"sourcesContent":["'use strict';\nconst indentString = require('indent-string');\nconst cleanStack = require('clean-stack');\n\nconst cleanInternalStack = stack => stack.replace(/\\s+at .*aggregate-error\\/index.js:\\d+:\\d+\\)?/g, '');\n\nclass AggregateError extends Error {\n\tconstructor(errors) {\n\t\tif (!Array.isArray(errors)) {\n\t\t\tthrow new TypeError(`Expected input to be an Array, got ${typeof errors}`);\n\t\t}\n\n\t\terrors = [...errors].map(error => {\n\t\t\tif (error instanceof Error) {\n\t\t\t\treturn error;\n\t\t\t}\n\n\t\t\tif (error !== null && typeof error === 'object') {\n\t\t\t\t// Handle plain error objects with message property and/or possibly other metadata\n\t\t\t\treturn Object.assign(new Error(error.message), error);\n\t\t\t}\n\n\t\t\treturn new Error(error);\n\t\t});\n\n\t\tlet message = errors\n\t\t\t.map(error => {\n\t\t\t\t// The `stack` property is not standardized, so we can't assume it exists\n\t\t\t\treturn typeof error.stack === 'string' ? cleanInternalStack(cleanStack(error.stack)) : String(error);\n\t\t\t})\n\t\t\t.join('\\n');\n\t\tmessage = '\\n' + indentString(message, 4);\n\t\tsuper(message);\n\n\t\tthis.name = 'AggregateError';\n\n\t\tObject.defineProperty(this, '_errors', {value: errors});\n\t}\n\n\t* [Symbol.iterator]() {\n\t\tfor (const error of this._errors) {\n\t\t\tyield error;\n\t\t}\n\t}\n}\n\nmodule.exports = AggregateError;\n","'use strict';\nconst os = require('os');\n\nconst extractPathRegex = /\\s+at.*(?:\\(|\\s)(.*)\\)?/;\nconst pathRegex = /^(?:(?:(?:node|(?:internal\\/[\\w/]*|.*node_modules\\/(?:babel-polyfill|pirates)\\/.*)?\\w+)\\.js:\\d+:\\d+)|native)/;\nconst homeDir = typeof os.homedir === 'undefined' ? '' : os.homedir();\n\nmodule.exports = (stack, options) => {\n\toptions = Object.assign({pretty: false}, options);\n\n\treturn stack.replace(/\\\\/g, '/')\n\t\t.split('\\n')\n\t\t.filter(line => {\n\t\t\tconst pathMatches = line.match(extractPathRegex);\n\t\t\tif (pathMatches === null || !pathMatches[1]) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst match = pathMatches[1];\n\n\t\t\t// Electron\n\t\t\tif (\n\t\t\t\tmatch.includes('.app/Contents/Resources/electron.asar') ||\n\t\t\t\tmatch.includes('.app/Contents/Resources/default_app.asar')\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn !pathRegex.test(match);\n\t\t})\n\t\t.filter(line => line.trim() !== '')\n\t\t.map(line => {\n\t\t\tif (options.pretty) {\n\t\t\t\treturn line.replace(extractPathRegex, (m, p1) => m.replace(p1, p1.replace(homeDir, '~')));\n\t\t\t}\n\n\t\t\treturn line;\n\t\t})\n\t\t.join('\\n');\n};\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../common/temp/node_modules/.pnpm/css-loader@6.7.3_webpack@5.75.0/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../common/temp/node_modules/.pnpm/css-loader@6.7.3_webpack@5.75.0/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".GameShellScene {\\n  margin: 20px auto;\\n  background: #353433;\\n  border: 1px solid #555453;\\n  padding: 15px;\\n  max-width: 720px;\\n}\\n.GameShellScene .drop-zone {\\n  border: 2px dashed #555453;\\n  padding: 5px;\\n}\\n.GameShellScene .drop-zone a.is-active {\\n  font-weight: bold;\\n}\\n.GameShellScene .drop-zone-hint {\\n  padding: 10px;\\n  text-align: center;\\n  color: #8b8685;\\n}\\n.GameShellScene form > div {\\n  margin-bottom: 1em;\\n}\\n.GameShellScene form > div.text .label {\\n  display: block;\\n  color: #8b8685;\\n  font-weight: bold;\\n  font-size: 0.8em;\\n  margin: 0;\\n  margin-bottom: 0.5ex;\\n}\\n.GameShellScene form > div.text input {\\n  font: inherit;\\n  display: block;\\n  width: 100%;\\n  box-sizing: border-box;\\n  border: 1px inset #555453;\\n  background: #252423;\\n  color: #bfb;\\n}\\n.GameShellScene form > div.text input:disabled {\\n  opacity: 0.2;\\n}\\n.GameShellScene form > div.checkbox input {\\n  margin-right: 1ex;\\n}\\n.GameShellScene form > div.radio > h3 {\\n  display: block;\\n  color: #8b8685;\\n  font-weight: bold;\\n  font-size: 0.8em;\\n  margin: 0;\\n  margin-bottom: 0.5ex;\\n}\\n.GameShellScene form > div.radio > label {\\n  display: block;\\n}\\n.GameShellScene form > div.radio input {\\n  margin-right: 1ex;\\n}\\n.GameShellScene button {\\n  background: #8b8685;\\n  border: 1px outset #aba6a5;\\n  font: inherit;\\n  font-size: 1.5em;\\n  color: #e9e8e7;\\n  display: block;\\n  width: 100%;\\n  box-sizing: border-box;\\n}\\n.GameShellScene a {\\n  color: #fed;\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./game/ui/GameShellScene.scss\"],\"names\":[],\"mappings\":\"AAAA;EACE,iBAAA;EACA,mBAAA;EACA,yBAAA;EACA,aAAA;EACA,gBAAA;AACF;AAAE;EACE,0BAAA;EACA,YAAA;AAEJ;AADI;EACE,iBAAA;AAGN;AAAE;EACE,aAAA;EACA,kBAAA;EACA,cAAA;AAEJ;AAQE;EACE,kBAAA;AANJ;AAQM;EAVF,cAAA;EACA,cAAA;EACA,iBAAA;EACA,gBAAA;EACA,SAAA;EACA,oBAAA;AAKJ;AAGM;EACE,aAAA;EACA,cAAA;EACA,WAAA;EACA,sBAAA;EACA,yBAAA;EACA,mBAAA;EACA,WAAA;AADR;AAGM;EACE,YAAA;AADR;AAKM;EACE,iBAAA;AAHR;AAOM;EAhCF,cAAA;EACA,cAAA;EACA,iBAAA;EACA,gBAAA;EACA,SAAA;EACA,oBAAA;AA4BJ;AAEM;EACE,cAAA;AAAR;AAEM;EACE,iBAAA;AAAR;AAIE;EACE,mBAAA;EACA,0BAAA;EACA,aAAA;EACA,gBAAA;EACA,cAAA;EACA,cAAA;EACA,WAAA;EACA,sBAAA;AAFJ;AAIE;EACE,WAAA;AAFJ\",\"sourcesContent\":[\".GameShellScene {\\n  margin: 20px auto;\\n  background: #353433;\\n  border: 1px solid #555453;\\n  padding: 15px;\\n  max-width: 720px;\\n  .drop-zone {\\n    border: 2px dashed #555453;\\n    padding: 5px;\\n    a.is-active {\\n      font-weight: bold;\\n    }\\n  }\\n  .drop-zone-hint {\\n    padding: 10px;\\n    text-align: center;\\n    color: #8b8685;\\n  }\\n  @mixin option-label {\\n    display: block;\\n    color: #8b8685;\\n    font-weight: bold;\\n    font-size: 0.8em;\\n    margin: 0;\\n    margin-bottom: 0.5ex;\\n  }\\n  form > div {\\n    margin-bottom: 1em;\\n    &.text {\\n      .label {\\n        @include option-label;\\n      }\\n      input {\\n        font: inherit;\\n        display: block;\\n        width: 100%;\\n        box-sizing: border-box;\\n        border: 1px inset #555453;\\n        background: #252423;\\n        color: #bfb;\\n      }\\n      input:disabled {\\n        opacity: 0.2;\\n      }\\n    }\\n    &.checkbox {\\n      input {\\n        margin-right: 1ex;\\n      }\\n    }\\n    &.radio {\\n      > h3 {\\n        @include option-label;\\n      }\\n      > label {\\n        display: block;\\n      }\\n      input {\\n        margin-right: 1ex;\\n      }\\n    }\\n  }\\n  button {\\n    background: #8b8685;\\n    border: 1px outset #aba6a5;\\n    font: inherit;\\n    font-size: 1.5em;\\n    color: #e9e8e7;\\n    display: block;\\n    width: 100%;\\n    box-sizing: border-box;\\n  }\\n  a {\\n    color: #fed;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","'use strict';\n\nmodule.exports = (string, count = 1, options) => {\n\toptions = {\n\t\tindent: ' ',\n\t\tincludeEmptyLines: false,\n\t\t...options\n\t};\n\n\tif (typeof string !== 'string') {\n\t\tthrow new TypeError(\n\t\t\t`Expected \\`input\\` to be a \\`string\\`, got \\`${typeof string}\\``\n\t\t);\n\t}\n\n\tif (typeof count !== 'number') {\n\t\tthrow new TypeError(\n\t\t\t`Expected \\`count\\` to be a \\`number\\`, got \\`${typeof count}\\``\n\t\t);\n\t}\n\n\tif (typeof options.indent !== 'string') {\n\t\tthrow new TypeError(\n\t\t\t`Expected \\`options.indent\\` to be a \\`string\\`, got \\`${typeof options.indent}\\``\n\t\t);\n\t}\n\n\tif (count === 0) {\n\t\treturn string;\n\t}\n\n\tconst regex = options.includeEmptyLines ? /^/gm : /^(?!\\s*$)/gm;\n\n\treturn string.replace(regex, options.indent.repeat(count));\n};\n","'use strict';\nconst AggregateError = require('aggregate-error');\n\nmodule.exports = async (\n\titerable,\n\tmapper,\n\t{\n\t\tconcurrency = Infinity,\n\t\tstopOnError = true\n\t} = {}\n) => {\n\treturn new Promise((resolve, reject) => {\n\t\tif (typeof mapper !== 'function') {\n\t\t\tthrow new TypeError('Mapper function is required');\n\t\t}\n\n\t\tif (!((Number.isSafeInteger(concurrency) || concurrency === Infinity) && concurrency >= 1)) {\n\t\t\tthrow new TypeError(`Expected \\`concurrency\\` to be an integer from 1 and up or \\`Infinity\\`, got \\`${concurrency}\\` (${typeof concurrency})`);\n\t\t}\n\n\t\tconst result = [];\n\t\tconst errors = [];\n\t\tconst iterator = iterable[Symbol.iterator]();\n\t\tlet isRejected = false;\n\t\tlet isIterableDone = false;\n\t\tlet resolvingCount = 0;\n\t\tlet currentIndex = 0;\n\n\t\tconst next = () => {\n\t\t\tif (isRejected) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst nextItem = iterator.next();\n\t\t\tconst index = currentIndex;\n\t\t\tcurrentIndex++;\n\n\t\t\tif (nextItem.done) {\n\t\t\t\tisIterableDone = true;\n\n\t\t\t\tif (resolvingCount === 0) {\n\t\t\t\t\tif (!stopOnError && errors.length !== 0) {\n\t\t\t\t\t\treject(new AggregateError(errors));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresolvingCount++;\n\n\t\t\t(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst element = await nextItem.value;\n\t\t\t\t\tresult[index] = await mapper(element, index);\n\t\t\t\t\tresolvingCount--;\n\t\t\t\t\tnext();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (stopOnError) {\n\t\t\t\t\t\tisRejected = true;\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrors.push(error);\n\t\t\t\t\t\tresolvingCount--;\n\t\t\t\t\t\tnext();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})();\n\t\t};\n\n\t\tfor (let i = 0; i < concurrency; i++) {\n\t\t\tnext();\n\n\t\t\tif (isIterableDone) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n};\n","\n      import API from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../common/temp/node_modules/.pnpm/style-loader@3.3.1_webpack@5.75.0/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../common/temp/node_modules/.pnpm/css-loader@6.7.3_webpack@5.75.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../common/temp/node_modules/.pnpm/postcss-loader@7.0.2_webpack@5.75.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!../../../../common/temp/node_modules/.pnpm/sass-loader@13.2.0_sass@1.57.1+webpack@5.75.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./GameShellScene.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../common/temp/node_modules/.pnpm/css-loader@6.7.3_webpack@5.75.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../common/temp/node_modules/.pnpm/postcss-loader@7.0.2_webpack@5.75.0/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!../../../../common/temp/node_modules/.pnpm/sass-loader@13.2.0_sass@1.57.1+webpack@5.75.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./GameShellScene.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import './GameShellScene.scss'\n\nimport { IResource, IResources } from 'bemuse/resources/types'\nimport { PanelPlacement, ScratchPosition } from 'bemuse/app/entities/Options'\nimport React, { ChangeEvent, DragEvent, FormEvent, useState } from 'react'\n\nimport DndResources from 'bemuse/resources/dnd-resources'\nimport c from 'classnames'\n\ninterface BmsEntry {\n  name: string\n  resource: IResource\n}\n\ninterface CustomChartSelectorProps {\n  files: readonly BmsEntry[]\n  selectedResource?: IResource | null\n  onSelect: (resource: IResource | null) => void\n  onDrop: (e: DragEvent<HTMLDivElement>) => void\n}\n\nconst CustomChartSelector = ({\n  files,\n  selectedResource,\n  onSelect,\n  onDrop,\n}: CustomChartSelectorProps) => {\n  const handleItemClick = (file: BmsEntry) => () => {\n    onSelect(file.resource)\n  }\n\n  const handleClear = () => {\n    onSelect(null)\n  }\n\n  return (\n    <div className='drop-zone'>\n      {files.length ? (\n        <ul>\n          {files.map((file) => (\n            <li key={file.name}>\n              <a\n                onClick={handleItemClick(file)}\n                className={c({\n                  'is-active': file.resource === selectedResource,\n                })}\n              >\n                {file.name}\n              </a>\n            </li>\n          ))}\n          {selectedResource ? (\n            <li>\n              <a onClick={handleClear}>Clear</a>\n            </li>\n          ) : null}\n        </ul>\n      ) : (\n        <div className='drop-zone-hint' onDrop={onDrop}>\n          Drop BMS folder here\n          <br />\n          (only works on Google Chrome)\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport interface OptionsDraft {\n  resource?: IResource | null\n  resources?: IResources\n  url: string\n  game: {\n    audioInputLatency: number\n  }\n  players: {\n    speed: number\n    autoplay: boolean\n    placement: PanelPlacement\n    scratch: ScratchPosition\n    input: {\n      keyboard: {\n        1: number\n        2: number\n        3: number\n        4: number\n        5: number\n        6: number\n        7: number\n        SC: number\n        SC2: number\n      }\n    }\n  }[]\n  tutorial?: boolean\n  soundVolume?: number\n}\n\nexport interface GameShellSceneProps {\n  options: OptionsDraft\n  play: (options: OptionsDraft) => void\n}\n\nconst GameShellScene = ({\n  options: initOptions,\n  play,\n}: GameShellSceneProps) => {\n  const [options, setOptions] = useState(initOptions)\n  const [files, setFiles] = useState<BmsEntry[]>([])\n  const [, setUpdate] = useState(false)\n  const forceUpdate = () => setUpdate((flag) => !flag)\n\n  const submit = (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault()\n    play(options)\n  }\n\n  const bindOption = (\n    binder: (options: OptionsDraft, newValue: string) => void\n  ) => {\n    return (event: ChangeEvent<HTMLInputElement>) => {\n      binder(options, event.target.value)\n      forceUpdate()\n    }\n  }\n\n  const handleDragOver = (e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault()\n  }\n\n  const handleDrop = async (e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault()\n    const event = e.nativeEvent\n    const resources = new DndResources(event)\n    try {\n      const list = await resources.fileList\n      const names = list.filter((filename) =>\n        /\\.(bms|bme|bml)$/i.test(filename)\n      )\n      const bms = await Promise.all(\n        names.map(async (name): Promise<BmsEntry> => {\n          const resource = await resources.file(name)\n          return { name, resource }\n        })\n      )\n      setFiles(bms)\n      setOptions((options) => ({ ...options, resources }))\n    } catch (err) {\n      if (err instanceof MediaError) {\n        throw new Error('File Error code ' + err.code)\n      } else {\n        throw err\n      }\n    }\n  }\n\n  const handleSelectFile = (resource: IResource | null) => {\n    setOptions((options) => ({ ...options, resource }))\n    forceUpdate()\n  }\n\n  return (\n    <div\n      className='GameShellScene'\n      onDragOver={handleDragOver}\n      onDrop={handleDrop}\n    >\n      <h1>Bemuse Game Shell</h1>\n      <p>This tool is intended for developers testing the game.</p>\n      <form onSubmit={submit}>\n        <div className='text'>\n          <label>\n            <span className='label'>BMS URL:</span>\n            <input\n              type='text'\n              disabled={!!options.resource}\n              onChange={bindOption((o, v) => (o.url = v))}\n              value={options.url}\n            />\n          </label>\n        </div>\n        <div className='text'>\n          <label>\n            <span className='label'>-or- Drop BMS folder here</span>\n            <CustomChartSelector\n              files={files}\n              selectedResource={options.resource}\n              onSelect={handleSelectFile}\n              onDrop={handleDrop}\n            />\n          </label>\n        </div>\n        <div className='text'>\n          <label>\n            <span className='label'>Audio-Input Latency</span>\n            <input\n              type='text'\n              onChange={bindOption(\n                (o, v) => (o.game.audioInputLatency = parseInt(v, 10))\n              )}\n              value={options.game.audioInputLatency}\n            />\n          </label>\n        </div>\n        <div className='text'>\n          <label>\n            <span className='label'>HI-SPEED:</span>\n            <input\n              type='text'\n              onChange={bindOption(\n                (o, v) => (o.players[0].speed = parseInt(v, 10))\n              )}\n              value={options.players[0].speed}\n            />\n          </label>\n        </div>\n        <div className='radio'>\n          <h3>Placement</h3>\n          {(['left', 'center', 'right'] as const).map((placement) => (\n            <label key={placement}>\n              <input\n                type='radio'\n                value={placement}\n                onChange={bindOption(\n                  (o, v) => (o.players[0].placement = placement)\n                )}\n                checked={options.players[0].placement === placement}\n              />\n              <span className='label'>{placement}</span>\n            </label>\n          ))}\n        </div>\n        <button type='submit'>Play</button>\n      </form>\n    </div>\n  )\n}\n\nexport default GameShellScene\n","import * as GameLoader from './loaders/game-loader'\n\nimport { SceneManager, SceneManagerContext } from 'bemuse/scene-manager'\n\nimport BemusePackageResources from 'bemuse/resources/bemuse-package'\nimport GameScene from './game-scene'\nimport GameShellScene from './ui/GameShellScene'\nimport LoadingScene from './ui/LoadingScene'\nimport { Provider } from 'react-redux'\nimport React from 'react'\nimport URLResource from 'bemuse/resources/url'\nimport audioContext from 'bemuse/audio-context'\nimport configureStore from 'bemuse/app/redux/configureStore'\nimport query from 'bemuse/utils/query'\nimport { unmuteAudio } from 'bemuse/sampling-master'\n\nconst sceneManager = new SceneManager(({ children }) => (\n  <SceneManagerContext.Provider value={sceneManager}>\n    <Provider store={configureStore()}>{children}</Provider>\n  </SceneManagerContext.Provider>\n))\n\nexport async function main() {\n  // iOS\n  window.addEventListener('touchstart', function unmute() {\n    unmuteAudio(audioContext)\n    window.removeEventListener('touchstart', unmute)\n  })\n\n  const displayShell = function (options) {\n    return new Promise(function (resolve) {\n      const scene = React.createElement(GameShellScene, {\n        options: options,\n        play: function (data) {\n          resolve(data)\n        },\n      })\n      sceneManager.display(scene)\n    })\n  }\n\n  const getSong = async function () {\n    const kbm = (query.keyboard || '').split(',').map((x) => +x)\n    let options = {\n      url: query.bms || '/music/[snack]dddd/dddd_sph.bme',\n      game: {\n        audioInputLatency: +query.latency || 0,\n      },\n      players: [\n        {\n          speed: +query.speed || 3,\n          autoplay: !!query.autoplay,\n          placement: 'center',\n          scratch: query.scratch || 'left',\n          input: {\n            keyboard: {\n              1: kbm[0] || 83,\n              2: kbm[1] || 68,\n              3: kbm[2] || 70,\n              4: kbm[3] || 32,\n              5: kbm[4] || 74,\n              6: kbm[5] || 75,\n              7: kbm[6] || 76,\n              SC: kbm[7] || 65,\n              SC2: kbm[8] || 16,\n            },\n          },\n        },\n      ],\n    }\n    options = await displayShell(options)\n    const url = options.url\n    const assetsUrl = new URL('assets/', url)\n    const metadata = {\n      title: 'Loading',\n      subtitles: [],\n      artist: '',\n      genre: '',\n      subartists: [],\n    }\n    return {\n      bms: options.resource || new URLResource(url),\n      assets: options.resources || new BemusePackageResources(assetsUrl),\n      metadata: metadata,\n      options: Object.assign({}, options.game, { players: options.players }),\n    }\n  }\n\n  const loadSpec = await getSong()\n  const { tasks, promise } = GameLoader.load(loadSpec)\n  await sceneManager.display(\n    React.createElement(LoadingScene, {\n      tasks: tasks,\n      song: loadSpec.metadata,\n    })\n  )\n  const controller = await promise\n  await sceneManager.display(new GameScene(controller.display))\n  controller.start()\n}\n"],"names":["indentString","cleanStack","AggregateError","Error","constructor","errors","Array","isArray","TypeError","message","map","error","Object","assign","stack","replace","String","join","super","this","name","defineProperty","value","Symbol","iterator","_errors","module","exports","os","extractPathRegex","pathRegex","homeDir","homedir","options","pretty","split","filter","line","pathMatches","match","includes","test","trim","m","p1","___CSS_LOADER_EXPORT___","push","id","string","count","indent","includeEmptyLines","regex","repeat","async","iterable","mapper","concurrency","Infinity","stopOnError","Promise","resolve","reject","Number","isSafeInteger","result","isRejected","isIterableDone","resolvingCount","currentIndex","next","nextItem","index","done","length","element","i","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","CustomChartSelector","files","selectedResource","onSelect","onDrop","handleItemClick","file","resource","className","key","onClick","initOptions","play","setOptions","useState","setFiles","setUpdate","forceUpdate","flag","bindOption","binder","event","target","handleDrop","e","preventDefault","nativeEvent","resources","names","fileList","filename","bms","all","err","MediaError","code","onDragOver","onSubmit","type","disabled","onChange","o","v","url","game","audioInputLatency","parseInt","players","speed","placement","checked","sceneManager","children","store","configureStore","main","window","addEventListener","unmute","removeEventListener","loadSpec","kbm","query","x","autoplay","scratch","input","keyboard","SC","SC2","scene","data","display","displayShell","assetsUrl","URL","assets","metadata","title","subtitles","artist","genre","subartists","getSong","tasks","promise","LoadingScene","song","controller","start"],"sourceRoot":""}