/*! For license information please see previewer-e740cf2ad8c5317f874c.js.LICENSE.txt */
(this.webpackJsonp=this.webpackJsonp||[]).push([[14],{106:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(588);var r=n(23),o=n.n(r),i=n(26),a=n.n(i),s=n(50),u=n.n(s);class c extends o.a.Component{render(){return o.a.createElement("div",{className:u()("Panel",this.props.className)},o.a.createElement("div",{className:"Panelのtitle"},this.props.title),o.a.createElement("div",{className:"Panelのcontent"},this.props.children))}}c.propTypes={className:a.a.string,title:a.a.string,children:a.a.node}},107:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.match=void 0,t.match=function(e){var t=!1;return{when:function(n,r){if(t)return this;var o=e.match(n);return o&&(t=!0,r(o)),this},else:function(e){if(t)return this;e()}}}},108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BMSHeaders=void 0;var r=function(){function e(){this._data={},this._dataAll={}}return e.prototype.each=function(e){for(var t in this._data)e(t,this._data[t])},e.prototype.get=function(e){return this._data[e.toLowerCase()]},e.prototype.getAll=function(e){return this._dataAll[e.toLowerCase()]},e.prototype.set=function(e,t){var n=e.toLowerCase();this._data[n]=t,(this._dataAll[n]||(this._dataAll[n]=[])).push(t)},e}();t.BMSHeaders=r},109:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BMSObjects=void 0;var r=function(){function e(){this._objects=[]}return e.prototype.add=function(e){if("01"!==e.channel)for(var t=0;t<this._objects.length;t++){var n=this._objects[t];if(n.channel===e.channel&&n.measure===e.measure&&n.fraction===e.fraction)return void(this._objects[t]=e)}this._objects.push(e)},e.prototype.all=function(){return this._objects.slice()},e.prototype.allSorted=function(){var e=this.all();return e.sort((function(e,t){return e.measure+e.fraction-(t.measure+t.fraction)})),e},e}();t.BMSObjects=r},110:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeSignatures=void 0;var r=function(){function e(){this._values={}}return e.prototype.set=function(e,t){this._values[e]=t},e.prototype.get=function(e){return this._values[e]||1},e.prototype.getBeats=function(e){return 4*this.get(e)},e.prototype.measureToBeat=function(e,t){for(var n=0,r=0;r<e;r++)n+=this.getBeats(r);return n+this.getBeats(e)*t},e}();t.TimeSignatures=r},1325:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(1326);var r=n(23),o=n.n(r);const i=e=>{return o.a.createElement("svg",{width:32,height:32,viewBox:"0 0 32 32",className:"BarDot"},e.fraction>0?e.fraction<.99?o.a.createElement("path",{fill:e.fill,d:(t=16,n=16,r=16,i=0,s=360*e.fraction,u=a(t,n,r,s),c=a(t,n,r,i),l=s-i<=180?"0":"1",d=["M",u.x,u.y,"A",r,r,0,l,0,c.x,c.y,"L",t,n].join(" "),d)}):o.a.createElement("circle",{cx:16,cy:16,r:16,fill:e.fill}):null);var t,n,r,i,s,u,c,l,d};function a(e,t,n,r){var o=(r-90)*Math.PI/180;return{x:e+n*Math.cos(o),y:t+n*Math.sin(o)}}},1326:function(e,t,n){var r=n(1327);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:undefined,insertInto:void 0};n(0)(r,o);r.locals&&(e.exports=r.locals)},1327:function(e,t,n){(e.exports=n(1)(!1)).push([e.i,".BarDot {\n  width: 0.64em;\n  height: 0.64em;\n  vertical-align: middle;\n  margin-right: 0.25em;\n}",""])},1328:function(e,t,n){var r=n(1329);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:undefined,insertInto:void 0};n(0)(r,o);r.locals&&(e.exports=r.locals)},1329:function(e,t,n){(e.exports=n(1)(!1)).push([e.i,'@charset "UTF-8";\n.AlertDialogのoverlay {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: rgba(17, 17, 17, 0.5);\n  overflow: hidden;\n  z-index: 10000;\n}\n.AlertDialogのcontent {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  z-index: 10001;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.AlertDialogのcontent > * {\n  flex: none;\n}',""])},1330:function(e,t,n){var r=n(1331);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:undefined,insertInto:void 0};n(0)(r,o);r.locals&&(e.exports=r.locals)},1331:function(e,t,n){(e.exports=n(1)(!1)).push([e.i,".Button {\n  font: inherit;\n  background: #252423 linear-gradient(to bottom, #454443, #151413);\n  border: 1px solid #555453;\n  padding: 0.5ex 1.3ex;\n  color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);\n}\n.Button:hover {\n  border-color: #656463;\n}\n.Button:focus {\n  border-color: #8b8685;\n  outline: 0;\n}\n.Button:active {\n  background: #252423 linear-gradient(to top, #353433, #151413);\n  border-color: #454443;\n}",""])},1332:function(e,t,n){var r=n(1333);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:undefined,insertInto:void 0};n(0)(r,o);r.locals&&(e.exports=r.locals)},1333:function(e,t,n){(e.exports=n(1)(!1)).push([e.i,'@charset "UTF-8";\n.ComboBox {\n  width: 24em;\n  max-width: 80vw;\n}\n.ComboBoxのinput {\n  font: inherit;\n  background: #252423 linear-gradient(to bottom, #151413, #292827);\n  border: 1px solid #555453;\n  padding: 0.5ex 1.3ex;\n  color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);\n  width: 100%;\n  box-sizing: border-box;\n}\n.ComboBoxのinput:hover {\n  border-color: #656463;\n}\n.ComboBoxのinput:focus {\n  border-color: #8b8685;\n  outline: 0;\n}\n.ComboBoxのinput:active {\n  border-color: #454443;\n}\n.ComboBoxのinput::selection {\n  background: #8b8685;\n  color: #8e8;\n}\n.ComboBoxのmenu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  height: 8em;\n  margin-top: 0.5em;\n  background: #252423;\n  border: 1px solid #555453;\n  border-radius: 4px;\n}\n.ComboBoxのmenu > li[data-highlighted=true] {\n  background-color: #8b8685;\n  color: #fff;\n}\n.ComboBoxのmenu > li {\n  padding: 0.5ex 1.3ex;\n}',""])},1334:function(e,t,n){(function(n){var r,o,i;o=[],void 0===(i="function"==typeof(r=function(){function e(h){var m={single:function(e,t,n){return e?(d(e)||(e=m.getPreparedSearch(e)),t?(d(t)||(t=m.getPrepared(t)),((n&&void 0!==n.allowTypo?n.allowTypo:!h||void 0===h.allowTypo||h.allowTypo)?m.algorithm:m.algorithmNoTypo)(e,t,e[0])):null):null},go:function(e,t,n){if(!e)return i;var r=(e=m.prepareSearch(e))[0],o=n&&n.threshold||h&&h.threshold||-9007199254740991,a=n&&n.limit||h&&h.limit||9007199254740991,s=(n&&void 0!==n.allowTypo?n.allowTypo:!h||void 0===h.allowTypo||h.allowTypo)?m.algorithm:m.algorithmNoTypo,u=0,f=0,g=t.length;if(n&&n.keys)for(var v=n.scoreFn||c,b=n.keys,y=b.length,_=g-1;_>=0;--_){for(var w=t[_],E=new Array(y),x=y-1;x>=0;--x)(I=l(w,O=b[x]))?(d(I)||(I=m.getPrepared(I)),E[x]=s(e,I,r)):E[x]=null;E.obj=w;var S=v(E);null!==S&&(S<o||(E.score=S,u<a?(p.add(E),++u):(++f,S>p.peek().score&&p.replaceTop(E))))}else if(n&&n.key){var O=n.key;for(_=g-1;_>=0;--_)(I=l(w=t[_],O))&&(d(I)||(I=m.getPrepared(I)),null!==(M=s(e,I,r))&&(M.score<o||(M={target:M.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:M.score,indexes:M.indexes,obj:w},u<a?(p.add(M),++u):(++f,M.score>p.peek().score&&p.replaceTop(M)))))}else for(_=g-1;_>=0;--_){var I,M;(I=t[_])&&(d(I)||(I=m.getPrepared(I)),null!==(M=s(e,I,r))&&(M.score<o||(u<a?(p.add(M),++u):(++f,M.score>p.peek().score&&p.replaceTop(M)))))}if(0===u)return i;var C=new Array(u);for(_=u-1;_>=0;--_)C[_]=p.poll();return C.total=u+f,C},goAsync:function(e,r,o){var a=!1,s=new Promise((function(s,u){if(!e)return s(i);var p=(e=m.prepareSearch(e))[0],g=f(),v=r.length-1,b=o&&o.threshold||h&&h.threshold||-9007199254740991,y=o&&o.limit||h&&h.limit||9007199254740991,_=(o&&void 0!==o.allowTypo?o.allowTypo:!h||void 0===h.allowTypo||h.allowTypo)?m.algorithm:m.algorithmNoTypo,w=0,E=0;function x(){if(a)return u("canceled");var f=Date.now();if(o&&o.keys)for(var h=o.scoreFn||c,S=o.keys,O=S.length;v>=0;--v){for(var I=r[v],M=new Array(O),C=O-1;C>=0;--C)(T=l(I,j=S[C]))?(d(T)||(T=m.getPrepared(T)),M[C]=_(e,T,p)):M[C]=null;M.obj=I;var P=h(M);if(null!==P&&!(P<b)&&(M.score=P,w<y?(g.add(M),++w):(++E,P>g.peek().score&&g.replaceTop(M)),v%1e3==0&&Date.now()-f>=10))return void(t?n(x):setTimeout(x))}else if(o&&o.key){for(var j=o.key;v>=0;--v)if((T=l(I=r[v],j))&&(d(T)||(T=m.getPrepared(T)),null!==(B=_(e,T,p))&&!(B.score<b)&&(B={target:B.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:B.score,indexes:B.indexes,obj:I},w<y?(g.add(B),++w):(++E,B.score>g.peek().score&&g.replaceTop(B)),v%1e3==0&&Date.now()-f>=10)))return void(t?n(x):setTimeout(x))}else for(;v>=0;--v){var T,B;if((T=r[v])&&(d(T)||(T=m.getPrepared(T)),null!==(B=_(e,T,p))&&!(B.score<b)&&(w<y?(g.add(B),++w):(++E,B.score>g.peek().score&&g.replaceTop(B)),v%1e3==0&&Date.now()-f>=10)))return void(t?n(x):setTimeout(x))}if(0===w)return s(i);for(var k=new Array(w),N=w-1;N>=0;--N)k[N]=g.poll();k.total=w+E,s(k)}t?n(x):x()}));return s.cancel=function(){a=!0},s},highlight:function(e,t,n){if(null===e)return null;void 0===t&&(t="<b>"),void 0===n&&(n="</b>");for(var r="",o=0,i=!1,a=e.target,s=a.length,u=e.indexes,c=0;c<s;++c){var l=a[c];if(u[o]===c){if(i||(i=!0,r+=t),++o===u.length){r+=l+n+a.substr(c+1);break}}else i&&(i=!1,r+=n);r+=l}return r},prepare:function(e){if(e)return{target:e,_targetLowerCodes:m.prepareLowerCodes(e),_nextBeginningIndexes:null,score:null,indexes:null,obj:null}},prepareSlow:function(e){if(e)return{target:e,_targetLowerCodes:m.prepareLowerCodes(e),_nextBeginningIndexes:m.prepareNextBeginningIndexes(e),score:null,indexes:null,obj:null}},prepareSearch:function(e){if(e)return m.prepareLowerCodes(e)},getPrepared:function(e){if(e.length>999)return m.prepare(e);var t=r.get(e);return void 0!==t||(t=m.prepare(e),r.set(e,t)),t},getPreparedSearch:function(e){if(e.length>999)return m.prepareSearch(e);var t=o.get(e);return void 0!==t||(t=m.prepareSearch(e),o.set(e,t)),t},algorithm:function(e,t,n){for(var r=t._targetLowerCodes,o=e.length,i=r.length,u=0,c=0,l=0,d=0;;){if(n===r[c]){if(a[d++]=c,++u===o)break;n=e[0===l?u:l===u?u+1:l===u-1?u-1:u]}if(++c>=i)for(;;){if(u<=1)return null;if(0===l){if(n===e[--u])continue;l=u}else{if(1===l)return null;if((n=e[1+(u=--l)])===e[u])continue}c=a[(d=u)-1]+1;break}}u=0;var f=0,p=!1,h=0,g=t._nextBeginningIndexes;null===g&&(g=t._nextBeginningIndexes=m.prepareNextBeginningIndexes(t.target));var v=c=0===a[0]?0:g[a[0]-1];if(c!==i)for(;;)if(c>=i){if(u<=0){if(++f>o-2)break;if(e[f]===e[f+1])continue;c=v;continue}--u,c=g[s[--h]]}else if(e[0===f?u:f===u?u+1:f===u-1?u-1:u]===r[c]){if(s[h++]=c,++u===o){p=!0;break}++c}else c=g[c];if(p)var b=s,y=h;else b=a,y=d;for(var _=0,w=-1,E=0;E<o;++E)w!==(c=b[E])-1&&(_-=c),w=c;for(p?0!==f&&(_+=-20):(_*=1e3,0!==l&&(_+=-20)),_-=i-o,t.score=_,t.indexes=new Array(y),E=y-1;E>=0;--E)t.indexes[E]=b[E];return t},algorithmNoTypo:function(e,t,n){for(var r=t._targetLowerCodes,o=e.length,i=r.length,u=0,c=0,l=0;;){if(n===r[c]){if(a[l++]=c,++u===o)break;n=e[u]}if(++c>=i)return null}u=0;var d=!1,f=0,p=t._nextBeginningIndexes;if(null===p&&(p=t._nextBeginningIndexes=m.prepareNextBeginningIndexes(t.target)),(c=0===a[0]?0:p[a[0]-1])!==i)for(;;)if(c>=i){if(u<=0)break;--u,c=p[s[--f]]}else if(e[u]===r[c]){if(s[f++]=c,++u===o){d=!0;break}++c}else c=p[c];if(d)var h=s,g=f;else h=a,g=l;for(var v=0,b=-1,y=0;y<o;++y)b!==(c=h[y])-1&&(v-=c),b=c;for(d||(v*=1e3),v-=i-o,t.score=v,t.indexes=new Array(g),y=g-1;y>=0;--y)t.indexes[y]=h[y];return t},prepareLowerCodes:function(e){for(var t=e.length,n=[],r=e.toLowerCase(),o=0;o<t;++o)n[o]=r.charCodeAt(o);return n},prepareBeginningIndexes:function(e){for(var t=e.length,n=[],r=0,o=!1,i=!1,a=0;a<t;++a){var s=e.charCodeAt(a),u=s>=65&&s<=90,c=u||s>=97&&s<=122||s>=48&&s<=57,l=u&&!o||!i||!c;o=u,i=c,l&&(n[r++]=a)}return n},prepareNextBeginningIndexes:function(e){for(var t=e.length,n=m.prepareBeginningIndexes(e),r=[],o=n[0],i=0,a=0;a<t;++a)o>a?r[a]=o:(o=n[++i],r[a]=void 0===o?t:o);return r},cleanup:u,new:e};return m}var t="undefined"==typeof window,r=new Map,o=new Map,i=[];i.total=0;var a=[],s=[];function u(){r.clear(),o.clear(),a=[],s=[]}function c(e){for(var t=-9007199254740991,n=e.length-1;n>=0;--n){var r=e[n];if(null!==r){var o=r.score;o>t&&(t=o)}}return-9007199254740991===t?null:t}function l(e,t){var n=e[t];if(void 0!==n)return n;var r=t;Array.isArray(t)||(r=t.split("."));for(var o=r.length,i=-1;e&&++i<o;)e=e[r[i]];return e}function d(e){return"object"==typeof e}var f=function(){var e=[],t=0,n={};function r(){for(var n=0,r=e[n],o=1;o<t;){var i=o+1;n=o,i<t&&e[i].score<e[o].score&&(n=i),e[n-1>>1]=e[n],o=1+(n<<1)}for(var a=n-1>>1;n>0&&r.score<e[a].score;a=(n=a)-1>>1)e[n]=e[a];e[n]=r}return n.add=function(n){var r=t;e[t++]=n;for(var o=r-1>>1;r>0&&n.score<e[o].score;o=(r=o)-1>>1)e[r]=e[o];e[r]=n},n.poll=function(){if(0!==t){var n=e[0];return e[0]=e[--t],r(),n}},n.peek=function(n){if(0!==t)return e[0]},n.replaceTop=function(t){e[0]=t,r()},n},p=f();return e()})?r.apply(t,o):r)||(e.exports=i)}).call(this,n(120).setImmediate)},1335:function(e,t,n){"use strict";e.exports=n(1336)},1336:function(e,t,n){"use strict";var r=60103,o=60106,i=60107,a=60108,s=60114,u=60109,c=60110,l=60112,d=60113,f=60120,p=60115,h=60116,m=60121,g=60122,v=60117,b=60129,y=60131;if("function"==typeof Symbol&&Symbol.for){var _=Symbol.for;r=_("react.element"),o=_("react.portal"),i=_("react.fragment"),a=_("react.strict_mode"),s=_("react.profiler"),u=_("react.provider"),c=_("react.context"),l=_("react.forward_ref"),d=_("react.suspense"),f=_("react.suspense_list"),p=_("react.memo"),h=_("react.lazy"),m=_("react.block"),g=_("react.server.block"),v=_("react.fundamental"),b=_("react.debug_trace_mode"),y=_("react.legacy_hidden")}function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case i:case s:case a:case d:case f:return e;default:switch(e=e&&e.$$typeof){case c:case l:case h:case p:case u:return e;default:return t}}case o:return t}}}var E=u,x=r,S=l,O=i,I=h,M=p,C=o,P=s,j=a,T=d;t.ContextConsumer=c,t.ContextProvider=E,t.Element=x,t.ForwardRef=S,t.Fragment=O,t.Lazy=I,t.Memo=M,t.Portal=C,t.Profiler=P,t.StrictMode=j,t.Suspense=T,t.isAsyncMode=function(){return!1},t.isConcurrentMode=function(){return!1},t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===l},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===h},t.isMemo=function(e){return w(e)===p},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===s||e===b||e===a||e===d||e===f||e===y||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===p||e.$$typeof===u||e.$$typeof===c||e.$$typeof===l||e.$$typeof===v||e.$$typeof===m||e[0]===g)},t.typeOf=w},157:function(e,t,n){"use strict";t.a=new AudioContext({latencyHint:"interactive"})},170:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return f}));var r=n(157),o=n(79),i=n(175);const a=.001;let s=document.createElement("audio");const u=!s.canPlayType('audio/ogg; codecs="vorbis"');class c{constructor(e,{volume:t}={}){this._master=e,this._gain=this._master.audioContext.createGain(),null!=t&&(this._gain.gain.value=t),this._gain.connect(this._master.destination)}get destination(){return this._gain}destroy(){this._gain.disconnect(),this._gain=null}}class l{constructor(e,t){this._master=e,this._buffer=t}play(e,t){return new d(this._master,this._buffer,e,t)}destroy(){this._master=null,this._buffer=null}get duration(){return this._buffer.duration}}class d{constructor(e,t,n,r={}){n=n||0,this._master=e;let o=e.audioContext,i=o.createBufferSource();i.buffer=t,i.onended=()=>this.stop();let s=o.createGain();i.connect(s);let u=r.node||r.group&&r.group.destination||e.destination;s.connect(u),this._source=i,this._gain=this.TEST_node=s;let c=n?Math.max(0,o.currentTime+n):0,l=r.start||0,d=l>0,f=!1;if(d&&s.gain.setValueAtTime(0,0),void 0!==r.end){let e=Math.max(r.end-l,0);i.start(c,l,e+a),f=o.currentTime+n+e}else i.start(c,l);d&&(s.gain.setValueAtTime(0,o.currentTime+n),s.gain.linearRampToValueAtTime(1,o.currentTime+n+a)),!1!==f&&(s.gain.setValueAtTime(1,f),s.gain.linearRampToValueAtTime(0,f+a)),this._master._startPlaying(this)}stop(){this._source&&(this._source.stop(0),this._source.disconnect(),this._gain.disconnect(),this._source=null,this._gain=null,this._master._stoppedPlaying(this),this.onstop&&this.onstop())}bad(){this._source&&(this._source.playbackRate.value=Math.random()<.5?Math.pow(2,1/24):Math.pow(2,-1/24))}destroy(){this.stop()}}function f(e=r.a){let t=e.createGain(),n=e.createOscillator();n.frequency.value=440,n.start(e.currentTime+.1),n.stop(e.currentTime+.1),t.connect(e.destination),t.disconnect(),async function(e){return e.resume()}(e).catch((e=>{console.error("[sampling-master] Cannot resume AudioContext",e)}))}t.b=class{constructor(e){this._audioContext=e||r.a,this._samples=[],this._groups=[],this._instances=new Set,this._destination=this._audioContext.destination}unmute(){f(this._audioContext)}get audioContext(){return this._audioContext}get destination(){return this._destination}get currentTime(){return this._audioContext.currentTime}destroy(){if(!this._destroyed){this._destroyed=!0;for(let e of this._samples)e.destroy();for(let e of this._instances)e.destroy();this._samples=null,this._instances=null}}decode(e){return this._coerceToArrayBuffer(e).then((e=>this._decodeAudio(e)))}sample(e){return(()=>e.numberOfChannels?Promise.resolve(e):this.decode(e))().then((e=>{if(this._destroyed)throw new Error("SamplingMaster already destroyed!");var t=new l(this,e);return this._samples.push(t),t}))}group(e){const t=new c(this,e);return this._groups.push(t),t}_coerceToArrayBuffer(e){return e instanceof ArrayBuffer?Promise.resolve(e):Object(o.a)(e).as("arraybuffer")}_decodeAudio(e){return new Promise(((t,n)=>{if(u&&e.byteLength>4){const n=new Uint8Array(e,0,4);if(79===n[0]&&103===n[1]&&103===n[2]&&83===n[3])return t(Object(i.a)(this.audioContext,e))}this.audioContext.decodeAudioData(e,(function(e){t(e)}),(function(e){n(new Error("Unable to decode audio: "+e))}))}))}_startPlaying(e){this._instances.add(e)}_stoppedPlaying(e){this._instances.delete(e)}}},175:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(169);let o;const i=n.n(r)()(1);async function a(e,t){const r=await(o||(o=n.e(15).then(n.t.bind(null,548,7)).then((e=>e.default)).then((e=>(0,eval)(e+";stbvorbis")))),o);return i((()=>function(e,t,n){return new Promise(((r,o)=>{const i=[];let a,u=0;e.decode(n,(function(e){if(e.data&&(a=e.sampleRate,i.push(e.data),u+=e.data[0].length),e.error){const t=e.error instanceof Error?e.error:`stbvorbis.js Error: ${e.error}`;o(t)}e.eof&&r(async function(e,t,n,r){if(!n)throw new Error("stbvorbis.js Error: No length");if(!r)throw new Error("stbvorbis.js Error: No sample rate");const o=t[0].length,i=e.createBuffer(o,n,r),a=Array(i.numberOfChannels).fill(null).map(((e,t)=>new s(i.getChannelData(t))));for(const e of t)e.forEach(((e,t)=>{a[t].write(e)}));return i}(t,i,u,a))}))}))}(r,e,t)))}class s{constructor(e){this.data=e,this.offset=0}write(e){const{offset:t,data:n}=this;for(var r=0;r<e.length;r++)n[r+t]=e[r];this.offset+=e.length}}},177:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Notechart=void 0;var s=a(n(27)),u=a(n(55));o(n(290),t);var c=function(){function e(e,t){void 0===t&&(t={});var n=this,r=e.notes,o=e.timing,i=e.keysounds,a=e.songInfo,s=e.positioning,c=e.spacing,l=e.barLines,d=e.images,f=e.expertJudgmentWindow,p=e.landmineNotes,h=void 0===p?[]:p;(0,u.default)(r,'Expected "data.notes"'),(0,u.default)(o,'Expected "data.timing"'),(0,u.default)(i,'Expected "data.keysounds"'),(0,u.default)(a,'Expected "data.songInfo"'),(0,u.default)(s,'Expected "data.positioning"'),(0,u.default)(c,'Expected "data.spacing"'),(0,u.default)(l,'Expected "data.barLines"'),this.expertJudgmentWindow=f,r=this._preTransform(r,t),this._timing=o,this._positioning=s,this._spacing=c,this._keysounds=i,this._duration=0,this._notes=this._generatePlayableNotesFromBMS(r),this._landmines=this._generatePlayableNotesFromBMS(h),this._autos=this._generateAutoKeysoundEventsFromBMS(r),this._barLines=this._generateBarLineEvents(l),this._samples=this._generateKeysoundFiles(i),this._infos=new Map(this._notes.map((function(e){return[e,n._getNoteInfo(e)]}))),this._songInfo=a,this._images=d}return Object.defineProperty(e.prototype,"notes",{get:function(){return this._notes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"landmines",{get:function(){return this._landmines},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autos",{get:function(){return this._autos},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"samples",{get:function(){return this._samples},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keysounds",{get:function(){return this._keysounds.all()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"barLines",{get:function(){return this._barLines},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return["SC","1","2","3","4","5","6","7"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"songInfo",{get:function(){return this._songInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eyecatchImage",{get:function(){return this._images&&this._images.eyecatch||"eyecatch_image.png"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundImage",{get:function(){return this._images&&this._images.background||"back_image.png"},enumerable:!1,configurable:!0}),e.prototype.info=function(e){return this._infos.get(e)},e.prototype.beatToSeconds=function(e){return this._timing.beatToSeconds(e)},e.prototype.beatToPosition=function(e){return this._positioning.position(e)},e.prototype.measureToBeat=function(e){return(this._barLines[e]||this._barLines[this._barLines.length-1]).beat},e.prototype.secondsToBeat=function(e){return this._timing.secondsToBeat(e)},e.prototype.secondsToPosition=function(e){return this.beatToPosition(this.secondsToBeat(e))},e.prototype.bpmAtBeat=function(e){return this._timing.bpmAtBeat(e)},e.prototype.scrollSpeedAtBeat=function(e){return this._positioning.speed(e)},e.prototype.spacingAtBeat=function(e){return this._spacing.factor(e)},e.prototype.getKeyMode=function(e){var t,n,r={};try{for(var o=i(this.notes),a=o.next();!a.done;a=o.next()){r[a.value.column]=!0}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return("off"!==e||r[1]||r[7])&&("left"!==e||r[6]||r[7])&&("right"!==e||r[1]||r[2])?"7K":"5K"},e.prototype._preTransform=function(e,t){var n=s.default.chain(e),r=function(e){var t,n;try{for(var r=i(e),o=r.next();!o.done;o=r.next()){var a=o.value;if("6"===a.column||"7"===a.column)return"7K"}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return"5K"}(e);if("off"===t.scratch&&(n=n.map((function(e){return e.column&&"SC"===e.column?Object.assign({},e,{column:null}):e}))),"5K"===r){var o=["1","2","3","4","5","6","7"],a=function(e){return function(t){if(t.column){var n=o.indexOf(t.column);if(n>-1){var r=n+e;(0,u.default)(r<o.length,"Weird. Columns must not shift beyond available column");var i=o[r];return Object.assign({},t,{column:i})}}return t}};"off"===t.scratch?n=n.map(a(1)):"right"===t.scratch&&(n=n.map(a(2)))}return n.value()},e.prototype._generatePlayableNotesFromBMS=function(e){var t=this,n=1;return e.filter((function(e){return e.column})).map((function(e){var r=t._generateEvent(e.beat);return r.id=n++,r.column=e.column,r.keysound=e.keysound,r.keysoundStart=e.keysoundStart,r.keysoundEnd=e.keysoundEnd,t._updateDuration(r),void 0!==e.endBeat?(r.end=t._generateEvent(e.endBeat),t._updateDuration(r.end)):r.end=void 0,r}))},e.prototype._generateLandminesFromBMS=function(e){var t=this,n=1;return e.filter((function(e){return e.column})).map((function(e){var r=t._generateEvent(e.beat);return r.id=n++,r.column=e.column,t._updateDuration(r),r}))},e.prototype._updateDuration=function(e){e.time>this._duration&&(this._duration=e.time)},e.prototype._generateAutoKeysoundEventsFromBMS=function(e){var t=this;return e.filter((function(e){return!e.column})).map((function(e){var n=t._generateEvent(e.beat);return n.keysound=e.keysound,n.keysoundStart=e.keysoundStart,n.keysoundEnd=e.keysoundEnd,n}))},e.prototype._generateKeysoundFiles=function(e){var t,n,r,o,a=new Set;try{for(var s=i([this.notes,this.autos]),u=s.next();!u.done;u=s.next()){var c=u.value;try{for(var l=(r=void 0,i(c)),d=l.next();!d.done;d=l.next()){var f=d.value,p=e.get(f.keysound);p&&a.add(p)}}catch(e){r={error:e}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return Array.from(a)},e.prototype._generateBarLineEvents=function(e){var t=this;return e.map((function(e){return t._generateEvent(e)}))},e.prototype._generateEvent=function(e){return{beat:e,time:this.beatToSeconds(e),position:this.beatToPosition(e)}},e.prototype._getNoteInfo=function(e){return{combos:e.end?2:1}},e}();t.Notechart=c,t.default=c},1803:function(e,t,n){var r=n(1804);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:undefined,insertInto:void 0};n(0)(r,o);r.locals&&(e.exports=r.locals)},1804:function(e,t,n){(e.exports=n(1)(!1)).push([e.i,'@charset "UTF-8";\n.BemusePreviewer {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  font-size: 18px;\n}\n.BemusePreviewerのheader {\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 50px;\n  left: 0;\n  background-color: #e34e7a;\n  color: #fff;\n  display: flex;\n  align-items: center;\n  padding: 0 1em;\n}\n.BemusePreviewerのheader > h1 {\n  margin: 0;\n  font-size: 20px;\n  font-weight: normal;\n}\n.BemusePreviewerのheader > h1 strong {\n  font-weight: 600;\n}\n.BemusePreviewerのheader > h1 a {\n  color: inherit;\n  text-decoration: none;\n}\n.BemusePreviewerのmain {\n  position: absolute;\n  top: 50px;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  align-items: flex-start;\n}\n.BemusePreviewerのloading {\n  position: absolute;\n  top: 50px;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.5333333333);\n  color: #fff;\n  text-align: left;\n  padding: 2em;\n}',""])},1805:function(e,t,n){var r=n(1806);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:undefined,insertInto:void 0};n(0)(r,o);r.locals&&(e.exports=r.locals)},1806:function(e,t,n){(e.exports=n(1)(!1)).push([e.i,'@charset "UTF-8";\n.PreviewInfo {\n  padding: 1em;\n}\n.PreviewInfo > h2 {\n  margin: 0 0 0em;\n}\n.PreviewInfoのkeyHints {\n  color: #8b8685;\n  font-size: 12px;\n  line-height: 2;\n}\n.PreviewInfoのkeyHints > kbd {\n  font-family: inherit;\n  padding: 0.1em 0.2em;\n  background: #222;\n  border: 1px solid #333;\n  border-radius: 4px;\n  box-shadow: 0 3px 0 #333;\n  display: inline-block;\n  line-height: 1;\n}\n.PreviewInfo td {\n  text-align: right;\n  font-family: Menlo, Consolas, monospace;\n}\n.PreviewInfo th {\n  text-align: left;\n}',""])},1823:function(e,t,n){"use strict";n.r(t),n.d(t,"main",(function(){return V}));var r=n(23),o=n.n(r),i=n(91),a=n(49),s=n.n(a),u=(n(1803),n(27)),c=n.n(u);const l={x:0,width:61},d={x:62,width:34,highlight:!0},f={x:97,width:26},p={x:159,width:26};class h{constructor(e){let t=0;const n=(e,n)=>{const r=t;return t+=e+1,{x:r,width:e,column:n}},r=(e,t)=>({...n(e.width,t),sprite:e});this.columns=e.split(" ").map((e=>"-"===e?n(72,null):e.endsWith("s")?r(l,e.slice(0,-1)):e.endsWith("b")?r(f,e.slice(0,-1)):e.endsWith("g")?r(p,e.slice(0,-1)):r(d,e))),this.totalWidth=t,this.columnMapping=c.a.fromPairs(this.columns.filter((e=>null!=e.column)).map((e=>[e.column,e])))}}const m=e=>{const t="SCs 1 2b 3 4g 5 6b 7 - 8 9b 10 11g 12 13b 14 SC2s",n=g("/skins/default/Note/DX/Note.png"),i=g("/skins/default/Note/DX/Landmine.png"),a=o.a.useRef(null),s=Object(r.useMemo)((()=>new h(t)),[t]),u=s.totalWidth+1,c=468,l=Object(r.useMemo)((()=>e.notechartPreview.getViewport(e.previewState.currentTime,e.previewState.hiSpeed)),[e.notechartPreview,e.previewState.currentTime,e.previewState.hiSpeed]),d=e.notechartPreview.getMaxCombo(),f=Object(r.useMemo)((()=>e.notechartPreview.getComboInfo(e.previewState.currentTime)),[e.notechartPreview,e.previewState.currentTime]);return Object(r.useEffect)((()=>{var t,r;const o=null===(t=a.current)||void 0===t?void 0:t.getContext("2d");if(o){o.fillStyle="#000",o.fillRect(0,0,u,c);for(const e of s.columns)o.fillStyle="#555",o.fillRect(e.x,0,1,c),(null===(r=e.sprite)||void 0===r?void 0:r.highlight)&&(o.fillStyle="#111",o.fillRect(e.x+1,0,e.width,c));o.fillStyle="#555",o.fillRect(s.totalWidth,0,1,c),o.textAlign="center",o.font="bold 18px sans-serif";for(const e of l.visibleBarLines){const t=Math.round(c-e.y*c);o.fillRect(0,t-1,s.totalWidth,1),o.fillText("#"+e.measureNumber,s.totalWidth/2,t-4)}if(n&&i)for(const e of l.visibleNotes){const t=s.columnMapping[e.gameEvent.column];if(null==t?void 0:t.sprite){const r=Math.round(c-e.y*c);if(e.long){const i=Math.round(c-e.long.endY*c),a=e.long.active?100:0;o.drawImage(n,t.sprite.x,104+a,t.width,8,t.x+1,r-8,t.width,8),o.drawImage(n,t.sprite.x,12+a,t.width,8,t.x+1,i-12,t.width,8);const s=r-i-4;s>0&&o.drawImage(n,t.sprite.x,22+a,t.width,64,t.x+1,i-4,t.width,s)}else{const a="landmine"===e.type?i:n;o.drawImage(a,t.sprite.x,0,t.width,12,t.x+1,r-12,t.width,12)}}}if(f){const t=e.previewState.currentTime-f.comboTime,n=Math.max(0,1-t);n>0&&(o.fillStyle="rgba(255, 255, 255, "+n+")",o.font="bold 36px sans-serif",o.textAlign="center",o.fillText(`${f.comboCount} / ${d}`,s.totalWidth/2,404-n**8*8))}}}),[u,c,s,l,n,d,f,e.previewState.currentTime]),o.a.createElement("canvas",{ref:a,width:u,height:c,style:{imageRendering:"pixelated"}})};function g(e){const[t,n]=o.a.useState(null);return Object(r.useEffect)((()=>{const t=new Image;return t.src=e,t.onload=()=>n(t),()=>{t.onload=null}}),[e]),t}n(1805);var v=n(1325);const b=e=>{const t=e.notechartPreview,n=Object(r.useMemo)((()=>e.notechartPreview.getMeasureInfo(e.previewState.currentTime)),[e.notechartPreview,e.previewState.currentTime]),i=Object(r.useMemo)((()=>e.notechartPreview.getCurrentBpm(e.previewState.currentTime)),[e.notechartPreview,e.previewState.currentTime]),a=Object(r.useMemo)((()=>e.notechartPreview.getCurrentScroll(e.previewState.currentTime)),[e.notechartPreview,e.previewState.currentTime]),s=Object(r.useMemo)((()=>e.notechartPreview.getCurrentSpeed(e.previewState.currentTime)),[e.notechartPreview,e.previewState.currentTime]),u=e.previewState.hiSpeed,c=e=>e.toFixed(2),l=e=>`${~~(e/60)}:${(~~e%60).toString().padStart(2,"0")}`,d=Object(r.useMemo)((()=>o.a.createElement("p",{className:"PreviewInfoのkeyHints"},o.a.createElement("kbd",null,"Space")," Play/Pause",o.a.createElement("br",null),o.a.createElement("kbd",null,"Up/Down/Left/Right/,/.")," Seek",o.a.createElement("br",null),o.a.createElement("kbd",null,"G")," Go To Measure",o.a.createElement("br",null),o.a.createElement("kbd",null,"1/2")," Hi-Speed",o.a.createElement("br",null),o.a.createElement("kbd",null,"R")," Reload Chart")),[]);return o.a.createElement("div",{className:"PreviewInfo"},o.a.createElement("h2",null,t.name),o.a.createElement("p",null,t.description),o.a.createElement("table",null,o.a.createElement("col",{width:80}),o.a.createElement("col",{width:120}),o.a.createElement("col",{width:80}),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",{scope:"row"},"Time"),o.a.createElement("td",{colSpan:2},l(e.previewState.currentTime)," /"," ",l(e.notechartPreview.duration))),o.a.createElement("tr",null,o.a.createElement("th",{scope:"row"},"Measure"),o.a.createElement("td",{colSpan:2},o.a.createElement(y,{measureInfo:n})," #",n.measureNumber)),o.a.createElement("tr",null,o.a.createElement("th",{scope:"row"},"#BPM"),o.a.createElement("td",null),o.a.createElement("td",null,c(i))),o.a.createElement("tr",null,o.a.createElement("th",{scope:"row"},"#SCROLL"),o.a.createElement("td",null,c(a),"x →"),o.a.createElement("td",null,c(i*a))),o.a.createElement("tr",null,o.a.createElement("th",{scope:"row"},"#SPEED"),o.a.createElement("td",null,c(s),"x →"),o.a.createElement("td",null,c(i*a*s))),o.a.createElement("tr",null,o.a.createElement("th",{scope:"row"},"HI-SPEED"),o.a.createElement("td",null,c(u),"x →"),o.a.createElement("td",null,c(i*a*s*u))))),d)},y=e=>{const{measureInfo:t}=e;if(!t.measureEndBeat)return null;const n=t.measureEndBeat-t.measureStartBeat;if(!n)return null;let r=n,i=1;for(;r>=8;)i*=2,r/=2;for(;r<=2;)i/=2,r*=2;const a=[];let s=Math.ceil((t.currentBeat-t.measureStartBeat)/i);for(;r>0;)a.push(o.a.createElement(v.a,{key:a.length,fraction:r>1?1:r,fill:s>0?"#e34e7a":"#333"})),r--,s--;return o.a.createElement(o.a.Fragment,null,a)};var _=n(549);const w=e=>(Object(r.useEffect)((()=>{const t=e=>{e.preventDefault()},n=async t=>{t.preventDefault();const n=t.dataTransfer.items;if(1!==n.length)return void alert("Please drop only one folder.");const r=n[0];if("file"!==r.kind)return void alert("Please drop only a folder here.");if(!("getAsFileSystemHandle"in r))return void alert("Unsupported browser (sorry).");const o=await r.getAsFileSystemHandle();if(!o||"directory"!==o.kind)return void alert("Please drop folder, not a file here.");const i=o;await i.requestPermission({mode:"read"});const a=[];for await(let[e]of i.entries())/\.(bms|bme|bml|bmson)$/i.test(e)&&a.push({filename:e,label:e});if(0===a.length)return void alert("No BMS/bmson files found in folder.");const s=await Object(_.c)(a,{title:"Select a chart file"});e.onDrop(i,s.filename)};return window.addEventListener("dragover",t),window.addEventListener("drop",n),()=>{window.removeEventListener("dragover",t),window.removeEventListener("drop",n)}}),[e.onDrop]),null);var E=n(555),x=n.n(E),S=n(508),O=n(593),I=n.n(O),M=n(170);function C(){return{duration:.99,name:"No BMS/bmson loaded",description:"Drop a folder with BMS/bmson files into this window to preview it."+("bemuse.ninja"!==location.hostname?" [NOTE: Do not bookmark this URL because it is a preview and this URL will stop working in the future.]":""),getViewport:()=>({visibleBarLines:[],visibleNotes:[]}),getMeasureInfo:()=>({currentBeat:0,measureNumber:0,measureStartBeat:0}),getCurrentBpm:()=>0,getCurrentScroll:()=>0,getCurrentSpeed:()=>0,play:e=>(setTimeout((()=>{e.onFinish()})),{stop:()=>{}}),measureToSeconds:()=>0,getMeasureJumpTarget:()=>0,getComboInfo:()=>null,getMaxCombo:()=>0}}class P{constructor(e,t,n,r,o){this._notechart=e,this._filename=t,this._samplingMaster=n,this._soundGroup=r,this._samples=o,this._sortedGameNotes=c.a.sortBy(this._notechart.notes,(e=>e.position)),this._sortedGameLandmines=c.a.sortBy(this._notechart.landmines,(e=>e.position)),this._sortedSoundEvents=c.a.sortBy([...this._notechart.notes,...this._notechart.autos],(e=>e.time)),this._comboPreviewer=new T(this._notechart.notes)}get duration(){return this._notechart.duration}get name(){return this._filename}get description(){return this._notechart.songInfo.title}getViewport(e,t){const n=this._secondsToBeat(e),r=this._notechart.beatToPosition(n),o=4/this._notechart.spacingAtBeat(n)/t,i=[],a=t=>t.end?!(e>t.end.time)&&(!(t.position>r+1.5*o)&&!(t.end.position<r-.5*o)):!(e>t.time)&&(!(t.position>r+1.5*o)&&!(t.position<r-.5*o));for(const t of this._sortedGameNotes){if(!a(t))continue;const n={gameEvent:t,y:(t.position-r)/o,type:"note"};if(t.end){const i=(t.end.position-r)/o,a=e>=t.time&&e<t.end.time;n.long={endY:i,active:a}}i.push(n)}for(const e of this._sortedGameLandmines){if(!a(e))continue;const t={gameEvent:e,y:(e.position-r)/o,type:"landmine"};i.push(t)}const s=[];for(const[e,t]of this._notechart.barLines.entries()){if(t.position>r+1.5*o)continue;if(t.position<r-.5*o)continue;const n=t.position-r;s.push({y:n/o,measureNumber:e})}return{visibleNotes:i,visibleBarLines:s}}getMeasureInfo(e){var t;const n=this._secondsToBeat(e);let r=0,o=0;for(const[e,t]of this._notechart.barLines.entries()){if(n<t.beat)break;r=e,o=t.beat}return{currentBeat:n,measureNumber:r,measureStartBeat:o,measureEndBeat:null===(t=this._notechart.barLines[r+1])||void 0===t?void 0:t.beat}}getCurrentBpm(e){return this._notechart.bpmAtBeat(this._secondsToBeat(e))}getCurrentScroll(e){return this._notechart.scrollSpeedAtBeat(this._secondsToBeat(e))}getCurrentSpeed(e){return this._notechart.spacingAtBeat(this._secondsToBeat(e))}measureToSeconds(e){const t=this._notechart.measureToBeat(e);return this._notechart.beatToSeconds(t)}getMeasureJumpTarget(e,t){const n=this._secondsToBeat(e),r=c.a.minBy(this._notechart.barLines,(e=>Math.abs(e.beat-n)));if(!r)return e;const o=this._notechart.barLines.indexOf(r),i=this._notechart.barLines[o+t];return i?i.time:e}getComboInfo(e){return this._comboPreviewer.getComboInfo(e)}getMaxCombo(){return this._comboPreviewer.getMaxCombo()}_secondsToBeat(e){return this._secondsToBeatCache&&this._secondsToBeatCache.seconds===e||(this._secondsToBeatCache={seconds:e,beat:this._notechart.secondsToBeat(e)}),this._secondsToBeatCache.beat}play(e){this._samplingMaster.unmute(),console.log(this._sortedSoundEvents),console.log(this._notechart.keysounds);const t=new j(this._samplingMaster,this._soundGroup,this._sortedSoundEvents,this._notechart.keysounds,this._samples,e);return t.play(),t}}class j{constructor(e,t,n,r,o,i){this._samplingMaster=e,this._soundGroup=t,this._sortedSoundEvents=n,this._keysounds=r,this._delegate=i,this._cursor=0,this._sampleMap=new Map,this._startAudioTime=0,this._startSongTime=0,this._stopped=!1,this._playingSamples=new Map;for(const{filename:e,sample:t}of o)t&&this._sampleMap.set(e,t)}play(){this._startAudioTime=this._samplingMaster.currentTime,this._startSongTime=this._delegate.startTime;const e=()=>{this._stopped||(this._advance(),requestAnimationFrame(e))};requestAnimationFrame(e)}_advance(){const e=this._samplingMaster.currentTime-this._startAudioTime+this._startSongTime;for(;this._cursor<this._sortedSoundEvents.length;this._cursor++){const t=this._sortedSoundEvents[this._cursor];if(t.time>e+.1)break;if(t.keysoundStart)continue;const n=t.keysound,r=this._keysounds[n.toLowerCase()];if(!r)continue;const o=this._sampleMap.get(r);if(!o)continue;let i=0,a=0;if(t.time>e?i=t.time-e:t.time<e&&(a=e-t.time),a>=o.duration)continue;this._choke(n,i);const s=o.play(i,{start:a,group:this._soundGroup});this._playingSamples.set(n,s)}this._delegate.onTimeUpdate(e)}_choke(e,t){const n=this._playingSamples.get(e);n&&setTimeout((()=>{n.stop()}),1e3*t)}stop(){this._stopped=!0;for(const e of this._playingSamples.values())e.destroy();this._playingSamples.clear()}}class T{constructor(e){this._events=c.a.sortBy(c.a.flatMap(e,(e=>e.end?[e.time,e.end.time]:[e.time])),c.a.identity)}getComboInfo(e){const t=c.a.sortedLastIndex(this._events,e);if(0===t)return null;return{comboCount:t,comboTime:this._events[t-1]}}getMaxCombo(){return this._events.length}}const B="previewer-fs-handle";let k=c.a.once((()=>{const e=new M.b,t=Math.pow(10,-.41),n=e.group({volume:t});return{samplingMaster:e,group:n}}));const N=new Map;let D="";async function A(e){const t=e.log||(e=>console.log(`[PreviewLoader] ${e}`));t("Loading directory handle from IndexedDB");const n=await Object(S.b)(B),r=n.directory,o=n.handleId;t("Obtaining permission to read directory"),await async function(e){let t=await e.queryPermission({mode:"read"});try{"prompt"===t&&(t=await e.requestPermission({mode:"read"}))}catch(n){await Object(_.b)("File system access required","Please allow access to the filesystem."),t=await e.requestPermission({mode:"read"})}if("granted"!==t)throw new Error("Permission denied.")}(r),t("Scanning charts");const i=[];for await(let[e,t]of r)"file"===t.kind&&/\.(bms|bme|bml|bmson)$/i.test(e)&&i.push({name:e,handle:t});console.log(r);const a=i.find((e=>e.name===n.chartFilename))||i[0];if(!a)throw new Error("No chart found.");t("Loading chart "+a.name);const s=new I.a,u=await(await a.handle.getFile()).arrayBuffer(),c=await s.load(u,{name:a.name},{scratch:"left",double:!0});t("Loading samples");const{samplingMaster:l,group:d}=k();let f=0;D!==o&&(N.clear(),D=o);const p=await Promise.map(c.samples,(async e=>{if(N.has(e)){const t=N.get(e)||null;return{filename:e,sample:t}}const n=async e=>{const t=await r.getFileHandle(e);return(await t.getFile()).arrayBuffer()};try{const r=await Promise.try((()=>n(e.replace(/\.\w+$/,".ogg")))).catch((()=>n(e))),o=await l.sample(r),i=`${++f}/${c.samples.length}`;return t(`Loaded ${e} [${i}]: ${o.duration}s`),N.set(e,o),{filename:e,sample:o}}catch(n){return console.error(n),t(`Failed to load ${e}: ${n}`),{filename:e,sample:null}}}),{concurrency:64});console.log(p),t("Loading preview");const h=function(e,t,n,r,o){return new P(e,t,n,r,o)}(c,a.name,l,d,p);return console.log(h),h}function L(e,t){let n=e;return t.loaded&&(n={...e,playing:!1}),t.speedUp&&(n={...e,hiSpeed:+Math.min(e.hiSpeed+.25,99).toFixed(2)}),t.speedDown&&(n={...e,hiSpeed:+Math.max(e.hiSpeed-.25,.25).toFixed(2)}),t.play&&(n={...e,playing:!0}),t.pause&&(n={...e,playing:!1}),t.playPause&&(n={...e,playing:!e.playing}),t.playFinish&&(n={...e,playing:!1}),t.home&&(n={...e,playing:!1,currentTime:0}),t.updateTime&&(n={...e,currentTime:t.updateTime.time}),t.jumpToTime&&(n={...e,currentTime:t.jumpToTime.time,playing:!1}),t.jumpByMeasure&&(n={...e,currentTime:t.jumpByMeasure.preview.getMeasureJumpTarget(e.currentTime,t.jumpByMeasure.direction),playing:!1}),t.jumpBySeconds&&(n={...e,currentTime:Math.max(0,e.currentTime+t.jumpBySeconds.direction),playing:!1}),n}let F=null;const R=e=>{const t=function(e){const t=Object(r.useRef)(e);return Object(r.useEffect)((()=>{t.current=e}),[e]),Object(r.useCallback)((()=>t.current),[])}(e.notechartPreview);return Object(r.useEffect)((()=>{const n=n=>{if(!Object(_.a)()){if(console.log(n.key),"2"===n.key&&(e.dispatch({speedUp:!0}),n.preventDefault()),"1"===n.key&&(e.dispatch({speedDown:!0}),n.preventDefault())," "===n.key&&(e.dispatch({playPause:!0}),n.preventDefault()),"Home"===n.key&&(e.dispatch({home:!0}),n.preventDefault()),"g"===n.key){e.dispatch({pause:!0});const r=+(prompt("Measure number",F?`${F}`:"")||"");isNaN(r)||(F=r,e.dispatch({jumpToTime:{time:t().measureToSeconds(r)}})),n.preventDefault()}"r"!==n.key||n.ctrlKey||n.metaKey||(e.onReload(),n.preventDefault()),"ArrowDown"===n.key&&(e.dispatch({jumpByMeasure:{direction:-1,preview:t()}}),n.preventDefault()),"ArrowUp"===n.key&&(e.dispatch({jumpByMeasure:{direction:1,preview:t()}}),n.preventDefault()),"ArrowLeft"===n.key&&(e.dispatch({jumpBySeconds:{direction:-5}}),n.preventDefault()),"ArrowRight"===n.key&&(e.dispatch({jumpBySeconds:{direction:5}}),n.preventDefault()),","===n.key&&(e.dispatch({jumpBySeconds:{direction:-.1}}),n.preventDefault()),"."===n.key&&(e.dispatch({jumpBySeconds:{direction:.1}}),n.preventDefault())}};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}),[e.dispatch]),null},$=()=>{const e=Object(r.useRef)(null),[t,n]=Object(r.useReducer)(L,{currentTime:0,hiSpeed:1,playing:!1}),[i,a]=Object(r.useState)(C),[s,u]=Object(r.useState)(null),l=()=>{u("Loading...");const t=c.a.throttle(u,100);A({log:e=>{t((t=>null!=t?e:t))}}).then((t=>{a(t),n({loaded:!0}),e.current&&e.current.focus()})).catch((e=>{console.error(e),Object(_.b)("Error loading preview",String(e))})).finally((()=>t(null)))};!function(e,t,n){const o=Object(r.useRef)(null);Object(r.useEffect)((()=>{e.playing&&null===o.current?o.current=n.play({startTime:e.currentTime,onFinish:()=>{t({playFinish:!0})},onTimeUpdate:e=>{t({updateTime:{time:e}})}}):e.playing||null===o.current||(o.current.stop(),o.current=null)}),[e])}(t,n,i),Object(r.useEffect)((()=>{(async()=>{const e=await async function(){const e=await Object(S.b)(B),t=null==e?void 0:e.chartFilename;return t?{chartFilename:t}:null}();if(e){const t=[{label:`Load ${e.chartFilename}`,action:()=>{l()}},{label:"Do not load",action:()=>{}}];(await Object(_.c)(t,{title:"Load a recent song?"})).action()}})()}),[]);return o.a.createElement("div",{className:"BemusePreviewer",tabIndex:0,ref:e},o.a.createElement("div",{className:"BemusePreviewerのheader"},o.a.createElement("h1",null,o.a.createElement("a",{href:"https://bemuse.ninja/project/docs/previewer.html",target:"_blank"},o.a.createElement("strong",null,"Bemuse"),"’s BMS/bmson previewer"))),o.a.createElement("div",{className:"BemusePreviewerのmain"},o.a.createElement(m,{notechartPreview:i,previewState:t}),o.a.createElement(b,{notechartPreview:i,previewState:t}),o.a.createElement(w,{onDrop:async(e,t)=>{await async function(e,t){await Object(S.c)(B,{directory:e,chartFilename:t,handleId:x.a.generate()})}(e,t),l()}}),o.a.createElement(R,{notechartPreview:i,dispatch:n,onReload:()=>{l()}})),null!=s?o.a.createElement("div",{className:"BemusePreviewerのloading"},s):null)};function V(){s.a.render(o.a.createElement($,null),i.a)}},233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReaderOptionsFromFilename=t.readAsync=t.read=void 0;var r=n(532);t.read=function(e){throw new Error("Synchronous read unsupported in browser!")},t.readAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],o=e[1],i=e[2];i?(o=e[1],i=e[2]):(o=null,i=e[1]);var a=o&&o.forceEncoding||r.detect(n),s=new FileReader;s.onload=function(){i(null,s.result)},s.onerror=function(){i(new Error("cannot read it"))},s.readAsText(new Blob([n]),a)};var o=n(234);Object.defineProperty(t,"getReaderOptionsFromFilename",{enumerable:!0,get:function(){return o.getReaderOptionsFromFilename}})},234:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReaderOptionsFromFilename=void 0,t.getReaderOptionsFromFilename=function(e){var t;return e.match(/\.sjis\.\w+$/i)&&(t="Shift-JIS"),e.match(/\.euc_kr\.\w+$/i)&&(t="EUC-KR"),e.match(/\.utf8\.\w+$/i)&&(t="UTF-8"),{forceEncoding:t}}},235:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compile=void 0;var r=n(107),o=n(39),i={bms:{random:/^#RANDOM\s+(\d+)$/i,if:/^#IF\s+(\d+)$/i,endif:/^#ENDIF$/i,timeSignature:/^#(\d\d\d)02:(\S*)$/,channel:/^#(?:EXT\s+#)?(\d\d\d)(\S\S):(\S*)$/,header:/^#(\w+)(?:\s+(\S.*))?$/},dtx:{random:/^#RANDOM\s+(\d+)$/i,if:/^#IF\s+(\d+)$/i,endif:/^#ENDIF$/i,timeSignature:/^#(\d\d\d)02:\s*(\S*)$/,channel:/^#(?:EXT\s+#)?(\d\d\d)(\S\S):\s*(\S*)$/,header:/^#(\w+):(?:\s+(\S.*))?$/}};t.compile=function(e,t){t=t||{};var n=new o.BMSChart,a=t.rng||function(e){return 1+Math.floor(Math.random()*e)},s=t.format&&i[t.format]||i.bms,u=[],c=[!1],l={headerSentences:0,channelSentences:0,controlSentences:0,skippedSentences:0,malformedSentences:0,chart:n,warnings:[]};return function(e,t){e.split(/\r\n|\r|\n/).map((function(e){return e.trim()})).forEach((function(e,n){t(e,n+1)}))}(e,(function(e,t){var o=!0;if("#"===e.charAt(0)&&((0,r.match)(e).when(s.random,(function(e){l.controlSentences+=1,u.push(a(+e[1]))})).when(s.if,(function(e){l.controlSentences+=1,c.push(u[u.length-1]!==+e[1])})).when(s.endif,(function(e){l.controlSentences+=1,c.pop()})).else((function(){o=!1})),!o)){var i=c[c.length-1];(0,r.match)(e).when(s.timeSignature,(function(e){l.channelSentences+=1,i||n.timeSignatures.set(+e[1],+e[2])})).when(s.channel,(function(e){l.channelSentences+=1,i||function(e,t,r,o){var i=Math.floor(r.length/2);if(0===i)return;for(var a=0;a<i;a++){var s=r.substr(2*a,2),u=a/i;"00"!==s&&n.objects.add({measure:e,fraction:u,value:s,channel:t,lineNumber:o})}}(+e[1],e[2],e[3],t)})).when(s.header,(function(e){l.headerSentences+=1,i||n.headers.set(e[1],e[2])})).else((function(){!function(e,t){l.warnings.push({lineNumber:e,message:t})}(t,"Invalid command")}))}})),l}},236:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},237:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Segment=void 0;var o=r(n(176));t.Segment=(0,o.default)({t:"number",x:"number",dx:"number"})},238:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Notes=void 0;var s=n(239),u=a(n(55)),c=i(n(240)),l=n(39),d=function(){function e(e){e.forEach(s.Note),this._notes=e}return e.prototype.count=function(){return this._notes.length},e.prototype.all=function(){return this._notes.slice()},e.fromBMSChart=function(t,n){l.BMSChart;var r=(n=n||{}).mapping||e.CHANNEL_MAPPING.IIDX_P1;return new f(t,{mapping:r}).build()},e.CHANNEL_MAPPING=c,e}();t.Notes=d;var f=function(){function e(e,t){this._chart=e,(0,u.default)(t.mapping,"Expected options.mapping"),(0,u.default)("object"==typeof t.mapping,"options.mapping must be object"),this._mapping=t.mapping,this._notes=[],this._activeLN={},this._lastNote={},this._lnObj=(this._chart.headers.get("lnobj")||"").toLowerCase(),this._channelMapping=this._mapping,this._objects=this._chart.objects.allSorted()}return e.prototype.build=function(){var e=this;return this._objects.forEach((function(t){e._handle(t)})),new d(this._notes)},e.prototype._handle=function(e){if("01"===e.channel)this._handleNormalNote(e);else switch(e.channel.charAt(0).toUpperCase()){case"1":case"2":case"D":case"E":this._handleNormalNote(e);break;case"5":case"6":this._handleLongNote(e)}},e.prototype._handleNormalNote=function(e){var t=this._normalizeChannel(e.channel),n=this._getBeat(e);if(e.value.toLowerCase()===this._lnObj)this._lastNote[t]&&(this._lastNote[t].endBeat=n);else{var r={beat:n,endBeat:void 0,keysound:e.value,column:this._getColumn(t)};this._lastNote[t]=r,this._notes.push(r)}},e.prototype._handleLongNote=function(e){var t=this._normalizeChannel(e.channel),n=this._getBeat(e);if(this._activeLN[t]){var r=this._activeLN[t];r.endBeat=n,this._notes.push(r),delete this._activeLN[t]}else this._activeLN[t]={beat:n,keysound:e.value,column:this._getColumn(t)}},e.prototype._getBeat=function(e){return this._chart.measureToBeat(e.measure,e.fraction)},e.prototype._getColumn=function(e){return this._channelMapping[e]},e.prototype._normalizeChannel=function(e){return e.replace(/^5/,"1").replace(/^6/,"2")},e}()},239:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Note=void 0;var o=r(n(176));t.Note=(0,o.default)({beat:"number",endBeat:o.default.maybe("number"),column:o.default.maybe("string"),keysound:"string"})},240:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IIDX_DP_LANDMINE=t.IIDX_P1_LANDMINE=t.IIDX_DP=t.IIDX_P1=void 0,t.IIDX_P1={11:"1",12:"2",13:"3",14:"4",15:"5",18:"6",19:"7",16:"SC"},t.IIDX_DP={11:"1",12:"2",13:"3",14:"4",15:"5",18:"6",19:"7",16:"SC",21:"8",22:"9",23:"10",24:"11",25:"12",28:"13",29:"14",26:"SC2"},t.IIDX_P1_LANDMINE={D1:"1",D2:"2",D3:"3",D4:"4",D5:"5",D8:"6",D9:"7",D6:"SC"},t.IIDX_DP_LANDMINE={D1:"1",D2:"2",D3:"3",D4:"4",D5:"5",D8:"6",D9:"7",D6:"SC",E1:"8",E2:"9",E3:"10",E4:"11",E5:"12",E8:"13",E9:"14",E6:"SC2"}},241:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timing=void 0;var r=n(60),o=n(80),i=n(39),a={bpm:1,stop:2},s=function(){function e(e,t){var n={bpm:e,beat:0,seconds:0},i=[];i.push({t:0,x:0,dx:n.bpm/60,bpm:n.bpm,inclusive:!0}),(t=t.slice()).sort((function(e,t){return e.beat-t.beat||a[e.type]-a[t.type]})),t.forEach((function(e){var t=e.beat,r=n.seconds+60*(t-n.beat)/n.bpm;switch(e.type){case"bpm":n.bpm=e.bpm,i.push({t:r,x:t,dx:n.bpm/60,bpm:n.bpm,inclusive:!0});break;case"stop":i.push({t:r,x:t,dx:0,bpm:n.bpm,inclusive:!0}),r+=60*(e.stopBeats||0)/n.bpm,i.push({t:r,x:t,dx:n.bpm/60,bpm:n.bpm,inclusive:!1});break;default:throw new Error("Unrecognized segment object!")}n.beat=t,n.seconds=r})),this._speedcore=new r.Speedcore(i),this._eventBeats=(0,o.uniq)((0,o.map)(t,(function(e){return e.beat})))}return e.prototype.beatToSeconds=function(e){return this._speedcore.t(e)},e.prototype.secondsToBeat=function(e){return this._speedcore.x(e)},e.prototype.bpmAtBeat=function(e){return this._speedcore.segmentAtX(e).bpm},e.prototype.getEventBeats=function(){return this._eventBeats},e.fromBMSChart=function(t){i.BMSChart;var n=[];return t.objects.all().forEach((function(e){var r,o=t.measureToBeat(e.measure,e.fraction);if("03"===e.channel)r=parseInt(e.value,16),n.push({type:"bpm",beat:o,bpm:r});else if("08"===e.channel)r=+t.headers.get("bpm"+e.value),isNaN(r)||n.push({type:"bpm",beat:o,bpm:r});else if("09"===e.channel){var i=+t.headers.get("stop"+e.value)/48;n.push({type:"stop",beat:o,stopBeats:i})}})),new e(+t.headers.get("bpm")||60,n)},e}();t.Timing=s},242:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SongInfo=void 0;var r=n(107),o=n(80),i=n(39),a=function(){function e(e){this.title="NO TITLE",this.artist="NO ARTIST",this.genre="NO GENRE",this.subtitles=[],this.subartists=[],this.difficulty=0,this.level=0,e&&(0,o.assign)(this,e)}return e.fromBMSChart=function(t){i.BMSChart;var n={},o=t.headers.get("title"),a=t.headers.get("artist"),s=t.headers.get("genre"),u=+t.headers.get("difficulty")||0,c=+t.headers.get("playlevel")||0,l=t.headers.getAll("subtitle"),d=t.headers.getAll("subartist");if("string"==typeof o&&!l){var f=function(e){o=e[1],l=[e[2]]};(0,r.match)(o).when(/^(.*\S)\s*-(.+?)-$/,f).when(/^(.*\S)\s*～(.+?)～$/,f).when(/^(.*\S)\s*\((.+?)\)$/,f).when(/^(.*\S)\s*\[(.+?)\]$/,f).when(/^(.*\S)\s*<(.+?)>$/,f)}return o&&(n.title=o),a&&(n.artist=a),s&&(n.genre=s),l&&(n.subtitles=l),d&&(n.subartists=d),u&&(n.difficulty=u),c&&(n.level=c),new e(n)},e}();t.SongInfo=a},243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Keysounds=void 0;var r=n(80),o=n(39),i=function(){function e(e){this._map=e}return e.prototype.get=function(e){return this._map[e.toLowerCase()]},e.prototype.files=function(){return(0,r.uniq)((0,r.values)(this._map))},e.prototype.all=function(){return this._map},e.fromBMSChart=function(t){o.BMSChart;var n={};return t.headers.each((function(e,t){var r=e.match(/^wav(\S\S)$/i);r&&(n[r[1].toLowerCase()]=t)})),new e(n)},e}();t.Keysounds=i},244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Positioning=void 0;var r=n(60),o=n(39),i=function(){function e(e){this._speedcore=new r.Speedcore(e)}return e.prototype.speed=function(e){return this._speedcore.dx(e)},e.prototype.position=function(e){return this._speedcore.x(e)},e.fromBMSChart=function(t){o.BMSChart;var n=[],r=0;return n.push({t:0,x:r,dx:1,inclusive:!0}),t.objects.allSorted().forEach((function(e){if("SC"===e.channel){var o=t.measureToBeat(e.measure,e.fraction),i=+t.headers.get("scroll"+e.value);if(isNaN(i))return;var a=n[n.length-1];r+=(o-a.t)*a.dx,0===o&&1===n.length?n[0].dx=i:n.push({t:o,x:r,dx:i,inclusive:!0})}})),new e(n)},e}();t.Positioning=i},245:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spacing=void 0;var r=n(60),o=n(39),i=function(){function e(e){e.length>0&&(this._speedcore=new r.Speedcore(e))}return e.prototype.factor=function(e){return this._speedcore?this._speedcore.x(e):1},e.fromBMSChart=function(t){o.BMSChart;var n=[];return t.objects.allSorted().forEach((function(e){if("SP"===e.channel){var r=t.measureToBeat(e.measure,e.fraction),o=+t.headers.get("speed"+e.value);if(isNaN(o))return;if(n.length>0){var i=n[n.length-1];i.dx=(o-i.x)/(r-i.t)}n.push({t:r,x:o,dx:0,inclusive:!0})}})),n.length>0&&n.unshift({t:0,x:n[0].x,dx:0,inclusive:!0}),new e(n)},e}();t.Spacing=i},289:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fromBMSChart=void 0;var s=i(n(85)),u=a(n(27)),c=a(n(177));function l(e){var t=+e.headers.get("rank")||2;return 0===t?[8,24]:1===t?[15,30]:3===t?[21,60]:[18,40]}function d(e,t){var n=u.default.max(e.map((function(e){return e.endBeat||e.beat})))||0,r=[0],o=0,i=0;do{o+=t.timeSignatures.getBeats(i),i+=1,r.push(o)}while(o<=n);return r}t.fromBMSChart=function(e,t){var n=s.Notes.fromBMSChart(e,{mapping:t.double?s.Notes.CHANNEL_MAPPING.IIDX_DP:s.Notes.CHANNEL_MAPPING.IIDX_P1}).all(),r={notes:n,landmineNotes:s.Notes.fromBMSChart(e,{mapping:t.double?s.Notes.CHANNEL_MAPPING.IIDX_DP_LANDMINE:s.Notes.CHANNEL_MAPPING.IIDX_P1_LANDMINE}).all(),timing:s.Timing.fromBMSChart(e),keysounds:s.Keysounds.fromBMSChart(e),songInfo:s.SongInfo.fromBMSChart(e),positioning:s.Positioning.fromBMSChart(e),spacing:s.Spacing.fromBMSChart(e),barLines:d(n,e),expertJudgmentWindow:l(e)};return new c.default(r,t)}},290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},319:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._slicesForNotesAndTiming=t.beatForLoc=t.timingInfoForBmson=t.barLinesForBmson=void 0;var c=u(n(27)),l=i(n(320));function d(e){return e/240}t.barLinesForBmson=function(e){var t=e.lines;return(0,c.default)(t).map((function(e){return d(e.y)})).sortBy().value()},t.timingInfoForBmson=function(e){return{initialBPM:e.info.initBPM,actions:s(s([],a((e.bpmNotes||[]).map((function(e){var t=e.y,n=e.v;return{type:"bpm",beat:d(t),bpm:n}}))),!1),a((e.stopNotes||[]).map((function(e){var t=e.y,n=e.v;return{type:"stop",beat:d(t),stopBeats:d(Math.floor(n))}}))),!1)}},t.beatForLoc=d,t._slicesForNotesAndTiming=function(e,t){return l.slicesForNotesAndTiming(e,t,{beatForPulse:d})}},320:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.slicesForNotesAndTiming=void 0;var s=a(n(27));t.slicesForNotesAndTiming=function(e,t,n){var a,u,c,l,d=n.beatForPulse,f=new Set,p=new Set,h=new Set;try{for(var m=r(e),g=m.next();!g.done;g=m.next()){var v=g.value,b=v.x,y=v.y,_=v.c;f.add(y),b&&p.add(y),_||h.add(y)}}catch(e){a={error:e}}finally{try{g&&!g.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}var w,E,x=new Map,S=null,O=!0;try{for(var I=r(s.default.sortBy(i([],o(f),!1))),M=I.next();!M.done;M=I.next()){y=M.value;var C=t.beatToSeconds(d(y));if(null===S||h.has(y)?S=0:S+=C-w,O||p.has(y)||h.has(y)){E&&!h.has(y)&&(E.keysoundEnd=S);var P={keysoundStart:S,keysoundEnd:void 0};x.set(y,P),E=P}O=p.has(y),w=C}}catch(e){c={error:e}}finally{try{M&&!M.done&&(l=I.return)&&l.call(I)}finally{if(c)throw c.error}}return x}},39:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BMSChart=void 0;var r=n(108),o=n(109),i=n(110),a=function(){function e(){this.headers=new r.BMSHeaders,this.objects=new o.BMSObjects,this.timeSignatures=new i.TimeSignatures}return e.prototype.measureToBeat=function(e,t){return this.timeSignatures.measureToBeat(e,t)},e}();t.BMSChart=a},50:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var a=o.apply(null,r);a&&e.push(a)}}else if("object"===i){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},508:function(e,t,n){"use strict";function r(e){return new Promise((function(t,n){e.oncomplete=e.onsuccess=function(){return t(e.result)},e.onabort=e.onerror=function(){return n(e.error)}}))}var o;function i(){return o||(o=function(e,t){var n=indexedDB.open(e);n.onupgradeneeded=function(){return n.result.createObjectStore(t)};var o=r(n);return function(e,n){return o.then((function(r){return n(r.transaction(t,e).objectStore(t))}))}}("keyval-store","keyval")),o}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i();return t("readonly",(function(t){return r(t.get(e))}))}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i();return n("readwrite",(function(n){return n.put(t,e),r(n.transaction)}))}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i();return t("readwrite",(function(t){return t.delete(e),r(t.transaction)}))}n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s}))},529:function(e,t,n){"use strict";t.a=document.querySelector("#warp-root")},549:function(e,t,n){"use strict";n.d(t,"b",(function(){return wn})),n.d(t,"c",(function(){return En})),n.d(t,"a",(function(){return On}));n(1328);var r=n(23),o=n.n(r),i=n(49),a=n.n(i),s=n(529),u=n(106);n(1330);var c=Object(r.forwardRef)((({children:e,onClick:t},n)=>o.a.createElement("button",{className:"Button",onClick:t,ref:n},e)));var l=({children:e,padding:t,gap:n})=>o.a.createElement("div",{style:{display:"flex",flexDirection:"column",padding:t,gap:n}},e);function d(...e){return t=>e.forEach((e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t)))}function f(...e){return r.useCallback(d(...e),e)}var p=n(62);const h=r.forwardRef(((e,t)=>{const{children:n,...o}=e;return r.Children.toArray(n).some(v)?r.createElement(r.Fragment,null,r.Children.map(n,(e=>v(e)?r.createElement(m,Object(p.a)({},o,{ref:t}),e.props.children):e))):r.createElement(m,Object(p.a)({},o,{ref:t}),n)}));h.displayName="Slot";const m=r.forwardRef(((e,t)=>{const{children:n,...o}=e;return r.isValidElement(n)?r.cloneElement(n,{...b(o,n.props),ref:d(t,n.ref)}):r.Children.count(n)>1?r.Children.only(null):null}));m.displayName="SlotClone";const g=({children:e})=>r.createElement(r.Fragment,null,e);function v(e){return r.isValidElement(e)&&e.type===g}function b(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?n[r]=(...e)=>{null==i||i(...e),null==o||o(...e)}:"style"===r?n[r]={...o,...i}:"className"===r&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function y(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}var _=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},w=new WeakMap,E=new WeakMap,x={},S=0,O=function(e,t,n,r){var o=Array.isArray(e)?e:[e];x[n]||(x[n]=new WeakMap);var i=x[n],a=[],s=new Set,u=new Set(o),c=function(e){e&&!s.has(e)&&(s.add(e),c(e.parentNode))};o.forEach(c);var l=function(e){e&&!u.has(e)&&Array.prototype.forEach.call(e.children,(function(e){if(s.has(e))l(e);else{var t=e.getAttribute(r),o=null!==t&&"false"!==t,u=(w.get(e)||0)+1,c=(i.get(e)||0)+1;w.set(e,u),i.set(e,c),a.push(e),1===u&&o&&E.set(e,!0),1===c&&e.setAttribute(n,"true"),o||e.setAttribute(r,"true")}}))};return l(t),s.clear(),S++,function(){a.forEach((function(e){var t=w.get(e)-1,o=i.get(e)-1;w.set(e,t),i.set(e,o),t||(E.has(e)||e.removeAttribute(r),E.delete(e)),o||e.removeAttribute(n)})),--S||(w=new WeakMap,w=new WeakMap,E=new WeakMap,x={})}},I=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=t||_(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),O(r,o,n,"aria-hidden")):function(){return null}};var M=function(){return M=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},M.apply(this,arguments)};function C(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}Object.create;Object.create;var P="right-scroll-bar-position",j="width-before-scroll-bar";function T(e,t){return n=t||null,o=function(t){return e.forEach((function(e){return function(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}(e,t)}))},(i=Object(r.useState)((function(){return{value:n,callback:o,facade:{get current(){return i.value},set current(e){var t=i.value;t!==e&&(i.value=e,i.callback(e,t))}}}}))[0]).callback=o,i.facade;var n,o,i}function B(e){return e}function k(e,t){void 0===t&&(t=B);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var o=t(e,r);return n.push(o),function(){n=n.filter((function(e){return e!==o}))}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var o=n;n=[],o.forEach(e),t=n}var i=function(){var n=t;t=[],n.forEach(e)},a=function(){return Promise.resolve().then(i)};a(),n={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),n}}}}}var N=function(e){void 0===e&&(e={});var t=k(null);return t.options=M({async:!0,ssr:!1},e),t}(),D=function(){},A=r.forwardRef((function(e,t){var n=r.useRef(null),o=r.useState({onScrollCapture:D,onWheelCapture:D,onTouchMoveCapture:D}),i=o[0],a=o[1],s=e.forwardProps,u=e.children,c=e.className,l=e.removeScrollBar,d=e.enabled,f=e.shards,p=e.sideCar,h=e.noIsolation,m=e.inert,g=e.allowPinchZoom,v=e.as,b=void 0===v?"div":v,y=C(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),_=p,w=T([n,t]),E=M(M({},y),i);return r.createElement(r.Fragment,null,d&&r.createElement(_,{sideCar:N,removeScrollBar:l,shards:f,noIsolation:h,inert:m,setCallbacks:a,allowPinchZoom:!!g,lockRef:n}),s?r.cloneElement(r.Children.only(u),M(M({},E),{ref:w})):r.createElement(b,M({},E,{className:c,ref:w}),u))}));A.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},A.classNames={fullWidth:j,zeroRight:P};var L,F=function(e){var t=e.sideCar,n=C(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=t.read();if(!o)throw new Error("Sidecar medium not found");return r.createElement(o,M({},n))};F.isSideCarExport=!0;function R(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=L||n.nc;return t&&e.setAttribute("nonce",t),e}var $=function(){var e=0,t=null;return{add:function(n){var r,o;0==e&&(t=R())&&(o=n,(r=t).styleSheet?r.styleSheet.cssText=o:r.appendChild(document.createTextNode(o)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){!--e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},V=function(){var e,t=(e=$(),function(t,n){r.useEffect((function(){return e.add(t),function(){e.remove()}}),[t&&n])});return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},K={left:0,top:0,right:0,gap:0},W=function(e){return parseInt(e||"",10)||0},H=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return K;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],o=t["padding"===e?"paddingRight":"marginRight"];return[W(n),W(r),W(o)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},U=V(),X=function(e,t,n,r){var o=e.left,i=e.top,a=e.right,s=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(s,"px ").concat(r,";\n  }\n  body {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(o,"px;\n    padding-top: ").concat(i,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(P," {\n    right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(j," {\n    margin-right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(P," .").concat(P," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(j," .").concat(j," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(s,"px;\n  }\n")},G=function(e){var t=e.noRelative,n=e.noImportant,o=e.gapMode,i=void 0===o?"margin":o,a=r.useMemo((function(){return H(i)}),[i]);return r.createElement(U,{styles:X(a,!t,i,n?"":"!important")})},q=!1;if("undefined"!=typeof window)try{var z=Object.defineProperty({},"passive",{get:function(){return q=!0,!0}});window.addEventListener("test",z,z),window.removeEventListener("test",z,z)}catch(e){q=!1}var J=!!q&&{passive:!1},Y=function(e,t){var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Z=function(e,t){var n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),Q(e,n)){var r=ee(e,n);if(r[1]>r[2])return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Q=function(e,t){return"v"===e?function(e){return Y(e,"overflowY")}(t):function(e){return Y(e,"overflowX")}(t)},ee=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},te=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ne=function(e){return[e.deltaX,e.deltaY]},re=function(e){return e&&"current"in e?e.current:e},oe=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},ie=0,ae=[];var se,ue=(se=function(e){var t=r.useRef([]),n=r.useRef([0,0]),o=r.useRef(),i=r.useState(ie++)[0],a=r.useState((function(){return V()}))[0],s=r.useRef(e);r.useEffect((function(){s.current=e}),[e]),r.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(re),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(i))})),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(i))}))}}}),[e.inert,e.lockRef.current,e.shards]);var u=r.useCallback((function(e,t){if("touches"in e&&2===e.touches.length)return!s.current.allowPinchZoom;var r,i=te(e),a=n.current,u="deltaX"in e?e.deltaX:a[0]-i[0],c="deltaY"in e?e.deltaY:a[1]-i[1],l=e.target,d=Math.abs(u)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===l.type)return!1;var f=Z(d,l);if(!f)return!0;if(f?r=d:(r="v"===d?"h":"v",f=Z(d,l)),!f)return!1;if(!o.current&&"changedTouches"in e&&(u||c)&&(o.current=r),!r)return!0;var p=o.current||r;return function(e,t,n,r,o){var i=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),a=i*r,s=n.target,u=t.contains(s),c=!1,l=a>0,d=0,f=0;do{var p=ee(e,s),h=p[0],m=p[1]-p[2]-i*h;(h||m)&&Q(e,s)&&(d+=m,f+=h),s=s.parentNode}while(!u&&s!==document.body||u&&(t.contains(s)||t===s));return(l&&(o&&0===d||!o&&a>d)||!l&&(o&&0===f||!o&&-a>f))&&(c=!0),c}(p,t,e,"h"===p?u:c,!0)}),[]),c=r.useCallback((function(e){var n=e;if(ae.length&&ae[ae.length-1]===a){var r="deltaY"in n?ne(n):te(n),o=t.current.filter((function(e){return e.name===n.type&&e.target===n.target&&(t=e.delta,o=r,t[0]===o[0]&&t[1]===o[1]);var t,o}))[0];if(o&&o.should)n.cancelable&&n.preventDefault();else if(!o){var i=(s.current.shards||[]).map(re).filter(Boolean).filter((function(e){return e.contains(n.target)}));(i.length>0?u(n,i[0]):!s.current.noIsolation)&&n.cancelable&&n.preventDefault()}}}),[]),l=r.useCallback((function(e,n,r,o){var i={name:e,delta:n,target:r,should:o};t.current.push(i),setTimeout((function(){t.current=t.current.filter((function(e){return e!==i}))}),1)}),[]),d=r.useCallback((function(e){n.current=te(e),o.current=void 0}),[]),f=r.useCallback((function(t){l(t.type,ne(t),t.target,u(t,e.lockRef.current))}),[]),p=r.useCallback((function(t){l(t.type,te(t),t.target,u(t,e.lockRef.current))}),[]);r.useEffect((function(){return ae.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,J),document.addEventListener("touchmove",c,J),document.addEventListener("touchstart",d,J),function(){ae=ae.filter((function(e){return e!==a})),document.removeEventListener("wheel",c,J),document.removeEventListener("touchmove",c,J),document.removeEventListener("touchstart",d,J)}}),[]);var h=e.removeScrollBar,m=e.inert;return r.createElement(r.Fragment,null,m?r.createElement(a,{styles:oe(i)}):null,h?r.createElement(G,{gapMode:"margin"}):null)},N.useMedium(se),F),ce=r.forwardRef((function(e,t){return r.createElement(A,M({},e,{ref:t,sideCar:ue}))}));ce.classNames=A.classNames;var le=ce;let de=0;function fe(){r.useEffect((()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:pe()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:pe()),de++,()=>{1===de&&document.querySelectorAll("[data-radix-focus-guard]").forEach((e=>e.remove())),de--}}),[])}function pe(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const he=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>({...e,[t]:r.forwardRef(((e,n)=>{const{asChild:o,...i}=e,a=o?h:t;return r.useEffect((()=>{window[Symbol.for("radix-ui")]=!0}),[]),r.createElement(a,Object(p.a)({},i,{ref:n}))}))})),{}),me=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?r.useLayoutEffect:()=>{},ge=e=>{const{present:t,children:n}=e,o=function(e){const[t,n]=r.useState(),o=r.useRef({}),i=r.useRef(e),a=r.useRef("none"),s=e?"mounted":"unmounted",[u,c]=function(e,t){return r.useReducer(((e,n)=>{const r=t[e][n];return null!=r?r:e}),e)}(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect((()=>{const e=ve(o.current);a.current="mounted"===u?e:"none"}),[u]),me((()=>{const t=o.current,n=i.current;if(n!==e){const r=a.current,o=ve(t);if(e)c("MOUNT");else if("none"===o||"none"===(null==t?void 0:t.display))c("UNMOUNT");else{const e=r!==o;c(n&&e?"ANIMATION_OUT":"UNMOUNT")}i.current=e}}),[e,c]),me((()=>{if(t){const e=e=>{const n=ve(o.current).includes(e.animationName);e.target===t&&n&&c("ANIMATION_END")},n=e=>{e.target===t&&(a.current=ve(o.current))};return t.addEventListener("animationstart",n),t.addEventListener("animationcancel",e),t.addEventListener("animationend",e),()=>{t.removeEventListener("animationstart",n),t.removeEventListener("animationcancel",e),t.removeEventListener("animationend",e)}}c("ANIMATION_END")}),[t,c]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:r.useCallback((e=>{e&&(o.current=getComputedStyle(e)),n(e)}),[])}}(t),i="function"==typeof n?n({present:o.isPresent}):r.Children.only(n),a=f(o.ref,i.ref);return"function"==typeof n||o.isPresent?r.cloneElement(i,{ref:a}):null};function ve(e){return(null==e?void 0:e.animationName)||"none"}ge.displayName="Presence";function be(e){const t=r.useRef(e);return r.useEffect((()=>{t.current=e})),r.useMemo((()=>(...e)=>{var n;return null===(n=t.current)||void 0===n?void 0:n.call(t,...e)}),[])}const ye={bubbles:!1,cancelable:!0},_e=r.forwardRef(((e,t)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...s}=e,[u,c]=r.useState(null),l=be(i),d=be(a),h=r.useRef(null),m=f(t,(e=>c(e))),g=r.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;r.useEffect((()=>{if(o){function e(e){if(g.paused||!u)return;const t=e.target;u.contains(t)?h.current=t:Se(h.current,{select:!0})}function t(e){!g.paused&&u&&(u.contains(e.relatedTarget)||Se(h.current,{select:!0}))}return document.addEventListener("focusin",e),document.addEventListener("focusout",t),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t)}}}),[o,u,g.paused]),r.useEffect((()=>{if(u){Oe.add(g);const e=document.activeElement;if(!u.contains(e)){const t=new Event("focusScope.autoFocusOnMount",ye);u.addEventListener("focusScope.autoFocusOnMount",l),u.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Se(r,{select:t}),document.activeElement!==n)return}(we(u).filter((e=>"A"!==e.tagName)),{select:!0}),document.activeElement===e&&Se(u))}return()=>{u.removeEventListener("focusScope.autoFocusOnMount",l),setTimeout((()=>{const t=new Event("focusScope.autoFocusOnUnmount",ye);u.addEventListener("focusScope.autoFocusOnUnmount",d),u.dispatchEvent(t),t.defaultPrevented||Se(null!=e?e:document.body,{select:!0}),u.removeEventListener("focusScope.autoFocusOnUnmount",d),Oe.remove(g)}),0)}}}),[u,l,d,g]);const v=r.useCallback((e=>{if(!n&&!o)return;if(g.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){const t=e.currentTarget,[o,i]=function(e){const t=we(e);return[Ee(t,e),Ee(t.reverse(),e)]}(t);o&&i?e.shiftKey||r!==i?e.shiftKey&&r===o&&(e.preventDefault(),n&&Se(i,{select:!0})):(e.preventDefault(),n&&Se(o,{select:!0})):r===t&&e.preventDefault()}}),[n,o,g.paused]);return r.createElement(he.div,Object(p.a)({tabIndex:-1},s,{ref:m,onKeyDown:v}))}));function we(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Ee(e,t){for(const n of e)if(!xe(n,{upTo:t}))return n}function xe(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Se(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}const Oe=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null==n||n.pause()),e=Ie(e,t),e.unshift(t)},remove(t){var n;e=Ie(e,t),null===(n=e[0])||void 0===n||n.resume()}}}();function Ie(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}let Me,Ce=0;const Pe=r.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),je=r.forwardRef(((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:s,onDismiss:u,...c}=e,l=r.useContext(Pe),[d,h]=r.useState(null),[,m]=r.useState({}),g=f(t,(e=>h(e))),v=Array.from(l.layers),[b]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),_=v.indexOf(b),w=d?v.indexOf(d):-1,E=l.layersWithOutsidePointerEventsDisabled.size>0,x=w>=_,S=function(e){const t=be((e=>{const t=e.target,n=[...l.branches].some((e=>e.contains(t)));x&&!n&&(null==i||i(e),null==s||s(e),e.defaultPrevented||null==u||u())})),n=r.useRef(!1);return r.useEffect((()=>{const e=e=>{e.target&&!n.current&&Be("dismissableLayer.pointerDownOutside",t,{originalEvent:e}),n.current=!1},r=window.setTimeout((()=>{document.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(r),document.removeEventListener("pointerdown",e)}}),[t]),{onPointerDownCapture:()=>n.current=!0}}(),O=function(e){const t=be((e=>{const t=e.target;[...l.branches].some((e=>e.contains(t)))||(null==a||a(e),null==s||s(e),e.defaultPrevented||null==u||u())})),n=r.useRef(!1);return r.useEffect((()=>{const e=e=>{e.target&&!n.current&&Be("dismissableLayer.focusOutside",t,{originalEvent:e})};return document.addEventListener("focusin",e),()=>document.removeEventListener("focusin",e)}),[t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}();return function(e){const t=be(e);r.useEffect((()=>{const e=e=>{"Escape"===e.key&&t(e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[t])}((e=>{w===l.layers.size-1&&(null==o||o(e),e.defaultPrevented||null==u||u())})),function({disabled:e}){const t=r.useRef(!1);me((()=>{if(e){function n(){Ce--,0===Ce&&(document.body.style.pointerEvents=Me)}function r(e){t.current="mouse"!==e.pointerType}return 0===Ce&&(Me=document.body.style.pointerEvents),document.body.style.pointerEvents="none",Ce++,document.addEventListener("pointerup",r),()=>{t.current?document.addEventListener("click",n,{once:!0}):n(),document.removeEventListener("pointerup",r)}}}),[e])}({disabled:n}),r.useEffect((()=>{d&&(n&&l.layersWithOutsidePointerEventsDisabled.add(d),l.layers.add(d),Te())}),[d,n,l]),r.useEffect((()=>()=>{d&&(l.layers.delete(d),l.layersWithOutsidePointerEventsDisabled.delete(d),Te())}),[d,l]),r.useEffect((()=>{const e=()=>m({});return document.addEventListener("dismissableLayer.update",e),()=>document.removeEventListener("dismissableLayer.update",e)}),[]),r.createElement(he.div,Object(p.a)({},c,{ref:g,style:{pointerEvents:E?x?"auto":"none":void 0,...e.style},onFocusCapture:y(e.onFocusCapture,O.onFocusCapture),onBlurCapture:y(e.onBlurCapture,O.onBlurCapture),onPointerDownCapture:y(e.onPointerDownCapture,S.onPointerDownCapture)}))}));function Te(){const e=new Event("dismissableLayer.update");document.dispatchEvent(e)}function Be(e,t,n){const r=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});return t&&r.addEventListener(e,t,{once:!0}),!r.dispatchEvent(o)}const ke=r["useId".toString()]||(()=>{});let Ne=0;function De(e){const[t,n]=r.useState(ke());return me((()=>{e||n((e=>null!=e?e:String(Ne++)))}),[e]),e||(t?`radix-${t}`:"")}function Ae(e,t=[]){let n=[];const o=()=>{const t=n.map((e=>r.createContext(e)));return function(n){const o=(null==n?void 0:n[e])||t;return r.useMemo((()=>({[`__scope${e}`]:{...n,[e]:o}})),[n,o])}};return o.scopeName=e,[function(t,o){const i=r.createContext(o),a=n.length;function s(t){const{scope:n,children:o,...s}=t,u=(null==n?void 0:n[e][a])||i,c=r.useMemo((()=>s),Object.values(s));return r.createElement(u.Provider,{value:c},o)}return n=[...n,o],s.displayName=t+"Provider",[s,function(n,s){const u=(null==s?void 0:s[e][a])||i,c=r.useContext(u);if(c)return c;if(void 0!==o)return o;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},Le(o,...t)]}function Le(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(e){const o=n.reduce(((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]})),{});return r.useMemo((()=>({[`__scope${t.scopeName}`]:o})),[o])}};return n.scopeName=t.scopeName,n}const[Fe,Re]=Ae("Dialog"),[$e,Ve]=Fe("Dialog"),Ke=r.forwardRef(((e,t)=>{const{forceMount:n,...o}=e,i=Ve("DialogOverlay",e.__scopeDialog);return i.modal?r.createElement(ge,{present:n||i.open},r.createElement(We,Object(p.a)({},o,{ref:t}))):null})),We=r.forwardRef(((e,t)=>{const{__scopeDialog:n,...o}=e,i=Ve("DialogOverlay",n);return r.createElement(le,{as:h,allowPinchZoom:i.allowPinchZoom,shards:[i.contentRef]},r.createElement(he.div,Object(p.a)({"data-state":Ye(i.open)},o,{ref:t,style:{pointerEvents:"auto",...o.style}})))})),He=r.forwardRef(((e,t)=>{const{forceMount:n,...o}=e,i=Ve("DialogContent",e.__scopeDialog);return r.createElement(ge,{present:n||i.open},i.modal?r.createElement(Ue,Object(p.a)({},o,{ref:t})):r.createElement(Xe,Object(p.a)({},o,{ref:t})))})),Ue=r.forwardRef(((e,t)=>{const n=Ve("DialogContent",e.__scopeDialog),o=r.useRef(null),i=f(t,n.contentRef,o);return r.useEffect((()=>{const e=o.current;if(e)return I(e)}),[]),r.createElement(Ge,Object(p.a)({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:y(e.onCloseAutoFocus,(e=>{var t;e.preventDefault(),null===(t=n.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:y(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()})),onFocusOutside:y(e.onFocusOutside,(e=>e.preventDefault()))}))})),Xe=r.forwardRef(((e,t)=>{const n=Ve("DialogContent",e.__scopeDialog),o=r.useRef(!1);return r.createElement(Ge,Object(p.a)({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var r,i;null===(r=e.onCloseAutoFocus)||void 0===r||r.call(e,t),t.defaultPrevented||(o.current||null===(i=n.triggerRef.current)||void 0===i||i.focus(),t.preventDefault()),o.current=!1},onInteractOutside:t=>{var r,i;null===(r=e.onInteractOutside)||void 0===r||r.call(e,t),t.defaultPrevented||(o.current=!0);const a=t.target;(null===(i=n.triggerRef.current)||void 0===i?void 0:i.contains(a))&&t.preventDefault()}}))})),Ge=r.forwardRef(((e,t)=>{const{__scopeDialog:n,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:a,...s}=e,u=Ve("DialogContent",n),c=f(t,r.useRef(null));return fe(),r.createElement(r.Fragment,null,r.createElement(_e,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:i,onUnmountAutoFocus:a},r.createElement(je,Object(p.a)({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Ye(u.open)},s,{ref:c,onDismiss:()=>u.onOpenChange(!1)}))),!1)})),qe=r.forwardRef(((e,t)=>{const{__scopeDialog:n,...o}=e,i=Ve("DialogTitle",n);return r.createElement(he.h2,Object(p.a)({id:i.titleId},o,{ref:t}))})),ze=r.forwardRef(((e,t)=>{const{__scopeDialog:n,...o}=e,i=Ve("DialogDescription",n);return r.createElement(he.p,Object(p.a)({id:i.descriptionId},o,{ref:t}))})),Je=r.forwardRef(((e,t)=>{const{__scopeDialog:n,...o}=e,i=Ve("DialogClose",n);return r.createElement(he.button,Object(p.a)({type:"button"},o,{ref:t,onClick:y(e.onClick,(()=>i.onOpenChange(!1)))}))}));function Ye(e){return e?"open":"closed"}const[Ze,Qe]=function(e,t){const n=r.createContext(t);function o(e){const{children:t,...o}=e,i=r.useMemo((()=>o),Object.values(o));return r.createElement(n.Provider,{value:i},t)}return o.displayName=e+"Provider",[o,function(o){const i=r.useContext(n);if(i)return i;if(void 0!==t)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}]}("DialogTitleWarning",{contentName:"DialogContent",titleName:"DialogTitle",docsSlug:"dialog"}),et=e=>{const{__scopeDialog:t,children:n,open:o,defaultOpen:i,onOpenChange:a,modal:s=!0,allowPinchZoom:u}=e,c=r.useRef(null),l=r.useRef(null),[d=!1,f]=function({prop:e,defaultProp:t,onChange:n=(()=>{})}){const[o,i]=function({defaultProp:e,onChange:t}){const n=r.useState(e),[o]=n,i=r.useRef(o),a=be(t);return r.useEffect((()=>{i.current!==o&&(a(o),i.current=o)}),[o,i,a]),n}({defaultProp:t,onChange:n}),a=void 0!==e,s=a?e:o,u=be(n);return[s,r.useCallback((t=>{if(a){const n=t,r="function"==typeof t?n(e):t;r!==e&&u(r)}else i(t)}),[a,e,i,u])]}({prop:o,defaultProp:i,onChange:a});return r.createElement($e,{scope:t,triggerRef:c,contentRef:l,contentId:De(),titleId:De(),descriptionId:De(),open:d,onOpenChange:f,onOpenToggle:r.useCallback((()=>f((e=>!e))),[f]),modal:s,allowPinchZoom:u},n)},tt=Ke,nt=He,rt=qe,ot=ze,it=Je,[at,st]=Ae("AlertDialog",[Re]),ut=Re(),ct=r.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...o}=e,i=ut(n);return r.createElement(tt,Object(p.a)({},i,o,{ref:t}))})),[lt,dt]=at("AlertDialogContent"),ft=r.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,children:o,...i}=e,a=ut(n),s=f(t,r.useRef(null)),u=r.useRef(null);return r.createElement(Ze,{contentName:"AlertDialogContent",titleName:pt,docsSlug:"alert-dialog"},r.createElement(lt,{scope:n,cancelRef:u},r.createElement(nt,Object(p.a)({role:"alertdialog"},a,i,{ref:s,onOpenAutoFocus:y(i.onOpenAutoFocus,(e=>{var t;e.preventDefault(),null===(t=u.current)||void 0===t||t.focus({preventScroll:!0})})),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault()}),r.createElement(g,null,o),!1)))})),pt="AlertDialogTitle",ht=r.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...o}=e,i=ut(n);return r.createElement(rt,Object(p.a)({},i,o,{ref:t}))})),mt=r.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...o}=e,i=ut(n);return r.createElement(ot,Object(p.a)({},i,o,{ref:t}))})),gt=e=>{const{__scopeAlertDialog:t,...n}=e,o=ut(t);return r.createElement(et,Object(p.a)({},o,n,{modal:!0}))},vt=ct,bt=ft,yt=r.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...o}=e,i=ut(n);return r.createElement(it,Object(p.a)({},i,o,{ref:t}))})),_t=ht,wt=mt;n(1332);var Et=n(26),xt=n.n(Et);n(1335);function St(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function Ot(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function It(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return Ot(n.overflowY,t)||Ot(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function Mt(e,t,n,r,o,i,a,s){return i<e&&a>t||i>e&&a<t?0:i<=e&&s<=n||a>=t&&s>=n?i-e-r:a>t&&s<n||i<e&&s>n?a-t+o:0}let Ct=0;function Pt(){}function jt(e,t){if(!e)return;(function(e,t){var n=window,r=t.scrollMode,o=t.block,i=t.inline,a=t.boundary,s=t.skipOverflowHiddenElements,u="function"==typeof a?a:function(e){return e!==a};if(!St(e))throw new TypeError("Invalid target");for(var c=document.scrollingElement||document.documentElement,l=[],d=e;St(d)&&u(d);){if((d=d.parentElement)===c){l.push(d);break}null!=d&&d===document.body&&It(d)&&!It(document.documentElement)||null!=d&&It(d,s)&&l.push(d)}for(var f=n.visualViewport?n.visualViewport.width:innerWidth,p=n.visualViewport?n.visualViewport.height:innerHeight,h=window.scrollX||pageXOffset,m=window.scrollY||pageYOffset,g=e.getBoundingClientRect(),v=g.height,b=g.width,y=g.top,_=g.right,w=g.bottom,E=g.left,x="start"===o||"nearest"===o?y:"end"===o?w:y+v/2,S="center"===i?E+b/2:"end"===i?_:E,O=[],I=0;I<l.length;I++){var M=l[I],C=M.getBoundingClientRect(),P=C.height,j=C.width,T=C.top,B=C.right,k=C.bottom,N=C.left;if("if-needed"===r&&y>=0&&E>=0&&w<=p&&_<=f&&y>=T&&w<=k&&E>=N&&_<=B)return O;var D=getComputedStyle(M),A=parseInt(D.borderLeftWidth,10),L=parseInt(D.borderTopWidth,10),F=parseInt(D.borderRightWidth,10),R=parseInt(D.borderBottomWidth,10),$=0,V=0,K="offsetWidth"in M?M.offsetWidth-M.clientWidth-A-F:0,W="offsetHeight"in M?M.offsetHeight-M.clientHeight-L-R:0;if(c===M)$="start"===o?x:"end"===o?x-p:"nearest"===o?Mt(m,m+p,p,L,R,m+x,m+x+v,v):x-p/2,V="start"===i?S:"center"===i?S-f/2:"end"===i?S-f:Mt(h,h+f,f,A,F,h+S,h+S+b,b),$=Math.max(0,$+m),V=Math.max(0,V+h);else{$="start"===o?x-T-L:"end"===o?x-k+R+W:"nearest"===o?Mt(T,k,P,L,R+W,x,x+v,v):x-(T+P/2)+W/2,V="start"===i?S-N-A:"center"===i?S-(N+j/2)+K/2:"end"===i?S-B+F+K:Mt(N,B,j,A,F+K,S,S+b,b);var H=M.scrollLeft,U=M.scrollTop;x+=U-($=Math.max(0,Math.min(U+$,M.scrollHeight-P+W))),S+=H-(V=Math.max(0,Math.min(H+V,M.scrollWidth-j+K)))}O.push({el:M,top:$,left:V})}return O})(e,{boundary:t,block:"nearest",scrollMode:"if-needed"}).forEach((e=>{let{el:t,top:n,left:r}=e;t.scrollTop=n,t.scrollLeft=r}))}function Tt(e,t,n){return e===t||t instanceof n.Node&&e.contains&&e.contains(t)}function Bt(e,t){let n;function r(){n&&clearTimeout(n)}function o(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];r(),n=setTimeout((()=>{n=null,e(...i)}),t)}return o.cancel=r,o}function kt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.some((t=>(t&&t(e,...r),e.preventDownshiftDefault||e.hasOwnProperty("nativeEvent")&&e.nativeEvent.preventDownshiftDefault)))}}function Nt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"==typeof t?t(e):t&&(t.current=e)}))}}function Dt(){return String(Ct++)}function At(e){let{isOpen:t,resultCount:n,previousResultCount:r}=e;return t?n?n!==r?`${n} result${1===n?" is":"s are"} available, use up and down arrow keys to navigate. Press Enter key to select.`:"":"No results are available.":""}function Lt(e,t){return Object.keys(e).reduce(((n,r)=>(n[r]=Ft(t,r)?t[r]:e[r],n)),{})}function Ft(e,t){return void 0!==e[t]}function Rt(e){const{key:t,keyCode:n}=e;return n>=37&&n<=40&&0!==t.indexOf("Arrow")?`Arrow${t}`:t}function $t(e,t,n,r,o){if(void 0===o&&(o=!0),0===n)return-1;const i=n-1;("number"!=typeof t||t<0||t>=n)&&(t=e>0?-1:i+1);let a=t+e;a<0?a=o?i:0:a>i&&(a=o?0:i);const s=Vt(e,a,n,r,o);return-1===s?t>=n?-1:t:s}function Vt(e,t,n,r,o){const i=r(t);if(!i||!i.hasAttribute("disabled"))return t;if(e>0){for(let e=t+1;e<n;e++)if(!r(e).hasAttribute("disabled"))return e}else for(let e=t-1;e>=0;e--)if(!r(e).hasAttribute("disabled"))return e;return o?e>0?Vt(1,0,n,r,!1):Vt(-1,n-1,n,r,!1):-1}function Kt(e,t,n,r){return void 0===r&&(r=!0),t.some((t=>t&&(Tt(t,e,n)||r&&Tt(t,n.document.activeElement,n))))}const Wt=Bt((e=>{Ut(e).textContent=""}),500);function Ht(e,t){const n=Ut(t);e&&(n.textContent=e,Wt(t))}function Ut(e){void 0===e&&(e=document);let t=e.getElementById("a11y-status-message");return t||(t=e.createElement("div"),t.setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}const Xt={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function Gt(e,t,n){const{props:r,type:o}=e,i={};Object.keys(t).forEach((r=>{!function(e,t,n,r){const{props:o,type:i}=t,a=`on${Zt(e)}Change`;o[a]&&void 0!==r[e]&&r[e]!==n[e]&&o[a]({type:i,...r})}(r,e,t,n),n[r]!==t[r]&&(i[r]=n[r])})),r.onStateChange&&Object.keys(i).length&&r.onStateChange({type:o,...i})}const qt=Bt(((e,t)=>{Ht(e(),t)}),200),zt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect;function Jt(e){let{id:t=`downshift-${Dt()}`,labelId:n,menuId:o,getItemId:i,toggleButtonId:a,inputId:s}=e;return Object(r.useRef)({labelId:n||`${t}-label`,menuId:o||`${t}-menu`,getItemId:i||(e=>`${t}-item-${e}`),toggleButtonId:a||`${t}-toggle-button`,inputId:s||`${t}-input`}).current}function Yt(e,t,n){return void 0!==e?e:0===n.length?-1:n.indexOf(t)}function Zt(e){return`${e.slice(0,1).toUpperCase()}${e.slice(1)}`}function Qt(e){const t=Object(r.useRef)(e);return t.current=e,t}function en(e,t,n){const o=Object(r.useRef)(),i=Object(r.useRef)(),a=Object(r.useCallback)(((t,n)=>{i.current=n,t=Lt(t,n.props);const r=e(t,n);return n.props.stateReducer(t,{...n,changes:r})}),[e]),[s,u]=Object(r.useReducer)(a,t),c=Qt(n),l=Object(r.useCallback)((e=>u({props:c.current,...e})),[c]),d=i.current;return Object(r.useEffect)((()=>{d&&o.current&&o.current!==s&&Gt(d,Lt(o.current,d.props),s),o.current=s}),[s,n,d]),[s,l]}const tn={itemToString:function(e){return e?String(e):""},stateReducer:function(e,t){return t.changes},getA11ySelectionMessage:function(e){const{selectedItem:t,itemToString:n}=e;return t?`${n(t)} has been selected.`:""},scrollIntoView:jt,circularNavigation:!1,environment:"undefined"==typeof window?{}:window};function nn(e,t,n){void 0===n&&(n=Xt);const r=e[`default${Zt(t)}`];return void 0!==r?r:n[t]}function rn(e,t,n){void 0===n&&(n=Xt);const r=e[t];if(void 0!==r)return r;const o=e[`initial${Zt(t)}`];return void 0!==o?o:nn(e,t,n)}function on(e){const t=rn(e,"selectedItem"),n=rn(e,"isOpen"),r=rn(e,"highlightedIndex"),o=rn(e,"inputValue");return{highlightedIndex:r<0&&t&&n?e.items.indexOf(t):r,isOpen:n,selectedItem:t,inputValue:o}}function an(e,t,n,r){const{items:o,initialHighlightedIndex:i,defaultHighlightedIndex:a}=e,{selectedItem:s,highlightedIndex:u}=t;return 0===o.length?-1:void 0!==i&&u===i?i:void 0!==a?a:s?0===n?o.indexOf(s):$t(n,o.indexOf(s),o.length,r,!1):0===n?-1:n<0?o.length-1:0}function sn(e,t,n,o){const i=Object(r.useRef)({isMouseDown:!1,isTouchMove:!1});return Object(r.useEffect)((()=>{const r=()=>{i.current.isMouseDown=!0},a=r=>{i.current.isMouseDown=!1,e&&!Kt(r.target,t.map((e=>e.current)),n)&&o()},s=()=>{i.current.isTouchMove=!1},u=()=>{i.current.isTouchMove=!0},c=r=>{!e||i.current.isTouchMove||Kt(r.target,t.map((e=>e.current)),n,!1)||o()};return n.addEventListener("mousedown",r),n.addEventListener("mouseup",a),n.addEventListener("touchstart",s),n.addEventListener("touchmove",u),n.addEventListener("touchend",c),function(){n.removeEventListener("mousedown",r),n.removeEventListener("mouseup",a),n.removeEventListener("touchstart",s),n.removeEventListener("touchmove",u),n.removeEventListener("touchend",c)}}),[e,n]),i}let un=()=>Pt;function cn(e,t,n){let{isInitialMount:o,highlightedIndex:i,items:a,environment:s,...u}=n;Object(r.useEffect)((()=>{o||qt((()=>e({highlightedIndex:i,highlightedItem:a[i],resultCount:a.length,...u})),s.document)}),t)}function ln(e){let{highlightedIndex:t,isOpen:n,itemRefs:o,getItemNodeFromIndex:i,menuElement:a,scrollIntoView:s}=e;const u=Object(r.useRef)(!0);return zt((()=>{t<0||!n||!Object.keys(o.current).length||(!1===u.current?u.current=!0:s(i(t),a))}),[t]),u}let dn=Pt;function fn(e,t,n){const{type:r,props:o}=t;let i;switch(r){case n.ItemMouseMove:i={highlightedIndex:t.disabled?-1:t.index};break;case n.MenuMouseLeave:i={highlightedIndex:-1};break;case n.ToggleButtonClick:case n.FunctionToggleMenu:i={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:an(o,e,0)};break;case n.FunctionOpenMenu:i={isOpen:!0,highlightedIndex:an(o,e,0)};break;case n.FunctionCloseMenu:i={isOpen:!1};break;case n.FunctionSetHighlightedIndex:i={highlightedIndex:t.highlightedIndex};break;case n.FunctionSetInputValue:i={inputValue:t.inputValue};break;case n.FunctionReset:i={highlightedIndex:nn(o,"highlightedIndex"),isOpen:nn(o,"isOpen"),selectedItem:nn(o,"selectedItem"),inputValue:nn(o,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return{...e,...i}}xt.a.array.isRequired,xt.a.func,xt.a.func,xt.a.func,xt.a.bool,xt.a.number,xt.a.number,xt.a.number,xt.a.bool,xt.a.bool,xt.a.bool,xt.a.any,xt.a.any,xt.a.any,xt.a.string,xt.a.string,xt.a.string,xt.a.func,xt.a.string,xt.a.func,xt.a.func,xt.a.func,xt.a.func,xt.a.func,xt.a.shape({addEventListener:xt.a.func,removeEventListener:xt.a.func,document:xt.a.shape({getElementById:xt.a.func,activeElement:xt.a.any,body:xt.a.any})});M(M({},tn),{getA11yStatusMessage:function(e){var t=e.isOpen,n=e.resultCount,r=e.previousResultCount;return t?n?n!==r?"".concat(n," result").concat(1===n?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}});var pn=Object.freeze({__proto__:null,InputKeyDownArrowDown:0,InputKeyDownArrowUp:1,InputKeyDownEscape:2,InputKeyDownHome:3,InputKeyDownEnd:4,InputKeyDownEnter:5,InputChange:6,InputBlur:7,MenuMouseLeave:8,ItemMouseMove:9,ItemClick:10,ToggleButtonClick:11,FunctionToggleMenu:12,FunctionOpenMenu:13,FunctionCloseMenu:14,FunctionSetHighlightedIndex:15,FunctionSelectItem:16,FunctionSetInputValue:17,FunctionReset:18,ControlledPropUpdatedSelectedItem:19});xt.a.array.isRequired,xt.a.func,xt.a.func,xt.a.func,xt.a.bool,xt.a.number,xt.a.number,xt.a.number,xt.a.bool,xt.a.bool,xt.a.bool,xt.a.any,xt.a.any,xt.a.any,xt.a.string,xt.a.string,xt.a.string,xt.a.string,xt.a.string,xt.a.string,xt.a.func,xt.a.string,xt.a.string,xt.a.func,xt.a.func,xt.a.func,xt.a.func,xt.a.func,xt.a.func,xt.a.shape({addEventListener:xt.a.func,removeEventListener:xt.a.func,document:xt.a.shape({getElementById:xt.a.func,activeElement:xt.a.any,body:xt.a.any})});let hn=Pt;const mn={...tn,getA11yStatusMessage:At,circularNavigation:!0};function gn(e,t){const{type:n,props:r,shiftKey:o}=t;let i;switch(n){case 10:i={isOpen:nn(r,"isOpen"),highlightedIndex:nn(r,"highlightedIndex"),selectedItem:r.items[t.index],inputValue:r.itemToString(r.items[t.index])};break;case 0:i=e.isOpen?{highlightedIndex:$t(o?5:1,e.highlightedIndex,r.items.length,t.getItemNodeFromIndex,r.circularNavigation)}:{highlightedIndex:an(r,e,1,t.getItemNodeFromIndex),isOpen:r.items.length>=0};break;case 1:i=e.isOpen?{highlightedIndex:$t(o?-5:-1,e.highlightedIndex,r.items.length,t.getItemNodeFromIndex,r.circularNavigation)}:{highlightedIndex:an(r,e,-1,t.getItemNodeFromIndex),isOpen:r.items.length>=0};break;case 5:i={...e.isOpen&&e.highlightedIndex>=0&&{selectedItem:r.items[e.highlightedIndex],isOpen:nn(r,"isOpen"),highlightedIndex:nn(r,"highlightedIndex"),inputValue:r.itemToString(r.items[e.highlightedIndex])}};break;case 2:i={isOpen:!1,highlightedIndex:-1,...!e.isOpen&&{selectedItem:null,inputValue:""}};break;case 3:i={highlightedIndex:Vt(1,0,r.items.length,t.getItemNodeFromIndex,!1)};break;case 4:i={highlightedIndex:Vt(-1,r.items.length-1,r.items.length,t.getItemNodeFromIndex,!1)};break;case 7:i={isOpen:!1,highlightedIndex:-1,...e.highlightedIndex>=0&&t.selectItem&&{selectedItem:r.items[e.highlightedIndex],inputValue:r.itemToString(r.items[e.highlightedIndex])}};break;case 6:i={isOpen:!0,highlightedIndex:nn(r,"highlightedIndex"),inputValue:t.inputValue};break;case 16:i={selectedItem:t.selectedItem,inputValue:r.itemToString(t.selectedItem)};break;case 19:i={inputValue:t.inputValue};break;default:return fn(e,t,pn)}return{...e,...i}}function vn(e){void 0===e&&(e={}),hn(e,vn);const t={...mn,...e},{initialIsOpen:n,defaultIsOpen:o,items:i,scrollIntoView:a,environment:s,getA11yStatusMessage:u,getA11ySelectionMessage:c,itemToString:l}=t,d=function(e){const t=on(e),{selectedItem:n}=t;let{inputValue:r}=t;return""===r&&n&&void 0===e.defaultInputValue&&void 0===e.initialInputValue&&void 0===e.inputValue&&(r=e.itemToString(n)),{...t,inputValue:r}}(t),[f,p]=function(e,t,n){const o=Object(r.useRef)(),[i,a]=en(e,t,n);return Object(r.useEffect)((()=>{Ft(n,"selectedItem")&&(o.current!==n.selectedItem&&a({type:19,inputValue:n.itemToString(n.selectedItem)}),o.current=i.selectedItem===o.current?n.selectedItem:i.selectedItem)})),[Lt(i,n),a]}(gn,d,t),{isOpen:h,highlightedIndex:m,selectedItem:g,inputValue:v}=f,b=Object(r.useRef)(null),y=Object(r.useRef)({}),_=Object(r.useRef)(null),w=Object(r.useRef)(null),E=Object(r.useRef)(null),x=Object(r.useRef)(!0),S=Jt(t),O=Object(r.useRef)(),I=Qt({state:f,props:t}),M=Object(r.useCallback)((e=>y.current[S.getItemId(e)]),[S]);cn(u,[h,m,v,i],{isInitialMount:x.current,previousResultCount:O.current,items:i,environment:s,itemToString:l,...f}),cn(c,[g],{isInitialMount:x.current,previousResultCount:O.current,items:i,environment:s,itemToString:l,...f});const C=ln({menuElement:b.current,highlightedIndex:m,isOpen:h,itemRefs:y,scrollIntoView:a,getItemNodeFromIndex:M});dn({isInitialMount:x.current,props:t,state:f}),Object(r.useEffect)((()=>{(n||o||h)&&_.current&&_.current.focus()}),[]),Object(r.useEffect)((()=>{x.current||(O.current=i.length)}));const P=sn(h,[E,b,w],s,(()=>{p({type:7,selectItem:!1})})),j=un();Object(r.useEffect)((()=>{x.current=!1}),[]),Object(r.useEffect)((()=>{h||(y.current={})}),[h]);const T=Object(r.useMemo)((()=>({ArrowDown(e){e.preventDefault(),p({type:0,shiftKey:e.shiftKey,getItemNodeFromIndex:M})},ArrowUp(e){e.preventDefault(),p({type:1,shiftKey:e.shiftKey,getItemNodeFromIndex:M})},Home(e){I.current.state.isOpen&&(e.preventDefault(),p({type:3,getItemNodeFromIndex:M}))},End(e){I.current.state.isOpen&&(e.preventDefault(),p({type:4,getItemNodeFromIndex:M}))},Escape(e){const t=I.current.state;(t.isOpen||t.inputValue||t.selectedItem||t.highlightedIndex>-1)&&(e.preventDefault(),p({type:2}))},Enter(e){const t=I.current.state;!t.isOpen||t.highlightedIndex<0||229===e.which||(e.preventDefault(),p({type:5,getItemNodeFromIndex:M}))}})),[p,I,M]),B=Object(r.useCallback)((e=>({id:S.labelId,htmlFor:S.inputId,...e})),[S]),k=Object(r.useCallback)((function(e,t){let{onMouseLeave:n,refKey:r="ref",ref:o,...i}=void 0===e?{}:e,{suppressRefError:a=!1}=void 0===t?{}:t;return j("getMenuProps",a,r,b),{[r]:Nt(o,(e=>{b.current=e})),id:S.menuId,role:"listbox","aria-labelledby":S.labelId,onMouseLeave:kt(n,(()=>{p({type:8})})),...i}}),[p,j,S]),N=Object(r.useCallback)((function(e){let{item:t,index:n,refKey:r="ref",ref:o,onMouseMove:i,onMouseDown:a,onClick:s,onPress:u,disabled:c,...l}=void 0===e?{}:e;const{props:d,state:f}=I.current,h=Yt(n,t,d.items);if(h<0)throw new Error("Pass either item or item index in getItemProps!");const m=s;return{[r]:Nt(o,(e=>{e&&(y.current[S.getItemId(h)]=e)})),disabled:c,role:"option","aria-selected":`${h===f.highlightedIndex}`,id:S.getItemId(h),...!c&&{onClick:kt(m,(()=>{p({type:10,index:n})}))},onMouseMove:kt(i,(()=>{n!==f.highlightedIndex&&(C.current=!1,p({type:9,index:n,disabled:c}))})),onMouseDown:kt(a,(e=>e.preventDefault())),...l}}),[p,I,C,S]),D=Object(r.useCallback)((function(e){let{onClick:t,onPress:n,refKey:r="ref",ref:o,...i}=void 0===e?{}:e;return{[r]:Nt(o,(e=>{w.current=e})),id:S.toggleButtonId,tabIndex:-1,...!i.disabled&&{onClick:kt(t,(()=>{p({type:11}),!I.current.state.isOpen&&_.current&&_.current.focus()}))},...i}}),[p,I,S]),A=Object(r.useCallback)((function(e,t){let{onKeyDown:n,onChange:r,onInput:o,onBlur:i,onChangeText:a,refKey:s="ref",ref:u,...c}=void 0===e?{}:e,{suppressRefError:l=!1}=void 0===t?{}:t;j("getInputProps",l,s,_);const d=I.current.state,f=e=>{const t=Rt(e);t&&T[t]&&T[t](e)},h=e=>{p({type:6,inputValue:e.target.value})},m=()=>{d.isOpen&&!P.current.isMouseDown&&p({type:7,selectItem:!0})};let g={};return c.disabled||(g={onChange:kt(r,o,h),onKeyDown:kt(n,f),onBlur:kt(i,m)}),{[s]:Nt(u,(e=>{_.current=e})),id:S.inputId,"aria-autocomplete":"list","aria-controls":S.menuId,...d.isOpen&&d.highlightedIndex>-1&&{"aria-activedescendant":S.getItemId(d.highlightedIndex)},"aria-labelledby":S.labelId,autoComplete:"off",value:d.inputValue,...g,...c}}),[p,T,I,P,j,S]),L=Object(r.useCallback)((function(e,t){let{refKey:n="ref",ref:r,...o}=void 0===e?{}:e,{suppressRefError:i=!1}=void 0===t?{}:t;return j("getComboboxProps",i,n,E),{[n]:Nt(r,(e=>{E.current=e})),role:"combobox","aria-haspopup":"listbox","aria-owns":S.menuId,"aria-expanded":I.current.state.isOpen,...o}}),[I,j,S]),F=Object(r.useCallback)((()=>{p({type:12})}),[p]),R=Object(r.useCallback)((()=>{p({type:14})}),[p]),$=Object(r.useCallback)((()=>{p({type:13})}),[p]),V=Object(r.useCallback)((e=>{p({type:15,highlightedIndex:e})}),[p]),K=Object(r.useCallback)((e=>{p({type:16,selectedItem:e})}),[p]);return{getItemProps:N,getLabelProps:B,getMenuProps:k,getInputProps:A,getComboboxProps:L,getToggleButtonProps:D,toggleMenu:F,openMenu:$,closeMenu:R,setHighlightedIndex:V,setInputValue:Object(r.useCallback)((e=>{p({type:17,inputValue:e})}),[p]),selectItem:K,reset:Object(r.useCallback)((()=>{p({type:18})}),[p]),highlightedIndex:m,isOpen:h,selectedItem:g,inputValue:v}}vn.stateChangeTypes=pn;xt.a.array,xt.a.array,xt.a.array,xt.a.func,xt.a.func,xt.a.func,xt.a.number,xt.a.number,xt.a.number,xt.a.func,xt.a.func,xt.a.string,xt.a.string,xt.a.shape({addEventListener:xt.a.func,removeEventListener:xt.a.func,document:xt.a.shape({getElementById:xt.a.func,activeElement:xt.a.any,body:xt.a.any})});var bn=n(1334),yn=n.n(bn);function _n(e){const[t,n]=Object(r.useState)(e.items),{isOpen:i,getLabelProps:a,getMenuProps:s,getInputProps:u,getComboboxProps:c,highlightedIndex:l,getItemProps:d,setHighlightedIndex:f}=vn({items:t,initialHighlightedIndex:0,isOpen:!0,onInputValueChange:({inputValue:t})=>{const r=t?yn.a.go(t,e.items,{key:"label"}).map((e=>e.obj)):e.items;n(r)},onHighlightedIndexChange:({highlightedIndex:e})=>{-1===e&&t.length>0&&f(0)},onSelectedItemChange:({selectedItem:t,type:n})=>{!t||n!==vn.stateChangeTypes.InputKeyDownEnter&&n!==vn.stateChangeTypes.ItemClick||e.onSelect(t)},itemToString:e=>(null==e?void 0:e.label)||""});return o.a.createElement("div",{className:"ComboBox"},o.a.createElement("label",{hidden:!0,...a()},"Choose an element:"),o.a.createElement("div",{...c(),className:"ComboBoxのsearch"},o.a.createElement("input",{...u(),className:"ComboBoxのinput"})),o.a.createElement("ul",{...s(),className:"ComboBoxのmenu"},i&&t.map(((e,t)=>o.a.createElement("li",{"data-highlighted":l===t,key:`${e.label}${t}`,...d({item:e,index:t})},e.label)))))}async function wn(e,t){await Sn(new Promise((n=>{const r=document.createElement("div");s.a.appendChild(r);const i=o.a.createElement(gt,{open:!0},o.a.createElement(vt,{className:"AlertDialogのoverlay"}),o.a.createElement(bt,{className:"AlertDialogのcontent"},o.a.createElement(u.a,{title:o.a.createElement(_t,null,e)},o.a.createElement(l,{padding:"1em",gap:"0.75em"},o.a.createElement(wt,null,t),o.a.createElement("div",{style:{textAlign:"right"}},o.a.createElement(yt,{asChild:!0},o.a.createElement(c,{onClick:()=>{s.a.removeChild(r),a.a.unmountComponentAtNode(r),n()},ref:e=>e&&e.focus()},"OK")))))));a.a.render(i,r)})))}async function En(e,t){return Sn(new Promise((n=>{const r=document.createElement("div");s.a.appendChild(r);const i=o.a.createElement(gt,{open:!0},o.a.createElement(vt,{className:"AlertDialogのoverlay"}),o.a.createElement(bt,{className:"AlertDialogのcontent"},o.a.createElement(u.a,{title:o.a.createElement(_t,null,t.title)},o.a.createElement(l,{padding:"1em",gap:"0.75em"},o.a.createElement(_n,{items:e,onSelect:e=>{s.a.removeChild(r),a.a.unmountComponentAtNode(r),n(e)}})))));a.a.render(i,r)})))}const xn=new Set;function Sn(e){return xn.add(e),Promise.resolve(e).finally((()=>{xn.delete(e)})),e}function On(){return xn.size>0}},555:function(e,t,n){(function(t){var n=Math.floor(16777215*Math.random()),r=i.index=parseInt(16777215*Math.random(),10),o=(void 0===t||"number"!=typeof t.pid?Math.floor(1e5*Math.random()):t.pid)%65535;function i(e){if(!(this instanceof i))return new i(e);if(e&&(e instanceof i||"ObjectID"===e._bsontype))return e;var t,n;if(null!=(n=e)&&n.constructor&&"function"==typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)||Array.isArray(e)&&12===e.length)t=Array.prototype.slice.call(e);else if("string"==typeof e){if(12!==e.length&&!i.isValid(e))throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");t=u(e)}else/number|undefined/.test(typeof e)&&(t=u(a(e)));Object.defineProperty(this,"id",{enumerable:!0,get:function(){return String.fromCharCode.apply(this,t)}}),Object.defineProperty(this,"str",{get:function(){return t.map(s.bind(this,2)).join("")}})}function a(e){return"number"!=typeof e&&(e=Date.now()/1e3),s(8,e=parseInt(e,10)%4294967295)+s(6,n)+s(4,o)+s(6,r=(r+1)%16777215)}function s(e,t){return(t=t.toString(16)).length===e?t:"00000000".substring(t.length,e)+t}function u(e){var t=0,n=[];if(24===e.length)for(;t<24;n.push(parseInt(e[t]+e[t+1],16)),t+=2);else if(12===e.length)for(;t<12;n.push(e.charCodeAt(t)),t++);return n}e.exports=i,i.generate=a,i.default=i,i.createFromTime=function(e){return new i(s(8,e=parseInt(e,10)%4294967295)+"0000000000000000")},i.createFromHexString=function(e){if(!i.isValid(e))throw new Error("Invalid ObjectID hex string");return new i(e)},i.isValid=function(e){return!(!e||"string"!=typeof e&&("object"!=typeof e||Array.isArray(e)||"function"!=typeof e.toString))&&/^[0-9A-F]{24}$/i.test(e.toString())},i.setMachineID=function(e){var t;if("string"==typeof e){if(t=parseInt(e,16),isNaN(t)){e=("000000"+e).substr(-7,6),t="";for(var r=0;r<6;r++)t+=e.charCodeAt(r)}}else/number|undefined/.test(typeof e)&&(t=0|e);n=16777215&t},i.getMachineID=function(){return n},i.prototype={_bsontype:"ObjectID",constructor:i,toHexString:function(){return this.str},equals:function(e){return!!e&&this.str===e.toString()},getTimestamp:function(){return new Date(1e3*parseInt(this.str.substr(0,8),16))}};var c=Symbol&&Symbol.for("nodejs.util.inspect.custom")||"inspect";i.prototype[c]=function(){return"ObjectID("+this+")"},i.prototype.toJSON=i.prototype.toHexString,i.prototype.toString=i.prototype.toHexString}).call(this,n(33))},588:function(e,t,n){var r=n(589);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:undefined,insertInto:void 0};n(0)(r,o);r.locals&&(e.exports=r.locals)},589:function(e,t,n){(e.exports=n(1)(!1)).push([e.i,'@charset "UTF-8";\n.Panel {\n  border: 1px solid #151413;\n  border-radius: 4px 4px 0 0;\n  box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);\n  background: #353433;\n}\n.Panelのtitle {\n  background: #252423 linear-gradient(to bottom, #353433 0%, #252423 50%, #151413 50%, #252423 100%);\n  border-bottom: 0;\n  text-align: center;\n  color: #8b8685;\n  padding: 0.5ex 1em;\n}\n.Panelのtitle > h2 {\n  margin: 0;\n  font: inherit;\n}',""])},593:function(e,t,n){"use strict";(function(e){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotechartLoader=void 0;var c=i(n(85)),l=i(n(289)),d=i(n(595)),f=u(n(519)),p=function(t){return e.isBuffer(t)?t:e.from(new Uint8Array(t))},h=function(){function e(){}return e.prototype.load=function(e,t,n){return t.name.match(/\.bmson$/i)?this.loadBmson(e,t,n):this.loadBMS(e,t,n)},e.prototype.loadBMS=function(e,t,n){return a(this,void 0,void 0,(function(){var r,o,i,a,u;return s(this,(function(s){switch(s.label){case 0:return r=p(e),o=c.Reader.getReaderOptionsFromFilename(t.name),[4,f.default.promisify(c.Reader.readAsync)(r,o)];case 1:return i=s.sent(),a=c.Compiler.compile(i),u=a.chart,[2,l.fromBMSChart(u,n)]}}))}))},e.prototype.loadBmson=function(e,t,n){return a(this,void 0,void 0,(function(){var t,r;return s(this,(function(o){return t=p(e),r=t.toString("utf-8"),[2,d.load(r,n)]}))}))},e}();t.NotechartLoader=h,t.default=h}).call(this,n(37).Buffer)},595:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.load=void 0;var s=i(n(596)),u=i(n(85)),c=a(n(177));function l(e){var t=(e.info&&e.info.judge_rank&&+e.info.judge_rank||100)/100;return[18*t,40*t]}t.load=function(e,t){var n=JSON.parse(e),r=s.songInfoForBmson(n),o=s.musicalScoreForBmson(n,{double:t.double}),i=s.barLinesForBmson(n),a={notes:o.notes.all(),timing:o.timing,keysounds:o.keysounds,songInfo:r,positioning:new u.Positioning([{t:0,x:0,dx:1,inclusive:!0}]),spacing:new u.Spacing([]),barLines:i,images:{eyecatch:n.info.eyecatch_image,background:n.info.back_image},expertJudgmentWindow:l(n)};return new c.default(a,t)}},596:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.keysForBmson=t.hasScratch=t.beatForPulseForBmson=t._slicesForNotesAndTiming=t.musicalScoreForBmson=t.timingInfoForBmson=t.barLinesForBmson=t.songInfoForBmson=void 0;var d=l(n(27)),f=i(n(85)),p=i(n(319)),h=i(n(320));function m(e){if(!e.version)return p.timingInfoForBmson(e);var t=b(e);return{initialBPM:e.info.init_bpm,actions:u(u([],s((e.bpm_events||[]).map((function(e){var n=e.y,r=e.bpm;return{type:"bpm",beat:t(n),bpm:r}}))),!1),s((e.stop_events||[]).map((function(e){var n=e.y,r=e.duration;return{type:"stop",beat:t(n),stopBeats:t(Math.floor(r))}}))),!1)}}function g(e){return e.version?e.sound_channels:e.soundChannel}a(n(597),t),t.songInfoForBmson=function(e){var t=e.info,n={};return t.title&&(n.title=t.title),t.artist&&(n.artist=t.artist),t.genre&&(n.genre=t.genre),t.level&&(n.level=t.level),n.subtitles=function(){if(!e.version)return["Warning: legacy bmson"];var n=[];t.chart_name&&"string"==typeof t.chart_name&&n.push(t.chart_name);t.subtitle&&"string"==typeof t.subtitle&&n.push.apply(n,u([],s(t.subtitle.split("\n")),!1));return n}(),t.subartists&&(n.subartists=t.subartists),new f.SongInfo(n)},t.barLinesForBmson=function(e){if(!e.version)return p.barLinesForBmson(e);var t=b(e),n=e.lines;return(0,d.default)(n).map((function(e){var n=e.y;return t(n)})).sortBy().value()},t.timingInfoForBmson=m,t.musicalScoreForBmson=function(e,t){void 0===t&&(t={});var n=function(e){var t=m(e),n=t.initialBPM,r=t.actions;return new f.Timing(n,r)}(e),r=function(e,t,n){var r,o,i,a,s=1,u=b(e),l=[],f={},p=g(e);if(p)try{for(var m=c(p),v=m.next();!v.done;v=m.next()){var _=v.value,w=_.name,E=_.notes,x=d.default.sortBy(E,"y"),S=s++,O=d.default.padStart(""+S,4,"0"),I=h.slicesForNotesAndTiming(E,t,{beatForPulse:u});f[O]=w;try{for(var M=(i=void 0,c(x)),C=M.next();!C.done;C=M.next()){var P=C.value,j=P.x,T=P.y,B=P.l,k={column:y(j,n),beat:u(T),keysound:O,endBeat:void 0};B>0&&(k.endBeat=u(T+B));var N=I.get(T);N&&(Object.assign(k,N),l.push(k))}}catch(e){i={error:e}}finally{try{C&&!C.done&&(a=M.return)&&a.call(M)}finally{if(i)throw i.error}}}}catch(e){r={error:e}}finally{try{v&&!v.done&&(o=m.return)&&o.call(m)}finally{if(r)throw r.error}}return{notes:l,keysounds:f}}(e,n,t),o=r.notes,i=r.keysounds;return{timing:n,notes:new f.Notes(o),keysounds:new f.Keysounds(i)}};var v=n(319);function b(e){if(!e.version)return p.beatForLoc;var t=e.info&&e.info.resolution||240;return function(e){return e/t}}function y(e,t){switch(e){case 1:return"1";case 2:return"2";case 3:return"3";case 4:return"4";case 5:return"5";case 6:return"6";case 7:return"7";case 8:return"SC"}if(t.double)switch(e){case 9:return"8";case 10:return"9";case 11:return"10";case 12:return"11";case 13:return"12";case 14:return"13";case 15:return"14";case 16:return"SC2"}}Object.defineProperty(t,"_slicesForNotesAndTiming",{enumerable:!0,get:function(){return v._slicesForNotesAndTiming}}),t.beatForPulseForBmson=b,t.hasScratch=function(e){var t,n,r,o,i=g(e);if(i)try{for(var a=c(i),s=a.next();!s.done;s=a.next()){var u=s.value.notes;try{for(var l=(r=void 0,c(u)),d=l.next();!d.done;d=l.next()){var f=d.value.x;if(8===f||18===f)return!0}}catch(e){r={error:e}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!1},t.keysForBmson=function(e){var t,n,r,o,i=g(e),a=!1,s=!1,u=!1;if(i)try{for(var l=c(i),d=l.next();!d.done;d=l.next()){var f=d.value.notes;try{for(var p=(r=void 0,c(f)),h=p.next();!h.done;h=p.next()){var m=h.value.x;a=!0,m>=11&&m<=20&&(s=!0),6!==m&&7!==m&&16!==m&&17!==m||(u=!0)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return a?s?u?"14K":"10K":u?"7K":"5K":"empty"}},597:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},60:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Speedcore=void 0;var r=n(237),o=function(){function e(e){e.forEach(r.Segment),this._segments=e}return e.prototype._reached=function(e,t,n){if(e>=this._segments.length)return!1;var r=this._segments[e],o=t(r);return r.inclusive?n>=o:n>o},e.prototype._segmentAt=function(e,t){for(var n=0;n<this._segments.length;n++)if(!this._reached(n+1,e,t))return this._segments[n];throw new Error("Unable to find a segment matching a criteria (this should never happen)!")},e.prototype.segmentAtX=function(e){return this._segmentAt(a,e)},e.prototype.segmentAtT=function(e){return this._segmentAt(i,e)},e.prototype.t=function(e){var t=this.segmentAtX(e);return t.t+(e-t.x)/(t.dx||1)},e.prototype.x=function(e){var t=this.segmentAtT(e);return t.x+(e-t.t)*t.dx},e.prototype.dx=function(e){return this.segmentAtT(e).dx},e}();t.Speedcore=o;var i=function(e){return e.t},a=function(e){return e.x}},62:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,"a",(function(){return r}))},79:function(e,t,n){"use strict";t.a=function(e){return{as:t=>new Promise((function(n,r){let o=new FileReader;switch(o.onload=function(){n(o.result)},o.onerror=function(){r(new Error("Unable to read from Blob"))},t){case"arraybuffer":o.readAsArrayBuffer(e);break;case"text":o.readAsText(e)}}))}}},80:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.assign=t.values=t.map=t.uniq=void 0;var o=r(n(533));t.uniq=o.default;var i=r(n(534));t.map=i.default;var a=r(n(535));t.values=a.default;var s=r(n(536));t.assign=s.default},85:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.Compiler=t.Reader=void 0;var s=i(n(233));t.Reader=s;var u=i(n(235));t.Compiler=u,a(n(236),t),a(n(39),t),a(n(108),t),a(n(109),t),a(n(60),t),a(n(110),t),a(n(238),t),a(n(241),t),a(n(242),t),a(n(243),t),a(n(244),t),a(n(245),t)},91:function(e,t,n){"use strict";t.a=document.querySelector("#scene-root")}}]);
//# sourceMappingURL=previewer-e740cf2ad8c5317f874c.js.map