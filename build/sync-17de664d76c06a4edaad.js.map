{"version":3,"sources":["file:///home/circleci/bemuse/bemuse/src/audio-context/index.js","file:///home/circleci/bemuse/bemuse/src/auto-synchro/music/data/bgm.ogg","file:///home/circleci/bemuse/bemuse/src/auto-synchro/music/data/intro.ogg","file:///home/circleci/bemuse/bemuse/src/auto-synchro/music/data/kick.ogg","file:///home/circleci/bemuse/bemuse/src/auto-synchro/music/data/snare.ogg","file:///home/circleci/bemuse/bemuse/src/auto-synchro/ui/ExperimentScene.scss?2d8f","file:///home/circleci/bemuse/bemuse/src/auto-synchro/ui/ExperimentScene.scss","file:///home/circleci/bemuse/bemuse/src/auto-synchro/music/index.js","file:///home/circleci/bemuse/bemuse/src/auto-synchro/ui/ExperimentScene.jsx","file:///home/circleci/bemuse/bemuse/src/auto-synchro/index.js","file:///home/circleci/bemuse/bemuse/node_modules/throat/index.js","file:///home/circleci/bemuse/bemuse/src/sampling-master/index.js","file:///home/circleci/bemuse/bemuse/src/sampling-master/ogg.ts","file:///home/circleci/bemuse/node_modules/audio-context/index.js","file:///home/circleci/bemuse/node_modules/classnames/index.js","file:///home/circleci/bemuse/node_modules/bytes/index.js","file:///home/circleci/bemuse/bemuse/src/progress/formatters.js","file:///home/circleci/bemuse/bemuse/src/utils/download.js","file:///home/circleci/bemuse/bemuse/src/flux/index.js","file:///home/circleci/bemuse/bemuse/src/utils/read-blob.js"],"names":["latencyHint","module","exports","content","i","options","transform","undefined","locals","push","ASSET_URLS","load","master","samples","fromPairs","Promise","all","map","name","download","as","then","buf","sample","sampleObj","callbacks","unmute","time","AudioTime","filter","createBiquadFilter","type","frequency","value","Q","connect","destination","state","part2","sequence","bpm","f","beat","nowBeat","Math","floor","beatSequencer","delay","kick","play","begin","bgm","intro","node","ok","snare","a","setInterval","t","p","nearestBeat","round","nearestBeatTime","music","audioContext","leadTime","this","_context","_start","currentTime","_startTime","Component","renderContents","props","loading","started","listening","renderCollection","renderMessage","renderReady","className","onClick","onStart","text","x","finished","min","numSamples","pow","style","WebkitTransform","latency","propTypes","bool","func","number","main","bootContext","setStatus","state口","Bus","state川","scan","change","assign","ConnectedExperimentScene","scene","createElement","postMessage","addEventListener","data","window","opener","render","appendTo","remote","max","d","sort","b","count","sum","length","getLatency","tap","getSample","progress","setTimeout","e","which","preventDefault","touches","Delayed","resolve","fn","self","args","PromiseArgument","throat","size","queue","run","result","apply","release","next","shift","temp","arguments","Error","FADE_LENGTH","dummyAudioTag","document","needsVorbisDecoder","canPlayType","SoundGroup","samplingMaster","volume","_master","_gain","createGain","gain","disconnect","Sample","audioBuffer","_buffer","PlayInstance","buffer","context","source","createBufferSource","onended","stop","group","_source","TEST_node","startTime","startOffset","start","fadeIn","fadeOutAt","setValueAtTime","end","duration","linearRampToValueAtTime","_startPlaying","_stoppedPlaying","onstop","playbackRate","random","unmuteAudio","ctx","osc","createOscillator","resume","console","error","_audioContext","_samples","_groups","_instances","Set","_destination","_destroyed","destroy","instance","blobOrArrayBuffer","_coerceToArrayBuffer","arrayBuffer","_decodeAudio","blobOrArrayBufferOrAudioBuffer","numberOfChannels","decode","ArrayBuffer","reject","byteLength","view","Uint8Array","decodeAudioData","add","delete","decoderPromise","limit","decodeOGG","stbvorbis","ns","default","src","eval","buffers","sampleRate","totalLength","eof","decodedChunks","createBuffer","channels","Array","fill","_","ch","ChannelDataWriter","getChannelData","chunk","forEach","audioSamples","channelIndex","write","doDecodeOGG","offset","cache","OfflineContext","OfflineAudioContext","webkitOfflineAudioContext","Context","AudioContext","webkitAudioContext","offline","err","hasOwn","hasOwnProperty","classNames","classes","arg","argType","isArray","inner","key","call","join","parse","format","formatThousandsRegExp","formatDecimalsRegExp","kb","mb","gb","tb","parseRegExp","Number","isFinite","mag","abs","thousandsSeparator","unitSeparator","decimalPlaces","fixedDecimals","Boolean","unit","toLowerCase","str","toFixed","replace","val","isNaN","floatValue","results","exec","parseFloat","parseInt","wrap","BYTES_FORMATTER","current","total","PERCENTAGE_FORMATTER","EXTRA_FORMATTER","extra","url","xh","XMLHttpRequest","open","responseType","onload","status","response","onerror","formatter","onprogress","report","loaded","send","toProperty","store","Property","EventStream","combineTemplate","props川","propsProperty","initialValue","super","handleValue","_mounted","setState","_unsubscribe","onValue","initialUnsubscribe","blob","reader","FileReader","readAsArrayBuffer","readAsText"],"mappings":"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","file":"build/sync-17de664d76c06a4edaad.js","sourcesContent":["import createAudioContext from 'audio-context'\n\nexport default createAudioContext({\n  latencyHint: 'interaction',\n})\n","module.exports = __webpack_public_path__ + \"build/c3e8436ef4e3bcc1fbc987075279be07.ogg\";","module.exports = __webpack_public_path__ + \"build/aaeef09f2847a09d179f45cfe118d7e7.ogg\";","module.exports = __webpack_public_path__ + \"build/c1df64d6d6f13f3a38362aea7cc70a3f.ogg\";","module.exports = __webpack_public_path__ + \"build/e733dbfbb80f232b5704be73413ff476.ogg\";","\nvar content = require(\"!!../../../../node_modules/css-loader/index.js??ref--9-1!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-3!./ExperimentScene.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--9-1!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-3!./ExperimentScene.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js??ref--9-1!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-3!./ExperimentScene.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"@charset \\\"UTF-8\\\";\\n.ExperimentScene {\\n  display: flex;\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  align-items: center;\\n  justify-content: center;\\n}\\n.ExperimentSceneのbutton {\\n  font: inherit;\\n  background: #252423 linear-gradient(to bottom, #454443, #151413);\\n  border: 1px solid #555453;\\n  padding: 0.5ex 1.3ex;\\n  color: #fff;\\n  border-radius: 4px;\\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);\\n  font-size: 18px;\\n}\\n.ExperimentSceneのbutton:hover {\\n  border-color: #656463;\\n}\\n.ExperimentSceneのbutton:focus {\\n  border-color: #8b8685;\\n  outline: 0;\\n}\\n.ExperimentSceneのbutton:active {\\n  background: #252423 linear-gradient(to top, #353433, #151413);\\n  border-color: #454443;\\n}\\n.ExperimentSceneのmessage {\\n  text-align: center;\\n  font-size: 16px;\\n}\\n.ExperimentSceneのprogress {\\n  width: 100px;\\n  margin: 1em auto;\\n  border: 1px solid #8b8685;\\n  padding: 1px;\\n}\\n.ExperimentSceneのprogressBar {\\n  height: 5px;\\n  background: #8b8685;\\n  transition: 0.5s -webkit-transform linear;\\n  transition: 0.5s transform linear;\\n  transition: 0.5s transform linear, 0.5s -webkit-transform linear;\\n  -webkit-transform-origin: left;\\n          transform-origin: left;\\n}\\n.ExperimentScene.is-finished .ExperimentSceneのwrapper {\\n  -webkit-animation: 3.243243243s experiment-scene--auto-synchro linear infinite;\\n          animation: 3.243243243s experiment-scene--auto-synchro linear infinite;\\n}\\n.ExperimentScene.is-finished .ExperimentSceneのwrapperInner {\\n  -webkit-animation: 3s experiment-scene--spin linear infinite;\\n          animation: 3s experiment-scene--spin linear infinite;\\n  -webkit-animation-delay: 13.378378377s;\\n          animation-delay: 13.378378377s;\\n}\\n\\n@-webkit-keyframes experiment-scene--auto-synchro {\\n  0.00% {\\n    -webkit-transform: scale(1);\\n            transform: scale(1);\\n  }\\n  11.88% {\\n    -webkit-transform: scale(0.95);\\n            transform: scale(0.95);\\n  }\\n  13.13% {\\n    -webkit-transform: scale(1.05);\\n            transform: scale(1.05);\\n  }\\n  24.38% {\\n    -webkit-transform: scale(0.95);\\n            transform: scale(0.95);\\n  }\\n  25.63% {\\n    -webkit-transform: scale(1.05);\\n            transform: scale(1.05);\\n  }\\n  36.88% {\\n    -webkit-transform: scale(0.95);\\n            transform: scale(0.95);\\n  }\\n  38.13% {\\n    -webkit-transform: scale(1.05);\\n            transform: scale(1.05);\\n  }\\n  49.38% {\\n    -webkit-transform: scale(0.95);\\n            transform: scale(0.95);\\n  }\\n  50.63% {\\n    -webkit-transform: scale(1.05);\\n            transform: scale(1.05);\\n  }\\n  61.88% {\\n    -webkit-transform: scale(0.95);\\n            transform: scale(0.95);\\n  }\\n  63.13% {\\n    -webkit-transform: scale(1.05);\\n            transform: scale(1.05);\\n  }\\n  74.38% {\\n    -webkit-transform: scale(0.95);\\n            transform: scale(0.95);\\n  }\\n  75.63% {\\n    -webkit-transform: scale(1.05);\\n            transform: scale(1.05);\\n  }\\n  86.88% {\\n    -webkit-transform: scale(0.95);\\n            transform: scale(0.95);\\n  }\\n  88.13% {\\n    -webkit-transform: scale(1.05);\\n            transform: scale(1.05);\\n  }\\n  100.00% {\\n    -webkit-transform: scale(1);\\n            transform: scale(1);\\n  }\\n}\\n\\n@keyframes experiment-scene--auto-synchro {\\n  0.00% {\\n    -webkit-transform: scale(1);\\n            transform: scale(1);\\n  }\\n  11.88% {\\n    -webkit-transform: scale(0.95);\\n            transform: scale(0.95);\\n  }\\n  13.13% {\\n    -webkit-transform: scale(1.05);\\n            transform: scale(1.05);\\n  }\\n  24.38% {\\n    -webkit-transform: scale(0.95);\\n            transform: scale(0.95);\\n  }\\n  25.63% {\\n    -webkit-transform: scale(1.05);\\n            transform: scale(1.05);\\n  }\\n  36.88% {\\n    -webkit-transform: scale(0.95);\\n            transform: scale(0.95);\\n  }\\n  38.13% {\\n    -webkit-transform: scale(1.05);\\n            transform: scale(1.05);\\n  }\\n  49.38% {\\n    -webkit-transform: scale(0.95);\\n            transform: scale(0.95);\\n  }\\n  50.63% {\\n    -webkit-transform: scale(1.05);\\n            transform: scale(1.05);\\n  }\\n  61.88% {\\n    -webkit-transform: scale(0.95);\\n            transform: scale(0.95);\\n  }\\n  63.13% {\\n    -webkit-transform: scale(1.05);\\n            transform: scale(1.05);\\n  }\\n  74.38% {\\n    -webkit-transform: scale(0.95);\\n            transform: scale(0.95);\\n  }\\n  75.63% {\\n    -webkit-transform: scale(1.05);\\n            transform: scale(1.05);\\n  }\\n  86.88% {\\n    -webkit-transform: scale(0.95);\\n            transform: scale(0.95);\\n  }\\n  88.13% {\\n    -webkit-transform: scale(1.05);\\n            transform: scale(1.05);\\n  }\\n  100.00% {\\n    -webkit-transform: scale(1);\\n            transform: scale(1);\\n  }\\n}\\n@-webkit-keyframes experiment-scene--spin {\\n  0% {\\n    -webkit-transform: rotate(0deg);\\n            transform: rotate(0deg);\\n  }\\n  4% {\\n    -webkit-transform: rotate(1.99deg);\\n            transform: rotate(1.99deg);\\n  }\\n  8% {\\n    -webkit-transform: rotate(3.85deg);\\n            transform: rotate(3.85deg);\\n  }\\n  12% {\\n    -webkit-transform: rotate(5.48deg);\\n            transform: rotate(5.48deg);\\n  }\\n  16% {\\n    -webkit-transform: rotate(6.75deg);\\n            transform: rotate(6.75deg);\\n  }\\n  20% {\\n    -webkit-transform: rotate(7.61deg);\\n            transform: rotate(7.61deg);\\n  }\\n  24% {\\n    -webkit-transform: rotate(7.98deg);\\n            transform: rotate(7.98deg);\\n  }\\n  28% {\\n    -webkit-transform: rotate(7.86deg);\\n            transform: rotate(7.86deg);\\n  }\\n  32% {\\n    -webkit-transform: rotate(7.24deg);\\n            transform: rotate(7.24deg);\\n  }\\n  36% {\\n    -webkit-transform: rotate(6.16deg);\\n            transform: rotate(6.16deg);\\n  }\\n  40% {\\n    -webkit-transform: rotate(4.7deg);\\n            transform: rotate(4.7deg);\\n  }\\n  44% {\\n    -webkit-transform: rotate(2.94deg);\\n            transform: rotate(2.94deg);\\n  }\\n  48% {\\n    -webkit-transform: rotate(1deg);\\n            transform: rotate(1deg);\\n  }\\n  52% {\\n    -webkit-transform: rotate(-1deg);\\n            transform: rotate(-1deg);\\n  }\\n  56% {\\n    -webkit-transform: rotate(-2.94deg);\\n            transform: rotate(-2.94deg);\\n  }\\n  60% {\\n    -webkit-transform: rotate(-4.7deg);\\n            transform: rotate(-4.7deg);\\n  }\\n  64% {\\n    -webkit-transform: rotate(-6.16deg);\\n            transform: rotate(-6.16deg);\\n  }\\n  68% {\\n    -webkit-transform: rotate(-7.24deg);\\n            transform: rotate(-7.24deg);\\n  }\\n  72% {\\n    -webkit-transform: rotate(-7.86deg);\\n            transform: rotate(-7.86deg);\\n  }\\n  76% {\\n    -webkit-transform: rotate(-7.98deg);\\n            transform: rotate(-7.98deg);\\n  }\\n  80% {\\n    -webkit-transform: rotate(-7.61deg);\\n            transform: rotate(-7.61deg);\\n  }\\n  84% {\\n    -webkit-transform: rotate(-6.75deg);\\n            transform: rotate(-6.75deg);\\n  }\\n  88% {\\n    -webkit-transform: rotate(-5.48deg);\\n            transform: rotate(-5.48deg);\\n  }\\n  92% {\\n    -webkit-transform: rotate(-3.85deg);\\n            transform: rotate(-3.85deg);\\n  }\\n  96% {\\n    -webkit-transform: rotate(-1.99deg);\\n            transform: rotate(-1.99deg);\\n  }\\n  100% {\\n    -webkit-transform: rotate(0deg);\\n            transform: rotate(0deg);\\n  }\\n}\\n@keyframes experiment-scene--spin {\\n  0% {\\n    -webkit-transform: rotate(0deg);\\n            transform: rotate(0deg);\\n  }\\n  4% {\\n    -webkit-transform: rotate(1.99deg);\\n            transform: rotate(1.99deg);\\n  }\\n  8% {\\n    -webkit-transform: rotate(3.85deg);\\n            transform: rotate(3.85deg);\\n  }\\n  12% {\\n    -webkit-transform: rotate(5.48deg);\\n            transform: rotate(5.48deg);\\n  }\\n  16% {\\n    -webkit-transform: rotate(6.75deg);\\n            transform: rotate(6.75deg);\\n  }\\n  20% {\\n    -webkit-transform: rotate(7.61deg);\\n            transform: rotate(7.61deg);\\n  }\\n  24% {\\n    -webkit-transform: rotate(7.98deg);\\n            transform: rotate(7.98deg);\\n  }\\n  28% {\\n    -webkit-transform: rotate(7.86deg);\\n            transform: rotate(7.86deg);\\n  }\\n  32% {\\n    -webkit-transform: rotate(7.24deg);\\n            transform: rotate(7.24deg);\\n  }\\n  36% {\\n    -webkit-transform: rotate(6.16deg);\\n            transform: rotate(6.16deg);\\n  }\\n  40% {\\n    -webkit-transform: rotate(4.7deg);\\n            transform: rotate(4.7deg);\\n  }\\n  44% {\\n    -webkit-transform: rotate(2.94deg);\\n            transform: rotate(2.94deg);\\n  }\\n  48% {\\n    -webkit-transform: rotate(1deg);\\n            transform: rotate(1deg);\\n  }\\n  52% {\\n    -webkit-transform: rotate(-1deg);\\n            transform: rotate(-1deg);\\n  }\\n  56% {\\n    -webkit-transform: rotate(-2.94deg);\\n            transform: rotate(-2.94deg);\\n  }\\n  60% {\\n    -webkit-transform: rotate(-4.7deg);\\n            transform: rotate(-4.7deg);\\n  }\\n  64% {\\n    -webkit-transform: rotate(-6.16deg);\\n            transform: rotate(-6.16deg);\\n  }\\n  68% {\\n    -webkit-transform: rotate(-7.24deg);\\n            transform: rotate(-7.24deg);\\n  }\\n  72% {\\n    -webkit-transform: rotate(-7.86deg);\\n            transform: rotate(-7.86deg);\\n  }\\n  76% {\\n    -webkit-transform: rotate(-7.98deg);\\n            transform: rotate(-7.98deg);\\n  }\\n  80% {\\n    -webkit-transform: rotate(-7.61deg);\\n            transform: rotate(-7.61deg);\\n  }\\n  84% {\\n    -webkit-transform: rotate(-6.75deg);\\n            transform: rotate(-6.75deg);\\n  }\\n  88% {\\n    -webkit-transform: rotate(-5.48deg);\\n            transform: rotate(-5.48deg);\\n  }\\n  92% {\\n    -webkit-transform: rotate(-3.85deg);\\n            transform: rotate(-3.85deg);\\n  }\\n  96% {\\n    -webkit-transform: rotate(-1.99deg);\\n            transform: rotate(-1.99deg);\\n  }\\n  100% {\\n    -webkit-transform: rotate(0deg);\\n            transform: rotate(0deg);\\n  }\\n}\", \"\"]);\n\n// exports\n","import _ from 'lodash'\nimport context from 'bemuse/audio-context'\nimport download from 'bemuse/utils/download'\nimport SamplingMaster from 'bemuse/sampling-master'\n\n/**\n * The asset URL of these files...\n */\nlet ASSET_URLS = {\n  'bgm.ogg': require('./data/bgm.ogg'),\n  'intro.ogg': require('./data/intro.ogg'),\n  'kick.ogg': require('./data/kick.ogg'),\n  'snare.ogg': require('./data/snare.ogg'),\n}\n\n/**\n * Loads the files and create a music instance.\n */\nexport async function load() {\n  let master = new SamplingMaster(context)\n\n  let sample = name =>\n    download(ASSET_URLS[`${name}.ogg`])\n      .as('arraybuffer')\n      .then(buf => master.sample(buf))\n  let samples = _.fromPairs(\n    await Promise.all(\n      ['bgm', 'intro', 'kick', 'snare'].map(name =>\n        sample(name).then(sampleObj => [name, sampleObj])\n      )\n    )\n  )\n  return music(master, samples)\n}\n\n/**\n * Takes the sample and sequences a music\n */\nfunction music(master, samples) {\n  return function play(callbacks) {\n    master.unmute()\n\n    let BPM = 148\n    let time = new AudioTime(context, -1)\n\n    let filter = context.createBiquadFilter()\n    filter.type = 'lowpass'\n    filter.frequency.value = 0\n    filter.Q.value = 10\n    filter.connect(context.destination)\n\n    let state = { part2: null }\n\n    let sequence = beatSequencer(BPM, (beat, delay) => {\n      if (beat % 8 !== 7) {\n        samples.kick.play(delay)\n      }\n      if (state.part2 !== null) {\n        beat -= state.part2.begin\n        if (beat % 128 === 0) {\n          samples.bgm.play(delay)\n        }\n      } else {\n        if (beat % 32 === 0) {\n          samples.intro.play(delay, { node: filter })\n        }\n        if (beat % 32 === 31) {\n          if (state.ok === true) {\n            samples.snare.play(delay)\n            state.part2 = { begin: beat + 1 }\n            callbacks.a()\n          }\n        }\n      }\n    })\n\n    setInterval(() => sequence(time.t), 33)\n\n    return {\n      ok() {\n        state.ok = true\n      },\n      progress(p) {\n        filter.frequency.value = 20000 * p * p * p\n      },\n      getSample() {\n        let nearestBeat = Math.round((time.t * BPM) / 60)\n        let nearestBeatTime = (nearestBeat * 60) / BPM\n        return [nearestBeat, time.t - nearestBeatTime]\n      },\n    }\n  }\n}\n\nfunction beatSequencer(bpm, f) {\n  let beat = -1\n  return time => {\n    let nowBeat = Math.floor(((time + 0.1) * bpm) / 60)\n    while (beat < nowBeat) {\n      beat += 1\n      let beatTime = (beat * 60) / bpm\n      f(beat, beatTime - time)\n    }\n  }\n}\n\nclass AudioTime {\n  constructor(audioContext, leadTime) {\n    this._context = audioContext\n    this._start = audioContext.currentTime\n    this._startTime = leadTime\n  }\n  get t() {\n    return this._context.currentTime - this._start + this._startTime\n  }\n}\n","import './ExperimentScene.scss'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport c from 'classnames'\n\nexport default class ExperimentScene extends React.Component {\n  static propTypes = {\n    finished: PropTypes.bool,\n    loading: PropTypes.bool,\n    started: PropTypes.bool,\n    listening: PropTypes.bool,\n    onStart: PropTypes.func,\n    numSamples: PropTypes.number,\n    latency: PropTypes.number,\n  }\n\n  render() {\n    return (\n      <div\n        className={c('ExperimentScene', { 'is-finished': this.props.finished })}\n      >\n        <div className='ExperimentSceneのwrapper'>\n          <div className='ExperimentSceneのwrapperInner'>\n            {this.renderContents()}\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  renderContents = () => {\n    if (this.props.loading) {\n      return null\n    } else if (!this.props.started) {\n      return this.renderReady()\n    } else if (!this.props.listening) {\n      return this.renderMessage('Please listen to the beats…')\n    } else {\n      return this.renderCollection()\n    }\n  }\n\n  renderReady = () => {\n    return (\n      <div className='ExperimentSceneのready'>\n        <button\n          className='ExperimentSceneのbutton'\n          onClick={this.props.onStart}\n        >\n          Start Calibration\n        </button>\n      </div>\n    )\n  }\n\n  renderMessage = text => {\n    return <div className='ExperimentSceneのmessage'>{text}</div>\n  }\n\n  renderCollection = () => {\n    let scale = this.props.finished\n      ? 1\n      : easeOut(Math.min(1, this.props.numSamples / 84))\n    let transform = 'scaleX(' + scale + ')'\n    let style = {\n      transform: transform,\n      WebkitTransform: transform,\n    }\n    return (\n      <div className='ExperimentSceneのcollection'>\n        {this.renderMessage(\n          this.props.finished\n            ? 'Your latency is ' +\n                this.props.latency +\n                'ms. Please close this window.'\n            : 'Please press the space bar when you hear the kick drum.'\n        )}\n        <div className='ExperimentSceneのprogress'>\n          <div className='ExperimentSceneのprogressBar' style={style} />\n        </div>\n      </div>\n    )\n  }\n}\n\nfunction easeOut(x) {\n  return 1 - Math.pow(1 - x, 2)\n}\n","import * as Music from './music'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport ExperimentScene from './ui/ExperimentScene.jsx'\nimport $ from 'jquery'\nimport _ from 'lodash'\nimport Bacon from 'baconjs'\nimport { connect } from 'bemuse/flux'\n\nexport function main(bootContext) {\n  bootContext.setStatus('Loading song')\n  const state口 = new Bacon.Bus()\n\n  const state川 = state口.scan(\n    {\n      loading: true,\n      started: false,\n      finished: false,\n      listening: false,\n      numSamples: 0,\n      latency: 0,\n    },\n    (state, change) => _.assign({}, state, change)\n  )\n\n  const ConnectedExperimentScene = connect(state川)(ExperimentScene)\n\n  const scene = React.createElement(ConnectedExperimentScene, {\n    onStart: () => {\n      play()\n      postMessage({ type: 'calibration-started' })\n      addEventListener('beforeunload', () => {\n        postMessage({ type: 'calibration-closed' })\n      })\n    },\n  })\n\n  ReactDOM.render(scene, $('<div></div>').appendTo('body')[0])\n\n  let play\n\n  function postMessage(data) {\n    if (window.opener) {\n      window.opener.postMessage(data, '*')\n    }\n  }\n\n  function getLatency(samples) {\n    let data = samples.map(d => d[1])\n    data.sort((a, b) => a - b)\n    let count = 0\n    let sum = 0\n    let start = Math.floor((data.length * 1) / 7)\n    for (let i = start; i < (data.length * 6) / 7; i++) {\n      count += 1\n      sum += data[i]\n    }\n    return Math.round((sum / count) * 1000)\n  }\n\n  return Music.load().then(music => {\n    let bound = 56\n    let samples = []\n    state口.push({ loading: false })\n    play = () => {\n      state口.push({ started: true })\n      let remote = music({\n        a() {\n          let latency = Math.max(0, getLatency(samples))\n          state口.push({ finished: true, latency })\n          postMessage({ latency: latency })\n        },\n      })\n      let tap = () => {\n        samples.push(remote.getSample())\n        remote.progress(Math.min(1, samples.length / bound))\n        if (samples.length >= bound) remote.ok()\n        state口.push({ numSamples: samples.length })\n      }\n      setTimeout(() => {\n        state口.push({ listening: true })\n        window.addEventListener('keydown', e => {\n          if (e.which !== 32) return\n          e.preventDefault()\n          tap()\n        })\n        window.addEventListener('touchstart', e => {\n          if (e.touches.length !== 1) return\n          e.preventDefault()\n          tap()\n        })\n      }, 6675)\n    }\n  })\n}\n","'use strict'\n\nmodule.exports = function (PromiseArgument) {\n  var Promise;\n  function throat(size, fn) {\n    var queue = []\n    function run(fn, self, args) {\n      if (size) {\n        size--\n        var result = new Promise(function (resolve) {\n          resolve(fn.apply(self, args))\n        })\n        result.then(release, release)\n        return result\n      } else {\n        return new Promise(function (resolve) {\n          queue.push(new Delayed(resolve, fn, self, args))\n        })\n      }\n    }\n    function release() {\n      size++\n      if (queue.length) {\n        var next = queue.shift()\n        next.resolve(run(next.fn, next.self, next.args))\n      }\n    }\n    if (typeof size === 'function' && typeof fn === 'number') {\n      var temp = fn;\n      fn = size;\n      size = temp;\n    }\n    if (typeof fn === 'function') {\n      return function () {\n        var args = [];\n        for (var i = 0; i < arguments.length; i++) {\n          args.push(arguments[i]);\n        }\n        return run(fn, this, args)\n      }\n    } else {\n      return function (fn) {\n        var args = [];\n        for (var i = 1; i < arguments.length; i++) {\n          args.push(arguments[i]);\n        }\n        return run(fn, this, args)\n      }\n    }\n  }\n  if (typeof arguments[0] === 'number' || typeof arguments[1] === 'number') {\n    Promise = module.exports.Promise;\n    if (typeof Promise !== 'function') {\n      throw new Error('You must provide a Promise polyfill for this library to work in older environments');\n    }\n    return throat(arguments[0], arguments[1]);\n  } else {\n    Promise = PromiseArgument;\n    return throat;\n  }\n}\n\n/* istanbul ignore next */\nif (typeof Promise === 'function') {\n  module.exports.Promise = Promise;\n}\n\nfunction Delayed(resolve, fn, self, args) {\n  this.resolve = resolve\n  this.fn = fn\n  this.self = self || null\n  this.args = args\n}\n","import defaultAudioContext from 'bemuse/audio-context'\nimport readBlob from 'bemuse/utils/read-blob'\nimport { decodeOGG } from './ogg'\n\nexport const FADE_LENGTH = 0.001\n\nlet dummyAudioTag = document.createElement('audio')\n// Checks whether an audio format is supported.\nexport function canPlay(type) {\n  // We have a Vorbis audio decoder!\n  if (type === 'audio/ogg; codecs=\"vorbis\"') return true\n  return dummyAudioTag.canPlayType(type) === 'probably'\n}\n\nconst needsVorbisDecoder = !dummyAudioTag.canPlayType(\n  'audio/ogg; codecs=\"vorbis\"'\n)\n\n// The sampling master is a wrapper class around Web Audio API\n// that takes care of:\n//\n// - Decoding audio from an ArrayBuffer or Blob (resulting in a \"Sample\").\n// - Playing the `Sample` and managing its lifecycle.\nexport class SamplingMaster {\n  constructor(audioContext) {\n    this._audioContext = audioContext || defaultAudioContext\n    this._samples = []\n    this._groups = []\n    this._instances = new Set()\n    this._destination = this._audioContext.destination\n  }\n\n  // Connects a dummy node to the audio, thereby unmuting the audio system on\n  // iOS devices (which keeps the audio muted until a user interacts with the\n  // page).\n  unmute() {\n    unmuteAudio(this._audioContext)\n  }\n\n  // The underlying AudioContext.\n  get audioContext() {\n    return this._audioContext\n  }\n\n  // The audio destination.\n  get destination() {\n    return this._destination\n  }\n\n  // Destroys this SamplingMaster, make it unusable.\n  destroy() {\n    if (this._destroyed) return\n    this._destroyed = true\n    for (let sample of this._samples) sample.destroy()\n    for (let instance of this._instances) instance.destroy()\n    this._samples = null\n    this._instances = null\n  }\n\n  // Decodes the audio data from a Blob or an ArrayBuffer.\n  // Returns an AudioBuffer which can be re-used in other sampling masters.\n  decode(blobOrArrayBuffer) {\n    return this._coerceToArrayBuffer(blobOrArrayBuffer).then(arrayBuffer =>\n      this._decodeAudio(arrayBuffer)\n    )\n  }\n\n  // Creates a `Sample` from a Blob or an ArrayBuffer or an AudioBuffer.\n  sample(blobOrArrayBufferOrAudioBuffer) {\n    const audioBufferPromise = (() => {\n      if (blobOrArrayBufferOrAudioBuffer.numberOfChannels) {\n        return Promise.resolve(blobOrArrayBufferOrAudioBuffer)\n      } else {\n        return this.decode(blobOrArrayBufferOrAudioBuffer)\n      }\n    })()\n    return audioBufferPromise.then(audioBuffer => {\n      if (this._destroyed) throw new Error('SamplingMaster already destroyed!')\n      var sample = new Sample(this, audioBuffer)\n      this._samples.push(sample)\n      return sample\n    })\n  }\n\n  group(options) {\n    const group = new SoundGroup(this, options)\n    this._groups.push(group)\n    return group\n  }\n\n  _coerceToArrayBuffer(blobOrArrayBuffer) {\n    if (blobOrArrayBuffer instanceof ArrayBuffer) {\n      return Promise.resolve(blobOrArrayBuffer)\n    } else {\n      return readBlob(blobOrArrayBuffer).as('arraybuffer')\n    }\n  }\n\n  _decodeAudio(arrayBuffer) {\n    return new Promise((resolve, reject) => {\n      if (needsVorbisDecoder && arrayBuffer.byteLength > 4) {\n        const view = new Uint8Array(arrayBuffer, 0, 4)\n        if (\n          view[0] === 0x4f &&\n          view[1] === 0x67 &&\n          view[2] === 0x67 &&\n          view[3] === 0x53\n        ) {\n          return resolve(decodeOGG(this.audioContext, arrayBuffer))\n        }\n      }\n      this.audioContext.decodeAudioData(\n        arrayBuffer,\n        function decodeAudioDataSuccess(audioBuffer) {\n          resolve(audioBuffer)\n        },\n        function decodeAudioDataFailure(e) {\n          reject(new Error('Unable to decode audio: ' + e))\n        }\n      )\n    })\n  }\n\n  _startPlaying(instance) {\n    this._instances.add(instance)\n  }\n\n  _stoppedPlaying(instance) {\n    this._instances.delete(instance)\n  }\n}\n\n// Sound group\nclass SoundGroup {\n  constructor(samplingMaster, { volume } = {}) {\n    this._master = samplingMaster\n    this._gain = this._master.audioContext.createGain()\n    if (volume != null) this._gain.gain.value = volume\n    this._gain.connect(this._master.destination)\n  }\n\n  get destination() {\n    return this._gain\n  }\n\n  destroy() {\n    this._gain.disconnect()\n    this._gain = null\n  }\n}\n\n// The Sample is created by and belongs to the `SamplingMaster`.\n//\n// You don't invoke this constructor directly; it is invoked by\n// `SamplingMaster#create`.\nclass Sample {\n  constructor(samplingMaster, audioBuffer) {\n    this._master = samplingMaster\n    this._buffer = audioBuffer\n  }\n\n  // Plays the sample and returns the new PlayInstance.\n  play(delay, options) {\n    return new PlayInstance(this._master, this._buffer, delay, options)\n  }\n\n  // Destroys this sample, thereby making it unusable.\n  destroy() {\n    this._master = null\n    this._buffer = null\n  }\n}\n\n// When a `Sample` is played, a PlayInstance is created.\n// A PlayInstance may not be reused; after the sound finishes playing,\n// you have to invoke `Sample#play` again.\n//\n// You don't invoke this constructor directly; it is invoked by `Sample#play`.\nclass PlayInstance {\n  constructor(samplingMaster, buffer, delay, options = {}) {\n    delay = delay || 0\n    this._master = samplingMaster\n\n    // Connect all the stuff...\n    let context = samplingMaster.audioContext\n    let source = context.createBufferSource()\n    source.buffer = buffer\n    source.onended = () => this.stop()\n    let gain = context.createGain()\n    source.connect(gain)\n    let destination =\n      options.node ||\n      (options.group && options.group.destination) ||\n      samplingMaster.destination\n    gain.connect(destination)\n    this._source = source\n    this._gain = this.TEST_node = gain\n\n    // Start the sound.\n    let startTime = !delay ? 0 : Math.max(0, context.currentTime + delay)\n    let startOffset = options.start || 0\n    let fadeIn = startOffset > 0\n    let fadeOutAt = false\n    if (fadeIn) {\n      gain.gain.setValueAtTime(0, 0)\n    }\n    if (options.end !== undefined) {\n      let duration = Math.max(options.end - startOffset, 0)\n      source.start(startTime, startOffset, duration + FADE_LENGTH)\n      fadeOutAt = context.currentTime + delay + duration\n    } else {\n      source.start(startTime, startOffset)\n    }\n    if (fadeIn) {\n      gain.gain.setValueAtTime(0, context.currentTime + delay)\n      gain.gain.linearRampToValueAtTime(\n        1,\n        context.currentTime + delay + FADE_LENGTH\n      )\n    }\n    if (fadeOutAt !== false) {\n      gain.gain.setValueAtTime(1, fadeOutAt)\n      gain.gain.linearRampToValueAtTime(0, fadeOutAt + FADE_LENGTH)\n    }\n    this._master._startPlaying(this)\n  }\n\n  // Stops the sample and disconnects the underlying Web Audio nodes.\n  stop() {\n    if (!this._source) return\n    this._source.stop(0)\n    this._source.disconnect()\n    this._gain.disconnect()\n    this._source = null\n    this._gain = null\n    this._master._stoppedPlaying(this)\n    if (this.onstop) this.onstop()\n  }\n\n  // Makes this PlayInstance sound off-pitch, as a result of badly hitting\n  // a note.\n  bad() {\n    if (!this._source) return\n    this._source.playbackRate.value =\n      Math.random() < 0.5 ? Math.pow(2, 1 / 24) : Math.pow(2, -1 / 24)\n  }\n\n  // Destroys this PlayInstance.\n  destroy() {\n    this.stop()\n  }\n}\n\nexport default SamplingMaster\n\n/**\n * Enables Web Audio on iOS. By default, on iOS, audio is disabled.\n * This function must be called before audio will start working. It must be\n * called as a response to some user interaction (e.g. touchstart).\n *\n * Also, there’s now Chrome autoplay policy taking effect.\n * https://developers.google.com/web/updates/2017/09/autoplay-policy-changes\n *\n * @param {AudioContext} ctx The AudioContext to be unmuted.\n */\nexport function unmuteAudio(ctx = defaultAudioContext) {\n  // Perform some strange magic to unmute the audio on iOS devices.\n  // This code doesn’t make sense at all, you know.\n  let gain = ctx.createGain()\n  let osc = ctx.createOscillator()\n  osc.frequency.value = 440\n  osc.start(ctx.currentTime + 0.1)\n  osc.stop(ctx.currentTime + 0.1)\n  gain.connect(ctx.destination)\n  gain.disconnect()\n\n  try {\n    ctx.resume()\n  } catch (e) {\n    console.error('[sampling-master] Cannot resume AudioContext', e)\n  }\n}\n","import throat from 'throat'\n\ntype OGGDecodeEvent = {\n  data?: Float32Array[]\n  sampleRate: number\n  error?: any\n  eof?: boolean\n}\n\ntype OGGDecoder = {\n  decode(arrayBuffer: ArrayBuffer, callback: (e: OGGDecodeEvent) => void): void\n}\n\nlet decoderPromise: Promise<OGGDecoder>\n\nconst limit = throat(1)\n\nfunction getDecoder() {\n  if (!decoderPromise) {\n    // @ts-ignore\n    decoderPromise = import(/* webpackChunkName: 'stbvorbis' */ 'raw-loader!./vendor/stbvorbis/stbvorbis-e6da5fe-NDEBUG.js')\n      .then(ns => ns.default)\n      .then(src => {\n        // eslint-disable-next-line no-eval\n        return (0, eval)(src + ';stbvorbis')\n      })\n  }\n  return decoderPromise\n}\n\n/**\n * Decodes an OGG file using stbvorbis.js.\n */\nexport async function decodeOGG(\n  audioContext: AudioContext,\n  arrayBuffer: ArrayBuffer\n) {\n  const stbvorbis = await getDecoder()\n  return limit(() => doDecodeOGG(stbvorbis, audioContext, arrayBuffer))\n}\n\nfunction doDecodeOGG(\n  stbvorbis: OGGDecoder,\n  audioContext: AudioContext,\n  arrayBuffer: ArrayBuffer\n) {\n  return new Promise<AudioBuffer>((resolve, reject) => {\n    const buffers: Float32Array[][] = []\n    let totalLength = 0\n    let sampleRate: number\n    stbvorbis.decode(arrayBuffer, function(e) {\n      if (e.data) {\n        sampleRate = e.sampleRate\n        buffers.push(e.data)\n        totalLength += e.data[0].length\n      }\n      if (e.error) {\n        const error =\n          e.error instanceof Error ? e.error : `stbvorbis.js Error: ${e.error}`\n        reject(error)\n      }\n      if (e.eof) {\n        resolve(createBuffer(audioContext, buffers, totalLength, sampleRate))\n      }\n    })\n  })\n}\n\nasync function createBuffer(\n  audioContext: AudioContext,\n  decodedChunks: Float32Array[][],\n  length: number,\n  sampleRate: number\n) {\n  if (!length) throw new Error(`stbvorbis.js Error: No length`)\n  if (!sampleRate) throw new Error(`stbvorbis.js Error: No sample rate`)\n  const numberOfChannels = decodedChunks[0].length\n  const audioBuffer = audioContext.createBuffer(\n    numberOfChannels,\n    length,\n    sampleRate\n  )\n  const channels: ChannelDataWriter[] = Array(audioBuffer.numberOfChannels)\n    .fill(null)\n    .map((_, ch) => new ChannelDataWriter(audioBuffer.getChannelData(ch)))\n  for (const chunk of decodedChunks) {\n    chunk.forEach((audioSamples, channelIndex) => {\n      channels[channelIndex].write(audioSamples)\n    })\n  }\n  return audioBuffer\n}\n\nclass ChannelDataWriter {\n  private offset = 0\n  constructor(private data: Float32Array) {}\n  write(audioSamples: Float32Array) {\n    // iOS Safari does not support `buf.copyToChannel(a, ch, track[ch])`, so we had to copy audio data sample-by-sample.\n    const { offset, data } = this\n    for (var i = 0; i < audioSamples.length; i++) {\n      data[i + offset] = audioSamples[i]\n    }\n    this.offset += audioSamples.length\n  }\n}\n","'use strict'\r\n\r\nvar cache = {}\r\n\r\nmodule.exports = function getContext (options) {\r\n\tif (typeof window === 'undefined') return null\r\n\t\r\n\tvar OfflineContext = window.OfflineAudioContext || window.webkitOfflineAudioContext\r\n\tvar Context = window.AudioContext || window.webkitAudioContext\r\n\t\r\n\tif (!Context) return null\r\n\r\n\tif (typeof options === 'number') {\r\n\t\toptions = {sampleRate: options}\r\n\t}\r\n\r\n\tvar sampleRate = options && options.sampleRate\r\n\r\n\r\n\tif (options && options.offline) {\r\n\t\tif (!OfflineContext) return null\r\n\r\n\t\treturn new OfflineContext(options.channels || 2, options.length, sampleRate || 44100)\r\n\t}\r\n\r\n\r\n\t//cache by sampleRate, rather strong guess\r\n\tvar ctx = cache[sampleRate]\r\n\r\n\tif (ctx) return ctx\r\n\r\n\t//several versions of firefox have issues with the\r\n\t//constructor argument\r\n\t//see: https://bugzilla.mozilla.org/show_bug.cgi?id=1361475\r\n\ttry {\r\n\t\tctx = new Context(options)\r\n\t}\r\n\tcatch (err) {\r\n\t\tctx = new Context()\r\n\t}\r\n\tcache[ctx.sampleRate] = cache[sampleRate] = ctx\r\n\r\n\treturn ctx\r\n}\r\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","/*!\n * bytes\n * Copyright(c) 2012-2014 TJ Holowaychuk\n * Copyright(c) 2015 Jed Watson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = bytes;\nmodule.exports.format = format;\nmodule.exports.parse = parse;\n\n/**\n * Module variables.\n * @private\n */\n\nvar formatThousandsRegExp = /\\B(?=(\\d{3})+(?!\\d))/g;\n\nvar formatDecimalsRegExp = /(?:\\.0*|(\\.[^0]+)0+)$/;\n\nvar map = {\n  b:  1,\n  kb: 1 << 10,\n  mb: 1 << 20,\n  gb: 1 << 30,\n  tb: ((1 << 30) * 1024)\n};\n\nvar parseRegExp = /^((-|\\+)?(\\d+(?:\\.\\d+)?)) *(kb|mb|gb|tb)$/i;\n\n/**\n * Convert the given value in bytes into a string or parse to string to an integer in bytes.\n *\n * @param {string|number} value\n * @param {{\n *  case: [string],\n *  decimalPlaces: [number]\n *  fixedDecimals: [boolean]\n *  thousandsSeparator: [string]\n *  unitSeparator: [string]\n *  }} [options] bytes options.\n *\n * @returns {string|number|null}\n */\n\nfunction bytes(value, options) {\n  if (typeof value === 'string') {\n    return parse(value);\n  }\n\n  if (typeof value === 'number') {\n    return format(value, options);\n  }\n\n  return null;\n}\n\n/**\n * Format the given value in bytes into a string.\n *\n * If the value is negative, it is kept as such. If it is a float,\n * it is rounded.\n *\n * @param {number} value\n * @param {object} [options]\n * @param {number} [options.decimalPlaces=2]\n * @param {number} [options.fixedDecimals=false]\n * @param {string} [options.thousandsSeparator=]\n * @param {string} [options.unit=]\n * @param {string} [options.unitSeparator=]\n *\n * @returns {string|null}\n * @public\n */\n\nfunction format(value, options) {\n  if (!Number.isFinite(value)) {\n    return null;\n  }\n\n  var mag = Math.abs(value);\n  var thousandsSeparator = (options && options.thousandsSeparator) || '';\n  var unitSeparator = (options && options.unitSeparator) || '';\n  var decimalPlaces = (options && options.decimalPlaces !== undefined) ? options.decimalPlaces : 2;\n  var fixedDecimals = Boolean(options && options.fixedDecimals);\n  var unit = (options && options.unit) || '';\n\n  if (!unit || !map[unit.toLowerCase()]) {\n    if (mag >= map.tb) {\n      unit = 'TB';\n    } else if (mag >= map.gb) {\n      unit = 'GB';\n    } else if (mag >= map.mb) {\n      unit = 'MB';\n    } else if (mag >= map.kb) {\n      unit = 'KB';\n    } else {\n      unit = 'B';\n    }\n  }\n\n  var val = value / map[unit.toLowerCase()];\n  var str = val.toFixed(decimalPlaces);\n\n  if (!fixedDecimals) {\n    str = str.replace(formatDecimalsRegExp, '$1');\n  }\n\n  if (thousandsSeparator) {\n    str = str.replace(formatThousandsRegExp, thousandsSeparator);\n  }\n\n  return str + unitSeparator + unit;\n}\n\n/**\n * Parse the string value into an integer in bytes.\n *\n * If no unit is given, it is assumed the value is in bytes.\n *\n * @param {number|string} val\n *\n * @returns {number|null}\n * @public\n */\n\nfunction parse(val) {\n  if (typeof val === 'number' && !isNaN(val)) {\n    return val;\n  }\n\n  if (typeof val !== 'string') {\n    return null;\n  }\n\n  // Test if the string passed is valid\n  var results = parseRegExp.exec(val);\n  var floatValue;\n  var unit = 'b';\n\n  if (!results) {\n    // Nothing could be extracted from the given string\n    floatValue = parseInt(val, 10);\n    unit = 'b'\n  } else {\n    // Retrieve the value and the unit\n    floatValue = parseFloat(results[1]);\n    unit = results[4].toLowerCase();\n  }\n\n  return Math.floor(map[unit] * floatValue);\n}\n","import bytes from 'bytes'\n\nlet wrap = f => progress => (progress.progress !== null ? f(progress) : '')\n\n// Formats the `Progress` as bytes (e.g. 1.23mb of 1.31mb).\nexport let BYTES_FORMATTER = wrap(\n  progress => bytes(progress.current) + ' / ' + bytes(progress.total)\n)\n\n// Formats the `Progress` as percentage.\nexport let PERCENTAGE_FORMATTER = wrap(\n  progress => ((progress.current / progress.total) * 100).toFixed(1) + '%'\n)\n\n// Formats the `Progress` simply by using the value of `Progress#extra`.\nexport let EXTRA_FORMATTER = wrap(progress => progress.extra + '')\n","import { BYTES_FORMATTER } from 'bemuse/progress/formatters'\n\n// Downloads the file from the URL.\n// The download will not actually be started unless the ``as()`` method\n// is called.\n//\n// .. js:function:: as(type)\n//\n//    Initiates the download as ``type``. The ``type`` is a string such as\n//    \"arraybuffer\" or \"blob\".\nexport function download(url) {\n  return {\n    as(type, progress) {\n      return new Promise((resolve, reject) => {\n        var xh = new XMLHttpRequest()\n        xh.open('GET', url, true)\n        xh.responseType = type\n        xh.onload = () => {\n          if (+xh.status === 200) {\n            resolve(xh.response)\n          } else {\n            reject(new Error(`Unable to download ${url}: HTTP ${xh.status}`))\n          }\n        }\n        xh.onerror = () => reject(new Error(`Unable to download ${url}`))\n        if (progress) {\n          progress.formatter = BYTES_FORMATTER\n          xh.onprogress = e => progress.report(e.loaded, e.total)\n        }\n        xh.send(null)\n      })\n    },\n  }\n}\n\nexport default download\n","import Bacon from 'baconjs'\nimport React from 'react'\n\nexport { Bacon }\n\nlet lock = false\n\nexport function Action(transform = x => x) {\n  var bus = new Bacon.Bus()\n  var action = function() {\n    if (lock) {\n      throw new Error(\n        'An action should not fire another action! (' + lock.stack + ')'\n      )\n    }\n    try {\n      let payload = transform.apply(null, arguments)\n      lock = new Error('Previous lock:')\n      bus.push(payload)\n    } finally {\n      lock = false\n    }\n  }\n  action.bus = bus\n  action.debug = function(prefix) {\n    bus.map(value => [prefix, value]).log()\n    return action\n  }\n  return action\n}\n\nexport function Store(store, options = {}) {\n  let lazy = !!options.lazy\n  store = toProperty(store)\n  store.get = () => {\n    let data\n    let unsubscribe = store.onValue(_data => (data = _data))\n    setTimeout(unsubscribe)\n    return data\n  }\n  if (!lazy) {\n    store.onValue(() => {})\n  }\n  return store\n}\n\nfunction toProperty(store) {\n  if (store instanceof Bacon.Property) {\n    return store\n  } else if (store instanceof Bacon.EventStream) {\n    throw new Error('Please convert Bacon.EventStream to Bacon.Property first.')\n  } else if (store && typeof store === 'object') {\n    return Bacon.combineTemplate(store)\n  } else {\n    throw new Error('Expected a Bacon.Property or a template.')\n  }\n}\n\nexport const connect = props川 => Component => {\n  let propsProperty = toProperty(props川)\n  return class extends React.Component {\n    constructor(props) {\n      super(props)\n      this._unsubscribe = propsProperty.onValue(this.handleValue)\n      let initialValue\n      const initialUnsubscribe = propsProperty.onValue(\n        value => (initialValue = value)\n      )\n      initialUnsubscribe()\n      this.state = { value: initialValue }\n    }\n\n    componentWillUnmount() {\n      this._mounted = false\n      if (this._unsubscribe) this._unsubscribe()\n    }\n\n    componentDidMount() {\n      this._mounted = true\n    }\n\n    handleValue = value => {\n      if (this._mounted) this.setState({ value })\n    }\n\n    render() {\n      return <Component {...this.state.value || {}} {...this.props} />\n    }\n  }\n}\n","export default readBlob\n\n// Reads the blob as a specified type. The blob will not actually be read\n// unless the ``as()`` method is called.\n//\n// .. js:function:: as(type)\n//\n//    Starts reading the blob as ``type``. The ``type`` is a String such as\n//    \"arraybuffer\" or \"text\".\nexport function readBlob(blob) {\n  return {\n    as(type) {\n      return new Promise(function(resolve, reject) {\n        let reader = new FileReader()\n        reader.onload = function() {\n          resolve(reader.result)\n        }\n        reader.onerror = function() {\n          reject(new Error('Unable to read from Blob'))\n        }\n        switch (type) {\n          case 'arraybuffer':\n            reader.readAsArrayBuffer(blob)\n            break\n          case 'text':\n            reader.readAsText(blob)\n            break\n        }\n      })\n    },\n  }\n}\n"],"sourceRoot":""}